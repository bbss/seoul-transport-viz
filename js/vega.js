SHADOW_ENV.evalLoad("module$node_modules$base64_js$index.js", true , "shadow$provide.module$node_modules$base64_js$index\x3dfunction(global,require,module,exports){function getLens(b64){var len\x3db64.length;if(0\x3clen%4)throw Error(\x22Invalid string. Length must be a multiple of 4\x22);b64\x3db64.indexOf(\x22\\x3d\x22);-1\x3d\x3d\x3db64\x26\x26(b64\x3dlen);return[b64,b64\x3d\x3d\x3dlen?0:4-b64%4]}function encodeChunk(uint8,start,end){for(var output\x3d[],i\x3dstart;i\x3cend;i+\x3d3)start\x3d(uint8[i]\x3c\x3c16\x2616711680)+(uint8[i+1]\x3c\x3c8\x2665280)+(uint8[i+2]\x26255),output.push(lookup[start\x3e\x3e18\x2663]+lookup[start\x3e\x3e12\x2663]+lookup[start\x3e\x3e6\x2663]+lookup[start\x26\n63]);return output.join(\x22\x22)}exports.byteLength\x3dfunction(b64){b64\x3dgetLens(b64);var placeHoldersLen\x3db64[1];return 3*(b64[0]+placeHoldersLen)/4-placeHoldersLen};exports.toByteArray\x3dfunction(b64){var lens\x3dgetLens(b64);var tmp\x3dlens[0];lens\x3dlens[1];var arr\x3dnew Arr(3*(tmp+lens)/4-lens),curByte\x3d0,len\x3d0\x3clens?tmp-4:tmp,i;for(i\x3d0;i\x3clen;i+\x3d4)tmp\x3drevLookup[b64.charCodeAt(i)]\x3c\x3c18|revLookup[b64.charCodeAt(i+1)]\x3c\x3c12|revLookup[b64.charCodeAt(i+2)]\x3c\x3c6|revLookup[b64.charCodeAt(i+3)],arr[curByte++]\x3dtmp\x3e\x3e16\x26255,arr[curByte++]\x3d\ntmp\x3e\x3e8\x26255,arr[curByte++]\x3dtmp\x26255;2\x3d\x3d\x3dlens\x26\x26(tmp\x3drevLookup[b64.charCodeAt(i)]\x3c\x3c2|revLookup[b64.charCodeAt(i+1)]\x3e\x3e4,arr[curByte++]\x3dtmp\x26255);1\x3d\x3d\x3dlens\x26\x26(tmp\x3drevLookup[b64.charCodeAt(i)]\x3c\x3c10|revLookup[b64.charCodeAt(i+1)]\x3c\x3c4|revLookup[b64.charCodeAt(i+2)]\x3e\x3e2,arr[curByte++]\x3dtmp\x3e\x3e8\x26255,arr[curByte++]\x3dtmp\x26255);return arr};exports.fromByteArray\x3dfunction(uint8){for(var len\x3duint8.length,extraBytes\x3dlen%3,parts\x3d[],i\x3d0,len2\x3dlen-extraBytes;i\x3clen2;i+\x3d16383)parts.push(encodeChunk(uint8,i,i+16383\x3elen2?len2:i+16383));\n1\x3d\x3d\x3dextraBytes?(uint8\x3duint8[len-1],parts.push(lookup[uint8\x3e\x3e2]+lookup[uint8\x3c\x3c4\x2663]+\x22\\x3d\\x3d\x22)):2\x3d\x3d\x3dextraBytes\x26\x26(uint8\x3d(uint8[len-2]\x3c\x3c8)+uint8[len-1],parts.push(lookup[uint8\x3e\x3e10]+lookup[uint8\x3e\x3e4\x2663]+lookup[uint8\x3c\x3c2\x2663]+\x22\\x3d\x22));return parts.join(\x22\x22)};var lookup\x3d[],revLookup\x3d[],Arr\x3d\x22undefined\x22!\x3d\x3dtypeof Uint8Array?Uint8Array:Array;for(global\x3d0;64\x3eglobal;++global)lookup[global]\x3d\x22ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/\x22[global],revLookup[\x22ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/\x22.charCodeAt(global)]\x3d\nglobal;revLookup[45]\x3d62;revLookup[95]\x3d63}");
SHADOW_ENV.evalLoad("module$node_modules$isarray$index.js", true , "shadow$provide.module$node_modules$isarray$index\x3dfunction(global,require,module,exports){var toString\x3d{}.toString;module.exports\x3dArray.isArray||function(arr){return\x22[object Array]\x22\x3d\x3dtoString.call(arr)}}");
SHADOW_ENV.evalLoad("module$node_modules$buffer$index.js", true , "shadow$provide.module$node_modules$buffer$index\x3dfunction(global,require,module,exports){function typedArraySupport(){try{var arr\x3dnew Uint8Array(1);arr.__proto__\x3d{__proto__:Uint8Array.prototype,foo:function(){return 42}};return 42\x3d\x3d\x3darr.foo()\x26\x26\x22function\x22\x3d\x3d\x3dtypeof arr.subarray\x26\x260\x3d\x3d\x3darr.subarray(1,1).byteLength}catch(e){return!1}}function createBuffer(that,length){if((Buffer.TYPED_ARRAY_SUPPORT?2147483647:1073741823)\x3clength)throw new RangeError(\x22Invalid typed array length\x22);Buffer.TYPED_ARRAY_SUPPORT?\n(that\x3dnew Uint8Array(length),that.__proto__\x3dBuffer.prototype):(null\x3d\x3d\x3dthat\x26\x26(that\x3dnew Buffer(length)),that.length\x3dlength);return that}function Buffer(arg,encodingOrOffset,length){if(!(Buffer.TYPED_ARRAY_SUPPORT||this instanceof Buffer))return new Buffer(arg,encodingOrOffset,length);if(\x22number\x22\x3d\x3d\x3dtypeof arg){if(\x22string\x22\x3d\x3d\x3dtypeof encodingOrOffset)throw Error(\x22If encoding is specified then the first argument must be a string\x22);return allocUnsafe(this,arg)}return from(this,arg,encodingOrOffset,length)}\nfunction from(that,value,encodingOrOffset,length){if(\x22number\x22\x3d\x3d\x3dtypeof value)throw new TypeError(\x27\x22value\x22 argument must not be a number\x27);if(\x22undefined\x22!\x3d\x3dtypeof ArrayBuffer\x26\x26value instanceof ArrayBuffer){value.byteLength;if(0\x3eencodingOrOffset||value.byteLength\x3cencodingOrOffset)throw new RangeError(\x22\x27offset\x27 is out of bounds\x22);if(value.byteLength\x3cencodingOrOffset+(length||0))throw new RangeError(\x22\x27length\x27 is out of bounds\x22);value\x3dvoid 0\x3d\x3d\x3dencodingOrOffset\x26\x26void 0\x3d\x3d\x3dlength?new Uint8Array(value):void 0\x3d\x3d\x3d\nlength?new Uint8Array(value,encodingOrOffset):new Uint8Array(value,encodingOrOffset,length);Buffer.TYPED_ARRAY_SUPPORT?(that\x3dvalue,that.__proto__\x3dBuffer.prototype):that\x3dfromArrayLike(that,value);return that}if(\x22string\x22\x3d\x3d\x3dtypeof value){length\x3dthat;that\x3dencodingOrOffset;if(\x22string\x22!\x3d\x3dtypeof that||\x22\x22\x3d\x3d\x3dthat)that\x3d\x22utf8\x22;if(!Buffer.isEncoding(that))throw new TypeError(\x27\x22encoding\x22 must be a valid string encoding\x27);encodingOrOffset\x3dbyteLength$jscomp$0(value,that)|0;length\x3dcreateBuffer(length,encodingOrOffset);\nvalue\x3dlength.write(value,that);value!\x3d\x3dencodingOrOffset\x26\x26(length\x3dlength.slice(0,value));return length}return fromObject(that,value)}function assertSize(size){if(\x22number\x22!\x3d\x3dtypeof size)throw new TypeError(\x27\x22size\x22 argument must be a number\x27);if(0\x3esize)throw new RangeError(\x27\x22size\x22 argument must not be negative\x27);}function allocUnsafe(that,size){assertSize(size);that\x3dcreateBuffer(that,0\x3esize?0:checked(size)|0);if(!Buffer.TYPED_ARRAY_SUPPORT)for(var i\x3d0;i\x3csize;++i)that[i]\x3d0;return that}function fromArrayLike(that,\narray){var length\x3d0\x3earray.length?0:checked(array.length)|0;that\x3dcreateBuffer(that,length);for(var i\x3d0;i\x3clength;i+\x3d1)that[i]\x3darray[i]\x26255;return that}function fromObject(that,obj){if(Buffer.isBuffer(obj)){var len\x3dchecked(obj.length)|0;that\x3dcreateBuffer(that,len);if(0\x3d\x3d\x3dthat.length)return that;obj.copy(that,0,0,len);return that}if(obj){if(\x22undefined\x22!\x3d\x3dtypeof ArrayBuffer\x26\x26obj.buffer instanceof ArrayBuffer||\x22length\x22in obj)return(len\x3d\x22number\x22!\x3d\x3dtypeof obj.length)||(len\x3dobj.length,len\x3dlen!\x3d\x3dlen),len?createBuffer(that,\n0):fromArrayLike(that,obj);if(\x22Buffer\x22\x3d\x3d\x3dobj.type\x26\x26isArray(obj.data))return fromArrayLike(that,obj.data)}throw new TypeError(\x22First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.\x22);}function checked(length){if(length\x3e\x3d(Buffer.TYPED_ARRAY_SUPPORT?2147483647:1073741823))throw new RangeError(\x22Attempt to allocate Buffer larger than maximum size: 0x\x22+(Buffer.TYPED_ARRAY_SUPPORT?2147483647:1073741823).toString(16)+\x22 bytes\x22);return length|0}function byteLength$jscomp$0(string,\nencoding){if(Buffer.isBuffer(string))return string.length;if(\x22undefined\x22!\x3d\x3dtypeof ArrayBuffer\x26\x26\x22function\x22\x3d\x3d\x3dtypeof ArrayBuffer.isView\x26\x26(ArrayBuffer.isView(string)||string instanceof ArrayBuffer))return string.byteLength;\x22string\x22!\x3d\x3dtypeof string\x26\x26(string\x3d\x22\x22+string);var len\x3dstring.length;if(0\x3d\x3d\x3dlen)return 0;for(var loweredCase\x3d!1;;)switch(encoding){case \x22ascii\x22:case \x22latin1\x22:case \x22binary\x22:return len;case \x22utf8\x22:case \x22utf-8\x22:case void 0:return utf8ToBytes(string).length;case \x22ucs2\x22:case \x22ucs-2\x22:case \x22utf16le\x22:case \x22utf-16le\x22:return 2*\nlen;case \x22hex\x22:return len\x3e\x3e\x3e1;case \x22base64\x22:return base64.toByteArray(base64clean(string)).length;default:if(loweredCase)return utf8ToBytes(string).length;encoding\x3d(\x22\x22+encoding).toLowerCase();loweredCase\x3d!0}}function slowToString(encoding,start,end){var loweredCase\x3d!1;if(void 0\x3d\x3d\x3dstart||0\x3estart)start\x3d0;if(start\x3ethis.length)return\x22\x22;if(void 0\x3d\x3d\x3dend||end\x3ethis.length)end\x3dthis.length;if(0\x3e\x3dend)return\x22\x22;end\x3e\x3e\x3e\x3d0;start\x3e\x3e\x3e\x3d0;if(end\x3c\x3dstart)return\x22\x22;for(encoding||(encoding\x3d\x22utf8\x22);;)switch(encoding){case \x22hex\x22:encoding\x3d\nstart;start\x3dend;end\x3dthis.length;if(!encoding||0\x3eencoding)encoding\x3d0;if(!start||0\x3estart||start\x3eend)start\x3dend;loweredCase\x3d\x22\x22;for(end\x3dencoding;end\x3cstart;++end)encoding\x3dloweredCase,loweredCase\x3dthis[end],loweredCase\x3d16\x3eloweredCase?\x220\x22+loweredCase.toString(16):loweredCase.toString(16),loweredCase\x3dencoding+loweredCase;return loweredCase;case \x22utf8\x22:case \x22utf-8\x22:return utf8Slice(this,start,end);case \x22ascii\x22:encoding\x3d\x22\x22;for(end\x3dMath.min(this.length,end);start\x3cend;++start)encoding+\x3dString.fromCharCode(this[start]\x26\n127);return encoding;case \x22latin1\x22:case \x22binary\x22:encoding\x3d\x22\x22;for(end\x3dMath.min(this.length,end);start\x3cend;++start)encoding+\x3dString.fromCharCode(this[start]);return encoding;case \x22base64\x22:return start\x3d0\x3d\x3d\x3dstart\x26\x26end\x3d\x3d\x3dthis.length?base64.fromByteArray(this):base64.fromByteArray(this.slice(start,end)),start;case \x22ucs2\x22:case \x22ucs-2\x22:case \x22utf16le\x22:case \x22utf-16le\x22:start\x3dthis.slice(start,end);end\x3d\x22\x22;for(encoding\x3d0;encoding\x3cstart.length;encoding+\x3d2)end+\x3dString.fromCharCode(start[encoding]+256*start[encoding+\n1]);return end;default:if(loweredCase)throw new TypeError(\x22Unknown encoding: \x22+encoding);encoding\x3d(encoding+\x22\x22).toLowerCase();loweredCase\x3d!0}}function swap(b,n,m){var i\x3db[n];b[n]\x3db[m];b[m]\x3di}function bidirectionalIndexOf(buffer,val,byteOffset,encoding,dir){if(0\x3d\x3d\x3dbuffer.length)return-1;\x22string\x22\x3d\x3d\x3dtypeof byteOffset?(encoding\x3dbyteOffset,byteOffset\x3d0):2147483647\x3cbyteOffset?byteOffset\x3d2147483647:-2147483648\x3ebyteOffset\x26\x26(byteOffset\x3d-2147483648);byteOffset\x3d+byteOffset;isNaN(byteOffset)\x26\x26(byteOffset\x3ddir?\n0:buffer.length-1);0\x3ebyteOffset\x26\x26(byteOffset\x3dbuffer.length+byteOffset);if(byteOffset\x3e\x3dbuffer.length){if(dir)return-1;byteOffset\x3dbuffer.length-1}else if(0\x3ebyteOffset)if(dir)byteOffset\x3d0;else return-1;\x22string\x22\x3d\x3d\x3dtypeof val\x26\x26(val\x3dBuffer.from(val,encoding));if(Buffer.isBuffer(val))return 0\x3d\x3d\x3dval.length?-1:arrayIndexOf(buffer,val,byteOffset,encoding,dir);if(\x22number\x22\x3d\x3d\x3dtypeof val)return val\x26\x3d255,Buffer.TYPED_ARRAY_SUPPORT\x26\x26\x22function\x22\x3d\x3d\x3dtypeof Uint8Array.prototype.indexOf?dir?Uint8Array.prototype.indexOf.call(buffer,\nval,byteOffset):Uint8Array.prototype.lastIndexOf.call(buffer,val,byteOffset):arrayIndexOf(buffer,[val],byteOffset,encoding,dir);throw new TypeError(\x22val must be string, number or Buffer\x22);}function arrayIndexOf(arr,val,byteOffset,encoding,dir){function read(buf,i){return 1\x3d\x3d\x3dindexSize?buf[i]:buf.readUInt16BE(i*indexSize)}var indexSize\x3d1,arrLength\x3darr.length,valLength\x3dval.length;if(void 0!\x3d\x3dencoding\x26\x26(encoding\x3dString(encoding).toLowerCase(),\x22ucs2\x22\x3d\x3d\x3dencoding||\x22ucs-2\x22\x3d\x3d\x3dencoding||\x22utf16le\x22\x3d\x3d\x3dencoding||\n\x22utf-16le\x22\x3d\x3d\x3dencoding)){if(2\x3earr.length||2\x3eval.length)return-1;indexSize\x3d2;arrLength/\x3d2;valLength/\x3d2;byteOffset/\x3d2}if(dir)for(encoding\x3d-1;byteOffset\x3carrLength;byteOffset++)if(read(arr,byteOffset)\x3d\x3d\x3dread(val,-1\x3d\x3d\x3dencoding?0:byteOffset-encoding)){if(-1\x3d\x3d\x3dencoding\x26\x26(encoding\x3dbyteOffset),byteOffset-encoding+1\x3d\x3d\x3dvalLength)return encoding*indexSize}else-1!\x3d\x3dencoding\x26\x26(byteOffset-\x3dbyteOffset-encoding),encoding\x3d-1;else for(byteOffset+valLength\x3earrLength\x26\x26(byteOffset\x3darrLength-valLength);0\x3c\x3dbyteOffset;byteOffset--){arrLength\x3d\n!0;for(encoding\x3d0;encoding\x3cvalLength;encoding++)if(read(arr,byteOffset+encoding)!\x3d\x3dread(val,encoding)){arrLength\x3d!1;break}if(arrLength)return byteOffset}return-1}function utf8Slice(buf,start,end){end\x3dMath.min(buf.length,end);for(var res\x3d[];start\x3cend;){var firstByte\x3dbuf[start],codePoint\x3dnull,bytesPerSequence\x3d239\x3cfirstByte?4:223\x3cfirstByte?3:191\x3cfirstByte?2:1;if(start+bytesPerSequence\x3c\x3dend)switch(bytesPerSequence){case 1:128\x3efirstByte\x26\x26(codePoint\x3dfirstByte);break;case 2:var secondByte\x3dbuf[start+1];128\x3d\x3d\x3d\n(secondByte\x26192)\x26\x26(firstByte\x3d(firstByte\x2631)\x3c\x3c6|secondByte\x2663,127\x3cfirstByte\x26\x26(codePoint\x3dfirstByte));break;case 3:secondByte\x3dbuf[start+1];var thirdByte\x3dbuf[start+2];128\x3d\x3d\x3d(secondByte\x26192)\x26\x26128\x3d\x3d\x3d(thirdByte\x26192)\x26\x26(firstByte\x3d(firstByte\x2615)\x3c\x3c12|(secondByte\x2663)\x3c\x3c6|thirdByte\x2663,2047\x3cfirstByte\x26\x26(55296\x3efirstByte||57343\x3cfirstByte)\x26\x26(codePoint\x3dfirstByte));break;case 4:secondByte\x3dbuf[start+1];thirdByte\x3dbuf[start+2];var fourthByte\x3dbuf[start+3];128\x3d\x3d\x3d(secondByte\x26192)\x26\x26128\x3d\x3d\x3d(thirdByte\x26192)\x26\x26128\x3d\x3d\x3d(fourthByte\x26192)\x26\x26\n(firstByte\x3d(firstByte\x2615)\x3c\x3c18|(secondByte\x2663)\x3c\x3c12|(thirdByte\x2663)\x3c\x3c6|fourthByte\x2663,65535\x3cfirstByte\x26\x261114112\x3efirstByte\x26\x26(codePoint\x3dfirstByte))}null\x3d\x3d\x3dcodePoint?(codePoint\x3d65533,bytesPerSequence\x3d1):65535\x3ccodePoint\x26\x26(codePoint-\x3d65536,res.push(codePoint\x3e\x3e\x3e10\x261023|55296),codePoint\x3d56320|codePoint\x261023);res.push(codePoint);start+\x3dbytesPerSequence}buf\x3dres.length;if(buf\x3c\x3dMAX_ARGUMENTS_LENGTH)res\x3dString.fromCharCode.apply(String,res);else{end\x3d\x22\x22;for(start\x3d0;start\x3cbuf;)end+\x3dString.fromCharCode.apply(String,\nres.slice(start,start+\x3dMAX_ARGUMENTS_LENGTH));res\x3dend}return res}function checkOffset(offset,ext,length){if(0!\x3d\x3doffset%1||0\x3eoffset)throw new RangeError(\x22offset is not uint\x22);if(offset+ext\x3elength)throw new RangeError(\x22Trying to access beyond buffer length\x22);}function checkInt(buf,value,offset,ext,max,min){if(!Buffer.isBuffer(buf))throw new TypeError(\x27\x22buffer\x22 argument must be a Buffer instance\x27);if(value\x3emax||value\x3cmin)throw new RangeError(\x27\x22value\x22 argument is out of bounds\x27);if(offset+ext\x3ebuf.length)throw new RangeError(\x22Index out of range\x22);\n}function objectWriteUInt16(buf,value,offset,littleEndian){0\x3evalue\x26\x26(value\x3d65535+value+1);for(var i\x3d0,j\x3dMath.min(buf.length-offset,2);i\x3cj;++i)buf[offset+i]\x3d(value\x26255\x3c\x3c8*(littleEndian?i:1-i))\x3e\x3e\x3e8*(littleEndian?i:1-i)}function objectWriteUInt32(buf,value,offset,littleEndian){0\x3evalue\x26\x26(value\x3d4294967295+value+1);for(var i\x3d0,j\x3dMath.min(buf.length-offset,4);i\x3cj;++i)buf[offset+i]\x3dvalue\x3e\x3e\x3e8*(littleEndian?i:3-i)\x26255}function checkIEEE754(buf,value,offset,ext,max,min){if(offset+ext\x3ebuf.length)throw new RangeError(\x22Index out of range\x22);\nif(0\x3eoffset)throw new RangeError(\x22Index out of range\x22);}function writeFloat(buf,value,offset,littleEndian,noAssert){noAssert||checkIEEE754(buf,value,offset,4,3.4028234663852886E38,-3.4028234663852886E38);ieee754.write(buf,value,offset,littleEndian,23,4);return offset+4}function writeDouble(buf,value,offset,littleEndian,noAssert){noAssert||checkIEEE754(buf,value,offset,8,1.7976931348623157E308,-1.7976931348623157E308);ieee754.write(buf,value,offset,littleEndian,52,8);return offset+8}function base64clean(str){str\x3d\nstr.trim?str.trim():str.replace(/^\\s+|\\s+$/g,\x22\x22);str\x3dstr.replace(INVALID_BASE64_RE,\x22\x22);if(2\x3estr.length)return\x22\x22;for(;0!\x3d\x3dstr.length%4;)str+\x3d\x22\\x3d\x22;return str}function utf8ToBytes(string,units){units\x3dunits||Infinity;for(var codePoint,length\x3dstring.length,leadSurrogate\x3dnull,bytes\x3d[],i\x3d0;i\x3clength;++i){codePoint\x3dstring.charCodeAt(i);if(55295\x3ccodePoint\x26\x2657344\x3ecodePoint){if(!leadSurrogate){if(56319\x3ccodePoint){-1\x3c(units-\x3d3)\x26\x26bytes.push(239,191,189);continue}else if(i+1\x3d\x3d\x3dlength){-1\x3c(units-\x3d3)\x26\x26bytes.push(239,\n191,189);continue}leadSurrogate\x3dcodePoint;continue}if(56320\x3ecodePoint){-1\x3c(units-\x3d3)\x26\x26bytes.push(239,191,189);leadSurrogate\x3dcodePoint;continue}codePoint\x3d(leadSurrogate-55296\x3c\x3c10|codePoint-56320)+65536}else leadSurrogate\x26\x26-1\x3c(units-\x3d3)\x26\x26bytes.push(239,191,189);leadSurrogate\x3dnull;if(128\x3ecodePoint){if(0\x3e--units)break;bytes.push(codePoint)}else if(2048\x3ecodePoint){if(0\x3e(units-\x3d2))break;bytes.push(codePoint\x3e\x3e6|192,codePoint\x2663|128)}else if(65536\x3ecodePoint){if(0\x3e(units-\x3d3))break;bytes.push(codePoint\x3e\x3e12|\n224,codePoint\x3e\x3e6\x2663|128,codePoint\x2663|128)}else if(1114112\x3ecodePoint){if(0\x3e(units-\x3d4))break;bytes.push(codePoint\x3e\x3e18|240,codePoint\x3e\x3e12\x2663|128,codePoint\x3e\x3e6\x2663|128,codePoint\x2663|128)}else throw Error(\x22Invalid code point\x22);}return bytes}function asciiToBytes(str){for(var byteArray\x3d[],i\x3d0;i\x3cstr.length;++i)byteArray.push(str.charCodeAt(i)\x26255);return byteArray}function blitBuffer(src,dst,offset,length){for(var i\x3d0;i\x3clength\x26\x26!(i+offset\x3e\x3ddst.length||i\x3e\x3dsrc.length);++i)dst[i+offset]\x3dsrc[i];return i}var base64\x3d\nrequire(\x22module$node_modules$base64_js$index\x22),ieee754\x3drequire(\x22module$node_modules$ieee754$index\x22),isArray\x3drequire(\x22module$node_modules$isarray$index\x22);exports.Buffer\x3dBuffer;exports.SlowBuffer\x3dfunction(length){+length!\x3dlength\x26\x26(length\x3d0);return Buffer.alloc(+length)};exports.INSPECT_MAX_BYTES\x3d50;Buffer.TYPED_ARRAY_SUPPORT\x3dvoid 0!\x3d\x3dglobal.TYPED_ARRAY_SUPPORT?global.TYPED_ARRAY_SUPPORT:typedArraySupport();exports.kMaxLength\x3dBuffer.TYPED_ARRAY_SUPPORT?2147483647:1073741823;Buffer.poolSize\x3d8192;Buffer._augment\x3d\nfunction(arr){arr.__proto__\x3dBuffer.prototype;return arr};Buffer.from\x3dfunction(value,encodingOrOffset,length){return from(null,value,encodingOrOffset,length)};Buffer.TYPED_ARRAY_SUPPORT\x26\x26(Buffer.prototype.__proto__\x3dUint8Array.prototype,Buffer.__proto__\x3dUint8Array,\x22undefined\x22!\x3d\x3dtypeof Symbol\x26\x26Symbol.species\x26\x26Buffer[Symbol.species]\x3d\x3d\x3dBuffer\x26\x26Object.defineProperty(Buffer,Symbol.species,{value:null,configurable:!0}));Buffer.alloc\x3dfunction(size,fill,encoding){assertSize(size);size\x3d0\x3e\x3dsize?createBuffer(null,\nsize):void 0!\x3d\x3dfill?\x22string\x22\x3d\x3d\x3dtypeof encoding?createBuffer(null,size).fill(fill,encoding):createBuffer(null,size).fill(fill):createBuffer(null,size);return size};Buffer.allocUnsafe\x3dfunction(size){return allocUnsafe(null,size)};Buffer.allocUnsafeSlow\x3dfunction(size){return allocUnsafe(null,size)};Buffer.isBuffer\x3dfunction(b){return!(null\x3d\x3db||!b._isBuffer)};Buffer.compare\x3dfunction(a,b){if(!Buffer.isBuffer(a)||!Buffer.isBuffer(b))throw new TypeError(\x22Arguments must be Buffers\x22);if(a\x3d\x3d\x3db)return 0;for(var x\x3d\na.length,y\x3db.length,i\x3d0,len\x3dMath.min(x,y);i\x3clen;++i)if(a[i]!\x3d\x3db[i]){x\x3da[i];y\x3db[i];break}return x\x3cy?-1:y\x3cx?1:0};Buffer.isEncoding\x3dfunction(encoding){switch(String(encoding).toLowerCase()){case \x22hex\x22:case \x22utf8\x22:case \x22utf-8\x22:case \x22ascii\x22:case \x22latin1\x22:case \x22binary\x22:case \x22base64\x22:case \x22ucs2\x22:case \x22ucs-2\x22:case \x22utf16le\x22:case \x22utf-16le\x22:return!0;default:return!1}};Buffer.concat\x3dfunction(list,length){if(!isArray(list))throw new TypeError(\x27\x22list\x22 argument must be an Array of Buffers\x27);if(0\x3d\x3d\x3dlist.length)return Buffer.alloc(0);\nvar i;if(void 0\x3d\x3d\x3dlength)for(i\x3dlength\x3d0;i\x3clist.length;++i)length+\x3dlist[i].length;length\x3dBuffer.allocUnsafe(length);var pos\x3d0;for(i\x3d0;i\x3clist.length;++i){var buf\x3dlist[i];if(!Buffer.isBuffer(buf))throw new TypeError(\x27\x22list\x22 argument must be an Array of Buffers\x27);buf.copy(length,pos);pos+\x3dbuf.length}return length};Buffer.byteLength\x3dbyteLength$jscomp$0;Buffer.prototype._isBuffer\x3d!0;Buffer.prototype.swap16\x3dfunction(){var len\x3dthis.length;if(0!\x3d\x3dlen%2)throw new RangeError(\x22Buffer size must be a multiple of 16-bits\x22);\nfor(var i\x3d0;i\x3clen;i+\x3d2)swap(this,i,i+1);return this};Buffer.prototype.swap32\x3dfunction(){var len\x3dthis.length;if(0!\x3d\x3dlen%4)throw new RangeError(\x22Buffer size must be a multiple of 32-bits\x22);for(var i\x3d0;i\x3clen;i+\x3d4)swap(this,i,i+3),swap(this,i+1,i+2);return this};Buffer.prototype.swap64\x3dfunction(){var len\x3dthis.length;if(0!\x3d\x3dlen%8)throw new RangeError(\x22Buffer size must be a multiple of 64-bits\x22);for(var i\x3d0;i\x3clen;i+\x3d8)swap(this,i,i+7),swap(this,i+1,i+6),swap(this,i+2,i+5),swap(this,i+3,i+4);return this};\nBuffer.prototype.toString\x3dfunction(){var length\x3dthis.length|0;return 0\x3d\x3d\x3dlength?\x22\x22:0\x3d\x3d\x3darguments.length?utf8Slice(this,0,length):slowToString.apply(this,arguments)};Buffer.prototype.equals\x3dfunction(b){if(!Buffer.isBuffer(b))throw new TypeError(\x22Argument must be a Buffer\x22);return this\x3d\x3d\x3db?!0:0\x3d\x3d\x3dBuffer.compare(this,b)};Buffer.prototype.inspect\x3dfunction(){var str\x3d\x22\x22,max\x3dexports.INSPECT_MAX_BYTES;0\x3cthis.length\x26\x26(str\x3dthis.toString(\x22hex\x22,0,max).match(/.{2}/g).join(\x22 \x22),this.length\x3emax\x26\x26(str+\x3d\x22 ... \x22));\nreturn\x22\\x3cBuffer \x22+str+\x22\\x3e\x22};Buffer.prototype.compare\x3dfunction(target,start,end,thisStart,thisEnd){if(!Buffer.isBuffer(target))throw new TypeError(\x22Argument must be a Buffer\x22);void 0\x3d\x3d\x3dstart\x26\x26(start\x3d0);void 0\x3d\x3d\x3dend\x26\x26(end\x3dtarget?target.length:0);void 0\x3d\x3d\x3dthisStart\x26\x26(thisStart\x3d0);void 0\x3d\x3d\x3dthisEnd\x26\x26(thisEnd\x3dthis.length);if(0\x3estart||end\x3etarget.length||0\x3ethisStart||thisEnd\x3ethis.length)throw new RangeError(\x22out of range index\x22);if(thisStart\x3e\x3dthisEnd\x26\x26start\x3e\x3dend)return 0;if(thisStart\x3e\x3dthisEnd)return-1;\nif(start\x3e\x3dend)return 1;start\x3e\x3e\x3e\x3d0;end\x3e\x3e\x3e\x3d0;thisStart\x3e\x3e\x3e\x3d0;thisEnd\x3e\x3e\x3e\x3d0;if(this\x3d\x3d\x3dtarget)return 0;var x\x3dthisEnd-thisStart,y\x3dend-start,len\x3dMath.min(x,y);thisStart\x3dthis.slice(thisStart,thisEnd);target\x3dtarget.slice(start,end);for(start\x3d0;start\x3clen;++start)if(thisStart[start]!\x3d\x3dtarget[start]){x\x3dthisStart[start];y\x3dtarget[start];break}return x\x3cy?-1:y\x3cx?1:0};Buffer.prototype.includes\x3dfunction(val,byteOffset,encoding){return-1!\x3d\x3dthis.indexOf(val,byteOffset,encoding)};Buffer.prototype.indexOf\x3dfunction(val,\nbyteOffset,encoding){return bidirectionalIndexOf(this,val,byteOffset,encoding,!0)};Buffer.prototype.lastIndexOf\x3dfunction(val,byteOffset,encoding){return bidirectionalIndexOf(this,val,byteOffset,encoding,!1)};Buffer.prototype.write\x3dfunction(string,offset,length,encoding){if(void 0\x3d\x3d\x3doffset)encoding\x3d\x22utf8\x22,length\x3dthis.length,offset\x3d0;else if(void 0\x3d\x3d\x3dlength\x26\x26\x22string\x22\x3d\x3d\x3dtypeof offset)encoding\x3doffset,length\x3dthis.length,offset\x3d0;else if(isFinite(offset))offset|\x3d0,isFinite(length)?(length|\x3d0,void 0\x3d\x3d\x3dencoding\x26\x26\n(encoding\x3d\x22utf8\x22)):(encoding\x3dlength,length\x3dvoid 0);else throw Error(\x22Buffer.write(string, encoding, offset[, length]) is no longer supported\x22);var remaining\x3dthis.length-offset;if(void 0\x3d\x3d\x3dlength||length\x3eremaining)length\x3dremaining;if(0\x3cstring.length\x26\x26(0\x3elength||0\x3eoffset)||offset\x3ethis.length)throw new RangeError(\x22Attempt to write outside buffer bounds\x22);encoding||(encoding\x3d\x22utf8\x22);for(remaining\x3d!1;;)switch(encoding){case \x22hex\x22:a:{offset\x3dNumber(offset)||0;encoding\x3dthis.length-offset;length?(length\x3dNumber(length),\nlength\x3eencoding\x26\x26(length\x3dencoding)):length\x3dencoding;encoding\x3dstring.length;if(0!\x3d\x3dencoding%2)throw new TypeError(\x22Invalid hex string\x22);length\x3eencoding/2\x26\x26(length\x3dencoding/2);for(encoding\x3d0;encoding\x3clength;++encoding){remaining\x3dparseInt(string.substr(2*encoding,2),16);if(isNaN(remaining)){string\x3dencoding;break a}this[offset+encoding]\x3dremaining}string\x3dencoding}return string;case \x22utf8\x22:case \x22utf-8\x22:return blitBuffer(utf8ToBytes(string,this.length-offset),this,offset,length);case \x22ascii\x22:return blitBuffer(asciiToBytes(string),\nthis,offset,length);case \x22latin1\x22:case \x22binary\x22:return blitBuffer(asciiToBytes(string),this,offset,length);case \x22base64\x22:return blitBuffer(base64.toByteArray(base64clean(string)),this,offset,length);case \x22ucs2\x22:case \x22ucs-2\x22:case \x22utf16le\x22:case \x22utf-16le\x22:encoding\x3dstring;remaining\x3dthis.length-offset;for(var byteArray\x3d[],i\x3d0;i\x3cencoding.length\x26\x26!(0\x3e(remaining-\x3d2));++i){var lo\x3dencoding.charCodeAt(i);string\x3dlo\x3e\x3e8;lo%\x3d256;byteArray.push(lo);byteArray.push(string)}return blitBuffer(byteArray,this,offset,\nlength);default:if(remaining)throw new TypeError(\x22Unknown encoding: \x22+encoding);encoding\x3d(\x22\x22+encoding).toLowerCase();remaining\x3d!0}};Buffer.prototype.toJSON\x3dfunction(){return{type:\x22Buffer\x22,data:Array.prototype.slice.call(this._arr||this,0)}};var MAX_ARGUMENTS_LENGTH\x3d4096;Buffer.prototype.slice\x3dfunction(start,end){var len\x3dthis.length;start\x3d~~start;end\x3dvoid 0\x3d\x3d\x3dend?len:~~end;0\x3estart?(start+\x3dlen,0\x3estart\x26\x26(start\x3d0)):start\x3elen\x26\x26(start\x3dlen);0\x3eend?(end+\x3dlen,0\x3eend\x26\x26(end\x3d0)):end\x3elen\x26\x26(end\x3dlen);end\x3cstart\x26\x26(end\x3d\nstart);if(Buffer.TYPED_ARRAY_SUPPORT)end\x3dthis.subarray(start,end),end.__proto__\x3dBuffer.prototype;else{len\x3dend-start;end\x3dnew Buffer(len,void 0);for(var i\x3d0;i\x3clen;++i)end[i]\x3dthis[i+start]}return end};Buffer.prototype.readUIntLE\x3dfunction(offset,byteLength,noAssert){offset|\x3d0;byteLength|\x3d0;noAssert||checkOffset(offset,byteLength,this.length);noAssert\x3dthis[offset];for(var mul\x3d1,i\x3d0;++i\x3cbyteLength\x26\x26(mul*\x3d256);)noAssert+\x3dthis[offset+i]*mul;return noAssert};Buffer.prototype.readUIntBE\x3dfunction(offset,byteLength,\nnoAssert){offset|\x3d0;byteLength|\x3d0;noAssert||checkOffset(offset,byteLength,this.length);noAssert\x3dthis[offset+--byteLength];for(var mul\x3d1;0\x3cbyteLength\x26\x26(mul*\x3d256);)noAssert+\x3dthis[offset+--byteLength]*mul;return noAssert};Buffer.prototype.readUInt8\x3dfunction(offset,noAssert){noAssert||checkOffset(offset,1,this.length);return this[offset]};Buffer.prototype.readUInt16LE\x3dfunction(offset,noAssert){noAssert||checkOffset(offset,2,this.length);return this[offset]|this[offset+1]\x3c\x3c8};Buffer.prototype.readUInt16BE\x3d\nfunction(offset,noAssert){noAssert||checkOffset(offset,2,this.length);return this[offset]\x3c\x3c8|this[offset+1]};Buffer.prototype.readUInt32LE\x3dfunction(offset,noAssert){noAssert||checkOffset(offset,4,this.length);return(this[offset]|this[offset+1]\x3c\x3c8|this[offset+2]\x3c\x3c16)+16777216*this[offset+3]};Buffer.prototype.readUInt32BE\x3dfunction(offset,noAssert){noAssert||checkOffset(offset,4,this.length);return 16777216*this[offset]+(this[offset+1]\x3c\x3c16|this[offset+2]\x3c\x3c8|this[offset+3])};Buffer.prototype.readIntLE\x3d\nfunction(offset,byteLength,noAssert){offset|\x3d0;byteLength|\x3d0;noAssert||checkOffset(offset,byteLength,this.length);noAssert\x3dthis[offset];for(var mul\x3d1,i\x3d0;++i\x3cbyteLength\x26\x26(mul*\x3d256);)noAssert+\x3dthis[offset+i]*mul;noAssert\x3e\x3d128*mul\x26\x26(noAssert-\x3dMath.pow(2,8*byteLength));return noAssert};Buffer.prototype.readIntBE\x3dfunction(offset,byteLength,noAssert){offset|\x3d0;byteLength|\x3d0;noAssert||checkOffset(offset,byteLength,this.length);noAssert\x3dbyteLength;for(var mul\x3d1,val\x3dthis[offset+--noAssert];0\x3cnoAssert\x26\x26(mul*\x3d\n256);)val+\x3dthis[offset+--noAssert]*mul;val\x3e\x3d128*mul\x26\x26(val-\x3dMath.pow(2,8*byteLength));return val};Buffer.prototype.readInt8\x3dfunction(offset,noAssert){noAssert||checkOffset(offset,1,this.length);return this[offset]\x26128?-1*(255-this[offset]+1):this[offset]};Buffer.prototype.readInt16LE\x3dfunction(offset,noAssert){noAssert||checkOffset(offset,2,this.length);offset\x3dthis[offset]|this[offset+1]\x3c\x3c8;return offset\x2632768?offset|4294901760:offset};Buffer.prototype.readInt16BE\x3dfunction(offset,noAssert){noAssert||\ncheckOffset(offset,2,this.length);offset\x3dthis[offset+1]|this[offset]\x3c\x3c8;return offset\x2632768?offset|4294901760:offset};Buffer.prototype.readInt32LE\x3dfunction(offset,noAssert){noAssert||checkOffset(offset,4,this.length);return this[offset]|this[offset+1]\x3c\x3c8|this[offset+2]\x3c\x3c16|this[offset+3]\x3c\x3c24};Buffer.prototype.readInt32BE\x3dfunction(offset,noAssert){noAssert||checkOffset(offset,4,this.length);return this[offset]\x3c\x3c24|this[offset+1]\x3c\x3c16|this[offset+2]\x3c\x3c8|this[offset+3]};Buffer.prototype.readFloatLE\x3dfunction(offset,\nnoAssert){noAssert||checkOffset(offset,4,this.length);return ieee754.read(this,offset,!0,23,4)};Buffer.prototype.readFloatBE\x3dfunction(offset,noAssert){noAssert||checkOffset(offset,4,this.length);return ieee754.read(this,offset,!1,23,4)};Buffer.prototype.readDoubleLE\x3dfunction(offset,noAssert){noAssert||checkOffset(offset,8,this.length);return ieee754.read(this,offset,!0,52,8)};Buffer.prototype.readDoubleBE\x3dfunction(offset,noAssert){noAssert||checkOffset(offset,8,this.length);return ieee754.read(this,\noffset,!1,52,8)};Buffer.prototype.writeUIntLE\x3dfunction(value,offset,byteLength,noAssert){value\x3d+value;offset|\x3d0;byteLength|\x3d0;noAssert||checkInt(this,value,offset,byteLength,Math.pow(2,8*byteLength)-1,0);noAssert\x3d1;var i\x3d0;for(this[offset]\x3dvalue\x26255;++i\x3cbyteLength\x26\x26(noAssert*\x3d256);)this[offset+i]\x3dvalue/noAssert\x26255;return offset+byteLength};Buffer.prototype.writeUIntBE\x3dfunction(value,offset,byteLength,noAssert){value\x3d+value;offset|\x3d0;byteLength|\x3d0;noAssert||checkInt(this,value,offset,byteLength,Math.pow(2,\n8*byteLength)-1,0);noAssert\x3dbyteLength-1;var mul\x3d1;for(this[offset+noAssert]\x3dvalue\x26255;0\x3c\x3d--noAssert\x26\x26(mul*\x3d256);)this[offset+noAssert]\x3dvalue/mul\x26255;return offset+byteLength};Buffer.prototype.writeUInt8\x3dfunction(value,offset,noAssert){value\x3d+value;offset|\x3d0;noAssert||checkInt(this,value,offset,1,255,0);Buffer.TYPED_ARRAY_SUPPORT||(value\x3dMath.floor(value));this[offset]\x3dvalue\x26255;return offset+1};Buffer.prototype.writeUInt16LE\x3dfunction(value,offset,noAssert){value\x3d+value;offset|\x3d0;noAssert||checkInt(this,\nvalue,offset,2,65535,0);Buffer.TYPED_ARRAY_SUPPORT?(this[offset]\x3dvalue\x26255,this[offset+1]\x3dvalue\x3e\x3e\x3e8):objectWriteUInt16(this,value,offset,!0);return offset+2};Buffer.prototype.writeUInt16BE\x3dfunction(value,offset,noAssert){value\x3d+value;offset|\x3d0;noAssert||checkInt(this,value,offset,2,65535,0);Buffer.TYPED_ARRAY_SUPPORT?(this[offset]\x3dvalue\x3e\x3e\x3e8,this[offset+1]\x3dvalue\x26255):objectWriteUInt16(this,value,offset,!1);return offset+2};Buffer.prototype.writeUInt32LE\x3dfunction(value,offset,noAssert){value\x3d+value;\noffset|\x3d0;noAssert||checkInt(this,value,offset,4,4294967295,0);Buffer.TYPED_ARRAY_SUPPORT?(this[offset+3]\x3dvalue\x3e\x3e\x3e24,this[offset+2]\x3dvalue\x3e\x3e\x3e16,this[offset+1]\x3dvalue\x3e\x3e\x3e8,this[offset]\x3dvalue\x26255):objectWriteUInt32(this,value,offset,!0);return offset+4};Buffer.prototype.writeUInt32BE\x3dfunction(value,offset,noAssert){value\x3d+value;offset|\x3d0;noAssert||checkInt(this,value,offset,4,4294967295,0);Buffer.TYPED_ARRAY_SUPPORT?(this[offset]\x3dvalue\x3e\x3e\x3e24,this[offset+1]\x3dvalue\x3e\x3e\x3e16,this[offset+2]\x3dvalue\x3e\x3e\x3e8,this[offset+\n3]\x3dvalue\x26255):objectWriteUInt32(this,value,offset,!1);return offset+4};Buffer.prototype.writeIntLE\x3dfunction(value,offset,byteLength,noAssert){value\x3d+value;offset|\x3d0;noAssert||(noAssert\x3dMath.pow(2,8*byteLength-1),checkInt(this,value,offset,byteLength,noAssert-1,-noAssert));noAssert\x3d0;var mul\x3d1,sub\x3d0;for(this[offset]\x3dvalue\x26255;++noAssert\x3cbyteLength\x26\x26(mul*\x3d256);)0\x3evalue\x26\x260\x3d\x3d\x3dsub\x26\x260!\x3d\x3dthis[offset+noAssert-1]\x26\x26(sub\x3d1),this[offset+noAssert]\x3d(value/mul\x3e\x3e0)-sub\x26255;return offset+byteLength};Buffer.prototype.writeIntBE\x3d\nfunction(value,offset,byteLength,noAssert){value\x3d+value;offset|\x3d0;noAssert||(noAssert\x3dMath.pow(2,8*byteLength-1),checkInt(this,value,offset,byteLength,noAssert-1,-noAssert));noAssert\x3dbyteLength-1;var mul\x3d1,sub\x3d0;for(this[offset+noAssert]\x3dvalue\x26255;0\x3c\x3d--noAssert\x26\x26(mul*\x3d256);)0\x3evalue\x26\x260\x3d\x3d\x3dsub\x26\x260!\x3d\x3dthis[offset+noAssert+1]\x26\x26(sub\x3d1),this[offset+noAssert]\x3d(value/mul\x3e\x3e0)-sub\x26255;return offset+byteLength};Buffer.prototype.writeInt8\x3dfunction(value,offset,noAssert){value\x3d+value;offset|\x3d0;noAssert||checkInt(this,\nvalue,offset,1,127,-128);Buffer.TYPED_ARRAY_SUPPORT||(value\x3dMath.floor(value));0\x3evalue\x26\x26(value\x3d255+value+1);this[offset]\x3dvalue\x26255;return offset+1};Buffer.prototype.writeInt16LE\x3dfunction(value,offset,noAssert){value\x3d+value;offset|\x3d0;noAssert||checkInt(this,value,offset,2,32767,-32768);Buffer.TYPED_ARRAY_SUPPORT?(this[offset]\x3dvalue\x26255,this[offset+1]\x3dvalue\x3e\x3e\x3e8):objectWriteUInt16(this,value,offset,!0);return offset+2};Buffer.prototype.writeInt16BE\x3dfunction(value,offset,noAssert){value\x3d+value;offset|\x3d\n0;noAssert||checkInt(this,value,offset,2,32767,-32768);Buffer.TYPED_ARRAY_SUPPORT?(this[offset]\x3dvalue\x3e\x3e\x3e8,this[offset+1]\x3dvalue\x26255):objectWriteUInt16(this,value,offset,!1);return offset+2};Buffer.prototype.writeInt32LE\x3dfunction(value,offset,noAssert){value\x3d+value;offset|\x3d0;noAssert||checkInt(this,value,offset,4,2147483647,-2147483648);Buffer.TYPED_ARRAY_SUPPORT?(this[offset]\x3dvalue\x26255,this[offset+1]\x3dvalue\x3e\x3e\x3e8,this[offset+2]\x3dvalue\x3e\x3e\x3e16,this[offset+3]\x3dvalue\x3e\x3e\x3e24):objectWriteUInt32(this,value,offset,\n!0);return offset+4};Buffer.prototype.writeInt32BE\x3dfunction(value,offset,noAssert){value\x3d+value;offset|\x3d0;noAssert||checkInt(this,value,offset,4,2147483647,-2147483648);0\x3evalue\x26\x26(value\x3d4294967295+value+1);Buffer.TYPED_ARRAY_SUPPORT?(this[offset]\x3dvalue\x3e\x3e\x3e24,this[offset+1]\x3dvalue\x3e\x3e\x3e16,this[offset+2]\x3dvalue\x3e\x3e\x3e8,this[offset+3]\x3dvalue\x26255):objectWriteUInt32(this,value,offset,!1);return offset+4};Buffer.prototype.writeFloatLE\x3dfunction(value,offset,noAssert){return writeFloat(this,value,offset,!0,noAssert)};\nBuffer.prototype.writeFloatBE\x3dfunction(value,offset,noAssert){return writeFloat(this,value,offset,!1,noAssert)};Buffer.prototype.writeDoubleLE\x3dfunction(value,offset,noAssert){return writeDouble(this,value,offset,!0,noAssert)};Buffer.prototype.writeDoubleBE\x3dfunction(value,offset,noAssert){return writeDouble(this,value,offset,!1,noAssert)};Buffer.prototype.copy\x3dfunction(target,targetStart,start,end){start||(start\x3d0);end||0\x3d\x3d\x3dend||(end\x3dthis.length);targetStart\x3e\x3dtarget.length\x26\x26(targetStart\x3dtarget.length);\ntargetStart||(targetStart\x3d0);0\x3cend\x26\x26end\x3cstart\x26\x26(end\x3dstart);if(end\x3d\x3d\x3dstart||0\x3d\x3d\x3dtarget.length||0\x3d\x3d\x3dthis.length)return 0;if(0\x3etargetStart)throw new RangeError(\x22targetStart out of bounds\x22);if(0\x3estart||start\x3e\x3dthis.length)throw new RangeError(\x22sourceStart out of bounds\x22);if(0\x3eend)throw new RangeError(\x22sourceEnd out of bounds\x22);end\x3ethis.length\x26\x26(end\x3dthis.length);target.length-targetStart\x3cend-start\x26\x26(end\x3dtarget.length-targetStart+start);var len\x3dend-start;if(this\x3d\x3d\x3dtarget\x26\x26start\x3ctargetStart\x26\x26targetStart\x3c\nend)for(end\x3dlen-1;0\x3c\x3dend;--end)target[end+targetStart]\x3dthis[end+start];else if(1E3\x3elen||!Buffer.TYPED_ARRAY_SUPPORT)for(end\x3d0;end\x3clen;++end)target[end+targetStart]\x3dthis[end+start];else Uint8Array.prototype.set.call(target,this.subarray(start,start+len),targetStart);return len};Buffer.prototype.fill\x3dfunction(val,start,end,encoding){if(\x22string\x22\x3d\x3d\x3dtypeof val){\x22string\x22\x3d\x3d\x3dtypeof start?(encoding\x3dstart,start\x3d0,end\x3dthis.length):\x22string\x22\x3d\x3d\x3dtypeof end\x26\x26(encoding\x3dend,end\x3dthis.length);if(1\x3d\x3d\x3dval.length){var code\x3d\nval.charCodeAt(0);256\x3ecode\x26\x26(val\x3dcode)}if(void 0!\x3d\x3dencoding\x26\x26\x22string\x22!\x3d\x3dtypeof encoding)throw new TypeError(\x22encoding must be a string\x22);if(\x22string\x22\x3d\x3d\x3dtypeof encoding\x26\x26!Buffer.isEncoding(encoding))throw new TypeError(\x22Unknown encoding: \x22+encoding);}else\x22number\x22\x3d\x3d\x3dtypeof val\x26\x26(val\x26\x3d255);if(0\x3estart||this.length\x3cstart||this.length\x3cend)throw new RangeError(\x22Out of range index\x22);if(end\x3c\x3dstart)return this;start\x3e\x3e\x3e\x3d0;end\x3dvoid 0\x3d\x3d\x3dend?this.length:end\x3e\x3e\x3e0;val||(val\x3d0);if(\x22number\x22\x3d\x3d\x3dtypeof val)for(encoding\x3d\nstart;encoding\x3cend;++encoding)this[encoding]\x3dval;else for(val\x3dBuffer.isBuffer(val)?val:utf8ToBytes((new Buffer(val,encoding)).toString()),code\x3dval.length,encoding\x3d0;encoding\x3cend-start;++encoding)this[encoding+start]\x3dval[encoding%code];return this};var INVALID_BASE64_RE\x3d/[^+\\/0-9A-Za-z-_]/g}");
SHADOW_ENV.evalLoad("module$node_modules$vega_lite$build$vega_lite.js", true , "shadow$provide.module$node_modules$vega_lite$build$vega_lite\x3dfunction(global$jscomp$0,require,module$jscomp$0,exports$jscomp$0){var Buffer\x3drequire(\x22module$node_modules$buffer$index\x22).Buffer;(function(global,factory){\x22object\x22\x3d\x3d\x3dtypeof exports$jscomp$0\x26\x26\x22undefined\x22!\x3d\x3dtypeof module$jscomp$0?factory(exports$jscomp$0):\x22function\x22\x3d\x3d\x3dtypeof define\x26\x26define.amd?define([\x22exports\x22],factory):(global\x3dglobal||self,factory(global.vegaLite\x3d{}))})(this,function(exports){function accessor$jscomp$0(fn,fields,name){fn.fields\x3d\nfields||[];fn.fname\x3dname;return fn}function getter(path){return 1\x3d\x3d\x3dpath.length?get1(path[0]):getN(path)}function splitAccessPath(p){function push(){path.push(s+p.substring(i,j));s\x3d\x22\x22;i\x3dj+1}var path\x3d[],q\x3dnull,b\x3d0,n\x3dp.length,s\x3d\x22\x22,i,j;p+\x3d\x22\x22;for(i\x3dj\x3d0;j\x3cn;++j){var c\x3dp[j];if(\x22\\\\\x22\x3d\x3d\x3dc)s+\x3dp.substring(i,j),s+\x3dp.substring(++j,++j),i\x3dj;else if(c\x3d\x3d\x3dq)push(),q\x3dnull,b\x3d-1;else if(!q)if(i\x3d\x3d\x3db\x26\x26\x27\x22\x27\x3d\x3d\x3dc)i\x3dj+1,q\x3dc;else if(i\x3d\x3d\x3db\x26\x26\x22\x27\x22\x3d\x3d\x3dc)i\x3dj+1,q\x3dc;else if(\x22.\x22\x3d\x3d\x3dc\x26\x26!b)j\x3ei?push():i\x3dj+1;else if(\x22[\x22\x3d\x3d\x3dc)j\x3ei\x26\x26push(),b\x3d\ni\x3dj+1;else if(\x22]\x22\x3d\x3d\x3dc){if(!b)throw Error(\x22Access path missing open bracket: \x22+p);0\x3cb\x26\x26push();b\x3d0;i\x3dj+1}}if(b)throw Error(\x22Access path missing closing bracket: \x22+p);if(q)throw Error(\x22Access path missing closing quote: \x22+p);j\x3ei\x26\x26(j++,push());return path}function log(method,level,input){level\x3d[level].concat([].slice.call(input));console[method].apply(console,level)}function isObject(_){return _\x3d\x3d\x3dObject(_)}function mergeConfig(configs){for(var $jscomp$restParams\x3d[],$jscomp$restIndex\x3d0;$jscomp$restIndex\x3c\narguments.length;++$jscomp$restIndex)$jscomp$restParams[$jscomp$restIndex-0]\x3darguments[$jscomp$restIndex];return $jscomp$restParams.reduce(function(out,source){for(var key in source)\x22signals\x22\x3d\x3d\x3dkey?out.signals\x3dmergeNamed(out.signals,source.signals):writeConfig(out,key,source[key],\x22legend\x22\x3d\x3d\x3dkey?{layout:1}:\x22style\x22\x3d\x3d\x3dkey?!0:null);return out},{})}function writeConfig(output,key,value,recurse){if(\x22__proto__\x22!\x3d\x3dkey){var k;if(isObject(value)\x26\x26!isArray(value))for(k in output\x3disObject(output[key])?output[key]:\noutput[key]\x3d{},value)recurse\x26\x26(!0\x3d\x3d\x3drecurse||recurse[k])?writeConfig(output,k,value[k]):\x22__proto__\x22!\x3d\x3dk\x26\x26(output[k]\x3dvalue[k]);else output[key]\x3dvalue}}function mergeNamed(a,b){function add(_){map[_.name]||(map[_.name]\x3d1,out.push(_))}if(null\x3d\x3da)return b;var map\x3d{},out\x3d[];b.forEach(add);a.forEach(add);return out}function array$jscomp$0(_){return null!\x3d_?isArray(_)?_:[_]:[]}function isBoolean(_){return\x22boolean\x22\x3d\x3d\x3dtypeof _}function isNumber(_){return\x22number\x22\x3d\x3d\x3dtypeof _}function isString(_){return\x22string\x22\x3d\x3d\x3d\ntypeof _}function $(x){return isArray(x)?\x22[\x22+x.map($)+\x22]\x22:isObject(x)||isString(x)?JSON.stringify(x).replace(\x22\\u2028\x22,\x22\\\\u2028\x22).replace(\x22\\u2029\x22,\x22\\\\u2029\x22):x}function toSet(_){for(var s\x3d{},i\x3d0,n\x3d_.length;i\x3cn;++i)s[_[i]]\x3d!0;return s}function __rest(s,e){var t\x3d{},p;for(p in s)Object.prototype.hasOwnProperty.call(s,p)\x26\x260\x3ee.indexOf(p)\x26\x26(t[p]\x3ds[p]);if(null!\x3ds\x26\x26\x22function\x22\x3d\x3d\x3dtypeof Object.getOwnPropertySymbols){var i\x3d0;for(p\x3dObject.getOwnPropertySymbols(s);i\x3cp.length;i++)0\x3ee.indexOf(p[i])\x26\x26Object.prototype.propertyIsEnumerable.call(s,\np[i])\x26\x26(t[p[i]]\x3ds[p[i]])}return t}function forEachLeaf(op,fn){if(op.not)forEachLeaf(op.not,fn);else if(op.and){var $jscomp$iter$55\x3d$jscomp.makeIterator(op.and);for(op\x3d$jscomp$iter$55.next();!op.done;op\x3d$jscomp$iter$55.next())forEachLeaf(op.value,fn)}else if(op.or)for($jscomp$iter$55\x3d$jscomp.makeIterator(op.or),op\x3d$jscomp$iter$55.next();!op.done;op\x3d$jscomp$iter$55.next())forEachLeaf(op.value,fn);else fn(op)}function normalizeLogicalComposition(op,normalizer){return op.not?{not:normalizeLogicalComposition(op.not,\nnormalizer)}:op.and?{and:op.and.map(function(o){return normalizeLogicalComposition(o,normalizer)})}:op.or?{or:op.or.map(function(o){return normalizeLogicalComposition(o,normalizer)})}:normalizer(op)}function pick(obj,props){var copy\x3d{};props\x3d$jscomp.makeIterator(props);for(var $jscomp$key$prop\x3dprops.next();!$jscomp$key$prop.done;$jscomp$key$prop\x3dprops.next())$jscomp$key$prop\x3d$jscomp$key$prop.value,hop.call(obj,$jscomp$key$prop)\x26\x26(copy[$jscomp$key$prop]\x3dobj[$jscomp$key$prop]);return copy}function omit(obj,\nprops){obj\x3dObject.assign({},obj);props\x3d$jscomp.makeIterator(props);for(var $jscomp$key$prop\x3dprops.next();!$jscomp$key$prop.done;$jscomp$key$prop\x3dprops.next())delete obj[$jscomp$key$prop.value];return obj}function hash(a){if(isNumber(a))return a;a\x3disString(a)?a:fastJsonStableStringify(a);if(250\x3ea.length)return a;for(var h\x3d0,i\x3d0;i\x3ca.length;i++){var char\x3da.charCodeAt(i);h\x3d(h\x3c\x3c5)-h+char;h\x26\x3dh}return h}function isNullOrFalse(x){return!1\x3d\x3d\x3dx||null\x3d\x3d\x3dx}function contains(array,item){return-1\x3carray.indexOf(item)}\nfunction some(arr,f){var i\x3d0;arr\x3d$jscomp.makeIterator(arr.entries());for(var $jscomp$key$\x3darr.next();!$jscomp$key$.done;$jscomp$key$\x3darr.next()){var $jscomp$destructuring$var5\x3d$jscomp.makeIterator($jscomp$key$.value);$jscomp$key$\x3d$jscomp$destructuring$var5.next().value;$jscomp$destructuring$var5\x3d$jscomp$destructuring$var5.next().value;if(f($jscomp$destructuring$var5,$jscomp$key$,i++))return!0}return!1}function every(arr,f){var i\x3d0;arr\x3d$jscomp.makeIterator(arr.entries());for(var $jscomp$key$\x3darr.next();!$jscomp$key$.done;$jscomp$key$\x3d\narr.next()){var $jscomp$destructuring$var7\x3d$jscomp.makeIterator($jscomp$key$.value);$jscomp$key$\x3d$jscomp$destructuring$var7.next().value;$jscomp$destructuring$var7\x3d$jscomp$destructuring$var7.next().value;if(!f($jscomp$destructuring$var7,$jscomp$key$,i++))return!1}return!0}function mergeDeep(dest,src){for(var $jscomp$restParams\x3d[],$jscomp$restIndex\x3d1;$jscomp$restIndex\x3carguments.length;++$jscomp$restIndex)$jscomp$restParams[$jscomp$restIndex-1]\x3darguments[$jscomp$restIndex];$jscomp$restParams\x3d$jscomp.makeIterator($jscomp$restParams);\nfor($jscomp$restIndex\x3d$jscomp$restParams.next();!$jscomp$restIndex.done;$jscomp$restIndex\x3d$jscomp$restParams.next()){var s\x3d$jscomp$restIndex.value;$jscomp$restIndex\x3ddest;s\x3dnull!\x3d\x3ds\x26\x26void 0!\x3d\x3ds?s:{};for(var $jscomp$inline_4512\x3d$jscomp.makeIterator(keys$jscomp$0(s)),$jscomp$inline_4513\x3d$jscomp$inline_4512.next();!$jscomp$inline_4513.done;$jscomp$inline_4513\x3d$jscomp$inline_4512.next())$jscomp$inline_4513\x3d$jscomp$inline_4513.value,writeConfig($jscomp$restIndex,$jscomp$inline_4513,s[$jscomp$inline_4513],\n!0)}return dest}function unique(values,f){var results\x3d[],u\x3d{},v;values\x3d$jscomp.makeIterator(values);for(v\x3dvalues.next();!v.done;v\x3dvalues.next()){var val\x3dv.value;v\x3df(val);v in u||(u[v]\x3d1,results.push(val))}return results}function hasIntersection(a,b){a\x3d$jscomp.makeIterator(a);for(var $jscomp$key$key\x3da.next();!$jscomp$key$key.done;$jscomp$key$key\x3da.next())if(b.has($jscomp$key$key.value))return!0;return!1}function prefixGenerator(a){var prefixes\x3dnew Set,$jscomp$loop$675\x3d{};a\x3d$jscomp.makeIterator(a);\nfor(var $jscomp$key$x\x3da.next();!$jscomp$key$x.done;$jscomp$loop$675\x3d{$jscomp$loop$prop$wrappedWithAccessors$676:$jscomp$loop$675.$jscomp$loop$prop$wrappedWithAccessors$676},$jscomp$key$x\x3da.next()){$jscomp$key$x\x3dsplitAccessPath($jscomp$key$x.value);$jscomp$loop$675.$jscomp$loop$prop$wrappedWithAccessors$676\x3d$jscomp$key$x.map(function(y,i){return 0\x3d\x3d\x3di?y:\x22[\x22+y+\x22]\x22});$jscomp$key$x\x3d$jscomp$loop$675.$jscomp$loop$prop$wrappedWithAccessors$676.map(function($jscomp$loop$675){return function(_,i){return $jscomp$loop$675.$jscomp$loop$prop$wrappedWithAccessors$676.slice(0,\ni+1).join(\x22\x22)}}($jscomp$loop$675));$jscomp$key$x\x3d$jscomp.makeIterator($jscomp$key$x);for(var $jscomp$key$y\x3d$jscomp$key$x.next();!$jscomp$key$y.done;$jscomp$key$y\x3d$jscomp$key$x.next())prefixes.add($jscomp$key$y.value)}return prefixes}function fieldIntersection(a,b){return void 0\x3d\x3d\x3da||void 0\x3d\x3d\x3db?!0:hasIntersection(prefixGenerator(a),prefixGenerator(b))}function isEmpty(obj){return 0\x3d\x3d\x3dkeys$jscomp$0(obj).length}function entries(x){var _entries\x3d[],k;for(k in x)hop.call(x,k)\x26\x26_entries.push({key:k,value:x[k]});\nreturn _entries}function varName(s){var alphanumericS\x3ds.replace(/\\W/g,\x22_\x22);return(s.match(/^\\d+/)?\x22_\x22:\x22\x22)+alphanumericS}function logicalExpr(op,cb){return op.not?\x22!(\x22+logicalExpr(op.not,cb)+\x22)\x22:op.and?\x22(\x22+op.and.map(function(and){return logicalExpr(and,cb)}).join(\x22) \\x26\\x26 (\x22)+\x22)\x22:op.or?\x22(\x22+op.or.map(function(or){return logicalExpr(or,cb)}).join(\x22) || (\x22)+\x22)\x22:cb(op)}function deleteNestedProperty(obj,orderedProps){if(0\x3d\x3d\x3dorderedProps.length)return!0;var prop\x3dorderedProps.shift();prop in obj\x26\x26deleteNestedProperty(obj[prop],\norderedProps)\x26\x26delete obj[prop];return isEmpty(obj)}function titleCase(s){return s.charAt(0).toUpperCase()+s.substr(1)}function accessPathWithDatum(path,datum){datum\x3dvoid 0\x3d\x3d\x3ddatum?\x22datum\x22:datum;path\x3dsplitAccessPath(path);for(var prefixes\x3d[],i\x3d1;i\x3c\x3dpath.length;i++){var prefix\x3d\x22[\x22+path.slice(0,i).map($).join(\x22][\x22)+\x22]\x22;prefixes.push(\x22\x22+datum+prefix)}return prefixes.join(\x22 \\x26\\x26 \x22)}function escapePathAccess(string){return string.replace(/(\\[|\\]|\\.|\x27|\x22)/g,\x22\\\\$1\x22)}function replacePathInField(path){return\x22\x22+\nsplitAccessPath(path).map(escapePathAccess).join(\x22\\\\.\x22)}function replaceAll(string,find,replacement){return string.replace(new RegExp(find.replace(/[-/\\\\^$*+?.()|[\\]{}]/g,\x22\\\\$\\x26\x22),\x22g\x22),replacement)}function accessPathDepth(path){return path?splitAccessPath(path).length:0}function getFirstDefined(args){for(var $jscomp$restParams\x3d[],$jscomp$restIndex\x3d0;$jscomp$restIndex\x3carguments.length;++$jscomp$restIndex)$jscomp$restParams[$jscomp$restIndex-0]\x3darguments[$jscomp$restIndex];$jscomp$restParams\x3d$jscomp.makeIterator($jscomp$restParams);\nfor($jscomp$restIndex\x3d$jscomp$restParams.next();!$jscomp$restIndex.done;$jscomp$restIndex\x3d$jscomp$restParams.next())if($jscomp$restIndex\x3d$jscomp$restIndex.value,void 0!\x3d\x3d$jscomp$restIndex)return $jscomp$restIndex}function normalizeAngle(angle){if(void 0!\x3d\x3dangle)return(angle%360+360)%360}function isNumeric(value){return isNumber(value)?!0:!isNaN(value)\x26\x26!isNaN(parseFloat(value))}function isConditionalAxisValue(v){return v\x26\x26v.condition}function isPathMark(m){return contains([\x22line\x22,\x22area\x22,\x22trail\x22],\nm)}function isMarkDef(mark){return mark.type}function isUnitSpec(spec){return\x22mark\x22in spec}function isArgminDef(a){return!!a\x26\x26!!a.argmin}function isArgmaxDef(a){return!!a\x26\x26!!a.argmax}function isAggregateOp(a){return isString(a)\x26\x26!!AGGREGATE_OP_INDEX[a]}function getPositionChannelFromLatLong(channel){switch(channel){case \x22latitude\x22:return\x22y\x22;case \x22latitude2\x22:return\x22y2\x22;case \x22longitude\x22:return\x22x\x22;case \x22longitude2\x22:return\x22x2\x22}}function isColorChannel(channel){return\x22color\x22\x3d\x3d\x3dchannel||\x22fill\x22\x3d\x3d\x3dchannel||\n\x22stroke\x22\x3d\x3d\x3dchannel}function isSecondaryRangeChannel(c){return getMainRangeChannel(c)!\x3d\x3dc}function getMainRangeChannel(channel){switch(channel){case \x22x2\x22:return\x22x\x22;case \x22y2\x22:return\x22y\x22;case \x22latitude2\x22:return\x22latitude\x22;case \x22longitude2\x22:return\x22longitude\x22;case \x22theta2\x22:return\x22theta\x22;case \x22radius2\x22:return\x22radius\x22}return channel}function getVgPositionChannel(channel){if(channel in POLAR_POSITION_CHANNEL_INDEX)switch(channel){case \x22theta\x22:return\x22startAngle\x22;case \x22theta2\x22:return\x22endAngle\x22;case \x22radius\x22:return\x22outerRadius\x22;\ncase \x22radius2\x22:return\x22innerRadius\x22}return channel}function getSecondaryRangeChannel(channel){switch(channel){case \x22x\x22:return\x22x2\x22;case \x22y\x22:return\x22y2\x22;case \x22latitude\x22:return\x22latitude2\x22;case \x22longitude\x22:return\x22longitude2\x22;case \x22theta\x22:return\x22theta2\x22;case \x22radius\x22:return\x22radius2\x22}}function getSizeChannel(channel){switch(channel){case \x22x\x22:case \x22x2\x22:return\x22width\x22;case \x22y\x22:case \x22y2\x22:return\x22height\x22}}function getOffsetChannel(channel){switch(channel){case \x22x\x22:return\x22xOffset\x22;case \x22y\x22:return\x22yOffset\x22;case \x22x2\x22:return\x22x2Offset\x22;\ncase \x22y2\x22:return\x22y2Offset\x22;case \x22theta\x22:return\x22thetaOffset\x22;case \x22radius\x22:return\x22radiusOffset\x22;case \x22theta2\x22:return\x22theta2Offset\x22;case \x22radius2\x22:return\x22radius2Offset\x22}}function getPositionScaleChannel(sizeType){return\x22width\x22\x3d\x3d\x3dsizeType?\x22x\x22:\x22y\x22}function getSupportedMark(channel){switch(channel){case \x22color\x22:case \x22fill\x22:case \x22stroke\x22:case \x22description\x22:case \x22detail\x22:case \x22key\x22:case \x22tooltip\x22:case \x22href\x22:case \x22order\x22:case \x22opacity\x22:case \x22fillOpacity\x22:case \x22strokeOpacity\x22:case \x22strokeWidth\x22:case \x22facet\x22:case \x22row\x22:case \x22column\x22:return ALL_MARKS;\ncase \x22x\x22:case \x22y\x22:case \x22latitude\x22:case \x22longitude\x22:return ALL_MARKS_EXCEPT_GEOSHAPE;case \x22x2\x22:case \x22y2\x22:case \x22latitude2\x22:case \x22longitude2\x22:return{area:\x22always\x22,bar:\x22always\x22,image:\x22always\x22,rect:\x22always\x22,rule:\x22always\x22,circle:\x22binned\x22,point:\x22binned\x22,square:\x22binned\x22,tick:\x22binned\x22,line:\x22binned\x22,trail:\x22binned\x22};case \x22size\x22:return{point:\x22always\x22,tick:\x22always\x22,rule:\x22always\x22,circle:\x22always\x22,square:\x22always\x22,bar:\x22always\x22,text:\x22always\x22,line:\x22always\x22,trail:\x22always\x22};case \x22strokeDash\x22:return{line:\x22always\x22,point:\x22always\x22,\ntick:\x22always\x22,rule:\x22always\x22,circle:\x22always\x22,square:\x22always\x22,bar:\x22always\x22,geoshape:\x22always\x22};case \x22shape\x22:return{point:\x22always\x22,geoshape:\x22always\x22};case \x22text\x22:return{text:\x22always\x22};case \x22angle\x22:return{point:\x22always\x22,square:\x22always\x22,text:\x22always\x22};case \x22url\x22:return{image:\x22always\x22};case \x22theta\x22:return{text:\x22always\x22,arc:\x22always\x22};case \x22radius\x22:return{text:\x22always\x22,arc:\x22always\x22};case \x22theta2\x22:case \x22radius2\x22:return{arc:\x22always\x22}}}function rangeType(channel){switch(channel){case \x22facet\x22:case \x22row\x22:case \x22column\x22:case \x22shape\x22:case \x22strokeDash\x22:case \x22text\x22:case \x22tooltip\x22:case \x22href\x22:case \x22url\x22:case \x22description\x22:return\x22discrete\x22;\ncase \x22color\x22:case \x22fill\x22:case \x22stroke\x22:return\x22flexible\x22}}function binToString(bin){isBoolean(bin)\x26\x26(bin\x3dnormalizeBin(bin,void 0));return\x22bin\x22+keys$jscomp$0(bin).map(function(p){return isSelectionExtent(bin[p])?varName(\x22_\x22+p+\x22_\x22+Object.entries(bin[p])):varName(\x22_\x22+p+\x22_\x22+bin[p])}).join(\x22\x22)}function isBinning(bin){return!0\x3d\x3d\x3dbin||isObject(bin)\x26\x26!bin.binned}function isBinned(bin){return\x22binned\x22\x3d\x3d\x3dbin||isObject(bin)\x26\x26!0\x3d\x3d\x3dbin.binned}function isSelectionExtent(extent){return null\x3d\x3d\x3dextent||void 0\x3d\x3d\x3dextent?\nvoid 0:extent.selection}function autoMaxBins(channel){switch(channel){case \x22row\x22:case \x22column\x22:case \x22size\x22:case \x22color\x22:case \x22fill\x22:case \x22stroke\x22:case \x22strokeWidth\x22:case \x22opacity\x22:case \x22fillOpacity\x22:case \x22strokeOpacity\x22:case \x22shape\x22:return 6;case \x22strokeDash\x22:return 4;default:return 10}}function invalidSpec(spec){return\x22Invalid specification \x22+JSON.stringify(spec)+\x27. Make sure the specification includes at least one of the following properties: \x22mark\x22, \x22layer\x22, \x22facet\x22, \x22hconcat\x22, \x22vconcat\x22, \x22concat\x22, or \x22repeat\x22.\x27}\nfunction containerSizeNonSingle(name){return(\x22width\x22\x3d\x3dname?\x22Width\x22:\x22Height\x22)+\x27 \x22container\x22 only works for single views and layered views.\x27}function containerSizeNotCompatibleWithAutosize(name){return(\x22width\x22\x3d\x3dname?\x22Width\x22:\x22Height\x22)+\x27 \x22container\x22 only works well with autosize \x22fit\x22 or \x22fit-\x27+(\x22width\x22\x3d\x3dname?\x22x\x22:\x22y\x22)+\x27\x22.\x27}function droppingFit(channel){return channel?\x27Dropping \x22fit-\x27+channel+\x27\x22 because spec has discrete \x27+getSizeChannel(channel)+\x22.\x22:\x27Dropping \x22fit\x22 because spec has discrete size.\x27}function cannotProjectOnChannelWithoutField(channel){return\x27Cannot project a selection on encoding channel \x22\x27+\nchannel+\x27\x22, which has no field.\x27}function selectionNotSupported(mark){return\x22Selection not supported for \x22+mark+\x22 yet.\x22}function columnsNotSupportByRowCol(type){return\x27The \x22columns\x22 property cannot be used when \x22\x27+type+\x27\x22 has nested row/column.\x27}function differentParse(field,local,ancestor){return\x27An ancestor parsed field \x22\x27+field+\x27\x22 as \x27+ancestor+\x22 but a child wants to parse the field as \x22+local+\x22.\x22}function customFormatTypeNotAllowed(channel){return\x22Config.customFormatTypes is not true, thus custom format type and format for channel \x22+\nchannel+\x22 are dropped.\x22}function droppingColor(type,opt){var fill\x3dopt.fill;opt\x3dopt.stroke;return\x22Dropping color \x22+type+\x22 as the plot also has \x22+(fill\x26\x26opt?\x22fill and stroke\x22:fill?\x22fill\x22:\x22stroke\x22)+\x22.\x22}function emptyFieldDef(fieldDef,channel){return\x22Dropping \x22+stringify(fieldDef)+\x27 from channel \x22\x27+channel+\x27\x22 since it does not contain any data field, datum, value, or signal.\x27}function incompatibleChannel(channel,markOrFacet,when){return channel+\x27 dropped as it is incompatible with \x22\x27+markOrFacet+\x27\x22\x27+\n(when?\x22 when \x22+when:\x22\x22)+\x22.\x22}function discreteChannelCannotEncode(channel,type){return\x27Using discrete channel \x22\x27+channel+\x27\x22 to encode \x22\x27+type+\x27\x22 field can be misleading as it does not encode \x27+(\x22ordinal\x22\x3d\x3d\x3dtype?\x22order\x22:\x22magnitude\x22)+\x22.\x22}function scalePropertyNotWorkWithScaleType(scaleType,propName,channel){return channel+\x22-scale\x27s \\\x22\x22+propName+\x27\x22 is dropped as it does not work with \x27+scaleType+\x22 scale.\x22}function stepDropped(channel){return\x27The step for \x22\x27+channel+\x27\x22 is dropped because the \x27+(\x22width\x22\x3d\x3d\x3d\nchannel?\x22x\x22:\x22y\x22)+\x22 is continuous.\x22}function invalidTimeUnit(unitName,value){return\x22Invalid \x22+unitName+\x22: \x22+stringify(value)+\x22.\x22}function errorBand1DNotSupport(property){return\x221D error band does not support \x22+property+\x22.\x22}function channelRequiredForBinned(channel){return\x22Channel \x22+channel+\x27 is required for \x22binned\x22 bin.\x27}function warn(args){for(var $jscomp$restParams\x3d[],$jscomp$restIndex\x3d0;$jscomp$restIndex\x3carguments.length;++$jscomp$restIndex)$jscomp$restParams[$jscomp$restIndex-0]\x3darguments[$jscomp$restIndex];\ncurrent.warn.apply(current,$jscomp.arrayFromIterable($jscomp$restParams))}function debug(args){for(var $jscomp$restParams\x3d[],$jscomp$restIndex\x3d0;$jscomp$restIndex\x3carguments.length;++$jscomp$restIndex)$jscomp$restParams[$jscomp$restIndex-0]\x3darguments[$jscomp$restIndex];current.debug.apply(current,$jscomp.arrayFromIterable($jscomp$restParams))}function isDateTime(o){if(o\x26\x26isObject(o))for(var $jscomp$iter$69\x3d$jscomp.makeIterator(TIMEUNIT_PARTS),$jscomp$key$part\x3d$jscomp$iter$69.next();!$jscomp$key$part.done;$jscomp$key$part\x3d\n$jscomp$iter$69.next())if($jscomp$key$part.value in o)return!0;return!1}function normalizeMonth(m){isNumeric(m)\x26\x26(m\x3d+m);if(isNumber(m))return m-1;var lowerM\x3dm.toLowerCase(),monthIndex\x3dMONTHS.indexOf(lowerM);if(-1!\x3d\x3dmonthIndex)return monthIndex;lowerM\x3dlowerM.substr(0,3);lowerM\x3dSHORT_MONTHS.indexOf(lowerM);if(-1!\x3d\x3dlowerM)return lowerM;throw Error(invalidTimeUnit(\x22month\x22,m));}function normalizeDay(d){isNumeric(d)\x26\x26(d\x3d+d);if(isNumber(d))return d%7;var lowerD\x3dd.toLowerCase(),dayIndex\x3dDAYS.indexOf(lowerD);\nif(-1!\x3d\x3ddayIndex)return dayIndex;lowerD\x3dlowerD.substr(0,3);lowerD\x3dSHORT_DAYS.indexOf(lowerD);if(-1!\x3d\x3dlowerD)return lowerD;throw Error(invalidTimeUnit(\x22day\x22,d));}function dateTimeParts(d,normalize){var parts\x3d[];normalize\x26\x26void 0!\x3d\x3dd.day\x26\x261\x3ckeys$jscomp$0(d).length\x26\x26(warn(\x22Dropping day from datetime \x22+stringify(d)+\x22 as day cannot be combined with other units.\x22),d\x3dduplicate(d),delete d.day);void 0!\x3d\x3dd.year?parts.push(d.year):parts.push(2012);if(void 0!\x3d\x3dd.month){var month\x3dnormalize?normalizeMonth(d.month):\nd.month;parts.push(month)}else if(void 0!\x3d\x3dd.quarter){if(normalize)if(month\x3dd.quarter,isNumeric(month)\x26\x26(month\x3d+month),isNumber(month))4\x3cmonth\x26\x26warn(invalidTimeUnit(\x22quarter\x22,month)),--month;else throw Error(invalidTimeUnit(\x22quarter\x22,month));else month\x3dd.quarter;parts.push(isNumber(month)?3*month:month+\x22*3\x22)}else parts.push(0);void 0!\x3d\x3dd.date?parts.push(d.date):void 0!\x3d\x3dd.day?(normalize\x3dnormalize?normalizeDay(d.day):d.day,parts.push(isNumber(normalize)?normalize+1:normalize+\x22+1\x22)):parts.push(1);normalize\x3d\n$jscomp.makeIterator([\x22hours\x22,\x22minutes\x22,\x22seconds\x22,\x22milliseconds\x22]);for(month\x3dnormalize.next();!month.done;month\x3dnormalize.next())month\x3dd[month.value],parts.push(\x22undefined\x22\x3d\x3d\x3dtypeof month?0:month);return parts}function dateTimeToExpr(d){var string\x3ddateTimeParts(d,!0).join(\x22, \x22);return d.utc?\x22utc(\x22+string+\x22)\x22:\x22datetime(\x22+string+\x22)\x22}function dateTimeToTimestamp(d){var parts\x3ddateTimeParts(d,!0);return d.utc?+new Date(Date.UTC.apply(Date,$jscomp.arrayFromIterable(parts))):+new (Function.prototype.bind.apply(Date,\n[null].concat($jscomp.arrayFromIterable(parts))))}function getTimeUnitParts(timeUnit){for(var parts\x3d[],$jscomp$iter$71\x3d$jscomp.makeIterator(TIMEUNIT_PARTS),$jscomp$key$part\x3d$jscomp$iter$71.next();!$jscomp$key$part.done;$jscomp$key$part\x3d$jscomp$iter$71.next())$jscomp$key$part\x3d$jscomp$key$part.value,containsTimeUnit(timeUnit,$jscomp$key$part)\x26\x26parts.push($jscomp$key$part);return parts}function containsTimeUnit(fullTimeUnit,timeUnit){var index\x3dfullTimeUnit.indexOf(timeUnit);return 0\x3eindex||0\x3cindex\x26\x26\n\x22seconds\x22\x3d\x3d\x3dtimeUnit\x26\x26\x22i\x22\x3d\x3d\x3dfullTimeUnit.charAt(index-1)||fullTimeUnit.length\x3eindex+3\x26\x26\x22day\x22\x3d\x3d\x3dtimeUnit\x26\x26\x22o\x22\x3d\x3d\x3dfullTimeUnit.charAt(index+3)||0\x3cindex\x26\x26\x22year\x22\x3d\x3d\x3dtimeUnit\x26\x26\x22f\x22\x3d\x3d\x3dfullTimeUnit.charAt(index-1)?!1:!0}function timeUnitSpecifierExpression(timeUnit){if(timeUnit)return timeUnit\x3dgetTimeUnitParts(timeUnit),\x22timeUnitSpecifier(\x22+fastJsonStableStringify(timeUnit)+\x22, \x22+fastJsonStableStringify(VEGALITE_TIMEFORMAT)+\x22)\x22}function normalizeTimeUnit(timeUnit){if(timeUnit){var params;isString(timeUnit)?\nparams\x3d{unit:timeUnit}:isObject(timeUnit)\x26\x26(params\x3dObject.assign(Object.assign({},timeUnit),timeUnit.unit?{unit:timeUnit.unit}:{}));params.unit.startsWith(\x22utc\x22)\x26\x26(params.utc\x3d!0,params.unit\x3dparams.unit.substr(3));return params}}function timeUnitToString(tu){tu\x3dnormalizeTimeUnit(tu);var utc\x3dtu.utc,rest\x3d__rest(tu,[\x22utc\x22]);return rest.unit?(utc?\x22utc\x22:\x22\x22)+keys$jscomp$0(rest).map(function(p){return varName((\x22unit\x22\x3d\x3d\x3dp?\x22\x22:\x22_\x22+p+\x22_\x22)+rest[p])}).join(\x22\x22):(utc?\x22utc\x22:\x22\x22)+\x22timeunit\x22+keys$jscomp$0(rest).map(function(p){return varName(\x22_\x22+\np+\x22_\x22+rest[p])}).join(\x22\x22)}function isSignalRef(o){return o\x26\x26!!o.signal}function isVgRangeStep(range){return!!range.step}function isDataRefDomain(domain){return isArray(domain)?!1:\x22field\x22in domain\x26\x26\x22data\x22in domain}function isFieldEqualPredicate(predicate){return predicate\x26\x26!!predicate.field\x26\x26void 0!\x3d\x3dpredicate.equal}function isFieldRangePredicate(predicate){return predicate\x26\x26predicate.field\x26\x26(isArray(predicate.range)\x26\x262\x3d\x3d\x3dpredicate.range.length||isSignalRef(predicate.range))?!0:!1}function isFieldOneOfPredicate(predicate){return predicate\x26\x26\n!!predicate.field\x26\x26(isArray(predicate.oneOf)||isArray(predicate.in))}function isFieldPredicate(predicate){return isFieldOneOfPredicate(predicate)||isFieldEqualPredicate(predicate)||isFieldRangePredicate(predicate)||predicate\x26\x26!!predicate.field\x26\x26void 0!\x3d\x3dpredicate.lt||predicate\x26\x26!!predicate.field\x26\x26void 0!\x3d\x3dpredicate.gt||predicate\x26\x26!!predicate.field\x26\x26void 0!\x3d\x3dpredicate.lte||predicate\x26\x26!!predicate.field\x26\x26void 0!\x3d\x3dpredicate.gte}function predicateValueExpr(v,timeUnit){return valueExpr(v,{timeUnit:timeUnit,\nwrapTime:!0})}function predicateValuesExpr(vals,timeUnit){return vals.map(function(v){return predicateValueExpr(v,timeUnit)})}function fieldFilterExpression(predicate,useInRange){useInRange\x3dvoid 0\x3d\x3d\x3duseInRange?!0:useInRange;var _a,field\x3dpredicate.field,timeUnit\x3dnull\x3d\x3d\x3d(_a\x3dnormalizeTimeUnit(predicate.timeUnit))||void 0\x3d\x3d\x3d_a?void 0:_a.unit;if(timeUnit){field\x3daccessPathWithDatum(field);var utc\x3dtimeUnit.startsWith(\x22utc\x22)?\x22utc\x22:\x22\x22;_a\x3d{};for(var $jscomp$inline_7635\x3d$jscomp.makeIterator(TIMEUNIT_PARTS),\n$jscomp$key$part\x3d$jscomp$inline_7635.next();!$jscomp$key$part.done;$jscomp$key$part\x3d$jscomp$inline_7635.next())if($jscomp$key$part\x3d$jscomp$key$part.value,containsTimeUnit(timeUnit,$jscomp$key$part)){var JSCompiler_inline_result\x3d\x22quarter\x22\x3d\x3d\x3d$jscomp$key$part?\x22(\x22+utc+\x22quarter(\x22+field+\x22)-1)\x22:\x22\x22+utc+$jscomp$key$part+\x22(\x22+field+\x22)\x22;_a[$jscomp$key$part]\x3dJSCompiler_inline_result}field\x3ddateTimeParts(_a,!1).join(\x22, \x22);_a\x3d\x22time(\x22+(_a.utc?\x22utc(\x22+field+\x22)\x22:\x22datetime(\x22+field+\x22)\x22)+\x22)\x22}else _a\x3dvgField(predicate,{expr:\x22datum\x22});\nif(isFieldEqualPredicate(predicate))return _a+\x22\\x3d\\x3d\\x3d\x22+predicateValueExpr(predicate.equal,timeUnit);if(predicate\x26\x26predicate.field\x26\x26void 0!\x3d\x3dpredicate.lt)return _a+\x22\\x3c\x22+predicateValueExpr(predicate.lt,timeUnit);if(predicate\x26\x26predicate.field\x26\x26void 0!\x3d\x3dpredicate.gt)return _a+\x22\\x3e\x22+predicateValueExpr(predicate.gt,timeUnit);if(predicate\x26\x26predicate.field\x26\x26void 0!\x3d\x3dpredicate.lte)return _a+\x22\\x3c\\x3d\x22+predicateValueExpr(predicate.lte,timeUnit);if(predicate\x26\x26predicate.field\x26\x26void 0!\x3d\x3dpredicate.gte)return _a+\n\x22\\x3e\\x3d\x22+predicateValueExpr(predicate.gte,timeUnit);if(isFieldOneOfPredicate(predicate))return\x22indexof([\x22+predicateValuesExpr(predicate.oneOf,timeUnit).join(\x22,\x22)+\x22], \x22+_a+\x22) !\\x3d\\x3d -1\x22;if(predicate\x26\x26predicate.field\x26\x26void 0!\x3d\x3dpredicate.valid)return fieldValidPredicate(_a,predicate.valid);if(isFieldRangePredicate(predicate)){field\x3dpredicate.range;predicate\x3disSignalRef(field)?{signal:field.signal+\x22[0]\x22}:field[0];field\x3disSignalRef(field)?{signal:field.signal+\x22[1]\x22}:field[1];if(null!\x3d\x3dpredicate\x26\x26\nnull!\x3d\x3dfield\x26\x26useInRange)return\x22inrange(\x22+_a+\x22, [\x22+predicateValueExpr(predicate,timeUnit)+\x22, \x22+predicateValueExpr(field,timeUnit)+\x22])\x22;useInRange\x3d[];null!\x3d\x3dpredicate\x26\x26useInRange.push(_a+\x22 \\x3e\\x3d \x22+predicateValueExpr(predicate,timeUnit));null!\x3d\x3dfield\x26\x26useInRange.push(_a+\x22 \\x3c\\x3d \x22+predicateValueExpr(field,timeUnit));return 0\x3cuseInRange.length?useInRange.join(\x22 \\x26\\x26 \x22):\x22true\x22}throw Error(\x22Invalid field predicate: \x22+JSON.stringify(predicate));}function fieldValidPredicate(fieldExpr,valid){return void 0\x3d\x3d\x3d\nvalid||valid?\x22isValid(\x22+fieldExpr+\x22) \\x26\\x26 isFinite(+\x22+fieldExpr+\x22)\x22:\x22!isValid(\x22+fieldExpr+\x22) || !isFinite(+\x22+fieldExpr+\x22)\x22}function normalizePredicate(f){var _a;return isFieldPredicate(f)\x26\x26f.timeUnit?Object.assign(Object.assign({},f),{timeUnit:null\x3d\x3d\x3d(_a\x3dnormalizeTimeUnit(f.timeUnit))||void 0\x3d\x3d\x3d_a?void 0:_a.unit}):f}function getFullName(type){if(type)switch(type\x3dtype.toLowerCase(),type){case \x22q\x22:case QUANTITATIVE:return\x22quantitative\x22;case \x22t\x22:case TEMPORAL:return\x22temporal\x22;case \x22o\x22:case ORDINAL:return\x22ordinal\x22;\ncase \x22n\x22:case NOMINAL:return\x22nominal\x22;case GEOJSON:return\x22geojson\x22}}function isSelectionDomain(domain){return null\x3d\x3d\x3ddomain||void 0\x3d\x3d\x3ddomain?void 0:domain.selection}function scaleTypeSupportProperty(scaleType,propName){switch(propName){case \x22type\x22:case \x22domain\x22:case \x22reverse\x22:case \x22range\x22:return!0;case \x22scheme\x22:case \x22interpolate\x22:return!contains([\x22point\x22,\x22band\x22,\x22identity\x22],scaleType);case \x22bins\x22:return!contains([\x22point\x22,\x22band\x22,\x22identity\x22,\x22ordinal\x22],scaleType);case \x22round\x22:return scaleType in CONTINUOUS_TO_CONTINUOUS_INDEX||\n\x22band\x22\x3d\x3d\x3dscaleType||\x22point\x22\x3d\x3d\x3dscaleType;case \x22padding\x22:return scaleType in CONTINUOUS_TO_CONTINUOUS_INDEX||contains([\x22point\x22,\x22band\x22],scaleType);case \x22paddingOuter\x22:case \x22align\x22:return contains([\x22point\x22,\x22band\x22],scaleType);case \x22paddingInner\x22:return\x22band\x22\x3d\x3d\x3dscaleType;case \x22domainMid\x22:case \x22clamp\x22:return scaleType in CONTINUOUS_TO_CONTINUOUS_INDEX;case \x22nice\x22:return scaleType in CONTINUOUS_TO_CONTINUOUS_INDEX||\x22quantize\x22\x3d\x3d\x3dscaleType||\x22threshold\x22\x3d\x3d\x3dscaleType;case \x22exponent\x22:return\x22pow\x22\x3d\x3d\x3dscaleType;case \x22base\x22:return\x22log\x22\x3d\x3d\x3d\nscaleType;case \x22constant\x22:return\x22symlog\x22\x3d\x3d\x3dscaleType;case \x22zero\x22:return scaleType in CONTINUOUS_DOMAIN_INDEX\x26\x26!contains([\x22log\x22,\x22time\x22,\x22utc\x22,\x22threshold\x22,\x22quantile\x22],scaleType)}}function channelScalePropertyIncompatability(channel,propName){switch(propName){case \x22interpolate\x22:case \x22scheme\x22:case \x22domainMid\x22:if(!isColorChannel(channel))return\x27Cannot use the scale property \x22\x27+channel+\x27\x22 with non-color channel.\x27}}function scaleTypeSupportDataType(specifiedType,fieldDefType){return contains([ORDINAL,NOMINAL],\nfieldDefType)?void 0\x3d\x3d\x3dspecifiedType||specifiedType in DISCRETE_DOMAIN_INDEX:fieldDefType\x3d\x3d\x3dTEMPORAL?contains([ScaleType.TIME,ScaleType.UTC,void 0],specifiedType):fieldDefType\x3d\x3d\x3dQUANTITATIVE?contains([ScaleType.LOG,ScaleType.POW,ScaleType.SQRT,ScaleType.SYMLOG,ScaleType.QUANTILE,ScaleType.QUANTIZE,ScaleType.THRESHOLD,ScaleType.LINEAR,void 0],specifiedType):!0}function channelSupportScaleType(channel,scaleType){if(!SCALE_CHANNEL_INDEX[channel])return!1;switch(channel){case \x22x\x22:case \x22y\x22:case \x22theta\x22:case \x22radius\x22:return scaleType in\nCONTINUOUS_TO_CONTINUOUS_INDEX||contains([\x22band\x22,\x22point\x22],scaleType);case \x22size\x22:case \x22strokeWidth\x22:case \x22opacity\x22:case \x22fillOpacity\x22:case \x22strokeOpacity\x22:case \x22angle\x22:return scaleType in CONTINUOUS_TO_CONTINUOUS_INDEX||scaleType in CONTINUOUS_TO_DISCRETE_INDEX||contains([\x22band\x22,\x22point\x22,\x22ordinal\x22],scaleType);case \x22color\x22:case \x22fill\x22:case \x22stroke\x22:return\x22band\x22!\x3d\x3dscaleType;case \x22strokeDash\x22:return\x22ordinal\x22\x3d\x3d\x3dscaleType||scaleType in CONTINUOUS_TO_DISCRETE_INDEX;case \x22shape\x22:return\x22ordinal\x22\x3d\x3d\x3dscaleType}}\nfunction midPointRefWithPositionInvalidTest(params){var channel\x3dparams.channel,channelDef\x3dparams.channelDef,markDef\x3dparams.markDef,scale\x3dparams.scale,config\x3dparams.config;params\x3dmidPoint(params);var JSCompiler_temp;if(JSCompiler_temp\x3disFieldDef(channelDef))JSCompiler_temp\x3dchannelDef.aggregate,JSCompiler_temp\x3d!(isString(JSCompiler_temp)\x26\x26contains(COUNTING_OPS,JSCompiler_temp));return JSCompiler_temp\x26\x26scale\x26\x26scale.get(\x22type\x22)in CONTINUOUS_TO_CONTINUOUS_INDEX\x26\x26!1\x3d\x3d\x3dscale.get(\x22zero\x22)?wrapPositionInvalidTest({fieldDef:channelDef,\nchannel:channel,markDef:markDef,ref:params,config:config}):params}function wrapPositionInvalidTest($jscomp$destructuring$var16){var fieldDef\x3d$jscomp$destructuring$var16.fieldDef,channel\x3d$jscomp$destructuring$var16.channel,markDef\x3d$jscomp$destructuring$var16.markDef,ref\x3d$jscomp$destructuring$var16.ref;$jscomp$destructuring$var16\x3d$jscomp$destructuring$var16.config;if(isPathMark(markDef.type)||null\x3d\x3d\x3dgetMarkPropOrConfig(\x22invalid\x22,markDef,$jscomp$destructuring$var16))return ref;fieldDef\x3dfieldInvalidPredicate(fieldDef,\n!0);channel\x3d\x22y\x22\x3d\x3d\x3dgetMainRangeChannel(channel)?{field:{group:\x22height\x22}}:{value:0};return[Object.assign({test:fieldDef},channel),ref]}function fieldInvalidPredicate(field,invalid){invalid\x3dvoid 0\x3d\x3d\x3dinvalid?!0:invalid;return fieldValidPredicate(isString(field)?field:vgField(field,{expr:\x22datum\x22}),!invalid)}function valueRefForFieldOrDatumDef(fieldDef,scaleName,opt,encode){var ref\x3d{};scaleName\x26\x26(ref.scale\x3dscaleName);isDatumDef(fieldDef)?(fieldDef\x3dfieldDef.datum,isDateTime(fieldDef)?ref.signal\x3ddateTimeToExpr(fieldDef):\nisSignalRef(fieldDef)?ref.signal\x3dfieldDef.signal:ref.value\x3dfieldDef):ref.field\x3dvgField(fieldDef,opt);encode\x26\x26(fieldDef\x3dencode.offset,encode\x3dencode.band,fieldDef\x26\x26(ref.offset\x3dfieldDef),encode\x26\x26(ref.band\x3dencode));return ref}function interpolatedSignalRef($jscomp$destructuring$var21){var scaleName\x3d$jscomp$destructuring$var21.scaleName,fieldOrDatumDef\x3d$jscomp$destructuring$var21.fieldOrDatumDef,fieldOrDatumDef2\x3d$jscomp$destructuring$var21.fieldOrDatumDef2,offset\x3d$jscomp$destructuring$var21.offset,band\x3d\nvoid 0\x3d\x3d\x3d$jscomp$destructuring$var21.band?.5:$jscomp$destructuring$var21.band,expr\x3d0\x3cband\x26\x261\x3eband?\x22datum\x22:void 0;$jscomp$destructuring$var21\x3dvgField(fieldOrDatumDef,{expr:expr,suffix:$jscomp$destructuring$var21.startSuffix});fieldOrDatumDef\x3dvoid 0!\x3d\x3dfieldOrDatumDef2?vgField(fieldOrDatumDef2,{expr:expr}):vgField(fieldOrDatumDef,{suffix:\x22end\x22,expr:expr});fieldOrDatumDef2\x3d{};0\x3d\x3d\x3dband||1\x3d\x3d\x3dband?(fieldOrDatumDef2.scale\x3dscaleName,fieldOrDatumDef2.field\x3d0\x3d\x3d\x3dband?$jscomp$destructuring$var21:fieldOrDatumDef):\nfieldOrDatumDef2.signal\x3d\x27scale(\x22\x27+scaleName+\x27\x22, \x27+(band+\x22 * \x22+$jscomp$destructuring$var21+\x22 + \x22+(1-band)+\x22 * \x22+fieldOrDatumDef)+\x22)\x22;offset\x26\x26(fieldOrDatumDef2.offset\x3doffset);return fieldOrDatumDef2}function midPoint($jscomp$destructuring$var23){var channel\x3d$jscomp$destructuring$var23.channel,channelDef\x3d$jscomp$destructuring$var23.channelDef,channel2Def\x3d$jscomp$destructuring$var23.channel2Def,markDef\x3d$jscomp$destructuring$var23.markDef,config\x3d$jscomp$destructuring$var23.config,scaleName\x3d$jscomp$destructuring$var23.scaleName,\nscale\x3d$jscomp$destructuring$var23.scale,stack\x3d$jscomp$destructuring$var23.stack,offset\x3d$jscomp$destructuring$var23.offset,defaultRef\x3d$jscomp$destructuring$var23.defaultRef;$jscomp$destructuring$var23\x3d$jscomp$destructuring$var23.band;var _a;if(channelDef){if(isFieldOrDatumDef(channelDef)){if(isTypedFieldDef(channelDef)){$jscomp$destructuring$var23\x3dnull!\x3d\x3d$jscomp$destructuring$var23\x26\x26void 0!\x3d\x3d$jscomp$destructuring$var23?$jscomp$destructuring$var23:getBand({channel:channel,fieldDef:channelDef,fieldDef2:channel2Def,\nmarkDef:markDef,stack:stack,config:config,isMidPoint:!0});markDef\x3dchannelDef.bin;config\x3dchannelDef.timeUnit;defaultRef\x3dchannelDef.type;if(isBinning(markDef)||$jscomp$destructuring$var23\x26\x26config\x26\x26defaultRef\x3d\x3d\x3dTEMPORAL)return stack\x26\x26stack.impute?valueRefForFieldOrDatumDef(channelDef,scaleName,{binSuffix:\x22mid\x22},{offset:offset}):$jscomp$destructuring$var23?interpolatedSignalRef({scaleName:scaleName,fieldOrDatumDef:channelDef,band:$jscomp$destructuring$var23,offset:offset}):valueRefForFieldOrDatumDef(channelDef,\nscaleName,binRequiresRange(channelDef,channel)?{binSuffix:\x22range\x22}:{},{offset:offset});if(isBinned(markDef)){if(isFieldDef(channel2Def))return interpolatedSignalRef({scaleName:scaleName,fieldOrDatumDef:channelDef,fieldOrDatumDef2:channel2Def,band:$jscomp$destructuring$var23,offset:offset});warn(channelRequiredForBinned(\x22x\x22\x3d\x3d\x3dchannel?\x22x2\x22:\x22y2\x22))}}channel\x3dnull\x3d\x3d\x3dscale||void 0\x3d\x3d\x3dscale?void 0:scale.get(\x22type\x22);return valueRefForFieldOrDatumDef(channelDef,scaleName,channel in DISCRETE_DOMAIN_INDEX?{binSuffix:\x22range\x22}:\n{},{offset:offset,band:\x22band\x22\x3d\x3d\x3dchannel?null!\x3d\x3d(_a\x3dnull!\x3d\x3d$jscomp$destructuring$var23\x26\x26void 0!\x3d\x3d$jscomp$destructuring$var23?$jscomp$destructuring$var23:channelDef.band)\x26\x26void 0!\x3d\x3d_a?_a:.5:void 0})}if(isValueDef(channelDef))return scaleName\x3doffset?{offset:offset}:{},Object.assign(Object.assign({},widthHeightValueOrSignalRef(channel,channelDef.value)),scaleName)}\x22function\x22\x3d\x3d\x3dtypeof defaultRef\x26\x26(defaultRef\x3ddefaultRef());return defaultRef?Object.assign(Object.assign({},defaultRef),offset?{offset:offset}:\n{}):defaultRef}function widthHeightValueOrSignalRef(channel,value){return contains([\x22x\x22,\x22x2\x22],channel)\x26\x26\x22width\x22\x3d\x3d\x3dvalue?{field:{group:\x22width\x22}}:contains([\x22y\x22,\x22y2\x22],channel)\x26\x26\x22height\x22\x3d\x3d\x3dvalue?{field:{group:\x22height\x22}}:signalOrValueRef(value)}function isCustomFormatType(formatType){return formatType\x26\x26\x22number\x22!\x3d\x3dformatType\x26\x26\x22time\x22!\x3d\x3dformatType}function formatSignalRef($jscomp$destructuring$var26){var fieldOrDatumDef\x3d$jscomp$destructuring$var26.fieldOrDatumDef,format\x3d$jscomp$destructuring$var26.format,\nformatType\x3d$jscomp$destructuring$var26.formatType,expr\x3d$jscomp$destructuring$var26.expr,normalizeStack\x3d$jscomp$destructuring$var26.normalizeStack;$jscomp$destructuring$var26\x3d$jscomp$destructuring$var26.config;var _a,_b;if(isCustomFormatType(formatType))return formatCustomType({fieldOrDatumDef:fieldOrDatumDef,format:format,formatType:formatType,expr:expr,config:$jscomp$destructuring$var26});normalizeStack\x3dfieldToFormat(fieldOrDatumDef,expr,normalizeStack);if(isFieldOrDatumDefForTimeFormat(fieldOrDatumDef))return formatType\x3d\nisFieldDef(fieldOrDatumDef)?null\x3d\x3d\x3d(_a\x3dnormalizeTimeUnit(fieldOrDatumDef.timeUnit))||void 0\x3d\x3d\x3d_a?void 0:_a.unit:void 0,$jscomp$destructuring$var26\x3d$jscomp$destructuring$var26.timeFormat,fieldOrDatumDef\x3disScaleFieldDef(fieldOrDatumDef)\x26\x26(null\x3d\x3d\x3d(_b\x3dfieldOrDatumDef.scale)||void 0\x3d\x3d\x3d_b?void 0:_b.type)\x3d\x3d\x3dScaleType.UTC,!formatType||format?(format\x3disString(format)?format:$jscomp$destructuring$var26,_b\x3d(fieldOrDatumDef?\x22utc\x22:\x22time\x22)+\x22Format(\x22+normalizeStack+\x22, \x27\x22+format+\x22\x27)\x22):formatType?(_b\x3dtimeUnitSpecifierExpression(formatType),\n_b\x3d(fieldOrDatumDef||formatType.startsWith(\x22utc\x22)?\x22utc\x22:\x22time\x22)+\x22Format(\x22+normalizeStack+\x22, \x22+_b+\x22)\x22):_b\x3dvoid 0,_b?{signal:_b}:void 0;format\x3dnumberFormat(channelDefType(fieldOrDatumDef),format,$jscomp$destructuring$var26);return isFieldDef(fieldOrDatumDef)\x26\x26isBinning(fieldOrDatumDef.bin)?(_b\x3dvgField(fieldOrDatumDef,{expr:expr,binSuffix:\x22end\x22}),{signal:binFormatExpression(normalizeStack,_b,format,formatType,$jscomp$destructuring$var26)}):format||\x22quantitative\x22\x3d\x3d\x3dchannelDefType(fieldOrDatumDef)?{signal:\x22format(\x22+\nnormalizeStack+\x27, \x22\x27+(format||\x22\x22)+\x27\x22)\x27}:{signal:\x22isValid(\x22+normalizeStack+\x22) ? \x22+normalizeStack+\x27 : \x22\x22+\x27+normalizeStack}}function fieldToFormat(fieldOrDatumDef,expr,normalizeStack){if(isFieldDef(fieldOrDatumDef))return normalizeStack?vgField(fieldOrDatumDef,{expr:expr,suffix:\x22end\x22})+\x22-\x22+vgField(fieldOrDatumDef,{expr:expr,suffix:\x22start\x22}):vgField(fieldOrDatumDef,{expr:expr});fieldOrDatumDef\x3dfieldOrDatumDef.datum;fieldOrDatumDef\x3disDateTime(fieldOrDatumDef)?dateTimeToExpr(fieldOrDatumDef):\x22\x22+JSON.stringify(fieldOrDatumDef);\nreturn fieldOrDatumDef}function formatCustomType($jscomp$destructuring$var28){var fieldOrDatumDef\x3d$jscomp$destructuring$var28.fieldOrDatumDef,format\x3d$jscomp$destructuring$var28.format,formatType\x3d$jscomp$destructuring$var28.formatType,expr\x3d$jscomp$destructuring$var28.expr,normalizeStack\x3d$jscomp$destructuring$var28.normalizeStack,config\x3d$jscomp$destructuring$var28.config;$jscomp$destructuring$var28\x3d$jscomp$destructuring$var28.field;$jscomp$destructuring$var28\x3dnull!\x3d\x3d$jscomp$destructuring$var28\x26\x26void 0!\x3d\x3d\n$jscomp$destructuring$var28?$jscomp$destructuring$var28:fieldToFormat(fieldOrDatumDef,expr,normalizeStack);return isFieldDef(fieldOrDatumDef)\x26\x26isBinning(fieldOrDatumDef.bin)?(fieldOrDatumDef\x3dvgField(fieldOrDatumDef,{expr:expr,binSuffix:\x22end\x22}),{signal:binFormatExpression($jscomp$destructuring$var28,fieldOrDatumDef,format,formatType,config)}):{signal:formatType+\x22(\x22+$jscomp$destructuring$var28+(format?\x22, \x22+JSON.stringify(format):\x22\x22)+\x22)\x22}}function guideFormat(fieldOrDatumDef,type,format,formatType,config,\nomitTimeFormatConfig){var _a;if(!isCustomFormatType(formatType))return isFieldOrDatumDefForTimeFormat(fieldOrDatumDef)?(fieldOrDatumDef\x3disFieldDef(fieldOrDatumDef)?null\x3d\x3d\x3d(_a\x3dnormalizeTimeUnit(fieldOrDatumDef.timeUnit))||void 0\x3d\x3d\x3d_a?void 0:_a.unit:void 0,format\x3dformat?format:fieldOrDatumDef?{signal:timeUnitSpecifierExpression(fieldOrDatumDef)}:omitTimeFormatConfig?void 0:config.timeFormat,format):numberFormat(type,format,config)}function guideFormatType(formatType,fieldOrDatumDef,scaleType){if(formatType\x26\x26\n(isSignalRef(formatType)||\x22number\x22\x3d\x3d\x3dformatType||\x22time\x22\x3d\x3d\x3dformatType))return formatType;if(isFieldOrDatumDefForTimeFormat(fieldOrDatumDef)\x26\x26\x22time\x22!\x3d\x3dscaleType\x26\x26\x22utc\x22!\x3d\x3dscaleType)return\x22time\x22}function numberFormat(type,specifiedFormat,config){if(isString(specifiedFormat))return specifiedFormat;if(type\x3d\x3d\x3dQUANTITATIVE)return config.numberFormat}function binNumberFormatExpr(field,format,formatType,config){var _a;if(isCustomFormatType(formatType))return formatType+\x22(\x22+field+(format?\x22, \x22+JSON.stringify(format):\n\x22\x22)+\x22)\x22;format\x3dnull!\x3d\x3d(_a\x3disString(format)?format:void 0)\x26\x26void 0!\x3d\x3d_a?_a:config.numberFormat;return\x22format(\x22+field+\x27, \x22\x27+(format||\x22\x22)+\x27\x22)\x27}function binFormatExpression(startField,endField,format,formatType,config){var start\x3dbinNumberFormatExpr(startField,format,formatType,config);endField\x3dbinNumberFormatExpr(endField,format,formatType,config);return fieldValidPredicate(startField,!1)+\x27 ? \x22null\x22 : \x27+start+\x27 + \x22 \u2013 \x22 + \x27+endField}function isSortField(sort){return!!sort\x26\x26(\x22count\x22\x3d\x3d\x3dsort.op||!!sort.field)}\nfunction isSortArray(sort){return!!sort\x26\x26isArray(sort)}function isFacetMapping(f){return\x22row\x22in f||\x22column\x22in f}function toFieldDefBase(fieldDef){var field\x3dfieldDef.field,timeUnit\x3dfieldDef.timeUnit,bin\x3dfieldDef.bin;fieldDef\x3dfieldDef.aggregate;return Object.assign(Object.assign(Object.assign(Object.assign({},timeUnit?{timeUnit:timeUnit}:{}),bin?{bin:bin}:{}),fieldDef?{aggregate:fieldDef}:{}),{field:field})}function getBand($jscomp$destructuring$var31){var channel\x3d$jscomp$destructuring$var31.channel,\nfieldDef\x3d$jscomp$destructuring$var31.fieldDef,fieldDef2\x3d$jscomp$destructuring$var31.fieldDef2,mark\x3d$jscomp$destructuring$var31.markDef,stack\x3d$jscomp$destructuring$var31.stack,config\x3d$jscomp$destructuring$var31.config;$jscomp$destructuring$var31\x3d$jscomp$destructuring$var31.isMidPoint;if(isFieldOrDatumDef(fieldDef)\x26\x26void 0!\x3d\x3dfieldDef.band)return fieldDef.band;if(isFieldDef(fieldDef)){var bin$421\x3dfieldDef.bin;if(fieldDef.timeUnit\x26\x26!fieldDef2)return $jscomp$destructuring$var31?getMarkConfig(\x22timeUnitBandPosition\x22,\nmark,config):contains([\x22rect\x22,\x22bar\x22,\x22image\x22,\x22arc\x22],mark.type)?getMarkConfig(\x22timeUnitBand\x22,mark,config):0;if(isBinning(bin$421))return contains([\x22rect\x22,\x22bar\x22,\x22image\x22,\x22arc\x22],mark.type)\x26\x26!$jscomp$destructuring$var31?1:.5}if((null\x3d\x3d\x3dstack||void 0\x3d\x3d\x3dstack?void 0:stack.fieldChannel)\x3d\x3d\x3dchannel\x26\x26$jscomp$destructuring$var31)return.5}function hasBand(channel,fieldDef,fieldDef2,stack,markDef,config){return isBinning(fieldDef.bin)||fieldDef.timeUnit\x26\x26isTypedFieldDef(fieldDef)\x26\x26\x22temporal\x22\x3d\x3d\x3dfieldDef.type?!!getBand({channel:channel,\nfieldDef:fieldDef,fieldDef2:fieldDef2,stack:stack,markDef:markDef,config:config}):!1}function hasConditionalFieldDef(channelDef){channelDef\x3dchannelDef\x26\x26channelDef.condition;return!!channelDef\x26\x26!isArray(channelDef)\x26\x26isFieldDef(channelDef)}function hasConditionalFieldOrDatumDef(channelDef){channelDef\x3dchannelDef\x26\x26channelDef.condition;return!!channelDef\x26\x26!isArray(channelDef)\x26\x26isFieldOrDatumDef(channelDef)}function isFieldDef(channelDef){return!!channelDef\x26\x26(!!channelDef.field||\x22count\x22\x3d\x3d\x3dchannelDef.aggregate)}\nfunction channelDefType(channelDef){return channelDef\x26\x26channelDef.type}function isDatumDef(channelDef){return!!channelDef\x26\x26\x22datum\x22in channelDef}function isContinuousFieldOrDatumDef(cd){return isTypedFieldDef(cd)\x26\x26!isDiscrete(cd)||isNumericDataDef(cd)}function isNumericDataDef(cd){return isDatumDef(cd)\x26\x26isNumber(cd.datum)}function isFieldOrDatumDef(channelDef){return isFieldDef(channelDef)||isDatumDef(channelDef)}function isTypedFieldDef(channelDef){return!!channelDef\x26\x26(\x22field\x22in channelDef\x26\x26\x22type\x22in\nchannelDef||\x22count\x22\x3d\x3d\x3dchannelDef.aggregate)}function isValueDef(channelDef){return channelDef\x26\x26\x22value\x22in channelDef\x26\x26\x22value\x22in channelDef}function isScaleFieldDef(channelDef){return!!channelDef\x26\x26(\x22scale\x22in channelDef||\x22sort\x22in channelDef)}function isPositionFieldOrDatumDef(channelDef){return channelDef\x26\x26(\x22axis\x22in channelDef||\x22stack\x22in channelDef||\x22impute\x22in channelDef)}function isTextFieldOrDatumDef(channelDef){return!!channelDef\x26\x26(\x22format\x22in channelDef||\x22formatType\x22in channelDef)}function vgField(fieldDef,\nopt){opt\x3dvoid 0\x3d\x3d\x3dopt?{}:opt;var _a,_b,_c,field\x3dfieldDef.field,prefix\x3dopt.prefix,suffix\x3dopt.suffix,argAccessor\x3d\x22\x22;if(\x22count\x22\x3d\x3d\x3dfieldDef.aggregate)field\x3d\x22__count\x22;else{if(!opt.nofn)if(\x22op\x22in fieldDef)var fn\x3dfieldDef.op;else{var bin$422\x3dfieldDef.bin,aggregate\x3dfieldDef.aggregate;fieldDef\x3dfieldDef.timeUnit;isBinning(bin$422)?(fn\x3dbinToString(bin$422),suffix\x3d(null!\x3d\x3d(_a\x3dopt.binSuffix)\x26\x26void 0!\x3d\x3d_a?_a:\x22\x22)+(null!\x3d\x3d(_b\x3dopt.suffix)\x26\x26void 0!\x3d\x3d_b?_b:\x22\x22)):aggregate?isArgmaxDef(aggregate)?(argAccessor\x3d\x27[\x22\x27+field+\n\x27\x22]\x27,field\x3d\x22argmax_\x22+aggregate.argmax):isArgminDef(aggregate)?(argAccessor\x3d\x27[\x22\x27+field+\x27\x22]\x27,field\x3d\x22argmin_\x22+aggregate.argmin):fn\x3dString(aggregate):fieldDef\x26\x26(fn\x3dtimeUnitToString(fieldDef),suffix\x3d(!contains([\x22range\x22,\x22mid\x22],opt.binSuffix)\x26\x26opt.binSuffix||\x22\x22)+(null!\x3d\x3d(_c\x3dopt.suffix)\x26\x26void 0!\x3d\x3d_c?_c:\x22\x22))}fn\x26\x26(field\x3dfield?fn+\x22_\x22+field:fn)}suffix\x26\x26(field\x3dfield+\x22_\x22+suffix);prefix\x26\x26(field\x3dprefix+\x22_\x22+field);return opt.forAs?\x22\x22+splitAccessPath(field).join(\x22.\x22):opt.expr?(opt\x3dopt.expr,(void 0\x3d\x3d\x3dopt?\x22datum\x22:opt)+\n\x22[\x22+$(splitAccessPath(field).join(\x22.\x22))+\x22]\x22+argAccessor):replacePathInField(field)+argAccessor}function isDiscrete(def){switch(def.type){case \x22nominal\x22:case \x22ordinal\x22:case \x22geojson\x22:return!0;case \x22quantitative\x22:return isFieldDef(def)\x26\x26!!def.bin;case \x22temporal\x22:return!1}throw Error(\x27Invalid field type \x22\x27+def.type+\x27\x22.\x27);}function verbalTitleFormatter(fieldDef,config){var _a,field\x3dfieldDef.field,timeUnit\x3dfieldDef.timeUnit,aggregate\x3dfieldDef.aggregate;if(\x22count\x22\x3d\x3d\x3daggregate)return config.countTitle;if(isBinning(fieldDef.bin))return field+\n\x22 (binned)\x22;if(timeUnit){if(fieldDef\x3dnull\x3d\x3d\x3d(_a\x3dnormalizeTimeUnit(timeUnit))||void 0\x3d\x3d\x3d_a?void 0:_a.unit)return field+\x22 (\x22+getTimeUnitParts(fieldDef).join(\x22-\x22)+\x22)\x22}else if(aggregate)return isArgmaxDef(aggregate)?field+\x22 for max \x22+aggregate.argmax:isArgminDef(aggregate)?field+\x22 for min \x22+aggregate.argmin:titleCase(aggregate)+\x22 of \x22+field;return field}function title$jscomp$0(fieldOrDatumDef,config,$jscomp$destructuring$var37){var allowDisabling\x3d$jscomp$destructuring$var37.allowDisabling,includeDefault\x3d\nvoid 0\x3d\x3d\x3d$jscomp$destructuring$var37.includeDefault?!0:$jscomp$destructuring$var37.includeDefault,_a,_b;$jscomp$destructuring$var37\x3d(null!\x3d\x3d(_a\x3dgetGuide(fieldOrDatumDef))\x26\x26void 0!\x3d\x3d_a?_a:{}).title;if(!isFieldDef(fieldOrDatumDef))return $jscomp$destructuring$var37;config\x3dincludeDefault?titleFormatter(fieldOrDatumDef,config):void 0;return allowDisabling?getFirstDefined($jscomp$destructuring$var37,fieldOrDatumDef.title,config):null!\x3d\x3d(_b\x3dnull!\x3d\x3d$jscomp$destructuring$var37\x26\x26void 0!\x3d\x3d$jscomp$destructuring$var37?\n$jscomp$destructuring$var37:fieldOrDatumDef.title)\x26\x26void 0!\x3d\x3d_b?_b:config}function getGuide(fieldDef){if(isPositionFieldOrDatumDef(fieldDef)\x26\x26fieldDef.axis)return fieldDef.axis;if(fieldDef\x26\x26\x22legend\x22in fieldDef\x26\x26fieldDef.legend)return fieldDef.legend;if(fieldDef\x26\x26\x22header\x22in fieldDef\x26\x26fieldDef.header)return fieldDef.header}function getFormatMixins(fieldDef){var _a;if(isTextFieldOrDatumDef(fieldDef))return{format:fieldDef.format,formatType:fieldDef.formatType};fieldDef\x3dnull!\x3d\x3d(_a\x3dgetGuide(fieldDef))\x26\x26\nvoid 0!\x3d\x3d_a?_a:{};return{format:fieldDef.format,formatType:fieldDef.formatType}}function defaultType(fieldDef,channel){if(fieldDef.timeUnit)return\x22temporal\x22;if(isBinning(fieldDef.bin))return\x22quantitative\x22;switch(rangeType(channel)){case \x22continuous\x22:return\x22quantitative\x22;case \x22discrete\x22:return\x22nominal\x22;case \x22flexible\x22:return\x22nominal\x22;default:return\x22quantitative\x22}}function getFieldDef(channelDef){if(isFieldDef(channelDef))return channelDef;if(hasConditionalFieldDef(channelDef))return channelDef.condition}\nfunction getFieldOrDatumDef(channelDef){if(isFieldOrDatumDef(channelDef))return channelDef;if(hasConditionalFieldOrDatumDef(channelDef))return channelDef.condition}function initChannelDef(channelDef,channel,config){return isString(channelDef)||isNumber(channelDef)||isBoolean(channelDef)?(config\x3disString(channelDef)?\x22string\x22:isNumber(channelDef)?\x22number\x22:\x22boolean\x22,warn(\x22Channel \x22+channel+\x22 is a \x22+config+\x22. Converted to {value: \x22+stringify(channelDef)+\x22}.\x22),{value:channelDef}):isFieldOrDatumDef(channelDef)?\ninitFieldOrDatumDef(channelDef,channel,config):hasConditionalFieldOrDatumDef(channelDef)?Object.assign(Object.assign({},channelDef),{condition:initFieldOrDatumDef(channelDef.condition,channel,config)}):channelDef}function initFieldOrDatumDef(fd,channel,config){if(isTextFieldOrDatumDef(fd)){var formatType\x3dfd.formatType,rest\x3d__rest(fd,[\x22format\x22,\x22formatType\x22]);if(isCustomFormatType(formatType)\x26\x26!config.customFormatTypes)return warn(customFormatTypeNotAllowed(channel)),initFieldOrDatumDef(rest,channel,\nconfig)}else if((formatType\x3disPositionFieldOrDatumDef(fd)?\x22axis\x22:fd\x26\x26\x22legend\x22in fd?\x22legend\x22:fd\x26\x26\x22header\x22in fd?\x22header\x22:null)\x26\x26fd[formatType]){var _a\x3dfd[formatType];rest\x3d_a.formatType;_a\x3d__rest(_a,[\x22format\x22,\x22formatType\x22]);if(isCustomFormatType(rest)\x26\x26!config.customFormatTypes)return warn(customFormatTypeNotAllowed(channel)),rest\x3d{},initFieldOrDatumDef(Object.assign(Object.assign({},fd),(rest[formatType]\x3d_a,rest)),channel,config)}if(isFieldDef(fd))return initFieldDef(fd,channel);channel\x3dfd.type;channel||\n(channel\x3dfd.datum,channel\x3disNumber(channel)?\x22quantitative\x22:isString(channel)?\x22nominal\x22:isDateTime(channel)?\x22temporal\x22:void 0,fd\x3dObject.assign(Object.assign({},fd),{type:channel}));return fd}function initFieldDef(fd,channel){var aggregate\x3dfd.aggregate,timeUnit\x3dfd.timeUnit,bin\x3dfd.bin,field\x3dfd.field;fd\x3dObject.assign({},fd);!aggregate||isAggregateOp(aggregate)||isArgmaxDef(aggregate)||isArgminDef(aggregate)||(warn(\x27Invalid aggregation operator \x22\x27+aggregate+\x27\x22.\x27),delete fd.aggregate);timeUnit\x26\x26(fd.timeUnit\x3d\nnormalizeTimeUnit(timeUnit));field\x26\x26(fd.field\x3d\x22\x22+field);isBinning(bin)\x26\x26(fd.bin\x3dnormalizeBin(bin,channel));!isBinned(bin)||channel in POSITION_SCALE_CHANNEL_INDEX||warn(\x22Channel \x22+channel+\x27 should not be used with \x22binned\x22 bin.\x27);isTypedFieldDef(fd)?(timeUnit\x3dfd.type,bin\x3dgetFullName(timeUnit),timeUnit!\x3d\x3dbin\x26\x26(fd.type\x3dbin),\x22quantitative\x22!\x3d\x3dtimeUnit\x26\x26isString(aggregate)\x26\x26contains(COUNTING_OPS,aggregate)\x26\x26(warn(\x27Invalid field type \x22\x27+timeUnit+\x27\x22 for aggregate: \x22\x27+aggregate+\x27\x22, using \x22quantitative\x22 instead.\x27),\nfd.type\x3d\x22quantitative\x22)):isSecondaryRangeChannel(channel)||(aggregate\x3ddefaultType(fd,channel),warn(\x27Missing type for channel \x22\x27+channel+\x27\x22, using \x22\x27+aggregate+\x27\x22 instead.\x27),fd.type\x3daggregate);isTypedFieldDef(fd)\x26\x26(channel\x3dchannelCompatibility(fd,channel),aggregate\x3dchannel.warning,channel.compatible||warn(aggregate));if(isTypedFieldDef(fd)\x26\x26\x22sort\x22in fd\x26\x26isString(fd.sort)){channel\x3dfd.sort;if(channel in SORT_BY_CHANNEL_INDEX)return Object.assign(Object.assign({},fd),{sort:{encoding:channel}});aggregate\x3d\nchannel.substr(1);if(\x22-\x22\x3d\x3d\x3dchannel.charAt(0)\x26\x26aggregate in SORT_BY_CHANNEL_INDEX)return Object.assign(Object.assign({},fd),{sort:{encoding:aggregate,order:\x22descending\x22}})}return fd\x26\x26\x22header\x22in fd\x26\x26(channel\x3dfd.header,aggregate\x3dchannel.orient,timeUnit\x3d__rest(channel,[\x22orient\x22]),aggregate)?Object.assign(Object.assign({},fd),{header:Object.assign(Object.assign({},timeUnit),{labelOrient:channel.labelOrient||aggregate,titleOrient:channel.titleOrient||aggregate})}):fd}function normalizeBin(bin,channel){return isBoolean(bin)?\n{maxbins:autoMaxBins(channel)}:\x22binned\x22\x3d\x3d\x3dbin?{binned:!0}:bin.maxbins||bin.step?bin:Object.assign(Object.assign({},bin),{maxbins:autoMaxBins(channel)})}function channelCompatibility(fieldDef,channel){var type\x3dfieldDef.type;if(\x22geojson\x22\x3d\x3d\x3dtype\x26\x26\x22shape\x22!\x3d\x3dchannel)return{compatible:!1,warning:\x22Channel \x22+channel+\x22 should not be used with a geojson data.\x22};switch(channel){case \x22row\x22:case \x22column\x22:case \x22facet\x22:return isDiscrete(fieldDef)?COMPATIBLE:{compatible:!1,warning:channel+\x22 encoding should be discrete (ordinal / nominal / binned).\x22};\ncase \x22x\x22:case \x22y\x22:case \x22color\x22:case \x22fill\x22:case \x22stroke\x22:case \x22text\x22:case \x22detail\x22:case \x22key\x22:case \x22tooltip\x22:case \x22href\x22:case \x22url\x22:case \x22angle\x22:case \x22theta\x22:case \x22radius\x22:case \x22description\x22:return COMPATIBLE;case \x22longitude\x22:case \x22longitude2\x22:case \x22latitude\x22:case \x22latitude2\x22:return type!\x3d\x3dQUANTITATIVE?{compatible:!1,warning:\x22Channel \x22+channel+\x22 should be used with a quantitative field only, not \x22+fieldDef.type+\x22 field.\x22}:COMPATIBLE;case \x22opacity\x22:case \x22fillOpacity\x22:case \x22strokeOpacity\x22:case \x22strokeWidth\x22:case \x22size\x22:case \x22theta2\x22:case \x22radius2\x22:case \x22x2\x22:case \x22y2\x22:return\x22nominal\x22!\x3d\x3d\ntype||fieldDef.sort?COMPATIBLE:{compatible:!1,warning:\x22Channel \x22+channel+\x22 should not be used with an unsorted discrete field.\x22};case \x22strokeDash\x22:return contains([\x22ordinal\x22,\x22nominal\x22],fieldDef.type)?COMPATIBLE:{compatible:!1,warning:\x22StrokeDash channel should be used with only discrete data.\x22};case \x22shape\x22:return contains([\x22ordinal\x22,\x22nominal\x22,\x22geojson\x22],fieldDef.type)?COMPATIBLE:{compatible:!1,warning:\x22Shape channel should be used with only either discrete or geojson data.\x22};case \x22order\x22:return\x22nominal\x22!\x3d\x3d\nfieldDef.type||\x22sort\x22in fieldDef?COMPATIBLE:{compatible:!1,warning:\x22Channel order is inappropriate for nominal field, which has no inherent order.\x22}}}function isFieldOrDatumDefForTimeFormat(fieldOrDatumDef){var formatType\x3dgetFormatMixins(fieldOrDatumDef).formatType,JSCompiler_temp;if(!(JSCompiler_temp\x3d\x22time\x22\x3d\x3d\x3dformatType)){if(formatType\x3d!formatType)formatType\x3dfieldOrDatumDef\x26\x26(\x22temporal\x22\x3d\x3d\x3dfieldOrDatumDef.type||isFieldDef(fieldOrDatumDef)\x26\x26!!fieldOrDatumDef.timeUnit);JSCompiler_temp\x3dformatType}return JSCompiler_temp}\nfunction valueExpr(v,$jscomp$destructuring$var51){var timeUnit\x3d$jscomp$destructuring$var51.timeUnit,type\x3d$jscomp$destructuring$var51.type,wrapTime\x3d$jscomp$destructuring$var51.wrapTime;$jscomp$destructuring$var51\x3d$jscomp$destructuring$var51.undefinedIfExprNotRequired;var _a;type\x3d(timeUnit\x3dtimeUnit\x26\x26(null\x3d\x3d\x3d(_a\x3dnormalizeTimeUnit(timeUnit))||void 0\x3d\x3d\x3d_a?void 0:_a.unit))||\x22temporal\x22\x3d\x3d\x3dtype;if(isSignalRef(v))var expr\x3dv.signal;else isDateTime(v)?(type\x3d!0,expr\x3ddateTimeToExpr(v)):(isString(v)||isNumber(v))\x26\x26\ntype\x26\x26(expr\x3d\x22datetime(\x22+JSON.stringify(v)+\x22)\x22,LOCAL_SINGLE_TIMEUNIT_INDEX[timeUnit]\x26\x26(isNumber(v)\x26\x261E4\x3ev||isString(v)\x26\x26isNaN(Date.parse(v)))\x26\x26(expr\x3d{},expr\x3ddateTimeToExpr((expr[timeUnit]\x3dv,expr))));return expr?wrapTime\x26\x26type?\x22time(\x22+expr+\x22)\x22:expr:$jscomp$destructuring$var51?void 0:JSON.stringify(v)}function valueArray(fieldOrDatumDef,values){var type\x3dfieldOrDatumDef.type;return values.map(function(v){var expr\x3dvalueExpr(v,{timeUnit:isFieldDef(fieldOrDatumDef)?fieldOrDatumDef.timeUnit:void 0,type:type,\nundefinedIfExprNotRequired:!0});return void 0!\x3d\x3dexpr?{signal:expr}:v})}function binRequiresRange(fieldDef,channel){return isBinning(fieldDef.bin)?!!SCALE_CHANNEL_INDEX[channel]\x26\x26contains([\x22ordinal\x22,\x22nominal\x22],fieldDef.type):(console.warn(\x22Only call this method for binned field defs.\x22),!1)}function extractTitleConfig(titleConfig){var anchor\x3dtitleConfig.anchor,frame\x3dtitleConfig.frame,offset\x3dtitleConfig.offset,orient\x3dtitleConfig.orient,color\x3dtitleConfig.color,subtitleColor\x3dtitleConfig.subtitleColor,\nsubtitleFont\x3dtitleConfig.subtitleFont,subtitleFontSize\x3dtitleConfig.subtitleFontSize,subtitleFontStyle\x3dtitleConfig.subtitleFontStyle,subtitleFontWeight\x3dtitleConfig.subtitleFontWeight,subtitleLineHeight\x3dtitleConfig.subtitleLineHeight,subtitlePadding\x3dtitleConfig.subtitlePadding;titleConfig\x3d__rest(titleConfig,\x22anchor frame offset orient color subtitleColor subtitleFont subtitleFontSize subtitleFontStyle subtitleFontWeight subtitleLineHeight subtitlePadding\x22.split(\x22 \x22));color\x3dObject.assign(Object.assign({},\ntitleConfig),color?{fill:color}:{});anchor\x3dObject.assign(Object.assign(Object.assign(Object.assign({},anchor?{anchor:anchor}:{}),frame?{frame:frame}:{}),offset?{offset:offset}:{}),orient?{orient:orient}:{});subtitleColor\x3dObject.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},subtitleColor?{subtitleColor:subtitleColor}:{}),subtitleFont?{subtitleFont:subtitleFont}:{}),subtitleFontSize?{subtitleFontSize:subtitleFontSize}:{}),subtitleFontStyle?{subtitleFontStyle:subtitleFontStyle}:\n{}),subtitleFontWeight?{subtitleFontWeight:subtitleFontWeight}:{}),subtitleLineHeight?{subtitleLineHeight:subtitleLineHeight}:{}),subtitlePadding?{subtitlePadding:subtitlePadding}:{});subtitleFont\x3dpick(color,[\x22align\x22,\x22baseline\x22,\x22dx\x22,\x22dy\x22,\x22limit\x22]);return{titleMarkConfig:color,subtitleMarkConfig:subtitleFont,nonMark:anchor,subtitle:subtitleColor}}function isText(v){return isString(v)||isArray(v)\x26\x26isString(v[0])}function signalOrValueRef(value){return isSignalRef(value)?value:void 0!\x3d\x3dvalue?{value:value}:\nvoid 0}function signalOrStringValue(v){return isSignalRef(v)?v.signal:null\x3d\x3dv?null:$(v)}function applyMarkConfig(e,model,propsList){propsList\x3d$jscomp.makeIterator(propsList);for(var $jscomp$key$property\x3dpropsList.next();!$jscomp$key$property.done;$jscomp$key$property\x3dpropsList.next()){$jscomp$key$property\x3d$jscomp$key$property.value;var value\x3dgetMarkConfig($jscomp$key$property,model.markDef,model.config);void 0!\x3d\x3dvalue\x26\x26(e[$jscomp$key$property]\x3dsignalOrValueRef(value))}return e}function getStyles(mark){var _a;\nreturn[].concat(mark.type,null!\x3d\x3d(_a\x3dmark.style)\x26\x26void 0!\x3d\x3d_a?_a:[])}function getMarkPropOrConfig(channel,mark,config,opt){var $jscomp$destructuring$var55\x3dopt\x3dvoid 0\x3d\x3d\x3dopt?{}:opt,vgChannel\x3d$jscomp$destructuring$var55.vgChannel;if(vgChannel\x26\x26void 0!\x3d\x3dmark[vgChannel])return mark[vgChannel];if(void 0!\x3d\x3dmark[channel])return mark[channel];if(!$jscomp$destructuring$var55.ignoreVgConfig||vgChannel\x26\x26vgChannel!\x3d\x3dchannel)return getMarkConfig(channel,mark,config,opt)}function getMarkConfig(channel,mark,config,\n$jscomp$destructuring$var56){$jscomp$destructuring$var56\x3d(void 0\x3d\x3d\x3d$jscomp$destructuring$var56?{}:$jscomp$destructuring$var56).vgChannel;return getFirstDefined($jscomp$destructuring$var56?getMarkStyleConfig(channel,mark,config.style):void 0,getMarkStyleConfig(channel,mark,config.style),$jscomp$destructuring$var56?config[mark.type][$jscomp$destructuring$var56]:void 0,config[mark.type][channel],$jscomp$destructuring$var56?config.mark[$jscomp$destructuring$var56]:config.mark[channel])}function getMarkStyleConfig(prop,\nmark,styleConfigIndex){return getStyleConfig(prop,getStyles(mark),styleConfigIndex)}function getStyleConfig(p,styles,styleConfigIndex){styles\x3darray$jscomp$0(styles);var value;styles\x3d$jscomp.makeIterator(styles);for(var $jscomp$key$style\x3dstyles.next();!$jscomp$key$style.done;$jscomp$key$style\x3dstyles.next())($jscomp$key$style\x3dstyleConfigIndex[$jscomp$key$style.value])\x26\x26void 0!\x3d\x3d$jscomp$key$style[p]\x26\x26(value\x3d$jscomp$key$style[p]);return value}function sortParams(orderDef,fieldRefOption){return array$jscomp$0(orderDef).reduce(function(s,\norderChannelDef){var _a;s.field.push(vgField(orderChannelDef,fieldRefOption));s.order.push(null!\x3d\x3d(_a\x3dorderChannelDef.sort)\x26\x26void 0!\x3d\x3d_a?_a:\x22ascending\x22);return s},{field:[],order:[]})}function mergeTitleFieldDefs(f1,f2){var merged\x3d[].concat($jscomp.arrayFromIterable(f1));f2.forEach(function(fdToMerge){for(var $jscomp$iter$78\x3d$jscomp.makeIterator(merged),$jscomp$key$fieldDef1\x3d$jscomp$iter$78.next();!$jscomp$key$fieldDef1.done;$jscomp$key$fieldDef1\x3d$jscomp$iter$78.next())if(deepEqual($jscomp$key$fieldDef1.value,\nfdToMerge))return;merged.push(fdToMerge)});return merged}function mergeTitle(title1,title2){return deepEqual(title1,title2)||!title2?title1:title1?[].concat($jscomp.arrayFromIterable(array$jscomp$0(title1)),$jscomp.arrayFromIterable(array$jscomp$0(title2))).join(\x22, \x22):title2}function mergeTitleComponent(v1,v2){var v1Val\x3dv1.value;v2\x3dv2.value;if(null\x3d\x3dv1Val||null\x3d\x3d\x3dv2)return{explicit:v1.explicit,value:null};if((isText(v1Val)||isSignalRef(v1Val))\x26\x26(isText(v2)||isSignalRef(v2)))return{explicit:v1.explicit,\nvalue:mergeTitle(v1Val,v2)};if(isText(v1Val)||isSignalRef(v1Val))return{explicit:v1.explicit,value:v1Val};if(isText(v2)||isSignalRef(v2))return{explicit:v1.explicit,value:v2};if(!(isText(v1Val)||isSignalRef(v1Val)||isText(v2)||isSignalRef(v2)))return{explicit:v1.explicit,value:mergeTitleFieldDefs(v1Val,v2)};throw Error(\x22It should never reach here\x22);}function channelHasField(encoding,channel){return(encoding\x3dencoding\x26\x26encoding[channel])?isArray(encoding)?some(encoding,function(fieldDef){return!!fieldDef.field}):\nisFieldDef(encoding)||hasConditionalFieldDef(encoding):!1}function isAggregate(encoding){return some(CHANNELS,function(channel){return channelHasField(encoding,channel)?(channel\x3dencoding[channel],isArray(channel)?some(channel,function(fieldDef){return!!fieldDef.aggregate}):(channel\x3dgetFieldDef(channel))\x26\x26!!channel.aggregate):!1})}function extractTransformsFromEncoding(oldEncoding,config){var groupby\x3d[],bins\x3d[],timeUnits\x3d[],aggregate\x3d[],encoding\x3d{};forEach(oldEncoding,function(channelDef,channel){if(isFieldDef(channelDef)){var field$428\x3d\nchannelDef.field,aggOp\x3dchannelDef.aggregate,bin$429\x3dchannelDef.bin,timeUnit\x3dchannelDef.timeUnit,remaining\x3d__rest(channelDef,[\x22field\x22,\x22aggregate\x22,\x22bin\x22,\x22timeUnit\x22]);if(aggOp||timeUnit||bin$429){var guide\x3dgetGuide(channelDef),isTitleDefined\x3dguide\x26\x26guide.title;guide\x3dvgField(channelDef,{forAs:!0});remaining\x3dObject.assign(Object.assign(Object.assign({},isTitleDefined?[]:{title:title$jscomp$0(channelDef,config,{allowDisabling:!0})}),remaining),{field:guide});if(aggOp){if(isArgmaxDef(aggOp)){var op\x3d\x22argmax\x22;\nguide\x3dvgField({op:\x22argmax\x22,field:aggOp.argmax},{forAs:!0});remaining.field\x3dguide+\x22.\x22+field$428}else isArgminDef(aggOp)?(op\x3d\x22argmin\x22,guide\x3dvgField({op:\x22argmin\x22,field:aggOp.argmin},{forAs:!0}),remaining.field\x3dguide+\x22.\x22+field$428):\x22boxplot\x22!\x3d\x3daggOp\x26\x26\x22errorbar\x22!\x3d\x3daggOp\x26\x26\x22errorband\x22!\x3d\x3daggOp\x26\x26(op\x3daggOp);op\x26\x26(channelDef\x3d{op:op,as:guide},field$428\x26\x26(channelDef.field\x3dfield$428),aggregate.push(channelDef))}else groupby.push(guide),isTypedFieldDef(channelDef)\x26\x26isBinning(bin$429)?(bins.push({bin:bin$429,field:field$428,\nas:guide}),groupby.push(vgField(channelDef,{binSuffix:\x22end\x22})),binRequiresRange(channelDef,channel)\x26\x26groupby.push(vgField(channelDef,{binSuffix:\x22range\x22})),channel in POSITION_SCALE_CHANNEL_INDEX\x26\x26(encoding[channel+\x222\x22]\x3d{field:guide+\x22_end\x22}),remaining.bin\x3d\x22binned\x22,isSecondaryRangeChannel(channel)||(remaining.type\x3dQUANTITATIVE)):timeUnit\x26\x26(timeUnits.push({timeUnit:timeUnit,field:field$428,as:guide}),(field$428\x3disTypedFieldDef(channelDef)\x26\x26channelDef.type!\x3d\x3dTEMPORAL\x26\x26\x22time\x22)\x26\x26(\x22text\x22\x3d\x3d\x3dchannel||\x22tooltip\x22\x3d\x3d\x3d\nchannel?remaining.formatType\x3dfield$428:NONPOSITION_CHANNEL_INDEX[channel]?remaining.legend\x3dObject.assign({formatType:field$428},remaining.legend):channel in POSITION_SCALE_CHANNEL_INDEX\x26\x26(remaining.axis\x3dObject.assign({formatType:field$428},remaining.axis))));encoding[channel]\x3dremaining}else groupby.push(field$428),encoding[channel]\x3doldEncoding[channel]}else encoding[channel]\x3doldEncoding[channel]});return{bins:bins,timeUnits:timeUnits,aggregate:aggregate,groupby:groupby,encoding:encoding}}function markChannelCompatible(encoding,\nchannel,mark){mark\x3dgetSupportedMark(channel)[mark];return mark\x26\x26(\x22binned\x22!\x3d\x3dmark||(mark\x3dencoding[\x22x2\x22\x3d\x3d\x3dchannel?\x22x\x22:\x22y\x22],isFieldDef(mark)\x26\x26isFieldDef(encoding[channel])\x26\x26isBinned(mark.bin)))?!0:!1}function initEncoding(encoding,markDef,config){var mark\x3dmarkDef.type;return keys$jscomp$0(encoding).reduce(function(normalizedEncoding,channel){if(!CHANNEL_INDEX[channel])return warn(channel+\x22-encoding is dropped as \x22+channel+\x22 is not a valid encoding channel.\x22),normalizedEncoding;var channelDef\x3dencoding[channel];\n\x22angle\x22!\x3d\x3dchannel||\x22arc\x22!\x3d\x3dmark||encoding.theta||(warn(\x22Arc marks uses theta channel rather than angle, replacing angle with theta.\x22),channel\x3d\x22theta\x22);if(!markChannelCompatible(encoding,channel,mark))return warn(incompatibleChannel(channel,mark)),normalizedEncoding;if(\x22size\x22\x3d\x3d\x3dchannel\x26\x26\x22line\x22\x3d\x3d\x3dmark){var fieldDef$jscomp$0\x3dgetFieldDef(encoding[channel]);if(null\x3d\x3d\x3dfieldDef$jscomp$0||void 0\x3d\x3d\x3dfieldDef$jscomp$0?0:fieldDef$jscomp$0.aggregate)return warn(\x22Line marks cannot encode size with a non-groupby field. You may want to use trail marks instead.\x22),\nnormalizedEncoding}if(\x22color\x22\x3d\x3d\x3dchannel\x26\x26(markDef.filled?\x22fill\x22in encoding:\x22stroke\x22in encoding))return warn(droppingColor(\x22encoding\x22,{fill:\x22fill\x22in encoding,stroke:\x22stroke\x22in encoding})),normalizedEncoding;if(\x22detail\x22\x3d\x3d\x3dchannel||\x22order\x22\x3d\x3d\x3dchannel\x26\x26!isArray(channelDef)\x26\x26!isValueDef(channelDef)||\x22tooltip\x22\x3d\x3d\x3dchannel\x26\x26isArray(channelDef))channelDef\x26\x26(normalizedEncoding[channel]\x3darray$jscomp$0(channelDef).reduce(function(defs,fieldDef){isFieldDef(fieldDef)?defs.push(initFieldDef(fieldDef,channel)):warn(emptyFieldDef(fieldDef,\nchannel));return defs},[]));else{if(\x22tooltip\x22\x3d\x3d\x3dchannel\x26\x26null\x3d\x3d\x3dchannelDef)normalizedEncoding[channel]\x3dnull;else if(!(isFieldDef(channelDef)||isDatumDef(channelDef)||isValueDef(channelDef)||channelDef\x26\x26\x22condition\x22in channelDef||isSignalRef(channelDef)))return warn(emptyFieldDef(channelDef,channel)),normalizedEncoding;normalizedEncoding[channel]\x3dinitChannelDef(channelDef,channel,config)}return normalizedEncoding},{})}function fieldDefs(encoding){for(var arr\x3d[],$jscomp$iter$80\x3d$jscomp.makeIterator(keys$jscomp$0(encoding)),\n$jscomp$key$channel\x3d$jscomp$iter$80.next();!$jscomp$key$channel.done;$jscomp$key$channel\x3d$jscomp$iter$80.next())if($jscomp$key$channel\x3d$jscomp$key$channel.value,channelHasField(encoding,$jscomp$key$channel)){$jscomp$key$channel\x3darray$jscomp$0(encoding[$jscomp$key$channel]);$jscomp$key$channel\x3d$jscomp.makeIterator($jscomp$key$channel);for(var $jscomp$key$def\x3d$jscomp$key$channel.next();!$jscomp$key$def.done;$jscomp$key$def\x3d$jscomp$key$channel.next())$jscomp$key$def\x3d$jscomp$key$def.value,isFieldDef($jscomp$key$def)?\narr.push($jscomp$key$def):hasConditionalFieldDef($jscomp$key$def)\x26\x26arr.push($jscomp$key$def.condition)}return arr}function forEach(mapping,f,thisArg){if(mapping)for(var $jscomp$iter$82\x3d$jscomp.makeIterator(keys$jscomp$0(mapping)),$jscomp$key$channel\x3d$jscomp$iter$82.next();!$jscomp$key$channel.done;$jscomp$key$channel\x3d$jscomp$iter$82.next()){$jscomp$key$channel\x3d$jscomp$key$channel.value;var el\x3dmapping[$jscomp$key$channel];if(isArray(el)){el\x3d$jscomp.makeIterator(el);for(var $jscomp$key$channelDef\x3del.next();!$jscomp$key$channelDef.done;$jscomp$key$channelDef\x3d\nel.next())f.call(thisArg,$jscomp$key$channelDef.value,$jscomp$key$channel)}else f.call(thisArg,el,$jscomp$key$channel)}}function reduce(mapping,f,init,thisArg){return mapping?keys$jscomp$0(mapping).reduce(function(r,channel){var map\x3dmapping[channel];return isArray(map)?map.reduce(function(r1,channelDef){return f.call(thisArg,r1,channelDef,channel)},r):f.call(thisArg,r,map,channel)},init):init}function pathGroupingFields(mark,encoding){return keys$jscomp$0(encoding).reduce(function(details,channel){switch(channel){case \x22x\x22:case \x22y\x22:case \x22href\x22:case \x22description\x22:case \x22url\x22:case \x22x2\x22:case \x22y2\x22:case \x22theta\x22:case \x22theta2\x22:case \x22radius\x22:case \x22radius2\x22:case \x22latitude\x22:case \x22longitude\x22:case \x22latitude2\x22:case \x22longitude2\x22:case \x22text\x22:case \x22shape\x22:case \x22angle\x22:case \x22tooltip\x22:return details;\ncase \x22order\x22:if(\x22line\x22\x3d\x3d\x3dmark||\x22trail\x22\x3d\x3d\x3dmark)return details;case \x22detail\x22:case \x22key\x22:channel\x3dencoding[channel];if(isArray(channel)||isFieldDef(channel)){channel\x3d$jscomp.makeIterator(array$jscomp$0(channel));for(var $jscomp$key$fieldDef\x3dchannel.next();!$jscomp$key$fieldDef.done;$jscomp$key$fieldDef\x3dchannel.next())$jscomp$key$fieldDef\x3d$jscomp$key$fieldDef.value,$jscomp$key$fieldDef.aggregate||details.push(vgField($jscomp$key$fieldDef,{}))}return details;case \x22size\x22:if(\x22trail\x22\x3d\x3d\x3dmark)return details;\ncase \x22color\x22:case \x22fill\x22:case \x22stroke\x22:case \x22opacity\x22:case \x22fillOpacity\x22:case \x22strokeOpacity\x22:case \x22strokeDash\x22:case \x22strokeWidth\x22:return(channel\x3dgetFieldDef(encoding[channel]))\x26\x26!channel.aggregate\x26\x26details.push(vgField(channel,{})),details}},[])}function getCompositeMarkTooltip(tooltipSummary,continuousAxisChannelDef,encodingWithoutContinuousAxis,withFieldName){withFieldName\x3dvoid 0\x3d\x3d\x3dwithFieldName?!0:withFieldName;if(\x22tooltip\x22in encodingWithoutContinuousAxis)return{tooltip:encodingWithoutContinuousAxis.tooltip};\ntooltipSummary\x3dtooltipSummary.map(function($jscomp$destructuring$var60){var titlePrefix\x3d$jscomp$destructuring$var60.titlePrefix,mainTitle\x3dwithFieldName?\x22 of \x22+continuousAxisChannelDef.field:\x22\x22;return{field:$jscomp$destructuring$var60.fieldPrefix+continuousAxisChannelDef.field,type:continuousAxisChannelDef.type,title:isSignalRef(titlePrefix)?{signal:titlePrefix+(\x27\x22\x27+escape(mainTitle)+\x27\x22\x27)}:titlePrefix+mainTitle}});return{tooltip:[].concat($jscomp.arrayFromIterable(tooltipSummary),$jscomp.arrayFromIterable(fieldDefs(encodingWithoutContinuousAxis)))}}\nfunction getTitle(continuousAxisChannelDef){var axis\x3dcontinuousAxisChannelDef.axis,title\x3dcontinuousAxisChannelDef.title;continuousAxisChannelDef\x3dcontinuousAxisChannelDef.field;return axis\x26\x26void 0!\x3d\x3daxis.title?void 0:getFirstDefined(title,continuousAxisChannelDef)}function makeCompositeAggregatePartFactory(compositeMarkDef,continuousAxis,continuousAxisChannelDef,sharedEncoding,compositeMarkConfig){var scale\x3dcontinuousAxisChannelDef.scale,axis\x3dcontinuousAxisChannelDef.axis;return function($jscomp$destructuring$var64){var partName\x3d\n$jscomp$destructuring$var64.partName,mark\x3d$jscomp$destructuring$var64.mark,positionPrefix\x3d$jscomp$destructuring$var64.positionPrefix,endPositionPrefix\x3dvoid 0\x3d\x3d\x3d$jscomp$destructuring$var64.endPositionPrefix?void 0:$jscomp$destructuring$var64.endPositionPrefix,aria\x3d$jscomp$destructuring$var64.aria;$jscomp$destructuring$var64\x3dvoid 0\x3d\x3d\x3d$jscomp$destructuring$var64.extraEncoding?{}:$jscomp$destructuring$var64.extraEncoding;var title\x3dgetTitle(continuousAxisChannelDef),$jscomp$compprop2\x3d{},$jscomp$compprop3\x3d\n{};return partLayerMixins(compositeMarkDef,partName,compositeMarkConfig,aria,{mark:mark,encoding:Object.assign(Object.assign(Object.assign(($jscomp$compprop2[continuousAxis]\x3dObject.assign(Object.assign(Object.assign({field:positionPrefix+\x22_\x22+continuousAxisChannelDef.field,type:continuousAxisChannelDef.type},void 0!\x3d\x3dtitle?{title:title}:{}),void 0!\x3d\x3dscale?{scale:scale}:{}),void 0!\x3d\x3daxis?{axis:axis}:{}),$jscomp$compprop2),isString(endPositionPrefix)?($jscomp$compprop3[continuousAxis+\x222\x22]\x3d{field:endPositionPrefix+\n\x22_\x22+continuousAxisChannelDef.field},$jscomp$compprop3):{}),sharedEncoding),$jscomp$destructuring$var64)})}}function partLayerMixins(markDef,part,compositeMarkConfig,aria,partBaseSpec){var clip\x3dmarkDef.clip,color\x3dmarkDef.color,opacity\x3dmarkDef.opacity,mark\x3dmarkDef.type;return markDef[part]||void 0\x3d\x3d\x3dmarkDef[part]\x26\x26compositeMarkConfig[part]?[Object.assign(Object.assign({},partBaseSpec),{mark:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},\ncompositeMarkConfig[part]),clip?{clip:clip}:{}),color?{color:color}:{}),opacity?{opacity:opacity}:{}),isMarkDef(partBaseSpec.mark)?partBaseSpec.mark:{type:partBaseSpec.mark}),{style:mark+\x22-\x22+part}),isBoolean(markDef[part])?{}:markDef[part]),!1\x3d\x3d\x3daria?{aria:aria}:{})})]:[]}function compositeMarkContinuousAxis(spec,orient,compositeMark){spec\x3dspec.encoding;orient\x3d\x22vertical\x22\x3d\x3d\x3dorient?\x22y\x22:\x22x\x22;var continuousAxisChannelDef2\x3dspec[orient+\x222\x22],continuousAxisChannelDefError\x3dspec[orient+\x22Error\x22],continuousAxisChannelDefError2\x3d\nspec[orient+\x22Error2\x22];return{continuousAxisChannelDef:filterAggregateFromChannelDef(spec[orient],compositeMark),continuousAxisChannelDef2:filterAggregateFromChannelDef(continuousAxisChannelDef2,compositeMark),continuousAxisChannelDefError:filterAggregateFromChannelDef(continuousAxisChannelDefError,compositeMark),continuousAxisChannelDefError2:filterAggregateFromChannelDef(continuousAxisChannelDefError2,compositeMark),continuousAxis:orient}}function filterAggregateFromChannelDef(continuousAxisChannelDef,\ncompositeMark){if(continuousAxisChannelDef\x26\x26continuousAxisChannelDef.aggregate){var aggregate\x3dcontinuousAxisChannelDef.aggregate;continuousAxisChannelDef\x3d__rest(continuousAxisChannelDef,[\x22aggregate\x22]);aggregate!\x3d\x3dcompositeMark\x26\x26warn(\x22Continuous axis should not have customized aggregation function \x22+aggregate+\x22; \x22+compositeMark+\x22 already agregates the axis.\x22);return continuousAxisChannelDef}return continuousAxisChannelDef}function compositeMarkOrient(spec,compositeMark){var mark\x3dspec.mark,$jscomp$destructuring$var70\x3d\nspec.encoding;spec\x3d$jscomp$destructuring$var70.x;$jscomp$destructuring$var70\x3d$jscomp$destructuring$var70.y;if(isContinuousFieldOrDatumDef(spec)){if(isContinuousFieldOrDatumDef($jscomp$destructuring$var70)){spec\x3disFieldDef(spec)\x26\x26spec.aggregate;$jscomp$destructuring$var70\x3disFieldDef($jscomp$destructuring$var70)\x26\x26$jscomp$destructuring$var70.aggregate;if(!spec\x26\x26$jscomp$destructuring$var70\x3d\x3d\x3dcompositeMark)return\x22vertical\x22;if($jscomp$destructuring$var70||spec!\x3d\x3dcompositeMark){if(spec\x3d\x3d\x3dcompositeMark\x26\x26\n$jscomp$destructuring$var70\x3d\x3d\x3dcompositeMark)throw Error(\x22Both x and y cannot have aggregate\x22);return isMarkDef(mark)\x26\x26mark.orient?mark.orient:\x22vertical\x22}}return\x22horizontal\x22}if(isContinuousFieldOrDatumDef($jscomp$destructuring$var70))return\x22vertical\x22;throw Error(\x22Need a valid continuous axis for \x22+compositeMark+\x22s\x22);}function normalizeBoxPlot(spec,$jscomp$destructuring$var71){var config\x3d$jscomp$destructuring$var71.config,_a,_b,mark\x3dspec.mark,selection\x3dspec.selection;$jscomp$destructuring$var71\x3d__rest(spec,\n[\x22mark\x22,\x22encoding\x22,\x22selection\x22,\x22projection\x22]);mark\x3disMarkDef(mark)?mark:{type:mark};selection\x26\x26warn(selectionNotSupported(\x22boxplot\x22));var extent\x3dnull!\x3d\x3d(_a\x3dmark.extent)\x26\x26void 0!\x3d\x3d_a?_a:config.boxplot.extent,sizeValue\x3dgetMarkPropOrConfig(\x22size\x22,mark,config),boxPlotType\x3disNumber(extent)?\x22tukey\x22:extent,orient\x3dcompositeMarkOrient(spec,\x22boxplot\x22);selection\x3dcompositeMarkContinuousAxis(spec,orient,\x22boxplot\x22);_a\x3dselection.continuousAxisChannelDef;selection\x3dselection.continuousAxis;var continuousFieldName\x3d\n_a.field,boxPlotType$jscomp$0\x3disNumber(extent)?\x22tukey\x22:extent;var JSCompiler_object_inline_transform_8082\x3d[].concat($jscomp.arrayFromIterable(boxParamsQuartiles(continuousFieldName)),[{op:\x22median\x22,field:continuousFieldName,as:\x22mid_box_\x22+continuousFieldName},{op:\x22min\x22,field:continuousFieldName,as:(\x22min-max\x22\x3d\x3d\x3dboxPlotType$jscomp$0?\x22lower_whisker_\x22:\x22min_\x22)+continuousFieldName},{op:\x22max\x22,field:continuousFieldName,as:(\x22min-max\x22\x3d\x3d\x3dboxPlotType$jscomp$0?\x22upper_whisker_\x22:\x22max_\x22)+continuousFieldName}]);continuousFieldName\x3d\n\x22min-max\x22\x3d\x3d\x3dboxPlotType$jscomp$0||\x22tukey\x22\x3d\x3d\x3dboxPlotType$jscomp$0?[]:[{calculate:\x27datum[\x22upper_box_\x27+continuousFieldName+\x27\x22] - datum[\x22lower_box_\x27+continuousFieldName+\x27\x22]\x27,as:\x22iqr_\x22+continuousFieldName},{calculate:\x27min(datum[\x22upper_box_\x27+continuousFieldName+\x27\x22] + datum[\x22iqr_\x27+continuousFieldName+\x27\x22] * \x27+extent+\x27, datum[\x22max_\x27+continuousFieldName+\x27\x22])\x27,as:\x22upper_whisker_\x22+continuousFieldName},{calculate:\x27max(datum[\x22lower_box_\x27+continuousFieldName+\x27\x22] - datum[\x22iqr_\x27+continuousFieldName+\x27\x22] * \x27+extent+\n\x27, datum[\x22min_\x27+continuousFieldName+\x27\x22])\x27,as:\x22lower_whisker_\x22+continuousFieldName}];boxPlotType$jscomp$0\x3d__rest(spec.encoding,[\x22symbol\x22\x3d\x3d\x3dtypeof selection?selection:selection+\x22\x22]);var JSCompiler_inline_result;var tooltip\x3dboxPlotType$jscomp$0.tooltip;spec\x3d__rest(boxPlotType$jscomp$0,[\x22tooltip\x22]);if(tooltip){var customTooltipWithoutAggregatedField;if(isArray(tooltip)){boxPlotType$jscomp$0\x3d$jscomp.makeIterator(tooltip);for(tooltip\x3dboxPlotType$jscomp$0.next();!tooltip.done;tooltip\x3dboxPlotType$jscomp$0.next())tooltip\x3d\ntooltip.value,tooltip.aggregate?(JSCompiler_inline_result||(JSCompiler_inline_result\x3d[]),JSCompiler_inline_result.push(tooltip)):(customTooltipWithoutAggregatedField||(customTooltipWithoutAggregatedField\x3d[]),customTooltipWithoutAggregatedField.push(tooltip));JSCompiler_inline_result\x26\x26(spec.tooltip\x3dJSCompiler_inline_result)}else tooltip.aggregate?spec.tooltip\x3dtooltip:customTooltipWithoutAggregatedField\x3dtooltip;isArray(customTooltipWithoutAggregatedField)\x26\x261\x3d\x3d\x3dcustomTooltipWithoutAggregatedField.length\x26\x26\n(customTooltipWithoutAggregatedField\x3dcustomTooltipWithoutAggregatedField[0]);JSCompiler_inline_result\x3d{customTooltipWithoutAggregatedField:customTooltipWithoutAggregatedField,filteredEncoding:spec}}else JSCompiler_inline_result\x3d{filteredEncoding:boxPlotType$jscomp$0};customTooltipWithoutAggregatedField\x3dJSCompiler_inline_result;JSCompiler_inline_result\x3dcustomTooltipWithoutAggregatedField.customTooltipWithoutAggregatedField;var $jscomp$inline_7669\x3dextractTransformsFromEncoding(customTooltipWithoutAggregatedField.filteredEncoding,\nconfig),timeUnits\x3d$jscomp$inline_7669.timeUnits;customTooltipWithoutAggregatedField\x3d$jscomp$inline_7669.aggregate;spec\x3d$jscomp$inline_7669.groupby;tooltip\x3d$jscomp$inline_7669.encoding;boxPlotType$jscomp$0\x3d\x22vertical\x22\x3d\x3d\x3dorient?\x22horizontal\x22:\x22vertical\x22;JSCompiler_object_inline_transform_8082\x3d[].concat($jscomp.arrayFromIterable($jscomp$inline_7669.bins),$jscomp.arrayFromIterable(timeUnits),[{aggregate:[].concat($jscomp.arrayFromIterable(customTooltipWithoutAggregatedField),$jscomp.arrayFromIterable(JSCompiler_object_inline_transform_8082)),\ngroupby:spec}],$jscomp.arrayFromIterable(continuousFieldName));var size\x3dtooltip.size;continuousFieldName\x3d__rest(tooltip,[\x22color\x22,\x22size\x22]);timeUnits\x3dmakeCompositeAggregatePartFactory(mark,selection,_a,continuousFieldName,config.boxplot);$jscomp$inline_7669\x3dmakeCompositeAggregatePartFactory(mark,selection,_a,tooltip,config.boxplot);size\x3dmakeCompositeAggregatePartFactory(mark,selection,_a,Object.assign(Object.assign({},continuousFieldName),size?{size:size}:{}),config.boxplot);var fiveSummaryTooltipEncoding\x3d\ngetCompositeMarkTooltip([{fieldPrefix:\x22min-max\x22\x3d\x3d\x3dboxPlotType?\x22upper_whisker_\x22:\x22max_\x22,titlePrefix:\x22Max\x22},{fieldPrefix:\x22upper_box_\x22,titlePrefix:\x22Q3\x22},{fieldPrefix:\x22mid_box_\x22,titlePrefix:\x22Median\x22},{fieldPrefix:\x22lower_box_\x22,titlePrefix:\x22Q1\x22},{fieldPrefix:\x22min-max\x22\x3d\x3d\x3dboxPlotType?\x22lower_whisker_\x22:\x22min_\x22,titlePrefix:\x22Min\x22}],_a,tooltip),endTick\x3d{type:\x22tick\x22,color:\x22black\x22,opacity:1,orient:boxPlotType$jscomp$0,invalid:null};tooltip\x3d\x22min-max\x22\x3d\x3d\x3dboxPlotType?fiveSummaryTooltipEncoding:getCompositeMarkTooltip([{fieldPrefix:\x22upper_whisker_\x22,\ntitlePrefix:\x22Upper Whisker\x22},{fieldPrefix:\x22lower_whisker_\x22,titlePrefix:\x22Lower Whisker\x22}],_a,tooltip);tooltip\x3d[].concat($jscomp.arrayFromIterable(timeUnits({partName:\x22rule\x22,mark:{type:\x22rule\x22,invalid:null},positionPrefix:\x22lower_whisker\x22,endPositionPrefix:\x22lower_box\x22,aria:!1,extraEncoding:tooltip})),$jscomp.arrayFromIterable(timeUnits({partName:\x22rule\x22,mark:{type:\x22rule\x22,invalid:null},positionPrefix:\x22upper_box\x22,endPositionPrefix:\x22upper_whisker\x22,aria:!1,extraEncoding:tooltip})),$jscomp.arrayFromIterable(timeUnits({partName:\x22ticks\x22,\nmark:endTick,positionPrefix:\x22lower_whisker\x22,aria:!1,extraEncoding:tooltip})),$jscomp.arrayFromIterable(timeUnits({partName:\x22ticks\x22,mark:endTick,positionPrefix:\x22upper_whisker\x22,aria:!1,extraEncoding:tooltip})));sizeValue\x3d[].concat($jscomp.arrayFromIterable(\x22tukey\x22!\x3d\x3dboxPlotType?tooltip:[]),$jscomp.arrayFromIterable($jscomp$inline_7669({partName:\x22box\x22,mark:Object.assign(Object.assign({type:\x22bar\x22},sizeValue?{size:sizeValue}:{}),{orient:orient,invalid:null}),positionPrefix:\x22lower_box\x22,endPositionPrefix:\x22upper_box\x22,\naria:!1,extraEncoding:fiveSummaryTooltipEncoding})),$jscomp.arrayFromIterable(size({partName:\x22median\x22,mark:Object.assign(Object.assign(Object.assign({type:\x22tick\x22,invalid:null},isObject(config.boxplot.median)\x26\x26config.boxplot.median.color?{color:config.boxplot.median.color}:{}),sizeValue?{size:sizeValue}:{}),{orient:boxPlotType$jscomp$0,ariaRoleDescription:\x22box\x22}),positionPrefix:\x22mid_box\x22,extraEncoding:fiveSummaryTooltipEncoding})));if(\x22min-max\x22!\x3d\x3dboxPlotType)if(orient\x3d\x27datum[\x22lower_box_\x27+_a.field+\n\x27\x22]\x27,boxPlotType$jscomp$0\x3d\x27datum[\x22upper_box_\x27+_a.field+\x27\x22]\x27,$jscomp$inline_7669\x3d\x22(\x22+boxPlotType$jscomp$0+\x22 - \x22+orient+\x22)\x22,orient\x3dorient+\x22 - \x22+extent+\x22 * \x22+$jscomp$inline_7669,$jscomp$inline_7669\x3dboxPlotType$jscomp$0+\x22 + \x22+extent+\x22 * \x22+$jscomp$inline_7669,timeUnits\x3d\x27datum[\x22\x27+_a.field+\x27\x22]\x27,extent\x3d{joinaggregate:boxParamsQuartiles(_a.field),groupby:spec},boxPlotType$jscomp$0\x3dvoid 0,\x22tukey\x22\x3d\x3d\x3dboxPlotType\x26\x26(boxPlotType$jscomp$0\x3d{transform:[{filter:\x22(\x22+orient+\x22 \\x3c\\x3d \x22+timeUnits+\x22) \\x26\\x26 (\x22+timeUnits+\n\x22 \\x3c\\x3d \x22+$jscomp$inline_7669+\x22)\x22},{aggregate:[{op:\x22min\x22,field:_a.field,as:\x22lower_whisker_\x22+_a.field},{op:\x22max\x22,field:_a.field,as:\x22upper_whisker_\x22+_a.field},{op:\x22min\x22,field:\x22lower_box_\x22+_a.field,as:\x22lower_box_\x22+_a.field},{op:\x22max\x22,field:\x22upper_box_\x22+_a.field,as:\x22upper_box_\x22+_a.field}].concat($jscomp.arrayFromIterable(customTooltipWithoutAggregatedField)),groupby:spec}],layer:tooltip}),boxPlotType\x3d__rest(continuousFieldName,[\x22tooltip\x22]),customTooltipWithoutAggregatedField\x3d_a.scale,spec\x3d_a.axis,\ncontinuousFieldName\x3dgetTitle(_a),tooltip\x3d{},(config\x3dpartLayerMixins(mark,\x22outliers\x22,config.boxplot,!0,{transform:[{filter:\x22(\x22+timeUnits+\x22 \\x3c \x22+orient+\x22) || (\x22+timeUnits+\x22 \\x3e \x22+$jscomp$inline_7669+\x22)\x22}],mark:\x22point\x22,encoding:Object.assign(Object.assign((tooltip[selection]\x3dObject.assign(Object.assign(Object.assign({field:_a.field,type:_a.type},void 0!\x3d\x3dcontinuousFieldName?{title:continuousFieldName}:{}),void 0!\x3d\x3dcustomTooltipWithoutAggregatedField?{scale:customTooltipWithoutAggregatedField}:{}),\nvoid 0!\x3d\x3dspec?{axis:spec}:{}),tooltip),boxPlotType),JSCompiler_inline_result?{tooltip:JSCompiler_inline_result}:{})})[0])\x26\x26boxPlotType$jscomp$0)var filteredLayersMixins\x3d{transform:[extent],layer:[config,boxPlotType$jscomp$0]};else config?(filteredLayersMixins\x3dconfig,filteredLayersMixins.transform.unshift(extent)):boxPlotType$jscomp$0\x26\x26(filteredLayersMixins\x3dboxPlotType$jscomp$0,filteredLayersMixins.transform.unshift(extent));return filteredLayersMixins?Object.assign(Object.assign({},$jscomp$destructuring$var71),\n{layer:[filteredLayersMixins,{transform:JSCompiler_object_inline_transform_8082,layer:sizeValue}]}):Object.assign(Object.assign({},$jscomp$destructuring$var71),{transform:(null!\x3d\x3d(_b\x3d$jscomp$destructuring$var71.transform)\x26\x26void 0!\x3d\x3d_b?_b:[]).concat(JSCompiler_object_inline_transform_8082),layer:sizeValue})}function boxParamsQuartiles(continousAxisField){return[{op:\x22q1\x22,field:continousAxisField,as:\x22lower_box_\x22+continousAxisField},{op:\x22q3\x22,field:continousAxisField,as:\x22upper_box_\x22+continousAxisField}]}\nfunction normalizeErrorBar(spec,$jscomp$destructuring$var80){var config\x3d$jscomp$destructuring$var80.config,$jscomp$destructuring$var82\x3derrorBarParams(spec,\x22errorbar\x22,config);spec\x3d$jscomp$destructuring$var82.transform;var ticksOrient\x3d$jscomp$destructuring$var82.ticksOrient;$jscomp$destructuring$var80\x3d$jscomp$destructuring$var82.outerSpec;var tooltipEncoding\x3d$jscomp$destructuring$var82.tooltipEncoding;config\x3dmakeCompositeAggregatePartFactory($jscomp$destructuring$var82.markDef,$jscomp$destructuring$var82.continuousAxis,\n$jscomp$destructuring$var82.continuousAxisChannelDef,$jscomp$destructuring$var82.encodingWithoutContinuousAxis,config.errorbar);ticksOrient\x3d{type:\x22tick\x22,orient:ticksOrient};tooltipEncoding\x3d[].concat($jscomp.arrayFromIterable(config({partName:\x22ticks\x22,mark:ticksOrient,positionPrefix:\x22lower\x22,aria:!1,extraEncoding:tooltipEncoding})),$jscomp.arrayFromIterable(config({partName:\x22ticks\x22,mark:ticksOrient,positionPrefix:\x22upper\x22,aria:!1,extraEncoding:tooltipEncoding})),$jscomp.arrayFromIterable(config({partName:\x22rule\x22,\nmark:{type:\x22rule\x22,ariaRoleDescription:\x22errorbar\x22},positionPrefix:\x22lower\x22,endPositionPrefix:\x22upper\x22,extraEncoding:tooltipEncoding})));return Object.assign(Object.assign(Object.assign({},$jscomp$destructuring$var80),{transform:spec}),1\x3ctooltipEncoding.length?{layer:tooltipEncoding}:Object.assign({},tooltipEncoding[0]))}function errorBarOrientAndInputType(spec,compositeMark){var encoding\x3dspec.encoding;if(!(!isFieldOrDatumDef(encoding.x)\x26\x26!isFieldOrDatumDef(encoding.y)||isFieldOrDatumDef(encoding.x2)||\nisFieldOrDatumDef(encoding.y2)||isFieldOrDatumDef(encoding.xError)||isFieldOrDatumDef(encoding.xError2)||isFieldOrDatumDef(encoding.yError)||isFieldOrDatumDef(encoding.yError2)))return{orient:compositeMarkOrient(spec,compositeMark),inputType:\x22raw\x22};var isTypeAggregatedUpperLower\x3disFieldOrDatumDef(encoding.x2)||isFieldOrDatumDef(encoding.y2),isTypeAggregatedError\x3disFieldOrDatumDef(encoding.xError)||isFieldOrDatumDef(encoding.xError2)||isFieldOrDatumDef(encoding.yError)||isFieldOrDatumDef(encoding.yError2);\nspec\x3dencoding.x;var y\x3dencoding.y;if(isTypeAggregatedUpperLower){if(isTypeAggregatedError)throw Error(compositeMark+\x22 cannot be both type aggregated-upper-lower and aggregated-error\x22);isTypeAggregatedUpperLower\x3dencoding.x2;encoding\x3dencoding.y2;if(isFieldOrDatumDef(isTypeAggregatedUpperLower)\x26\x26isFieldOrDatumDef(encoding))throw Error(compositeMark+\x22 cannot have both x2 and y2\x22);if(isFieldOrDatumDef(isTypeAggregatedUpperLower)){if(isContinuousFieldOrDatumDef(spec))return{orient:\x22horizontal\x22,inputType:\x22aggregated-upper-lower\x22};\nthrow Error(\x22Both x and x2 have to be quantitative in \x22+compositeMark);}if(isFieldOrDatumDef(encoding)){if(isContinuousFieldOrDatumDef(y))return{orient:\x22vertical\x22,inputType:\x22aggregated-upper-lower\x22};throw Error(\x22Both y and y2 have to be quantitative in \x22+compositeMark);}}else{isTypeAggregatedUpperLower\x3dencoding.xError;isTypeAggregatedError\x3dencoding.yError;var yError2\x3dencoding.yError2;if(isFieldOrDatumDef(encoding.xError2)\x26\x26!isFieldOrDatumDef(isTypeAggregatedUpperLower))throw Error(compositeMark+\x22 cannot have xError2 without xError\x22);\nif(isFieldOrDatumDef(yError2)\x26\x26!isFieldOrDatumDef(isTypeAggregatedError))throw Error(compositeMark+\x22 cannot have yError2 without yError\x22);if(isFieldOrDatumDef(isTypeAggregatedUpperLower)\x26\x26isFieldOrDatumDef(isTypeAggregatedError))throw Error(compositeMark+\x22 cannot have both xError and yError with both are quantiative\x22);if(isFieldOrDatumDef(isTypeAggregatedUpperLower)){if(isContinuousFieldOrDatumDef(spec))return{orient:\x22horizontal\x22,inputType:\x22aggregated-error\x22};throw Error(\x22All x, xError, and xError2 (if exist) have to be quantitative\x22);\n}if(isFieldOrDatumDef(isTypeAggregatedError)){if(isContinuousFieldOrDatumDef(y))return{orient:\x22vertical\x22,inputType:\x22aggregated-error\x22};throw Error(\x22All y, yError, and yError2 (if exist) have to be quantitative\x22);}}throw Error(\x22No ranged axis\x22);}function errorBarParams(spec,compositeMark,config){var _a,mark\x3dspec.mark,encoding\x3dspec.encoding,selection\x3dspec.selection,outerSpec\x3d__rest(spec,[\x22mark\x22,\x22encoding\x22,\x22selection\x22,\x22projection\x22]);mark\x3disMarkDef(mark)?mark:{type:mark};selection\x26\x26warn(selectionNotSupported(compositeMark));\nvar $jscomp$destructuring$var85\x3derrorBarOrientAndInputType(spec,compositeMark);selection\x3d$jscomp$destructuring$var85.orient;$jscomp$destructuring$var85\x3d$jscomp$destructuring$var85.inputType;var $jscomp$destructuring$var86\x3dcompositeMarkContinuousAxis(spec,selection,compositeMark);spec\x3d$jscomp$destructuring$var86.continuousAxisChannelDef;var continuousAxisChannelDef2\x3d$jscomp$destructuring$var86.continuousAxisChannelDef2,continuousAxisChannelDefError\x3d$jscomp$destructuring$var86.continuousAxisChannelDefError,\ncontinuousAxisChannelDefError2\x3d$jscomp$destructuring$var86.continuousAxisChannelDefError2;$jscomp$destructuring$var86\x3d$jscomp$destructuring$var86.continuousAxis;var JSCompiler_object_inline_errorBarSpecificAggregate_6643\x3d[];var JSCompiler_object_inline_postAggregateCalculates_6642\x3d[];var continuousFieldName\x3dspec.field,tooltipTitleWithFieldName\x3d!1;if(\x22raw\x22\x3d\x3d\x3d$jscomp$destructuring$var85){var JSCompiler_object_inline_tooltipSummary_6644\x3dmark.center?mark.center:mark.extent?\x22iqr\x22\x3d\x3d\x3dmark.extent?\x22median\x22:\n\x22mean\x22:config.errorbar.center;continuousAxisChannelDef2\x3dmark.extent?mark.extent:\x22mean\x22\x3d\x3d\x3dJSCompiler_object_inline_tooltipSummary_6644?\x22stderr\x22:\x22iqr\x22;\x22median\x22\x3d\x3d\x3dJSCompiler_object_inline_tooltipSummary_6644!\x3d\x3d(\x22iqr\x22\x3d\x3d\x3dcontinuousAxisChannelDef2)\x26\x26warn(JSCompiler_object_inline_tooltipSummary_6644+\x22 is not usually used with \x22+continuousAxisChannelDef2+\x22 for \x22+compositeMark+\x22.\x22);\x22stderr\x22\x3d\x3d\x3dcontinuousAxisChannelDef2||\x22stdev\x22\x3d\x3d\x3dcontinuousAxisChannelDef2?(JSCompiler_object_inline_errorBarSpecificAggregate_6643\x3d\n[{op:continuousAxisChannelDef2,field:continuousFieldName,as:\x22extent_\x22+continuousFieldName},{op:JSCompiler_object_inline_tooltipSummary_6644,field:continuousFieldName,as:\x22center_\x22+continuousFieldName}],JSCompiler_object_inline_postAggregateCalculates_6642\x3d[{calculate:\x27datum[\x22center_\x27+continuousFieldName+\x27\x22] + datum[\x22extent_\x27+continuousFieldName+\x27\x22]\x27,as:\x22upper_\x22+continuousFieldName},{calculate:\x27datum[\x22center_\x27+continuousFieldName+\x27\x22] - datum[\x22extent_\x27+continuousFieldName+\x27\x22]\x27,as:\x22lower_\x22+continuousFieldName}],\nJSCompiler_object_inline_tooltipSummary_6644\x3d[{fieldPrefix:\x22center_\x22,titlePrefix:titleCase(JSCompiler_object_inline_tooltipSummary_6644)},{fieldPrefix:\x22upper_\x22,titlePrefix:titleCase(JSCompiler_object_inline_tooltipSummary_6644)+\x22 + \x22+continuousAxisChannelDef2},{fieldPrefix:\x22lower_\x22,titlePrefix:titleCase(JSCompiler_object_inline_tooltipSummary_6644)+\x22 - \x22+continuousAxisChannelDef2}],tooltipTitleWithFieldName\x3d!0):(mark.center\x26\x26mark.extent\x26\x26warn(\x22Center is not needed to be specified in \x22+compositeMark+\n\x22 when extent is \x22+mark.extent+\x22.\x22),\x22ci\x22\x3d\x3d\x3dcontinuousAxisChannelDef2?(JSCompiler_object_inline_tooltipSummary_6644\x3d\x22mean\x22,compositeMark\x3d\x22ci0\x22,continuousAxisChannelDef2\x3d\x22ci1\x22):(JSCompiler_object_inline_tooltipSummary_6644\x3d\x22median\x22,compositeMark\x3d\x22q1\x22,continuousAxisChannelDef2\x3d\x22q3\x22),JSCompiler_object_inline_errorBarSpecificAggregate_6643\x3d[{op:compositeMark,field:continuousFieldName,as:\x22lower_\x22+continuousFieldName},{op:continuousAxisChannelDef2,field:continuousFieldName,as:\x22upper_\x22+continuousFieldName},\n{op:JSCompiler_object_inline_tooltipSummary_6644,field:continuousFieldName,as:\x22center_\x22+continuousFieldName}],JSCompiler_object_inline_tooltipSummary_6644\x3d[{fieldPrefix:\x22upper_\x22,titlePrefix:title$jscomp$0({field:continuousFieldName,aggregate:continuousAxisChannelDef2,type:\x22quantitative\x22},config,{allowDisabling:!1})},{fieldPrefix:\x22lower_\x22,titlePrefix:title$jscomp$0({field:continuousFieldName,aggregate:compositeMark,type:\x22quantitative\x22},config,{allowDisabling:!1})},{fieldPrefix:\x22center_\x22,titlePrefix:title$jscomp$0({field:continuousFieldName,\naggregate:JSCompiler_object_inline_tooltipSummary_6644,type:\x22quantitative\x22},config,{allowDisabling:!1})}])}else{if(mark.center||mark.extent){compositeMark\x3dmark.center;var extent\x3dmark.extent;warn((extent?\x22extent \x22:\x22\x22)+(extent\x26\x26compositeMark?\x22and \x22:\x22\x22)+(compositeMark?\x22center \x22:\x22\x22)+(extent\x26\x26compositeMark?\x22are \x22:\x22is \x22)+\x22not needed when data are aggregated.\x22)}\x22aggregated-upper-lower\x22\x3d\x3d\x3d$jscomp$destructuring$var85?(JSCompiler_object_inline_tooltipSummary_6644\x3d[],JSCompiler_object_inline_postAggregateCalculates_6642\x3d\n[{calculate:\x27datum[\x22\x27+continuousAxisChannelDef2.field+\x27\x22]\x27,as:\x22upper_\x22+continuousFieldName},{calculate:\x27datum[\x22\x27+continuousFieldName+\x27\x22]\x27,as:\x22lower_\x22+continuousFieldName}]):\x22aggregated-error\x22\x3d\x3d\x3d$jscomp$destructuring$var85\x26\x26(JSCompiler_object_inline_tooltipSummary_6644\x3d[{fieldPrefix:\x22\x22,titlePrefix:continuousFieldName}],JSCompiler_object_inline_postAggregateCalculates_6642\x3d[{calculate:\x27datum[\x22\x27+continuousFieldName+\x27\x22] + datum[\x22\x27+continuousAxisChannelDefError.field+\x27\x22]\x27,as:\x22upper_\x22+continuousFieldName}],\ncontinuousAxisChannelDefError2?JSCompiler_object_inline_postAggregateCalculates_6642.push({calculate:\x27datum[\x22\x27+continuousFieldName+\x27\x22] + datum[\x22\x27+continuousAxisChannelDefError2.field+\x27\x22]\x27,as:\x22lower_\x22+continuousFieldName}):JSCompiler_object_inline_postAggregateCalculates_6642.push({calculate:\x27datum[\x22\x27+continuousFieldName+\x27\x22] - datum[\x22\x27+continuousAxisChannelDefError.field+\x27\x22]\x27,as:\x22lower_\x22+continuousFieldName}));compositeMark\x3d$jscomp.makeIterator(JSCompiler_object_inline_postAggregateCalculates_6642);\nfor(continuousFieldName\x3dcompositeMark.next();!continuousFieldName.done;continuousFieldName\x3dcompositeMark.next())continuousFieldName\x3dcontinuousFieldName.value,JSCompiler_object_inline_tooltipSummary_6644.push({fieldPrefix:continuousFieldName.as.substring(0,6),titlePrefix:replaceAll(replaceAll(continuousFieldName.calculate,\x27datum[\x22\x27,\x22\x22),\x27\x22]\x27,\x22\x22)})}compositeMark\x3d\x22x\x22\x3d\x3d\x3d$jscomp$destructuring$var86?\x22x2\x22:\x22y2\x22;continuousFieldName\x3d\x22x\x22\x3d\x3d\x3d$jscomp$destructuring$var86?\x22xError\x22:\x22yError\x22;continuousAxisChannelDef2\x3d\n\x22x\x22\x3d\x3d\x3d$jscomp$destructuring$var86?\x22xError2\x22:\x22yError2\x22;encoding\x3d__rest(encoding,[\x22symbol\x22\x3d\x3d\x3dtypeof $jscomp$destructuring$var86?$jscomp$destructuring$var86:$jscomp$destructuring$var86+\x22\x22,\x22symbol\x22\x3d\x3d\x3dtypeof compositeMark?compositeMark:compositeMark+\x22\x22,\x22symbol\x22\x3d\x3d\x3dtypeof continuousFieldName?continuousFieldName:continuousFieldName+\x22\x22,\x22symbol\x22\x3d\x3d\x3dtypeof continuousAxisChannelDef2?continuousAxisChannelDef2:continuousAxisChannelDef2+\x22\x22]);continuousAxisChannelDef2\x3dextractTransformsFromEncoding(encoding,config);\nconfig\x3dcontinuousAxisChannelDef2.bins;encoding\x3dcontinuousAxisChannelDef2.timeUnits;continuousFieldName\x3dcontinuousAxisChannelDef2.groupby;compositeMark\x3dcontinuousAxisChannelDef2.encoding;JSCompiler_object_inline_errorBarSpecificAggregate_6643\x3d[].concat($jscomp.arrayFromIterable(continuousAxisChannelDef2.aggregate),$jscomp.arrayFromIterable(JSCompiler_object_inline_errorBarSpecificAggregate_6643));$jscomp$destructuring$var85\x3d\x22raw\x22!\x3d\x3d$jscomp$destructuring$var85?[]:continuousFieldName;tooltipTitleWithFieldName\x3d\ngetCompositeMarkTooltip(JSCompiler_object_inline_tooltipSummary_6644,spec,compositeMark,tooltipTitleWithFieldName);return{transform:[].concat($jscomp.arrayFromIterable(null!\x3d\x3d(_a\x3douterSpec.transform)\x26\x26void 0!\x3d\x3d_a?_a:[]),$jscomp.arrayFromIterable(config),$jscomp.arrayFromIterable(encoding),$jscomp.arrayFromIterable(0\x3d\x3d\x3dJSCompiler_object_inline_errorBarSpecificAggregate_6643.length?[]:[{aggregate:JSCompiler_object_inline_errorBarSpecificAggregate_6643,groupby:$jscomp$destructuring$var85}]),$jscomp.arrayFromIterable(JSCompiler_object_inline_postAggregateCalculates_6642)),\ngroupby:$jscomp$destructuring$var85,continuousAxisChannelDef:spec,continuousAxis:$jscomp$destructuring$var86,encodingWithoutContinuousAxis:compositeMark,ticksOrient:\x22vertical\x22\x3d\x3d\x3dselection?\x22horizontal\x22:\x22vertical\x22,markDef:mark,outerSpec:outerSpec,tooltipEncoding:tooltipTitleWithFieldName}}function normalizeErrorBand(spec,$jscomp$destructuring$var89){var config\x3d$jscomp$destructuring$var89.config,$jscomp$destructuring$var91\x3derrorBarParams(spec,\x22errorband\x22,config);$jscomp$destructuring$var89\x3d$jscomp$destructuring$var91.transform;\nvar outerSpec\x3d$jscomp$destructuring$var91.outerSpec,tooltipEncoding\x3d$jscomp$destructuring$var91.tooltipEncoding,errorBandDef\x3d$jscomp$destructuring$var91.markDef;config\x3dmakeCompositeAggregatePartFactory(errorBandDef,$jscomp$destructuring$var91.continuousAxis,$jscomp$destructuring$var91.continuousAxisChannelDef,$jscomp$destructuring$var91.encodingWithoutContinuousAxis,config.errorband);spec\x3dvoid 0!\x3d\x3dspec.encoding.x\x26\x26void 0!\x3d\x3dspec.encoding.y;$jscomp$destructuring$var91\x3d{type:spec?\x22area\x22:\x22rect\x22};var bordersMark\x3d\n{type:spec?\x22line\x22:\x22rule\x22},interpolate\x3dObject.assign(Object.assign({},errorBandDef.interpolate?{interpolate:errorBandDef.interpolate}:{}),errorBandDef.tension\x26\x26errorBandDef.interpolate?{tension:errorBandDef.tension}:{});spec?($jscomp$destructuring$var91\x3dObject.assign(Object.assign(Object.assign({},$jscomp$destructuring$var91),interpolate),{ariaRoleDescription:\x22errorband\x22}),bordersMark\x3dObject.assign(Object.assign({},bordersMark),interpolate)):errorBandDef.interpolate?warn(errorBand1DNotSupport(\x22interpolate\x22)):\nerrorBandDef.tension\x26\x26warn(errorBand1DNotSupport(\x22tension\x22));return Object.assign(Object.assign({},outerSpec),{transform:$jscomp$destructuring$var89,layer:[].concat($jscomp.arrayFromIterable(config({partName:\x22band\x22,mark:$jscomp$destructuring$var91,positionPrefix:\x22lower\x22,endPositionPrefix:\x22upper\x22,extraEncoding:tooltipEncoding})),$jscomp.arrayFromIterable(config({partName:\x22borders\x22,mark:bordersMark,positionPrefix:\x22lower\x22,aria:!1,extraEncoding:tooltipEncoding})),$jscomp.arrayFromIterable(config({partName:\x22borders\x22,\nmark:bordersMark,positionPrefix:\x22upper\x22,aria:!1,extraEncoding:tooltipEncoding})))})}function add$jscomp$0(mark,run,parts){run\x3dnew CompositeMarkNormalizer(mark,run);compositeMarkRegistry[mark]\x3d{normalizer:run,parts:parts}}function isLegendBinding(bind){return!!bind\x26\x26(\x22legend\x22\x3d\x3d\x3dbind||!!bind.legend)}function isLegendStreamBinding(bind){return isLegendBinding(bind)\x26\x26isObject(bind)}function isStep(size){return isObject(size)\x26\x26void 0!\x3d\x3dsize.step}function isFrameMixins(o){return o.view||o.width||o.height}\nfunction extractCompositionLayout(spec,specType,config){var _a,_b,layout\x3d{};config\x3dconfig[specType];specType\x3dconfig.spacing;config\x3dconfig.columns;void 0!\x3d\x3dspecType\x26\x26(layout.spacing\x3dspecType);void 0!\x3d\x3dconfig\x26\x26(\x22facet\x22in spec\x26\x26!isFacetMapping(spec.facet)||\x22concat\x22in spec)\x26\x26(layout.columns\x3dconfig);\x22vconcat\x22in spec\x26\x26(layout.columns\x3d1);config\x3d$jscomp.makeIterator(COMPOSITION_LAYOUT_PROPERTIES);for(var $jscomp$key$prop\x3dconfig.next();!$jscomp$key$prop.done;$jscomp$key$prop\x3dconfig.next())if($jscomp$key$prop\x3d\n$jscomp$key$prop.value,void 0!\x3d\x3dspec[$jscomp$key$prop])if(\x22spacing\x22\x3d\x3d\x3d$jscomp$key$prop){var spacing\x3dspec[$jscomp$key$prop];layout[$jscomp$key$prop]\x3disNumber(spacing)?spacing:{row:null!\x3d\x3d(_a\x3dspacing.row)\x26\x26void 0!\x3d\x3d_a?_a:specType,column:null!\x3d\x3d(_b\x3dspacing.column)\x26\x26void 0!\x3d\x3d_b?_b:specType}}else layout[$jscomp$key$prop]\x3dspec[$jscomp$key$prop];return layout}function getViewConfigContinuousSize(viewConfig,channel){var _a;return null!\x3d\x3d(_a\x3dviewConfig[channel])\x26\x26void 0!\x3d\x3d_a?_a:viewConfig[\x22width\x22\x3d\x3d\x3dchannel?\n\x22continuousWidth\x22:\x22continuousHeight\x22]}function getViewConfigDiscreteStep(viewConfig,channel){viewConfig\x3dgetViewConfigDiscreteSize(viewConfig,channel);return isStep(viewConfig)?viewConfig.step:20}function getViewConfigDiscreteSize(viewConfig,channel){var _a;channel\x3dnull!\x3d\x3d(_a\x3dviewConfig[channel])\x26\x26void 0!\x3d\x3d_a?_a:viewConfig[\x22width\x22\x3d\x3d\x3dchannel?\x22discreteWidth\x22:\x22discreteHeight\x22];return getFirstDefined(channel,{step:viewConfig.step})}function initConfig(config){var $jscomp$destructuring$var93\x3dconfig\x3dvoid 0\x3d\x3d\x3d\nconfig?{}:config,color\x3d$jscomp$destructuring$var93.color,font\x3d$jscomp$destructuring$var93.font;$jscomp$destructuring$var93\x3d$jscomp$destructuring$var93.fontSize;config\x3d__rest(config,[\x22color\x22,\x22font\x22,\x22fontSize\x22]);font\x3dfont?{text:{font:font},style:{\x22guide-label\x22:{font:font},\x22guide-title\x22:{font:font},\x22group-title\x22:{font:font},\x22group-subtitle\x22:{font:font}}}:{};color?(color\x3dvoid 0\x3d\x3d\x3dcolor?{}:color,color\x3d{signals:[{name:\x22color\x22,value:isObject(color)?Object.assign(Object.assign({},DEFAULT_COLOR),color):DEFAULT_COLOR}],\nmark:{color:{signal:\x22color.blue\x22}},rule:{color:{signal:\x22color.gray0\x22}},text:{color:{signal:\x22color.gray0\x22}},style:{\x22guide-label\x22:{fill:{signal:\x22color.gray0\x22}},\x22guide-title\x22:{fill:{signal:\x22color.gray0\x22}},\x22group-title\x22:{fill:{signal:\x22color.gray0\x22}},\x22group-subtitle\x22:{fill:{signal:\x22color.gray0\x22}},cell:{stroke:{signal:\x22color.gray8\x22}}},axis:{domainColor:{signal:\x22color.gray13\x22},gridColor:{signal:\x22color.gray8\x22},tickColor:{signal:\x22color.gray13\x22}},range:{category:[{signal:\x22color.blue\x22},{signal:\x22color.orange\x22},\n{signal:\x22color.red\x22},{signal:\x22color.teal\x22},{signal:\x22color.green\x22},{signal:\x22color.yellow\x22},{signal:\x22color.purple\x22},{signal:\x22color.pink\x22},{signal:\x22color.brown\x22},{signal:\x22color.grey8\x22}]}}):color\x3d{};return mergeConfig({},defaultConfig$1,font,color,$jscomp$destructuring$var93?{signals:[{name:\x22fontSize\x22,value:isObject($jscomp$destructuring$var93)?Object.assign(Object.assign({},DEFAULT_FONT_SIZE),$jscomp$destructuring$var93):DEFAULT_FONT_SIZE}],text:{fontSize:{signal:\x22fontSize.text\x22}},style:{\x22guide-label\x22:{fontSize:{signal:\x22fontSize.guideLabel\x22}},\n\x22guide-title\x22:{fontSize:{signal:\x22fontSize.guideTitle\x22}},\x22group-title\x22:{fontSize:{signal:\x22fontSize.groupTitle\x22}},\x22group-subtitle\x22:{fontSize:{signal:\x22fontSize.groupSubtitle\x22}}}}:{},config||{})}function stripAndRedirectConfig(config){config\x3dduplicate(config);for(var $jscomp$iter$87\x3d$jscomp.makeIterator(VL_ONLY_CONFIG_PROPERTIES),$jscomp$key$prop\x3d$jscomp$iter$87.next();!$jscomp$key$prop.done;$jscomp$key$prop\x3d$jscomp$iter$87.next())delete config[$jscomp$key$prop.value];if(config.axis)for(var prop$433 in config.axis)isConditionalAxisValue(config.axis[prop$433])\x26\x26\ndelete config.axis[prop$433];if(config.legend)for($jscomp$iter$87\x3d$jscomp.makeIterator(VL_ONLY_LEGEND_CONFIG),$jscomp$key$prop\x3d$jscomp$iter$87.next();!$jscomp$key$prop.done;$jscomp$key$prop\x3d$jscomp$iter$87.next())delete config.legend[$jscomp$key$prop.value];if(config.mark){$jscomp$iter$87\x3d$jscomp.makeIterator(VL_ONLY_MARK_CONFIG_PROPERTIES);for($jscomp$key$prop\x3d$jscomp$iter$87.next();!$jscomp$key$prop.done;$jscomp$key$prop\x3d$jscomp$iter$87.next())delete config.mark[$jscomp$key$prop.value];config.mark.tooltip\x26\x26\nisObject(config.mark.tooltip)\x26\x26delete config.mark.tooltip}$jscomp$iter$87\x3d$jscomp.makeIterator(MARK_STYLES);for(prop$433\x3d$jscomp$iter$87.next();!prop$433.done;prop$433\x3d$jscomp$iter$87.next()){prop$433\x3dprop$433.value;var $jscomp$iter$90\x3d$jscomp.makeIterator(VL_ONLY_MARK_CONFIG_PROPERTIES);for($jscomp$key$prop\x3d$jscomp$iter$90.next();!$jscomp$key$prop.done;$jscomp$key$prop\x3d$jscomp$iter$90.next())delete config[prop$433][$jscomp$key$prop.value];if($jscomp$key$prop\x3dVL_ONLY_ALL_MARK_SPECIFIC_CONFIG_PROPERTY_INDEX[prop$433])for($jscomp$iter$90\x3d\n$jscomp.makeIterator($jscomp$key$prop),$jscomp$key$prop\x3d$jscomp$iter$90.next();!$jscomp$key$prop.done;$jscomp$key$prop\x3d$jscomp$iter$90.next())delete config[prop$433][$jscomp$key$prop.value];$jscomp$key$prop\x3dconfig;$jscomp$iter$90\x3dvoid 0;var propConfig\x3d$jscomp$key$prop[prop$433];\x22view\x22\x3d\x3d\x3dprop$433\x26\x26($jscomp$iter$90\x3d\x22cell\x22);propConfig\x3dObject.assign(Object.assign({},propConfig),$jscomp$key$prop.style[null!\x3d\x3d$jscomp$iter$90\x26\x26void 0!\x3d\x3d$jscomp$iter$90?$jscomp$iter$90:prop$433]);isEmpty(propConfig)||($jscomp$key$prop.style[null!\x3d\x3d\n$jscomp$iter$90\x26\x26void 0!\x3d\x3d$jscomp$iter$90?$jscomp$iter$90:prop$433]\x3dpropConfig);delete $jscomp$key$prop[prop$433]}$jscomp$iter$87\x3d$jscomp.makeIterator(keys$jscomp$0(compositeMarkRegistry));for(prop$433\x3d$jscomp$iter$87.next();!prop$433.done;prop$433\x3d$jscomp$iter$87.next())delete config[prop$433.value];$jscomp$iter$87\x3dconfig;$jscomp$iter$90\x3dextractTitleConfig($jscomp$iter$87.title);prop$433\x3d$jscomp$iter$90.titleMarkConfig;$jscomp$key$prop\x3d$jscomp$iter$90.subtitleMarkConfig;$jscomp$iter$90\x3d$jscomp$iter$90.subtitle;\nisEmpty(prop$433)||($jscomp$iter$87.style[\x22group-title\x22]\x3dObject.assign(Object.assign({},$jscomp$iter$87.style[\x22group-title\x22]),prop$433));isEmpty($jscomp$key$prop)||($jscomp$iter$87.style[\x22group-subtitle\x22]\x3dObject.assign(Object.assign({},$jscomp$iter$87.style[\x22group-subtitle\x22]),$jscomp$key$prop));isEmpty($jscomp$iter$90)?delete $jscomp$iter$87.title:$jscomp$iter$87.title\x3d$jscomp$iter$90;for(var prop$438 in config)isObject(config[prop$438])\x26\x26isEmpty(config[prop$438])\x26\x26delete config[prop$438];return isEmpty(config)?\nvoid 0:config}function potentialStackedChannel(encoding,x){var _a,_b,y\x3d\x22x\x22\x3d\x3d\x3dx?\x22y\x22:\x22radius\x22,xDef\x3dencoding[x];encoding\x3dencoding[y];if(isFieldDef(xDef)\x26\x26isFieldDef(encoding))if(\x22quantitative\x22\x3d\x3d\x3dchannelDefType(xDef)\x26\x26\x22quantitative\x22\x3d\x3d\x3dchannelDefType(encoding)){if(xDef.stack)return x;if(encoding.stack)return y;var xAggregate\x3disFieldDef(xDef)\x26\x26!!xDef.aggregate,yAggregate\x3disFieldDef(encoding)\x26\x26!!encoding.aggregate;if(xAggregate!\x3d\x3dyAggregate)return xAggregate?x:y;xDef\x3dnull\x3d\x3d\x3d(_a\x3dxDef.scale)||void 0\x3d\x3d\x3d_a?\nvoid 0:_a.type;_a\x3dnull\x3d\x3d\x3d(_b\x3dencoding.scale)||void 0\x3d\x3d\x3d_b?void 0:_b.type;if(xDef\x26\x26\x22linear\x22!\x3d\x3dxDef)return y;if(_a\x26\x26\x22linear\x22!\x3d\x3d_a)return x}else{if(\x22quantitative\x22\x3d\x3d\x3dchannelDefType(xDef))return x;if(\x22quantitative\x22\x3d\x3d\x3dchannelDefType(encoding))return y}else{if(\x22quantitative\x22\x3d\x3d\x3dchannelDefType(xDef))return x;if(\x22quantitative\x22\x3d\x3d\x3dchannelDefType(encoding))return y}}function getDimensionChannel(channel){switch(channel){case \x22x\x22:return\x22y\x22;case \x22y\x22:return\x22x\x22;case \x22theta\x22:return\x22radius\x22;case \x22radius\x22:return\x22theta\x22}}\nfunction stack$jscomp$0(m,encoding,opt){opt\x3dvoid 0\x3d\x3d\x3dopt?{}:opt;m\x3disMarkDef(m)?m.type:m;if(!STACKABLE_MARKS.has(m))return null;var fieldChannel\x3dpotentialStackedChannel(encoding,\x22x\x22)||potentialStackedChannel(encoding,\x22theta\x22);if(!fieldChannel)return null;var stackedFieldDef\x3dencoding[fieldChannel],stackedField\x3disFieldDef(stackedFieldDef)?vgField(stackedFieldDef,{}):void 0,dimensionChannel\x3dgetDimensionChannel(fieldChannel),dimensionDef\x3dencoding[dimensionChannel],dimensionField\x3disFieldDef(dimensionDef)?\nvgField(dimensionDef,{}):void 0;dimensionField\x3d\x3d\x3dstackedField\x26\x26(dimensionChannel\x3ddimensionDef\x3ddimensionField\x3dvoid 0);stackedField\x3dNONPOSITION_CHANNELS.reduce(function(sc,channel){if(\x22tooltip\x22!\x3d\x3dchannel\x26\x26channelHasField(encoding,channel))for(var $jscomp$iter$94\x3d$jscomp.makeIterator(array$jscomp$0(encoding[channel])),$jscomp$key$cDef\x3d$jscomp$iter$94.next();!$jscomp$key$cDef.done;$jscomp$key$cDef\x3d$jscomp$iter$94.next())if($jscomp$key$cDef\x3dgetFieldDef($jscomp$key$cDef.value),!$jscomp$key$cDef.aggregate){var f\x3d\nvgField($jscomp$key$cDef,{});f\x26\x26f\x3d\x3d\x3ddimensionField||sc.push({channel:channel,fieldDef:$jscomp$key$cDef})}return sc},[]);var offset;void 0!\x3d\x3dstackedFieldDef.stack?offset\x3disBoolean(stackedFieldDef.stack)?stackedFieldDef.stack?\x22zero\x22:null:stackedFieldDef.stack:0\x3cstackedField.length\x26\x26STACK_BY_DEFAULT_MARKS.has(m)\x26\x26(offset\x3d\x22zero\x22);if(!(offset\x26\x26offset in STACK_OFFSET_INDEX)||isAggregate(encoding)\x26\x260\x3d\x3d\x3dstackedField.length)return null;if(stackedFieldDef.scale\x26\x26stackedFieldDef.scale.type\x26\x26stackedFieldDef.scale.type!\x3d\x3d\nScaleType.LINEAR){if(opt.disallowNonLinearStack)return null;warn(\x22Cannot stack non-linear scale (\x22+stackedFieldDef.scale.type+\x22).\x22)}if(isFieldOrDatumDef(encoding[getSecondaryRangeChannel(fieldChannel)]))return void 0!\x3d\x3dstackedFieldDef.stack\x26\x26warn(\x27Cannot stack \x22\x27+fieldChannel+\x27\x22 if there is already \x22\x27+fieldChannel+\x272\x22.\x27),null;isFieldDef(stackedFieldDef)\x26\x26stackedFieldDef.aggregate\x26\x26!contains(SUM_OPS,stackedFieldDef.aggregate)\x26\x26warn(\x27Stacking is applied even though the aggregate function is non-summative (\x22\x27+\nstackedFieldDef.aggregate+\x27\x22).\x27);return{groupbyChannel:dimensionDef?dimensionChannel:void 0,groupbyField:dimensionField,fieldChannel:fieldChannel,impute:null\x3d\x3d\x3dstackedFieldDef.impute?!1:isPathMark(m),stackBy:stackedField,offset:offset}}function dropLineAndPoint(markDef){markDef\x3d__rest(markDef,[\x22point\x22,\x22line\x22]);return 1\x3ckeys$jscomp$0(markDef).length?markDef:markDef.type}function dropLineAndPointFromConfig(config){for(var $jscomp$iter$95\x3d$jscomp.makeIterator([\x22line\x22,\x22area\x22,\x22rule\x22,\x22trail\x22]),$jscomp$key$mark\x3d\n$jscomp$iter$95.next();!$jscomp$key$mark.done;$jscomp$key$mark\x3d$jscomp$iter$95.next())if($jscomp$key$mark\x3d$jscomp$key$mark.value,config[$jscomp$key$mark]){var $jscomp$compprop5\x3d{};config\x3dObject.assign(Object.assign({},config),($jscomp$compprop5[$jscomp$key$mark]\x3domit(config[$jscomp$key$mark],[\x22point\x22,\x22line\x22]),$jscomp$compprop5))}return config}function getPointOverlay(markDef,markConfig,encoding){markConfig\x3dvoid 0\x3d\x3d\x3dmarkConfig?{}:markConfig;if(\x22transparent\x22\x3d\x3d\x3dmarkDef.point)return{opacity:0};if(markDef.point)return isObject(markDef.point)?\nmarkDef.point:{};if(void 0!\x3d\x3dmarkDef.point)return null;if(markConfig.point||encoding.shape)return isObject(markConfig.point)?markConfig.point:{}}function getLineOverlay(markDef,markConfig){markConfig\x3dvoid 0\x3d\x3d\x3dmarkConfig?{}:markConfig;if(markDef.line)return!0\x3d\x3d\x3dmarkDef.line?{}:markDef.line;if(void 0!\x3d\x3dmarkDef.line)return null;if(markConfig.line)return!0\x3d\x3d\x3dmarkConfig.line?{}:markConfig.line}function replaceRepeaterInEncoding(encoding,repeater){return repeater?replaceRepeaterInMapping(encoding,repeater):\nencoding}function replaceRepeatInProp(prop,o,repeater){var val\x3do[prop];if(val\x26\x26!isString(val)\x26\x26\x22repeat\x22in val){if(val.repeat in repeater){var $jscomp$compprop8\x3d{};return Object.assign(Object.assign({},o),($jscomp$compprop8[prop]\x3drepeater[val.repeat],$jscomp$compprop8))}warn(\x27Unknown repeated value \x22\x27+val.repeat+\x27\x22.\x27)}else return o}function replaceRepeaterInFieldDef(fieldDef$jscomp$0,repeater){fieldDef$jscomp$0\x3dreplaceRepeatInProp(\x22field\x22,fieldDef$jscomp$0,repeater);if(void 0!\x3d\x3dfieldDef$jscomp$0){if(null\x3d\x3d\x3d\nfieldDef$jscomp$0)return null;var fieldDef\x3dfieldDef$jscomp$0;isTypedFieldDef(fieldDef)\x26\x26\x22sort\x22in fieldDef\x26\x26isSortField(fieldDef$jscomp$0.sort)\x26\x26(repeater\x3dreplaceRepeatInProp(\x22field\x22,fieldDef$jscomp$0.sort,repeater),fieldDef$jscomp$0\x3dObject.assign(Object.assign({},fieldDef$jscomp$0),repeater?{sort:repeater}:{}));return fieldDef$jscomp$0}}function replaceRepeaterInFieldOrDatumDef(def,repeater){if(isFieldDef(def))return replaceRepeaterInFieldDef(def,repeater);repeater\x3dreplaceRepeatInProp(\x22datum\x22,def,\nrepeater);repeater\x3d\x3d\x3ddef||repeater.type||(repeater.type\x3d\x22nominal\x22);return repeater}function replaceRepeaterInChannelDef(channelDef,repeater){if(isFieldOrDatumDef(channelDef)){if(repeater\x3dreplaceRepeaterInFieldOrDatumDef(channelDef,repeater))return repeater;if(channelDef\x26\x26\x22condition\x22in channelDef)return{condition:channelDef.condition}}else return hasConditionalFieldOrDatumDef(channelDef)?(repeater\x3dreplaceRepeaterInFieldOrDatumDef(channelDef.condition,repeater))?Object.assign(Object.assign({},channelDef),\n{condition:repeater}):__rest(channelDef,[\x22condition\x22]):channelDef}function replaceRepeaterInMapping(mapping,repeater){var out\x3d{},channel;for(channel in mapping)if(hop.call(mapping,channel)){var channelDef\x3dmapping[channel];isArray(channelDef)?out[channel]\x3dchannelDef.map(function(cd){return replaceRepeaterInChannelDef(cd,repeater)}).filter(function(cd){return cd}):(channelDef\x3dreplaceRepeaterInChannelDef(channelDef,repeater),void 0!\x3d\x3dchannelDef\x26\x26(out[channel]\x3dchannelDef))}return out}function mergeEncoding(opt){var parentEncoding\x3d\nopt.parentEncoding,encoding\x3dopt.encoding;parentEncoding\x26\x26encoding\x26\x26(opt\x3dkeys$jscomp$0(parentEncoding).reduce(function(o,key){encoding[key]\x26\x26o.push(key);return o},[]),0\x3copt.length\x26\x26warn(\x22Layer\x27s shared \x22+opt.join(\x22,\x22)+\x22 channel \x22+(1\x3d\x3d\x3dopt.length?\x22is\x22:\x22are\x22)+\x22 overriden.\x22));parentEncoding\x3dObject.assign(Object.assign({},null!\x3d\x3dparentEncoding\x26\x26void 0!\x3d\x3dparentEncoding?parentEncoding:{}),null!\x3d\x3dencoding\x26\x26void 0!\x3d\x3dencoding?encoding:{});return isEmpty(parentEncoding)?void 0:parentEncoding}function mergeProjection(opt){var parentProjection\x3d\nopt.parentProjection;opt\x3dopt.projection;if(parentProjection\x26\x26opt){var JSCompiler_inline_result\x3d\x22Layer\x27s shared projection \x22+stringify(parentProjection)+\x22 is overridden by a child projection \x22+stringify(opt)+\x22.\x22;warn(JSCompiler_inline_result)}return null!\x3d\x3dopt\x26\x26void 0!\x3d\x3dopt?opt:parentProjection}function normalize$jscomp$0(spec,config$jscomp$0){void 0\x3d\x3d\x3dconfig$jscomp$0\x26\x26(config$jscomp$0\x3dinitConfig(spec.config));var JSCompiler_inline_result\x3dconfig$jscomp$0;JSCompiler_inline_result\x3dvoid 0\x3d\x3d\x3dJSCompiler_inline_result?\n{}:JSCompiler_inline_result;JSCompiler_inline_result\x3dnormalizer.map(spec,{config:JSCompiler_inline_result});var config\x3dconfig$jscomp$0;config$jscomp$0\x3dspec.width;spec\x3dspec.height;var isFitCompatible\x3disUnitSpec(JSCompiler_inline_result)||\x22layer\x22in JSCompiler_inline_result,autosizeDefault\x3d{};isFitCompatible?\x22container\x22\x3d\x3dconfig$jscomp$0\x26\x26\x22container\x22\x3d\x3dspec?(autosizeDefault.type\x3d\x22fit\x22,autosizeDefault.contains\x3d\x22padding\x22):\x22container\x22\x3d\x3dconfig$jscomp$0?(autosizeDefault.type\x3d\x22fit-x\x22,autosizeDefault.contains\x3d\n\x22padding\x22):\x22container\x22\x3d\x3dspec\x26\x26(autosizeDefault.type\x3d\x22fit-y\x22,autosizeDefault.contains\x3d\x22padding\x22):(\x22container\x22\x3d\x3dconfig$jscomp$0\x26\x26(warn(containerSizeNonSingle(\x22width\x22)),config$jscomp$0\x3dvoid 0),\x22container\x22\x3d\x3dspec\x26\x26(warn(containerSizeNonSingle(\x22height\x22)),spec\x3dvoid 0));config\x3dObject.assign(Object.assign(Object.assign({type:\x22pad\x22},autosizeDefault),config?_normalizeAutoSize(config.autosize):{}),_normalizeAutoSize(JSCompiler_inline_result.autosize));\x22fit\x22!\x3d\x3dconfig.type||isFitCompatible||(warn(\x27Autosize \x22fit\x22 only works for single views and layered views.\x27),\nconfig.type\x3d\x22pad\x22);\x22container\x22\x3d\x3dconfig$jscomp$0\x26\x26\x22fit\x22!\x3dconfig.type\x26\x26\x22fit-x\x22!\x3dconfig.type\x26\x26warn(containerSizeNotCompatibleWithAutosize(\x22width\x22));\x22container\x22\x3d\x3dspec\x26\x26\x22fit\x22!\x3dconfig.type\x26\x26\x22fit-y\x22!\x3dconfig.type\x26\x26warn(containerSizeNotCompatibleWithAutosize(\x22height\x22));config$jscomp$0\x3ddeepEqual(config,{type:\x22pad\x22})?void 0:config;return Object.assign(Object.assign({},JSCompiler_inline_result),config$jscomp$0?{autosize:config$jscomp$0}:{})}function _normalizeAutoSize(autosize){return isString(autosize)?{type:autosize}:\nnull!\x3d\x3dautosize\x26\x26void 0!\x3d\x3dautosize?autosize:{}}function extractTopLevelProperties(t){return TOP_LEVEL_PROPERTIES.reduce(function(o,p){t\x26\x26void 0!\x3d\x3dt[p]\x26\x26(o[p]\x3dt[p]);return o},{})}function makeExplicit(value){return{explicit:!0,value:value}}function makeImplicit(value){return{explicit:!1,value:value}}function tieBreakByComparing(compare){return function(v1,v2,property,propertyOf){var diff\x3dcompare(v1.value,v2.value);return 0\x3cdiff?v1:0\x3ediff?v2:defaultTieBreaker(v1,v2,property,propertyOf)}}function defaultTieBreaker(v1$jscomp$0,\nv2,property,propertyOf){if(v1$jscomp$0.explicit\x26\x26v2.explicit){var v1\x3dv1$jscomp$0.value;v2\x3dv2.value;property\x3d\x22Conflicting \x22+propertyOf.toString()+\x27 property \x22\x27+property.toString()+\x27\x22 (\x27+stringify(v1)+\x22 and \x22+stringify(v2)+\x22). Using \x22+stringify(v1)+\x22.\x22;warn(property)}return v1$jscomp$0}function mergeValuesWithExplicit(v1,v2,property,propertyOf,tieBreaker){tieBreaker\x3dvoid 0\x3d\x3d\x3dtieBreaker?defaultTieBreaker:tieBreaker;return void 0\x3d\x3d\x3dv1||void 0\x3d\x3d\x3dv1.value?v2:v1.explicit\x26\x26!v2.explicit?v1:v2.explicit\x26\x26!v1.explicit?\nv2:deepEqual(v1.value,v2.value)?v1:tieBreaker(v1,v2,property,propertyOf)}function isNamedData(data){return\x22name\x22in data\x26\x26!(\x22url\x22in data)\x26\x26!(\x22values\x22in data)\x26\x26!isGenerator(data)}function isGenerator(data){return data\x26\x26(\x22sequence\x22in data||\x22sphere\x22in data||\x22graticule\x22in data)}function normalizeTransform(transform){return transform.map(function(t){return\x22filter\x22in t?{filter:normalizeLogicalComposition(t.filter,normalizePredicate)}:t})}function parseSelector(selector,source,marks){DEFAULT_SOURCE\x3dsource||\nVIEW;MARKS\x3dmarks||DEFAULT_MARKS;return parseMerge(selector.trim()).map(parseSelector$1)}function find$jscomp$0(s,i,endChar,pushChar,popChar){for(var count\x3d0,n\x3ds.length,c;i\x3cn;++i)if(c\x3ds[i],count||c!\x3d\x3dendChar)popChar\x26\x260\x3c\x3dpopChar.indexOf(c)?--count:pushChar\x26\x260\x3c\x3dpushChar.indexOf(c)\x26\x26++count;else break;return i}function parseMerge(s){for(var output\x3d[],start\x3d0,n\x3ds.length,i\x3d0;i\x3cn;)i\x3dfind$jscomp$0(s,i,COMMA,LBRACK+LBRACE,RBRACK+RBRACE),output.push(s.substring(start,i).trim()),start\x3d++i;if(0\x3d\x3d\x3doutput.length)throw\x22Empty event selector: \x22+\ns;return output}function parseSelector$1(s){if(\x22[\x22\x3d\x3d\x3ds[0]){var JSCompiler_temp\x3ds;var n\x3dJSCompiler_temp.length;s\x3dfind$jscomp$0(JSCompiler_temp,1,RBRACK,LBRACK,RBRACK);if(s\x3d\x3d\x3dn)throw\x22Empty between selector: \x22+JSCompiler_temp;n\x3dparseMerge(JSCompiler_temp.substring(1,s));if(2!\x3d\x3dn.length)throw\x22Between selector must have two elements: \x22+JSCompiler_temp;JSCompiler_temp\x3dJSCompiler_temp.slice(s+1).trim();if(JSCompiler_temp[0]!\x3d\x3dGT)throw\x22Expected \x27\\x3e\x27 after between selector: \x22+JSCompiler_temp;n\x3dn.map(parseSelector$1);\nJSCompiler_temp\x3dparseSelector$1(JSCompiler_temp.slice(1).trim());JSCompiler_temp.between?JSCompiler_temp\x3d{between:n,stream:JSCompiler_temp}:JSCompiler_temp.between\x3dn}else{n\x3d{source:DEFAULT_SOURCE};var source\x3d[],throttle\x3d[0,0],markname\x3d0,start\x3d0,n$jscomp$0\x3ds.length,i\x3d0;if(s[n$jscomp$0-1]\x3d\x3d\x3dRBRACE){i\x3ds.lastIndexOf(LBRACE);if(0\x3c\x3di){try{throttle\x3dparseThrottle(s.substring(i+1,n$jscomp$0-1))}catch(e){throw\x22Invalid throttle specification: \x22+s;}s\x3ds.slice(0,i).trim();n$jscomp$0\x3ds.length}else throw\x22Unmatched right brace: \x22+\ns;i\x3d0}if(!n$jscomp$0)throw s;s[0]\x3d\x3d\x3dNAME\x26\x26(markname\x3d++i);var j\x3dfind$jscomp$0(s,i,COLON);j\x3cn$jscomp$0\x26\x26(source.push(s.substring(start,j).trim()),start\x3di\x3d++j);i\x3dfind$jscomp$0(s,i,LBRACK);if(i\x3d\x3d\x3dn$jscomp$0)source.push(s.substring(start,n$jscomp$0).trim());else if(source.push(s.substring(start,i).trim()),JSCompiler_temp\x3d[],start\x3d++i,start\x3d\x3d\x3dn$jscomp$0)throw\x22Unmatched left bracket: \x22+s;for(;i\x3cn$jscomp$0;){i\x3dfind$jscomp$0(s,i,RBRACK);if(i\x3d\x3d\x3dn$jscomp$0)throw\x22Unmatched left bracket: \x22+s;JSCompiler_temp.push(s.substring(start,\ni).trim());if(i\x3cn$jscomp$0-1\x26\x26s[++i]!\x3d\x3dLBRACK)throw\x22Expected left bracket: \x22+s;start\x3d++i}if(!(n$jscomp$0\x3dsource.length)||ILLEGAL.test(source[n$jscomp$0-1]))throw\x22Invalid event selector: \x22+s;1\x3cn$jscomp$0?(n.type\x3dsource[1],markname?n.markname\x3dsource[0].slice(1):MARKS[source[0]]?n.marktype\x3dsource[0]:n.source\x3dsource[0]):n.type\x3dsource[0];\x22!\x22\x3d\x3d\x3dn.type.slice(-1)\x26\x26(n.consume\x3d!0,n.type\x3dn.type.slice(0,-1));null!\x3dJSCompiler_temp\x26\x26(n.filter\x3dJSCompiler_temp);throttle[0]\x26\x26(n.throttle\x3dthrottle[0]);throttle[1]\x26\x26\n(n.debounce\x3dthrottle[1]);JSCompiler_temp\x3dn}return JSCompiler_temp}function parseThrottle(s){var a\x3ds.split(COMMA);if(!s.length||2\x3ca.length)throw s;return a.map(function(_){_\x3d+_;if(_!\x3d\x3d_)throw s;return _})}function wrapCondition(model,channelDef,vgChannel,refFn){var condition\x3d!!channelDef\x26\x26\x22condition\x22in channelDef\x26\x26channelDef.condition;channelDef\x3drefFn(channelDef);if(condition){condition\x3darray$jscomp$0(condition).map(function(c){var conditionValueRef\x3drefFn(c);c\x3dc.selection?parseSelectionPredicate(model,\nc.selection):expression$jscomp$0(model,c.test);return Object.assign({test:c},conditionValueRef)});var $jscomp$compprop9\x3d{};return $jscomp$compprop9[vgChannel]\x3d[].concat($jscomp.arrayFromIterable(condition),$jscomp.arrayFromIterable(void 0!\x3d\x3dchannelDef?[channelDef]:[])),$jscomp$compprop9}condition\x3d{};return void 0!\x3d\x3dchannelDef?(condition[vgChannel]\x3dchannelDef,condition):{}}function text$jscomp$0(model,channel){channel\x3dvoid 0\x3d\x3d\x3dchannel?\x22text\x22:channel;return wrapCondition(model,model.encoding[channel],\nchannel,function(cDef){return textRef(cDef,model.config)})}function textRef(channelDef,config,expr){expr\x3dvoid 0\x3d\x3d\x3dexpr?\x22datum\x22:expr;if(channelDef){if(isValueDef(channelDef))return signalOrValueRef(channelDef.value);if(isFieldOrDatumDef(channelDef)){var $jscomp$destructuring$var123\x3dgetFormatMixins(channelDef);return formatSignalRef({fieldOrDatumDef:channelDef,format:$jscomp$destructuring$var123.format,formatType:$jscomp$destructuring$var123.formatType,expr:expr,config:config})}}}function tooltip(model,\nopt){opt\x3dvoid 0\x3d\x3d\x3dopt?{}:opt;var encoding\x3dmodel.encoding,markDef\x3dmodel.markDef,config\x3dmodel.config,stack\x3dmodel.stack,channelDef\x3dencoding.tooltip;if(isArray(channelDef))return{tooltip:tooltipRefForEncoding({tooltip:channelDef},stack,config,opt)};var datum\x3dopt.reactiveGeom?\x22datum.datum\x22:\x22datum\x22;return wrapCondition(model,channelDef,\x22tooltip\x22,function(cDef){var tooltipRefFromChannelDef\x3dtextRef(cDef,config,datum);if(tooltipRefFromChannelDef)return tooltipRefFromChannelDef;if(null!\x3d\x3dcDef){cDef\x3dgetMarkPropOrConfig(\x22tooltip\x22,\nmarkDef,config);!0\x3d\x3d\x3dcDef\x26\x26(cDef\x3d{content:\x22encoding\x22});if(isString(cDef))return{value:cDef};if(isObject(cDef))return\x22encoding\x22\x3d\x3d\x3dcDef.content?tooltipRefForEncoding(encoding,stack,config,opt):{signal:datum}}})}function tooltipData(encoding,stack,config,$jscomp$destructuring$var125){function add(fDef,channel){var mainChannel\x3dgetMainRangeChannel(channel);fDef\x3disTypedFieldDef(fDef)?fDef:Object.assign(Object.assign({},fDef),{type:encoding[mainChannel].type});mainChannel\x3darray$jscomp$0(title$jscomp$0(fDef,\nconfig,{allowDisabling:!1})).join(\x22, \x22);if(channel in POSITION_SCALE_CHANNEL_INDEX){var channel2\x3d\x22x\x22\x3d\x3d\x3dchannel?\x22x2\x22:\x22y2\x22,fieldDef2\x3dgetFieldDef(encoding[channel2]);if(isBinned(fDef.bin)\x26\x26fieldDef2){var value\x3dvgField(fDef,{expr:expr});fieldDef2\x3dvgField(fieldDef2,{expr:expr});var $jscomp$destructuring$var127\x3dgetFormatMixins(fDef);value\x3dbinFormatExpression(value,fieldDef2,$jscomp$destructuring$var127.format,$jscomp$destructuring$var127.formatType,config);toSkip[channel2]\x3d!0}else stack\x26\x26stack.fieldChannel\x3d\x3d\x3d\nchannel\x26\x26\x22normalize\x22\x3d\x3d\x3dstack.offset\x26\x26(channel2\x3dgetFormatMixins(fDef),value\x3dformatSignalRef({fieldOrDatumDef:fDef,format:channel2.format,formatType:channel2.formatType,expr:expr,config:config,normalizeStack:!0}).signal)}value\x3dnull!\x3d\x3dvalue\x26\x26void 0!\x3d\x3dvalue?value:textRef(fDef,config,expr).signal;tuples.push({channel:channel,key:mainChannel,value:value})}var toSkip\x3d{},expr\x3d(void 0\x3d\x3d\x3d$jscomp$destructuring$var125?{}:$jscomp$destructuring$var125).reactiveGeom?\x22datum.datum\x22:\x22datum\x22,tuples\x3d[];forEach(encoding,\nfunction(channelDef,channel){isFieldDef(channelDef)?add(channelDef,channel):hasConditionalFieldDef(channelDef)\x26\x26add(channelDef.condition,channel)});$jscomp$destructuring$var125\x3d{};for(var $jscomp$iter$106\x3d$jscomp.makeIterator(tuples),$jscomp$key$\x3d$jscomp$iter$106.next();!$jscomp$key$.done;$jscomp$key$\x3d$jscomp$iter$106.next()){$jscomp$key$\x3d$jscomp$key$.value;var key\x3d$jscomp$key$.key,value$jscomp$0\x3d$jscomp$key$.value;toSkip[$jscomp$key$.channel]||$jscomp$destructuring$var125[key]||($jscomp$destructuring$var125[$(key)]\x3d\nvalue$jscomp$0)}return $jscomp$destructuring$var125}function tooltipRefForEncoding(encoding,stack,config,$jscomp$destructuring$var131){encoding\x3dtooltipData(encoding,stack,config,{reactiveGeom:(void 0\x3d\x3d\x3d$jscomp$destructuring$var131?{}:$jscomp$destructuring$var131).reactiveGeom});encoding\x3dentries(encoding).map(function($jscomp$destructuring$var133){return $jscomp$destructuring$var133.key+\x22: \x22+$jscomp$destructuring$var133.value});return 0\x3cencoding.length?{signal:\x22{\x22+encoding.join(\x22, \x22)+\x22}\x22}:void 0}function aria(model){var enableAria\x3d\ngetMarkPropOrConfig(\x22aria\x22,model.markDef,model.config);return!1\x3d\x3d\x3denableAria?{}:Object.assign(Object.assign(Object.assign({},enableAria?{aria:enableAria}:{}),ariaRoleDescription(model)),description$1(model))}function ariaRoleDescription(model){var mark\x3dmodel.mark,config\x3dmodel.config;if(!1\x3d\x3d\x3dconfig.aria)return{};model\x3dgetMarkPropOrConfig(\x22ariaRoleDescription\x22,model.markDef,config);return null!\x3dmodel?{ariaRoleDescription:{value:model}}:mark in VG_MARK_INDEX?{}:{ariaRoleDescription:{value:mark}}}function description$1(model){var encoding\x3d\nmodel.encoding,markDef\x3dmodel.markDef,config\x3dmodel.config,stack\x3dmodel.stack,channelDef\x3dencoding.description;if(channelDef)return wrapCondition(model,channelDef,\x22description\x22,function(cDef){return textRef(cDef,model.config)});markDef\x3dgetMarkPropOrConfig(\x22description\x22,markDef,config);if(null!\x3dmarkDef)return{description:signalOrValueRef(markDef)};if(!1\x3d\x3d\x3dconfig.aria)return{};encoding\x3dtooltipData(encoding,stack,config);if(!isEmpty(encoding))return{description:{signal:entries(encoding).map(function($jscomp$destructuring$var138){return $jscomp$destructuring$var138.key+\n\x27 + \x22: \x22 + (\x27+$jscomp$destructuring$var138.value+\x22)\x22}).join(\x27 + \x22; \x22 + \x27)}}}function nonPosition(channel,model,opt){opt\x3dvoid 0\x3d\x3d\x3dopt?{}:opt;var markDef\x3dmodel.markDef,encoding\x3dmodel.encoding,config\x3dmodel.config,vgChannel\x3dopt.vgChannel,defaultRef\x3dopt.defaultRef;opt\x3dopt.defaultValue;void 0\x3d\x3d\x3ddefaultRef\x26\x26(opt\x3dnull!\x3d\x3dopt\x26\x26void 0!\x3d\x3dopt?opt:getMarkPropOrConfig(channel,markDef,config,{vgChannel:vgChannel,ignoreVgConfig:!0}),void 0!\x3d\x3dopt\x26\x26(defaultRef\x3dsignalOrValueRef(opt)));return wrapCondition(model,encoding[channel],\nnull!\x3d\x3dvgChannel\x26\x26void 0!\x3d\x3dvgChannel?vgChannel:channel,function(cDef){return midPoint({channel:channel,channelDef:cDef,markDef:markDef,config:config,scaleName:model.scaleName(channel),scale:model.getScaleComponent(channel),stack:null,defaultRef:defaultRef})})}function color$jscomp$0(model,opt){opt\x3dvoid 0\x3d\x3d\x3dopt?{filled:void 0}:opt;var _a,_b,_c,_d,markDef\x3dmodel.markDef,encoding\x3dmodel.encoding,config\x3dmodel.config,markType\x3dmarkDef.type;opt\x3dnull!\x3d\x3d(_a\x3dopt.filled)\x26\x26void 0!\x3d\x3d_a?_a:getMarkPropOrConfig(\x22filled\x22,\nmarkDef,config);_a\x3dcontains([\x22bar\x22,\x22point\x22,\x22circle\x22,\x22square\x22,\x22geoshape\x22],markType)?\x22transparent\x22:void 0;_a\x3dnull!\x3d\x3d(_c\x3dnull!\x3d\x3d(_b\x3dgetMarkPropOrConfig(!0\x3d\x3d\x3dopt?\x22color\x22:void 0,markDef,config,{vgChannel:\x22fill\x22}))\x26\x26void 0!\x3d\x3d_b?_b:config.mark[!0\x3d\x3d\x3dopt\x26\x26\x22color\x22])\x26\x26void 0!\x3d\x3d_c?_c:_a;_b\x3dnull!\x3d\x3d(_d\x3dgetMarkPropOrConfig(!1\x3d\x3d\x3dopt?\x22color\x22:void 0,markDef,config,{vgChannel:\x22stroke\x22}))\x26\x26void 0!\x3d\x3d_d?_d:config.mark[!1\x3d\x3d\x3dopt\x26\x26\x22color\x22];_d\x3dopt?\x22fill\x22:\x22stroke\x22;_c\x3dObject.assign(Object.assign({},_a?{fill:signalOrValueRef(_a)}:\n{}),_b?{stroke:signalOrValueRef(_b)}:{});markDef.color\x26\x26(opt?markDef.fill:markDef.stroke)\x26\x26warn(droppingColor(\x22property\x22,{fill:\x22fill\x22in markDef,stroke:\x22stroke\x22in markDef}));return Object.assign(Object.assign(Object.assign(Object.assign({},_c),nonPosition(\x22color\x22,model,{vgChannel:_d,defaultValue:opt?_a:_b})),nonPosition(\x22fill\x22,model,{defaultValue:encoding.fill?_a:void 0})),nonPosition(\x22stroke\x22,model,{defaultValue:encoding.stroke?_b:void 0}))}function getOffset(channel,markDef){channel\x3dgetOffsetChannel(channel);\nif(markDef\x3dmarkDef[channel])return markDef}function pointPosition(channel,model,$jscomp$destructuring$var145){var defaultPos\x3d$jscomp$destructuring$var145.defaultPos,vgChannel\x3d$jscomp$destructuring$var145.vgChannel;$jscomp$destructuring$var145\x3d$jscomp$destructuring$var145.isMidPoint;var encoding\x3dmodel.encoding,markDef\x3dmodel.markDef,config\x3dmodel.config,stack\x3dmodel.stack,channelDef\x3dencoding[channel],channel2Def\x3dencoding[getSecondaryRangeChannel(channel)],scaleName\x3dmodel.scaleName(channel),scale\x3dmodel.getScaleComponent(channel),\noffset\x3dgetOffset(channel,markDef);defaultPos\x3dpointPositionDefaultRef({model:model,defaultPos:defaultPos,channel:channel,scaleName:scaleName,scale:scale});if(!channelDef\x26\x26channel in POSITION_SCALE_CHANNEL_INDEX\x26\x26(encoding.latitude||encoding.longitude))model\x3d{field:model.getName(channel)};else a:if(encoding\x3d{channel:channel,channelDef:channelDef,channel2Def:channel2Def,markDef:markDef,config:config,isMidPoint:$jscomp$destructuring$var145,scaleName:scaleName,scale:scale,stack:stack,offset:offset,defaultRef:defaultPos},\nmarkDef\x3dencoding.channel,model\x3dencoding.channelDef,config\x3dencoding.isMidPoint,defaultPos\x3dencoding.scaleName,stack\x3dencoding.stack,$jscomp$destructuring$var145\x3dencoding.offset,channelDef\x3dencoding.markDef,channel2Def\x3dencoding.config,isFieldOrDatumDef(model)\x26\x26stack\x26\x26markDef\x3d\x3d\x3dstack.fieldChannel){if(isFieldDef(model)\x26\x26(encoding\x3dgetBand({channel:markDef,fieldDef:model,isMidPoint:config,markDef:channelDef,stack:stack,config:channel2Def}),void 0!\x3d\x3dencoding)){model\x3dinterpolatedSignalRef({scaleName:defaultPos,\nfieldOrDatumDef:model,startSuffix:\x22start\x22,band:encoding,offset:$jscomp$destructuring$var145});break a}model\x3dvalueRefForFieldOrDatumDef(model,defaultPos,{suffix:\x22end\x22},{offset:$jscomp$destructuring$var145})}else model\x3dmidPointRefWithPositionInvalidTest(encoding);defaultPos\x3d{};return model?(defaultPos[vgChannel||channel]\x3dmodel,defaultPos):void 0}function pointPositionDefaultRef($jscomp$destructuring$var149){var model\x3d$jscomp$destructuring$var149.model,defaultPos\x3d$jscomp$destructuring$var149.defaultPos,\nchannel\x3d$jscomp$destructuring$var149.channel,scaleName\x3d$jscomp$destructuring$var149.scaleName,scale\x3d$jscomp$destructuring$var149.scale,markDef\x3dmodel.markDef,config\x3dmodel.config;return function(){var mainChannel\x3dgetMainRangeChannel(channel),vgChannel\x3dgetVgPositionChannel(channel);vgChannel\x3dgetMarkPropOrConfig(channel,markDef,config,{vgChannel:vgChannel});if(void 0!\x3d\x3dvgChannel)return widthHeightValueOrSignalRef(channel,vgChannel);switch(defaultPos){case \x22zeroOrMin\x22:case \x22zeroOrMax\x22:if(scaleName\x26\x26(vgChannel\x3d\nscale.get(\x22type\x22),!contains([ScaleType.LOG,ScaleType.TIME,ScaleType.UTC],vgChannel)\x26\x26scale.domainDefinitelyIncludesZero()))return{scale:scaleName,value:0};if(\x22zeroOrMin\x22\x3d\x3d\x3ddefaultPos)return\x22y\x22\x3d\x3d\x3dmainChannel?{field:{group:\x22height\x22}}:{value:0};switch(mainChannel){case \x22radius\x22:return{signal:\x22min(\x22+model.width.signal+\x22,\x22+model.height.signal+\x22)/2\x22};case \x22theta\x22:return{signal:\x222*PI\x22};case \x22x\x22:return{field:{group:\x22width\x22}};case \x22y\x22:return{value:0}}break;case \x22mid\x22:return mainChannel\x3dmodel[getSizeChannel(channel)],\nObject.assign(Object.assign({},mainChannel),{mult:.5})}}}function vgAlignedPositionChannel(channel,markDef,config,defaultAlign){defaultAlign\x3dvoid 0\x3d\x3d\x3ddefaultAlign?\x22middle\x22:defaultAlign;if(\x22radius\x22\x3d\x3d\x3dchannel||\x22theta\x22\x3d\x3d\x3dchannel)return getVgPositionChannel(channel);markDef\x3dgetMarkPropOrConfig(\x22x\x22\x3d\x3d\x3dchannel?\x22align\x22:\x22baseline\x22,markDef,config);return\x22x\x22\x3d\x3d\x3dchannel?ALIGNED_X_CHANNEL[markDef||(\x22top\x22\x3d\x3d\x3ddefaultAlign?\x22left\x22:\x22center\x22)]:BASELINED_Y_CHANNEL[markDef||defaultAlign]}function pointOrRangePosition(channel,\nmodel,$jscomp$destructuring$var152){var defaultPos\x3d$jscomp$destructuring$var152.defaultPos,defaultPos2\x3d$jscomp$destructuring$var152.defaultPos2;return $jscomp$destructuring$var152.range?rangePosition(channel,model,{defaultPos:defaultPos,defaultPos2:defaultPos2}):pointPosition(channel,model,{defaultPos:defaultPos})}function rangePosition(channel,model,$jscomp$destructuring$var154){var defaultPos\x3d$jscomp$destructuring$var154.defaultPos,defaultPos2\x3d$jscomp$destructuring$var154.defaultPos2;$jscomp$destructuring$var154\x3d\nmodel.markDef;var config\x3dmodel.config,channel2\x3dgetSecondaryRangeChannel(channel),sizeChannel\x3dgetSizeChannel(channel);var encoding\x3dmodel.encoding,mark\x3dmodel.mark,markDef\x3dmodel.markDef,stack\x3dmodel.stack,config$jscomp$0\x3dmodel.config,baseChannel\x3dgetMainRangeChannel(channel2),sizeChannel$jscomp$0\x3dgetSizeChannel(channel2);var JSCompiler_inline_result\x3dgetVgPositionChannel(channel2);var channelDef\x3dencoding[baseChannel],scaleName\x3dmodel.scaleName(baseChannel),scale\x3dmodel.getScaleComponent(baseChannel);baseChannel\x3d\nchannel2 in encoding||channel2 in markDef?getOffset(channel2,model.markDef):getOffset(baseChannel,model.markDef);channelDef||\x22x2\x22!\x3d\x3dchannel2\x26\x26\x22y2\x22!\x3d\x3dchannel2||!encoding.latitude\x26\x26!encoding.longitude?(encoding\x3dencoding[channel2],stack\x3disFieldOrDatumDef(channelDef)\x26\x26stack\x26\x26channel2.charAt(0)\x3d\x3d\x3dstack.fieldChannel.charAt(0)?valueRefForFieldOrDatumDef(channelDef,scaleName,{suffix:\x22start\x22},{offset:baseChannel}):midPointRefWithPositionInvalidTest({channel:channel2,channelDef:encoding,scaleName:scaleName,\nscale:scale,stack:stack,markDef:markDef,config:config$jscomp$0,offset:baseChannel,defaultRef:void 0}),void 0!\x3d\x3dstack?(channel2\x3d{},JSCompiler_inline_result\x3d(channel2[JSCompiler_inline_result]\x3dstack,channel2)):(stack\x3d{},channelDef\x3d{},JSCompiler_inline_result\x3dposition2orSize(channel2,markDef)||position2orSize(channel2,(stack[channel2]\x3dgetMarkStyleConfig(channel2,markDef,config$jscomp$0.style),stack[sizeChannel$jscomp$0]\x3dgetMarkStyleConfig(sizeChannel$jscomp$0,markDef,config$jscomp$0.style),stack))||\nposition2orSize(channel2,config$jscomp$0[mark])||position2orSize(channel2,config$jscomp$0.mark)||(channelDef[JSCompiler_inline_result]\x3dpointPositionDefaultRef({model:model,defaultPos:defaultPos2,channel:channel2,scaleName:scaleName,scale:scale})(),channelDef))):(defaultPos2\x3d{},JSCompiler_inline_result\x3d(defaultPos2[JSCompiler_inline_result]\x3d{field:model.getName(channel2)},defaultPos2));$jscomp$destructuring$var154\x3dJSCompiler_inline_result[sizeChannel]?vgAlignedPositionChannel(channel,$jscomp$destructuring$var154,\nconfig):getVgPositionChannel(channel);return Object.assign(Object.assign({},pointPosition(channel,model,{defaultPos:defaultPos,vgChannel:$jscomp$destructuring$var154})),JSCompiler_inline_result)}function position2orSize(channel,markDef){var sizeChannel\x3dgetSizeChannel(channel),vgChannel\x3dgetVgPositionChannel(channel);if(void 0!\x3d\x3dmarkDef[vgChannel])return sizeChannel\x3d{},sizeChannel[vgChannel]\x3dwidthHeightValueOrSignalRef(channel,markDef[vgChannel]),sizeChannel;if(void 0!\x3d\x3dmarkDef[channel])return sizeChannel\x3d\n{},sizeChannel[vgChannel]\x3dwidthHeightValueOrSignalRef(channel,markDef[channel]),sizeChannel;if(markDef[sizeChannel])return vgChannel\x3d{},vgChannel[sizeChannel]\x3dwidthHeightValueOrSignalRef(channel,markDef[sizeChannel]),vgChannel}function rectPosition(model,channel,mark){var _a,_b,_c,_d,config\x3dmodel.config,encoding\x3dmodel.encoding,markDef\x3dmodel.markDef,stack\x3dmodel.stack,channel2\x3dgetSecondaryRangeChannel(channel),sizeChannel\x3dgetSizeChannel(channel),channelDef\x3dencoding[channel],channelDef2\x3dencoding[channel2],\nscale\x3dmodel.getScaleComponent(channel),scaleType\x3dscale?scale.get(\x22type\x22):void 0;channel2\x3dmodel.scaleName(channel);var orient\x3dmarkDef.orient;encoding\x3dnull!\x3d\x3d(_b\x3dnull!\x3d\x3d(_a\x3dencoding[sizeChannel])\x26\x26void 0!\x3d\x3d_a?_a:encoding.size)\x26\x26void 0!\x3d\x3d_b?_b:getMarkPropOrConfig(\x22size\x22,markDef,config,{vgChannel:sizeChannel});_a\x3d\x22bar\x22\x3d\x3d\x3dmark\x26\x26(\x22x\x22\x3d\x3d\x3dchannel?\x22vertical\x22\x3d\x3d\x3dorient:\x22horizontal\x22\x3d\x3d\x3dorient);if(isFieldDef(channelDef)\x26\x26(isBinning(channelDef.bin)||isBinned(channelDef.bin)||channelDef.timeUnit\x26\x26!channelDef2)\x26\x26!encoding\x26\x26\n!(scaleType in DISCRETE_DOMAIN_INDEX)){var band\x3dgetBand({channel:channel,fieldDef:channelDef,stack:stack,markDef:markDef,config:config});model\x3dnull\x3d\x3d\x3d(_c\x3dmodel.component.axes[channel])||void 0\x3d\x3d\x3d_c?void 0:_c[0];model\x3dnull!\x3d\x3d(_d\x3dnull\x3d\x3d\x3dmodel||void 0\x3d\x3d\x3dmodel?void 0:model.get(\x22translate\x22))\x26\x26void 0!\x3d\x3d_d?_d:.5;a:{var JSCompiler_object_inline_spacing_8108\x3dchannel in POSITION_SCALE_CHANNEL_INDEX?getMarkPropOrConfig(\x22binSpacing\x22,markDef,config):void 0;mark\x3dscale.get(\x22reverse\x22);JSCompiler_object_inline_spacing_8108\x3d\nvoid 0\x3d\x3d\x3dJSCompiler_object_inline_spacing_8108?0:JSCompiler_object_inline_spacing_8108;stack\x3dgetSecondaryRangeChannel(channel);_d\x3dgetVgPositionChannel(channel);scale\x3dgetVgPositionChannel(stack);_c\x3dgetOffset(channel,markDef);if(isBinning(channelDef.bin)||channelDef.timeUnit)channelDef2\x3d{},channel\x3d(channelDef2[scale]\x3drectBinRef({channel:channel,fieldDef:channelDef,scaleName:channel2,markDef:markDef,band:(1-band)/2,offset:getBinSpacing(stack,JSCompiler_object_inline_spacing_8108,mark,model,_c),config:config}),\nchannelDef2[_d]\x3drectBinRef({channel:channel,fieldDef:channelDef,scaleName:channel2,markDef:markDef,band:1-(1-band)/2,offset:getBinSpacing(channel,JSCompiler_object_inline_spacing_8108,mark,model,_c),config:config}),channelDef2);else{if(isBinned(channelDef.bin)){band\x3dvalueRefForFieldOrDatumDef(channelDef,channel2,{},{offset:getBinSpacing(stack,JSCompiler_object_inline_spacing_8108,mark,model,_c)});if(isFieldDef(channelDef2)){channelDef\x3d{};channel\x3d(channelDef[scale]\x3dband,channelDef[_d]\x3dvalueRefForFieldOrDatumDef(channelDef2,\nchannel2,{},{offset:getBinSpacing(channel,JSCompiler_object_inline_spacing_8108,mark,model,_c)}),channelDef);break a}if(isObject(channelDef.bin)\x26\x26channelDef.bin.step){config\x3d{};channel\x3d(config[scale]\x3dband,config[_d]\x3d{signal:\x27scale(\x22\x27+channel2+\x27\x22, \x27+vgField(channelDef,{expr:\x22datum\x22})+\x22 + \x22+channelDef.bin.step+\x22)\x22,offset:getBinSpacing(channel,JSCompiler_object_inline_spacing_8108,mark,model,_c)},config);break a}}warn(channelRequiredForBinned(stack));channel\x3dvoid 0}}return channel}if((isFieldOrDatumDef(channelDef)\x26\x26\nscaleType in DISCRETE_DOMAIN_INDEX||_a)\x26\x26!channelDef2){markDef\x3dmodel.markDef;stack\x3dmodel.encoding;channelDef2\x3dmodel.config;_d\x3dmodel.stack;_a\x3dmarkDef.orient;scale\x3dmodel.scaleName(channel);_c\x3dmodel.getScaleComponent(channel);channel2\x3dgetSizeChannel(channel);config\x3dgetSecondaryRangeChannel(channel);_a\x3d\x22horizontal\x22\x3d\x3d\x3d_a\x26\x26\x22y\x22\x3d\x3d\x3dchannel||\x22vertical\x22\x3d\x3d\x3d_a\x26\x26\x22x\x22\x3d\x3d\x3dchannel;_b\x3dgetMarkPropOrConfig(_a?\x22size\x22:channel2,markDef,channelDef2,{vgChannel:channel2});if(stack.size||void 0!\x3d\x3d_b)_a?band\x3dnonPosition(\x22size\x22,\nmodel,{vgChannel:channel2,defaultValue:_b}):warn(\x27Cannot apply size to non-oriented mark \x22\x27+markDef.type+\x27\x22.\x27);stack\x3dnull!\x3d\x3d(JSCompiler_object_inline_spacing_8108\x3disFieldOrDatumDef(channelDef)?getBand({channel:channel,fieldDef:channelDef,markDef:markDef,stack:_d,config:channelDef2}):void 0)\x26\x26void 0!\x3d\x3dJSCompiler_object_inline_spacing_8108?JSCompiler_object_inline_spacing_8108:1;JSCompiler_object_inline_spacing_8108\x3d{};band||(_c?(band\x3d_c.get(\x22type\x22),\x22point\x22\x3d\x3d\x3dband||\x22band\x22\x3d\x3d\x3dband?void 0!\x3d\x3dchannelDef2[mark].discreteBandSize?\nband\x3d{value:channelDef2[mark].discreteBandSize}:band\x3d\x3d\x3dScaleType.POINT?(band\x3d_c.get(\x22range\x22),band\x3disVgRangeStep(band)\x26\x26isNumber(band.step)?{value:band.step-2}:{value:18}):band\x3d{scale:scale,band:stack}:band\x3d{value:channelDef2[mark].continuousBandSize}):(band\x3dgetViewConfigDiscreteStep(channelDef2.view,channel2),band\x3dgetFirstDefined(channelDef2[mark].discreteBandSize,band-2),band\x3dvoid 0!\x3d\x3dband?{value:band}:void 0),band\x3d(JSCompiler_object_inline_spacing_8108[channel2]\x3dband,JSCompiler_object_inline_spacing_8108));\n_a\x3d\x22band\x22!\x3d\x3d(null\x3d\x3d\x3d_c||void 0\x3d\x3d\x3d_c?void 0:_c.get(\x22type\x22))||!(\x22band\x22in band[channel2]);mark\x3dvgAlignedPositionChannel(channel,markDef,channelDef2,_a?\x22middle\x22:\x22top\x22);JSCompiler_object_inline_spacing_8108\x3dgetOffset(channel,markDef);channel\x3dmidPointRefWithPositionInvalidTest({channel:channel,channelDef:channelDef,markDef:markDef,config:channelDef2,scaleName:scale,scale:_c,stack:_d,offset:JSCompiler_object_inline_spacing_8108,defaultRef:pointPositionDefaultRef({model:model,defaultPos:\x22mid\x22,channel:channel,\nscaleName:scale,scale:_c}),band:_a?.5:(1-stack)/2});channel2?(channelDef\x3d{},channel\x3dObject.assign((channelDef[mark]\x3dchannel,channelDef),band)):(channelDef\x3dgetVgPositionChannel(config),model\x3dband[channel2],model\x3dJSCompiler_object_inline_spacing_8108?Object.assign(Object.assign({},model),{offset:JSCompiler_object_inline_spacing_8108}):model,band\x3d{},channel\x3d(band[mark]\x3dchannel,band[channelDef]\x3disArray(channel)?[channel[0],Object.assign(Object.assign({},channel[1]),{offset:model})]:Object.assign(Object.assign({},\nchannel),{offset:model}),band));return channel}return rangePosition(channel,model,{defaultPos:\x22zeroOrMax\x22,defaultPos2:\x22zeroOrMin\x22})}function getBinSpacing(channel,spacing,reverse,translate,offset){if(channel in POLAR_POSITION_CHANNEL_INDEX)return 0;channel\x3d\x22x\x22\x3d\x3d\x3dchannel||\x22y2\x22\x3d\x3d\x3dchannel?-spacing/2:spacing/2;if(isSignalRef(reverse))return offset\x3dsignalOrStringValue(offset),{signal:reverse.signal+\x22 ? \x22+(translate-channel)+(offset?\x22-\x22+offset:\x22\x22)+\x22 : \x22+(translate+channel)+(offset?\x22+\x22+offset:\x22\x22)};if(isSignalRef(offset))return translate+\x3d\nreverse?-channel:channel,{signal:\x22\x22+(translate||\x22\x22)+(reverse?\x22 - \x22:translate?\x22 + \x22:\x22\x22)+offset.signal};offset\x3doffset||0;return translate+(reverse?-offset-channel:+offset+channel)}function rectBinRef($jscomp$destructuring$var164){var channel\x3d$jscomp$destructuring$var164.channel,fieldDef\x3d$jscomp$destructuring$var164.fieldDef,markDef\x3d$jscomp$destructuring$var164.markDef,config\x3d$jscomp$destructuring$var164.config;$jscomp$destructuring$var164\x3dinterpolatedSignalRef({scaleName:$jscomp$destructuring$var164.scaleName,\nfieldOrDatumDef:fieldDef,band:$jscomp$destructuring$var164.band,offset:$jscomp$destructuring$var164.offset});return wrapPositionInvalidTest({fieldDef:fieldDef,channel:channel,markDef:markDef,ref:$jscomp$destructuring$var164,config:config})}function baseEncodeEntry(model,ignore){var $jscomp$destructuring$var166\x3d\x22include\x22\x3d\x3d\x3dignore.color?color$jscomp$0(model):{},fill\x3dvoid 0\x3d\x3d\x3d$jscomp$destructuring$var166.fill?void 0:$jscomp$destructuring$var166.fill;$jscomp$destructuring$var166\x3dvoid 0\x3d\x3d\x3d$jscomp$destructuring$var166.stroke?\nvoid 0:$jscomp$destructuring$var166.stroke;return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},markDefProperties(model.markDef,ignore)),wrapAllFieldsInvalid(model,\x22fill\x22,fill)),wrapAllFieldsInvalid(model,\x22stroke\x22,$jscomp$destructuring$var166)),nonPosition(\x22opacity\x22,model)),nonPosition(\x22fillOpacity\x22,model)),nonPosition(\x22strokeOpacity\x22,model)),nonPosition(\x22strokeWidth\x22,model)),nonPosition(\x22strokeDash\x22,\nmodel)),tooltip(model)),text$jscomp$0(model,\x22href\x22)),aria(model))}function wrapAllFieldsInvalid(model,channel,valueRef){var mark\x3dmodel.mark;if(\x22hide\x22\x3d\x3d\x3dgetMarkPropOrConfig(\x22invalid\x22,model.markDef,model.config)\x26\x26valueRef\x26\x26!isPathMark(mark)\x26\x26(model\x3dallFieldsInvalidPredicate(model,{invalid:!0,channels:SCALE_CHANNELS})))return mark\x3d{},mark[channel]\x3d[{test:model,value:null}].concat($jscomp.arrayFromIterable(array$jscomp$0(valueRef))),mark;model\x3d{};return valueRef?(model[channel]\x3dvalueRef,model):{}}function markDefProperties(mark,\nignore){return VG_MARK_CONFIGS.reduce(function(m,prop){ALWAYS_IGNORE.has(prop)||void 0\x3d\x3d\x3dmark[prop]||\x22ignore\x22\x3d\x3d\x3dignore[prop]||(m[prop]\x3dsignalOrValueRef(mark[prop]));return m},{})}function allFieldsInvalidPredicate(model,$jscomp$destructuring$var168){var invalid\x3dvoid 0\x3d\x3d\x3d$jscomp$destructuring$var168.invalid?!1:$jscomp$destructuring$var168.invalid;$jscomp$destructuring$var168\x3d$jscomp$destructuring$var168.channels.reduce(function(aggregator,channel){var scaleComponent\x3dmodel.getScaleComponent(channel);\nscaleComponent\x26\x26(scaleComponent\x3dscaleComponent.get(\x22type\x22),(channel\x3dmodel.vgField(channel,{expr:\x22datum\x22}))\x26\x26scaleComponent in CONTINUOUS_DOMAIN_INDEX\x26\x26(aggregator[channel]\x3d!0));return aggregator},{});$jscomp$destructuring$var168\x3dkeys$jscomp$0($jscomp$destructuring$var168);if(0\x3c$jscomp$destructuring$var168.length){var op\x3dinvalid?\x22||\x22:\x22\\x26\\x26\x22;return $jscomp$destructuring$var168.map(function(field){return fieldInvalidPredicate(field,invalid)}).join(\x22 \x22+op+\x22 \x22)}}function defined(model){return getMarkPropOrConfig(\x22invalid\x22,\nmodel.markDef,model.config)\x26\x26(model\x3dallFieldsInvalidPredicate$1(model,{channels:POSITION_SCALE_CHANNELS}))?{defined:{signal:model}}:{}}function allFieldsInvalidPredicate$1(model,$jscomp$destructuring$var171){var invalid\x3dvoid 0\x3d\x3d\x3d$jscomp$destructuring$var171.invalid?!1:$jscomp$destructuring$var171.invalid;$jscomp$destructuring$var171\x3d$jscomp$destructuring$var171.channels.reduce(function(aggregator,channel){var scaleComponent\x3dmodel.getScaleComponent(channel);scaleComponent\x26\x26(scaleComponent\x3dscaleComponent.get(\x22type\x22),\n(channel\x3dmodel.vgField(channel,{expr:\x22datum\x22}))\x26\x26scaleComponent in CONTINUOUS_DOMAIN_INDEX\x26\x26(aggregator[channel]\x3d!0));return aggregator},{});$jscomp$destructuring$var171\x3dkeys$jscomp$0($jscomp$destructuring$var171);if(0\x3c$jscomp$destructuring$var171.length){var op\x3dinvalid?\x22||\x22:\x22\\x26\\x26\x22;return $jscomp$destructuring$var171.map(function(field){return fieldInvalidPredicate(field,invalid)}).join(\x22 \x22+op+\x22 \x22)}}function valueIfDefined(prop,value){if(void 0!\x3d\x3dvalue){var $jscomp$compprop27\x3d{};return $jscomp$compprop27[prop]\x3d\nsignalOrValueRef(value),$jscomp$compprop27}}function isTopLevelLayer(model){var _a;return model.parent\x26\x26isLayerModel(model.parent)\x26\x26(null!\x3d\x3d(_a\x3d!model.parent.parent)\x26\x26void 0!\x3d\x3d_a?_a:isTopLevelLayer(model.parent.parent))}function parseInteractiveLegend(model,channel,legendCmpt){var _a$jscomp$0,field\x3dnull\x3d\x3d\x3d(_a$jscomp$0\x3dmodel.fieldDef(channel))||void 0\x3d\x3d\x3d_a$jscomp$0?void 0:_a$jscomp$0.field;forEachSelection(model,function(selCmpt){var _a,_b,proj\x3dnull!\x3d\x3d(_a\x3dselCmpt.project.hasField[field])\x26\x26void 0!\x3d\x3d\n_a?_a:selCmpt.project.hasChannel[channel];proj\x26\x26legendBindings.has(selCmpt)\x26\x26(_a\x3dnull!\x3d\x3d(_b\x3dlegendCmpt.get(\x22selections\x22))\x26\x26void 0!\x3d\x3d_b?_b:[],_a.push(selCmpt.name),legendCmpt.set(\x22selections\x22,_a,!1),proj.hasLegend\x3d!0)})}function onDelta(model,selCmpt,proj,size,signals){var _a,name\x3dselCmpt.name,anchor\x3dname+\x22_translate_anchor\x22;name+\x3d\x22_translate_delta\x22;var channel\x3dproj.channel,hasScales\x3dscaleBindings.has(selCmpt);selCmpt\x3dsignals.filter(function(s){return s.name\x3d\x3d\x3dproj.signals[hasScales?\x22data\x22:\x22visual\x22]})[0];\nsize\x3dmodel.getSizeSignalRef(size).signal;model\x3dmodel.getScaleComponent(channel);signals\x3dmodel.get(\x22type\x22);anchor\x3danchor+\x22.extent_\x22+channel;anchor\x3d(hasScales?\x22log\x22\x3d\x3d\x3dsignals?\x22panLog\x22:\x22pow\x22\x3d\x3d\x3dsignals?\x22panPow\x22:\x22panLinear\x22:\x22panLinear\x22)+\x22(\x22+anchor+\x22, \x22+((hasScales\x26\x26\x22x\x22\x3d\x3d\x3dchannel?\x22-\x22:\x22\x22)+name+\x22.\x22+channel+\x22 / \x22+(hasScales?\x22\x22+size:\x22span(\x22+anchor+\x22)\x22))+(hasScales\x26\x26\x22pow\x22\x3d\x3d\x3dsignals?\x22, \x22+(null!\x3d\x3d(_a\x3dmodel.get(\x22exponent\x22))\x26\x26void 0!\x3d\x3d_a?_a:1):\x22\x22)+\x22)\x22;selCmpt.on.push({events:{signal:name},update:hasScales?anchor:\n\x22clampRange(\x22+anchor+\x22, 0, \x22+size+\x22)\x22})}function onDelta$1(model,selCmpt,proj,size,signals){var _a,name\x3dselCmpt.name,channel\x3dproj.channel,hasScales\x3dscaleBindings.has(selCmpt);selCmpt\x3dsignals.filter(function(s){return s.name\x3d\x3d\x3dproj.signals[hasScales?\x22data\x22:\x22visual\x22]})[0];size\x3dmodel.getSizeSignalRef(size).signal;signals\x3dmodel.getScaleComponent(channel);var scaleType\x3dsignals.get(\x22type\x22),base\x3dhasScales?\x22domain(\x22+$(model.scaleName(channel))+\x22)\x22:selCmpt.name;model\x3dname+\x22_zoom_delta\x22;name\x3d(hasScales?\x22log\x22\x3d\x3d\x3d\nscaleType?\x22zoomLog\x22:\x22pow\x22\x3d\x3d\x3dscaleType?\x22zoomPow\x22:\x22zoomLinear\x22:\x22zoomLinear\x22)+\x22(\x22+base+\x22, \x22+(name+\x22_zoom_anchor.\x22+channel)+\x22, \x22+model+(hasScales\x26\x26\x22pow\x22\x3d\x3d\x3dscaleType?\x22, \x22+(null!\x3d\x3d(_a\x3dsignals.get(\x22exponent\x22))\x26\x26void 0!\x3d\x3d_a?_a:1):\x22\x22)+\x22)\x22;selCmpt.on.push({events:{signal:model},update:hasScales?name:\x22clampRange(\x22+name+\x22, 0, \x22+size+\x22)\x22})}function forEachTransform(selCmpt,cb){for(var $jscomp$iter$123\x3d$jscomp.makeIterator(compilers),$jscomp$key$t\x3d$jscomp$iter$123.next();!$jscomp$key$t.done;$jscomp$key$t\x3d$jscomp$iter$123.next())$jscomp$key$t\x3d\n$jscomp$key$t.value,$jscomp$key$t.has(selCmpt)\x26\x26cb($jscomp$key$t)}function assembleInit(init,isExpr,wrap){isExpr\x3dvoid 0\x3d\x3d\x3disExpr?!0:isExpr;wrap\x3dvoid 0\x3d\x3d\x3dwrap?identity:wrap;return isArray(init)?(init\x3dinit.map(function(v){return assembleInit(v,isExpr,wrap)}),isExpr?\x22[\x22+init.join(\x22, \x22)+\x22]\x22:init):isDateTime(init)?isExpr?wrap(dateTimeToExpr(init)):wrap(dateTimeToTimestamp(init)):isExpr?wrap(JSON.stringify(init)):init}function assembleUnitSelectionSignals(model,signals){forEachSelection(model,function(selCmpt,\nselCompiler){var name\x3dselCmpt.name,modifyExpr\x3dselCompiler.modifyExpr(model,selCmpt);signals.push.apply(signals,$jscomp.arrayFromIterable(selCompiler.signals(model,selCmpt)));forEachTransform(selCmpt,function(txCompiler){txCompiler.signals\x26\x26(signals\x3dtxCompiler.signals(model,selCmpt,signals));txCompiler.modifyExpr\x26\x26(modifyExpr\x3dtxCompiler.modifyExpr(model,selCmpt,modifyExpr))});signals.push({name:name+\x22_modify\x22,on:[{events:{signal:selCmpt.name+\x22_tuple\x22},update:\x22modify(\x22+$(selCmpt.name+\x22_store\x22)+\x22, \x22+\nmodifyExpr+\x22)\x22}]})});return cleanupEmptyOnArray(signals)}function assembleFacetSignals(model,signals){model.component.selection\x26\x26keys$jscomp$0(model.component.selection).length\x26\x26(model\x3d$(model.getName(\x22cell\x22)),signals.unshift({name:\x22facet\x22,value:{},on:[{events:parseSelector(\x22mousemove\x22,\x22scope\x22),update:\x22isTuple(facet) ? facet : group(\x22+model+\x22).datum\x22}]}));return cleanupEmptyOnArray(signals)}function assembleTopLevelSignals(model,signals){var hasSelections\x3d!1;forEachSelection(model,function(selCmpt,\nselCompiler){var name\x3dselCmpt.name,store\x3d$(name+\x22_store\x22);if(0\x3d\x3d\x3dsignals.filter(function(s){return s.name\x3d\x3d\x3dname}).length){var isMulti\x3d\x22multi\x22\x3d\x3d\x3dselCmpt.type?\x22, true)\x22:\x22)\x22;signals.push({name:selCmpt.name,update:\x22vlSelectionResolve(\x22+store+\x22, \x22+$(\x22global\x22\x3d\x3d\x3dselCmpt.resolve?\x22union\x22:selCmpt.resolve)+isMulti})}hasSelections\x3d!0;selCompiler.topLevelSignals\x26\x26(signals\x3dselCompiler.topLevelSignals(model,selCmpt,signals));forEachTransform(selCmpt,function(txCompiler){txCompiler.topLevelSignals\x26\x26(signals\x3dtxCompiler.topLevelSignals(model,\nselCmpt,signals))})});hasSelections\x26\x260\x3d\x3d\x3dsignals.filter(function(s){return\x22unit\x22\x3d\x3d\x3ds.name}).length\x26\x26signals.unshift({name:\x22unit\x22,value:{},on:[{events:\x22mousemove\x22,update:\x22isTuple(group()) ? group() : unit\x22}]});return cleanupEmptyOnArray(signals)}function assembleUnitSelectionData(model,data){var dataCopy\x3d[].concat($jscomp.arrayFromIterable(data));forEachSelection(model,function(selCmpt){var init\x3d{name:selCmpt.name+\x22_store\x22};if(selCmpt.init){var fields\x3dselCmpt.project.items.map(function(proj){return __rest(proj,\n[\x22signals\x22])}),insert\x3dselCmpt.init.map(function(i){return assembleInit(i,!1)});init.values\x3d\x22interval\x22\x3d\x3d\x3dselCmpt.type?[{unit:unitName(model,{escape:!1}),fields:fields,values:insert}]:insert.map(function(i){return{unit:unitName(model,{escape:!1}),fields:fields,values:i}})}dataCopy.filter(function(d){return d.name\x3d\x3d\x3dselCmpt.name+\x22_store\x22}).length||dataCopy.push(init)});return dataCopy}function assembleUnitSelectionMarks(model,marks){forEachSelection(model,function(selCmpt,selCompiler){marks\x3dselCompiler.marks?\nselCompiler.marks(model,selCmpt,marks):marks;forEachTransform(selCmpt,function(txCompiler){txCompiler.marks\x26\x26(marks\x3dtxCompiler.marks(model,selCmpt,marks))})});return marks}function assembleLayerSelectionMarks(model,marks){model\x3d$jscomp.makeIterator(model.children);for(var $jscomp$key$child\x3dmodel.next();!$jscomp$key$child.done;$jscomp$key$child\x3dmodel.next())$jscomp$key$child\x3d$jscomp$key$child.value,isUnitModel($jscomp$key$child)\x26\x26(marks\x3dassembleUnitSelectionMarks($jscomp$key$child,marks));return marks}\nfunction cleanupEmptyOnArray(signals){return signals.map(function(s){s.on\x26\x26!s.on.length\x26\x26delete s.on;return s})}function channelSignals(model,selCmpt,proj,init){var channel\x3dproj.channel,vname\x3dproj.signals.visual;proj\x3dproj.signals.data;var hasScales\x3dscaleBindings.has(selCmpt),scaleName\x3d$(model.scaleName(channel)),scale\x3dmodel.getScaleComponent(channel);scale\x3dscale?scale.get(\x22type\x22):void 0;var scaled\x3dfunction(str){return\x22scale(\x22+scaleName+\x22, \x22+str+\x22)\x22},size\x3dmodel.getSizeSignalRef(\x22x\x22\x3d\x3d\x3dchannel?\x22width\x22:\n\x22height\x22).signal,coord\x3dchannel+\x22(unit)\x22;model\x3devents$jscomp$0(selCmpt,function(def,evt){return[].concat($jscomp.arrayFromIterable(def),[{events:evt.between[0],update:\x22[\x22+coord+\x22, \x22+coord+\x22]\x22},{events:evt,update:\x22[\x22+vname+\x22[0], clamp(\x22+coord+\x22, 0, \x22+size+\x22)]\x22}])});model.push({events:{signal:selCmpt.name+\x22_scale_trigger\x22},update:scale in CONTINUOUS_DOMAIN_INDEX?\x22[\x22+scaled(proj+\x22[0]\x22)+\x22, \x22+scaled(proj+\x22[1]\x22)+\x22]\x22:\x22[0, 0]\x22});return hasScales?[{name:proj,on:[]}]:[Object.assign(Object.assign({name:vname},\ninit?{init:assembleInit(init,!0,scaled)}:{value:[]}),{on:model}),Object.assign(Object.assign({name:proj},init?{init:assembleInit(init)}:{}),{on:[{events:{signal:vname},update:vname+\x22[0] \\x3d\\x3d\\x3d \x22+vname+\x22[1] ? null : invert(\x22+scaleName+\x22, \x22+vname+\x22)\x22}]})]}function events$jscomp$0(selCmpt,cb){return selCmpt.events.reduce(function(on,evt){return evt.between?cb(on,evt):(warn(evt+\x22 is not an ordered event stream for interval selections.\x22),on)},[])}function singleOrMultiSignals(model,selCmpt){var name\x3d\nselCmpt.name,fieldsSg\x3dname+\x22_tuple_fields\x22,values\x3dselCmpt.project.items.map(function(p){var fieldDef\x3dmodel.fieldDef(p.channel);return fieldDef\x26\x26fieldDef.bin?\x22[(item().isVoronoi ? datum.datum : datum)[\x22+$(model.vgField(p.channel,{}))+\x22], (item().isVoronoi ? datum.datum : datum)[\x22+($(model.vgField(p.channel,{binSuffix:\x22end\x22}))+\x22]]\x22):\x22(item().isVoronoi ? datum.datum : datum)[\x22+$(p.field)+\x22]\x22}).join(\x22, \x22);fieldsSg\x3d\x22unit: \x22+unitName(model)+\x22, fields: \x22+fieldsSg+\x22, values\x22;selCmpt\x3dselCmpt.events;return[{name:name+\n\x22_tuple\x22,on:selCmpt?[{events:selCmpt,update:\x22datum \\x26\\x26 item().mark.marktype !\\x3d\\x3d \x27group\x27 ? {\x22+fieldsSg+\x22: [\x22+values+\x22]} : null\x22,force:!0}]:[]}]}function forEachSelection(model,cb){if(model\x3dmodel.component.selection){model\x3d$jscomp.makeIterator(vals(model));for(var $jscomp$key$sel\x3dmodel.next();!$jscomp$key$sel.done\x26\x26($jscomp$key$sel\x3d$jscomp$key$sel.value,!0!\x3d\x3dcb($jscomp$key$sel,compilers$1[$jscomp$key$sel.type]));$jscomp$key$sel\x3dmodel.next());}}function unitName(model,$jscomp$destructuring$var182){$jscomp$destructuring$var182\x3d\n(void 0\x3d\x3d\x3d$jscomp$destructuring$var182?{escape:!0}:$jscomp$destructuring$var182).escape?$(model.name):model.name;for(model\x3dmodel.parent;model\x26\x26!isFacetModel(model);)model\x3dmodel.parent;if(model)for(var facet\x3dmodel.facet,$jscomp$iter$127\x3d$jscomp.makeIterator(FACET_CHANNELS),$jscomp$key$channel\x3d$jscomp$iter$127.next();!$jscomp$key$channel.done;$jscomp$key$channel\x3d$jscomp$iter$127.next())$jscomp$key$channel\x3d$jscomp$key$channel.value,facet[$jscomp$key$channel]\x26\x26($jscomp$destructuring$var182+\x3d\x22 + \x27__facet_\x22+\n$jscomp$key$channel+\x22_\x27 + (facet[\x22+$(model.vgField($jscomp$key$channel))+\x22])\x22);return $jscomp$destructuring$var182}function requiresSelectionId(model){var identifier\x3d!1;forEachSelection(model,function(selCmpt){identifier\x3didentifier||selCmpt.project.items.some(function(proj){return\x22_vgsid_\x22\x3d\x3d\x3dproj.field})});return identifier}function ASTNode(type){this.type\x3dtype}function children$jscomp$0(node){switch(node.type){case \x22ArrayExpression\x22:return node.elements;case \x22BinaryExpression\x22:case \x22LogicalExpression\x22:return[node.left,\nnode.right];case \x22CallExpression\x22:var args\x3dnode.arguments.slice();args.unshift(node.callee);return args;case \x22ConditionalExpression\x22:return[node.test,node.consequent,node.alternate];case \x22MemberExpression\x22:return[node.object,node.property];case \x22ObjectExpression\x22:return node.properties;case \x22Property\x22:return[node.key,node.value];case \x22UnaryExpression\x22:return[node.argument];default:return[]}}function assert(condition,message){if(!condition)throw Error(\x22ASSERT: \x22+message);}function isDecimalDigit(ch){return 48\x3c\x3d\nch\x26\x2657\x3e\x3dch}function isHexDigit(ch){return 0\x3c\x3d\x220123456789abcdefABCDEF\x22.indexOf(ch)}function isOctalDigit(ch){return 0\x3c\x3d\x2201234567\x22.indexOf(ch)}function isLineTerminator(ch){return 10\x3d\x3d\x3dch||13\x3d\x3d\x3dch||8232\x3d\x3d\x3dch||8233\x3d\x3d\x3dch}function isIdentifierStart(ch){return 36\x3d\x3d\x3dch||95\x3d\x3d\x3dch||65\x3c\x3dch\x26\x2690\x3e\x3dch||97\x3c\x3dch\x26\x26122\x3e\x3dch||92\x3d\x3d\x3dch||128\x3c\x3dch\x26\x26RegexNonAsciiIdentifierStart.test(String.fromCharCode(ch))}function isIdentifierPart(ch){return 36\x3d\x3d\x3dch||95\x3d\x3d\x3dch||65\x3c\x3dch\x26\x2690\x3e\x3dch||97\x3c\x3dch\x26\x26122\x3e\x3dch||48\x3c\x3dch\x26\x2657\x3e\x3dch||92\x3d\x3d\x3dch||128\x3c\x3d\nch\x26\x26RegexNonAsciiIdentifierPart.test(String.fromCharCode(ch))}function skipComment(){for(var ch;index$jscomp$0\x3clength$jscomp$0;)if(ch\x3dsource$jscomp$0.charCodeAt(index$jscomp$0),32\x3d\x3d\x3dch||9\x3d\x3d\x3dch||11\x3d\x3d\x3dch||12\x3d\x3d\x3dch||160\x3d\x3d\x3dch||5760\x3c\x3dch\x26\x260\x3c\x3d[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].indexOf(ch)||isLineTerminator(ch))++index$jscomp$0;else break}function scanHexEscape(prefix){var code\x3d0;var len\x3d\x22u\x22\x3d\x3d\x3dprefix?4:2;for(prefix\x3d0;prefix\x3clen;++prefix)if(index$jscomp$0\x3c\nlength$jscomp$0\x26\x26isHexDigit(source$jscomp$0[index$jscomp$0])){var ch\x3dsource$jscomp$0[index$jscomp$0++];code\x3d16*code+\x220123456789abcdef\x22.indexOf(ch.toLowerCase())}else throwError({},\x22Unexpected token %0\x22,\x22ILLEGAL\x22);return String.fromCharCode(code)}function getEscapedIdentifier(){var ch\x3dsource$jscomp$0.charCodeAt(index$jscomp$0++);var id\x3dString.fromCharCode(ch);92\x3d\x3d\x3dch\x26\x26(117!\x3d\x3dsource$jscomp$0.charCodeAt(index$jscomp$0)\x26\x26throwError({},\x22Unexpected token %0\x22,\x22ILLEGAL\x22),++index$jscomp$0,(ch\x3dscanHexEscape(\x22u\x22))\x26\x26\n\x22\\\\\x22!\x3d\x3dch\x26\x26isIdentifierStart(ch.charCodeAt(0))||throwError({},\x22Unexpected token %0\x22,\x22ILLEGAL\x22),id\x3dch);for(;index$jscomp$0\x3clength$jscomp$0;){ch\x3dsource$jscomp$0.charCodeAt(index$jscomp$0);if(!isIdentifierPart(ch))break;++index$jscomp$0;id+\x3dString.fromCharCode(ch);92\x3d\x3d\x3dch\x26\x26(id\x3did.substr(0,id.length-1),117!\x3d\x3dsource$jscomp$0.charCodeAt(index$jscomp$0)\x26\x26throwError({},\x22Unexpected token %0\x22,\x22ILLEGAL\x22),++index$jscomp$0,(ch\x3dscanHexEscape(\x22u\x22))\x26\x26\x22\\\\\x22!\x3d\x3dch\x26\x26isIdentifierPart(ch.charCodeAt(0))||throwError({},\x22Unexpected token %0\x22,\n\x22ILLEGAL\x22),id+\x3dch)}return id}function scanPunctuator(){var start\x3dindex$jscomp$0,code\x3dsource$jscomp$0.charCodeAt(index$jscomp$0),ch1\x3dsource$jscomp$0[index$jscomp$0];switch(code){case 46:case 40:case 41:case 59:case 44:case 123:case 125:case 91:case 93:case 58:case 63:case 126:return++index$jscomp$0,{type:7,value:String.fromCharCode(code),start:start,end:index$jscomp$0};default:var code2\x3dsource$jscomp$0.charCodeAt(index$jscomp$0+1);if(61\x3d\x3d\x3dcode2)switch(code){case 43:case 45:case 47:case 60:case 62:case 94:case 124:case 37:case 38:case 42:return index$jscomp$0+\x3d\n2,{type:7,value:String.fromCharCode(code)+String.fromCharCode(code2),start:start,end:index$jscomp$0};case 33:case 61:return index$jscomp$0+\x3d2,61\x3d\x3d\x3dsource$jscomp$0.charCodeAt(index$jscomp$0)\x26\x26++index$jscomp$0,{type:7,value:source$jscomp$0.slice(start,index$jscomp$0),start:start,end:index$jscomp$0}}}code\x3dsource$jscomp$0.substr(index$jscomp$0,4);if(\x22\\x3e\\x3e\\x3e\\x3d\x22\x3d\x3d\x3dcode)return index$jscomp$0+\x3d4,{type:7,value:code,start:start,end:index$jscomp$0};code\x3dcode.substr(0,3);if(\x22\\x3e\\x3e\\x3e\x22\x3d\x3d\x3dcode||\x22\\x3c\\x3c\\x3d\x22\x3d\x3d\x3d\ncode||\x22\\x3e\\x3e\\x3d\x22\x3d\x3d\x3dcode)return index$jscomp$0+\x3d3,{type:7,value:code,start:start,end:index$jscomp$0};code\x3dcode.substr(0,2);if(ch1\x3d\x3d\x3dcode[1]\x26\x260\x3c\x3d\x22+-\\x3c\\x3e\\x26|\x22.indexOf(ch1)||\x22\\x3d\\x3e\x22\x3d\x3d\x3dcode)return index$jscomp$0+\x3d2,{type:7,value:code,start:start,end:index$jscomp$0};if(0\x3c\x3d\x22\\x3c\\x3e\\x3d!+-*%\\x26|^/\x22.indexOf(ch1))return++index$jscomp$0,{type:7,value:ch1,start:start,end:index$jscomp$0};throwError({},\x22Unexpected token %0\x22,\x22ILLEGAL\x22)}function scanNumericLiteral(){var ch\x3dsource$jscomp$0[index$jscomp$0];\nassert(isDecimalDigit(ch.charCodeAt(0))||\x22.\x22\x3d\x3d\x3dch,\x22Numeric literal must start with a decimal digit or a decimal point\x22);var start\x3dindex$jscomp$0;var number\x3d\x22\x22;if(\x22.\x22!\x3d\x3dch){number\x3dsource$jscomp$0[index$jscomp$0++];ch\x3dsource$jscomp$0[index$jscomp$0];if(\x220\x22\x3d\x3d\x3dnumber){if(\x22x\x22\x3d\x3d\x3dch||\x22X\x22\x3d\x3d\x3dch){++index$jscomp$0;for(number\x3d\x22\x22;index$jscomp$0\x3clength$jscomp$0\x26\x26isHexDigit(source$jscomp$0[index$jscomp$0]);)number+\x3dsource$jscomp$0[index$jscomp$0++];0\x3d\x3d\x3dnumber.length\x26\x26throwError({},\x22Unexpected token %0\x22,\x22ILLEGAL\x22);\nisIdentifierStart(source$jscomp$0.charCodeAt(index$jscomp$0))\x26\x26throwError({},\x22Unexpected token %0\x22,\x22ILLEGAL\x22);return{type:6,value:parseInt(\x220x\x22+number,16),start:start,end:index$jscomp$0}}if(isOctalDigit(ch)){for(number\x3d\x220\x22+source$jscomp$0[index$jscomp$0++];index$jscomp$0\x3clength$jscomp$0\x26\x26isOctalDigit(source$jscomp$0[index$jscomp$0]);)number+\x3dsource$jscomp$0[index$jscomp$0++];(isIdentifierStart(source$jscomp$0.charCodeAt(index$jscomp$0))||isDecimalDigit(source$jscomp$0.charCodeAt(index$jscomp$0)))\x26\x26\nthrowError({},\x22Unexpected token %0\x22,\x22ILLEGAL\x22);return{type:6,value:parseInt(number,8),octal:!0,start:start,end:index$jscomp$0}}ch\x26\x26isDecimalDigit(ch.charCodeAt(0))\x26\x26throwError({},\x22Unexpected token %0\x22,\x22ILLEGAL\x22)}for(;isDecimalDigit(source$jscomp$0.charCodeAt(index$jscomp$0));)number+\x3dsource$jscomp$0[index$jscomp$0++];ch\x3dsource$jscomp$0[index$jscomp$0]}if(\x22.\x22\x3d\x3d\x3dch){for(number+\x3dsource$jscomp$0[index$jscomp$0++];isDecimalDigit(source$jscomp$0.charCodeAt(index$jscomp$0));)number+\x3dsource$jscomp$0[index$jscomp$0++];\nch\x3dsource$jscomp$0[index$jscomp$0]}if(\x22e\x22\x3d\x3d\x3dch||\x22E\x22\x3d\x3d\x3dch){number+\x3dsource$jscomp$0[index$jscomp$0++];ch\x3dsource$jscomp$0[index$jscomp$0];if(\x22+\x22\x3d\x3d\x3dch||\x22-\x22\x3d\x3d\x3dch)number+\x3dsource$jscomp$0[index$jscomp$0++];if(isDecimalDigit(source$jscomp$0.charCodeAt(index$jscomp$0)))for(;isDecimalDigit(source$jscomp$0.charCodeAt(index$jscomp$0));)number+\x3dsource$jscomp$0[index$jscomp$0++];else throwError({},\x22Unexpected token %0\x22,\x22ILLEGAL\x22)}isIdentifierStart(source$jscomp$0.charCodeAt(index$jscomp$0))\x26\x26throwError({},\x22Unexpected token %0\x22,\n\x22ILLEGAL\x22);return{type:6,value:parseFloat(number),start:start,end:index$jscomp$0}}function testRegExp(pattern,flags){var tmp\x3dpattern;0\x3c\x3dflags.indexOf(\x22u\x22)\x26\x26(tmp\x3dtmp.replace(/\\\\u\\{([0-9a-fA-F]+)\\}/g,function($0,$1){if(1114111\x3e\x3dparseInt($1,16))return\x22x\x22;throwError({},\x22Invalid regular expression\x22)}).replace(/[\\uD800-\\uDBFF][\\uDC00-\\uDFFF]/g,\x22x\x22));try{new RegExp(tmp)}catch(e){throwError({},\x22Invalid regular expression\x22)}try{return new RegExp(pattern,flags)}catch(exception){return null}}function advance(){skipComment();\nif(index$jscomp$0\x3e\x3dlength$jscomp$0)return{type:2,start:index$jscomp$0,end:index$jscomp$0};var ch\x3dsource$jscomp$0.charCodeAt(index$jscomp$0);if(isIdentifierStart(ch)){ch\x3dindex$jscomp$0;if(92\x3d\x3d\x3dsource$jscomp$0.charCodeAt(index$jscomp$0))var id\x3dgetEscapedIdentifier();else a:{for(id\x3dindex$jscomp$0++;index$jscomp$0\x3clength$jscomp$0;){var ch$jscomp$0\x3dsource$jscomp$0.charCodeAt(index$jscomp$0);if(92\x3d\x3d\x3dch$jscomp$0){index$jscomp$0\x3did;id\x3dgetEscapedIdentifier();break a}if(isIdentifierPart(ch$jscomp$0))++index$jscomp$0;\nelse break}id\x3dsource$jscomp$0.slice(id,index$jscomp$0)}return{type:1\x3d\x3d\x3did.length?3:keywords.hasOwnProperty(id)?4:\x22null\x22\x3d\x3d\x3did?5:\x22true\x22\x3d\x3d\x3did||\x22false\x22\x3d\x3d\x3did?1:3,value:id,start:ch,end:index$jscomp$0}}if(40\x3d\x3d\x3dch||41\x3d\x3d\x3dch||59\x3d\x3d\x3dch)return scanPunctuator();if(39\x3d\x3d\x3dch||34\x3d\x3d\x3dch){var str\x3d\x22\x22;ch$jscomp$0\x3d!1;ch\x3dsource$jscomp$0[index$jscomp$0];assert(\x22\x27\x22\x3d\x3d\x3dch||\x27\x22\x27\x3d\x3d\x3dch,\x22String literal must starts with a quote\x22);id\x3dindex$jscomp$0;for(++index$jscomp$0;index$jscomp$0\x3clength$jscomp$0;){var ch$jscomp$1\x3dsource$jscomp$0[index$jscomp$0++];\nif(ch$jscomp$1\x3d\x3d\x3dch){ch\x3d\x22\x22;break}else if(\x22\\\\\x22\x3d\x3d\x3dch$jscomp$1)if((ch$jscomp$1\x3dsource$jscomp$0[index$jscomp$0++])\x26\x26isLineTerminator(ch$jscomp$1.charCodeAt(0)))\x22\\r\x22\x3d\x3d\x3dch$jscomp$1\x26\x26\x22\\n\x22\x3d\x3d\x3dsource$jscomp$0[index$jscomp$0]\x26\x26++index$jscomp$0;else switch(ch$jscomp$1){case \x22u\x22:case \x22x\x22:if(\x22{\x22\x3d\x3d\x3dsource$jscomp$0[index$jscomp$0]){++index$jscomp$0;var code\x3dsource$jscomp$0[index$jscomp$0];ch$jscomp$1\x3d0;for(\x22}\x22\x3d\x3d\x3dcode\x26\x26throwError({},\x22Unexpected token %0\x22,\x22ILLEGAL\x22);index$jscomp$0\x3clength$jscomp$0;){code\x3dsource$jscomp$0[index$jscomp$0++];\nif(!isHexDigit(code))break;ch$jscomp$1\x3d16*ch$jscomp$1+\x220123456789abcdef\x22.indexOf(code.toLowerCase())}(1114111\x3cch$jscomp$1||\x22}\x22!\x3d\x3dcode)\x26\x26throwError({},\x22Unexpected token %0\x22,\x22ILLEGAL\x22);ch$jscomp$1\x3d65535\x3e\x3dch$jscomp$1?String.fromCharCode(ch$jscomp$1):String.fromCharCode((ch$jscomp$1-65536\x3e\x3e10)+55296,(ch$jscomp$1-65536\x261023)+56320);str+\x3dch$jscomp$1}else str+\x3dscanHexEscape(ch$jscomp$1);break;case \x22n\x22:str+\x3d\x22\\n\x22;break;case \x22r\x22:str+\x3d\x22\\r\x22;break;case \x22t\x22:str+\x3d\x22\\t\x22;break;case \x22b\x22:str+\x3d\x22\\b\x22;break;case \x22f\x22:str+\x3d\n\x22\\f\x22;break;case \x22v\x22:str+\x3d\x22\\x0B\x22;break;default:isOctalDigit(ch$jscomp$1)?(code\x3d\x2201234567\x22.indexOf(ch$jscomp$1),0!\x3d\x3dcode\x26\x26(ch$jscomp$0\x3d!0),index$jscomp$0\x3clength$jscomp$0\x26\x26isOctalDigit(source$jscomp$0[index$jscomp$0])\x26\x26(ch$jscomp$0\x3d!0,code\x3d8*code+\x2201234567\x22.indexOf(source$jscomp$0[index$jscomp$0++]),0\x3c\x3d\x220123\x22.indexOf(ch$jscomp$1)\x26\x26index$jscomp$0\x3clength$jscomp$0\x26\x26isOctalDigit(source$jscomp$0[index$jscomp$0])\x26\x26(code\x3d8*code+\x2201234567\x22.indexOf(source$jscomp$0[index$jscomp$0++]))),str+\x3dString.fromCharCode(code)):\nstr+\x3dch$jscomp$1}else if(isLineTerminator(ch$jscomp$1.charCodeAt(0)))break;else str+\x3dch$jscomp$1}\x22\x22!\x3d\x3dch\x26\x26throwError({},\x22Unexpected token %0\x22,\x22ILLEGAL\x22);return{type:8,value:str,octal:ch$jscomp$0,start:id,end:index$jscomp$0}}return 46\x3d\x3d\x3dch?isDecimalDigit(source$jscomp$0.charCodeAt(index$jscomp$0+1))?scanNumericLiteral():scanPunctuator():isDecimalDigit(ch)?scanNumericLiteral():scanPunctuator()}function lex(){var token\x3dlookahead;index$jscomp$0\x3dtoken.end;lookahead\x3dadvance();index$jscomp$0\x3dtoken.end;return token}\nfunction peek(){var pos\x3dindex$jscomp$0;lookahead\x3dadvance();index$jscomp$0\x3dpos}function finishBinaryExpression(operator,left,right){var node\x3dnew ASTNode(\x22||\x22\x3d\x3d\x3doperator||\x22\\x26\\x26\x22\x3d\x3d\x3doperator?\x22LogicalExpression\x22:\x22BinaryExpression\x22);node.operator\x3doperator;node.left\x3dleft;node.right\x3dright;return node}function finishIdentifier(name){var node\x3dnew ASTNode(\x22Identifier\x22);node.name\x3dname;return node}function finishLiteral(token){var node\x3dnew ASTNode(\x22Literal\x22);node.value\x3dtoken.value;node.raw\x3dsource$jscomp$0.slice(token.start,\ntoken.end);token.regex\x26\x26(\x22//\x22\x3d\x3d\x3dnode.raw\x26\x26(node.raw\x3d\x22/(?:)/\x22),node.regex\x3dtoken.regex);return node}function finishMemberExpression(accessor,object,property){var node\x3dnew ASTNode(\x22MemberExpression\x22);node.computed\x3d\x22[\x22\x3d\x3d\x3daccessor;node.object\x3dobject;node.property\x3dproperty;node.computed||(property.member\x3d!0);return node}function finishProperty(kind,key,value){var node\x3dnew ASTNode(\x22Property\x22);node.key\x3dkey;node.value\x3dvalue;node.kind\x3dkind;return node}function throwError(token,messageFormat){var args\x3dArray.prototype.slice.call(arguments,\n2),msg\x3dmessageFormat.replace(/%(\\d)/g,function(whole,index){assert(index\x3cargs.length,\x22Message reference must be in range\x22);return args[index]});var error\x3dError(msg);error.index\x3dindex$jscomp$0;error.description\x3dmsg;throw error;}function throwUnexpected(token){2\x3d\x3d\x3dtoken.type\x26\x26throwError(token,\x22Unexpected end of input\x22);6\x3d\x3d\x3dtoken.type\x26\x26throwError(token,\x22Unexpected number\x22);8\x3d\x3d\x3dtoken.type\x26\x26throwError(token,\x22Unexpected string\x22);3\x3d\x3d\x3dtoken.type\x26\x26throwError(token,\x22Unexpected identifier\x22);4\x3d\x3d\x3dtoken.type\x26\x26\nthrowError(token,\x22Unexpected reserved word\x22);throwError(token,\x22Unexpected token %0\x22,token.value)}function expect(value){var token\x3dlex();7\x3d\x3d\x3dtoken.type\x26\x26token.value\x3d\x3d\x3dvalue||throwUnexpected(token)}function match(value){return 7\x3d\x3d\x3dlookahead.type\x26\x26lookahead.value\x3d\x3d\x3dvalue}function parseObjectPropertyKey(){index$jscomp$0\x3dlookahead.start;var token\x3dlex();return 8\x3d\x3d\x3dtoken.type||6\x3d\x3d\x3dtoken.type?(token.octal\x26\x26throwError(token,\x22Octal literals are not allowed in strict mode.\x22),finishLiteral(token)):finishIdentifier(token.value)}\nfunction parsePrimaryExpression(){if(match(\x22(\x22)){expect(\x22(\x22);var type\x3dparseExpression();expect(\x22)\x22);return type}if(match(\x22[\x22)){type\x3d[];index$jscomp$0\x3dlookahead.start;for(expect(\x22[\x22);!match(\x22]\x22);)match(\x22,\x22)?(lex(),type.push(null)):(type.push(parseConditionalExpression()),match(\x22]\x22)||expect(\x22,\x22));lex();var JSCompiler_object_inline_value_8111\x3dnew ASTNode(\x22ArrayExpression\x22);JSCompiler_object_inline_value_8111.elements\x3dtype;return JSCompiler_object_inline_value_8111}if(match(\x22{\x22)){type\x3d[];JSCompiler_object_inline_value_8111\x3d\n{};var JSCompiler_object_inline_literal_8112\x3dString;index$jscomp$0\x3dlookahead.start;for(expect(\x22{\x22);!match(\x22}\x22);){index$jscomp$0\x3dlookahead.start;var JSCompiler_object_inline_value_8113\x3dlookahead;if(3\x3d\x3d\x3dJSCompiler_object_inline_value_8113.type){var JSCompiler_object_inline_literal_8114\x3dparseObjectPropertyKey();expect(\x22:\x22);JSCompiler_object_inline_value_8113\x3dparseConditionalExpression();JSCompiler_object_inline_value_8113\x3dfinishProperty(\x22init\x22,JSCompiler_object_inline_literal_8114,JSCompiler_object_inline_value_8113)}else 2\x3d\x3d\x3d\nJSCompiler_object_inline_value_8113.type||7\x3d\x3d\x3dJSCompiler_object_inline_value_8113.type?(throwUnexpected(JSCompiler_object_inline_value_8113),JSCompiler_object_inline_value_8113\x3dvoid 0):(JSCompiler_object_inline_literal_8114\x3dparseObjectPropertyKey(),expect(\x22:\x22),JSCompiler_object_inline_value_8113\x3dparseConditionalExpression(),JSCompiler_object_inline_value_8113\x3dfinishProperty(\x22init\x22,JSCompiler_object_inline_literal_8114,JSCompiler_object_inline_value_8113));JSCompiler_object_inline_literal_8114\x3d\x22Identifier\x22\x3d\x3d\x3d\nJSCompiler_object_inline_value_8113.key.type?JSCompiler_object_inline_value_8113.key.name:JSCompiler_object_inline_literal_8112(JSCompiler_object_inline_value_8113.key.value);JSCompiler_object_inline_literal_8114\x3d\x22$\x22+JSCompiler_object_inline_literal_8114;Object.prototype.hasOwnProperty.call(JSCompiler_object_inline_value_8111,JSCompiler_object_inline_literal_8114)?throwError({},\x22Duplicate data property in object literal not allowed in strict mode\x22):JSCompiler_object_inline_value_8111[JSCompiler_object_inline_literal_8114]\x3d\n!0;type.push(JSCompiler_object_inline_value_8113);match(\x22}\x22)||expect(\x22,\x22)}expect(\x22}\x22);JSCompiler_object_inline_value_8111\x3dnew ASTNode(\x22ObjectExpression\x22);JSCompiler_object_inline_value_8111.properties\x3dtype;return JSCompiler_object_inline_value_8111}type\x3dlookahead.type;index$jscomp$0\x3dlookahead.start;if(3\x3d\x3d\x3dtype||legalKeywords[lookahead.value])JSCompiler_object_inline_value_8111\x3dfinishIdentifier(lex().value);else if(8\x3d\x3d\x3dtype||6\x3d\x3d\x3dtype)lookahead.octal\x26\x26throwError(lookahead,\x22Octal literals are not allowed in strict mode.\x22),\nJSCompiler_object_inline_value_8111\x3dfinishLiteral(lex());else{if(4\x3d\x3d\x3dtype)throw Error(\x22Disabled.\x22);if(1\x3d\x3d\x3dtype)type\x3dlex(),type.value\x3d\x22true\x22\x3d\x3d\x3dtype.value,JSCompiler_object_inline_value_8111\x3dfinishLiteral(type);else if(5\x3d\x3d\x3dtype)type\x3dlex(),type.value\x3dnull,JSCompiler_object_inline_value_8111\x3dfinishLiteral(type);else if(match(\x22/\x22)||match(\x22/\\x3d\x22)){var value;lookahead\x3dnull;skipComment();type\x3dindex$jscomp$0;JSCompiler_object_inline_value_8111\x3dsource$jscomp$0[index$jscomp$0];assert(\x22/\x22\x3d\x3d\x3dJSCompiler_object_inline_value_8111,\n\x22Regular expression literal must start with a slash\x22);JSCompiler_object_inline_literal_8112\x3dsource$jscomp$0[index$jscomp$0++];for(JSCompiler_object_inline_literal_8114\x3dJSCompiler_object_inline_value_8113\x3d!1;index$jscomp$0\x3clength$jscomp$0;)if(JSCompiler_object_inline_value_8111\x3dsource$jscomp$0[index$jscomp$0++],JSCompiler_object_inline_literal_8112+\x3dJSCompiler_object_inline_value_8111,\x22\\\\\x22\x3d\x3d\x3dJSCompiler_object_inline_value_8111)JSCompiler_object_inline_value_8111\x3dsource$jscomp$0[index$jscomp$0++],isLineTerminator(JSCompiler_object_inline_value_8111.charCodeAt(0))\x26\x26\nthrowError({},\x22Invalid regular expression: missing /\x22),JSCompiler_object_inline_literal_8112+\x3dJSCompiler_object_inline_value_8111;else if(isLineTerminator(JSCompiler_object_inline_value_8111.charCodeAt(0)))throwError({},\x22Invalid regular expression: missing /\x22);else if(JSCompiler_object_inline_value_8113)\x22]\x22\x3d\x3d\x3dJSCompiler_object_inline_value_8111\x26\x26(JSCompiler_object_inline_value_8113\x3d!1);else if(\x22/\x22\x3d\x3d\x3dJSCompiler_object_inline_value_8111){JSCompiler_object_inline_literal_8114\x3d!0;break}else\x22[\x22\x3d\x3d\x3dJSCompiler_object_inline_value_8111\x26\x26\n(JSCompiler_object_inline_value_8113\x3d!0);JSCompiler_object_inline_literal_8114||throwError({},\x22Invalid regular expression: missing /\x22);JSCompiler_object_inline_value_8111\x3dJSCompiler_object_inline_literal_8112.substr(1,JSCompiler_object_inline_literal_8112.length-2);for(value\x3dJSCompiler_object_inline_literal_8114\x3d\x22\x22;index$jscomp$0\x3clength$jscomp$0;){JSCompiler_object_inline_value_8113\x3dsource$jscomp$0[index$jscomp$0];if(!isIdentifierPart(JSCompiler_object_inline_value_8113.charCodeAt(0)))break;++index$jscomp$0;\n\x22\\\\\x22\x3d\x3d\x3dJSCompiler_object_inline_value_8113\x26\x26index$jscomp$0\x3clength$jscomp$0?throwError({},\x22Unexpected token %0\x22,\x22ILLEGAL\x22):(value+\x3dJSCompiler_object_inline_value_8113,JSCompiler_object_inline_literal_8114+\x3dJSCompiler_object_inline_value_8113)}0\x3c\x3dvalue.search(/[^gimuy]/g)\x26\x26throwError({},\x22Invalid regular expression\x22,value);JSCompiler_object_inline_value_8113\x3dvalue;value\x3dtestRegExp(JSCompiler_object_inline_value_8111,JSCompiler_object_inline_value_8113);JSCompiler_object_inline_value_8111\x3dfinishLiteral({literal:JSCompiler_object_inline_literal_8112+\nJSCompiler_object_inline_literal_8114,value:value,regex:{pattern:JSCompiler_object_inline_value_8111,flags:JSCompiler_object_inline_value_8113},start:type,end:index$jscomp$0});peek()}else throwUnexpected(lex())}return JSCompiler_object_inline_value_8111}function parsePostfixExpression(){var expr;for(expr\x3dparsePrimaryExpression();;)if(match(\x22.\x22)){expect(\x22.\x22);index$jscomp$0\x3dlookahead.start;var args\x3dlex();3\x3d\x3d\x3dargs.type||4\x3d\x3d\x3dargs.type||1\x3d\x3d\x3dargs.type||5\x3d\x3d\x3dargs.type||throwUnexpected(args);args\x3dfinishIdentifier(args.value);\nexpr\x3dfinishMemberExpression(\x22.\x22,expr,args)}else if(match(\x22(\x22)){args\x3d[];expect(\x22(\x22);if(!match(\x22)\x22))for(;index$jscomp$0\x3clength$jscomp$0;){args.push(parseConditionalExpression());if(match(\x22)\x22))break;expect(\x22,\x22)}expect(\x22)\x22);var node\x3dnew ASTNode(\x22CallExpression\x22);node.callee\x3dexpr;node.arguments\x3dargs;expr\x3dnode}else if(match(\x22[\x22))expect(\x22[\x22),args\x3dparseExpression(),expect(\x22]\x22),expr\x3dfinishMemberExpression(\x22[\x22,expr,args);else break;if(7\x3d\x3d\x3dlookahead.type\x26\x26(match(\x22++\x22)||match(\x22--\x22)))throw Error(\x22Disabled.\x22);\nreturn expr}function parseUnaryExpression(){if(7!\x3d\x3dlookahead.type\x26\x264!\x3d\x3dlookahead.type)var expr\x3dparsePostfixExpression();else{if(match(\x22++\x22)||match(\x22--\x22))throw Error(\x22Disabled.\x22);if(match(\x22+\x22)||match(\x22-\x22)||match(\x22~\x22)||match(\x22!\x22)){var token\x3dlex();expr\x3dparseUnaryExpression();token\x3dtoken.value;var node\x3dnew ASTNode(\x22UnaryExpression\x22);node.operator\x3dtoken;node.argument\x3dexpr;node.prefix\x3d!0;expr\x3dnode}else{if(4\x3d\x3d\x3dlookahead.type\x26\x26\x22delete\x22\x3d\x3d\x3dlookahead.value||4\x3d\x3d\x3dlookahead.type\x26\x26\x22void\x22\x3d\x3d\x3dlookahead.value||4\x3d\x3d\x3d\nlookahead.type\x26\x26\x22typeof\x22\x3d\x3d\x3dlookahead.value)throw Error(\x22Disabled.\x22);expr\x3dparsePostfixExpression()}}return expr}function binaryPrecedence(token){var prec\x3d0;if(7!\x3d\x3dtoken.type\x26\x264!\x3d\x3dtoken.type)return 0;switch(token.value){case \x22||\x22:prec\x3d1;break;case \x22\\x26\\x26\x22:prec\x3d2;break;case \x22|\x22:prec\x3d3;break;case \x22^\x22:prec\x3d4;break;case \x22\\x26\x22:prec\x3d5;break;case \x22\\x3d\\x3d\x22:case \x22!\\x3d\x22:case \x22\\x3d\\x3d\\x3d\x22:case \x22!\\x3d\\x3d\x22:prec\x3d6;break;case \x22\\x3c\x22:case \x22\\x3e\x22:case \x22\\x3c\\x3d\x22:case \x22\\x3e\\x3d\x22:case \x22instanceof\x22:case \x22in\x22:prec\x3d\n7;break;case \x22\\x3c\\x3c\x22:case \x22\\x3e\\x3e\x22:case \x22\\x3e\\x3e\\x3e\x22:prec\x3d8;break;case \x22+\x22:case \x22-\x22:prec\x3d9;break;case \x22*\x22:case \x22/\x22:case \x22%\x22:prec\x3d11}return prec}function parseConditionalExpression(){var consequent\x3dlookahead;var expr\x3dparseUnaryExpression();var token\x3dlookahead;var alternate\x3dbinaryPrecedence(token);if(0\x3d\x3d\x3dalternate)var expr$jscomp$0\x3dexpr;else{token.prec\x3dalternate;lex();consequent\x3d[consequent,lookahead];var right\x3dparseUnaryExpression();for(expr$jscomp$0\x3d[expr,token,right];0\x3c(alternate\x3dbinaryPrecedence(lookahead));){for(;2\x3c\nexpr$jscomp$0.length\x26\x26alternate\x3c\x3dexpr$jscomp$0[expr$jscomp$0.length-2].prec;)right\x3dexpr$jscomp$0.pop(),token\x3dexpr$jscomp$0.pop().value,expr\x3dexpr$jscomp$0.pop(),consequent.pop(),expr\x3dfinishBinaryExpression(token,expr,right),expr$jscomp$0.push(expr);token\x3dlex();token.prec\x3dalternate;expr$jscomp$0.push(token);consequent.push(lookahead);expr\x3dparseUnaryExpression();expr$jscomp$0.push(expr)}alternate\x3dexpr$jscomp$0.length-1;expr\x3dexpr$jscomp$0[alternate];for(consequent.pop();1\x3calternate;)consequent.pop(),\nexpr\x3dfinishBinaryExpression(expr$jscomp$0[alternate-1].value,expr$jscomp$0[alternate-2],expr),alternate-\x3d2;expr$jscomp$0\x3dexpr}match(\x22?\x22)\x26\x26(lex(),consequent\x3dparseConditionalExpression(),expect(\x22:\x22),alternate\x3dparseConditionalExpression(),expr\x3dnew ASTNode(\x22ConditionalExpression\x22),expr.test\x3dexpr$jscomp$0,expr.consequent\x3dconsequent,expr.alternate\x3dalternate,expr$jscomp$0\x3dexpr);return expr$jscomp$0}function parseExpression(){var expr\x3dparseConditionalExpression();if(match(\x22,\x22))throw Error(\x22Disabled.\x22);return expr}\nfunction parse$jscomp$0(code){source$jscomp$0\x3dcode;index$jscomp$0\x3d0;length$jscomp$0\x3dsource$jscomp$0.length;lookahead\x3dnull;peek();code\x3dparseExpression();if(2!\x3d\x3dlookahead.type)throw Error(\x22Unexpect token after expression.\x22);return code}function getName(node){var name\x3d[];if(\x22Identifier\x22\x3d\x3d\x3dnode.type)return[node.name];if(\x22Literal\x22\x3d\x3d\x3dnode.type)return[node.value];\x22MemberExpression\x22\x3d\x3d\x3dnode.type\x26\x26(name.push.apply(name,$jscomp.arrayFromIterable(getName(node.object))),name.push.apply(name,$jscomp.arrayFromIterable(getName(node.property))));\nreturn name}function startsWithDatum(node){return\x22MemberExpression\x22\x3d\x3d\x3dnode.object.type?startsWithDatum(node.object):\x22datum\x22\x3d\x3d\x3dnode.object.name}function getDependentFields(expression){expression\x3dparse$jscomp$0(expression);var dependents\x3dnew Set;expression.visit(function(node){\x22MemberExpression\x22\x3d\x3d\x3dnode.type\x26\x26startsWithDatum(node)\x26\x26dependents.add(getName(node).slice(1).join(\x22.\x22))});return dependents}function parseUnitSelection(model,selDefs){for(var _a,selCmpts\x3d{},selectionConfig\x3dmodel.config.selection,\n$jscomp$loop$686\x3d{},$jscomp$iter$128\x3d$jscomp.makeIterator(keys$jscomp$0(null!\x3d\x3dselDefs\x26\x26void 0!\x3d\x3dselDefs?selDefs:{})),$jscomp$key$name\x3d$jscomp$iter$128.next();!$jscomp$key$name.done;$jscomp$loop$686\x3d{$jscomp$loop$prop$selCmpt$687:$jscomp$loop$686.$jscomp$loop$prop$selCmpt$687,$jscomp$loop$prop$selDef$688:$jscomp$loop$686.$jscomp$loop$prop$selDef$688,$jscomp$loop$prop$name$461$689:$jscomp$loop$686.$jscomp$loop$prop$name$461$689},$jscomp$key$name\x3d$jscomp$iter$128.next()){$jscomp$loop$686.$jscomp$loop$prop$name$461$689\x3d\n$jscomp$key$name.value;$jscomp$loop$686.$jscomp$loop$prop$selDef$688\x3dduplicate(selDefs[$jscomp$loop$686.$jscomp$loop$prop$name$461$689]);$jscomp$key$name\x3d__rest(selectionConfig[$jscomp$loop$686.$jscomp$loop$prop$selDef$688.type],[\x22fields\x22,\x22encodings\x22]);for(var key in $jscomp$key$name)\x22encodings\x22\x3d\x3d\x3dkey\x26\x26$jscomp$loop$686.$jscomp$loop$prop$selDef$688.fields||\x22fields\x22\x3d\x3d\x3dkey\x26\x26$jscomp$loop$686.$jscomp$loop$prop$selDef$688.encodings||(\x22mark\x22\x3d\x3d\x3dkey\x26\x26($jscomp$loop$686.$jscomp$loop$prop$selDef$688[key]\x3dObject.assign(Object.assign({},\n$jscomp$key$name[key]),$jscomp$loop$686.$jscomp$loop$prop$selDef$688[key])),void 0!\x3d\x3d$jscomp$loop$686.$jscomp$loop$prop$selDef$688[key]\x26\x26!0!\x3d\x3d$jscomp$loop$686.$jscomp$loop$prop$selDef$688[key])||($jscomp$loop$686.$jscomp$loop$prop$selDef$688[key]\x3dnull!\x3d\x3d(_a\x3d$jscomp$key$name[key])\x26\x26void 0!\x3d\x3d_a?_a:$jscomp$loop$686.$jscomp$loop$prop$selDef$688[key]);$jscomp$key$name\x3dvarName($jscomp$loop$686.$jscomp$loop$prop$name$461$689);$jscomp$loop$686.$jscomp$loop$prop$selCmpt$687\x3dselCmpts[$jscomp$key$name]\x3dObject.assign(Object.assign({},\n$jscomp$loop$686.$jscomp$loop$prop$selDef$688),{name:$jscomp$key$name,events:isString($jscomp$loop$686.$jscomp$loop$prop$selDef$688.on)?parseSelector($jscomp$loop$686.$jscomp$loop$prop$selDef$688.on,\x22scope\x22):duplicate($jscomp$loop$686.$jscomp$loop$prop$selDef$688.on)});forEachTransform($jscomp$loop$686.$jscomp$loop$prop$selCmpt$687,function($jscomp$loop$686){return function(txCompiler){txCompiler.has($jscomp$loop$686.$jscomp$loop$prop$selCmpt$687)\x26\x26txCompiler.parse\x26\x26txCompiler.parse(model,$jscomp$loop$686.$jscomp$loop$prop$selCmpt$687,\n$jscomp$loop$686.$jscomp$loop$prop$selDef$688,selDefs[$jscomp$loop$686.$jscomp$loop$prop$name$461$689])}}($jscomp$loop$686))}return selCmpts}function parseSelectionPredicate(model,selections,dfnode,datum){datum\x3dvoid 0\x3d\x3d\x3ddatum?\x22datum\x22:datum;var stores\x3d[];selections\x3dlogicalExpr(selections,function(name){var vname\x3dvarName(name);name\x3dmodel.getSelectionComponent(vname,name);vname\x3d$(vname+\x22_store\x22);if(name.project.timeUnit){var child\x3dnull!\x3d\x3ddfnode\x26\x26void 0!\x3d\x3ddfnode?dfnode:model.component.data.raw,tunode\x3d\nname.project.timeUnit.clone();child.parent?tunode.insertAsParentOf(child):child.parent\x3dtunode}\x22none\x22!\x3d\x3dname.empty\x26\x26stores.push(vname);return\x22vlSelectionTest(\x22+vname+\x22, \x22+datum+(\x22global\x22\x3d\x3d\x3dname.resolve?\x22)\x22:\x22, \x22+$(name.resolve)+\x22)\x22)});return(stores.length?\x22!(\x22+stores.map(function(s){return\x22length(data(\x22+s+\x22))\x22}).join(\x22 || \x22)+\x22) || \x22:\x22\x22)+(\x22(\x22+selections+\x22)\x22)}function parseSelectionBinExtent(selCmpt,extent){var encoding\x3dextent.encoding,field\x3dextent.field;if(!encoding\x26\x26!field)field\x3dselCmpt.project.items[0].field,\n1\x3cselCmpt.project.items.length\x26\x26warn(\x27A \x22field\x22 or \x22encoding\x22 must be specified when using a selection as a scale domain. Using \x22field\x22: \x27+($(field)+\x22.\x22));else if(encoding\x26\x26!field){var encodings\x3dselCmpt.project.items.filter(function(p){return p.channel\x3d\x3d\x3dencoding});!encodings.length||1\x3cencodings.length?(field\x3dselCmpt.project.items[0].field,warn((encodings.length?\x22Multiple \x22:\x22No \x22)+(\x22matching \x22+$(encoding)+\x22 encoding found for selection \x22+$(extent.selection)+\x27. Using \x22field\x22: \x27)+($(field)+\x22.\x22))):field\x3d\nencodings[0].field}return selCmpt.name+\x22[\x22+$(field)+\x22]\x22}function materializeSelections(model,main){forEachSelection(model,function(selCmpt){var selection\x3dselCmpt.name,lookupName\x3dmodel.getName(\x22lookup_\x22+selection);model.component.data.outputNodes[lookupName]\x3dselCmpt.materialized\x3dnew OutputNode(new FilterNode(main,model,{selection:selection}),lookupName,\x22lookup\x22,model.component.data.outputNodeRefCounts)})}function expression$jscomp$0(model,filterOp,node){return logicalExpr(filterOp,function(predicate){return isString(predicate)?\npredicate:(null\x3d\x3d\x3dpredicate||void 0\x3d\x3d\x3dpredicate?0:predicate.selection)?parseSelectionPredicate(model,predicate.selection,node):fieldFilterExpression(predicate)})}function assembleTitle(title,config){if(title)return isArray(title)\x26\x26!isText(title)?title.map(function(fieldDef){return titleFormatter(fieldDef,config)}).join(\x22, \x22):title}function setAxisEncode(axis,part,vgProp,vgRef){var _a,_b,_c;axis.encode\x3dnull!\x3d\x3d(_a\x3daxis.encode)\x26\x26void 0!\x3d\x3d_a?_a:{};axis.encode[part]\x3dnull!\x3d\x3d(_b\x3daxis.encode[part])\x26\x26void 0!\x3d\x3d\n_b?_b:{};axis.encode[part].update\x3dnull!\x3d\x3d(_c\x3daxis.encode[part].update)\x26\x26void 0!\x3d\x3d_c?_c:{};axis.encode[part].update[vgProp]\x3dvgRef}function assembleAxis(axisCmpt,kind,config,opt){opt\x3dvoid 0\x3d\x3d\x3dopt?{header:!1}:opt;var _a,_b,_c\x3daxisCmpt.combine(),disable\x3d_c.disable,orient\x3d_c.orient,scale\x3d_c.scale,labelExpr\x3d_c.labelExpr,title\x3d_c.title,zindex\x3d_c.zindex;_c\x3d__rest(_c,\x22disable orient scale labelExpr title zindex\x22.split(\x22 \x22));if(!disable){for(var prop in _c){var propType\x3dAXIS_PROPERTY_TYPE[prop];disable\x3d_c[prop];\nif(propType\x26\x26propType!\x3d\x3dkind\x26\x26\x22both\x22!\x3d\x3dpropType)delete _c[prop];else if(isConditionalAxisValue(disable)){propType\x3ddisable.condition;disable\x3d__rest(disable,[\x22condition\x22]);propType\x3darray$jscomp$0(propType);var propIndex\x3dCONDITIONAL_AXIS_PROP_INDEX[prop];if(propIndex){var $jscomp$destructuring$var187\x3dpropIndex;propIndex\x3d$jscomp$destructuring$var187.vgProp;$jscomp$destructuring$var187\x3d$jscomp$destructuring$var187.part;disable\x3d[].concat($jscomp.arrayFromIterable(propType.map(function(c){var test\x3dc.test;\nc\x3d__rest(c,[\x22test\x22]);return Object.assign({test:expression$jscomp$0(null,test)},c)})),[disable]);setAxisEncode(_c,$jscomp$destructuring$var187,propIndex,disable);delete _c[prop]}else null\x3d\x3d\x3dpropIndex\x26\x26(disable\x3d{signal:propType.map(function(c){var test\x3dc.test;c\x3d__rest(c,[\x22test\x22]);return expression$jscomp$0(null,test)+\x22 ? \x22+(isSignalRef(c)?c.signal:$(c.value))+\x22 : \x22}).join(\x22\x22)+(isSignalRef(disable)?disable.signal:$(disable.value))},_c[prop]\x3ddisable)}else isSignalRef(disable)\x26\x26(propType\x3dCONDITIONAL_AXIS_PROP_INDEX[prop])\x26\x26\n(setAxisEncode(_c,propType.part,propType.vgProp,disable),delete _c[prop])}if(\x22grid\x22\x3d\x3d\x3dkind){if(_c.grid)return _c.encode\x26\x26(config\x3d_c.encode.grid,_c.encode\x3dObject.assign({},config?{grid:config}:{}),isEmpty(_c.encode)\x26\x26delete _c.encode),Object.assign(Object.assign({scale:scale,orient:orient},_c),{domain:!1,labels:!1,aria:!1,maxExtent:0,minExtent:0,ticks:!1,zindex:getFirstDefined(zindex,0)})}else if(opt.header||!axisCmpt.mainExtracted){void 0!\x3d\x3dlabelExpr\x26\x26(kind\x3dlabelExpr,(null\x3d\x3d\x3d(_b\x3dnull\x3d\x3d\x3d(_a\x3d_c.encode)||\nvoid 0\x3d\x3d\x3d_a?void 0:_a.labels)||void 0\x3d\x3d\x3d_b?0:_b.update)\x26\x26isSignalRef(_c.encode.labels.update.text)\x26\x26(kind\x3dreplaceAll(labelExpr,\x22datum.label\x22,_c.encode.labels.update.text.signal)),setAxisEncode(_c,\x22labels\x22,\x22text\x22,{signal:kind}));null\x3d\x3d\x3d_c.labelAlign\x26\x26delete _c.labelAlign;if(_c.encode){_a\x3d$jscomp.makeIterator(AXIS_PARTS);for(_b\x3d_a.next();!_b.done;_b\x3d_a.next())_b\x3d_b.value,axisCmpt.hasAxisPart(_b)||delete _c.encode[_b];isEmpty(_c.encode)\x26\x26delete _c.encode}axisCmpt\x3dassembleTitle(title,config);return Object.assign(Object.assign(Object.assign(Object.assign({scale:scale,\norient:orient,grid:!1},axisCmpt?{title:axisCmpt}:{}),_c),!1\x3d\x3d\x3dconfig.aria?{aria:!1}:{}),{zindex:getFirstDefined(zindex,0)})}}}function assembleAxisSignals(model){for(var axes\x3dmodel.component.axes,signals\x3d[],$jscomp$iter$131\x3d$jscomp.makeIterator(POSITION_SCALE_CHANNELS),$jscomp$key$channel\x3d$jscomp$iter$131.next();!$jscomp$key$channel.done;$jscomp$key$channel\x3d$jscomp$iter$131.next())if($jscomp$key$channel\x3d$jscomp$key$channel.value,axes[$jscomp$key$channel])for(var $jscomp$iter$130\x3d$jscomp.makeIterator(axes[$jscomp$key$channel]),\n$jscomp$key$axis\x3d$jscomp$iter$130.next();!$jscomp$key$axis.done;$jscomp$key$axis\x3d$jscomp$iter$130.next())if($jscomp$key$axis\x3d$jscomp$key$axis.value,!$jscomp$key$axis.get(\x22disable\x22)\x26\x26!$jscomp$key$axis.get(\x22gridScale\x22)){$jscomp$key$axis\x3d\x22x\x22\x3d\x3d\x3d$jscomp$key$channel?\x22height\x22:\x22width\x22;var update\x3dmodel.getSizeSignalRef($jscomp$key$axis).signal;$jscomp$key$axis!\x3d\x3dupdate\x26\x26signals.push({name:$jscomp$key$axis,update:update})}return signals}function assembleAxes(axisComponents,config){var x\x3dvoid 0\x3d\x3d\x3daxisComponents.x?\n[]:axisComponents.x;axisComponents\x3dvoid 0\x3d\x3d\x3daxisComponents.y?[]:axisComponents.y;return[].concat($jscomp.arrayFromIterable(x.map(function(a){return assembleAxis(a,\x22grid\x22,config)})),$jscomp.arrayFromIterable(axisComponents.map(function(a){return assembleAxis(a,\x22grid\x22,config)})),$jscomp.arrayFromIterable(x.map(function(a){return assembleAxis(a,\x22main\x22,config)})),$jscomp.arrayFromIterable(axisComponents.map(function(a){return assembleAxis(a,\x22main\x22,config)}))).filter(function(a){return a})}function getAxisConfigFromConfigTypes(configTypes,\nconfig,channel,orient){return Object.assign.apply(null,[{}].concat($jscomp.arrayFromIterable(configTypes.map(function(configType){if(\x22axisOrient\x22\x3d\x3d\x3dconfigType){configType\x3d\x22x\x22\x3d\x3d\x3dchannel?\x22bottom\x22:\x22left\x22;var orientConfig1\x3dconfig[\x22x\x22\x3d\x3d\x3dchannel?\x22axisBottom\x22:\x22axisLeft\x22]||{},orientConfig2\x3dconfig[\x22x\x22\x3d\x3d\x3dchannel?\x22axisTop\x22:\x22axisRight\x22]||{},props\x3dnew Set([].concat($jscomp.arrayFromIterable(keys$jscomp$0(orientConfig1)),$jscomp.arrayFromIterable(keys$jscomp$0(orientConfig2)))),conditionalOrientAxisConfig\x3d{};props\x3d\n$jscomp.makeIterator(props.values());for(var $jscomp$key$prop\x3dprops.next();!$jscomp$key$prop.done;$jscomp$key$prop\x3dprops.next())$jscomp$key$prop\x3d$jscomp$key$prop.value,conditionalOrientAxisConfig[$jscomp$key$prop]\x3d{signal:orient.signal+\x27 \\x3d\\x3d\\x3d \x22\x27+configType+\x27\x22 ? \x27+signalOrStringValue(orientConfig1[$jscomp$key$prop])+\x22 : \x22+signalOrStringValue(orientConfig2[$jscomp$key$prop])};return conditionalOrientAxisConfig}return config[configType]}))))}function getAxisConfigs(channel,scaleType,orient,config){var typeBasedConfigTypes\x3d\n\x22band\x22\x3d\x3d\x3dscaleType?[\x22axisDiscrete\x22,\x22axisBand\x22]:\x22point\x22\x3d\x3d\x3dscaleType?[\x22axisDiscrete\x22,\x22axisPoint\x22]:scaleType in QUANTITATIVE_SCALES_INDEX?[\x22axisQuantitative\x22]:\x22time\x22\x3d\x3d\x3dscaleType||\x22utc\x22\x3d\x3d\x3dscaleType?[\x22axisTemporal\x22]:[],axisChannel\x3d\x22x\x22\x3d\x3d\x3dchannel?\x22axisX\x22:\x22axisY\x22;scaleType\x3disSignalRef(orient)?\x22axisOrient\x22:\x22axis\x22+titleCase(orient);typeBasedConfigTypes\x3d[].concat($jscomp.arrayFromIterable(typeBasedConfigTypes),$jscomp.arrayFromIterable(typeBasedConfigTypes.map(function(c){return axisChannel+c.substr(4)})));\nscaleType\x3d[\x22axis\x22,scaleType,axisChannel];return{vlOnlyAxisConfig:getAxisConfigFromConfigTypes(typeBasedConfigTypes,config,channel,orient),vgAxisConfig:getAxisConfigFromConfigTypes(scaleType,config,channel,orient),axisConfigStyle:getAxisConfigStyle([].concat($jscomp.arrayFromIterable(scaleType),$jscomp.arrayFromIterable(typeBasedConfigTypes)),config)}}function getAxisConfigStyle(axisConfigTypes,config){var _a,toMerge\x3d[{}];axisConfigTypes\x3d$jscomp.makeIterator(axisConfigTypes);for(var $jscomp$key$configType\x3d\naxisConfigTypes.next();!$jscomp$key$configType.done;$jscomp$key$configType\x3daxisConfigTypes.next())if($jscomp$key$configType\x3dnull\x3d\x3d\x3d(_a\x3dconfig[$jscomp$key$configType.value])||void 0\x3d\x3d\x3d_a?void 0:_a.style){$jscomp$key$configType\x3darray$jscomp$0($jscomp$key$configType);$jscomp$key$configType\x3d$jscomp.makeIterator($jscomp$key$configType);for(var $jscomp$key$s\x3d$jscomp$key$configType.next();!$jscomp$key$s.done;$jscomp$key$s\x3d$jscomp$key$configType.next())toMerge.push(config.style[$jscomp$key$s.value])}return Object.assign.apply(null,\ntoMerge)}function getAxisConfig(property,config,style,axisConfigs){axisConfigs\x3dvoid 0\x3d\x3d\x3daxisConfigs?{}:axisConfigs;var _a;config\x3dgetStyleConfig(property,style,config.style);if(void 0!\x3d\x3dconfig)return{configFrom:\x22style\x22,configValue:config};config\x3d$jscomp.makeIterator([\x22vlOnlyAxisConfig\x22,\x22vgAxisConfig\x22,\x22axisConfigStyle\x22]);for(style\x3dconfig.next();!style.done;style\x3dconfig.next())if(style\x3dstyle.value,void 0!\x3d\x3d(null\x3d\x3d\x3d(_a\x3daxisConfigs[style])||void 0\x3d\x3d\x3d_a?void 0:_a[property]))return{configFrom:style,configValue:axisConfigs[style][property]};\nreturn{}}function getLabelAngle(model,axis,channel,fieldOrDatumDef,axisConfigs){var labelAngle\x3dnull\x3d\x3d\x3daxis||void 0\x3d\x3d\x3daxis?void 0:axis.labelAngle;if(void 0!\x3d\x3dlabelAngle)return isSignalRef(labelAngle)?labelAngle:normalizeAngle(labelAngle);model\x3dgetAxisConfig(\x22labelAngle\x22,model.config,null\x3d\x3d\x3daxis||void 0\x3d\x3d\x3daxis?void 0:axis.style,axisConfigs).configValue;if(void 0!\x3d\x3dmodel)return normalizeAngle(model);if(\x22x\x22\x3d\x3d\x3dchannel\x26\x26contains([NOMINAL,ORDINAL],fieldOrDatumDef.type))return 270}function normalizeAngleExpr(angle){return\x22(((\x22+\nangle.signal+\x22 % 360) + 360) % 360)\x22}function defaultLabelBaseline(angle,orient,channel,alwaysIncludeMiddle){if(void 0!\x3d\x3dangle)return\x22x\x22\x3d\x3d\x3dchannel?isSignalRef(angle)?(alwaysIncludeMiddle\x3dnormalizeAngleExpr(angle),orient\x3disSignalRef(orient)?\x22(\x22+orient.signal+\x27 \\x3d\\x3d\\x3d \x22top\x22)\x27:\x22top\x22\x3d\x3d\x3dorient,{signal:\x22(45 \\x3c \x22+alwaysIncludeMiddle+\x22 \\x26\\x26 \x22+alwaysIncludeMiddle+\x22 \\x3c 135) || (225 \\x3c \x22+alwaysIncludeMiddle+\x22 \\x26\\x26 \x22+alwaysIncludeMiddle+\x27 \\x3c 315) ? \x22middle\x22 :(\x27+(alwaysIncludeMiddle+\x22 \\x3c\\x3d 45 || 315 \\x3c\\x3d \x22+\nalwaysIncludeMiddle+\x22) \\x3d\\x3d\\x3d \x22+orient+\x27 ? \x22bottom\x22 : \x22top\x22\x27)}):45\x3cangle\x26\x26135\x3eangle||225\x3cangle\x26\x26315\x3eangle?\x22middle\x22:isSignalRef(orient)?{signal:orient.signal+\x22 \x22+(45\x3e\x3dangle||315\x3c\x3dangle?\x22\\x3d\\x3d\\x3d\x22:\x22!\\x3d\\x3d\x22)+\x27 \x22top\x22 ? \x22bottom\x22 : \x22top\x22\x27}:(45\x3e\x3dangle||315\x3c\x3dangle)\x3d\x3d\x3d(\x22top\x22\x3d\x3d\x3dorient)?\x22bottom\x22:\x22top\x22:isSignalRef(angle)?(angle\x3dnormalizeAngleExpr(angle),orient\x3disSignalRef(orient)?\x22(\x22+orient.signal+\x27 \\x3d\\x3d\\x3d \x22left\x22)\x27:\x22left\x22\x3d\x3d\x3dorient,{signal:angle+\x22 \\x3c\\x3d 45 || 315 \\x3c\\x3d \x22+angle+\x22 || (135 \\x3c\\x3d \x22+\nangle+\x22 \\x26\\x26 \x22+angle+\x22 \\x3c\\x3d 225) ? \x22+(alwaysIncludeMiddle?\x27\x22middle\x22\x27:\x22null\x22)+\x22 : (45 \\x3c\\x3d \x22+angle+\x22 \\x26\\x26 \x22+angle+\x22 \\x3c\\x3d 135) \\x3d\\x3d\\x3d \x22+orient+\x27 ? \x22top\x22 : \x22bottom\x22\x27}):45\x3e\x3dangle||315\x3c\x3dangle||135\x3c\x3dangle\x26\x26225\x3e\x3dangle?alwaysIncludeMiddle?\x22middle\x22:null:isSignalRef(orient)?{signal:orient.signal+\x22 \x22+(45\x3c\x3dangle\x26\x26135\x3e\x3dangle?\x22\\x3d\\x3d\\x3d\x22:\x22!\\x3d\\x3d\x22)+\x27 \x22left\x22 ? \x22top\x22 : \x22bottom\x22\x27}:(45\x3c\x3dangle\x26\x26135\x3e\x3dangle)\x3d\x3d\x3d(\x22left\x22\x3d\x3d\x3dorient)?\x22top\x22:\x22bottom\x22}function defaultLabelAlign(angle,orient,channel){if(void 0!\x3d\x3d\nangle){var startAngle\x3d(channel\x3d\x22x\x22\x3d\x3d\x3dchannel)?0:90,mainOrient\x3dchannel?\x22bottom\x22:\x22left\x22;return isSignalRef(angle)?(angle\x3dnormalizeAngleExpr(angle),orient\x3disSignalRef(orient)?\x22(\x22+orient.signal+\x27 \\x3d\\x3d\\x3d \x22\x27+mainOrient+\x27\x22)\x27:orient\x3d\x3d\x3dmainOrient,{signal:\x22(\x22+(startAngle?\x22(\x22+angle+\x22 + 90)\x22:angle)+\x22 % 180 \\x3d\\x3d\\x3d 0) ? \x22+(channel?null:\x27\x22center\x22\x27)+\x22 :(\x22+(startAngle+\x22 \\x3c \x22+angle+\x22 \\x26\\x26 \x22+angle+\x22 \\x3c \x22+(180+startAngle)+\x22) \\x3d\\x3d\\x3d \x22+orient+\x27 ? \x22left\x22 : \x22right\x22\x27)}):0\x3d\x3d\x3d(angle+startAngle)%180?\nchannel?null:\x22center\x22:isSignalRef(orient)?{signal:orient.signal+\x22 \x22+(startAngle\x3cangle\x26\x26angle\x3c180+startAngle?\x22\\x3d\\x3d\\x3d\x22:\x22!\\x3d\\x3d\x22)+\x27 \x22\x27+mainOrient+\x27\x22 ? \x22left\x22 : \x22right\x22\x27}:(startAngle\x3cangle\x26\x26angle\x3c180+startAngle)\x3d\x3d\x3d(orient\x3d\x3d\x3dmainOrient)?\x22left\x22:\x22right\x22}}function getFieldDefTitle(model,channel){var channel2\x3d\x22x\x22\x3d\x3d\x3dchannel?\x22x2\x22:\x22y2\x22;channel\x3dmodel.fieldDef(channel);model\x3dmodel.fieldDef(channel2);channel2\x3dchannel?channel.title:void 0;model\x3dmodel?model.title:void 0;if(channel2\x26\x26model)return mergeTitle(channel2,\nmodel);if(channel2)return channel2;if(model)return model;if(void 0!\x3d\x3dchannel2)return channel2;if(void 0!\x3d\x3dmodel)return model}function sortArrayIndexField(fieldDef,channel,opt){return vgField(fieldDef,Object.assign({prefix:channel,suffix:\x22sort_index\x22},null!\x3d\x3dopt\x26\x26void 0!\x3d\x3dopt?opt:{}))}function getHeaderChannel(channel,orient){return contains([\x22top\x22,\x22bottom\x22],orient)?\x22column\x22:contains([\x22left\x22,\x22right\x22],orient)?\x22row\x22:\x22row\x22\x3d\x3d\x3dchannel?\x22row\x22:\x22column\x22}function getHeaderProperty(prop,facetFieldDef,config,\nchannel){return getFirstDefined(((null\x3d\x3d\x3dfacetFieldDef||void 0\x3d\x3d\x3dfacetFieldDef?void 0:facetFieldDef.header)||{})[prop],(\x22row\x22\x3d\x3d\x3dchannel?config.headerRow:\x22column\x22\x3d\x3d\x3dchannel?config.headerColumn:config.headerFacet)[prop],config.header[prop])}function getHeaderProperties(properties,facetFieldDef,config,channel){var props\x3d{};properties\x3d$jscomp.makeIterator(properties);for(var $jscomp$key$prop\x3dproperties.next();!$jscomp$key$prop.done;$jscomp$key$prop\x3dproperties.next()){$jscomp$key$prop\x3d$jscomp$key$prop.value;\nvar value\x3dgetHeaderProperty($jscomp$key$prop,facetFieldDef,config,channel);void 0!\x3d\x3dvalue\x26\x26(props[$jscomp$key$prop]\x3dvalue)}return props}function assembleTitleGroup(model,channel){var title\x3dmodel.component.layoutHeaders[channel].title,config\x3dmodel.config?model.config:void 0;model\x3dmodel.component.layoutHeaders[channel].facetFieldDef?model.component.layoutHeaders[channel].facetFieldDef:void 0;var $jscomp$destructuring$var230\x3dgetHeaderProperties([\x22titleAnchor\x22,\x22titleAngle\x22,\x22titleOrient\x22],model,config,\nchannel),titleAnchor\x3d$jscomp$destructuring$var230.titleAnchor,ta\x3d$jscomp$destructuring$var230.titleAngle;$jscomp$destructuring$var230\x3dgetHeaderChannel(channel,$jscomp$destructuring$var230.titleOrient);ta\x3dnormalizeAngle(ta);return{name:channel+\x22-title\x22,type:\x22group\x22,role:$jscomp$destructuring$var230+\x22-title\x22,title:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({text:title},\x22row\x22\x3d\x3d\x3dchannel?{orient:\x22left\x22}:{}),{style:\x22guide-title\x22}),defaultHeaderGuideBaseline(ta,$jscomp$destructuring$var230)),\ndefaultHeaderGuideAlign($jscomp$destructuring$var230,ta,titleAnchor)),assembleHeaderProperties(config,model,channel,HEADER_TITLE_PROPERTIES,HEADER_TITLE_PROPERTIES_MAP))}}function defaultHeaderGuideAlign(headerChannel,angle,anchor){switch(void 0\x3d\x3d\x3danchor?\x22middle\x22:anchor){case \x22start\x22:return{align:\x22left\x22};case \x22end\x22:return{align:\x22right\x22}}return(headerChannel\x3ddefaultLabelAlign(angle,\x22row\x22\x3d\x3d\x3dheaderChannel?\x22left\x22:\x22top\x22,\x22row\x22\x3d\x3d\x3dheaderChannel?\x22y\x22:\x22x\x22))?{align:headerChannel}:{}}function defaultHeaderGuideBaseline(angle,\nchannel){return(angle\x3ddefaultLabelBaseline(angle,\x22row\x22\x3d\x3d\x3dchannel?\x22left\x22:\x22top\x22,\x22row\x22\x3d\x3d\x3dchannel?\x22y\x22:\x22x\x22,!0))?{baseline:angle}:{}}function assembleHeaderGroups(model$jscomp$0,channel$jscomp$0){for(var layoutHeader\x3dmodel$jscomp$0.component.layoutHeaders[channel$jscomp$0],groups\x3d[],$jscomp$iter$138\x3d$jscomp.makeIterator(HEADER_TYPES),$jscomp$key$headerType\x3d$jscomp$iter$138.next();!$jscomp$key$headerType.done;$jscomp$key$headerType\x3d$jscomp$iter$138.next())if($jscomp$key$headerType\x3d$jscomp$key$headerType.value,\nlayoutHeader[$jscomp$key$headerType])for(var $jscomp$iter$137\x3d$jscomp.makeIterator(layoutHeader[$jscomp$key$headerType]),$jscomp$key$headerComponent\x3d$jscomp$iter$137.next();!$jscomp$key$headerComponent.done;$jscomp$key$headerComponent\x3d$jscomp$iter$137.next()){$jscomp$key$headerComponent\x3d$jscomp$key$headerComponent.value;a:{var model\x3dmodel$jscomp$0,channel\x3dchannel$jscomp$0;if($jscomp$key$headerComponent){var title$470\x3dnull,facetFieldDef\x3dlayoutHeader.facetFieldDef,config\x3dmodel.config?model.config:void 0;\nif(facetFieldDef\x26\x26$jscomp$key$headerComponent.labels){var labelOrient\x3dgetHeaderProperties([\x22labelOrient\x22],facetFieldDef,config,channel).labelOrient;if(\x22row\x22\x3d\x3d\x3dchannel\x26\x26!contains([\x22top\x22,\x22bottom\x22],labelOrient)||\x22column\x22\x3d\x3d\x3dchannel\x26\x26!contains([\x22left\x22,\x22right\x22],labelOrient))title$470\x3dassembleLabelTitle(facetFieldDef,channel,config)}config\x3disFacetModel(model)\x26\x26!isFacetMapping(model.facet);labelOrient\x3d$jscomp$key$headerComponent.axes;var hasAxes\x3d0\x3c(null\x3d\x3d\x3dlabelOrient||void 0\x3d\x3d\x3dlabelOrient?void 0:labelOrient.length);\nif(title$470||hasAxes){var sizeChannel\x3d\x22row\x22\x3d\x3d\x3dchannel?\x22height\x22:\x22width\x22,$jscomp$inline_4792\x3d{};$jscomp$key$headerComponent\x3dObject.assign(Object.assign(Object.assign(Object.assign(Object.assign({name:model.getName(channel+\x22_\x22+$jscomp$key$headerType),type:\x22group\x22,role:channel+\x22-\x22+$jscomp$key$headerType},layoutHeader.facetFieldDef?{from:{data:model.getName(channel+\x22_domain\x22)},sort:getSort(facetFieldDef,channel)}:{}),hasAxes\x26\x26config?{from:{data:model.getName(\x22facet_domain_\x22+channel)}}:{}),title$470?{title:title$470}:\n{}),$jscomp$key$headerComponent.sizeSignal?{encode:{update:($jscomp$inline_4792[sizeChannel]\x3d$jscomp$key$headerComponent.sizeSignal,$jscomp$inline_4792)}}:{}),hasAxes?{axes:labelOrient}:{});break a}}$jscomp$key$headerComponent\x3dnull}null!\x3d$jscomp$key$headerComponent\x26\x26groups.push($jscomp$key$headerComponent)}return groups}function getSort(facetFieldDef,channel){var _a,sort\x3dfacetFieldDef.sort;return isSortField(sort)?{field:vgField(sort,{expr:\x22datum\x22}),order:null!\x3d\x3d(_a\x3dsort.order)\x26\x26void 0!\x3d\x3d_a?_a:\x22ascending\x22}:\nisArray(sort)?{field:sortArrayIndexField(facetFieldDef,channel,{expr:\x22datum\x22}),order:\x22ascending\x22}:{field:vgField(facetFieldDef,{expr:\x22datum\x22}),order:null!\x3d\x3dsort\x26\x26void 0!\x3d\x3dsort?sort:\x22ascending\x22}}function assembleLabelTitle(facetFieldDef,channel,config){var $jscomp$destructuring$var232\x3dgetHeaderProperties(\x22format formatType labelAngle labelAnchor labelOrient labelExpr\x22.split(\x22 \x22),facetFieldDef,config,channel),labelAngle\x3d$jscomp$destructuring$var232.labelAngle,labelAnchor\x3d$jscomp$destructuring$var232.labelAnchor,\nlabelOrient\x3d$jscomp$destructuring$var232.labelOrient,labelExpr\x3d$jscomp$destructuring$var232.labelExpr;$jscomp$destructuring$var232\x3dformatSignalRef({fieldOrDatumDef:facetFieldDef,format:$jscomp$destructuring$var232.format,formatType:$jscomp$destructuring$var232.formatType,expr:\x22parent\x22,config:config}).signal;labelOrient\x3dgetHeaderChannel(channel,labelOrient);return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({text:{signal:labelExpr?replaceAll(replaceAll(labelExpr,\x22datum.label\x22,\n$jscomp$destructuring$var232),\x22datum.value\x22,vgField(facetFieldDef,{expr:\x22parent\x22})):$jscomp$destructuring$var232}},\x22row\x22\x3d\x3d\x3dchannel?{orient:\x22left\x22}:{}),{style:\x22guide-label\x22,frame:\x22group\x22}),defaultHeaderGuideBaseline(labelAngle,labelOrient)),defaultHeaderGuideAlign(labelOrient,labelAngle,labelAnchor)),assembleHeaderProperties(config,facetFieldDef,channel,HEADER_LABEL_PROPERTIES,HEADER_LABEL_PROPERTIES_MAP))}function assembleHeaderProperties(config,facetFieldDef,channel,properties,propertiesMap){var props\x3d\n{};properties\x3d$jscomp.makeIterator(properties);for(var $jscomp$key$prop\x3dproperties.next();!$jscomp$key$prop.done;$jscomp$key$prop\x3dproperties.next())if($jscomp$key$prop\x3d$jscomp$key$prop.value,propertiesMap[$jscomp$key$prop]){var value\x3dgetHeaderProperty($jscomp$key$prop,facetFieldDef,config,channel);void 0!\x3d\x3dvalue\x26\x26(props[propertiesMap[$jscomp$key$prop]]\x3dvalue)}return props}function assembleLayoutSignals(model){return[].concat($jscomp.arrayFromIterable(sizeSignals(model,\x22width\x22)),$jscomp.arrayFromIterable(sizeSignals(model,\n\x22height\x22)),$jscomp.arrayFromIterable(sizeSignals(model,\x22childWidth\x22)),$jscomp.arrayFromIterable(sizeSignals(model,\x22childHeight\x22)))}function sizeSignals(model,sizeType){var channel\x3d\x22width\x22\x3d\x3d\x3dsizeType?\x22x\x22:\x22y\x22,size\x3dmodel.component.layoutSize.get(sizeType);if(!size||\x22merged\x22\x3d\x3d\x3dsize)return[];sizeType\x3dmodel.getSizeSignalRef(sizeType).signal;if(\x22step\x22\x3d\x3d\x3dsize){if(size\x3dmodel.getScaleComponent(channel)){var type\x3dsize.get(\x22type\x22),range\x3dsize.get(\x22range\x22);if(type in DISCRETE_DOMAIN_INDEX\x26\x26isVgRangeStep(range))return type\x3d\nmodel.scaleName(channel),isFacetModel(model.parent)\x26\x26\x22independent\x22\x3d\x3d\x3dmodel.parent.component.resolve.scale[channel]?[{name:type+\x22_step\x22,value:range.step}]:[{name:type+\x22_step\x22,value:range.step},{name:sizeType,update:sizeExpr(type,size,\x22domain(\x27\x22+type+\x22\x27).length\x22)}]}throw Error(\x22layout size is step although width/height is not step.\x22);}return\x22container\x22\x3d\x3dsize?(channel\x3d(size\x3dsizeType.endsWith(\x22width\x22))?\x22containerSize()[0]\x22:\x22containerSize()[1]\x22,model\x3dgetViewConfigContinuousSize(model.config.view,size?\n\x22width\x22:\x22height\x22),model\x3d\x22isFinite(\x22+channel+\x22) ? \x22+channel+\x22 : \x22+model,[{name:sizeType,init:model,on:[{update:model,events:\x22window:resize\x22}]}]):[{name:sizeType,value:size}]}function sizeExpr(scaleName,scaleComponent,cardinality){var type\x3dscaleComponent.get(\x22type\x22),padding\x3dscaleComponent.get(\x22padding\x22),paddingOuter\x3dgetFirstDefined(scaleComponent.get(\x22paddingOuter\x22),padding);scaleComponent\x3dscaleComponent.get(\x22paddingInner\x22);return\x22bandspace(\x22+cardinality+\x22, \x22+(\x22band\x22\x3d\x3d\x3dtype?void 0!\x3d\x3dscaleComponent?\nscaleComponent:padding:1)+\x22, \x22+paddingOuter+\x22) * \x22+scaleName+\x22_step\x22}function getSizeTypeFromLayoutSizeType(layoutSizeType){return\x22childWidth\x22\x3d\x3d\x3dlayoutSizeType?\x22width\x22:\x22childHeight\x22\x3d\x3d\x3dlayoutSizeType?\x22height\x22:layoutSizeType}function guideEncodeEntry(encoding,model){return keys$jscomp$0(encoding).reduce(function(encode,channel){var valueDef\x3dencoding[channel];return Object.assign(Object.assign({},encode),wrapCondition(model,valueDef,channel,function(x){return isSignalRef(x)?x:{value:x.value}}))},{})}\nfunction parseGuideResolve(resolve,channel){var guide\x3dchannel in POSITION_SCALE_CHANNEL_INDEX?\x22axis\x22:\x22legend\x22;return\x22independent\x22\x3d\x3d\x3dresolve.scale[channel]?(\x22shared\x22\x3d\x3d\x3dresolve[guide][channel]\x26\x26warn(\x27Setting the scale to be independent for \x22\x27+channel+\x27\x22 means we also have to set the guide (axis or legend) to be independent.\x27),\x22independent\x22):resolve[guide][channel]||\x22shared\x22}function getMaxValue(channelDef){return getConditionValue(channelDef,function(v,conditionalDef){return Math.max(v,conditionalDef.value)})}\nfunction getFirstConditionValue(channelDef){return getConditionValue(channelDef,function(v,conditionalDef){return getFirstDefined(v,conditionalDef.value)})}function getConditionValue(channelDef,reducer){var condition\x3dchannelDef\x26\x26channelDef.condition;if(condition\x26\x26(isArray(condition)||isValueDef(condition)))return array$jscomp$0(channelDef.condition).reduce(reducer,channelDef.value);if(isValueDef(channelDef))return channelDef.value}function selectedCondition(model,legendCmpt,fieldDef){model\x3dlegendCmpt.get(\x22selections\x22);\nif(null!\x3d\x3dmodel\x26\x26void 0!\x3d\x3dmodel\x26\x26model.length){var field\x3d$(fieldDef.field);return model.map(function(name){return\x22(!length(data(\x22+$(varName(name)+\x22_store\x22)+\x22)) || (\x22+name+\x22[\x22+field+\x22] \\x26\\x26 indexof(\x22+name+\x22[\x22+field+\x22], datum.value) \\x3e\\x3d 0))\x22}).join(\x22 || \x22)}}function parseLegend(model$jscomp$0){if(isUnitModel(model$jscomp$0)){var JSCompiler_temp\x3dmodel$jscomp$0.encoding;for(var legendComponent\x3d{},$jscomp$inline_4801\x3d$jscomp.makeIterator([\x22color\x22].concat($jscomp.arrayFromIterable(LEGEND_SCALE_CHANNELS))),\n$jscomp$key$channel\x3d$jscomp$inline_4801.next();!$jscomp$key$channel.done;$jscomp$key$channel\x3d$jscomp$inline_4801.next()){$jscomp$key$channel\x3d$jscomp$key$channel.value;var def\x3dgetFieldOrDatumDef(JSCompiler_temp[$jscomp$key$channel]);if(def\x26\x26model$jscomp$0.getScaleComponent($jscomp$key$channel)\x26\x26(\x22shape\x22!\x3d\x3d$jscomp$key$channel||!isFieldDef(def)||def.type!\x3d\x3dGEOJSON)){var _b\x3dvoid 0,_a\x3dvoid 0,_b$jscomp$0\x3ddef\x3dvoid 0;var JSCompiler_inline_result\x3dvoid 0;var model\x3dmodel$jscomp$0,legend\x3dmodel.legend($jscomp$key$channel),\nmarkDef\x3dmodel.markDef,encoding\x3dmodel.encoding,config\x3dmodel.config,legendConfig\x3dconfig.legend,legendCmpt\x3dnew LegendComponent({},getLegendDefWithScale(model,$jscomp$key$channel));parseInteractiveLegend(model,$jscomp$key$channel,legendCmpt);var disable\x3dvoid 0!\x3d\x3dlegend?!legend:legendConfig.disable;legendCmpt.set(\x22disable\x22,disable,void 0!\x3d\x3dlegend);if(!disable){legend\x3dlegend||{};var scaleType\x3dmodel.getScaleComponent($jscomp$key$channel).get(\x22type\x22);disable\x3dgetFieldOrDatumDef(encoding[$jscomp$key$channel]);\nvar timeUnit\x3disFieldDef(disable)?null\x3d\x3d\x3d(JSCompiler_inline_result\x3dnormalizeTimeUnit(disable.timeUnit))||void 0\x3d\x3d\x3dJSCompiler_inline_result?void 0:JSCompiler_inline_result.unit:void 0,orient\x3dlegend.orient||config.legend.orient||\x22right\x22;JSCompiler_inline_result\x3dlegend.type;b:{var scaleType$jscomp$0\x3dscaleType;if(isColorChannel($jscomp$key$channel)){if(contains([\x22quarter\x22,\x22month\x22,\x22day\x22],timeUnit)){timeUnit\x3d\x22symbol\x22;break b}if(scaleType$jscomp$0 in CONTINUOUS_TO_CONTINUOUS_INDEX){timeUnit\x3d\x22gradient\x22;break b}}timeUnit\x3d\n\x22symbol\x22}JSCompiler_inline_result\x3dgetFirstDefined(JSCompiler_inline_result,timeUnit);timeUnit\x3dlegendConfig;scaleType$jscomp$0\x3dJSCompiler_inline_result;var orient$jscomp$0\x3dorient;if(null\x3d\x3d\x3d(_b\x3dnull!\x3d\x3d(_a\x3dlegend.direction)\x26\x26void 0!\x3d\x3d_a?_a:timeUnit[scaleType$jscomp$0?\x22gradientDirection\x22:\x22symbolDirection\x22])||void 0\x3d\x3d\x3d_b)b:{switch(orient$jscomp$0){case \x22top\x22:case \x22bottom\x22:_b\x3d\x22horizontal\x22;break b;case \x22left\x22:case \x22right\x22:case \x22none\x22:case void 0:break;default:_b\x3d\x22gradient\x22\x3d\x3d\x3dscaleType$jscomp$0?\x22horizontal\x22:\nvoid 0;break b}_b\x3dvoid 0}markDef\x3d{legend:legend,channel:$jscomp$key$channel,model:model,markDef:markDef,encoding:encoding,fieldOrDatumDef:disable,legendConfig:legendConfig,config:config,scaleType:scaleType,orient:orient,legendType:JSCompiler_inline_result,direction:_b};encoding\x3d$jscomp.makeIterator(LEGEND_COMPONENT_PROPERTIES);for(legendConfig\x3dencoding.next();!legendConfig.done;legendConfig\x3dencoding.next())if(legendConfig\x3dlegendConfig.value,scaleType\x3dlegendConfig in legendRules?legendRules[legendConfig](markDef):\nlegend[legendConfig],void 0!\x3d\x3dscaleType){b:{_b\x3dmodel.fieldDef($jscomp$key$channel);switch(legendConfig){case \x22disable\x22:_b\x3dvoid 0!\x3d\x3dlegend;break b;case \x22values\x22:_b\x3d!(null\x3d\x3d\x3dlegend||void 0\x3d\x3d\x3dlegend||!legend.values);break b;case \x22title\x22:if(\x22title\x22\x3d\x3d\x3dlegendConfig\x26\x26scaleType\x3d\x3d\x3d(null\x3d\x3d\x3d_b||void 0\x3d\x3d\x3d_b?void 0:_b.title)){_b\x3d!0;break b}}_b\x3dscaleType\x3d\x3d\x3d(legend||{})[legendConfig]}(_b||void 0\x3d\x3d\x3dconfig.legend[legendConfig])\x26\x26legendCmpt.set(legendConfig,scaleType,_b)}config\x3dnull!\x3d\x3d(_b$jscomp$0\x3dnull\x3d\x3d\x3dlegend||void 0\x3d\x3d\x3d\nlegend?void 0:legend.encoding)\x26\x26void 0!\x3d\x3d_b$jscomp$0?_b$jscomp$0:{};_b$jscomp$0\x3dlegendCmpt.get(\x22selections\x22);markDef\x3d{};JSCompiler_inline_result\x3d{fieldOrDatumDef:disable,model:model,channel:$jscomp$key$channel,legendCmpt:legendCmpt,legendType:JSCompiler_inline_result};encoding\x3d$jscomp.makeIterator(\x22labels legend title symbols gradient entries\x22.split(\x22 \x22));for(legendConfig\x3dencoding.next();!legendConfig.done;legendConfig\x3dencoding.next())legendConfig\x3dlegendConfig.value,scaleType\x3dguideEncodeEntry(null!\x3d\x3d\n(def\x3dconfig[legendConfig])\x26\x26void 0!\x3d\x3ddef?def:{},model),scaleType\x3dlegendConfig in legendEncodeRules?legendEncodeRules[legendConfig](scaleType,JSCompiler_inline_result):scaleType,void 0\x3d\x3d\x3dscaleType||isEmpty(scaleType)||(markDef[legendConfig]\x3dObject.assign(Object.assign(Object.assign({},(null\x3d\x3d\x3d_b$jscomp$0||void 0\x3d\x3d\x3d_b$jscomp$0?0:_b$jscomp$0.length)\x26\x26isFieldDef(disable)?{name:varName(disable.field)+\x22_legend_\x22+legendConfig}:{}),(null\x3d\x3d\x3d_b$jscomp$0||void 0\x3d\x3d\x3d_b$jscomp$0?0:_b$jscomp$0.length)?{interactive:!!_b$jscomp$0}:\n{}),{update:scaleType}));isEmpty(markDef)||legendCmpt.set(\x22encode\x22,markDef,!(null\x3d\x3d\x3dlegend||void 0\x3d\x3d\x3dlegend||!legend.encoding))}def\x3dlegendCmpt;legendComponent[$jscomp$key$channel]\x3ddef}}JSCompiler_temp\x3dlegendComponent}else{legendComponent\x3dmodel$jscomp$0.component;JSCompiler_temp\x3dlegendComponent.legends;legendComponent\x3dlegendComponent.resolve;$jscomp$inline_4801\x3d$jscomp.makeIterator(model$jscomp$0.children);for($jscomp$key$channel\x3d$jscomp$inline_4801.next();!$jscomp$key$channel.done;$jscomp$key$channel\x3d\n$jscomp$inline_4801.next())for($jscomp$key$channel\x3d$jscomp$key$channel.value,parseLegend($jscomp$key$channel),def\x3d$jscomp.makeIterator(keys$jscomp$0($jscomp$key$channel.component.legends)),model\x3ddef.next();!model.done;model\x3ddef.next())model\x3dmodel.value,legendComponent.legend[model]\x3dparseGuideResolve(model$jscomp$0.component.resolve,model),\x22shared\x22\x3d\x3d\x3dlegendComponent.legend[model]\x26\x26(JSCompiler_temp[model]\x3dmergeLegendComponent(JSCompiler_temp[model],$jscomp$key$channel.component.legends[model]),JSCompiler_temp[model]||\n(legendComponent.legend[model]\x3d\x22independent\x22,delete JSCompiler_temp[model]));$jscomp$inline_4801\x3d$jscomp.makeIterator(keys$jscomp$0(JSCompiler_temp));for(model\x3d$jscomp$inline_4801.next();!model.done;model\x3d$jscomp$inline_4801.next())for(def\x3dmodel.value,model\x3d$jscomp.makeIterator(model$jscomp$0.children),$jscomp$key$channel\x3dmodel.next();!$jscomp$key$channel.done;$jscomp$key$channel\x3dmodel.next())$jscomp$key$channel\x3d$jscomp$key$channel.value,$jscomp$key$channel.component.legends[def]\x26\x26\x22shared\x22\x3d\x3d\x3dlegendComponent.legend[def]\x26\x26\ndelete $jscomp$key$channel.component.legends[def]}return model$jscomp$0.component.legends\x3dJSCompiler_temp}function getLegendDefWithScale(model,channel){var scale\x3dmodel.scaleName(channel);if(\x22trail\x22\x3d\x3d\x3dmodel.mark){if(\x22color\x22\x3d\x3d\x3dchannel)return{stroke:scale};if(\x22size\x22\x3d\x3d\x3dchannel)return{strokeWidth:scale}}if(\x22color\x22\x3d\x3d\x3dchannel)return model.markDef.filled?{fill:scale}:{stroke:scale};model\x3d{};return model[channel]\x3dscale,model}function mergeLegendComponent(mergedLegend,childLegend){var _a,_b,_c,_d;if(!mergedLegend)return childLegend.clone();\nvar mergedOrient\x3dmergedLegend.getWithExplicit(\x22orient\x22),childOrient\x3dchildLegend.getWithExplicit(\x22orient\x22);if(!mergedOrient.explicit||!childOrient.explicit||mergedOrient.value\x3d\x3d\x3dchildOrient.value){var typeMerged\x3d!1;mergedOrient\x3d{};childOrient\x3d$jscomp.makeIterator(LEGEND_COMPONENT_PROPERTIES);for(var $jscomp$key$prop\x3dchildOrient.next();!$jscomp$key$prop.done;mergedOrient\x3d{$jscomp$loop$prop$prop$691:mergedOrient.$jscomp$loop$prop$prop$691},$jscomp$key$prop\x3dchildOrient.next())mergedOrient.$jscomp$loop$prop$prop$691\x3d\n$jscomp$key$prop.value,$jscomp$key$prop\x3dmergeValuesWithExplicit(mergedLegend.getWithExplicit(mergedOrient.$jscomp$loop$prop$prop$691),childLegend.getWithExplicit(mergedOrient.$jscomp$loop$prop$prop$691),mergedOrient.$jscomp$loop$prop$prop$691,\x22legend\x22,function($jscomp$loop$690){return function(v1,v2){switch($jscomp$loop$690.$jscomp$loop$prop$prop$691){case \x22symbolType\x22:return v1\x3d\x22circle\x22\x3d\x3d\x3dv2.value?v2:v1,v1;case \x22title\x22:return mergeTitleComponent(v1,v2);case \x22type\x22:return typeMerged\x3d!0,makeImplicit(\x22symbol\x22)}return defaultTieBreaker(v1,\nv2,$jscomp$loop$690.$jscomp$loop$prop$prop$691,\x22legend\x22)}}(mergedOrient)),mergedLegend.setWithExplicit(mergedOrient.$jscomp$loop$prop$prop$691,$jscomp$key$prop);typeMerged\x26\x26((null\x3d\x3d\x3d(_b\x3dnull\x3d\x3d\x3d(_a\x3dmergedLegend.implicit)||void 0\x3d\x3d\x3d_a?void 0:_a.encode)||void 0\x3d\x3d\x3d_b?0:_b.gradient)\x26\x26deleteNestedProperty(mergedLegend.implicit,[\x22encode\x22,\x22gradient\x22]),(null\x3d\x3d\x3d(_d\x3dnull\x3d\x3d\x3d(_c\x3dmergedLegend.explicit)||void 0\x3d\x3d\x3d_c?void 0:_c.encode)||void 0\x3d\x3d\x3d_d?0:_d.gradient)\x26\x26deleteNestedProperty(mergedLegend.explicit,[\x22encode\x22,\n\x22gradient\x22]));return mergedLegend}}function setLegendEncode(legend,part,vgProp,vgRef){var _a,_b,_c;legend.encode\x3dnull!\x3d\x3d(_a\x3dlegend.encode)\x26\x26void 0!\x3d\x3d_a?_a:{};legend.encode[part]\x3dnull!\x3d\x3d(_b\x3dlegend.encode[part])\x26\x26void 0!\x3d\x3d_b?_b:{};legend.encode[part].update\x3dnull!\x3d\x3d(_c\x3dlegend.encode[part].update)\x26\x26void 0!\x3d\x3d_c?_c:{};legend.encode[part].update[vgProp]\x3dvgRef}function assembleLegends(model){for(var legendComponentIndex\x3dmodel.component.legends,legendByDomain\x3d{},$jscomp$iter$150\x3d$jscomp.makeIterator(keys$jscomp$0(legendComponentIndex)),\n$jscomp$key$channel\x3d$jscomp$iter$150.next();!$jscomp$key$channel.done;$jscomp$key$channel\x3d$jscomp$iter$150.next()){$jscomp$key$channel\x3d$jscomp$key$channel.value;var scaleComponent\x3dmodel.getScaleComponent($jscomp$key$channel);scaleComponent\x3dstringify(scaleComponent.get(\x22domains\x22));if(legendByDomain[scaleComponent])for(var $jscomp$iter$149\x3d$jscomp.makeIterator(legendByDomain[scaleComponent]),$jscomp$key$mergedLegendComponent\x3d$jscomp$iter$149.next();!$jscomp$key$mergedLegendComponent.done;$jscomp$key$mergedLegendComponent\x3d\n$jscomp$iter$149.next())mergeLegendComponent($jscomp$key$mergedLegendComponent.value,legendComponentIndex[$jscomp$key$channel])||legendByDomain[scaleComponent].push(legendComponentIndex[$jscomp$key$channel]);else legendByDomain[scaleComponent]\x3d[legendComponentIndex[$jscomp$key$channel].clone()]}return vals(legendByDomain).flat().map(function(l){var config\x3dmodel.config,_a,_b,_c;l\x3dl.combine();var disable\x3dl.disable,labelExpr\x3dl.labelExpr;l\x3d__rest(l,[\x22disable\x22,\x22labelExpr\x22,\x22selections\x22]);if(disable)var JSCompiler_inline_result\x3d\nvoid 0;else{!1\x3d\x3d\x3dconfig.aria\x26\x26void 0\x3d\x3dl.aria\x26\x26(l.aria\x3d!1);if(null\x3d\x3d\x3d(_a\x3dl.encode)||void 0\x3d\x3d\x3d_a?0:_a.symbols)for(config\x3dl.encode.symbols.update,!config.fill||\x22transparent\x22\x3d\x3d\x3dconfig.fill.value||config.stroke||l.stroke||(config.stroke\x3d{value:\x22transparent\x22}),_a\x3d$jscomp.makeIterator(LEGEND_SCALE_CHANNELS),disable\x3d_a.next();!disable.done;disable\x3d_a.next())disable\x3ddisable.value,l[disable]\x26\x26delete config[disable];l.title||delete l.title;void 0!\x3d\x3dlabelExpr\x26\x26(config\x3dlabelExpr,(null\x3d\x3d\x3d(_c\x3dnull\x3d\x3d\x3d(_b\x3dl.encode)||\nvoid 0\x3d\x3d\x3d_b?void 0:_b.labels)||void 0\x3d\x3d\x3d_c?0:_c.update)\x26\x26isSignalRef(l.encode.labels.update.text)\x26\x26(config\x3dreplaceAll(labelExpr,\x22datum.label\x22,l.encode.labels.update.text.signal)),setLegendEncode(l,\x22labels\x22,\x22text\x22,{signal:config}));for(JSCompiler_inline_result in l)if(_b\x3dl[JSCompiler_inline_result],isSignalRef(_b)\x26\x26(_c\x3dSIGNAL_LEGEND_PROP_INDEX[JSCompiler_inline_result]))setLegendEncode(l,_c.part,_c.vgProp,_b),delete l[JSCompiler_inline_result];JSCompiler_inline_result\x3dl}return JSCompiler_inline_result}).filter(function(l){return void 0!\x3d\x3d\nl})}function assembleProjectionsForModelAndChildren(model){return model.children.reduce(function(projections,child){return projections.concat(child.assembleProjections())},assembleProjectionForModel(model))}function assembleProjectionForModel(model){var component\x3dmodel.component.projection;if(!component||component.merged)return[];var projection\x3dcomponent.combine(),name\x3dprojection.name;if(component.data){var size\x3d{signal:\x22[\x22+component.size.map(function(ref){return ref.signal}).join(\x22, \x22)+\x22]\x22};component\x3d\ncomponent.data.reduce(function(sources,data){data\x3disSignalRef(data)?data.signal:\x22data(\x27\x22+model.lookupDataSource(data)+\x22\x27)\x22;contains(sources,data)||sources.push(data);return sources},[]);if(0\x3e\x3dcomponent.length)throw Error(\x22Projection\x27s fit didn\x27t find any data sources\x22);return[Object.assign({name:name,size:size,fit:{signal:1\x3ccomponent.length?\x22[\x22+component.join(\x22, \x22)+\x22]\x22:component[0]}},projection)]}return[Object.assign(Object.assign({name:name},{translate:{signal:\x22[width / 2, height / 2]\x22}}),projection)]}\nfunction parseUnitProjection(model){var _a;if(model.hasProjection){var proj\x3dmodel.specifiedProjection,fit\x3d!(proj\x26\x26(null!\x3dproj.scale||null!\x3dproj.translate)),size\x3dfit?[model.getSizeSignalRef(\x22width\x22),model.getSizeSignalRef(\x22height\x22)]:void 0;if(fit){fit\x3d[];for(var encoding\x3dmodel.encoding,$jscomp$inline_4869\x3d$jscomp.makeIterator([[\x22longitude\x22,\x22latitude\x22],[\x22longitude2\x22,\x22latitude2\x22]]),$jscomp$inline_4870\x3d$jscomp$inline_4869.next();!$jscomp$inline_4870.done;$jscomp$inline_4870\x3d$jscomp$inline_4869.next())$jscomp$inline_4870\x3d\n$jscomp$inline_4870.value,(getFieldOrDatumDef(encoding[$jscomp$inline_4870[0]])||getFieldOrDatumDef(encoding[$jscomp$inline_4870[1]]))\x26\x26fit.push({signal:model.getName(\x22geojson_\x22+fit.length)});model.channelHasField(\x22shape\x22)\x26\x26model.typedFieldDef(\x22shape\x22).type\x3d\x3d\x3dGEOJSON\x26\x26fit.push({signal:model.getName(\x22geojson_\x22+fit.length)});0\x3d\x3d\x3dfit.length\x26\x26fit.push(model.requestDataName(\x22main\x22))}else fit\x3dvoid 0;return new ProjectionComponent(model.projectionName(!0),Object.assign(Object.assign({},null!\x3d\x3d(_a\x3dmodel.config.projection)\x26\x26\nvoid 0!\x3d\x3d_a?_a:{}),null!\x3d\x3dproj\x26\x26void 0!\x3d\x3dproj?proj:{}),size,fit)}}function mergeIfNoConflict(first,second){var allPropertiesShared\x3devery(PROJECTION_PROPERTIES,function(prop){return!hop.call(first.explicit,prop)\x26\x26!hop.call(second.explicit,prop)||hop.call(first.explicit,prop)\x26\x26hop.call(second.explicit,prop)\x26\x26stringify(first.get(prop))\x3d\x3d\x3dstringify(second.get(prop))?!0:!1});if(stringify(first.size)\x3d\x3d\x3dstringify(second.size)){if(allPropertiesShared)return first;if(stringify(first.explicit)\x3d\x3d\x3dstringify({}))return second;\nif(stringify(second.explicit)\x3d\x3d\x3dstringify({}))return first}return null}function parseNonUnitProjections(model){if(0!\x3d\x3dmodel.children.length){for(var nonUnitProjection,$jscomp$iter$153\x3d$jscomp.makeIterator(model.children),$jscomp$key$child\x3d$jscomp$iter$153.next();!$jscomp$key$child.done;$jscomp$key$child\x3d$jscomp$iter$153.next()){var child$jscomp$0\x3d$jscomp$key$child.value;child$jscomp$0.component.projection\x3disUnitModel(child$jscomp$0)?parseUnitProjection(child$jscomp$0):parseNonUnitProjections(child$jscomp$0)}$jscomp$iter$153\x3d\nevery(model.children,function(child){if(child\x3dchild.component.projection){if(nonUnitProjection)return(child\x3dmergeIfNoConflict(nonUnitProjection,child))\x26\x26(nonUnitProjection\x3dchild),!!child;nonUnitProjection\x3dchild}return!0});if(nonUnitProjection\x26\x26$jscomp$iter$153){$jscomp$iter$153\x3dmodel.projectionName(!0);child$jscomp$0\x3dnew ProjectionComponent($jscomp$iter$153,nonUnitProjection.specifiedProjection,nonUnitProjection.size,duplicate(nonUnitProjection.data));model\x3d$jscomp.makeIterator(model.children);for($jscomp$key$child\x3d\nmodel.next();!$jscomp$key$child.done;$jscomp$key$child\x3dmodel.next()){$jscomp$key$child\x3d$jscomp$key$child.value;var projection\x3d$jscomp$key$child.component.projection;projection\x26\x26(projection.isFit\x26\x26child$jscomp$0.data.push.apply(child$jscomp$0.data,$jscomp.arrayFromIterable($jscomp$key$child.component.projection.data)),$jscomp$key$child.renameProjection(projection.get(\x22name\x22),$jscomp$iter$153),projection.merged\x3d!0)}return child$jscomp$0}}}function rangeFormula(model,fieldDef,channel,config){var _a,\n_b;return binRequiresRange(fieldDef,channel)?(model\x3disUnitModel(model)?null!\x3d\x3d(_b\x3dnull!\x3d\x3d(_a\x3dmodel.axis(channel))\x26\x26void 0!\x3d\x3d_a?_a:model.legend(channel))\x26\x26void 0!\x3d\x3d_b?_b:{}:{},_a\x3dvgField(fieldDef,{expr:\x22datum\x22}),_b\x3dvgField(fieldDef,{expr:\x22datum\x22,binSuffix:\x22end\x22}),{formulaAs:vgField(fieldDef,{binSuffix:\x22range\x22,forAs:!0}),formula:binFormatExpression(_a,_b,model.format,model.formatType,config)}):{}}function getBinSignalName(model,field,bin){var _a;bin\x3dnull!\x3d\x3d(_a\x3dnormalizeBin(bin,void 0))\x26\x26void 0!\x3d\x3d_a?\n_a:{};field\x3dbinToString(bin)+\x22_\x22+field;return model.getName(field+\x22_bins\x22)}function createBinComponent(t,bin,model){var as\x3d\x22as\x22in t?isString(t.as)?[t.as,t.as+\x22_end\x22]:[t.as[0],t.as[1]]:[vgField(t,{forAs:!0}),vgField(t,{binSuffix:\x22end\x22,forAs:!0})];bin\x3dObject.assign({},normalizeBin(bin,void 0));var JSCompiler_inline_result\x3dt.field;JSCompiler_inline_result\x3dbinToString(bin)+\x22_\x22+JSCompiler_inline_result;var JSCompiler_object_inline_signal_6655\x3dmodel.getName(JSCompiler_inline_result+\x22_bins\x22);var extentSignal\x3d\nmodel.getName(JSCompiler_inline_result+\x22_extent\x22);if(isSelectionExtent(bin.extent)){var span\x3dbin.extent;var selName\x3dspan.selection;span\x3dparseSelectionBinExtent(model.getSelectionComponent(varName(selName),selName),span);delete bin.extent}t\x3dObject.assign(Object.assign(Object.assign({bin:bin,field:t.field,as:[as]},JSCompiler_object_inline_signal_6655?{signal:JSCompiler_object_inline_signal_6655}:{}),extentSignal?{extentSignal:extentSignal}:{}),span?{span:span}:{});return{key:JSCompiler_inline_result,\nbinComponent:t}}function checkLinks(nodes){nodes\x3d$jscomp.makeIterator(nodes);for(var $jscomp$key$node\x3dnodes.next();!$jscomp$key$node.done;$jscomp$key$node\x3dnodes.next()){$jscomp$key$node\x3d$jscomp$key$node.value;for(var $jscomp$iter$158\x3d$jscomp.makeIterator($jscomp$key$node.children),$jscomp$key$child\x3d$jscomp$iter$158.next();!$jscomp$key$child.done;$jscomp$key$child\x3d$jscomp$iter$158.next())if($jscomp$key$child\x3d$jscomp$key$child.value,$jscomp$key$child.parent!\x3d\x3d$jscomp$key$node)return console.error(\x22Dataflow graph is inconsistent.\x22,\n$jscomp$key$node,$jscomp$key$child),!1;if(!checkLinks($jscomp$key$node.children))return!1}return!0}function isDataSourceNode(node){return node instanceof SourceNode||node instanceof GraticuleNode||node instanceof SequenceNode}function unquote(pattern){return\x22\x27\x22\x3d\x3d\x3dpattern[0]\x26\x26\x22\x27\x22\x3d\x3d\x3dpattern[pattern.length-1]||\x27\x22\x27\x3d\x3d\x3dpattern[0]\x26\x26\x27\x22\x27\x3d\x3d\x3dpattern[pattern.length-1]?pattern.slice(1,-1):pattern}function parseExpression$1(field,parse){field\x3daccessPathWithDatum(field);if(\x22number\x22\x3d\x3d\x3dparse)return\x22toNumber(\x22+field+\n\x22)\x22;if(\x22boolean\x22\x3d\x3d\x3dparse)return\x22toBoolean(\x22+field+\x22)\x22;if(\x22string\x22\x3d\x3d\x3dparse)return\x22toString(\x22+field+\x22)\x22;if(\x22date\x22\x3d\x3d\x3dparse)return\x22toDate(\x22+field+\x22)\x22;if(\x22flatten\x22\x3d\x3d\x3dparse)return field;if(0\x3d\x3d\x3dparse.indexOf(\x22date:\x22))return parse\x3dunquote(parse.slice(5,parse.length)),\x22timeParse(\x22+field+\x22,\x27\x22+parse+\x22\x27)\x22;if(0\x3d\x3d\x3dparse.indexOf(\x22utc:\x22))return parse\x3dunquote(parse.slice(4,parse.length)),\x22utcParse(\x22+field+\x22,\x27\x22+parse+\x22\x27)\x22;warn(\x27Unrecognized parse \x22\x27+parse+\x27\x22.\x27);return null}function getImplicitFromFilterTransform(transform){var implicit\x3d\n{};forEachLeaf(transform.filter,function(filter){var _a;if(isFieldPredicate(filter)){var val\x3dnull;isFieldEqualPredicate(filter)?val\x3dfilter.equal:isFieldRangePredicate(filter)?val\x3dfilter.range[0]:isFieldOneOfPredicate(filter)\x26\x26(val\x3d(null!\x3d\x3d(_a\x3dfilter.oneOf)\x26\x26void 0!\x3d\x3d_a?_a:filter[\x22in\x22])[0]);val\x26\x26(isDateTime(val)?implicit[filter.field]\x3d\x22date\x22:isNumber(val)?implicit[filter.field]\x3d\x22number\x22:isString(val)\x26\x26(implicit[filter.field]\x3d\x22string\x22));filter.timeUnit\x26\x26(implicit[filter.field]\x3d\x22date\x22)}});return implicit}\nfunction getImplicitFromEncoding(model){function add(fieldDef){if(isFieldOrDatumDefForTimeFormat(fieldDef))implicit[fieldDef.field]\x3d\x22date\x22;else{var JSCompiler_temp;if(JSCompiler_temp\x3d\x22quantitative\x22\x3d\x3d\x3dfieldDef.type)JSCompiler_temp\x3dfieldDef.aggregate,JSCompiler_temp\x3disString(JSCompiler_temp)\x26\x26contains([\x22min\x22,\x22max\x22],JSCompiler_temp);JSCompiler_temp?implicit[fieldDef.field]\x3d\x22number\x22:1\x3caccessPathDepth(fieldDef.field)?fieldDef.field in implicit||(implicit[fieldDef.field]\x3d\x22flatten\x22):isScaleFieldDef(fieldDef)\x26\x26\nisSortField(fieldDef.sort)\x26\x261\x3caccessPathDepth(fieldDef.sort.field)\x26\x26(fieldDef.sort.field in implicit||(implicit[fieldDef.sort.field]\x3d\x22flatten\x22))}}var implicit\x3d{};(isUnitModel(model)||isFacetModel(model))\x26\x26model.forEachFieldDef(function(fieldDef,channel){isTypedFieldDef(fieldDef)?add(fieldDef):(channel\x3dgetMainRangeChannel(channel),channel\x3dmodel.fieldDef(channel),add(Object.assign(Object.assign({},fieldDef),{type:channel.type})))});if(isUnitModel(model)){var markDef\x3dmodel.markDef,encoding\x3dmodel.encoding;\nisPathMark(model.mark)\x26\x26!model.encoding.order\x26\x26(markDef\x3dencoding[\x22horizontal\x22\x3d\x3d\x3dmarkDef.orient?\x22y\x22:\x22x\x22],!isFieldDef(markDef)||\x22quantitative\x22!\x3d\x3dmarkDef.type||markDef.field in implicit||(implicit[markDef.field]\x3d\x22number\x22))}return implicit}function getStackByFields(model){return model.stack.stackBy.reduce(function(fields,by){(by\x3dvgField(by.fieldDef))\x26\x26fields.push(by);return fields},[])}function isValidAsArray(as){return isArray(as)\x26\x26as.every(function(s){return isString(s)})\x26\x261\x3cas.length}function cloneSubtree(facet){function clone(node){if(!(node instanceof\nFacetNode)){var copy\x3dnode.clone();if(copy instanceof OutputNode){var newName\x3d\x22scale_\x22+copy.getSource();copy.setSource(newName);facet.model.component.data.outputNodes[newName]\x3dcopy}else(copy instanceof AggregateNode||copy instanceof StackNode||copy instanceof WindowTransformNode||copy instanceof JoinAggregateTransformNode)\x26\x26copy.addDimensions(facet.fields);node\x3d$jscomp.makeIterator(node.children.flatMap(clone));for(newName\x3dnode.next();!newName.done;newName\x3dnode.next())newName.value.parent\x3dcopy;return[copy]}return node.children.flatMap(clone)}\nreturn clone}function moveFacetDown(node){if(node instanceof FacetNode)if(1!\x3d\x3dnode.numChildren()||node.children[0]instanceof OutputNode){var facetMain\x3dnode.model.component.data.main;moveMainDownToFacet(facetMain);var cloner\x3dcloneSubtree(node);node\x3dnode.children.map(cloner).flat();node\x3d$jscomp.makeIterator(node);for(cloner\x3dnode.next();!cloner.done;cloner\x3dnode.next())cloner.value.parent\x3dfacetMain}else facetMain\x3dnode.children[0],(facetMain instanceof AggregateNode||facetMain instanceof StackNode||facetMain instanceof\nWindowTransformNode||facetMain instanceof JoinAggregateTransformNode)\x26\x26facetMain.addDimensions(node.fields),facetMain.swapWithParent(),moveFacetDown(node);else node.children.map(moveFacetDown)}function moveMainDownToFacet(node){if(node instanceof OutputNode\x26\x26\x22main\x22\x3d\x3d\x3dnode.type\x26\x261\x3d\x3d\x3dnode.numChildren()){var child\x3dnode.children[0];child instanceof FacetNode||(child.swapWithParent(),moveMainDownToFacet(node))}}function getLeaves(roots){function append(node){if(0\x3d\x3d\x3dnode.numChildren())leaves.push(node);\nelse{node\x3d$jscomp.makeIterator(node.children);for(var $jscomp$key$child\x3dnode.next();!$jscomp$key$child.done;$jscomp$key$child\x3dnode.next())append($jscomp$key$child.value)}}var leaves\x3d[];roots\x3d$jscomp.makeIterator(roots);for(var $jscomp$key$child$jscomp$0\x3droots.next();!$jscomp$key$child$jscomp$0.done;$jscomp$key$child$jscomp$0\x3droots.next())append($jscomp$key$child$jscomp$0.value);return leaves}function isTrue(x){return x}function runOptimizer(optimizer,nodes){return nodes.map(function(node){return optimizer instanceof\nBottomUpOptimizer?(node\x3doptimizer.optimizeNextFromLeaves(node),optimizer.reset(),node):optimizer.run(node)}).some(isTrue)}function optimizationDataflowHelper(dataComponent,model){var roots\x3ddataComponent.sources,mutatedFlags\x3dnew Set;mutatedFlags.add(runOptimizer(new RemoveUnnecessaryOutputNodes,roots));mutatedFlags.add(runOptimizer(new RemoveUnnecessaryIdentifierNodes(model),roots));roots\x3droots.filter(function(r){return 0\x3cr.numChildren()});mutatedFlags.add(runOptimizer(new RemoveUnusedSubtrees,getLeaves(roots)));\nroots\x3droots.filter(function(r){return 0\x3cr.numChildren()});mutatedFlags.add(runOptimizer(new MoveParseUp,getLeaves(roots)));mutatedFlags.add(runOptimizer(new MergeBins(model),getLeaves(roots)));mutatedFlags.add(runOptimizer(new RemoveDuplicateTimeUnits,getLeaves(roots)));mutatedFlags.add(runOptimizer(new MergeParse,getLeaves(roots)));mutatedFlags.add(runOptimizer(new MergeAggregates,getLeaves(roots)));mutatedFlags.add(runOptimizer(new MergeTimeUnits,getLeaves(roots)));mutatedFlags.add(runOptimizer(new MergeIdenticalNodes,\nroots));mutatedFlags.add(runOptimizer(new MergeOutputs,getLeaves(roots)));dataComponent.sources\x3droots;return mutatedFlags.has(!0)}function parseUnitScaleDomain(model$jscomp$0){for(var localScaleComponents\x3dmodel$jscomp$0.component.scales,$jscomp$iter$212\x3d$jscomp.makeIterator(keys$jscomp$0(localScaleComponents)),$jscomp$key$channel\x3d$jscomp$iter$212.next();!$jscomp$key$channel.done;$jscomp$key$channel\x3d$jscomp$iter$212.next()){$jscomp$key$channel\x3d$jscomp$key$channel.value;var model\x3dmodel$jscomp$0,scaleType\x3d\nmodel.getScaleComponent($jscomp$key$channel).get(\x22type\x22),encoding\x3dmodel.encoding;var JSCompiler_inline_result\x3dmodel.scaleDomain($jscomp$key$channel);var fieldDef\x3dmodel.typedFieldDef($jscomp$key$channel),scaleConfig\x3dmodel.config.scale;\x22unaggregated\x22\x3d\x3d\x3dJSCompiler_inline_result?(fieldDef\x3dcanUseUnaggregatedDomain(fieldDef,scaleType),scaleConfig\x3dfieldDef.reason,fieldDef.valid||(warn(scaleConfig),JSCompiler_inline_result\x3dvoid 0)):void 0\x3d\x3d\x3dJSCompiler_inline_result\x26\x26scaleConfig.useUnaggregatedDomain\x26\x26canUseUnaggregatedDomain(fieldDef,\nscaleType).valid\x26\x26(JSCompiler_inline_result\x3d\x22unaggregated\x22);JSCompiler_inline_result!\x3d\x3dmodel.scaleDomain($jscomp$key$channel)\x26\x26(model.specifiedScales[$jscomp$key$channel]\x3dObject.assign(Object.assign({},model.specifiedScales[$jscomp$key$channel]),{domain:JSCompiler_inline_result}));model\x3d\x22x\x22\x3d\x3d\x3d$jscomp$key$channel\x26\x26getFieldOrDatumDef(encoding.x2)?getFieldOrDatumDef(encoding.x)?mergeValuesWithExplicit(parseSingleChannelDomain(scaleType,JSCompiler_inline_result,model,\x22x\x22),parseSingleChannelDomain(scaleType,\nJSCompiler_inline_result,model,\x22x2\x22),\x22domain\x22,\x22scale\x22,domainsTieBreaker):parseSingleChannelDomain(scaleType,JSCompiler_inline_result,model,\x22x2\x22):\x22y\x22\x3d\x3d\x3d$jscomp$key$channel\x26\x26getFieldOrDatumDef(encoding.y2)?getFieldOrDatumDef(encoding.y)?mergeValuesWithExplicit(parseSingleChannelDomain(scaleType,JSCompiler_inline_result,model,\x22y\x22),parseSingleChannelDomain(scaleType,JSCompiler_inline_result,model,\x22y2\x22),\x22domain\x22,\x22scale\x22,domainsTieBreaker):parseSingleChannelDomain(scaleType,JSCompiler_inline_result,model,\n\x22y2\x22):parseSingleChannelDomain(scaleType,JSCompiler_inline_result,model,$jscomp$key$channel);localScaleComponents[$jscomp$key$channel].setWithExplicit(\x22domains\x22,model);JSCompiler_inline_result\x3dvoid 0;scaleType\x3dmodel$jscomp$0.component.scales[$jscomp$key$channel];fieldDef\x3dmodel$jscomp$0.specifiedScales[$jscomp$key$channel].domain;encoding\x3dnull\x3d\x3d\x3d(JSCompiler_inline_result\x3dmodel$jscomp$0.fieldDef($jscomp$key$channel))||void 0\x3d\x3d\x3dJSCompiler_inline_result?void 0:JSCompiler_inline_result.bin;JSCompiler_inline_result\x3d\nisSelectionDomain(fieldDef)\x26\x26fieldDef;encoding\x3disObject(encoding)\x26\x26isSelectionExtent(encoding.extent)\x26\x26encoding.extent;(JSCompiler_inline_result||encoding)\x26\x26scaleType.set(\x22selectionExtent\x22,null!\x3d\x3dJSCompiler_inline_result\x26\x26void 0!\x3d\x3dJSCompiler_inline_result?JSCompiler_inline_result:encoding,!0);if(model$jscomp$0.component.data.isFaceted){for(scaleType\x3dmodel$jscomp$0;!isFacetModel(scaleType)\x26\x26scaleType.parent;)scaleType\x3dscaleType.parent;if(\x22shared\x22\x3d\x3d\x3dscaleType.component.resolve.scale[$jscomp$key$channel])for($jscomp$key$channel\x3d\n$jscomp.makeIterator(model.value),model\x3d$jscomp$key$channel.next();!model.done;model\x3d$jscomp$key$channel.next())model\x3dmodel.value,isDataRefDomain(model)\x26\x26(model.data\x3d\x22scale_\x22+model.data.replace(\x22scale_\x22,\x22\x22))}}}function parseNonUnitScaleDomain(model$jscomp$0){for(var $jscomp$iter$213\x3d$jscomp.makeIterator(model$jscomp$0.children),$jscomp$key$child\x3d$jscomp$iter$213.next();!$jscomp$key$child.done;$jscomp$key$child\x3d$jscomp$iter$213.next()){var model\x3d$jscomp$key$child.value;isUnitModel(model)?parseUnitScaleDomain(model):\nparseNonUnitScaleDomain(model)}$jscomp$iter$213\x3dmodel$jscomp$0.component.scales;model\x3d$jscomp.makeIterator(keys$jscomp$0($jscomp$iter$213));for(var $jscomp$key$channel\x3dmodel.next();!$jscomp$key$channel.done;$jscomp$key$channel\x3dmodel.next()){$jscomp$key$channel\x3d$jscomp$key$channel.value;var domains\x3dvoid 0,selectionExtent\x3dnull,$jscomp$iter$214\x3d$jscomp.makeIterator(model$jscomp$0.children);for($jscomp$key$child\x3d$jscomp$iter$214.next();!$jscomp$key$child.done;$jscomp$key$child\x3d$jscomp$iter$214.next())if($jscomp$key$child\x3d\n$jscomp$key$child.value.component.scales[$jscomp$key$channel])domains\x3dvoid 0\x3d\x3d\x3ddomains?$jscomp$key$child.getWithExplicit(\x22domains\x22):mergeValuesWithExplicit(domains,$jscomp$key$child.getWithExplicit(\x22domains\x22),\x22domains\x22,\x22scale\x22,domainsTieBreaker),$jscomp$key$child\x3d$jscomp$key$child.get(\x22selectionExtent\x22),selectionExtent\x26\x26$jscomp$key$child\x26\x26selectionExtent.selection!\x3d\x3d$jscomp$key$child.selection\x26\x26warn(\x22The same selection must be used to override scale domains in a layered view.\x22),selectionExtent\x3d$jscomp$key$child;\n$jscomp$iter$213[$jscomp$key$channel].setWithExplicit(\x22domains\x22,domains);selectionExtent\x26\x26$jscomp$iter$213[$jscomp$key$channel].set(\x22selectionExtent\x22,selectionExtent,!0)}}function mapDomainToDataSignal(domain,type,timeUnit){return domain.map(function(v){return{signal:\x22{data: \x22+valueExpr(v,{timeUnit:timeUnit,type:type})+\x22}\x22}})}function convertDomainIfItIsDateTime(domain,type,timeUnit){var _a;timeUnit\x3dnull\x3d\x3d\x3d(_a\x3dnormalizeTimeUnit(timeUnit))||void 0\x3d\x3d\x3d_a?void 0:_a.unit;return\x22temporal\x22\x3d\x3d\x3dtype||timeUnit?\nmapDomainToDataSignal(domain,type,timeUnit):[domain]}function parseSingleChannelDomain(scaleType,domain,model,channel){var fieldOrDatumDef\x3dgetFieldOrDatumDef(model.encoding[channel]),type\x3dfieldOrDatumDef.type,timeUnit\x3dfieldOrDatumDef.timeUnit;if(domain\x26\x26domain.unionWith)return channel\x3dparseSingleChannelDomain(scaleType,void 0,model,channel),fieldOrDatumDef\x3dconvertDomainIfItIsDateTime(domain.unionWith,type,timeUnit),makeExplicit([].concat($jscomp.arrayFromIterable(channel.value),$jscomp.arrayFromIterable(fieldOrDatumDef)));\nif(isSignalRef(domain))return makeExplicit([domain]);if(domain\x26\x26\x22unaggregated\x22!\x3d\x3ddomain\x26\x26!isSelectionDomain(domain))return makeExplicit(convertDomainIfItIsDateTime(domain,type,timeUnit));var stack\x3dmodel.stack;if(stack\x26\x26channel\x3d\x3d\x3dstack.fieldChannel){if(\x22normalize\x22\x3d\x3d\x3dstack.offset)return makeImplicit([[0,1]]);fieldOrDatumDef\x3dmodel.requestDataName(\x22main\x22);return makeImplicit([{data:fieldOrDatumDef,field:model.vgField(channel,{suffix:\x22start\x22})},{data:fieldOrDatumDef,field:model.vgField(channel,{suffix:\x22end\x22})}])}stack\x3d\nSCALE_CHANNEL_INDEX[channel]\x26\x26isFieldDef(fieldOrDatumDef)?domainSort(model,channel,scaleType):void 0;if(isDatumDef(fieldOrDatumDef))return channel\x3dconvertDomainIfItIsDateTime([fieldOrDatumDef.datum],type,timeUnit),makeImplicit(channel);if(\x22unaggregated\x22\x3d\x3d\x3ddomain)return channel\x3dmodel.requestDataName(\x22main\x22),fieldOrDatumDef\x3dfieldOrDatumDef.field,makeImplicit([{data:channel,field:vgField({field:fieldOrDatumDef,aggregate:\x22min\x22})},{data:channel,field:vgField({field:fieldOrDatumDef,aggregate:\x22max\x22})}]);\nif(isBinning(fieldOrDatumDef.bin)){if(scaleType in DISCRETE_DOMAIN_INDEX)return\x22bin-ordinal\x22\x3d\x3d\x3dscaleType?makeImplicit([]):makeImplicit([{data:!0\x3d\x3d\x3dstack||!1\x3d\x3d\x3dstack?model.requestDataName(\x22main\x22):model.requestDataName(\x22raw\x22),field:model.vgField(channel,binRequiresRange(fieldOrDatumDef,channel)?{binSuffix:\x22range\x22}:{}),sort:!0!\x3d\x3dstack\x26\x26isObject(stack)?stack:{field:model.vgField(channel,{}),op:\x22min\x22}}]);domain\x3dfieldOrDatumDef.bin;if(isBinning(domain)){var binSignal\x3dgetBinSignalName(model,fieldOrDatumDef.field,\ndomain);return makeImplicit([new SignalRefWrapper(function(){var signal\x3dmodel.getSignalName(binSignal);return\x22[\x22+signal+\x22.start, \x22+signal+\x22.stop]\x22})])}return makeImplicit([{data:model.requestDataName(\x22main\x22),field:model.vgField(channel,{})}])}return fieldOrDatumDef.timeUnit\x26\x26contains([\x22time\x22,\x22utc\x22],scaleType)\x26\x26hasBand(channel,fieldOrDatumDef,isUnitModel(model)?model.encoding[getSecondaryRangeChannel(channel)]:void 0,model.stack,model.markDef,model.config)?(fieldOrDatumDef\x3dmodel.requestDataName(\x22main\x22),\nmakeImplicit([{data:fieldOrDatumDef,field:model.vgField(channel)},{data:fieldOrDatumDef,field:model.vgField(channel,{suffix:\x22end\x22})}])):stack?makeImplicit([{data:!0\x3d\x3d\x3dstack||!1\x3d\x3d\x3dstack?model.requestDataName(\x22main\x22):model.requestDataName(\x22raw\x22),field:model.vgField(channel),sort:stack}]):makeImplicit([{data:model.requestDataName(\x22main\x22),field:model.vgField(channel)}])}function normalizeSortField(sort,isStackedMeasure){var op\x3dsort.op,field\x3dsort.field;sort\x3dsort.order;return Object.assign(Object.assign({op:null!\x3d\x3d\nop\x26\x26void 0!\x3d\x3dop?op:isStackedMeasure?\x22sum\x22:\x22min\x22},field?{field:replacePathInField(field)}:{}),sort?{order:sort}:{})}function domainSort(model,channel,scaleType){if(scaleType in DISCRETE_DOMAIN_INDEX){scaleType\x3dmodel.fieldDef(channel);var sort\x3dscaleType.sort;if(isSortArray(sort))return{op:\x22min\x22,field:sortArrayIndexField(scaleType,channel),order:\x22ascending\x22};var stackDimensions\x3d(scaleType\x3dmodel.stack)?[].concat($jscomp.arrayFromIterable(scaleType.groupbyField?[scaleType.groupbyField]:[]),$jscomp.arrayFromIterable(scaleType.stackBy.map(function(s){return s.fieldDef.field}))):\nvoid 0;if(isSortField(sort))return scaleType\x3dscaleType\x26\x26!contains(stackDimensions,sort.field),normalizeSortField(sort,scaleType);if(sort\x26\x26sort.encoding){channel\x3dsort.order;model\x3dmodel.fieldDef(sort.encoding);sort\x3dmodel.aggregate;var field$508\x3dmodel.field;scaleType\x3dscaleType\x26\x26!contains(stackDimensions,field$508);if(isArgminDef(sort)||isArgmaxDef(sort))return normalizeSortField({field:vgField(model),order:channel},scaleType);if(isAggregateOp(sort)||!sort)return normalizeSortField({op:sort,field:field$508,\norder:channel},scaleType)}else{if(\x22descending\x22\x3d\x3d\x3dsort)return{op:\x22min\x22,field:model.vgField(channel),order:\x22descending\x22};if(contains([\x22ascending\x22,void 0],sort))return!0}}}function canUseUnaggregatedDomain(fieldDef,scaleType){var aggregate\x3dfieldDef.aggregate,type\x3dfieldDef.type;return aggregate?isString(aggregate)\x26\x26!SHARED_DOMAIN_OP_INDEX[aggregate]?{valid:!1,reason:\x27Unaggregated domain not applicable for \x22\x27+aggregate+\x27\x22 since it produces values outside the origin domain of the source data.\x27}:\x22quantitative\x22\x3d\x3d\x3d\ntype\x26\x26\x22log\x22\x3d\x3d\x3dscaleType?{valid:!1,reason:\x22Unaggregated domain is currently unsupported for log scale (\x22+stringify(fieldDef)+\x22).\x22}:{valid:!0}:{valid:!1,reason:\x22Using unaggregated domain with raw field has no effect (\x22+stringify(fieldDef)+\x22).\x22}}function domainsTieBreaker(v1,v2$jscomp$0,property,propertyOf){if(v1.explicit\x26\x26v2$jscomp$0.explicit){var v2\x3dv2$jscomp$0.value;property\x3d\x22Conflicting \x22+propertyOf.toString()+\x27 property \x22\x27+property.toString()+\x27\x22 (\x27+stringify(v1.value)+\x22 and \x22+stringify(v2)+\x22). Using the union of the two domains.\x22;\nwarn(property)}return{explicit:v1.explicit,value:[].concat($jscomp.arrayFromIterable(v1.value),$jscomp.arrayFromIterable(v2$jscomp$0.value))}}function mergeDomains(domains){var uniqueDomains\x3dunique(domains.map(function(domain){return isDataRefDomain(domain)?__rest(domain,[\x22sort\x22]):domain}),hash),sorts\x3dunique(domains.map(function(d){if(isDataRefDomain(d))return d\x3dd.sort,void 0!\x3d\x3dd\x26\x26!0!\x3d\x3dd\x26\x26!1!\x3d\x3dd\x26\x26(\x22op\x22in d\x26\x26\x22count\x22\x3d\x3d\x3dd.op\x26\x26delete d.field,\x22ascending\x22\x3d\x3d\x3dd.order\x26\x26delete d.order),d}).filter(function(s){return void 0!\x3d\x3d\ns}),hash);if(0!\x3d\x3duniqueDomains.length){if(1\x3d\x3d\x3duniqueDomains.length){uniqueDomains\x3ddomains[0];if(isDataRefDomain(uniqueDomains)\x26\x260\x3csorts.length){var sort$511\x3dsorts[0];1\x3csorts.length?(warn(\x22Domains that should be unioned has conflicting sort properties. Sort will be set to true.\x22),sort$511\x3d!0):isObject(sort$511)\x26\x26\x22field\x22in sort$511\x26\x26uniqueDomains.field\x3d\x3d\x3dsort$511.field\x26\x26(sort$511\x3dsort$511.order?{order:sort$511.order}:!0);return Object.assign(Object.assign({},uniqueDomains),{sort:sort$511})}return uniqueDomains}sorts\x3d\nunique(sorts.map(function(s){if(!0\x3d\x3d\x3ds||!1\x3d\x3d\x3ds||!(\x22op\x22in s)||s.op in MULTIDOMAIN_SORT_OP_INDEX)return s;warn(\x22Dropping sort property \x22+stringify(s)+\x27 as unioned domains only support boolean or op \x22count\x22, \x22min\x22, and \x22max\x22.\x27);return!0}),hash);1\x3d\x3d\x3dsorts.length?sort$511\x3dsorts[0]:1\x3csorts.length\x26\x26(warn(\x22Domains that should be unioned has conflicting sort properties. Sort will be set to true.\x22),sort$511\x3d!0);sorts\x3dunique(domains.map(function(d){return isDataRefDomain(d)?d.data:null}),function(x){return x});\nreturn 1\x3d\x3d\x3dsorts.length\x26\x26null!\x3d\x3dsorts[0]?Object.assign({data:sorts[0],fields:uniqueDomains.map(function(d){return d.field})},sort$511?{sort:sort$511}:{}):Object.assign({fields:uniqueDomains},sort$511?{sort:sort$511}:{})}}function getFieldFromDomain(domain){if(isDataRefDomain(domain)\x26\x26isString(domain.field))return domain.field;var JSCompiler_inline_result\x3disArray(domain)?!1:\x22fields\x22in domain\x26\x26!(\x22data\x22in domain);if(JSCompiler_inline_result){domain\x3d$jscomp.makeIterator(domain.fields);for(JSCompiler_inline_result\x3d\ndomain.next();!JSCompiler_inline_result.done;JSCompiler_inline_result\x3ddomain.next())if(JSCompiler_inline_result\x3dJSCompiler_inline_result.value,isDataRefDomain(JSCompiler_inline_result)\x26\x26isString(JSCompiler_inline_result.field))if(!field$513)var field$513\x3dJSCompiler_inline_result.field;else if(field$513!\x3d\x3dJSCompiler_inline_result.field)return warn(\x22Detected faceted independent scales that union domain of multiple fields from different data sources. We will use the first field. The result view size may be incorrect.\x22),\nfield$513;warn(\x22Detected faceted independent scales that union domain of the same fields from different source. We will assume that this is the same field from a different fork of the same data source. However, if this is not the case, the result view size may be incorrect.\x22);return field$513}field$513\x3disArray(domain)?!1:\x22fields\x22in domain\x26\x26\x22data\x22in domain;if(field$513)return warn(\x22Detected faceted independent scales that union domain of multiple fields from the same data source. We will use the first field. The result view size may be incorrect.\x22),\nfield$513\x3ddomain.fields[0],isString(field$513)?field$513:void 0}function assembleDomain(model,channel){channel\x3dmodel.component.scales[channel].get(\x22domains\x22).map(function(domain){isDataRefDomain(domain)\x26\x26(domain.data\x3dmodel.lookupDataSource(domain.data));return domain});return mergeDomains(channel)}function assembleScales(model){return isLayerModel(model)||isConcatModel(model)?model.children.reduce(function(scales,child){return scales.concat(assembleScales(child))},assembleScalesForModel(model)):assembleScalesForModel(model)}\nfunction assembleScalesForModel(model){return keys$jscomp$0(model.component.scales).reduce(function(scales,channel){var scaleComponent\x3dmodel.component.scales[channel];if(scaleComponent.merged)return scales;var scale\x3dscaleComponent.combine();scaleComponent\x3dscale.name;var type\x3dscale.type,selectionExtent\x3dscale.selectionExtent,reverse\x3dscale.reverse,otherScaleProps\x3d__rest(scale,\x22name type selectionExtent domains range reverse\x22.split(\x22 \x22));scale\x3dscale.range;scale\x3dchannel in POSITION_SCALE_CHANNEL_INDEX\x26\x26\nisVgRangeStep(scale)?{step:{signal:scaleComponent+\x22_step\x22}}:scale;if(selectionExtent){var domainRaw\x3dselectionExtent.selection;domainRaw\x3dmodel.getSelectionComponent(domainRaw,varName(domainRaw));domainRaw\x3d{signal:parseSelectionBinExtent(domainRaw,selectionExtent)}}channel\x3dassembleDomain(model,channel);scales.push(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({name:scaleComponent,type:type},channel?{domain:channel}:{}),domainRaw?{domainRaw:domainRaw}:{}),{range:scale}),void 0!\x3d\x3d\nreverse?{reverse:reverse}:{}),otherScaleProps));return scales},[])}function getSizeChannel$1(channel){return\x22x\x22\x3d\x3d\x3dchannel?\x22width\x22:\x22y\x22\x3d\x3d\x3dchannel?\x22height\x22:void 0}function getBinStepSignal(model,channel){var fieldDef\x3dmodel.fieldDef(channel);if(fieldDef\x26\x26fieldDef.bin\x26\x26isBinning(fieldDef.bin)){var binSignal\x3dgetBinSignalName(model,fieldDef.field,fieldDef.bin);channel\x3dgetSizeChannel$1(channel);var sizeSignal\x3dmodel.getName(channel);return new SignalRefWrapper(function(){var updatedName\x3dmodel.getSignalName(binSignal);\nupdatedName\x3d\x22(\x22+updatedName+\x22.stop - \x22+updatedName+\x22.start) / \x22+updatedName+\x22.step\x22;return model.getSignalName(sizeSignal)+\x22 / (\x22+updatedName+\x22)\x22})}}function parseRangeForChannel(channel,model){for(var specifiedScale\x3dmodel.specifiedScales[channel],size\x3dmodel.size,scaleType\x3dmodel.getScaleComponent(channel).get(\x22type\x22),$jscomp$iter$218\x3d$jscomp.makeIterator(RANGE_PROPERTIES),$jscomp$key$property\x3d$jscomp$iter$218.next();!$jscomp$key$property.done;$jscomp$key$property\x3d$jscomp$iter$218.next())if($jscomp$key$property\x3d\n$jscomp$key$property.value,void 0!\x3d\x3dspecifiedScale[$jscomp$key$property]){var supportedByScaleType\x3dscaleTypeSupportProperty(scaleType,$jscomp$key$property),channelIncompatability\x3dchannelScalePropertyIncompatability(channel,$jscomp$key$property);if(supportedByScaleType)if(channelIncompatability)warn(channelIncompatability);else switch($jscomp$key$property){case \x22range\x22:return isArray(specifiedScale.range)\x26\x26channel in POSITION_SCALE_CHANNEL_INDEX?makeExplicit(specifiedScale.range.map(function(v){if(\x22width\x22\x3d\x3d\x3d\nv||\x22height\x22\x3d\x3d\x3dv){v\x3dmodel.getName(v);var getSignalName\x3dmodel.getSignalName.bind(model);return SignalRefWrapper.fromName(getSignalName,v)}return v})):makeExplicit(specifiedScale.range);case \x22scheme\x22:return makeExplicit(parseScheme(specifiedScale[$jscomp$key$property]))}else warn(scalePropertyNotWorkWithScaleType(scaleType,$jscomp$key$property,channel))}if(\x22x\x22\x3d\x3d\x3dchannel||\x22y\x22\x3d\x3d\x3dchannel)if(specifiedScale\x3d\x22x\x22\x3d\x3d\x3dchannel?\x22width\x22:\x22height\x22,size\x3dsize[specifiedScale],isStep(size)){if(scaleType in DISCRETE_DOMAIN_INDEX)return makeExplicit({step:size.step});\nwarn(stepDropped(specifiedScale))}return makeImplicit(defaultRange(channel,model))}function parseScheme(scheme){return!isString(scheme)\x26\x26scheme.name?Object.assign({scheme:scheme.name},omit(scheme,[\x22name\x22])):{scheme:scheme}}function defaultRange(channel,model){var size\x3dmodel.size,config\x3dmodel.config,mark\x3dmodel.mark,encoding\x3dmodel.encoding,getSignalName\x3dmodel.getSignalName.bind(model),type\x3dgetFieldOrDatumDef(encoding[channel]).type;encoding\x3dmodel.getScaleComponent(channel).get(\x22type\x22);var $jscomp$destructuring$var320\x3d\nmodel.specifiedScales[channel],domain\x3d$jscomp$destructuring$var320.domain;$jscomp$destructuring$var320\x3d$jscomp$destructuring$var320.domainMid;switch(channel){case \x22x\x22:case \x22y\x22:if(contains([\x22point\x22,\x22band\x22],encoding))if(\x22x\x22\x3d\x3d\x3dchannel\x26\x26!size.width){if(config\x3dgetViewConfigDiscreteSize(config.view,\x22width\x22),isStep(config))return config}else if(\x22y\x22\x3d\x3d\x3dchannel\x26\x26!size.height\x26\x26(config\x3dgetViewConfigDiscreteSize(config.view,\x22height\x22),isStep(config)))return config;config\x3dgetSizeChannel$1(channel);config\x3dmodel.getName(config);\nreturn\x22y\x22\x3d\x3d\x3dchannel\x26\x26encoding in CONTINUOUS_DOMAIN_INDEX?[SignalRefWrapper.fromName(getSignalName,config),0]:[0,SignalRefWrapper.fromName(getSignalName,config)];case \x22size\x22:return getSignalName\x3dmodel.component.scales[channel].get(\x22zero\x22),getSignalName\x3dsizeRangeMin(mark,getSignalName,config),size\x3dsizeRangeMax(mark,size,model,config),encoding in CONTINUOUS_TO_DISCRETE_INDEX?interpolateRange(getSignalName,size,defaultContinuousToDiscreteCount(encoding,config,domain,channel)):[getSignalName,size];case \x22theta\x22:return[0,\n2*Math.PI];case \x22angle\x22:return[0,360];case \x22radius\x22:return[0,new SignalRefWrapper(function(){var w\x3dmodel.getSignalName(\x22width\x22),h\x3dmodel.getSignalName(\x22height\x22);return\x22min(\x22+w+\x22,\x22+h+\x22)/2\x22})];case \x22strokeWidth\x22:return[config.scale.minStrokeWidth,config.scale.maxStrokeWidth];case \x22strokeDash\x22:return[[1,0],[4,2],[2,1],[1,1],[1,2,4,2]];case \x22shape\x22:return\x22symbol\x22;case \x22color\x22:case \x22fill\x22:case \x22stroke\x22:return\x22ordinal\x22\x3d\x3d\x3dencoding?\x22nominal\x22\x3d\x3d\x3dtype?\x22category\x22:\x22ordinal\x22:void 0!\x3d\x3d$jscomp$destructuring$var320?\n\x22diverging\x22:\x22rect\x22\x3d\x3d\x3dmark||\x22geoshape\x22\x3d\x3d\x3dmark?\x22heatmap\x22:\x22ramp\x22;case \x22opacity\x22:case \x22fillOpacity\x22:case \x22strokeOpacity\x22:return[config.scale.minOpacity,config.scale.maxOpacity]}throw Error(\x22Scale range undefined for channel \x22+channel);}function defaultContinuousToDiscreteCount(scaleType,config,domain,channel){switch(scaleType){case \x22quantile\x22:return config.scale.quantileCount;case \x22quantize\x22:return config.scale.quantizeCount;case \x22threshold\x22:if(void 0!\x3d\x3ddomain\x26\x26isArray(domain))return domain.length+1;\nwarn(\x22Domain for \x22+channel+\x22 is required for threshold scale.\x22);return 3}}function interpolateRange(rangeMin,rangeMax,cardinality){var f\x3dfunction(){var rMax\x3dsignalOrStringValue(rangeMax),rMin\x3dsignalOrStringValue(rangeMin),step\x3d\x22(\x22+rMax+\x22 - \x22+rMin+\x22) / (\x22+cardinality+\x22 - 1)\x22;return\x22sequence(\x22+rMin+\x22, \x22+rMax+\x22 + \x22+step+\x22, \x22+step+\x22)\x22};return isSignalRef(rangeMax)?new SignalRefWrapper(f):{signal:f()}}function sizeRangeMin(mark,zero,config){if(zero)return isSignalRef(zero)?{signal:zero.signal+\x22 ? 0 : \x22+\nsizeRangeMin(mark,!1,config)}:0;switch(mark){case \x22bar\x22:case \x22tick\x22:return config.scale.minBandSize;case \x22line\x22:case \x22trail\x22:case \x22rule\x22:return config.scale.minStrokeWidth;case \x22text\x22:return config.scale.minFontSize;case \x22point\x22:case \x22square\x22:case \x22circle\x22:return config.scale.minSize}throw Error(incompatibleChannel(\x22size\x22,mark));}function sizeRangeMax(mark,size,model,config){model\x3d{x:getBinStepSignal(model,\x22x\x22),y:getBinStepSignal(model,\x22y\x22)};switch(mark){case \x22bar\x22:case \x22tick\x22:if(void 0!\x3d\x3dconfig.scale.maxBandSize)return config.scale.maxBandSize;\nvar min\x3dminXYStep(size,model,config.view);return isNumber(min)?min-1:new SignalRefWrapper(function(){return min.signal+\x22 - 1\x22});case \x22line\x22:case \x22trail\x22:case \x22rule\x22:return config.scale.maxStrokeWidth;case \x22text\x22:return config.scale.maxFontSize;case \x22point\x22:case \x22square\x22:case \x22circle\x22:if(config.scale.maxSize)return config.scale.maxSize;var pointStep\x3dminXYStep(size,model,config.view);return isNumber(pointStep)?Math.pow(.95*pointStep,2):new SignalRefWrapper(function(){return\x22pow(0.95 * \x22+pointStep.signal+\n\x22, 2)\x22})}throw Error(incompatibleChannel(\x22size\x22,mark));}function minXYStep(size,xyStepSignals,viewConfig){var widthStep\x3disStep(size.width)?size.width.step:getViewConfigDiscreteStep(viewConfig,\x22width\x22),heightStep\x3disStep(size.height)?size.height.step:getViewConfigDiscreteStep(viewConfig,\x22height\x22);return xyStepSignals.x||xyStepSignals.y?new SignalRefWrapper(function(){return\x22min(\x22+[xyStepSignals.x?xyStepSignals.x.signal:widthStep,xyStepSignals.y?xyStepSignals.y.signal:heightStep].join(\x22, \x22)+\x22)\x22}):Math.min(widthStep,\nheightStep)}function parseScaleProperty(model,property){if(isUnitModel(model))for(var localScaleComponents\x3dmodel.component.scales,config\x3dmodel.config,encoding\x3dmodel.encoding,markDef\x3dmodel.markDef,specifiedScales\x3dmodel.specifiedScales,$jscomp$inline_4933\x3d$jscomp.makeIterator(keys$jscomp$0(localScaleComponents)),$jscomp$key$channel\x3d$jscomp$inline_4933.next();!$jscomp$key$channel.done;$jscomp$key$channel\x3d$jscomp$inline_4933.next()){var channel\x3d$jscomp$key$channel.value,specifiedScale\x3dspecifiedScales[channel];\n$jscomp$key$channel\x3dlocalScaleComponents[channel];var mergedScaleCmpt\x3dmodel.getScaleComponent(channel),fieldOrDatumDef\x3dgetFieldOrDatumDef(encoding[channel]),specifiedValue\x3dspecifiedScale[property],scaleType$516\x3dmergedScaleCmpt.get(\x22type\x22),scalePadding\x3dmergedScaleCmpt.get(\x22padding\x22);mergedScaleCmpt\x3dmergedScaleCmpt.get(\x22paddingInner\x22);var supportedByScaleType\x3dscaleTypeSupportProperty(scaleType$516,property),channelIncompatability\x3dchannelScalePropertyIncompatability(channel,property);void 0!\x3d\x3dspecifiedValue\x26\x26\n(supportedByScaleType?channelIncompatability\x26\x26warn(channelIncompatability):warn(scalePropertyNotWorkWithScaleType(scaleType$516,property,channel)));supportedByScaleType\x26\x26void 0\x3d\x3d\x3dchannelIncompatability\x26\x26(void 0!\x3d\x3dspecifiedValue?$jscomp$key$channel.copyKeyFromObject(property,specifiedScale):(channel\x3dproperty in scaleRules?scaleRules[property]({model:model,channel:channel,fieldOrDatumDef:fieldOrDatumDef,scaleType:scaleType$516,scalePadding:scalePadding,scalePaddingInner:mergedScaleCmpt,domain:specifiedScale.domain,\nmarkDef:markDef,config:config}):config.scale[property],void 0!\x3d\x3dchannel\x26\x26$jscomp$key$channel.set(property,channel,!1)))}else parseNonUnitScaleProperty(model,property)}function parseScaleRange(model){if(isUnitModel(model))for(var localScaleComponents\x3dmodel.component.scales,$jscomp$inline_4950\x3d$jscomp.makeIterator(SCALE_CHANNELS),$jscomp$key$channel\x3d$jscomp$inline_4950.next();!$jscomp$key$channel.done;$jscomp$key$channel\x3d$jscomp$inline_4950.next()){var channel\x3d$jscomp$key$channel.value;if($jscomp$key$channel\x3d\nlocalScaleComponents[channel])channel\x3dparseRangeForChannel(channel,model),$jscomp$key$channel.setWithExplicit(\x22range\x22,channel)}else parseNonUnitScaleProperty(model,\x22range\x22)}function parseNonUnitScaleProperty(model,property){for(var localScaleComponents\x3dmodel.component.scales,$jscomp$iter$220\x3d$jscomp.makeIterator(model.children),$jscomp$key$child\x3d$jscomp$iter$220.next();!$jscomp$key$child.done;$jscomp$key$child\x3d$jscomp$iter$220.next()){var child\x3d$jscomp$key$child.value;\x22range\x22\x3d\x3d\x3dproperty?parseScaleRange(child):\nparseScaleProperty(child,property)}$jscomp$iter$220\x3d$jscomp.makeIterator(keys$jscomp$0(localScaleComponents));for(child\x3d$jscomp$iter$220.next();!child.done;child\x3d$jscomp$iter$220.next()){child\x3dchild.value;var valueWithExplicit\x3dvoid 0,$jscomp$iter$221\x3d$jscomp.makeIterator(model.children);for($jscomp$key$child\x3d$jscomp$iter$221.next();!$jscomp$key$child.done;$jscomp$key$child\x3d$jscomp$iter$221.next())if($jscomp$key$child\x3d$jscomp$key$child.value.component.scales[child])$jscomp$key$child\x3d$jscomp$key$child.getWithExplicit(property),\nvalueWithExplicit\x3dmergeValuesWithExplicit(valueWithExplicit,$jscomp$key$child,property,\x22scale\x22,tieBreakByComparing(function(v1,v2){switch(property){case \x22range\x22:if(v1.step\x26\x26v2.step)return v1.step-v2.step}return 0}));localScaleComponents[child].setWithExplicit(property,valueWithExplicit)}}function bins$jscomp$0(model,fieldDef){var bin\x3dfieldDef.bin;if(isBinning(bin)){var binSignal\x3dgetBinSignalName(model,fieldDef.field,bin);return new SignalRefWrapper(function(){return model.getSignalName(binSignal)})}if(isBinned(bin)\x26\x26\nisObject(bin)\x26\x26void 0!\x3d\x3dbin.step)return{step:bin.step}}function defaultType$2(channel,fieldDef,mark){var _a;switch(fieldDef.type){case \x22nominal\x22:case \x22ordinal\x22:if(isColorChannel(channel)||\x22discrete\x22\x3d\x3d\x3drangeType(channel))return\x22shape\x22\x3d\x3d\x3dchannel\x26\x26\x22ordinal\x22\x3d\x3d\x3dfieldDef.type\x26\x26warn(discreteChannelCannotEncode(channel,\x22ordinal\x22)),\x22ordinal\x22;if(channel in POSITION_SCALE_CHANNEL_INDEX){if(contains([\x22rect\x22,\x22bar\x22,\x22image\x22,\x22rule\x22],mark))return\x22band\x22}else if(\x22arc\x22\x3d\x3d\x3dmark\x26\x26channel in POLAR_POSITION_SCALE_CHANNEL_INDEX)return\x22band\x22;\nreturn void 0!\x3d\x3dfieldDef.band||isPositionFieldOrDatumDef(fieldDef)\x26\x26(null\x3d\x3d\x3d(_a\x3dfieldDef.axis)||void 0\x3d\x3d\x3d_a?0:_a.tickBand)?\x22band\x22:\x22point\x22;case \x22temporal\x22:if(!isColorChannel(channel)){if(\x22discrete\x22\x3d\x3d\x3drangeType(channel))return warn(discreteChannelCannotEncode(channel,\x22temporal\x22)),\x22ordinal\x22;if(isFieldDef(fieldDef)\x26\x26fieldDef.timeUnit\x26\x26normalizeTimeUnit(fieldDef.timeUnit).utc)return\x22utc\x22}return\x22time\x22;case \x22quantitative\x22:if(isColorChannel(channel)){if(isFieldDef(fieldDef)\x26\x26isBinning(fieldDef.bin))return\x22bin-ordinal\x22}else if(\x22discrete\x22\x3d\x3d\x3d\nrangeType(channel))return warn(discreteChannelCannotEncode(channel,\x22quantitative\x22)),\x22ordinal\x22;return\x22linear\x22;case \x22geojson\x22:return}throw Error(\x27Invalid field type \x22\x27+fieldDef.type+\x27\x22.\x27);}function parseScaleCore(model){if(isUnitModel(model))model.component.scales\x3dparseUnitScaleCore(model);else{for(var JSCompiler_temp_const\x3dmodel.component,_a,scaleComponents\x3dmodel.component.scales\x3d{},scaleTypeWithExplicitIndex\x3d{},resolve\x3dmodel.component.resolve,$jscomp$inline_4961\x3d$jscomp.makeIterator(model.children),\n$jscomp$key$child\x3d$jscomp$inline_4961.next();!$jscomp$key$child.done;$jscomp$key$child\x3d$jscomp$inline_4961.next()){$jscomp$key$child\x3d$jscomp$key$child.value;parseScaleCore($jscomp$key$child);for(var $jscomp$inline_4964\x3d$jscomp.makeIterator(keys$jscomp$0($jscomp$key$child.component.scales)),$jscomp$key$channel\x3d$jscomp$inline_4964.next();!$jscomp$key$channel.done;$jscomp$key$channel\x3d$jscomp$inline_4964.next()){$jscomp$key$channel\x3d$jscomp$key$channel.value;var JSCompiler_temp_const$jscomp$0\x3dresolve.scale;\nif(null!\x3d\x3d(_a\x3dresolve.scale[$jscomp$key$channel])\x26\x26void 0!\x3d\x3d_a)var JSCompiler_temp\x3d_a;else if(JSCompiler_temp\x3dmodel,isLayerModel(JSCompiler_temp)||isFacetModel(JSCompiler_temp))JSCompiler_temp\x3d\x22shared\x22;else if(isConcatModel(JSCompiler_temp))JSCompiler_temp\x3d$jscomp$key$channel in POSITION_SCALE_CHANNEL_INDEX?\x22independent\x22:\x22shared\x22;else throw Error(\x22invalid model type for resolve\x22);JSCompiler_temp_const$jscomp$0[$jscomp$key$channel]\x3dJSCompiler_temp;if(\x22shared\x22\x3d\x3d\x3dresolve.scale[$jscomp$key$channel])if(JSCompiler_temp_const$jscomp$0\x3d\nscaleTypeWithExplicitIndex[$jscomp$key$channel],JSCompiler_temp\x3d$jscomp$key$child.component.scales[$jscomp$key$channel].getWithExplicit(\x22type\x22),JSCompiler_temp_const$jscomp$0){var scaleCategory1\x3dSCALE_CATEGORY_INDEX[JSCompiler_temp_const$jscomp$0.value],scaleCategory2\x3dSCALE_CATEGORY_INDEX[JSCompiler_temp.value];scaleCategory1\x3d\x3d\x3dscaleCategory2||\x22ordinal-position\x22\x3d\x3d\x3dscaleCategory1\x26\x26\x22time\x22\x3d\x3d\x3dscaleCategory2||\x22ordinal-position\x22\x3d\x3d\x3dscaleCategory2\x26\x26\x22time\x22\x3d\x3d\x3dscaleCategory1?scaleTypeWithExplicitIndex[$jscomp$key$channel]\x3d\nmergeValuesWithExplicit(JSCompiler_temp_const$jscomp$0,JSCompiler_temp,\x22type\x22,\x22scale\x22,scaleTypeTieBreaker):(resolve.scale[$jscomp$key$channel]\x3d\x22independent\x22,delete scaleTypeWithExplicitIndex[$jscomp$key$channel])}else scaleTypeWithExplicitIndex[$jscomp$key$channel]\x3dJSCompiler_temp}}_a\x3d$jscomp.makeIterator(keys$jscomp$0(scaleTypeWithExplicitIndex));for($jscomp$key$channel\x3d_a.next();!$jscomp$key$channel.done;$jscomp$key$channel\x3d_a.next())for(resolve\x3d$jscomp$key$channel.value,$jscomp$inline_4961\x3dmodel.scaleName(resolve,\n!0),scaleComponents[resolve]\x3dnew ScaleComponent($jscomp$inline_4961,scaleTypeWithExplicitIndex[resolve]),$jscomp$inline_4964\x3d$jscomp.makeIterator(model.children),$jscomp$key$child\x3d$jscomp$inline_4964.next();!$jscomp$key$child.done;$jscomp$key$child\x3d$jscomp$inline_4964.next())if($jscomp$key$child\x3d$jscomp$key$child.value,$jscomp$key$channel\x3d$jscomp$key$child.component.scales[resolve])$jscomp$key$child.renameScale($jscomp$key$channel.get(\x22name\x22),$jscomp$inline_4961),$jscomp$key$channel.merged\x3d!0;JSCompiler_temp_const.scales\x3d\nscaleComponents}}function parseUnitScaleCore(model){var encoding\x3dmodel.encoding,mark\x3dmodel.mark;return SCALE_CHANNELS.reduce(function(scaleComponents,channel){var fieldOrDatumDef\x3dgetFieldOrDatumDef(encoding[channel]);if(fieldOrDatumDef\x26\x26mark\x3d\x3d\x3dGEOSHAPE\x26\x26\x22shape\x22\x3d\x3d\x3dchannel\x26\x26fieldOrDatumDef.type\x3d\x3d\x3dGEOJSON)return scaleComponents;var specifiedScale\x3dfieldOrDatumDef\x26\x26fieldOrDatumDef.scale;if(fieldOrDatumDef\x26\x26null!\x3d\x3dspecifiedScale\x26\x26!1!\x3d\x3dspecifiedScale){specifiedScale\x3dnull!\x3d\x3dspecifiedScale\x26\x26void 0!\x3d\x3dspecifiedScale?\nspecifiedScale:{};var specifiedScale$jscomp$0\x3dspecifiedScale,defaultScaleType\x3ddefaultType$2(channel,fieldOrDatumDef,mark);specifiedScale$jscomp$0\x3dspecifiedScale$jscomp$0.type;SCALE_CHANNEL_INDEX[channel]?void 0!\x3d\x3dspecifiedScale$jscomp$0?channelSupportScaleType(channel,specifiedScale$jscomp$0)?isFieldDef(fieldOrDatumDef)\x26\x26!scaleTypeSupportDataType(specifiedScale$jscomp$0,fieldOrDatumDef.type)?(warn(\x27FieldDef does not work with \x22\x27+specifiedScale$jscomp$0+\x27\x22 scale. We are using \x22\x27+defaultScaleType+\x27\x22 scale instead.\x27),\nfieldOrDatumDef\x3ddefaultScaleType):fieldOrDatumDef\x3dspecifiedScale$jscomp$0:(warn(\x27Channel \x22\x27+channel+\x27\x22 does not work with \x22\x27+specifiedScale$jscomp$0+\x27\x22 scale. We are using \x22\x27+defaultScaleType+\x27\x22 scale instead.\x27),fieldOrDatumDef\x3ddefaultScaleType):fieldOrDatumDef\x3ddefaultScaleType:fieldOrDatumDef\x3dnull;scaleComponents[channel]\x3dnew ScaleComponent(model.scaleName(channel+\x22\x22,!0),{value:fieldOrDatumDef,explicit:specifiedScale.type\x3d\x3d\x3dfieldOrDatumDef})}return scaleComponents},{})}function isUnitModel(model){return\x22unit\x22\x3d\x3d\x3d\n(null\x3d\x3d\x3dmodel||void 0\x3d\x3d\x3dmodel?void 0:model.type)}function isFacetModel(model){return\x22facet\x22\x3d\x3d\x3d(null\x3d\x3d\x3dmodel||void 0\x3d\x3d\x3dmodel?void 0:model.type)}function isConcatModel(model){return\x22concat\x22\x3d\x3d\x3d(null\x3d\x3d\x3dmodel||void 0\x3d\x3d\x3dmodel?void 0:model.type)}function isLayerModel(model){return\x22layer\x22\x3d\x3d\x3d(null\x3d\x3d\x3dmodel||void 0\x3d\x3d\x3dmodel?void 0:model.type)}function makeWalkTree(data){function walkTree(node,dataSource){var _a;node instanceof SourceNode\x26\x26!(node.isGenerator||\x22url\x22in node.data)\x26\x26(data.push(dataSource),dataSource\x3d\n{name:null,source:dataSource.name,transform:[]});node instanceof ParseNode\x26\x26(node.parent instanceof SourceNode\x26\x26!dataSource.source?(dataSource.format\x3dObject.assign(Object.assign({},null!\x3d\x3d(_a\x3ddataSource.format)\x26\x26void 0!\x3d\x3d_a?_a:{}),{parse:node.assembleFormatParse()}),dataSource.transform.push.apply(dataSource.transform,$jscomp.arrayFromIterable(node.assembleTransforms(!0)))):dataSource.transform.push.apply(dataSource.transform,$jscomp.arrayFromIterable(node.assembleTransforms())));if(node instanceof\nFacetNode)for(dataSource.name||(dataSource.name\x3d\x22data_\x22+datasetIndex++),!dataSource.source||0\x3cdataSource.transform.length?(data.push(dataSource),node.data\x3ddataSource.name):node.data\x3ddataSource.source,_a\x3d$jscomp.makeIterator(node.assemble()),node\x3d_a.next();!node.done;node\x3d_a.next())data.push(node.value);else switch((node instanceof GraticuleNode||node instanceof SequenceNode||node instanceof FilterInvalidNode||node instanceof FilterNode||node instanceof CalculateNode||node instanceof GeoPointNode||\nnode instanceof GeoJSONNode||node instanceof AggregateNode||node instanceof LookupNode||node instanceof WindowTransformNode||node instanceof JoinAggregateTransformNode||node instanceof FoldTransformNode||node instanceof FlattenTransformNode||node instanceof DensityTransformNode||node instanceof LoessTransformNode||node instanceof QuantileTransformNode||node instanceof RegressionTransformNode||node instanceof IdentifierNode||node instanceof SampleTransformNode||node instanceof PivotTransformNode)\x26\x26\ndataSource.transform.push(node.assemble()),(node instanceof BinNode||node instanceof TimeUnitNode||node instanceof ImputeNode||node instanceof StackNode)\x26\x26dataSource.transform.push.apply(dataSource.transform,$jscomp.arrayFromIterable(node.assemble())),node instanceof OutputNode\x26\x26(dataSource.source\x26\x260\x3d\x3d\x3ddataSource.transform.length?node.setSource(dataSource.source):node.parent instanceof OutputNode?node.setSource(dataSource.name):(dataSource.name||(dataSource.name\x3d\x22data_\x22+datasetIndex++),node.setSource(dataSource.name),\n1\x3d\x3d\x3dnode.numChildren()\x26\x26(data.push(dataSource),dataSource\x3d{name:null,source:dataSource.name,transform:[]}))),node.numChildren()){case 0:node instanceof OutputNode\x26\x26(!dataSource.source||0\x3cdataSource.transform.length)\x26\x26data.push(dataSource);break;case 1:walkTree(node.children[0],dataSource);break;default:for(dataSource.name||(dataSource.name\x3d\x22data_\x22+datasetIndex++),_a\x3ddataSource.name,!dataSource.source||0\x3cdataSource.transform.length?data.push(dataSource):_a\x3ddataSource.source,node\x3d$jscomp.makeIterator(node.children),\ndataSource\x3dnode.next();!dataSource.done;dataSource\x3dnode.next())walkTree(dataSource.value,{name:null,source:_a,transform:[]})}}var datasetIndex\x3d0;return walkTree}function assembleFacetData(root){for(var data\x3d[],walkTree\x3dmakeWalkTree(data),$jscomp$iter$235\x3d$jscomp.makeIterator(root.children),$jscomp$key$child\x3d$jscomp$iter$235.next();!$jscomp$key$child.done;$jscomp$key$child\x3d$jscomp$iter$235.next())walkTree($jscomp$key$child.value,{source:root.name,name:null,transform:[]});return data}function assembleRootData(dataComponent,\ndatasets){for(var _a,_b,data\x3d[],walkTree\x3dmakeWalkTree(data),sourceIndex\x3d0,$jscomp$iter$236\x3d$jscomp.makeIterator(dataComponent.sources),$jscomp$key$root\x3d$jscomp$iter$236.next();!$jscomp$key$root.done;$jscomp$key$root\x3d$jscomp$iter$236.next()){$jscomp$key$root\x3d$jscomp$key$root.value;$jscomp$key$root.hasName()||($jscomp$key$root.dataName\x3d\x22source_\x22+sourceIndex++);var newData\x3d$jscomp$key$root.assemble();walkTree($jscomp$key$root,newData)}sourceIndex\x3d$jscomp.makeIterator(data);for(walkTree\x3dsourceIndex.next();!walkTree.done;walkTree\x3d\nsourceIndex.next())walkTree\x3dwalkTree.value,0\x3d\x3d\x3dwalkTree.transform.length\x26\x26delete walkTree.transform;walkTree\x3d0;sourceIndex\x3d$jscomp.makeIterator(data.entries());for($jscomp$iter$236\x3dsourceIndex.next();!$jscomp$iter$236.done;$jscomp$iter$236\x3dsourceIndex.next())$jscomp$key$root\x3d$jscomp.makeIterator($jscomp$iter$236.value),$jscomp$iter$236\x3d$jscomp$key$root.next().value,$jscomp$key$root\x3d$jscomp$key$root.next().value,0!\x3d\x3d(null!\x3d\x3d(_a\x3d$jscomp$key$root.transform)\x26\x26void 0!\x3d\x3d_a?_a:[]).length||$jscomp$key$root.source||\ndata.splice(walkTree++,0,data.splice($jscomp$iter$236,1)[0]);_a\x3d$jscomp.makeIterator(data);for(walkTree\x3d_a.next();!walkTree.done;walkTree\x3d_a.next())for(walkTree\x3d$jscomp.makeIterator(null!\x3d\x3d(_b\x3dwalkTree.value.transform)\x26\x26void 0!\x3d\x3d_b?_b:[]),sourceIndex\x3dwalkTree.next();!sourceIndex.done;sourceIndex\x3dwalkTree.next())sourceIndex\x3dsourceIndex.value,\x22lookup\x22\x3d\x3d\x3dsourceIndex.type\x26\x26(sourceIndex.from\x3ddataComponent.outputNodes[sourceIndex.from].getSource());dataComponent\x3d$jscomp.makeIterator(data);for(walkTree\x3d\ndataComponent.next();!walkTree.done;walkTree\x3ddataComponent.next())_b\x3dwalkTree.value,_b.name in datasets\x26\x26(_b.values\x3ddatasets[_b.name]);return data}function makeHeaderComponent(model,channel,labels){channel\x3d\x22row\x22\x3d\x3d\x3dchannel?\x22height\x22:\x22width\x22;return{labels:labels,sizeSignal:model.child.component.layoutSize.get(channel)?model.child.getSizeSignalRef(channel):void 0,axes:[]}}function mergeChildAxis(model,channel){var _a,child\x3dmodel.child;if(child.component.axes[channel]){var $jscomp$destructuring$var367\x3d\nmodel.component,layoutHeaders\x3d$jscomp$destructuring$var367.layoutHeaders;$jscomp$destructuring$var367\x3d$jscomp$destructuring$var367.resolve;$jscomp$destructuring$var367.axis[channel]\x3dparseGuideResolve($jscomp$destructuring$var367,channel);if(\x22shared\x22\x3d\x3d\x3d$jscomp$destructuring$var367.axis[channel])for($jscomp$destructuring$var367\x3d\x22x\x22\x3d\x3d\x3dchannel?\x22column\x22:\x22row\x22,layoutHeaders\x3dlayoutHeaders[$jscomp$destructuring$var367],channel\x3d$jscomp.makeIterator(child.component.axes[channel]),child\x3dchannel.next();!child.done;child\x3d\nchannel.next()){child\x3dchild.value;var JSCompiler_inline_result\x3dchild.get(\x22orient\x22);JSCompiler_inline_result\x3d\x22top\x22\x3d\x3d\x3dJSCompiler_inline_result||\x22left\x22\x3d\x3d\x3dJSCompiler_inline_result||isSignalRef(JSCompiler_inline_result)?\x22header\x22:\x22footer\x22;layoutHeaders[JSCompiler_inline_result]\x3dnull!\x3d\x3d(_a\x3dlayoutHeaders[JSCompiler_inline_result])\x26\x26void 0!\x3d\x3d_a?_a:[makeHeaderComponent(model,$jscomp$destructuring$var367,!1)];var mainAxis\x3dassembleAxis(child,\x22main\x22,model.config,{header:!0});mainAxis\x26\x26layoutHeaders[JSCompiler_inline_result][0].axes.push(mainAxis);\nchild.mainExtracted\x3d!0}}}function parseChildrenLayoutSize(model){model\x3d$jscomp.makeIterator(model.children);for(var $jscomp$key$child\x3dmodel.next();!$jscomp$key$child.done;$jscomp$key$child\x3dmodel.next())$jscomp$key$child.value.parseLayoutSize()}function parseNonUnitLayoutSizeForChannel(model,layoutSizeType){for(var sizeType\x3dgetSizeTypeFromLayoutSizeType(layoutSizeType),channel\x3dgetPositionScaleChannel(sizeType),resolve\x3dmodel.component.resolve,layoutSizeCmpt\x3dmodel.component.layoutSize,mergedSize,$jscomp$iter$245\x3d\n$jscomp.makeIterator(model.children),$jscomp$key$child\x3d$jscomp$iter$245.next();!$jscomp$key$child.done;$jscomp$key$child\x3d$jscomp$iter$245.next()){$jscomp$key$child\x3d$jscomp$key$child.value.component.layoutSize.getWithExplicit(sizeType);var scaleResolve\x3dresolve.scale[channel];if(\x22independent\x22\x3d\x3d\x3dscaleResolve\x26\x26\x22step\x22\x3d\x3d\x3d$jscomp$key$child.value){mergedSize\x3dvoid 0;break}if(mergedSize){if(\x22independent\x22\x3d\x3d\x3dscaleResolve\x26\x26mergedSize.value!\x3d\x3d$jscomp$key$child.value){mergedSize\x3dvoid 0;break}mergedSize\x3dmergeValuesWithExplicit(mergedSize,\n$jscomp$key$child,sizeType,\x22\x22)}else mergedSize\x3d$jscomp$key$child}if(mergedSize){channel\x3d$jscomp.makeIterator(model.children);for($jscomp$key$child\x3dchannel.next();!$jscomp$key$child.done;$jscomp$key$child\x3dchannel.next())resolve\x3d$jscomp$key$child.value,model.renameSignal(resolve.getName(sizeType),model.getName(layoutSizeType)),resolve.component.layoutSize.set(sizeType,\x22merged\x22,!1);layoutSizeCmpt.setWithExplicit(layoutSizeType,mergedSize)}else layoutSizeCmpt.setWithExplicit(layoutSizeType,{explicit:!1,\nvalue:void 0})}function defaultUnitSize(model,sizeType){var config\x3dmodel.config,scaleComponent\x3dmodel.getScaleComponent(\x22width\x22\x3d\x3d\x3dsizeType?\x22x\x22:\x22y\x22);if(scaleComponent)return model\x3dscaleComponent.get(\x22type\x22),scaleComponent\x3dscaleComponent.get(\x22range\x22),model in DISCRETE_DOMAIN_INDEX?(sizeType\x3dgetViewConfigDiscreteSize(config.view,sizeType),isVgRangeStep(scaleComponent)||isStep(sizeType)?\x22step\x22:sizeType):getViewConfigContinuousSize(config.view,sizeType);if(model.hasProjection||\x22arc\x22\x3d\x3d\x3dmodel.mark)return getViewConfigContinuousSize(config.view,\nsizeType);sizeType\x3dgetViewConfigDiscreteSize(config.view,sizeType);return isStep(sizeType)?sizeType.step:sizeType}function facetSortFieldName(fieldDef,sort,opt){return vgField(sort,Object.assign({suffix:\x22by_\x22+vgField(fieldDef)},null!\x3d\x3dopt\x26\x26void 0!\x3d\x3dopt?opt:{}))}function findSource(data,sources){var _a,_b,_c,_d,_e,_f,_g,_h,_j,_k;sources\x3d$jscomp.makeIterator(sources);for(var $jscomp$key$other\x3dsources.next();!$jscomp$key$other.done;$jscomp$key$other\x3dsources.next()){$jscomp$key$other\x3d$jscomp$key$other.value;\nvar otherData\x3d$jscomp$key$other.data;if(!(data.name\x26\x26$jscomp$key$other.hasName()\x26\x26data.name!\x3d\x3d$jscomp$key$other.dataName||(null\x3d\x3d\x3d(_a\x3ddata.format)||void 0\x3d\x3d\x3d_a?0:_a.mesh)\x26\x26(null\x3d\x3d\x3d(_b\x3dotherData.format)||void 0\x3d\x3d\x3d_b?0:_b.feature)||((null\x3d\x3d\x3d(_c\x3ddata.format)||void 0\x3d\x3d\x3d_c?0:_c.feature)||(null\x3d\x3d\x3d(_d\x3dotherData.format)||void 0\x3d\x3d\x3d_d?0:_d.feature))\x26\x26(null\x3d\x3d\x3d(_e\x3ddata.format)||void 0\x3d\x3d\x3d_e?void 0:_e.feature)!\x3d\x3d(null\x3d\x3d\x3d(_f\x3dotherData.format)||void 0\x3d\x3d\x3d_f?void 0:_f.feature)||((null\x3d\x3d\x3d(_g\x3ddata.format)||void 0\x3d\x3d\x3d\n_g?0:_g.mesh)||(null\x3d\x3d\x3d(_h\x3dotherData.format)||void 0\x3d\x3d\x3d_h?0:_h.mesh))\x26\x26(null\x3d\x3d\x3d(_j\x3ddata.format)||void 0\x3d\x3d\x3d_j?void 0:_j.mesh)!\x3d\x3d(null\x3d\x3d\x3d(_k\x3dotherData.format)||void 0\x3d\x3d\x3d_k?void 0:_k.mesh)))if(\x22values\x22in data\x26\x26\x22values\x22in otherData){if(deepEqual(data.values,otherData.values))return $jscomp$key$other}else if(\x22url\x22in data\x26\x26\x22url\x22in otherData){if(data.url\x3d\x3d\x3dotherData.url)return $jscomp$key$other}else if(isNamedData(data)\x26\x26data.name\x3d\x3d\x3d$jscomp$key$other.dataName)return $jscomp$key$other}return null}function parseRoot(model,\nsources){if(model.data||!model.parent){if(null\x3d\x3d\x3dmodel.data)return model\x3dnew SourceNode({values:[]}),sources.push(model),model;var existingSource\x3dfindSource(model.data,sources);if(existingSource)return isGenerator(model.data)||(existingSource.data.format\x3dmergeDeep({},model.data.format,existingSource.data.format)),!existingSource.hasName()\x26\x26model.data.name\x26\x26(existingSource.dataName\x3dmodel.data.name),existingSource;model\x3dnew SourceNode(model.data);sources.push(model);return model}return model.parent.component.data.facetRoot?\nmodel.parent.component.data.facetRoot:model.parent.component.data.main}function parseData(model){var _a,_b,_c,_d,_e,_f,_g,_h,_j,_k,head\x3dparseRoot(model,model.component.data.sources),$jscomp$destructuring$var383\x3dmodel.component.data,outputNodes\x3d$jscomp$destructuring$var383.outputNodes;$jscomp$destructuring$var383\x3d$jscomp$destructuring$var383.outputNodeRefCounts;var ancestorParse\x3dmodel.parent?model.parent.component.data.ancestorParse.clone():new AncestorParse,data\x3dmodel.data;isGenerator(data)?(\x22sequence\x22in\ndata?head\x3dnew SequenceNode(head,data.sequence):\x22graticule\x22in data\x26\x26(head\x3dnew GraticuleNode(head,data.graticule)),ancestorParse.parseNothing\x3d!0):null\x3d\x3d\x3d(null\x3d\x3d\x3d(_a\x3dnull\x3d\x3d\x3ddata||void 0\x3d\x3d\x3ddata?void 0:data.format)||void 0\x3d\x3d\x3d_a?void 0:_a.parse)\x26\x26(ancestorParse.parseNothing\x3d!0);head\x3dnull!\x3d\x3d(_b\x3dParseNode.makeExplicit(head,model,ancestorParse))\x26\x26void 0!\x3d\x3d_b?_b:head;head\x3dnew IdentifierNode(head);_a\x3dmodel.parent\x26\x26isLayerModel(model.parent);(isUnitModel(model)||isFacetModel(model))\x26\x26_a\x26\x26(head\x3dnull!\x3d\x3d(_c\x3dBinNode.makeFromEncoding(head,\nmodel))\x26\x26void 0!\x3d\x3d_c?_c:head);if(0\x3cmodel.transforms.length){var _a$jscomp$0,_b$jscomp$0;_c\x3d0;_b\x3d$jscomp.makeIterator(model.transforms);for(data\x3d_b.next();!data.done;data\x3d_b.next()){var t\x3ddata.value,transformNode\x3ddata\x3dvoid 0;if(\x22calculate\x22in t)transformNode\x3dhead\x3dnew CalculateNode(head,t),data\x3d\x22derived\x22;else if(\x22filter\x22in t)transformNode\x3dgetImplicitFromFilterTransform(t),transformNode\x3dhead\x3dnull!\x3d\x3d(_a$jscomp$0\x3dParseNode.makeWithAncestors(head,{},transformNode,ancestorParse))\x26\x26void 0!\x3d\x3d_a$jscomp$0?_a$jscomp$0:\nhead,head\x3dnew FilterNode(head,model,t.filter);else if(\x22bin\x22in t)transformNode\x3dhead\x3dBinNode.makeFromTransform(head,t,model),data\x3d\x22number\x22;else if(\x22timeUnit\x22in t)data\x3d\x22date\x22,void 0\x3d\x3d\x3dancestorParse.getWithExplicit(t.field).value\x26\x26(transformNode\x3d{},head\x3dnew ParseNode(head,(transformNode[t.field]\x3ddata,transformNode)),ancestorParse.set(t.field,data,!1)),transformNode\x3dhead\x3dTimeUnitNode.makeFromTransform(head,t);else if(\x22aggregate\x22in t)transformNode\x3dhead\x3dAggregateNode.makeFromTransform(head,t),data\x3d\x22number\x22,\nrequiresSelectionId(model)\x26\x26(head\x3dnew IdentifierNode(head));else if(\x22lookup\x22in t)transformNode\x3dhead\x3dLookupNode.make(head,model,t,_c++),data\x3d\x22derived\x22;else if(\x22window\x22in t)transformNode\x3dhead\x3dnew WindowTransformNode(head,t),data\x3d\x22number\x22;else if(\x22joinaggregate\x22in t)transformNode\x3dhead\x3dnew JoinAggregateTransformNode(head,t),data\x3d\x22number\x22;else if(\x22stack\x22in t)transformNode\x3dhead\x3dStackNode.makeFromTransform(head,t),data\x3d\x22derived\x22;else if(\x22fold\x22in t)transformNode\x3dhead\x3dnew FoldTransformNode(head,t),data\x3d\x22derived\x22;\nelse if(\x22flatten\x22in t)transformNode\x3dhead\x3dnew FlattenTransformNode(head,t),data\x3d\x22derived\x22;else if(\x22pivot\x22in t)transformNode\x3dhead\x3dnew PivotTransformNode(head,t),data\x3d\x22derived\x22;else if(\x22sample\x22in t)head\x3dnew SampleTransformNode(head,t);else if(\x22impute\x22in t)transformNode\x3dhead\x3dImputeNode.makeFromTransform(head,t),data\x3d\x22derived\x22;else if(\x22density\x22in t)transformNode\x3dhead\x3dnew DensityTransformNode(head,t),data\x3d\x22derived\x22;else if(\x22quantile\x22in t)transformNode\x3dhead\x3dnew QuantileTransformNode(head,t),data\x3d\x22derived\x22;\nelse if(\x22regression\x22in t)transformNode\x3dhead\x3dnew RegressionTransformNode(head,t),data\x3d\x22derived\x22;else if(\x22loess\x22in t)transformNode\x3dhead\x3dnew LoessTransformNode(head,t),data\x3d\x22derived\x22;else{warn(\x22Ignoring an invalid transform: \x22+stringify(t)+\x22.\x22);continue}if(transformNode\x26\x26void 0!\x3d\x3ddata)for(t\x3d$jscomp.makeIterator(null!\x3d\x3d(_b$jscomp$0\x3dtransformNode.producedFields())\x26\x26void 0!\x3d\x3d_b$jscomp$0?_b$jscomp$0:[]),transformNode\x3dt.next();!transformNode.done;transformNode\x3dt.next())ancestorParse.set(transformNode.value,\ndata,!1)}}_a$jscomp$0\x3d{};if(isUnitModel(model)\x26\x26model.component.selection)for(_b$jscomp$0\x3d$jscomp.makeIterator(keys$jscomp$0(model.component.selection)),_c\x3d_b$jscomp$0.next();!_c.done;_c\x3d_b$jscomp$0.next())for(_c\x3d$jscomp.makeIterator(model.component.selection[_c.value].project.items),_b\x3d_c.next();!_b.done;_b\x3d_c.next())_b\x3d_b.value,!_b.channel\x26\x261\x3caccessPathDepth(_b.field)\x26\x26(_a$jscomp$0[_b.field]\x3d\x22flatten\x22);_b$jscomp$0\x3dgetImplicitFromEncoding(model);head\x3dnull!\x3d\x3d(_d\x3dParseNode.makeWithAncestors(head,{},\nObject.assign(Object.assign({},_a$jscomp$0),_b$jscomp$0),ancestorParse))\x26\x26void 0!\x3d\x3d_d?_d:head;isUnitModel(model)\x26\x26(head\x3dGeoJSONNode.parseAll(head,model),head\x3dGeoPointNode.parseAll(head,model));if(isUnitModel(model)||isFacetModel(model))_a||(head\x3dnull!\x3d\x3d(_e\x3dBinNode.makeFromEncoding(head,model))\x26\x26void 0!\x3d\x3d_e?_e:head),head\x3dnull!\x3d\x3d(_f\x3dTimeUnitNode.makeFromEncoding(head,model))\x26\x26void 0!\x3d\x3d_f?_f:head,head\x3dCalculateNode.parseAllForSortIndex(head,model);_e\x3dmodel.getName(\x22raw\x22);_d\x3dnew OutputNode(head,_e,\x22raw\x22,\n$jscomp$destructuring$var383);head\x3doutputNodes[_e]\x3d_d;if(isUnitModel(model)){if(_e\x3dAggregateNode.makeFromEncoding(head,model))head\x3d_e,requiresSelectionId(model)\x26\x26(head\x3dnew IdentifierNode(head));head\x3dnull!\x3d\x3d(_g\x3dImputeNode.makeFromEncoding(head,model))\x26\x26void 0!\x3d\x3d_g?_g:head;head\x3dnull!\x3d\x3d(_h\x3dStackNode.makeFromEncoding(head,model))\x26\x26void 0!\x3d\x3d_h?_h:head}isUnitModel(model)\x26\x26(head\x3dnull!\x3d\x3d(_j\x3dFilterInvalidNode.make(head,model))\x26\x26void 0!\x3d\x3d_j?_j:head);_h\x3dmodel.getName(\x22main\x22);_g\x3dnew OutputNode(head,_h,\x22main\x22,\n$jscomp$destructuring$var383);head\x3doutputNodes[_h]\x3d_g;isUnitModel(model)\x26\x26materializeSelections(model,_g);_j\x3dnull;if(isFacetModel(model)){_h\x3dmodel.getName(\x22facet\x22);_j\x3dhead;_e\x3dmodel.facet;_f\x3d_e.row;_a\x3d_e.column;if(_f\x26\x26_a){_e\x3dnull;_f\x3d$jscomp.makeIterator([_f,_a]);for(_a\x3d_f.next();!_a.done;_a\x3d_f.next())_a\x3d_a.value,isSortField(_a.sort)\x26\x26(_e\x3d_a.sort,_j\x3d_e\x3dnew JoinAggregateTransformNode(_j,{joinaggregate:[{op:void 0\x3d\x3d\x3d_e.op?\x22min\x22:_e.op,field:_e.field,as:facetSortFieldName(_a,_a.sort,{forAs:!0})}],groupby:[vgField(_a)]}));\n_j\x3d_e}else _j\x3dnull;head\x3dnull!\x3d\x3d(_k\x3d_j)\x26\x26void 0!\x3d\x3d_k?_k:head;_j\x3dnew FacetNode(head,model,_h,_g.getSource());outputNodes[_h]\x3d_j}return Object.assign(Object.assign({},model.component.data),{outputNodes:outputNodes,outputNodeRefCounts:$jscomp$destructuring$var383,raw:_d,main:_g,facetRoot:_j,ancestorParse:ancestorParse})}function parseUnitAxes(model){return POSITION_SCALE_CHANNELS.reduce(function(axis,channel){model.component.scales[channel]\x26\x26(axis[channel]\x3d[parseAxis(channel,model)]);return axis},{})}\nfunction mergeAxisComponents(mergedAxisCmpts,childAxisCmpts){if(mergedAxisCmpts){if(mergedAxisCmpts.length!\x3d\x3dchildAxisCmpts.length)return;for(var length$551\x3dmergedAxisCmpts.length,i\x3d0;i\x3clength$551;i++){var merged\x3dmergedAxisCmpts[i],child\x3dchildAxisCmpts[i];if(!!merged!\x3d\x3d!!child)return;if(merged\x26\x26child){var mergedOrient\x3dmerged.getWithExplicit(\x22orient\x22),childOrient\x3dchild.getWithExplicit(\x22orient\x22);if(mergedOrient.explicit\x26\x26childOrient.explicit\x26\x26mergedOrient.value!\x3d\x3dchildOrient.value)return;mergedAxisCmpts[i]\x3d\nmergeAxisComponent(merged,child)}}}else return childAxisCmpts.map(function(axisComponent){return axisComponent.clone()});return mergedAxisCmpts}function mergeAxisComponent(merged,child){for(var $jscomp$loop$692\x3d{},$jscomp$iter$269\x3d$jscomp.makeIterator(AXIS_COMPONENT_PROPERTIES),$jscomp$key$prop\x3d$jscomp$iter$269.next();!$jscomp$key$prop.done;$jscomp$loop$692\x3d{$jscomp$loop$prop$prop$693:$jscomp$loop$692.$jscomp$loop$prop$prop$693},$jscomp$key$prop\x3d$jscomp$iter$269.next())$jscomp$loop$692.$jscomp$loop$prop$prop$693\x3d\n$jscomp$key$prop.value,$jscomp$key$prop\x3dmergeValuesWithExplicit(merged.getWithExplicit($jscomp$loop$692.$jscomp$loop$prop$prop$693),child.getWithExplicit($jscomp$loop$692.$jscomp$loop$prop$prop$693),$jscomp$loop$692.$jscomp$loop$prop$prop$693,\x22axis\x22,function($jscomp$loop$692){return function(v1,v2){switch($jscomp$loop$692.$jscomp$loop$prop$prop$693){case \x22title\x22:return mergeTitleComponent(v1,v2);case \x22gridScale\x22:return{explicit:v1.explicit,value:getFirstDefined(v1.value,v2.value)}}return defaultTieBreaker(v1,\nv2,$jscomp$loop$692.$jscomp$loop$prop$prop$693,\x22axis\x22)}}($jscomp$loop$692)),merged.setWithExplicit($jscomp$loop$692.$jscomp$loop$prop$prop$693,$jscomp$key$prop);return merged}function isExplicit$1(value,property,axis,model,channel){if(\x22disable\x22\x3d\x3d\x3dproperty)return void 0!\x3d\x3daxis;axis\x3daxis||{};switch(property){case \x22titleAngle\x22:case \x22labelAngle\x22:return value\x3d\x3d\x3d(isSignalRef(axis.labelAngle)?axis.labelAngle:normalizeAngle(axis.labelAngle));case \x22values\x22:return!!axis.values;case \x22encode\x22:return!!axis.encoding||\n!!axis.labelAngle;case \x22title\x22:if(value\x3d\x3d\x3dgetFieldDefTitle(model,channel))return!0}return value\x3d\x3d\x3daxis[property]}function parseAxis(channel,model){var _a$jscomp$1,_b,_c,axis\x3dmodel.axis(channel),axisComponent\x3dnew AxisComponent,fieldOrDatumDef\x3dgetFieldOrDatumDef(model.encoding[channel]),mark\x3dmodel.mark,config\x3dmodel.config,orient\x3d(null\x3d\x3d\x3daxis||void 0\x3d\x3d\x3daxis?void 0:axis.orient)||(null\x3d\x3d\x3d(_a$jscomp$1\x3dconfig[\x22x\x22\x3d\x3d\x3dchannel?\x22axisX\x22:\x22axisY\x22])||void 0\x3d\x3d\x3d_a$jscomp$1?void 0:_a$jscomp$1.orient)||(null\x3d\x3d\x3d(_b\x3dconfig.axis)||\nvoid 0\x3d\x3d\x3d_b?void 0:_b.orient)||(\x22x\x22\x3d\x3d\x3dchannel?\x22bottom\x22:\x22left\x22);_b\x3dmodel.getScaleComponent(channel).get(\x22type\x22);_a$jscomp$1\x3dgetAxisConfigs(channel,_b,orient,model.config);var disable\x3dvoid 0!\x3d\x3daxis?!axis:getAxisConfig(\x22disable\x22,config,null\x3d\x3d\x3daxis||void 0\x3d\x3d\x3daxis?void 0:axis.style,_a$jscomp$1).configValue;axisComponent.set(\x22disable\x22,disable,void 0!\x3d\x3daxis);if(disable)return axisComponent;axis\x3daxis||{};disable\x3dgetLabelAngle(model,axis,channel,fieldOrDatumDef,_a$jscomp$1);fieldOrDatumDef\x3d{fieldOrDatumDef:fieldOrDatumDef,\naxis:axis,channel:channel,model:model,scaleType:_b,orient:orient,labelAngle:disable,mark:mark,config:config};mark\x3d$jscomp.makeIterator(AXIS_COMPONENT_PROPERTIES);for(config\x3dmark.next();!config.done;config\x3dmark.next())if(config\x3dconfig.value,orient\x3dconfig in axisRules?axisRules[config](fieldOrDatumDef):AXIS_PROPERTIES_INDEX[config]?axis[config]:void 0,_b\x3dvoid 0!\x3d\x3dorient,disable\x3disExplicit$1(orient,config,axis,model,channel),_b\x26\x26disable)axisComponent.set(config,orient,disable);else{var $jscomp$destructuring$var389\x3d\nAXIS_PROPERTIES_INDEX[config]\x26\x26\x22values\x22!\x3d\x3dconfig?getAxisConfig(config,model.config,axis.style,_a$jscomp$1):{},configValue\x3dvoid 0\x3d\x3d\x3d$jscomp$destructuring$var389.configValue?void 0:$jscomp$destructuring$var389.configValue;$jscomp$destructuring$var389\x3dvoid 0\x3d\x3d\x3d$jscomp$destructuring$var389.configFrom?void 0:$jscomp$destructuring$var389.configFrom;var hasConfigValue\x3dvoid 0!\x3d\x3dconfigValue;_b\x26\x26!hasConfigValue?axisComponent.set(config,orient,disable):(\x22vgAxisConfig\x22!\x3d\x3d$jscomp$destructuring$var389||propsToAlwaysIncludeConfig.has(config)\x26\x26\nhasConfigValue||isConditionalAxisValue(configValue)||isSignalRef(configValue))\x26\x26axisComponent.set(config,configValue,!1)}var axisEncoding\x3dnull!\x3d\x3d(_c\x3daxis.encoding)\x26\x26void 0!\x3d\x3d_c?_c:{};_c\x3dAXIS_PARTS.reduce(function(e,part){var _a;if(!axisComponent.hasAxisPart(part))return e;var axisEncodingPart\x3dguideEncodeEntry(null!\x3d\x3d(_a\x3daxisEncoding[part])\x26\x26void 0!\x3d\x3d_a?_a:{},model);if(\x22labels\x22\x3d\x3d\x3dpart){var _a$jscomp$0,encoding\x3dmodel.encoding;_a\x3dmodel.config;encoding\x3dnull!\x3d\x3d(_a$jscomp$0\x3dgetFieldOrDatumDef(encoding[channel]))\x26\x26\nvoid 0!\x3d\x3d_a$jscomp$0?_a$jscomp$0:getFieldOrDatumDef(encoding[getSecondaryRangeChannel(channel)]);var $jscomp$inline_5037\x3dmodel.axis(channel)||{};_a$jscomp$0\x3d$jscomp$inline_5037.format;$jscomp$inline_5037\x3d$jscomp$inline_5037.formatType;axisEncodingPart\x3disCustomFormatType($jscomp$inline_5037)?Object.assign({text:formatCustomType({fieldOrDatumDef:encoding,field:\x22datum.value\x22,format:_a$jscomp$0,formatType:$jscomp$inline_5037,config:_a})},axisEncodingPart):axisEncodingPart}void 0\x3d\x3d\x3daxisEncodingPart||isEmpty(axisEncodingPart)||\n(e[part]\x3d{update:axisEncodingPart});return e},{});isEmpty(_c)||axisComponent.set(\x22encode\x22,_c,!!axis.encoding||void 0!\x3d\x3daxis.labelAngle);return axisComponent}function orient(mark,encoding,specifiedOrient){switch(mark){case POINT:case CIRCLE:case SQUARE:case TEXT:case RECT:case IMAGE:return}var x\x3dencoding.x,y\x3dencoding.y,x2\x3dencoding.x2;encoding\x3dencoding.y2;switch(mark){case BAR:if(isFieldDef(x)\x26\x26(isBinned(x.bin)||isFieldDef(y)\x26\x26y.aggregate\x26\x26!x.aggregate))break;if(isFieldDef(y)\x26\x26(isBinned(y.bin)||isFieldDef(x)\x26\x26\nx.aggregate\x26\x26!y.aggregate))return\x22horizontal\x22;if(encoding||x2){if(specifiedOrient)return specifiedOrient;if(!x2\x26\x26(isFieldDef(x)\x26\x26x.type\x3d\x3d\x3dQUANTITATIVE\x26\x26!isBinning(x.bin)||isNumericDataDef(x)))return\x22horizontal\x22;if(!encoding\x26\x26(isFieldDef(y)\x26\x26y.type\x3d\x3d\x3dQUANTITATIVE\x26\x26!isBinning(y.bin)||isNumericDataDef(y)))break}case RULE:if(!(!x2||isFieldDef(x)\x26\x26isBinned(x.bin)||!encoding||isFieldDef(y)\x26\x26isBinned(y.bin)))return;case AREA:if(encoding){if(isFieldDef(y)\x26\x26isBinned(y.bin))return\x22horizontal\x22;break}else if(x2)if(isFieldDef(x)\x26\x26\nisBinned(x.bin))break;else return\x22horizontal\x22;else if(mark\x3d\x3d\x3dRULE)if(x\x26\x26!y)break;else if(y\x26\x26!x)return\x22horizontal\x22;case LINE:case TICK:x2\x3disContinuousFieldOrDatumDef(x);encoding\x3disContinuousFieldOrDatumDef(y);if(x2\x26\x26!encoding)return\x22tick\x22!\x3d\x3dmark?\x22horizontal\x22:\x22vertical\x22;if(!x2\x26\x26encoding)return\x22tick\x22!\x3d\x3dmark?\x22vertical\x22:\x22horizontal\x22;if(x2\x26\x26encoding){x2\x3dx.type\x3d\x3d\x3dTEMPORAL;encoding\x3dy.type\x3d\x3d\x3dTEMPORAL;if(x2\x26\x26!encoding)return\x22tick\x22!\x3d\x3dmark?\x22vertical\x22:\x22horizontal\x22;if(!x2\x26\x26encoding)return\x22tick\x22!\x3d\x3dmark?\x22horizontal\x22:\n\x22vertical\x22;if(!x.aggregate\x26\x26y.aggregate)return\x22tick\x22!\x3d\x3dmark?\x22vertical\x22:\x22horizontal\x22;if(x.aggregate\x26\x26!y.aggregate)return\x22tick\x22!\x3d\x3dmark?\x22horizontal\x22:\x22vertical\x22;if(specifiedOrient)return specifiedOrient}else{if(specifiedOrient)return specifiedOrient;return}}return\x22vertical\x22}function encodeEntry(model,fixedShape){return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},baseEncodeEntry(model,{align:\x22ignore\x22,baseline:\x22ignore\x22,color:\x22include\x22,size:\x22include\x22,orient:\x22ignore\x22,\ntheta:\x22ignore\x22})),pointPosition(\x22x\x22,model,{defaultPos:\x22mid\x22})),pointPosition(\x22y\x22,model,{defaultPos:\x22mid\x22})),nonPosition(\x22size\x22,model)),nonPosition(\x22angle\x22,model)),fixedShape?{shape:{value:fixedShape}}:nonPosition(\x22shape\x22,model))}function align(markDef,encoding,config){if(void 0\x3d\x3d\x3dgetMarkPropOrConfig(\x22align\x22,markDef,config))return\x22center\x22}function baseline(markDef,encoding,config){if(void 0\x3d\x3d\x3dgetMarkPropOrConfig(\x22baseline\x22,markDef,config))return\x22middle\x22}function defaultSize(model){var _a,config\x3dmodel.config,\nmarkDef\x3dmodel.markDef,orient\x3dmarkDef.orient,vgSizeChannel\x3d\x22horizontal\x22\x3d\x3d\x3dorient?\x22width\x22:\x22height\x22;model\x3dmodel.getScaleComponent(\x22horizontal\x22\x3d\x3d\x3dorient?\x22x\x22:\x22y\x22);markDef\x3dnull!\x3d\x3d(_a\x3dgetMarkPropOrConfig(\x22size\x22,markDef,config,{vgChannel:vgSizeChannel}))\x26\x26void 0!\x3d\x3d_a?_a:config.tick.bandSize;return void 0!\x3d\x3dmarkDef?markDef:(_a\x3dmodel?model.get(\x22range\x22):void 0)\x26\x26isVgRangeStep(_a)\x26\x26isNumber(_a.step)?3*_a.step/4:3*getViewConfigDiscreteStep(config.view,vgSizeChannel)/4}function getStackGroups(model){var hasCornerRadius\x3d\nVG_CORNERRADIUS_CHANNELS.some(function(prop){return getMarkPropOrConfig(prop,model.markDef,model.config)});if(model.stack\x26\x26!model.fieldDef(\x22size\x22)\x26\x26hasCornerRadius){var mark\x3d$jscomp.makeIterator(getMarkGroups(model,{fromPrefix:\x22stack_group_\x22})).next().value,fieldScale\x3dmodel.scaleName(model.stack.fieldChannel),stackField\x3dfunction(opt){opt\x3dvoid 0\x3d\x3d\x3dopt?{}:opt;return model.vgField(model.stack.fieldChannel,opt)};hasCornerRadius\x3dfunction(func,expr){expr\x3d[stackField({prefix:\x22min\x22,suffix:\x22start\x22,expr:expr}),\nstackField({prefix:\x22max\x22,suffix:\x22start\x22,expr:expr}),stackField({prefix:\x22min\x22,suffix:\x22end\x22,expr:expr}),stackField({prefix:\x22max\x22,suffix:\x22end\x22,expr:expr})];return func+\x22(\x22+expr.map(function(field){return\x22scale(\x27\x22+fieldScale+\x22\x27,\x22+field+\x22)\x22}).join(\x22,\x22)+\x22)\x22};if(\x22x\x22\x3d\x3d\x3dmodel.stack.fieldChannel){hasCornerRadius\x3dObject.assign(Object.assign({},pick(mark.encode.update,[\x22y\x22,\x22yc\x22,\x22y2\x22,\x22height\x22].concat($jscomp.arrayFromIterable(VG_CORNERRADIUS_CHANNELS)))),{x:{signal:hasCornerRadius(\x22min\x22,\x22datum\x22)},x2:{signal:hasCornerRadius(\x22max\x22,\n\x22datum\x22)},clip:{value:!0}});var innerGroupUpdate\x3d{x:{field:{group:\x22x\x22},mult:-1},height:{field:{group:\x22height\x22}}};mark.encode.update\x3dObject.assign(Object.assign({},omit(mark.encode.update,[\x22y\x22,\x22yc\x22,\x22y2\x22])),{height:{field:{group:\x22height\x22}}})}else hasCornerRadius\x3dObject.assign(Object.assign({},pick(mark.encode.update,[\x22x\x22,\x22xc\x22,\x22x2\x22,\x22width\x22])),{y:{signal:hasCornerRadius(\x22min\x22,\x22datum\x22)},y2:{signal:hasCornerRadius(\x22max\x22,\x22datum\x22)},clip:{value:!0}}),innerGroupUpdate\x3d{y:{field:{group:\x22y\x22},mult:-1},width:{field:{group:\x22width\x22}}},\nmark.encode.update\x3dObject.assign(Object.assign({},omit(mark.encode.update,[\x22x\x22,\x22xc\x22,\x22x2\x22])),{width:{field:{group:\x22width\x22}}});for(var $jscomp$iter$273\x3d$jscomp.makeIterator(VG_CORNERRADIUS_CHANNELS),$jscomp$key$key\x3d$jscomp$iter$273.next();!$jscomp$key$key.done;$jscomp$key$key\x3d$jscomp$iter$273.next()){$jscomp$key$key\x3d$jscomp$key$key.value;var configValue\x3dgetMarkConfig($jscomp$key$key,model.markDef,model.config);mark.encode.update[$jscomp$key$key]?(hasCornerRadius[$jscomp$key$key]\x3dmark.encode.update[$jscomp$key$key],\ndelete mark.encode.update[$jscomp$key$key]):configValue\x26\x26(hasCornerRadius[$jscomp$key$key]\x3dsignalOrValueRef(configValue));configValue\x26\x26(mark.encode.update[$jscomp$key$key]\x3d{value:0})}$jscomp$iter$273\x3dmodel.fieldDef(model.stack.groupbyChannel);$jscomp$key$key\x3dvgField($jscomp$iter$273)?[vgField($jscomp$iter$273)]:[];((null\x3d\x3d\x3d$jscomp$iter$273||void 0\x3d\x3d\x3d$jscomp$iter$273?0:$jscomp$iter$273.bin)||(null\x3d\x3d\x3d$jscomp$iter$273||void 0\x3d\x3d\x3d$jscomp$iter$273?0:$jscomp$iter$273.timeUnit))\x26\x26$jscomp$key$key.push(vgField($jscomp$iter$273,\n{binSuffix:\x22end\x22}));hasCornerRadius\x3d\x22stroke strokeWidth strokeJoin strokeCap strokeDash strokeDashOffset strokeMiterLimit strokeOpacity\x22.split(\x22 \x22).reduce(function(encode,prop){if(mark.encode.update[prop]){var $jscomp$compprop37\x3d{};return Object.assign(Object.assign({},encode),($jscomp$compprop37[prop]\x3dmark.encode.update[prop],$jscomp$compprop37))}$jscomp$compprop37\x3dgetMarkConfig(prop,model.markDef,model.config);if(void 0!\x3d\x3d$jscomp$compprop37){var $jscomp$compprop38\x3d{};return Object.assign(Object.assign({},\nencode),($jscomp$compprop38[prop]\x3dsignalOrValueRef($jscomp$compprop37),$jscomp$compprop38))}return encode},hasCornerRadius);hasCornerRadius.stroke\x26\x26(hasCornerRadius.strokeForeground\x3d{value:!0},hasCornerRadius.strokeOffset\x3d{value:0});return[{type:\x22group\x22,from:{facet:{data:model.requestDataName(\x22main\x22),name:\x22stack_group_\x22+model.requestDataName(\x22main\x22),groupby:$jscomp$key$key,aggregate:{fields:[stackField({suffix:\x22start\x22}),stackField({suffix:\x22start\x22}),stackField({suffix:\x22end\x22}),stackField({suffix:\x22end\x22})],\nops:[\x22min\x22,\x22max\x22,\x22min\x22,\x22max\x22]}}},encode:{update:hasCornerRadius},marks:[{type:\x22group\x22,encode:{update:innerGroupUpdate},marks:[mark]}]}]}return getMarkGroups(model)}function getSort$1(model){var encoding\x3dmodel.encoding,stack\x3dmodel.stack,mark\x3dmodel.mark,markDef\x3dmodel.markDef,config\x3dmodel.config,order\x3dencoding.order;if(!(!isArray(order)\x26\x26isValueDef(order)\x26\x26isNullOrFalse(order.value)||!order\x26\x26isNullOrFalse(getMarkPropOrConfig(\x22order\x22,markDef,config)))){if((isArray(order)||isFieldDef(order))\x26\x26!stack)return sortParams(order,\n{expr:\x22datum\x22});if(isPathMark(mark)\x26\x26(stack\x3d\x22horizontal\x22\x3d\x3d\x3dmarkDef.orient?\x22y\x22:\x22x\x22,mark\x3dencoding[stack],isFieldDef(mark))){encoding\x3dmark.sort;if(isArray(encoding))return{field:vgField(mark,{prefix:stack,suffix:\x22sort_index\x22,expr:\x22datum\x22})};if(isSortField(encoding))return{field:vgField({aggregate:isAggregate(model.encoding)?encoding.op:void 0,field:encoding.field},{expr:\x22datum\x22})};if(encoding\x26\x26encoding.encoding)return model\x3dmodel.fieldDef(encoding.encoding),{field:vgField(model,{expr:\x22datum\x22}),order:encoding.order};\nif(null!\x3d\x3dencoding)return{field:vgField(mark,{binSuffix:model.stack\x26\x26model.stack.impute?\x22mid\x22:void 0,expr:\x22datum\x22})}}}}function getMarkGroups(model,opt){opt\x3dvoid 0\x3d\x3d\x3dopt?{fromPrefix:\x22\x22}:opt;var mark\x3dmodel.mark,markDef\x3dmodel.markDef,config\x3dmodel.config,JSCompiler_temp_const\x3dmarkDef.clip;var JSCompiler_inline_result\x3dmodel.getScaleComponent(\x22x\x22);var yScale\x3dmodel.getScaleComponent(\x22y\x22);JSCompiler_inline_result\x3dJSCompiler_inline_result\x26\x26JSCompiler_inline_result.get(\x22selectionExtent\x22)||yScale\x26\x26yScale.get(\x22selectionExtent\x22)?\n!0:void 0;yScale\x3dmodel.component.projection;JSCompiler_temp_const\x3dgetFirstDefined(JSCompiler_temp_const,JSCompiler_inline_result,yScale\x26\x26!yScale.isFit?!0:void 0);JSCompiler_inline_result\x3dgetStyles(markDef);yScale\x3dmodel.encoding.key;var sort\x3dgetSort$1(model),JSCompiler_inline_result$jscomp$0;if(model.component.selection){for(var parentCount\x3dJSCompiler_inline_result$jscomp$0\x3dkeys$jscomp$0(model.component.selection).length,parent\x3dmodel.parent;parent\x26\x260\x3d\x3d\x3dparentCount;)parentCount\x3dkeys$jscomp$0(parent.component.selection).length,\nparent\x3dparent.parent;JSCompiler_inline_result$jscomp$0\x3dparentCount?{interactive:0\x3cJSCompiler_inline_result$jscomp$0}:null}else JSCompiler_inline_result$jscomp$0\x3dnull;markDef\x3dgetMarkPropOrConfig(\x22aria\x22,markDef,config);config\x3dmarkCompiler[mark].postEncodingTransform?markCompiler[mark].postEncodingTransform(model):null;return[Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({name:model.getName(\x22marks\x22),type:markCompiler[mark].vgMark},JSCompiler_temp_const?\n{clip:!0}:{}),JSCompiler_inline_result?{style:JSCompiler_inline_result}:{}),yScale?{key:yScale.field}:{}),sort?{sort:sort}:{}),JSCompiler_inline_result$jscomp$0?JSCompiler_inline_result$jscomp$0:{}),!1\x3d\x3d\x3dmarkDef?{aria:markDef}:{}),{from:{data:opt.fromPrefix+model.requestDataName(\x22main\x22)},encode:{update:markCompiler[mark].encodeEntry(model)}}),config?{transform:config}:{})]}function buildModel(spec,parent,parentGivenName,unitSize,config){if(\x22facet\x22in spec)return new FacetModel(spec,parent,parentGivenName,\nconfig);if(\x22layer\x22in spec)return new LayerModel(spec,parent,parentGivenName,unitSize,config);if(isUnitSpec(spec))return new UnitModel(spec,parent,parentGivenName,unitSize,config);if(\x22vconcat\x22in spec||\x22hconcat\x22in spec||\x22concat\x22in spec)return new ConcatModel(spec,parent,parentGivenName,config);throw Error(invalidSpec(spec));}function assembleTopLevelModel(model,topLevelProperties,datasets,usermeta){datasets\x3dvoid 0\x3d\x3d\x3ddatasets?{}:datasets;var vgConfig\x3dmodel.config?stripAndRedirectConfig(model.config):\nvoid 0;datasets\x3d[].concat(model.assembleSelectionData([]),assembleRootData(model.component.data,datasets));var projections\x3dmodel.assembleProjections(),title\x3dmodel.assembleTitle(),style\x3dmodel.assembleGroupStyle(),encodeEntry\x3dmodel.assembleGroupEncodeEntry(!0),layoutSignals\x3dmodel.assembleLayoutSignals();layoutSignals\x3dlayoutSignals.filter(function(signal){return\x22width\x22!\x3d\x3dsignal.name\x26\x26\x22height\x22!\x3d\x3dsignal.name||void 0\x3d\x3d\x3dsignal.value?!0:(topLevelProperties[signal.name]\x3d+signal.value,!1)});return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({$schema:\x22https://vega.github.io/schema/vega/v5.json\x22},\nmodel.description?{description:model.description}:{}),topLevelProperties),title?{title:title}:{}),style?{style:style}:{}),encodeEntry?{encode:{update:encodeEntry}}:{}),{data:datasets}),0\x3cprojections.length?{projections:projections}:{}),model.assembleGroup([].concat($jscomp.arrayFromIterable(layoutSignals),$jscomp.arrayFromIterable(model.assembleSelectionTopLevelSignals([]))))),vgConfig?{config:vgConfig}:{}),usermeta?{usermeta:usermeta}:{})}var get1\x3dfunction(field){return function(obj){return obj[field]}},\ngetN\x3dfunction(path){var len\x3dpath.length;return function(obj){for(var i\x3d0;i\x3clen;++i)obj\x3dobj[path[i]];return obj}},empty\x3d[];(function(field,name,opt){var path\x3dsplitAccessPath(field);field\x3d1\x3d\x3d\x3dpath.length?path[0]:field;return accessor$jscomp$0((opt\x26\x26opt.get||getter)(path),[field],name||field)})(\x22id\x22);var identity\x3daccessor$jscomp$0(function(_){return _},empty,\x22identity\x22);accessor$jscomp$0(function(){return 0},empty,\x22zero\x22);accessor$jscomp$0(function(){return 1},empty,\x22one\x22);accessor$jscomp$0(function(){return!0},\nempty,\x22true\x22);accessor$jscomp$0(function(){return!1},empty,\x22false\x22);var isArray\x3dArray.isArray,hop\x3dObject.prototype.hasOwnProperty;Array.prototype.flat||Object.defineProperty(Array.prototype,\x22flat\x22,{configurable:!0,value:function r(JSCompiler_OptimizeArgumentsArray_p7){var t\x3disNaN(JSCompiler_OptimizeArgumentsArray_p7)?1:Number(JSCompiler_OptimizeArgumentsArray_p7);return t?Array.prototype.reduce.call(this,function(a,e){return Array.isArray(e)?a.push.apply(a,r.call(e,t-1)):a.push(e),a},[]):Array.prototype.slice.call(this)},\nwritable:!0});Array.prototype.flatMap||Object.defineProperty(Array.prototype,\x22flatMap\x22,{configurable:!0,value:function(r){return Array.prototype.map.apply(this,arguments).flat()},writable:!0});var fastJsonStableStringify\x3dfunction(data,opts){opts||(opts\x3d{});\x22function\x22\x3d\x3d\x3dtypeof opts\x26\x26(opts\x3d{cmp:opts});var cycles\x3d\x22boolean\x22\x3d\x3d\x3dtypeof opts.cycles?opts.cycles:!1,cmp\x3dopts.cmp\x26\x26function(f){return function(node){return function(a,b){return f({key:a,value:node[a]},{key:b,value:node[b]})}}}(opts.cmp),seen\x3d[];\nreturn function stringify(node){node\x26\x26node.toJSON\x26\x26\x22function\x22\x3d\x3d\x3dtypeof node.toJSON\x26\x26(node\x3dnode.toJSON());if(void 0!\x3d\x3dnode){if(\x22number\x22\x3d\x3dtypeof node)return isFinite(node)?\x22\x22+node:\x22null\x22;if(\x22object\x22!\x3d\x3dtypeof node)return JSON.stringify(node);var i;if(Array.isArray(node)){var out\x3d\x22[\x22;for(i\x3d0;i\x3cnode.length;i++)i\x26\x26(out+\x3d\x22,\x22),out+\x3dstringify(node[i])||\x22null\x22;return out+\x22]\x22}if(null\x3d\x3d\x3dnode)return\x22null\x22;if(-1!\x3d\x3dseen.indexOf(node)){if(cycles)return JSON.stringify(\x22__cycle__\x22);throw new TypeError(\x22Converting circular structure to JSON\x22);\n}var seenIndex\x3dseen.push(node)-1,keys\x3dObject.keys(node).sort(cmp\x26\x26cmp(node));out\x3d\x22\x22;for(i\x3d0;i\x3ckeys.length;i++){var key\x3dkeys[i],value\x3dstringify(node[key]);value\x26\x26(out\x26\x26(out+\x3d\x22,\x22),out+\x3dJSON.stringify(key)+\x22:\x22+value)}seen.splice(seenIndex,1);return\x22{\x22+out+\x22}\x22}}(data)},deepEqual\x3dfunction equal(a,b){if(a\x3d\x3d\x3db)return!0;if(a\x26\x26b\x26\x26\x22object\x22\x3d\x3dtypeof a\x26\x26\x22object\x22\x3d\x3dtypeof b){if(a.constructor!\x3d\x3db.constructor)return!1;var i;if(Array.isArray(a)){var length\x3da.length;if(length!\x3db.length)return!1;for(i\x3dlength;0!\x3d\x3di--;)if(!equal(a[i],\nb[i]))return!1;return!0}if(a.constructor\x3d\x3d\x3dRegExp)return a.source\x3d\x3d\x3db.source\x26\x26a.flags\x3d\x3d\x3db.flags;if(a.valueOf!\x3d\x3dObject.prototype.valueOf)return a.valueOf()\x3d\x3d\x3db.valueOf();if(a.toString!\x3d\x3dObject.prototype.toString)return a.toString()\x3d\x3d\x3db.toString();var keys\x3dObject.keys(a);length\x3dkeys.length;if(length!\x3d\x3dObject.keys(b).length)return!1;for(i\x3dlength;0!\x3d\x3di--;)if(!Object.prototype.hasOwnProperty.call(b,keys[i]))return!1;for(i\x3dlength;0!\x3d\x3di--;)if(length\x3dkeys[i],!equal(a[length],b[length]))return!1;return!0}return a!\x3d\x3d\na\x26\x26b!\x3d\x3db},duplicate\x3dfunction(fn,basedir,module){return module\x3d{path:basedir,exports:{},require:function(path,base){throw Error(\x22Dynamic requires are not currently supported by @rollup/plugin-commonjs\x22);}},fn(module,module.exports),module.exports}(function(module){var clone$jscomp$0\x3dfunction(){function _instanceof(obj,type){return null!\x3dtype\x26\x26obj instanceof type}function clone(parent$jscomp$0,circular,depth$jscomp$0,prototype,includeNonEnumerable){function _clone(parent,depth){if(null\x3d\x3d\x3dparent)return null;\nif(0\x3d\x3d\x3ddepth||\x22object\x22!\x3dtypeof parent)return parent;if(_instanceof(parent,nativeMap))var child\x3dnew nativeMap;else if(_instanceof(parent,nativeSet))child\x3dnew nativeSet;else if(_instanceof(parent,nativePromise))child\x3dnew nativePromise(function(resolve,reject){parent.then(function(value){resolve(_clone(value,depth-1))},function(err){reject(_clone(err,depth-1))})});else if(clone.__isArray(parent))child\x3d[];else if(clone.__isRegExp(parent))child\x3dnew RegExp(parent.source,__getRegExpFlags(parent)),parent.lastIndex\x26\x26\n(child.lastIndex\x3dparent.lastIndex);else if(clone.__isDate(parent))child\x3dnew Date(parent.getTime());else{if(useBuffer\x26\x26Buffer.isBuffer(parent))return child\x3dBuffer.allocUnsafe?Buffer.allocUnsafe(parent.length):new Buffer(parent.length),parent.copy(child),child;if(_instanceof(parent,Error))child\x3dObject.create(parent);else if(\x22undefined\x22\x3d\x3dtypeof prototype){var proto\x3dObject.getPrototypeOf(parent);child\x3dObject.create(proto)}else child\x3dObject.create(prototype),proto\x3dprototype}if(circular){var index\x3dallParents.indexOf(parent);\nif(-1!\x3dindex)return allChildren[index];allParents.push(parent);allChildren.push(child)}_instanceof(parent,nativeMap)\x26\x26parent.forEach(function(value,key){key\x3d_clone(key,depth-1);value\x3d_clone(value,depth-1);child.set(key,value)});_instanceof(parent,nativeSet)\x26\x26parent.forEach(function(value){value\x3d_clone(value,depth-1);child.add(value)});for(var i in parent){var attrs;proto\x26\x26(attrs\x3dObject.getOwnPropertyDescriptor(proto,i));attrs\x26\x26null\x3d\x3dattrs.set||(child[i]\x3d_clone(parent[i],depth-1))}if(Object.getOwnPropertySymbols)for(index\x3d\nObject.getOwnPropertySymbols(parent),i\x3d0;i\x3cindex.length;i++)if(attrs\x3dindex[i],proto\x3dObject.getOwnPropertyDescriptor(parent,attrs),!proto||proto.enumerable||includeNonEnumerable)child[attrs]\x3d_clone(parent[attrs],depth-1),proto.enumerable||Object.defineProperty(child,attrs,{enumerable:!1});if(includeNonEnumerable)for(index\x3dObject.getOwnPropertyNames(parent),i\x3d0;i\x3cindex.length;i++)attrs\x3dindex[i],proto\x3dObject.getOwnPropertyDescriptor(parent,attrs),proto\x26\x26proto.enumerable||(child[attrs]\x3d_clone(parent[attrs],\ndepth-1),Object.defineProperty(child,attrs,{enumerable:!1}));return child}\x22object\x22\x3d\x3d\x3dtypeof circular\x26\x26(depth$jscomp$0\x3dcircular.depth,prototype\x3dcircular.prototype,includeNonEnumerable\x3dcircular.includeNonEnumerable,circular\x3dcircular.circular);var allParents\x3d[],allChildren\x3d[],useBuffer\x3d\x22undefined\x22!\x3dtypeof Buffer;\x22undefined\x22\x3d\x3dtypeof circular\x26\x26(circular\x3d!0);\x22undefined\x22\x3d\x3dtypeof depth$jscomp$0\x26\x26(depth$jscomp$0\x3dInfinity);return _clone(parent$jscomp$0,depth$jscomp$0)}function __objToStr(o){return Object.prototype.toString.call(o)}\nfunction __getRegExpFlags(re){var flags\x3d\x22\x22;re.global\x26\x26(flags+\x3d\x22g\x22);re.ignoreCase\x26\x26(flags+\x3d\x22i\x22);re.multiline\x26\x26(flags+\x3d\x22m\x22);return flags}try{var nativeMap\x3dMap}catch(_){nativeMap\x3dfunction(){}}try{var nativeSet\x3dSet}catch(_$407){nativeSet\x3dfunction(){}}try{var nativePromise\x3dPromise}catch(_$408){nativePromise\x3dfunction(){}}clone.clonePrototype\x3dfunction(parent){if(null\x3d\x3d\x3dparent)return null;var c\x3dfunction(){};c.prototype\x3dparent;return new c};clone.__objToStr\x3d__objToStr;clone.__isDate\x3dfunction(o){return\x22object\x22\x3d\x3d\x3d\ntypeof o\x26\x26\x22[object Date]\x22\x3d\x3d\x3d__objToStr(o)};clone.__isArray\x3dfunction(o){return\x22object\x22\x3d\x3d\x3dtypeof o\x26\x26\x22[object Array]\x22\x3d\x3d\x3d__objToStr(o)};clone.__isRegExp\x3dfunction(o){return\x22object\x22\x3d\x3d\x3dtypeof o\x26\x26\x22[object RegExp]\x22\x3d\x3d\x3d__objToStr(o)};clone.__getRegExpFlags\x3d__getRegExpFlags;return clone}();module.exports\x26\x26(module.exports\x3dclone$jscomp$0)});Set.prototype.toJSON\x3dfunction(){return\x22Set(\x22+[].concat($jscomp.arrayFromIterable(this)).map(function(x){return fastJsonStableStringify(x)}).join(\x22,\x22)+\x22)\x22};var stringify\x3dfastJsonStableStringify,\nkeys$jscomp$0\x3dObject.keys,vals\x3dObject.values,idCounter\x3d42,CONDITIONAL_AXIS_PROP_INDEX\x3d{domainColor:{part:\x22domain\x22,vgProp:\x22stroke\x22},labelAlign:{part:\x22labels\x22,vgProp:\x22align\x22},labelBaseline:{part:\x22labels\x22,vgProp:\x22baseline\x22},labelColor:{part:\x22labels\x22,vgProp:\x22fill\x22},labelFont:{part:\x22labels\x22,vgProp:\x22font\x22},labelFontSize:{part:\x22labels\x22,vgProp:\x22fontSize\x22},labelFontStyle:{part:\x22labels\x22,vgProp:\x22fontStyle\x22},labelFontWeight:{part:\x22labels\x22,vgProp:\x22fontWeight\x22},labelOpacity:{part:\x22labels\x22,vgProp:\x22opacity\x22},labelOffset:null,\nlabelPadding:null,gridColor:{part:\x22grid\x22,vgProp:\x22stroke\x22},gridDash:{part:\x22grid\x22,vgProp:\x22strokeDash\x22},gridDashOffset:{part:\x22grid\x22,vgProp:\x22strokeDash\x22},gridOpacity:{part:\x22grid\x22,vgProp:\x22opacity\x22},gridWidth:{part:\x22grid\x22,vgProp:\x22strokeWidth\x22},tickColor:{part:\x22ticks\x22,vgProp:\x22stroke\x22},tickDash:{part:\x22ticks\x22,vgProp:\x22strokeDash\x22},tickDashOffset:{part:\x22ticks\x22,vgProp:\x22strokeDash\x22},tickOpacity:{part:\x22ticks\x22,vgProp:\x22opacity\x22},tickSize:null,tickWidth:{part:\x22ticks\x22,vgProp:\x22strokeWidth\x22},titleColor:{part:\x22title\x22,\nvgProp:\x22fill\x22},title:null},AXIS_PARTS\x3d[\x22domain\x22,\x22grid\x22,\x22labels\x22,\x22ticks\x22,\x22title\x22],AXIS_PROPERTY_TYPE\x3d{grid:\x22grid\x22,gridCap:\x22grid\x22,gridColor:\x22grid\x22,gridDash:\x22grid\x22,gridDashOffset:\x22grid\x22,gridOpacity:\x22grid\x22,gridScale:\x22grid\x22,gridWidth:\x22grid\x22,orient:\x22main\x22,bandPosition:\x22both\x22,aria:\x22main\x22,description:\x22main\x22,domain:\x22main\x22,domainCap:\x22main\x22,domainColor:\x22main\x22,domainDash:\x22main\x22,domainDashOffset:\x22main\x22,domainOpacity:\x22main\x22,domainWidth:\x22main\x22,format:\x22main\x22,formatType:\x22main\x22,labelAlign:\x22main\x22,labelAngle:\x22main\x22,\nlabelBaseline:\x22main\x22,labelBound:\x22main\x22,labelColor:\x22main\x22,labelFlush:\x22main\x22,labelFlushOffset:\x22main\x22,labelFont:\x22main\x22,labelFontSize:\x22main\x22,labelFontStyle:\x22main\x22,labelFontWeight:\x22main\x22,labelLimit:\x22main\x22,labelLineHeight:\x22main\x22,labelOffset:\x22main\x22,labelOpacity:\x22main\x22,labelOverlap:\x22main\x22,labelPadding:\x22main\x22,labels:\x22main\x22,labelSeparation:\x22main\x22,maxExtent:\x22main\x22,minExtent:\x22main\x22,offset:\x22both\x22,position:\x22main\x22,tickCap:\x22main\x22,tickColor:\x22main\x22,tickDash:\x22main\x22,tickDashOffset:\x22main\x22,tickMinStep:\x22main\x22,tickOffset:\x22both\x22,\ntickOpacity:\x22main\x22,tickRound:\x22both\x22,ticks:\x22main\x22,tickSize:\x22main\x22,tickWidth:\x22both\x22,title:\x22main\x22,titleAlign:\x22main\x22,titleAnchor:\x22main\x22,titleAngle:\x22main\x22,titleBaseline:\x22main\x22,titleColor:\x22main\x22,titleFont:\x22main\x22,titleFontSize:\x22main\x22,titleFontStyle:\x22main\x22,titleFontWeight:\x22main\x22,titleLimit:\x22main\x22,titleLineHeight:\x22main\x22,titleOpacity:\x22main\x22,titlePadding:\x22main\x22,titleX:\x22main\x22,titleY:\x22main\x22,encode:\x22both\x22,scale:\x22both\x22,tickBand:\x22both\x22,tickCount:\x22both\x22,tickExtra:\x22both\x22,translate:\x22both\x22,values:\x22both\x22,zindex:\x22both\x22},\nCOMMON_AXIS_PROPERTIES_INDEX\x3d{orient:1,aria:1,bandPosition:1,description:1,domain:1,domainCap:1,domainColor:1,domainDash:1,domainDashOffset:1,domainOpacity:1,domainWidth:1,format:1,formatType:1,grid:1,gridCap:1,gridColor:1,gridDash:1,gridDashOffset:1,gridOpacity:1,gridWidth:1,labelAlign:1,labelAngle:1,labelBaseline:1,labelBound:1,labelColor:1,labelFlush:1,labelFlushOffset:1,labelFont:1,labelFontSize:1,labelFontStyle:1,labelFontWeight:1,labelLimit:1,labelLineHeight:1,labelOffset:1,labelOpacity:1,labelOverlap:1,\nlabelPadding:1,labels:1,labelSeparation:1,maxExtent:1,minExtent:1,offset:1,position:1,tickBand:1,tickCap:1,tickColor:1,tickCount:1,tickDash:1,tickDashOffset:1,tickExtra:1,tickMinStep:1,tickOffset:1,tickOpacity:1,tickRound:1,ticks:1,tickSize:1,tickWidth:1,title:1,titleAlign:1,titleAnchor:1,titleAngle:1,titleBaseline:1,titleColor:1,titleFont:1,titleFontSize:1,titleFontStyle:1,titleFontWeight:1,titleLimit:1,titleLineHeight:1,titleOpacity:1,titlePadding:1,titleX:1,titleY:1,translate:1,values:1,zindex:1},\nAXIS_PROPERTIES_INDEX\x3dObject.assign(Object.assign({},COMMON_AXIS_PROPERTIES_INDEX),{style:1,labelExpr:1,encoding:1}),Mark\x3d{arc:\x22arc\x22,area:\x22area\x22,bar:\x22bar\x22,image:\x22image\x22,line:\x22line\x22,point:\x22point\x22,rect:\x22rect\x22,rule:\x22rule\x22,text:\x22text\x22,tick:\x22tick\x22,trail:\x22trail\x22,circle:\x22circle\x22,square:\x22square\x22,geoshape:\x22geoshape\x22},ARC\x3dMark.arc,AREA\x3dMark.area,BAR\x3dMark.bar,IMAGE\x3dMark.image,LINE\x3dMark.line,POINT\x3dMark.point,RECT\x3dMark.rect,RULE\x3dMark.rule,TEXT\x3dMark.text,TICK\x3dMark.tick,TRAIL\x3dMark.trail,CIRCLE\x3dMark.circle,SQUARE\x3d\nMark.square,GEOSHAPE\x3dMark.geoshape,PRIMITIVE_MARKS\x3dkeys$jscomp$0(Mark);toSet(PRIMITIVE_MARKS);var FILL_STROKE_CONFIG\x3d[].concat($jscomp.arrayFromIterable(\x22stroke strokeWidth strokeDash strokeDashOffset strokeOpacity strokeJoin strokeMiterLimit\x22.split(\x22 \x22)),$jscomp.arrayFromIterable([\x22fill\x22,\x22fillOpacity\x22])),VL_ONLY_MARK_CONFIG_PROPERTIES\x3dkeys$jscomp$0({color:1,filled:1,invalid:1,order:1,radius2:1,theta2:1,timeUnitBand:1,timeUnitBandPosition:1}),BAR_CORNER_RADIUS_INDEX\x3d{horizontal:[\x22cornerRadiusTopRight\x22,\n\x22cornerRadiusBottomRight\x22],vertical:[\x22cornerRadiusTopLeft\x22,\x22cornerRadiusTopRight\x22]},CompositeMarkNormalizer\x3dfunction(name,run){this.name\x3dname;this.run\x3drun};CompositeMarkNormalizer.prototype.hasMatchingType\x3dfunction(spec){return isUnitSpec(spec)?(spec\x3dspec.mark,(isMarkDef(spec)?spec.type:spec)\x3d\x3d\x3dthis.name):!1};var AGGREGATE_OP_INDEX\x3d{argmax:1,argmin:1,average:1,count:1,distinct:1,product:1,max:1,mean:1,median:1,min:1,missing:1,q1:1,q3:1,ci0:1,ci1:1,stderr:1,stdev:1,stdevp:1,sum:1,valid:1,values:1,\nvariance:1,variancep:1},MULTIDOMAIN_SORT_OP_INDEX\x3d{count:1,min:1,max:1},COUNTING_OPS\x3d[\x22count\x22,\x22valid\x22,\x22missing\x22,\x22distinct\x22],SUM_OPS\x3d[\x22count\x22,\x22sum\x22,\x22distinct\x22,\x22valid\x22,\x22missing\x22],SHARED_DOMAIN_OP_INDEX\x3dtoSet(\x22mean average median q1 q3 min max\x22.split(\x22 \x22)),POLAR_POSITION_CHANNEL_INDEX\x3d{theta:1,theta2:1,radius:1,radius2:1},GEO_POSIITON_CHANNEL_INDEX\x3d{longitude:1,longitude2:1,latitude:1,latitude2:1},GEOPOSITION_CHANNELS\x3dkeys$jscomp$0(GEO_POSIITON_CHANNEL_INDEX),UNIT_CHANNEL_INDEX\x3dObject.assign(Object.assign(Object.assign(Object.assign({},\n{x:1,y:1,x2:1,y2:1}),POLAR_POSITION_CHANNEL_INDEX),GEO_POSIITON_CHANNEL_INDEX),{color:1,fill:1,stroke:1,opacity:1,fillOpacity:1,strokeOpacity:1,strokeWidth:1,strokeDash:1,size:1,angle:1,shape:1,order:1,text:1,detail:1,key:1,tooltip:1,href:1,url:1,description:1}),FACET_CHANNEL_INDEX\x3d{row:1,column:1,facet:1},FACET_CHANNELS\x3dkeys$jscomp$0(FACET_CHANNEL_INDEX),CHANNEL_INDEX\x3dObject.assign(Object.assign({},UNIT_CHANNEL_INDEX),FACET_CHANNEL_INDEX),CHANNELS\x3dkeys$jscomp$0(CHANNEL_INDEX),SINGLE_DEF_CHANNEL_INDEX\x3d\n__rest(CHANNEL_INDEX,[\x22order\x22,\x22detail\x22,\x22tooltip\x22]),SINGLE_DEF_UNIT_CHANNEL_INDEX\x3d__rest(SINGLE_DEF_CHANNEL_INDEX,[\x22row\x22,\x22column\x22,\x22facet\x22]),SECONDARY_RANGE_CHANNEL\x3d\x22x2 y2 latitude2 longitude2 theta2 radius2\x22.split(\x22 \x22),NONPOSITION_CHANNEL_INDEX\x3d__rest(UNIT_CHANNEL_INDEX,\x22x y x2 y2 latitude longitude latitude2 longitude2 theta theta2 radius radius2\x22.split(\x22 \x22)),NONPOSITION_CHANNELS\x3dkeys$jscomp$0(NONPOSITION_CHANNEL_INDEX),POSITION_SCALE_CHANNEL_INDEX\x3d{x:1,y:1},POSITION_SCALE_CHANNELS\x3dkeys$jscomp$0(POSITION_SCALE_CHANNEL_INDEX),\nPOLAR_POSITION_SCALE_CHANNEL_INDEX\x3d{theta:1,radius:1},POLAR_POSITION_SCALE_CHANNELS\x3dkeys$jscomp$0(POLAR_POSITION_SCALE_CHANNEL_INDEX),NONPOSITION_SCALE_CHANNEL_INDEX\x3d__rest(NONPOSITION_CHANNEL_INDEX,\x22text tooltip href url description detail key order\x22.split(\x22 \x22)),NONPOSITION_SCALE_CHANNELS\x3dkeys$jscomp$0(NONPOSITION_SCALE_CHANNEL_INDEX),SCALE_CHANNEL_INDEX\x3dObject.assign(Object.assign(Object.assign({},POSITION_SCALE_CHANNEL_INDEX),POLAR_POSITION_SCALE_CHANNEL_INDEX),NONPOSITION_SCALE_CHANNEL_INDEX),\nSCALE_CHANNELS\x3dkeys$jscomp$0(SCALE_CHANNEL_INDEX),ALL_MARKS\x3d{arc:\x22always\x22,area:\x22always\x22,bar:\x22always\x22,circle:\x22always\x22,geoshape:\x22always\x22,image:\x22always\x22,line:\x22always\x22,rule:\x22always\x22,point:\x22always\x22,rect:\x22always\x22,square:\x22always\x22,trail:\x22always\x22,text:\x22always\x22,tick:\x22always\x22},ALL_MARKS_EXCEPT_GEOSHAPE\x3d__rest(ALL_MARKS,[\x22geoshape\x22]),main$1\x3dfunction(_$jscomp$0,method){var level\x3d_$jscomp$0||0;return{level:function(_){return arguments.length?(level\x3d+_,this):level},error:function(){1\x3c\x3dlevel\x26\x26log(method||\x22error\x22,\n\x22ERROR\x22,arguments);return this},warn:function(){2\x3c\x3dlevel\x26\x26log(method||\x22warn\x22,\x22WARN\x22,arguments);return this},info:function(){3\x3c\x3dlevel\x26\x26log(method||\x22log\x22,\x22INFO\x22,arguments);return this},debug:function(){4\x3c\x3dlevel\x26\x26log(method||\x22log\x22,\x22DEBUG\x22,arguments);return this}}}(2),current\x3dmain$1,MONTHS\x3d\x22january february march april may june july august september october november december\x22.split(\x22 \x22),SHORT_MONTHS\x3dMONTHS.map(function(m){return m.substr(0,3)}),DAYS\x3d\x22sunday monday tuesday wednesday thursday friday saturday\x22.split(\x22 \x22),\nSHORT_DAYS\x3dDAYS.map(function(d){return d.substr(0,3)}),LOCAL_SINGLE_TIMEUNIT_INDEX\x3d{year:1,quarter:1,month:1,week:1,day:1,dayofyear:1,date:1,hours:1,minutes:1,seconds:1,milliseconds:1},TIMEUNIT_PARTS\x3dkeys$jscomp$0(LOCAL_SINGLE_TIMEUNIT_INDEX),VEGALITE_TIMEFORMAT\x3d{\x22year-month\x22:\x22%b %Y \x22,\x22year-month-date\x22:\x22%b %d, %Y \x22},VG_MARK_CONFIGS\x3dkeys$jscomp$0({aria:1,description:1,ariaRole:1,ariaRoleDescription:1,blend:1,opacity:1,fill:1,fillOpacity:1,stroke:1,strokeCap:1,strokeWidth:1,strokeOpacity:1,strokeDash:1,\nstrokeDashOffset:1,strokeJoin:1,strokeOffset:1,strokeMiterLimit:1,startAngle:1,endAngle:1,padAngle:1,innerRadius:1,outerRadius:1,size:1,shape:1,interpolate:1,tension:1,orient:1,align:1,baseline:1,text:1,dir:1,dx:1,dy:1,ellipsis:1,limit:1,radius:1,theta:1,angle:1,font:1,fontSize:1,fontWeight:1,fontStyle:1,lineBreak:1,lineHeight:1,cursor:1,href:1,tooltip:1,cornerRadius:1,cornerRadiusTopLeft:1,cornerRadiusTopRight:1,cornerRadiusBottomLeft:1,cornerRadiusBottomRight:1,aspect:1,width:1,height:1}),VG_MARK_INDEX\x3d\n{arc:1,area:1,group:1,image:1,line:1,path:1,rect:1,rule:1,shape:1,symbol:1,text:1,trail:1},VG_CORNERRADIUS_CHANNELS\x3d[\x22cornerRadius\x22,\x22cornerRadiusTopLeft\x22,\x22cornerRadiusTopRight\x22,\x22cornerRadiusBottomLeft\x22,\x22cornerRadiusBottomRight\x22],Type\x3d{quantitative:\x22quantitative\x22,ordinal:\x22ordinal\x22,temporal:\x22temporal\x22,nominal:\x22nominal\x22,geojson:\x22geojson\x22},QUANTITATIVE\x3dType.quantitative,ORDINAL\x3dType.ordinal,TEMPORAL\x3dType.temporal,NOMINAL\x3dType.nominal,GEOJSON\x3dType.geojson,TYPES\x3dkeys$jscomp$0(Type),ScaleType\x3d{LINEAR:\x22linear\x22,\nLOG:\x22log\x22,POW:\x22pow\x22,SQRT:\x22sqrt\x22,SYMLOG:\x22symlog\x22,IDENTITY:\x22identity\x22,SEQUENTIAL:\x22sequential\x22,TIME:\x22time\x22,UTC:\x22utc\x22,QUANTILE:\x22quantile\x22,QUANTIZE:\x22quantize\x22,THRESHOLD:\x22threshold\x22,BIN_ORDINAL:\x22bin-ordinal\x22,ORDINAL:\x22ordinal\x22,POINT:\x22point\x22,BAND:\x22band\x22},SCALE_CATEGORY_INDEX\x3d{linear:\x22numeric\x22,log:\x22numeric\x22,pow:\x22numeric\x22,sqrt:\x22numeric\x22,symlog:\x22numeric\x22,identity:\x22numeric\x22,sequential:\x22numeric\x22,time:\x22time\x22,utc:\x22time\x22,ordinal:\x22ordinal\x22,\x22bin-ordinal\x22:\x22bin-ordinal\x22,point:\x22ordinal-position\x22,band:\x22ordinal-position\x22,\nquantile:\x22discretizing\x22,quantize:\x22discretizing\x22,threshold:\x22discretizing\x22},SCALE_TYPES\x3dkeys$jscomp$0(SCALE_CATEGORY_INDEX),SCALE_PRECEDENCE_INDEX\x3d{linear:0,log:1,pow:1,sqrt:1,symlog:1,identity:1,sequential:1,time:0,utc:0,point:10,band:11,ordinal:0,\x22bin-ordinal\x22:0,quantile:0,quantize:0,threshold:0},CONTINUOUS_TO_CONTINUOUS_SCALES\x3d\x22linear log pow sqrt symlog time utc\x22.split(\x22 \x22),CONTINUOUS_TO_CONTINUOUS_INDEX\x3dtoSet(CONTINUOUS_TO_CONTINUOUS_SCALES),QUANTITATIVE_SCALES_INDEX\x3dtoSet([\x22linear\x22,\x22log\x22,\x22pow\x22,\n\x22sqrt\x22,\x22symlog\x22]),CONTINUOUS_TO_DISCRETE_INDEX\x3dtoSet([\x22quantile\x22,\x22quantize\x22,\x22threshold\x22]),CONTINUOUS_DOMAIN_SCALES\x3dCONTINUOUS_TO_CONTINUOUS_SCALES.concat([\x22quantile\x22,\x22quantize\x22,\x22threshold\x22,\x22sequential\x22,\x22identity\x22]),CONTINUOUS_DOMAIN_INDEX\x3dtoSet(CONTINUOUS_DOMAIN_SCALES),DISCRETE_DOMAIN_INDEX\x3dtoSet([\x22ordinal\x22,\x22bin-ordinal\x22,\x22point\x22,\x22band\x22]),NON_TYPE_DOMAIN_RANGE_VEGA_SCALE_PROPERTY_INDEX\x3d__rest({type:1,domain:1,domainMid:1,align:1,range:1,scheme:1,bins:1,reverse:1,round:1,clamp:1,nice:1,base:1,exponent:1,\nconstant:1,interpolate:1,zero:1,padding:1,paddingInner:1,paddingOuter:1},[\x22type\x22,\x22domain\x22,\x22range\x22,\x22scheme\x22]),NON_TYPE_DOMAIN_RANGE_VEGA_SCALE_PROPERTIES\x3dkeys$jscomp$0(NON_TYPE_DOMAIN_RANGE_VEGA_SCALE_PROPERTY_INDEX);(function(){for(var _a,index\x3d{},$jscomp$iter$75\x3d$jscomp.makeIterator(CHANNELS),$jscomp$key$channel\x3d$jscomp$iter$75.next();!$jscomp$key$channel.done;$jscomp$key$channel\x3d$jscomp$iter$75.next()){$jscomp$key$channel\x3d$jscomp$key$channel.value;for(var $jscomp$iter$74\x3d$jscomp.makeIterator(TYPES),\n$jscomp$key$fieldDefType\x3d$jscomp$iter$74.next();!$jscomp$key$fieldDefType.done;$jscomp$key$fieldDefType\x3d$jscomp$iter$74.next()){$jscomp$key$fieldDefType\x3d$jscomp$key$fieldDefType.value;for(var $jscomp$iter$73\x3d$jscomp.makeIterator(SCALE_TYPES),$jscomp$key$scaleType\x3d$jscomp$iter$73.next();!$jscomp$key$scaleType.done;$jscomp$key$scaleType\x3d$jscomp$iter$73.next()){$jscomp$key$scaleType\x3d$jscomp$key$scaleType.value;var key\x3d$jscomp$key$channel+\x22_\x22+$jscomp$key$fieldDefType;channelSupportScaleType($jscomp$key$channel,\n$jscomp$key$scaleType)\x26\x26scaleTypeSupportDataType($jscomp$key$scaleType,$jscomp$key$fieldDefType)\x26\x26(index[key]\x3dnull!\x3d\x3d(_a\x3dindex[key])\x26\x26void 0!\x3d\x3d_a?_a:[],index[key].push($jscomp$key$scaleType))}}}return index})();var SORT_BY_CHANNEL_INDEX\x3d{x:1,y:1,color:1,fill:1,stroke:1,strokeWidth:1,size:1,shape:1,fillOpacity:1,strokeOpacity:1,opacity:1,text:1},defaultTitleFormatter\x3dfunction(fieldDef,config){switch(config.fieldTitle){case \x22plain\x22:return fieldDef.field;case \x22functional\x22:config\x3dfieldDef.aggregate;var bin\x3d\nfieldDef.bin,timeUnit\x3dfieldDef.timeUnit;fieldDef\x3dfieldDef.field;isArgmaxDef(config)?config\x3dfieldDef+\x22 for argmax(\x22+config.argmax+\x22)\x22:isArgminDef(config)?config\x3dfieldDef+\x22 for argmin(\x22+config.argmin+\x22)\x22:(timeUnit\x3dnormalizeTimeUnit(timeUnit),config\x3d(config\x3dconfig||(null\x3d\x3d\x3dtimeUnit||void 0\x3d\x3d\x3dtimeUnit?void 0:timeUnit.unit)||(null\x3d\x3d\x3dtimeUnit||void 0\x3d\x3d\x3dtimeUnit?void 0:timeUnit.maxbins)\x26\x26\x22timeunit\x22||isBinning(bin)\x26\x26\x22bin\x22)?config.toUpperCase()+\x22(\x22+fieldDef+\x22)\x22:fieldDef);return config;default:return verbalTitleFormatter(fieldDef,\nconfig)}},titleFormatter\x3ddefaultTitleFormatter,COMPATIBLE\x3d{compatible:!0},boxPlotNormalizer\x3dnew CompositeMarkNormalizer(\x22boxplot\x22,normalizeBoxPlot),errorBarNormalizer\x3dnew CompositeMarkNormalizer(\x22errorbar\x22,normalizeErrorBar),errorBandNormalizer\x3dnew CompositeMarkNormalizer(\x22errorband\x22,normalizeErrorBand),compositeMarkRegistry\x3d{};add$jscomp$0(\x22boxplot\x22,normalizeBoxPlot,[\x22box\x22,\x22median\x22,\x22outliers\x22,\x22rule\x22,\x22ticks\x22]);add$jscomp$0(\x22errorbar\x22,normalizeErrorBar,[\x22ticks\x22,\x22rule\x22]);add$jscomp$0(\x22errorband\x22,normalizeErrorBand,\n[\x22band\x22,\x22borders\x22]);var VL_ONLY_LEGEND_CONFIG\x3d[\x22gradientHorizontalMaxLength\x22,\x22gradientHorizontalMinLength\x22,\x22gradientVerticalMaxLength\x22,\x22gradientVerticalMinLength\x22,\x22unselectedOpacity\x22],LEGEND_SCALE_CHANNELS\x3d\x22size shape fill stroke strokeDash strokeWidth opacity\x22.split(\x22 \x22),SIGNAL_LEGEND_PROP_INDEX\x3d{fillColor:{part:\x22legend\x22,vgProp:\x22fill\x22},gradientStrokeColor:{part:\x22gradient\x22,vgProp:\x22stroke\x22},labelColor:{part:\x22labels\x22,vgProp:\x22fill\x22},strokeColor:{part:\x22legend\x22,vgProp:\x22stroke\x22},symbolFillColor:{part:\x22symbols\x22,\nvgProp:\x22fill\x22},symbolStrokeColor:{part:\x22symbols\x22,vgProp:\x22stroke\x22},titleColor:{part:\x22title\x22,vgProp:\x22fill\x22}},COMPOSITION_LAYOUT_PROPERTIES\x3dkeys$jscomp$0({align:1,bounds:1,center:1,columns:1,spacing:1}),defaultConfig$1\x3d{background:\x22white\x22,padding:5,timeFormat:\x22%b %d, %Y\x22,countTitle:\x22Count of Records\x22,view:{continuousWidth:200,continuousHeight:200,step:20},mark:{color:\x22#4c78a8\x22,invalid:\x22filter\x22,timeUnitBand:1},arc:{},area:{},bar:{binSpacing:1,continuousBandSize:5,timeUnitBandPosition:.5},circle:{},geoshape:{},\nimage:{},line:{},point:{},rect:{binSpacing:0,continuousBandSize:5,timeUnitBandPosition:.5},rule:{color:\x22black\x22},square:{},text:{color:\x22black\x22},tick:{thickness:1},trail:{},boxplot:{size:14,extent:1.5,box:{},median:{color:\x22white\x22},outliers:{},rule:{},ticks:null},errorbar:{center:\x22mean\x22,rule:!0,ticks:!1},errorband:{band:{opacity:.3},borders:!1},scale:{pointPadding:.5,barBandPaddingInner:.1,rectBandPaddingInner:0,minBandSize:2,minFontSize:8,maxFontSize:40,minOpacity:.3,maxOpacity:.8,minSize:9,minStrokeWidth:1,\nmaxStrokeWidth:4,quantileCount:4,quantizeCount:4},projection:{},legend:{gradientHorizontalMaxLength:200,gradientHorizontalMinLength:100,gradientVerticalMaxLength:200,gradientVerticalMinLength:64,unselectedOpacity:.35},header:{titlePadding:10,labelPadding:10},headerColumn:{},headerRow:{},headerFacet:{},selection:{single:{on:\x22click\x22,fields:[\x22_vgsid_\x22],resolve:\x22global\x22,empty:\x22all\x22,clear:\x22dblclick\x22},multi:{on:\x22click\x22,fields:[\x22_vgsid_\x22],toggle:\x22event.shiftKey\x22,resolve:\x22global\x22,empty:\x22all\x22,clear:\x22dblclick\x22},\ninterval:{on:\x22[mousedown, window:mouseup] \\x3e window:mousemove!\x22,encodings:[\x22x\x22,\x22y\x22],translate:\x22[mousedown, window:mouseup] \\x3e window:mousemove!\x22,zoom:\x22wheel!\x22,mark:{fill:\x22#333\x22,fillOpacity:.125,stroke:\x22white\x22},resolve:\x22global\x22,clear:\x22dblclick\x22}},style:{},title:{},facet:{spacing:20},concat:{spacing:20}},tab10\x3d\x22#4c78a8 #f58518 #e45756 #72b7b2 #54a24b #eeca3b #b279a2 #ff9da6 #9d755d #bab0ac\x22.split(\x22 \x22),DEFAULT_FONT_SIZE\x3d{text:11,guideLabel:10,guideTitle:11,groupTitle:13,groupSubtitle:12},DEFAULT_COLOR\x3d\n{blue:tab10[0],orange:tab10[1],red:tab10[2],teal:tab10[3],green:tab10[4],yellow:tab10[5],purple:tab10[6],pink:tab10[7],brown:tab10[8],gray0:\x22#000\x22,gray1:\x22#111\x22,gray2:\x22#222\x22,gray3:\x22#333\x22,gray4:\x22#444\x22,gray5:\x22#555\x22,gray6:\x22#666\x22,gray7:\x22#777\x22,gray8:\x22#888\x22,gray9:\x22#999\x22,gray10:\x22#aaa\x22,gray11:\x22#bbb\x22,gray12:\x22#ccc\x22,gray13:\x22#ddd\x22,gray14:\x22#eee\x22,gray15:\x22#fff\x22},MARK_STYLES\x3d[\x22view\x22].concat($jscomp.arrayFromIterable(PRIMITIVE_MARKS)),VL_ONLY_CONFIG_PROPERTIES\x3d\x22color fontSize background padding facet concat numberFormat timeFormat countTitle header axisQuantitative axisTemporal axisDiscrete axisPoint axisXBand axisXPoint axisXDiscrete axisXQuantitative axisXTemporal axisYBand axisYPoint axisYDiscrete axisYQuantitative axisYTemporal scale selection overlay\x22.split(\x22 \x22),\nVL_ONLY_ALL_MARK_SPECIFIC_CONFIG_PROPERTY_INDEX\x3dObject.assign({view:[\x22continuousWidth\x22,\x22continuousHeight\x22,\x22discreteWidth\x22,\x22discreteHeight\x22,\x22step\x22]},{area:[\x22line\x22,\x22point\x22],bar:[\x22binSpacing\x22,\x22continuousBandSize\x22,\x22discreteBandSize\x22],rect:[\x22binSpacing\x22,\x22continuousBandSize\x22,\x22discreteBandSize\x22],line:[\x22point\x22],tick:[\x22bandSize\x22,\x22thickness\x22]}),SpecMapper\x3dfunction(){};SpecMapper.prototype.map\x3dfunction(spec,params){return\x22facet\x22in spec?this.mapFacet(spec,params):\x22repeat\x22in spec?this.mapRepeat(spec,params):\x22hconcat\x22in\nspec?this.mapHConcat(spec,params):\x22vconcat\x22in spec?this.mapVConcat(spec,params):\x22concat\x22in spec?this.mapConcat(spec,params):this.mapLayerOrUnit(spec,params)};SpecMapper.prototype.mapLayerOrUnit\x3dfunction(spec,params){if(\x22layer\x22in spec)return this.mapLayer(spec,params);if(isUnitSpec(spec))return this.mapUnit(spec,params);throw Error(invalidSpec(spec));};SpecMapper.prototype.mapLayer\x3dfunction(spec,params){var $jscomp$this\x3dthis;return Object.assign(Object.assign({},spec),{layer:spec.layer.map(function(subspec){return $jscomp$this.mapLayerOrUnit(subspec,\nparams)})})};SpecMapper.prototype.mapHConcat\x3dfunction(spec,params){var $jscomp$this\x3dthis;return Object.assign(Object.assign({},spec),{hconcat:spec.hconcat.map(function(subspec){return $jscomp$this.map(subspec,params)})})};SpecMapper.prototype.mapVConcat\x3dfunction(spec,params){var $jscomp$this\x3dthis;return Object.assign(Object.assign({},spec),{vconcat:spec.vconcat.map(function(subspec){return $jscomp$this.map(subspec,params)})})};SpecMapper.prototype.mapConcat\x3dfunction(spec,params){var $jscomp$this\x3d\nthis,concat\x3dspec.concat;spec\x3d__rest(spec,[\x22concat\x22]);return Object.assign(Object.assign({},spec),{concat:concat.map(function(subspec){return $jscomp$this.map(subspec,params)})})};SpecMapper.prototype.mapFacet\x3dfunction(spec,params){return Object.assign(Object.assign({},spec),{spec:this.map(spec.spec,params)})};SpecMapper.prototype.mapRepeat\x3dfunction(spec,params){return Object.assign(Object.assign({},spec),{spec:this.map(spec.spec,params)})};var STACK_OFFSET_INDEX\x3d{zero:1,center:1,normalize:1},STACKABLE_MARKS\x3d\nnew Set([ARC,BAR,AREA,RULE,POINT,CIRCLE,SQUARE,LINE,TEXT,TICK]),STACK_BY_DEFAULT_MARKS\x3dnew Set([BAR,AREA,ARC]),PathOverlayNormalizer\x3dfunction(){this.name\x3d\x22path-overlay\x22};PathOverlayNormalizer.prototype.hasMatchingType\x3dfunction(spec,config){if(isUnitSpec(spec)){var mark\x3dspec.mark;spec\x3dspec.encoding;mark\x3disMarkDef(mark)?mark:{type:mark};switch(mark.type){case \x22line\x22:case \x22rule\x22:case \x22trail\x22:return!!getPointOverlay(mark,config[mark.type],spec);case \x22area\x22:return!!getPointOverlay(mark,config[mark.type],\nspec)||!!getLineOverlay(mark,config[mark.type])}}return!1};PathOverlayNormalizer.prototype.run\x3dfunction(spec,params,normalize){var config\x3dparams.config,selection\x3dspec.selection,projection\x3dspec.projection,encoding\x3dspec.encoding,mark\x3dspec.mark;spec\x3d__rest(spec,[\x22selection\x22,\x22projection\x22,\x22encoding\x22,\x22mark\x22]);mark\x3disMarkDef(mark)?mark:{type:mark};var pointOverlay\x3dgetPointOverlay(mark,config[mark.type],encoding),lineOverlay\x3d\x22area\x22\x3d\x3d\x3dmark.type\x26\x26getLineOverlay(mark,config[mark.type]);selection\x3d[Object.assign(Object.assign({},\nselection?{selection:selection}:{}),{mark:dropLineAndPoint(Object.assign(Object.assign({},\x22area\x22\x3d\x3d\x3dmark.type\x26\x26void 0\x3d\x3d\x3dmark.opacity\x26\x26void 0\x3d\x3d\x3dmark.fillOpacity?{opacity:.7}:{}),mark)),encoding:omit(encoding,[\x22shape\x22])})];var stackProps\x3dstack$jscomp$0(mark,encoding),overlayEncoding\x3dencoding;if(stackProps){overlayEncoding\x3dstackProps.fieldChannel;stackProps\x3dstackProps.offset;var $jscomp$compprop6\x3d{};overlayEncoding\x3dObject.assign(Object.assign({},encoding),($jscomp$compprop6[overlayEncoding]\x3dObject.assign(Object.assign({},\nencoding[overlayEncoding]),stackProps?{stack:stackProps}:{}),$jscomp$compprop6))}lineOverlay\x26\x26selection.push(Object.assign(Object.assign({},projection?{projection:projection}:{}),{mark:Object.assign(Object.assign({type:\x22line\x22},pick(mark,[\x22clip\x22,\x22interpolate\x22,\x22tension\x22,\x22tooltip\x22])),lineOverlay),encoding:overlayEncoding}));pointOverlay\x26\x26selection.push(Object.assign(Object.assign({},projection?{projection:projection}:{}),{mark:Object.assign(Object.assign({type:\x22point\x22,opacity:1,filled:!0},pick(mark,\n[\x22clip\x22,\x22tooltip\x22])),pointOverlay),encoding:overlayEncoding}));return normalize(Object.assign(Object.assign({},spec),{layer:selection}),Object.assign(Object.assign({},params),{config:dropLineAndPointFromConfig(config)}))};var RangeStepNormalizer\x3dfunction(){this.name\x3d\x22RangeStep\x22};RangeStepNormalizer.prototype.hasMatchingType\x3dfunction(spec){var _a;if(isUnitSpec(spec)\x26\x26spec.encoding)for(var $jscomp$iter$96\x3d$jscomp.makeIterator(POSITION_SCALE_CHANNELS),$jscomp$key$channel\x3d$jscomp$iter$96.next();!$jscomp$key$channel.done;$jscomp$key$channel\x3d\n$jscomp$iter$96.next())if(($jscomp$key$channel\x3dspec.encoding[$jscomp$key$channel.value])\x26\x26isFieldOrDatumDef($jscomp$key$channel)\x26\x26(null\x3d\x3d\x3d(_a\x3dnull\x3d\x3d\x3d$jscomp$key$channel||void 0\x3d\x3d\x3d$jscomp$key$channel?void 0:$jscomp$key$channel.scale)||void 0\x3d\x3d\x3d_a?0:_a.rangeStep))return!0;return!1};RangeStepNormalizer.prototype.run\x3dfunction(spec){for(var _a,sizeMixins\x3d{},encoding\x3dObject.assign({},spec.encoding),$jscomp$iter$97\x3d$jscomp.makeIterator(POSITION_SCALE_CHANNELS),$jscomp$key$channel\x3d$jscomp$iter$97.next();!$jscomp$key$channel.done;$jscomp$key$channel\x3d\n$jscomp$iter$97.next()){$jscomp$key$channel\x3d$jscomp$key$channel.value;var sizeType\x3dgetSizeChannel($jscomp$key$channel),def\x3dencoding[$jscomp$key$channel];if(def\x26\x26isFieldOrDatumDef(def)\x26\x26(null\x3d\x3d\x3d(_a\x3dnull\x3d\x3d\x3ddef||void 0\x3d\x3d\x3ddef?void 0:def.scale)||void 0\x3d\x3d\x3d_a?0:_a.rangeStep)){var scale\x3ddef.scale;def\x3d__rest(def,[\x22scale\x22]);var scaleWithoutRangeStep\x3d__rest(scale,[\x22rangeStep\x22]);sizeMixins[sizeType]\x3d{step:scale.rangeStep};warn(\x27Scale\\\x27s \x22rangeStep\x22 is deprecated and will be removed in Vega-Lite 5.0. Please use \x22width\x22/\x22height\x22: {\x22step\x22: ...} instead. See https://vega.github.io/vega-lite/docs/size.html.\x27);\nsizeType\x3d{};encoding\x3dObject.assign(Object.assign({},encoding),(sizeType[$jscomp$key$channel]\x3dObject.assign(Object.assign({},def),isEmpty(scaleWithoutRangeStep)?{}:{scale:scaleWithoutRangeStep}),sizeType))}}return Object.assign(Object.assign(Object.assign({},sizeMixins),spec),{encoding:encoding})};var RuleForRangedLineNormalizer\x3dfunction(){this.name\x3d\x22RuleForRangedLine\x22};RuleForRangedLineNormalizer.prototype.hasMatchingType\x3dfunction(spec){if(isUnitSpec(spec)){var encoding\x3dspec.encoding;if(\x22line\x22\x3d\x3d\x3d\nspec.mark){spec\x3d$jscomp.makeIterator(SECONDARY_RANGE_CHANNEL);for(var $jscomp$key$channel\x3dspec.next();!$jscomp$key$channel.done;$jscomp$key$channel\x3dspec.next()){$jscomp$key$channel\x3d$jscomp$key$channel.value;var mainChannel\x3dgetMainRangeChannel($jscomp$key$channel);mainChannel\x3dencoding[mainChannel];if(encoding[$jscomp$key$channel]\x26\x26(isFieldDef(mainChannel)\x26\x26!isBinned(mainChannel.bin)||isDatumDef(mainChannel)))return!0}}}return!1};RuleForRangedLineNormalizer.prototype.run\x3dfunction(spec,params,normalize){var encoding\x3d\nspec.encoding,hasX2\x3d!!encoding.x2;warn(\x22Line mark is for continuous lines and thus cannot be used with \x22+(hasX2\x26\x26encoding.y2?\x22x2 and y2\x22:hasX2?\x22x2\x22:\x22y2\x22)+\x22. We will use the rule mark (line segments) instead.\x22);return normalize(Object.assign(Object.assign({},spec),{mark:\x22rule\x22}),params)};var CoreNormalizer\x3dfunction(){var $jscomp$super$this\x3dSpecMapper.apply(this,arguments)||this;$jscomp$super$this.nonFacetUnitNormalizers\x3d[boxPlotNormalizer,errorBarNormalizer,errorBandNormalizer,new PathOverlayNormalizer,\nnew RuleForRangedLineNormalizer,new RangeStepNormalizer];return $jscomp$super$this};$jscomp.inherits(CoreNormalizer,SpecMapper);CoreNormalizer.prototype.map\x3dfunction(spec,params){if(isUnitSpec(spec)){var hasRow\x3dchannelHasField(spec.encoding,\x22row\x22),hasColumn\x3dchannelHasField(spec.encoding,\x22column\x22),hasFacet\x3dchannelHasField(spec.encoding,\x22facet\x22);if(hasRow||hasColumn||hasFacet)return this.mapFacetedUnit(spec,params)}return SpecMapper.prototype.map.call(this,spec,params)};CoreNormalizer.prototype.mapUnit\x3d\nfunction(spec,params){var parentEncoding\x3dparams.parentEncoding,parentProjection\x3dparams.parentProjection;spec\x3dObject.assign(Object.assign({},spec),{encoding:replaceRepeaterInEncoding(spec.encoding,params.repeater)});if(parentEncoding||parentProjection)return this.mapUnitWithParentEncodingOrProjection(spec,params);parentEncoding\x3dthis.mapLayerOrUnit.bind(this);parentProjection\x3d$jscomp.makeIterator(this.nonFacetUnitNormalizers);for(var $jscomp$key$unitNormalizer\x3dparentProjection.next();!$jscomp$key$unitNormalizer.done;$jscomp$key$unitNormalizer\x3d\nparentProjection.next())if($jscomp$key$unitNormalizer\x3d$jscomp$key$unitNormalizer.value,$jscomp$key$unitNormalizer.hasMatchingType(spec,params.config))return $jscomp$key$unitNormalizer.run(spec,params,parentEncoding);return spec};CoreNormalizer.prototype.mapRepeat\x3dfunction(spec,params){return!isArray(spec.repeat)\x26\x26spec.repeat.layer?this.mapLayerRepeat(spec,params):this.mapNonLayerRepeat(spec,params)};CoreNormalizer.prototype.mapLayerRepeat\x3dfunction(spec,params){var $jscomp$this\x3dthis,repeat\x3dspec.repeat,\nchildSpec\x3dspec.spec,rest\x3d__rest(spec,[\x22repeat\x22,\x22spec\x22]),row\x3drepeat.row,column\x3drepeat.column;repeat\x3drepeat.layer;var repeater\x3dvoid 0\x3d\x3d\x3dparams.repeater?{}:params.repeater,repeaterPrefix\x3dvoid 0\x3d\x3d\x3dparams.repeaterPrefix?\x22\x22:params.repeaterPrefix;return row||column?this.mapRepeat(Object.assign(Object.assign({},spec),{repeat:Object.assign(Object.assign({},row?{row:row}:{}),column?{column:column}:{}),spec:{repeat:{layer:repeat},spec:childSpec}}),params):Object.assign(Object.assign({},rest),{layer:repeat.map(function(layerValue){var childRepeater\x3d\nObject.assign(Object.assign({},repeater),{layer:layerValue});layerValue\x3d(childSpec.name||\x22\x22)+repeaterPrefix+(\x22child__layer_\x22+varName(layerValue));childRepeater\x3d$jscomp$this.mapLayerOrUnit(childSpec,Object.assign(Object.assign({},params),{repeater:childRepeater,repeaterPrefix:layerValue}));childRepeater.name\x3dlayerValue;return childRepeater})})};CoreNormalizer.prototype.mapNonLayerRepeat\x3dfunction(spec,params){var _a,$jscomp$destructuring$var107\x3dspec,repeat\x3d$jscomp$destructuring$var107.repeat,childSpec\x3d\n$jscomp$destructuring$var107.spec;$jscomp$destructuring$var107\x3d$jscomp$destructuring$var107.data;var remainingProperties\x3d__rest(spec,[\x22repeat\x22,\x22spec\x22,\x22data\x22]);!isArray(repeat)\x26\x26spec.columns\x26\x26(spec\x3domit(spec,[\x22columns\x22]),warn(columnsNotSupportByRowCol(\x22repeat\x22)));var concat\x3d[],repeater\x3dvoid 0\x3d\x3d\x3dparams.repeater?{}:params.repeater,repeaterPrefix\x3dvoid 0\x3d\x3d\x3dparams.repeaterPrefix?\x22\x22:params.repeaterPrefix,row\x3d!isArray(repeat)\x26\x26repeat.row||[repeater?repeater.row:null],column\x3d!isArray(repeat)\x26\x26repeat.column||\n[repeater?repeater.column:null],repeatValues\x3disArray(repeat)\x26\x26repeat||[repeater?repeater.repeat:null];repeatValues\x3d$jscomp.makeIterator(repeatValues);for(var $jscomp$key$repeatValue\x3drepeatValues.next();!$jscomp$key$repeatValue.done;$jscomp$key$repeatValue\x3drepeatValues.next()){$jscomp$key$repeatValue\x3d$jscomp$key$repeatValue.value;for(var $jscomp$iter$101\x3d$jscomp.makeIterator(row),$jscomp$key$rowValue\x3d$jscomp$iter$101.next();!$jscomp$key$rowValue.done;$jscomp$key$rowValue\x3d$jscomp$iter$101.next()){$jscomp$key$rowValue\x3d\n$jscomp$key$rowValue.value;for(var $jscomp$iter$100\x3d$jscomp.makeIterator(column),$jscomp$key$columnValue\x3d$jscomp$iter$100.next();!$jscomp$key$columnValue.done;$jscomp$key$columnValue\x3d$jscomp$iter$100.next()){var columnValue\x3d$jscomp$key$columnValue.value;$jscomp$key$columnValue\x3d{repeat:$jscomp$key$repeatValue,row:$jscomp$key$rowValue,column:columnValue,layer:repeater.layer};columnValue\x3d(childSpec.name||\x22\x22)+repeaterPrefix+\x22child__\x22+(isArray(repeat)?\x22\x22+varName($jscomp$key$repeatValue):(repeat.row?\x22row_\x22+\nvarName($jscomp$key$rowValue):\x22\x22)+(repeat.column?\x22column_\x22+varName(columnValue):\x22\x22));$jscomp$key$columnValue\x3dthis.map(childSpec,Object.assign(Object.assign({},params),{repeater:$jscomp$key$columnValue,repeaterPrefix:columnValue}));$jscomp$key$columnValue.name\x3dcolumnValue;concat.push(omit($jscomp$key$columnValue,[\x22data\x22]))}}}spec\x3disArray(repeat)?spec.columns:repeat.column?repeat.column.length:1;return Object.assign(Object.assign({data:null!\x3d\x3d(_a\x3dchildSpec.data)\x26\x26void 0!\x3d\x3d_a?_a:$jscomp$destructuring$var107,\nalign:\x22all\x22},remainingProperties),{columns:spec,concat:concat})};CoreNormalizer.prototype.mapFacet\x3dfunction(spec,params){isFacetMapping(spec.facet)\x26\x26spec.columns\x26\x26(spec\x3domit(spec,[\x22columns\x22]),warn(columnsNotSupportByRowCol(\x22facet\x22)));return SpecMapper.prototype.mapFacet.call(this,spec,params)};CoreNormalizer.prototype.mapUnitWithParentEncodingOrProjection\x3dfunction(spec,params){var encoding\x3dspec.encoding,parentEncoding\x3dparams.parentEncoding,config\x3dparams.config,mergedProjection\x3dmergeProjection({parentProjection:params.parentProjection,\nprojection:spec.projection});params\x3dmergeEncoding({parentEncoding:parentEncoding,encoding:replaceRepeaterInEncoding(encoding,params.repeater)});return this.mapUnit(Object.assign(Object.assign(Object.assign({},spec),mergedProjection?{projection:mergedProjection}:{}),params?{encoding:params}:{}),{config:config})};CoreNormalizer.prototype.mapFacetedUnit\x3dfunction(spec,params){var _a\x3dspec.encoding,row\x3d_a.row,column\x3d_a.column,facet\x3d_a.facet,encoding\x3d__rest(_a,[\x22row\x22,\x22column\x22,\x22facet\x22]);_a\x3dspec.mark;var width\x3d\nspec.width,projection\x3dspec.projection,height\x3dspec.height,view\x3dspec.view,selection\x3dspec.selection;spec\x3d__rest(spec,\x22mark width projection height view selection encoding\x22.split(\x22 \x22));column\x3dthis.getFacetMappingAndLayout({row:row,column:column,facet:facet},params);row\x3dcolumn.facetMapping;column\x3dcolumn.layout;encoding\x3dreplaceRepeaterInEncoding(encoding,params.repeater);return this.mapFacet(Object.assign(Object.assign(Object.assign({},spec),column),{facet:row,spec:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},\nwidth?{width:width}:{}),height?{height:height}:{}),view?{view:view}:{}),projection?{projection:projection}:{}),{mark:_a,encoding:encoding}),selection?{selection:selection}:{})}),params)};CoreNormalizer.prototype.getFacetMappingAndLayout\x3dfunction(facets,params){var _a,row\x3dfacets.row,column\x3dfacets.column,facet\x3dfacets.facet;if(row||column){facet\x26\x26(params\x3d[].concat($jscomp.arrayFromIterable(row?[\x22row\x22]:[]),$jscomp.arrayFromIterable(column?[\x22column\x22]:[])),params\x3d\x22Facet encoding dropped as \x22+params.join(\x22 and \x22)+\n\x22 \x22+(1\x3cparams.length?\x22are\x22:\x22is\x22)+\x22 also specified.\x22,warn(params));params\x3d{};facet\x3d{};row\x3d$jscomp.makeIterator([\x22row\x22,\x22column\x22]);for(column\x3drow.next();!column.done;column\x3drow.next()){column\x3dcolumn.value;var def\x3dfacets[column];if(def){var defWithoutLayout\x3d__rest(def,[\x22align\x22,\x22center\x22,\x22spacing\x22,\x22columns\x22]);params[column]\x3ddefWithoutLayout;defWithoutLayout\x3d$jscomp.makeIterator([\x22align\x22,\x22center\x22,\x22spacing\x22]);for(var $jscomp$key$prop\x3ddefWithoutLayout.next();!$jscomp$key$prop.done;$jscomp$key$prop\x3ddefWithoutLayout.next())$jscomp$key$prop\x3d\n$jscomp$key$prop.value,void 0!\x3d\x3ddef[$jscomp$key$prop]\x26\x26(facet[$jscomp$key$prop]\x3dnull!\x3d\x3d(_a\x3dfacet[$jscomp$key$prop])\x26\x26void 0!\x3d\x3d_a?_a:{},facet[$jscomp$key$prop][column]\x3ddef[$jscomp$key$prop])}}return{facetMapping:params,layout:facet}}facets\x3dfacet.align;_a\x3dfacet.center;row\x3dfacet.spacing;column\x3dfacet.columns;facet\x3d__rest(facet,[\x22align\x22,\x22center\x22,\x22spacing\x22,\x22columns\x22]);params\x3d(params\x3dparams.repeater)?isFacetMapping(facet)?replaceRepeaterInMapping(facet,params):replaceRepeaterInFieldDef(facet,params):facet;\nreturn{facetMapping:params,layout:Object.assign(Object.assign(Object.assign(Object.assign({},facets?{align:facets}:{}),_a?{center:_a}:{}),row?{spacing:row}:{}),column?{columns:column}:{})}};CoreNormalizer.prototype.mapLayer\x3dfunction(spec,_a){var parentEncoding\x3d_a.parentEncoding,parentProjection\x3d_a.parentProjection;_a\x3d__rest(_a,[\x22parentEncoding\x22,\x22parentProjection\x22]);var encoding\x3dspec.encoding,projection\x3dspec.projection;spec\x3d__rest(spec,[\x22encoding\x22,\x22projection\x22]);parentEncoding\x3dObject.assign(Object.assign({},\n_a),{parentEncoding:mergeEncoding({parentEncoding:parentEncoding,encoding:encoding}),parentProjection:mergeProjection({parentProjection:parentProjection,projection:projection})});return SpecMapper.prototype.mapLayer.call(this,spec,parentEncoding)};var normalizer\x3dnew CoreNormalizer,TOP_LEVEL_PROPERTIES\x3d[\x22background\x22,\x22padding\x22],Split\x3dfunction(explicit,implicit){explicit\x3dvoid 0\x3d\x3d\x3dexplicit?{}:explicit;implicit\x3dvoid 0\x3d\x3d\x3dimplicit?{}:implicit;this.explicit\x3dexplicit;this.implicit\x3dimplicit};Split.prototype.clone\x3d\nfunction(){return new Split(duplicate(this.explicit),duplicate(this.implicit))};Split.prototype.combine\x3dfunction(){return Object.assign(Object.assign({},this.explicit),this.implicit)};Split.prototype.get\x3dfunction(key){return getFirstDefined(this.explicit[key],this.implicit[key])};Split.prototype.getWithExplicit\x3dfunction(key){return void 0!\x3d\x3dthis.explicit[key]?{explicit:!0,value:this.explicit[key]}:void 0!\x3d\x3dthis.implicit[key]?{explicit:!1,value:this.implicit[key]}:{explicit:!1,value:void 0}};Split.prototype.setWithExplicit\x3d\nfunction(key,value){void 0!\x3d\x3dvalue.value\x26\x26this.set(key,value.value,value.explicit)};Split.prototype.set\x3dfunction(key,value,explicit){delete this[explicit?\x22implicit\x22:\x22explicit\x22][key];this[explicit?\x22explicit\x22:\x22implicit\x22][key]\x3dvalue;return this};Split.prototype.copyKeyFromSplit\x3dfunction(key,s){void 0!\x3d\x3ds.explicit[key]?this.set(key,s.explicit[key],!0):void 0!\x3d\x3ds.implicit[key]\x26\x26this.set(key,s.implicit[key],!1)};Split.prototype.copyKeyFromObject\x3dfunction(key,s){void 0!\x3d\x3ds[key]\x26\x26this.set(key,s[key],!0)};\nSplit.prototype.copyAll\x3dfunction(other){for(var $jscomp$iter$105\x3d$jscomp.makeIterator(keys$jscomp$0(other.combine())),$jscomp$key$key\x3d$jscomp$iter$105.next();!$jscomp$key$key.done;$jscomp$key$key\x3d$jscomp$iter$105.next()){$jscomp$key$key\x3d$jscomp$key$key.value;var val\x3dother.getWithExplicit($jscomp$key$key);this.setWithExplicit($jscomp$key$key,val)}};var AncestorParse\x3dfunction(explicit,implicit,parseNothing){explicit\x3dvoid 0\x3d\x3d\x3dexplicit?{}:explicit;implicit\x3dvoid 0\x3d\x3d\x3dimplicit?{}:implicit;parseNothing\x3dvoid 0\x3d\x3d\x3d\nparseNothing?!1:parseNothing;var $jscomp$super$this\x3dSplit.call(this,explicit,implicit)||this;$jscomp$super$this.explicit\x3dexplicit;$jscomp$super$this.implicit\x3dimplicit;$jscomp$super$this.parseNothing\x3dparseNothing;return $jscomp$super$this};$jscomp.inherits(AncestorParse,Split);AncestorParse.prototype.clone\x3dfunction(){var clone\x3dSplit.prototype.clone.call(this);clone.parseNothing\x3dthis.parseNothing;return clone};var VIEW\x3d\x22view\x22,LBRACK\x3d\x22[\x22,RBRACK\x3d\x22]\x22,LBRACE\x3d\x22{\x22,RBRACE\x3d\x22}\x22,COLON\x3d\x22:\x22,COMMA\x3d\x22,\x22,NAME\x3d\x22@\x22,\nGT\x3d\x22\\x3e\x22,ILLEGAL\x3d/[[\\]{}]/,DEFAULT_SOURCE,MARKS,DEFAULT_MARKS\x3d{\x22*\x22:1,arc:1,area:1,group:1,image:1,line:1,path:1,rect:1,rule:1,shape:1,symbol:1,text:1,trail:1},ALIGNED_X_CHANNEL\x3d{left:\x22x\x22,center:\x22xc\x22,right:\x22x2\x22},BASELINED_Y_CHANNEL\x3d{top:\x22y\x22,middle:\x22yc\x22,bottom:\x22y2\x22},ALWAYS_IGNORE\x3dnew Set([\x22aria\x22]),nearest\x3d{has:function(selCmpt){return\x22interval\x22!\x3d\x3dselCmpt.type\x26\x26selCmpt.nearest},parse:function(model,selCmpt){if(selCmpt.events){selCmpt\x3d$jscomp.makeIterator(selCmpt.events);for(var $jscomp$key$s\x3dselCmpt.next();!$jscomp$key$s.done;$jscomp$key$s\x3d\nselCmpt.next())$jscomp$key$s.value.markname\x3dmodel.getName(\x22voronoi\x22)}},marks:function(model,selCmpt,marks){var $jscomp$destructuring$var173\x3dselCmpt.project.hasChannel;selCmpt\x3d$jscomp$destructuring$var173.x;$jscomp$destructuring$var173\x3d$jscomp$destructuring$var173.y;var markType\x3dmodel.mark;if(isPathMark(markType))return warn(\x27The \x22nearest\x22 transform is not supported for \x27+markType+\x22 marks.\x22),marks;selCmpt\x3d{name:model.getName(\x22voronoi\x22),type:\x22path\x22,interactive:!0,from:{data:model.getName(\x22marks\x22)},\nencode:{update:Object.assign({fill:{value:\x22transparent\x22},strokeWidth:{value:.35},stroke:{value:\x22transparent\x22},isVoronoi:{value:!0}},tooltip(model,{reactiveGeom:!0}))},transform:[{type:\x22voronoi\x22,x:{expr:selCmpt||!$jscomp$destructuring$var173?\x22datum.datum.x || 0\x22:\x220\x22},y:{expr:$jscomp$destructuring$var173||!selCmpt?\x22datum.datum.y || 0\x22:\x220\x22},size:[model.getSizeSignalRef(\x22width\x22),model.getSizeSignalRef(\x22height\x22)]}]};var index\x3d0,exists\x3d!1;marks.forEach(function(mark,i){var _a;mark\x3dnull!\x3d\x3d(_a\x3dmark.name)\x26\x26\nvoid 0!\x3d\x3d_a?_a:\x22\x22;mark\x3d\x3d\x3dmodel.component.mark[0].name?index\x3di:0\x3c\x3dmark.indexOf(\x22voronoi\x22)\x26\x26(exists\x3d!0)});exists||marks.splice(index+1,0,selCmpt);return marks}},DataFlowNode\x3dfunction(parent,debugName){this.debugName\x3ddebugName;this._children\x3d[];this._parent\x3dnull;parent\x26\x26(this.parent\x3dparent)};DataFlowNode.prototype.clone\x3dfunction(){throw Error(\x22Cannot clone node\x22);};DataFlowNode.prototype.numChildren\x3dfunction(){return this._children.length};DataFlowNode.prototype.addChild\x3dfunction(child,loc){-1\x3cthis._children.indexOf(child)?\nconsole.warn(\x22Attempt to add the same child twice.\x22):void 0!\x3d\x3dloc?this._children.splice(loc,0,child):this._children.push(child)};DataFlowNode.prototype.removeChild\x3dfunction(oldChild){oldChild\x3dthis._children.indexOf(oldChild);this._children.splice(oldChild,1);return oldChild};DataFlowNode.prototype.remove\x3dfunction(){for(var loc\x3dthis._parent.removeChild(this),$jscomp$iter$108\x3d$jscomp.makeIterator(this._children),$jscomp$key$child\x3d$jscomp$iter$108.next();!$jscomp$key$child.done;$jscomp$key$child\x3d$jscomp$iter$108.next())$jscomp$key$child\x3d\n$jscomp$key$child.value,$jscomp$key$child._parent\x3dthis._parent,this._parent.addChild($jscomp$key$child,loc++)};DataFlowNode.prototype.insertAsParentOf\x3dfunction(other){var parent\x3dother.parent;parent.removeChild(this);this.parent\x3dparent;other.parent\x3dthis};DataFlowNode.prototype.swapWithParent\x3dfunction(){for(var parent\x3dthis._parent,newParent\x3dparent.parent,$jscomp$iter$109\x3d$jscomp.makeIterator(this._children),$jscomp$key$child\x3d$jscomp$iter$109.next();!$jscomp$key$child.done;$jscomp$key$child\x3d$jscomp$iter$109.next())$jscomp$key$child.value.parent\x3d\nparent;this._children\x3d[];parent.removeChild(this);parent.parent.removeChild(parent);this.parent\x3dnewParent;parent.parent\x3dthis};$jscomp.global.Object.defineProperties(DataFlowNode.prototype,{parent:{configurable:!0,enumerable:!0,get:function(){return this._parent},set:function(parent){(this._parent\x3dparent)\x26\x26parent.addChild(this)}},children:{configurable:!0,enumerable:!0,get:function(){return this._children}}});var OutputNode\x3dfunction(parent,source,type,refCounts){parent\x3dDataFlowNode.call(this,parent,\nsource)||this;parent.type\x3dtype;parent.refCounts\x3drefCounts;parent._source\x3dparent._name\x3dsource;!parent.refCounts||parent._name in parent.refCounts||(parent.refCounts[parent._name]\x3d0);return parent};$jscomp.inherits(OutputNode,DataFlowNode);OutputNode.prototype.clone\x3dfunction(){var cloneObj\x3dnew this.constructor;cloneObj.debugName\x3d\x22clone_\x22+this.debugName;cloneObj._source\x3dthis._source;cloneObj._name\x3d\x22clone_\x22+this._name;cloneObj.type\x3dthis.type;cloneObj.refCounts\x3dthis.refCounts;cloneObj.refCounts[cloneObj._name]\x3d\n0;return cloneObj};OutputNode.prototype.dependentFields\x3dfunction(){return new Set};OutputNode.prototype.producedFields\x3dfunction(){return new Set};OutputNode.prototype.hash\x3dfunction(){void 0\x3d\x3d\x3dthis._hash\x26\x26(this._hash\x3d\x22Output \x22+ ++idCounter);return this._hash};OutputNode.prototype.getSource\x3dfunction(){this.refCounts[this._name]++;return this._source};OutputNode.prototype.isRequired\x3dfunction(){return!!this.refCounts[this._name]};OutputNode.prototype.setSource\x3dfunction(source){this._source\x3dsource};var TimeUnitNode\x3d\nfunction(parent,formula){parent\x3dDataFlowNode.call(this,parent)||this;parent.formula\x3dformula;return parent};$jscomp.inherits(TimeUnitNode,DataFlowNode);TimeUnitNode.prototype.clone\x3dfunction(){return new TimeUnitNode(null,duplicate(this.formula))};TimeUnitNode.makeFromEncoding\x3dfunction(parent,model){var formula\x3dmodel.reduceFieldDef(function(timeUnitComponent,fieldDef,channel){var field\x3dfieldDef.field,timeUnit\x3dfieldDef.timeUnit,channelDef2\x3disUnitModel(model)?model.encoding[getSecondaryRangeChannel(channel)]:\nvoid 0;channel\x3disUnitModel(model)\x26\x26hasBand(channel,fieldDef,channelDef2,model.stack,model.markDef,model.config);timeUnit\x26\x26(fieldDef\x3dvgField(fieldDef,{forAs:!0}),timeUnitComponent[hash({as:fieldDef,field:field,timeUnit:timeUnit})]\x3dObject.assign({as:fieldDef,field:field,timeUnit:timeUnit},channel?{band:!0}:{}));return timeUnitComponent},{});return isEmpty(formula)?null:new TimeUnitNode(parent,formula)};TimeUnitNode.makeFromTransform\x3dfunction(parent,t){var _a\x3dObject.assign({},t);t\x3d_a.timeUnit;_a\x3d__rest(_a,\n[\x22timeUnit\x22]);t\x3dnormalizeTimeUnit(t);t\x3dObject.assign(Object.assign({},_a),{timeUnit:t});_a\x3d{};return new TimeUnitNode(parent,(_a[hash(t)]\x3dt,_a))};TimeUnitNode.prototype.merge\x3dfunction(other){this.formula\x3dObject.assign({},this.formula);for(var key in other.formula)if(!this.formula[key]||other.formula[key].band)this.formula[key]\x3dother.formula[key];key\x3d$jscomp.makeIterator(other.children);for(var $jscomp$key$child\x3dkey.next();!$jscomp$key$child.done;$jscomp$key$child\x3dkey.next())$jscomp$key$child\x3d$jscomp$key$child.value,\nother.removeChild($jscomp$key$child),$jscomp$key$child.parent\x3dthis;other.remove()};TimeUnitNode.prototype.producedFields\x3dfunction(){return new Set(vals(this.formula).map(function(f){return f.as}))};TimeUnitNode.prototype.dependentFields\x3dfunction(){return new Set(vals(this.formula).map(function(f){return f.field}))};TimeUnitNode.prototype.hash\x3dfunction(){return\x22TimeUnit \x22+hash(this.formula)};TimeUnitNode.prototype.assemble\x3dfunction(){for(var transforms\x3d[],$jscomp$iter$111\x3d$jscomp.makeIterator(vals(this.formula)),\n$jscomp$key$f\x3d$jscomp$iter$111.next();!$jscomp$key$f.done;$jscomp$key$f\x3d$jscomp$iter$111.next()){var $jscomp$destructuring$var176\x3d$jscomp$key$f.value;$jscomp$key$f\x3d$jscomp$destructuring$var176.field;var as\x3d$jscomp$destructuring$var176.as,_a\x3dnormalizeTimeUnit($jscomp$destructuring$var176.timeUnit),$jscomp$destructuring$var177\x3d_a;$jscomp$destructuring$var176\x3d$jscomp$destructuring$var177.unit;$jscomp$destructuring$var177\x3d$jscomp$destructuring$var177.utc;_a\x3d__rest(_a,[\x22unit\x22,\x22utc\x22]);transforms.push(Object.assign(Object.assign(Object.assign(Object.assign({field:replacePathInField($jscomp$key$f),\ntype:\x22timeunit\x22},$jscomp$destructuring$var176?{units:getTimeUnitParts($jscomp$destructuring$var176)}:{}),$jscomp$destructuring$var177?{timezone:\x22utc\x22}:{}),_a),{as:[as,as+\x22_end\x22]}))}return transforms};var SelectionProjectionComponent\x3dfunction(items){for(var $jscomp$restParams\x3d[],$jscomp$restIndex\x3d0;$jscomp$restIndex\x3carguments.length;++$jscomp$restIndex)$jscomp$restParams[$jscomp$restIndex-0]\x3darguments[$jscomp$restIndex];this.items\x3d$jscomp$restParams;this.hasChannel\x3d{};this.hasField\x3d{}},inputBindings\x3d\n{has:function(selCmpt){return\x22single\x22\x3d\x3d\x3dselCmpt.type\x26\x26\x22global\x22\x3d\x3d\x3dselCmpt.resolve\x26\x26selCmpt.bind\x26\x26\x22scales\x22!\x3d\x3dselCmpt.bind\x26\x26!isLegendBinding(selCmpt.bind)},parse:function(model,selCmpt,selDef,origDef){origDef.on||delete selCmpt.events;origDef.clear||delete selCmpt.clear},topLevelSignals:function(model,selCmpt,signals){var name\x3dselCmpt.name;model\x3dselCmpt.project;var bind\x3dselCmpt.bind,init\x3dselCmpt.init\x26\x26selCmpt.init[0],datum\x3dnearest.has(selCmpt)?\x22(item().isVoronoi ? datum.datum : datum)\x22:\x22datum\x22;model.items.forEach(function(p,\ni){var _a,_b,sgname\x3dvarName(name+\x22_\x22+p.field);signals.filter(function(s){return s.name\x3d\x3d\x3dsgname}).length||signals.unshift(Object.assign(Object.assign({name:sgname},init?{init:assembleInit(init[i])}:{value:null}),{on:selCmpt.events?[{events:selCmpt.events,update:\x22datum \\x26\\x26 item().mark.marktype !\\x3d\\x3d \x27group\x27 ? \x22+datum+\x22[\x22+$(p.field)+\x22] : null\x22}]:[],bind:null!\x3d\x3d(_b\x3dnull!\x3d\x3d(_a\x3dbind[p.field])\x26\x26void 0!\x3d\x3d_a?_a:bind[p.channel])\x26\x26void 0!\x3d\x3d_b?_b:bind}))});return signals},signals:function(model,selCmpt,\nsignals){var name\x3dselCmpt.name,proj\x3dselCmpt.project;model\x3dsignals.filter(function(s){return s.name\x3d\x3d\x3dname+\x22_tuple\x22})[0];selCmpt\x3dname+\x22_tuple_fields\x22;proj\x3dproj.items.map(function(p){return varName(name+\x22_\x22+p.field)});var valid\x3dproj.map(function(v){return v+\x22 !\\x3d\\x3d null\x22}).join(\x22 \\x26\\x26 \x22);proj.length\x26\x26(model.update\x3dvalid+\x22 ? {fields: \x22+selCmpt+\x22, values: [\x22+proj.join(\x22, \x22)+\x22]} : null\x22);delete model.value;delete model.on;return signals}},toggle\x3d{has:function(selCmpt){return\x22multi\x22\x3d\x3d\x3dselCmpt.type\x26\x26\n!!selCmpt.toggle},signals:function(model,selCmpt,signals){return signals.concat({name:selCmpt.name+\x22_toggle\x22,value:!1,on:[{events:selCmpt.events,update:selCmpt.toggle}]})},modifyExpr:function(model,selCmpt){var tpl\x3dselCmpt.name+\x22_tuple\x22,signal\x3dselCmpt.name+\x22_toggle\x22;return signal+\x22 ? null : \x22+tpl+\x22, \x22+(\x22global\x22\x3d\x3d\x3dselCmpt.resolve?signal+\x22 ? null : true, \x22:signal+\x22 ? null : {unit: \x22+unitName(model)+\x22}, \x22)+(signal+\x22 ? \x22+tpl+\x22 : null\x22)}},scaleBindings\x3d{has:function(selCmpt){return\x22interval\x22\x3d\x3d\x3dselCmpt.type\x26\x26\n\x22global\x22\x3d\x3d\x3dselCmpt.resolve\x26\x26selCmpt.bind\x26\x26\x22scales\x22\x3d\x3d\x3dselCmpt.bind},parse:function(model,selCmpt){for(var bound\x3dselCmpt.scales\x3d[],$jscomp$iter$118\x3d$jscomp.makeIterator(selCmpt.project.items),$jscomp$key$proj\x3d$jscomp$iter$118.next();!$jscomp$key$proj.done;$jscomp$key$proj\x3d$jscomp$iter$118.next()){$jscomp$key$proj\x3d$jscomp$key$proj.value;var channel\x3d$jscomp$key$proj.channel;if(SCALE_CHANNEL_INDEX[channel]){var scaleType$457\x3d(channel\x3dmodel.getScaleComponent(channel))?channel.get(\x22type\x22):void 0;channel\x26\x26\nscaleType$457 in CONTINUOUS_DOMAIN_INDEX?(channel.set(\x22selectionExtent\x22,{selection:selCmpt.name,field:$jscomp$key$proj.field},!0),bound.push($jscomp$key$proj)):warn(\x22Scale bindings are currently only supported for scales with unbinned, continuous domains.\x22)}}},topLevelSignals:function(model,selCmpt,signals){var bound\x3dselCmpt.scales.filter(function(proj){return 0\x3d\x3d\x3dsignals.filter(function(s){return s.name\x3d\x3d\x3dproj.signals.data}).length});if(!model.parent||isTopLevelLayer(model)||0\x3d\x3d\x3dbound.length)return signals;\nmodel\x3dsignals.filter(function(s){return s.name\x3d\x3d\x3dselCmpt.name})[0];var update\x3dmodel.update;if(0\x3c\x3dupdate.indexOf(\x22vlSelectionResolve\x22))model.update\x3d\x22{\x22+bound.map(function(proj){return $(proj.field)+\x22: \x22+proj.signals.data}).join(\x22, \x22)+\x22}\x22;else{for(var $jscomp$iter$119\x3d$jscomp.makeIterator(bound),$jscomp$key$proj\x3d$jscomp$iter$119.next();!$jscomp$key$proj.done;$jscomp$key$proj\x3d$jscomp$iter$119.next())$jscomp$key$proj\x3d$jscomp$key$proj.value,$jscomp$key$proj\x3d$($jscomp$key$proj.field)+\x22: \x22+$jscomp$key$proj.signals.data,\n0\x3eupdate.indexOf($jscomp$key$proj)\x26\x26(update\x3dupdate.substring(0,update.length-1)+\x22, \x22+$jscomp$key$proj+\x22}\x22);model.update\x3dupdate}return signals.concat(bound.map(function(proj){return{name:proj.signals.data}}))},signals:function(model,selCmpt,signals){if(model.parent\x26\x26!isTopLevelLayer(model)){model\x3d{};selCmpt\x3d$jscomp.makeIterator(selCmpt.scales);for(var $jscomp$key$proj\x3dselCmpt.next();!$jscomp$key$proj.done;model\x3d{$jscomp$loop$prop$proj$683:model.$jscomp$loop$prop$proj$683},$jscomp$key$proj\x3dselCmpt.next())model.$jscomp$loop$prop$proj$683\x3d\n$jscomp$key$proj.value,$jscomp$key$proj\x3dsignals.filter(function($jscomp$loop$682){return function(s){return s.name\x3d\x3d\x3d$jscomp$loop$682.$jscomp$loop$prop$proj$683.signals.data}}(model))[0],$jscomp$key$proj.push\x3d\x22outer\x22,delete $jscomp$key$proj.value,delete $jscomp$key$proj.update}return signals}},legendBindings\x3d{has:function(selCmpt){var spec\x3d\x22global\x22\x3d\x3d\x3dselCmpt.resolve\x26\x26selCmpt.bind\x26\x26isLegendBinding(selCmpt.bind);selCmpt\x3d1\x3d\x3d\x3dselCmpt.project.items.length\x26\x26\x22_vgsid_\x22!\x3d\x3dselCmpt.project.items[0].field;spec\x26\x26\n!selCmpt\x26\x26warn(\x22Legend bindings are only supported for selections over an individual field or encoding channel.\x22);return spec\x26\x26selCmpt},parse:function(model,selCmpt,selDef,origDef){var _a;origDef.on||delete selCmpt.events;origDef.clear||delete selCmpt.clear;if(origDef.on||origDef.clear)for(model\x3d$jscomp.makeIterator(selCmpt.events),selDef\x3dmodel.next();!selDef.done;selDef\x3dmodel.next())selDef\x3dselDef.value,selDef.filter\x3darray$jscomp$0(null!\x3d\x3d(_a\x3dselDef.filter)\x26\x26void 0!\x3d\x3d_a?_a:[]),0\x3eselDef.filter.indexOf(\x27event.item \\x26\\x26 indexof(event.item.mark.role, \x22legend\x22) \\x3c 0\x27)\x26\x26\nselDef.filter.push(\x27event.item \\x26\\x26 indexof(event.item.mark.role, \x22legend\x22) \\x3c 0\x27);_a\x3disLegendStreamBinding(selCmpt.bind)?selCmpt.bind.legend:\x22click\x22;_a\x3disString(_a)?parseSelector(_a,\x22view\x22):array$jscomp$0(_a);selCmpt.bind\x3d{legend:{merge:_a}}},topLevelSignals:function(model,selCmpt,signals){model\x3dselCmpt.name;for(var stream\x3disLegendStreamBinding(selCmpt.bind)\x26\x26selCmpt.bind.legend,markName\x3dfunction(name){return function(s){s\x3dduplicate(s);s.markname\x3dname;return s}},$jscomp$loop$684\x3d{},$jscomp$iter$122\x3d\n$jscomp.makeIterator(selCmpt.project.items),$jscomp$key$proj\x3d$jscomp$iter$122.next();!$jscomp$key$proj.done;$jscomp$loop$684\x3d{$jscomp$loop$prop$sgName$685:$jscomp$loop$684.$jscomp$loop$prop$sgName$685},$jscomp$key$proj\x3d$jscomp$iter$122.next())$jscomp$key$proj\x3d$jscomp$key$proj.value,$jscomp$key$proj.hasLegend\x26\x26($jscomp$key$proj\x3dvarName($jscomp$key$proj.field)+\x22_legend\x22,$jscomp$loop$684.$jscomp$loop$prop$sgName$685\x3dmodel+\x22_\x22+$jscomp$key$proj,0\x3d\x3d\x3dsignals.filter(function($jscomp$loop$684){return function(s){return s.name\x3d\x3d\x3d\n$jscomp$loop$684.$jscomp$loop$prop$sgName$685}}($jscomp$loop$684)).length\x26\x26($jscomp$key$proj\x3dstream.merge.map(markName($jscomp$key$proj+\x22_symbols\x22)).concat(stream.merge.map(markName($jscomp$key$proj+\x22_labels\x22))).concat(stream.merge.map(markName($jscomp$key$proj+\x22_entries\x22))),signals.unshift(Object.assign(Object.assign({name:$jscomp$loop$684.$jscomp$loop$prop$sgName$685},selCmpt.init?{}:{value:null}),{on:[{events:$jscomp$key$proj,update:\x22datum.value || item().items[0].items[0].datum.value\x22,force:!0},\n{events:stream.merge,update:\x22!event.item || !datum ? null : \x22+$jscomp$loop$684.$jscomp$loop$prop$sgName$685,force:!0}]}))));return signals},signals:function(model,selCmpt,signals){var name\x3dselCmpt.name,proj\x3dselCmpt.project;model\x3dsignals.find(function(s){return s.name\x3d\x3d\x3dname+\x22_tuple\x22});var fields\x3dname+\x22_tuple_fields\x22;proj\x3dproj.items.filter(function(p){return p.hasLegend}).map(function(p){return varName(name+\x22_\x22+varName(p.field)+\x22_legend\x22)});fields\x3dproj.map(function(v){return v+\x22 !\\x3d\\x3d null\x22}).join(\x22 \\x26\\x26 \x22)+\n\x22 ? {fields: \x22+fields+\x22, values: [\x22+proj.join(\x22, \x22)+\x22]} : null\x22;selCmpt.events\x26\x260\x3cproj.length?model.on.push({events:proj.map(function(signal){return{signal:signal}}),update:fields}):0\x3cproj.length\x26\x26(model.update\x3dfields,delete model.value,delete model.on);model\x3dsignals.find(function(s){return s.name\x3d\x3d\x3dname+\x22_toggle\x22});fields\x3disLegendStreamBinding(selCmpt.bind)\x26\x26selCmpt.bind.legend;model\x26\x26(selCmpt.events?model.on.push(Object.assign(Object.assign({},model.on[0]),{events:fields})):model.on[0].events\x3dfields);\nreturn signals}},compilers\x3d[{has:function(){return!0},parse:function(model,selCmpt,selDef){var _a,_b,_c,name\x3dselCmpt.name,proj\x3dnull!\x3d\x3d(_a\x3dselCmpt.project)\x26\x26void 0!\x3d\x3d_a?_a:selCmpt.project\x3dnew SelectionProjectionComponent,parsed\x3d{};_a\x3d{};var signals\x3dnew Set,signalName\x3dfunction(p,range){var suffix\x3d\x22visual\x22\x3d\x3d\x3drange?p.channel:p.field;p\x3dvarName(name+\x22_\x22+suffix);for(var counter\x3d1;signals.has(p);counter++)p\x3dvarName(name+\x22_\x22+suffix+\x22_\x22+counter);signals.add(p);suffix\x3d{};return suffix[range]\x3dp,suffix};if(!selDef.fields\x26\x26\n!selDef.encodings){var cfg\x3dmodel.config.selection[selDef.type];if(selDef.init)for(var $jscomp$iter$113\x3d$jscomp.makeIterator(array$jscomp$0(selDef.init)),$jscomp$key$init\x3d$jscomp$iter$113.next();!$jscomp$key$init.done;$jscomp$key$init\x3d$jscomp$iter$113.next()){$jscomp$key$init\x3d$jscomp.makeIterator(keys$jscomp$0($jscomp$key$init.value));for(var $jscomp$key$key\x3d$jscomp$key$init.next();!$jscomp$key$key.done;$jscomp$key$key\x3d$jscomp$key$init.next())$jscomp$key$key\x3d$jscomp$key$key.value,SINGLE_DEF_UNIT_CHANNEL_INDEX[$jscomp$key$key]?\n(selDef.encodings||(selDef.encodings\x3d[])).push($jscomp$key$key):\x22interval\x22\x3d\x3d\x3dselDef.type?(warn(\x27Interval selections should be initialized using \x22x\x22 and/or \x22y\x22 keys.\x27),selDef.encodings\x3dcfg.encodings):(selDef.fields||(selDef.fields\x3d[])).push($jscomp$key$key)}else selDef.encodings\x3dcfg.encodings,selDef.fields\x3dcfg.fields}cfg\x3d$jscomp.makeIterator(null!\x3d\x3d(_b\x3dselDef.fields)\x26\x26void 0!\x3d\x3d_b?_b:[]);for(_b\x3dcfg.next();!_b.done;_b\x3dcfg.next())_b\x3d_b.value,$jscomp$iter$113\x3d{type:\x22E\x22,field:_b},$jscomp$iter$113.signals\x3d\nObject.assign({},signalName($jscomp$iter$113,\x22data\x22)),proj.items.push($jscomp$iter$113),proj.hasField[_b]\x3d$jscomp$iter$113;_b\x3d$jscomp.makeIterator(null!\x3d\x3d(_c\x3dselDef.encodings)\x26\x26void 0!\x3d\x3d_c?_c:[]);for(_c\x3d_b.next();!_c.done;_c\x3d_b.next())_c\x3d_c.value,($jscomp$iter$113\x3dmodel.fieldDef(_c))?(cfg\x3d$jscomp$iter$113.field,$jscomp$iter$113.aggregate?warn(\x27Cannot project a selection on encoding channel \x22\x27+_c+\x27\x22 as it uses an aggregate function (\x22\x27+$jscomp$iter$113.aggregate+\x27\x22).\x27):cfg?($jscomp$iter$113.timeUnit\x26\x26\n(cfg\x3dmodel.vgField(_c),$jscomp$key$init\x3d{timeUnit:$jscomp$iter$113.timeUnit,as:cfg,field:$jscomp$iter$113.field},_a[hash($jscomp$key$init)]\x3d$jscomp$key$init),parsed[cfg]||($jscomp$key$init\x3d\x22E\x22,\x22interval\x22\x3d\x3d\x3dselCmpt.type?model.getScaleComponent(_c).get(\x22type\x22)in CONTINUOUS_DOMAIN_INDEX\x26\x26($jscomp$key$init\x3d\x22R\x22):$jscomp$iter$113.bin\x26\x26($jscomp$key$init\x3d\x22R-RE\x22),$jscomp$iter$113\x3d{field:cfg,channel:_c,type:$jscomp$key$init},$jscomp$iter$113.signals\x3dObject.assign(Object.assign({},signalName($jscomp$iter$113,\n\x22data\x22)),signalName($jscomp$iter$113,\x22visual\x22)),proj.items.push(parsed[cfg]\x3d$jscomp$iter$113),proj.hasField[cfg]\x3dproj.hasChannel[_c]\x3dparsed[cfg])):warn(cannotProjectOnChannelWithoutField(_c))):warn(cannotProjectOnChannelWithoutField(_c));selDef.init\x26\x26(model\x3dfunction(i){return proj.items.map(function(p){return void 0!\x3d\x3di[p.channel]?i[p.channel]:i[p.field]})},\x22interval\x22\x3d\x3d\x3dselDef.type?selCmpt.init\x3dmodel(selDef.init):(selDef\x3darray$jscomp$0(selDef.init),selCmpt.init\x3dselDef.map(model)));isEmpty(_a)||(proj.timeUnit\x3d\nnew TimeUnitNode(null,_a))},signals:function(model,selCmpt,allSignals){var name\x3dselCmpt.name+\x22_tuple_fields\x22;return 0\x3callSignals.filter(function(s){return s.name\x3d\x3d\x3dname}).length?allSignals:allSignals.concat({name:name,value:selCmpt.project.items.map(function(proj){proj\x3d__rest(proj,[\x22signals\x22,\x22hasLegend\x22]);proj.field\x3dreplacePathInField(proj.field);return proj})})}},toggle,scaleBindings,legendBindings,{has:function(selCmpt){return\x22interval\x22\x3d\x3d\x3dselCmpt.type\x26\x26selCmpt.translate},signals:function(model,\nselCmpt,signals){var name\x3dselCmpt.name,hasScales\x3dscaleBindings.has(selCmpt),anchor\x3dname+\x22_translate_anchor\x22,$jscomp$destructuring$var178\x3dselCmpt.project.hasChannel,x\x3d$jscomp$destructuring$var178.x;$jscomp$destructuring$var178\x3d$jscomp$destructuring$var178.y;var events\x3dparseSelector(selCmpt.translate,\x22scope\x22);hasScales||(events\x3devents.map(function(e){return e.between[0].markname\x3dname+\x22_brush\x22,e}));signals.push({name:anchor,value:{},on:[{events:events.map(function(e){return e.between[0]}),update:\x22{x: x(unit), y: y(unit)\x22+\n(void 0!\x3d\x3dx?\x22, extent_x: \x22+(hasScales?\x22domain(\x22+$(model.scaleName(\x22x\x22))+\x22)\x22:\x22slice(\x22+x.signals.visual+\x22)\x22):\x22\x22)+(void 0!\x3d\x3d$jscomp$destructuring$var178?\x22, extent_y: \x22+(hasScales?\x22domain(\x22+$(model.scaleName(\x22y\x22))+\x22)\x22:\x22slice(\x22+$jscomp$destructuring$var178.signals.visual+\x22)\x22):\x22\x22)+\x22}\x22}]},{name:name+\x22_translate_delta\x22,value:{},on:[{events:events,update:\x22{x: \x22+anchor+\x22.x - x(unit), y: \x22+anchor+\x22.y - y(unit)}\x22}]});void 0!\x3d\x3dx\x26\x26onDelta(model,selCmpt,x,\x22width\x22,signals);void 0!\x3d\x3d$jscomp$destructuring$var178\x26\x26\nonDelta(model,selCmpt,$jscomp$destructuring$var178,\x22height\x22,signals);return signals}},{has:function(selCmpt){return\x22interval\x22\x3d\x3d\x3dselCmpt.type\x26\x26selCmpt.zoom},signals:function(model,selCmpt,signals){var name\x3dselCmpt.name,hasScales\x3dscaleBindings.has(selCmpt),delta\x3dname+\x22_zoom_delta\x22,$jscomp$destructuring$var179\x3dselCmpt.project.hasChannel,x\x3d$jscomp$destructuring$var179.x;$jscomp$destructuring$var179\x3d$jscomp$destructuring$var179.y;var sx\x3d$(model.scaleName(\x22x\x22)),sy\x3d$(model.scaleName(\x22y\x22)),events\x3dparseSelector(selCmpt.zoom,\n\x22scope\x22);hasScales||(events\x3devents.map(function(e){return e.markname\x3dname+\x22_brush\x22,e}));signals.push({name:name+\x22_zoom_anchor\x22,on:[{events:events,update:hasScales?\x22{\x22+[sx?\x22x: invert(\x22+sx+\x22, x(unit))\x22:\x22\x22,sy?\x22y: invert(\x22+sy+\x22, y(unit))\x22:\x22\x22].filter(function(expr){return!!expr}).join(\x22, \x22)+\x22}\x22:\x22{x: x(unit), y: y(unit)}\x22}]},{name:delta,on:[{events:events,force:!0,update:\x22pow(1.001, event.deltaY * pow(16, event.deltaMode))\x22}]});void 0!\x3d\x3dx\x26\x26onDelta$1(model,selCmpt,x,\x22width\x22,signals);void 0!\x3d\x3d$jscomp$destructuring$var179\x26\x26\nonDelta$1(model,selCmpt,$jscomp$destructuring$var179,\x22height\x22,signals);return signals}},inputBindings,nearest,{has:function(selCmpt){return void 0!\x3d\x3dselCmpt.clear\x26\x26!1!\x3d\x3dselCmpt.clear},parse:function(model,selCmpt,selDef){selDef.clear\x26\x26(selCmpt.clear\x3disString(selDef.clear)?parseSelector(selDef.clear,\x22scope\x22):selDef.clear)},topLevelSignals:function(model,selCmpt,signals){if(inputBindings.has(selCmpt)){model\x3d{};for(var $jscomp$iter$116\x3d$jscomp.makeIterator(selCmpt.project.items),$jscomp$key$proj\x3d$jscomp$iter$116.next();!$jscomp$key$proj.done;model\x3d\n{$jscomp$loop$prop$proj$678:model.$jscomp$loop$prop$proj$678},$jscomp$key$proj\x3d$jscomp$iter$116.next())model.$jscomp$loop$prop$proj$678\x3d$jscomp$key$proj.value,$jscomp$key$proj\x3dsignals.findIndex(function($jscomp$loop$677){return function(n){return n.name\x3d\x3d\x3dvarName(selCmpt.name+\x22_\x22+$jscomp$loop$677.$jscomp$loop$prop$proj$678.field)}}(model)),-1!\x3d\x3d$jscomp$key$proj\x26\x26signals[$jscomp$key$proj].on.push({events:selCmpt.clear,update:\x22null\x22})}return signals},signals:function(model,selCmpt,signals){function addClear(idx,\nupdate){-1!\x3d\x3didx\x26\x26signals[idx].on\x26\x26signals[idx].on.push({events:selCmpt.clear,update:update})}if(\x22interval\x22\x3d\x3d\x3dselCmpt.type){model\x3d{};for(var $jscomp$iter$117\x3d$jscomp.makeIterator(selCmpt.project.items),$jscomp$key$proj\x3d$jscomp$iter$117.next();!$jscomp$key$proj.done;model\x3d{$jscomp$loop$prop$proj$681:model.$jscomp$loop$prop$proj$681},$jscomp$key$proj\x3d$jscomp$iter$117.next())model.$jscomp$loop$prop$proj$681\x3d$jscomp$key$proj.value,$jscomp$key$proj\x3dsignals.findIndex(function($jscomp$loop$679){return function(n){return n.name\x3d\x3d\x3d\n$jscomp$loop$679.$jscomp$loop$prop$proj$681.signals.visual}}(model)),addClear($jscomp$key$proj,\x22[0, 0]\x22),-1\x3d\x3d\x3d$jscomp$key$proj\x26\x26($jscomp$key$proj\x3dsignals.findIndex(function($jscomp$loop$679){return function(n){return n.name\x3d\x3d\x3d$jscomp$loop$679.$jscomp$loop$prop$proj$681.signals.data}}(model)),addClear($jscomp$key$proj,\x22null\x22))}else model\x3dsignals.findIndex(function(n){return n.name\x3d\x3d\x3dselCmpt.name+\x22_tuple\x22}),addClear(model,\x22null\x22),toggle.has(selCmpt)\x26\x26(model\x3dsignals.findIndex(function(n){return n.name\x3d\x3d\x3d\nselCmpt.name+\x22_toggle\x22}),addClear(model,\x22false\x22));return signals}}],compilers$1\x3d{single:{signals:singleOrMultiSignals,modifyExpr:function(model,selCmpt){return selCmpt.name+\x22_tuple, \x22+(\x22global\x22\x3d\x3d\x3dselCmpt.resolve?\x22true\x22:\x22{unit: \x22+unitName(model)+\x22}\x22)}},multi:{signals:singleOrMultiSignals,modifyExpr:function(model,selCmpt){return selCmpt.name+\x22_tuple, \x22+(\x22global\x22\x3d\x3d\x3dselCmpt.resolve?\x22null\x22:\x22{unit: \x22+unitName(model)+\x22}\x22)}},interval:{signals:function(model,selCmpt){var name\x3dselCmpt.name,fieldsSg\x3dname+\x22_tuple_fields\x22,\nhasScales\x3dscaleBindings.has(selCmpt),signals\x3d[],dataSignals\x3d[],scaleTriggers\x3d[];if(selCmpt.translate\x26\x26!hasScales){var filterExpr\x3d\x22!event.item || event.item.mark.name !\\x3d\\x3d \x22+$(name+\x22_brush\x22);events$jscomp$0(selCmpt,function(on,evt){var _a;evt\x3darray$jscomp$0(null!\x3d\x3d(_a\x3devt.between[0].filter)\x26\x26void 0!\x3d\x3d_a?_a:evt.between[0].filter\x3d[]);0\x3eevt.indexOf(filterExpr)\x26\x26evt.push(filterExpr);return on})}selCmpt.project.items.forEach(function(proj,i){var channel\x3dproj.channel;if(\x22x\x22!\x3d\x3dchannel\x26\x26\x22y\x22!\x3d\x3dchannel)warn(\x22Interval selections only support x and y encoding channels.\x22);\nelse{i\x3dchannelSignals(model,selCmpt,proj,selCmpt.init?selCmpt.init[i]:null);var dname\x3dproj.signals.data;proj\x3dproj.signals.visual;var scaleName\x3d$(model.scaleName(channel)),toNum\x3dmodel.getScaleComponent(channel).get(\x22type\x22)in CONTINUOUS_DOMAIN_INDEX?\x22+\x22:\x22\x22;signals.push.apply(signals,$jscomp.arrayFromIterable(i));dataSignals.push(dname);scaleTriggers.push({scaleName:model.scaleName(channel),expr:\x22(!isArray(\x22+dname+\x22) || (\x22+(toNum+\x22invert(\x22+scaleName+\x22, \x22+proj+\x22)[0] \\x3d\\x3d\\x3d \x22+toNum+dname+\x22[0] \\x26\\x26 \x22)+\n(toNum+\x22invert(\x22+scaleName+\x22, \x22+proj+\x22)[1] \\x3d\\x3d\\x3d \x22+toNum+dname+\x22[1]))\x22)})}});hasScales||signals.push({name:name+\x22_scale_trigger\x22,value:{},on:[{events:scaleTriggers.map(function(t){return{scale:t.scaleName}}),update:scaleTriggers.map(function(t){return t.expr}).join(\x22 \\x26\\x26 \x22)+(\x22 ? \x22+(name+\x22_scale_trigger : {}\x22))}]});hasScales\x3dselCmpt.init;fieldsSg\x3d\x22unit: \x22+unitName(model)+\x22, fields: \x22+fieldsSg+\x22, values\x22;return signals.concat(Object.assign(Object.assign({name:name+\x22_tuple\x22},hasScales?{init:\x22{\x22+\nfieldsSg+\x22: \x22+assembleInit(hasScales)+\x22}\x22}:{}),{on:[{events:[{signal:dataSignals.join(\x22 || \x22)}],update:dataSignals.join(\x22 \\x26\\x26 \x22)+(\x22 ? {\x22+fieldsSg+\x22: [\x22+dataSignals+\x22]} : null\x22)}]}))},modifyExpr:function(model,selCmpt){return selCmpt.name+\x22_tuple, \x22+(\x22global\x22\x3d\x3d\x3dselCmpt.resolve?\x22true\x22:\x22{unit: \x22+unitName(model)+\x22}\x22)},marks:function(model,selCmpt,marks){var name\x3dselCmpt.name,$jscomp$destructuring$var180\x3dselCmpt.project.hasChannel,x\x3d$jscomp$destructuring$var180.x,y\x3d$jscomp$destructuring$var180.y,\nxvname\x3dx\x26\x26x.signals.visual,yvname\x3dy\x26\x26y.signals.visual,store\x3d\x22data(\x22+$(selCmpt.name+\x22_store\x22)+\x22)\x22;if(scaleBindings.has(selCmpt))return marks;$jscomp$destructuring$var180\x3d{x:void 0!\x3d\x3dx?{signal:xvname+\x22[0]\x22}:{value:0},y:void 0!\x3d\x3dy?{signal:yvname+\x22[0]\x22}:{value:0},x2:void 0!\x3d\x3dx?{signal:xvname+\x22[1]\x22}:{field:{group:\x22width\x22}},y2:void 0!\x3d\x3dy?{signal:yvname+\x22[1]\x22}:{field:{group:\x22height\x22}}};if(\x22global\x22\x3d\x3d\x3dselCmpt.resolve)for(var $jscomp$iter$125\x3d$jscomp.makeIterator(keys$jscomp$0($jscomp$destructuring$var180)),\n$jscomp$key$key\x3d$jscomp$iter$125.next();!$jscomp$key$key.done;$jscomp$key$key\x3d$jscomp$iter$125.next())$jscomp$key$key\x3d$jscomp$key$key.value,$jscomp$destructuring$var180[$jscomp$key$key]\x3d[Object.assign({test:store+\x22.length \\x26\\x26 \x22+store+\x22[0].unit \\x3d\\x3d\\x3d \x22+unitName(model)},$jscomp$destructuring$var180[$jscomp$key$key]),{value:0}];$jscomp$iter$125\x3dselCmpt.mark;model\x3d$jscomp$iter$125.fill;selCmpt\x3d$jscomp$iter$125.fillOpacity;store\x3d$jscomp$iter$125.cursor;var stroke\x3d__rest($jscomp$iter$125,[\x22fill\x22,\n\x22fillOpacity\x22,\x22cursor\x22]);$jscomp$iter$125\x3dkeys$jscomp$0(stroke).reduce(function(def,k){def[k]\x3d[{test:[void 0!\x3d\x3dx\x26\x26xvname+\x22[0] !\\x3d\\x3d \x22+xvname+\x22[1]\x22,void 0!\x3d\x3dy\x26\x26yvname+\x22[0] !\\x3d\\x3d \x22+yvname+\x22[1]\x22].filter(function(t){return t}).join(\x22 \\x26\\x26 \x22),value:stroke[k]},{value:null}];return def},{});return[{name:name+\x22_brush_bg\x22,type:\x22rect\x22,clip:!0,encode:{enter:{fill:{value:model},fillOpacity:{value:selCmpt}},update:$jscomp$destructuring$var180}}].concat($jscomp.arrayFromIterable(marks),[{name:name+\n\x22_brush\x22,type:\x22rect\x22,clip:!0,encode:{enter:Object.assign(Object.assign({},store?{cursor:{value:store}}:{}),{fill:{value:\x22transparent\x22}}),update:Object.assign(Object.assign({},$jscomp$destructuring$var180),$jscomp$iter$125)}}])}}};ASTNode.prototype.visit\x3dfunction(visitor){var n;if(visitor(this))return 1;var c\x3dchildren$jscomp$0(this);var i\x3d0;for(n\x3dc.length;i\x3cn;++i)if(c[i].visit(visitor))return 1};var source$jscomp$0,index$jscomp$0,length$jscomp$0,lookahead,RegexNonAsciiIdentifierStart\x3d/[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0370-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0620-\\u064A\\u066E\\u066F\\u0671-\\u06D3\\u06D5\\u06E5\\u06E6\\u06EE\\u06EF\\u06FA-\\u06FC\\u06FF\\u0710\\u0712-\\u072F\\u074D-\\u07A5\\u07B1\\u07CA-\\u07EA\\u07F4\\u07F5\\u07FA\\u0800-\\u0815\\u081A\\u0824\\u0828\\u0840-\\u0858\\u08A0-\\u08B2\\u0904-\\u0939\\u093D\\u0950\\u0958-\\u0961\\u0971-\\u0980\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BD\\u09CE\\u09DC\\u09DD\\u09DF-\\u09E1\\u09F0\\u09F1\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A59-\\u0A5C\\u0A5E\\u0A72-\\u0A74\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABD\\u0AD0\\u0AE0\\u0AE1\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3D\\u0B5C\\u0B5D\\u0B5F-\\u0B61\\u0B71\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BD0\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D\\u0C58\\u0C59\\u0C60\\u0C61\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBD\\u0CDE\\u0CE0\\u0CE1\\u0CF1\\u0CF2\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D\\u0D4E\\u0D60\\u0D61\\u0D7A-\\u0D7F\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0E01-\\u0E30\\u0E32\\u0E33\\u0E40-\\u0E46\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB0\\u0EB2\\u0EB3\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EDC-\\u0EDF\\u0F00\\u0F40-\\u0F47\\u0F49-\\u0F6C\\u0F88-\\u0F8C\\u1000-\\u102A\\u103F\\u1050-\\u1055\\u105A-\\u105D\\u1061\\u1065\\u1066\\u106E-\\u1070\\u1075-\\u1081\\u108E\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1711\\u1720-\\u1731\\u1740-\\u1751\\u1760-\\u176C\\u176E-\\u1770\\u1780-\\u17B3\\u17D7\\u17DC\\u1820-\\u1877\\u1880-\\u18A8\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1950-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19C1-\\u19C7\\u1A00-\\u1A16\\u1A20-\\u1A54\\u1AA7\\u1B05-\\u1B33\\u1B45-\\u1B4B\\u1B83-\\u1BA0\\u1BAE\\u1BAF\\u1BBA-\\u1BE5\\u1C00-\\u1C23\\u1C4D-\\u1C4F\\u1C5A-\\u1C7D\\u1CE9-\\u1CEC\\u1CEE-\\u1CF1\\u1CF5\\u1CF6\\u1D00-\\u1DBF\\u1E00-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u2071\\u207F\\u2090-\\u209C\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CEE\\u2CF2\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D80-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2E2F\\u3005-\\u3007\\u3021-\\u3029\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA61F\\uA62A\\uA62B\\uA640-\\uA66E\\uA67F-\\uA69D\\uA6A0-\\uA6EF\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA801\\uA803-\\uA805\\uA807-\\uA80A\\uA80C-\\uA822\\uA840-\\uA873\\uA882-\\uA8B3\\uA8F2-\\uA8F7\\uA8FB\\uA90A-\\uA925\\uA930-\\uA946\\uA960-\\uA97C\\uA984-\\uA9B2\\uA9CF\\uA9E0-\\uA9E4\\uA9E6-\\uA9EF\\uA9FA-\\uA9FE\\uAA00-\\uAA28\\uAA40-\\uAA42\\uAA44-\\uAA4B\\uAA60-\\uAA76\\uAA7A\\uAA7E-\\uAAAF\\uAAB1\\uAAB5\\uAAB6\\uAAB9-\\uAABD\\uAAC0\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEA\\uAAF2-\\uAAF4\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABE2\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D\\uFB1F-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF21-\\uFF3A\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]/,\nRegexNonAsciiIdentifierPart\x3d/[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0300-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u0483-\\u0487\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u0591-\\u05BD\\u05BF\\u05C1\\u05C2\\u05C4\\u05C5\\u05C7\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0610-\\u061A\\u0620-\\u0669\\u066E-\\u06D3\\u06D5-\\u06DC\\u06DF-\\u06E8\\u06EA-\\u06FC\\u06FF\\u0710-\\u074A\\u074D-\\u07B1\\u07C0-\\u07F5\\u07FA\\u0800-\\u082D\\u0840-\\u085B\\u08A0-\\u08B2\\u08E4-\\u0963\\u0966-\\u096F\\u0971-\\u0983\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BC-\\u09C4\\u09C7\\u09C8\\u09CB-\\u09CE\\u09D7\\u09DC\\u09DD\\u09DF-\\u09E3\\u09E6-\\u09F1\\u0A01-\\u0A03\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A3C\\u0A3E-\\u0A42\\u0A47\\u0A48\\u0A4B-\\u0A4D\\u0A51\\u0A59-\\u0A5C\\u0A5E\\u0A66-\\u0A75\\u0A81-\\u0A83\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABC-\\u0AC5\\u0AC7-\\u0AC9\\u0ACB-\\u0ACD\\u0AD0\\u0AE0-\\u0AE3\\u0AE6-\\u0AEF\\u0B01-\\u0B03\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3C-\\u0B44\\u0B47\\u0B48\\u0B4B-\\u0B4D\\u0B56\\u0B57\\u0B5C\\u0B5D\\u0B5F-\\u0B63\\u0B66-\\u0B6F\\u0B71\\u0B82\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BBE-\\u0BC2\\u0BC6-\\u0BC8\\u0BCA-\\u0BCD\\u0BD0\\u0BD7\\u0BE6-\\u0BEF\\u0C00-\\u0C03\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D-\\u0C44\\u0C46-\\u0C48\\u0C4A-\\u0C4D\\u0C55\\u0C56\\u0C58\\u0C59\\u0C60-\\u0C63\\u0C66-\\u0C6F\\u0C81-\\u0C83\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBC-\\u0CC4\\u0CC6-\\u0CC8\\u0CCA-\\u0CCD\\u0CD5\\u0CD6\\u0CDE\\u0CE0-\\u0CE3\\u0CE6-\\u0CEF\\u0CF1\\u0CF2\\u0D01-\\u0D03\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D-\\u0D44\\u0D46-\\u0D48\\u0D4A-\\u0D4E\\u0D57\\u0D60-\\u0D63\\u0D66-\\u0D6F\\u0D7A-\\u0D7F\\u0D82\\u0D83\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0DCA\\u0DCF-\\u0DD4\\u0DD6\\u0DD8-\\u0DDF\\u0DE6-\\u0DEF\\u0DF2\\u0DF3\\u0E01-\\u0E3A\\u0E40-\\u0E4E\\u0E50-\\u0E59\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB9\\u0EBB-\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EC8-\\u0ECD\\u0ED0-\\u0ED9\\u0EDC-\\u0EDF\\u0F00\\u0F18\\u0F19\\u0F20-\\u0F29\\u0F35\\u0F37\\u0F39\\u0F3E-\\u0F47\\u0F49-\\u0F6C\\u0F71-\\u0F84\\u0F86-\\u0F97\\u0F99-\\u0FBC\\u0FC6\\u1000-\\u1049\\u1050-\\u109D\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u135D-\\u135F\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1714\\u1720-\\u1734\\u1740-\\u1753\\u1760-\\u176C\\u176E-\\u1770\\u1772\\u1773\\u1780-\\u17D3\\u17D7\\u17DC\\u17DD\\u17E0-\\u17E9\\u180B-\\u180D\\u1810-\\u1819\\u1820-\\u1877\\u1880-\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1920-\\u192B\\u1930-\\u193B\\u1946-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19B0-\\u19C9\\u19D0-\\u19D9\\u1A00-\\u1A1B\\u1A20-\\u1A5E\\u1A60-\\u1A7C\\u1A7F-\\u1A89\\u1A90-\\u1A99\\u1AA7\\u1AB0-\\u1ABD\\u1B00-\\u1B4B\\u1B50-\\u1B59\\u1B6B-\\u1B73\\u1B80-\\u1BF3\\u1C00-\\u1C37\\u1C40-\\u1C49\\u1C4D-\\u1C7D\\u1CD0-\\u1CD2\\u1CD4-\\u1CF6\\u1CF8\\u1CF9\\u1D00-\\u1DF5\\u1DFC-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u200C\\u200D\\u203F\\u2040\\u2054\\u2071\\u207F\\u2090-\\u209C\\u20D0-\\u20DC\\u20E1\\u20E5-\\u20F0\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D7F-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2DE0-\\u2DFF\\u2E2F\\u3005-\\u3007\\u3021-\\u302F\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u3099\\u309A\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA62B\\uA640-\\uA66F\\uA674-\\uA67D\\uA67F-\\uA69D\\uA69F-\\uA6F1\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA827\\uA840-\\uA873\\uA880-\\uA8C4\\uA8D0-\\uA8D9\\uA8E0-\\uA8F7\\uA8FB\\uA900-\\uA92D\\uA930-\\uA953\\uA960-\\uA97C\\uA980-\\uA9C0\\uA9CF-\\uA9D9\\uA9E0-\\uA9FE\\uAA00-\\uAA36\\uAA40-\\uAA4D\\uAA50-\\uAA59\\uAA60-\\uAA76\\uAA7A-\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEF\\uAAF2-\\uAAF6\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABEA\\uABEC\\uABED\\uABF0-\\uABF9\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE00-\\uFE0F\\uFE20-\\uFE2D\\uFE33\\uFE34\\uFE4D-\\uFE4F\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF10-\\uFF19\\uFF21-\\uFF3A\\uFF3F\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]/,\nkeywords\x3d{\x22if\x22:1,\x22in\x22:1,\x22do\x22:1,\x22var\x22:1,\x22for\x22:1,\x22new\x22:1,\x22try\x22:1,let:1,\x22this\x22:1,\x22else\x22:1,\x22case\x22:1,\x22void\x22:1,\x22with\x22:1,\x22enum\x22:1,\x22while\x22:1,\x22break\x22:1,\x22catch\x22:1,\x22throw\x22:1,\x22const\x22:1,yield:1,\x22class\x22:1,\x22super\x22:1,\x22return\x22:1,\x22typeof\x22:1,\x22delete\x22:1,\x22switch\x22:1,\x22export\x22:1,\x22import\x22:1,\x22public\x22:1,\x22static\x22:1,\x22default\x22:1,\x22finally\x22:1,\x22extends\x22:1,\x22package\x22:1,\x22private\x22:1,\x22function\x22:1,\x22continue\x22:1,\x22debugger\x22:1,\x22interface\x22:1,\x22protected\x22:1,\x22instanceof\x22:1,\x22implements\x22:1},legalKeywords\x3d{\x22if\x22:1},FilterNode\x3dfunction(parent,model,\nfilter){parent\x3dDataFlowNode.call(this,parent)||this;parent.model\x3dmodel;parent.filter\x3dfilter;parent.expr\x3dexpression$jscomp$0(parent.model,parent.filter,parent);parent._dependentFields\x3dgetDependentFields(parent.expr);return parent};$jscomp.inherits(FilterNode,DataFlowNode);FilterNode.prototype.clone\x3dfunction(){return new FilterNode(null,this.model,duplicate(this.filter))};FilterNode.prototype.dependentFields\x3dfunction(){return this._dependentFields};FilterNode.prototype.producedFields\x3dfunction(){return new Set};\nFilterNode.prototype.assemble\x3dfunction(){return{type:\x22filter\x22,expr:this.expr}};FilterNode.prototype.hash\x3dfunction(){return\x22Filter \x22+this.expr};var HEADER_TITLE_PROPERTIES_MAP\x3d{titleAlign:\x22align\x22,titleAnchor:\x22anchor\x22,titleAngle:\x22angle\x22,titleBaseline:\x22baseline\x22,titleColor:\x22color\x22,titleFont:\x22font\x22,titleFontSize:\x22fontSize\x22,titleFontStyle:\x22fontStyle\x22,titleFontWeight:\x22fontWeight\x22,titleLimit:\x22limit\x22,titleLineHeight:\x22lineHeight\x22,titleOrient:\x22orient\x22,titlePadding:\x22offset\x22},HEADER_LABEL_PROPERTIES_MAP\x3d{labelAlign:\x22align\x22,\nlabelAnchor:\x22anchor\x22,labelAngle:\x22angle\x22,labelBaseline:\x22baseline\x22,labelColor:\x22color\x22,labelFont:\x22font\x22,labelFontSize:\x22fontSize\x22,labelFontStyle:\x22fontStyle\x22,labelFontWeight:\x22fontWeight\x22,labelLimit:\x22limit\x22,labelLineHeight:\x22lineHeight\x22,labelOrient:\x22orient\x22,labelPadding:\x22offset\x22},HEADER_TITLE_PROPERTIES\x3dkeys$jscomp$0(HEADER_TITLE_PROPERTIES_MAP),HEADER_LABEL_PROPERTIES\x3dkeys$jscomp$0(HEADER_LABEL_PROPERTIES_MAP),axisRules\x3d{scale:function($jscomp$destructuring$var194){return $jscomp$destructuring$var194.model.scaleName($jscomp$destructuring$var194.channel)},\nformat:function($jscomp$destructuring$var196){var fieldOrDatumDef\x3d$jscomp$destructuring$var196.fieldOrDatumDef,$jscomp$destructuring$var198\x3d$jscomp$destructuring$var196.axis;return guideFormat(fieldOrDatumDef,fieldOrDatumDef.type,$jscomp$destructuring$var198.format,$jscomp$destructuring$var198.formatType,$jscomp$destructuring$var196.config,!0)},formatType:function($jscomp$destructuring$var199){return guideFormatType($jscomp$destructuring$var199.axis.formatType,$jscomp$destructuring$var199.fieldOrDatumDef,\n$jscomp$destructuring$var199.scaleType)},grid:function($jscomp$destructuring$var202){var fieldOrDatumDef\x3d$jscomp$destructuring$var202.fieldOrDatumDef,axis\x3d$jscomp$destructuring$var202.axis;$jscomp$destructuring$var202\x3d$jscomp$destructuring$var202.scaleType;var _a;return isFieldDef(fieldOrDatumDef)\x26\x26isBinned(fieldOrDatumDef.bin)?!1:null!\x3d\x3d(_a\x3daxis.grid)\x26\x26void 0!\x3d\x3d_a?_a:!($jscomp$destructuring$var202 in DISCRETE_DOMAIN_INDEX)\x26\x26isFieldDef(fieldOrDatumDef)\x26\x26!isBinning(null\x3d\x3d\x3dfieldOrDatumDef||void 0\x3d\x3d\x3d\nfieldOrDatumDef?void 0:fieldOrDatumDef.bin)},gridScale:function($jscomp$destructuring$var204){var JSCompiler_inline_result\x3d$jscomp$destructuring$var204.model;$jscomp$destructuring$var204\x3d\x22x\x22\x3d\x3d\x3d$jscomp$destructuring$var204.channel?\x22y\x22:\x22x\x22;JSCompiler_inline_result\x3dJSCompiler_inline_result.getScaleComponent($jscomp$destructuring$var204)?JSCompiler_inline_result.scaleName($jscomp$destructuring$var204):void 0;return JSCompiler_inline_result},labelAlign:function($jscomp$destructuring$var206){var labelAngle\x3d\n$jscomp$destructuring$var206.labelAngle,orient\x3d$jscomp$destructuring$var206.orient,channel\x3d$jscomp$destructuring$var206.channel;return $jscomp$destructuring$var206.axis.labelAlign||defaultLabelAlign(labelAngle,orient,channel)},labelAngle:function($jscomp$destructuring$var208){return $jscomp$destructuring$var208.labelAngle},labelBaseline:function($jscomp$destructuring$var210){var labelAngle\x3d$jscomp$destructuring$var210.labelAngle,orient\x3d$jscomp$destructuring$var210.orient,channel\x3d$jscomp$destructuring$var210.channel;\nreturn $jscomp$destructuring$var210.axis.labelBaseline||defaultLabelBaseline(labelAngle,orient,channel)},labelFlush:function($jscomp$destructuring$var212){var fieldOrDatumDef\x3d$jscomp$destructuring$var212.fieldOrDatumDef,channel\x3d$jscomp$destructuring$var212.channel,_a;$jscomp$destructuring$var212\x3dnull!\x3d\x3d(_a\x3d$jscomp$destructuring$var212.axis.labelFlush)\x26\x26void 0!\x3d\x3d_a?_a:\x22x\x22\x3d\x3d\x3dchannel\x26\x26contains([\x22quantitative\x22,\x22temporal\x22],fieldOrDatumDef.type)?!0:void 0;return $jscomp$destructuring$var212},labelOverlap:function($jscomp$destructuring$var214){var fieldOrDatumDef\x3d\n$jscomp$destructuring$var214.fieldOrDatumDef,scaleType\x3d$jscomp$destructuring$var214.scaleType,_a;$jscomp$destructuring$var214\x3dnull!\x3d\x3d(_a\x3d$jscomp$destructuring$var214.axis.labelOverlap)\x26\x26void 0!\x3d\x3d_a?_a:\x22nominal\x22!\x3d\x3dfieldOrDatumDef.type?\x22log\x22\x3d\x3d\x3dscaleType?\x22greedy\x22:!0:void 0;return $jscomp$destructuring$var214},orient:function($jscomp$destructuring$var216){return $jscomp$destructuring$var216.orient},tickCount:function($jscomp$destructuring$var218){var channel\x3d$jscomp$destructuring$var218.channel,model\x3d\n$jscomp$destructuring$var218.model,axis\x3d$jscomp$destructuring$var218.axis,fieldOrDatumDef\x3d$jscomp$destructuring$var218.fieldOrDatumDef;$jscomp$destructuring$var218\x3d$jscomp$destructuring$var218.scaleType;var _a;model\x3d(channel\x3d\x22x\x22\x3d\x3d\x3dchannel?\x22width\x22:\x22y\x22\x3d\x3d\x3dchannel?\x22height\x22:void 0)?model.getSizeSignalRef(channel):void 0;if(null!\x3d\x3d(_a\x3daxis.tickCount)\x26\x26void 0!\x3d\x3d_a)axis\x3d_a;else a:{var _a$jscomp$0;if(axis.values||$jscomp$destructuring$var218 in DISCRETE_DOMAIN_INDEX||\x22log\x22\x3d\x3d\x3d$jscomp$destructuring$var218)axis\x3d\nvoid 0;else{if(isFieldDef(fieldOrDatumDef)){if(isBinning(fieldOrDatumDef.bin)){axis\x3d{signal:\x22ceil(\x22+model.signal+\x22/10)\x22};break a}if(fieldOrDatumDef.timeUnit\x26\x26contains([\x22month\x22,\x22hours\x22,\x22day\x22,\x22quarter\x22],null\x3d\x3d\x3d(_a$jscomp$0\x3dnormalizeTimeUnit(fieldOrDatumDef.timeUnit))||void 0\x3d\x3d\x3d_a$jscomp$0?void 0:_a$jscomp$0.unit)){axis\x3dvoid 0;break a}}axis\x3d{signal:\x22ceil(\x22+model.signal+\x22/40)\x22}}}return axis},title:function($jscomp$destructuring$var220){var axis\x3d$jscomp$destructuring$var220.axis,model\x3d$jscomp$destructuring$var220.model;\n$jscomp$destructuring$var220\x3d$jscomp$destructuring$var220.channel;if(void 0!\x3d\x3daxis.title)return axis.title;axis\x3dgetFieldDefTitle(model,$jscomp$destructuring$var220);if(void 0!\x3d\x3daxis)return axis;axis\x3dmodel.typedFieldDef($jscomp$destructuring$var220);model\x3dmodel.fieldDef(\x22x\x22\x3d\x3d\x3d$jscomp$destructuring$var220?\x22x2\x22:\x22y2\x22);return mergeTitleFieldDefs(axis?[toFieldDefBase(axis)]:[],isFieldDef(model)?[toFieldDefBase(model)]:[])},values:function($jscomp$destructuring$var222){var JSCompiler_inline_result\x3d$jscomp$destructuring$var222.fieldOrDatumDef;\n$jscomp$destructuring$var222\x3d$jscomp$destructuring$var222.axis.values;JSCompiler_inline_result\x3disArray($jscomp$destructuring$var222)?valueArray(JSCompiler_inline_result,$jscomp$destructuring$var222):isSignalRef($jscomp$destructuring$var222)?$jscomp$destructuring$var222:void 0;return JSCompiler_inline_result},zindex:function($jscomp$destructuring$var224){var fieldOrDatumDef\x3d$jscomp$destructuring$var224.fieldOrDatumDef,mark\x3d$jscomp$destructuring$var224.mark,_a;$jscomp$destructuring$var224\x3dnull!\x3d\x3d(_a\x3d\n$jscomp$destructuring$var224.axis.zindex)\x26\x26void 0!\x3d\x3d_a?_a:\x22rect\x22\x3d\x3d\x3dmark\x26\x26isDiscrete(fieldOrDatumDef)?1:0;return $jscomp$destructuring$var224}},CalculateNode\x3dfunction(parent,transform){parent\x3dDataFlowNode.call(this,parent)||this;parent.transform\x3dtransform;parent._dependentFields\x3dgetDependentFields(parent.transform.calculate);return parent};$jscomp.inherits(CalculateNode,DataFlowNode);CalculateNode.prototype.clone\x3dfunction(){return new CalculateNode(null,duplicate(this.transform))};CalculateNode.parseAllForSortIndex\x3d\nfunction(parent,model){model.forEachFieldDef(function(fieldDef,channel){if(isScaleFieldDef(fieldDef)\x26\x26isSortArray(fieldDef.sort)){var field$469\x3dfieldDef.field,timeUnit\x3dfieldDef.timeUnit,sort\x3dfieldDef.sort;sort\x3dsort.map(function(sortValue,i){return fieldFilterExpression({field:field$469,timeUnit:timeUnit,equal:sortValue})+\x22 ? \x22+i+\x22 : \x22}).join(\x22\x22)+sort.length;parent\x3dnew CalculateNode(parent,{calculate:sort,as:sortArrayIndexField(fieldDef,channel,{forAs:!0})})}});return parent};CalculateNode.prototype.producedFields\x3d\nfunction(){return new Set([this.transform.as])};CalculateNode.prototype.dependentFields\x3dfunction(){return this._dependentFields};CalculateNode.prototype.assemble\x3dfunction(){return{type:\x22formula\x22,expr:this.transform.calculate,as:this.transform.as}};CalculateNode.prototype.hash\x3dfunction(){return\x22Calculate \x22+hash(this.transform)};var HEADER_CHANNELS\x3d[\x22row\x22,\x22column\x22],HEADER_TYPES\x3d[\x22header\x22,\x22footer\x22],LAYOUT_TITLE_BAND\x3d{column:{start:0,end:1},row:{start:1,end:0}},LEGEND_COMPONENT_PROPERTY_INDEX\x3dObject.assign(Object.assign({},\n{aria:1,clipHeight:1,columnPadding:1,columns:1,cornerRadius:1,description:1,direction:1,fillColor:1,format:1,formatType:1,gradientLength:1,gradientOpacity:1,gradientStrokeColor:1,gradientStrokeWidth:1,gradientThickness:1,gridAlign:1,labelAlign:1,labelBaseline:1,labelColor:1,labelFont:1,labelFontSize:1,labelFontStyle:1,labelFontWeight:1,labelLimit:1,labelOffset:1,labelOpacity:1,labelOverlap:1,labelPadding:1,labelSeparation:1,legendX:1,legendY:1,offset:1,orient:1,padding:1,rowPadding:1,strokeColor:1,\nsymbolDash:1,symbolDashOffset:1,symbolFillColor:1,symbolLimit:1,symbolOffset:1,symbolOpacity:1,symbolSize:1,symbolStrokeColor:1,symbolStrokeWidth:1,symbolType:1,tickCount:1,tickMinStep:1,title:1,titleAlign:1,titleAnchor:1,titleBaseline:1,titleColor:1,titleFont:1,titleFontSize:1,titleFontStyle:1,titleFontWeight:1,titleLimit:1,titleLineHeight:1,titleOpacity:1,titleOrient:1,titlePadding:1,type:1,values:1,zindex:1}),{disable:1,labelExpr:1,selections:1,opacity:1,shape:1,stroke:1,fill:1,size:1,strokeWidth:1,\nstrokeDash:1,encode:1}),LEGEND_COMPONENT_PROPERTIES\x3dkeys$jscomp$0(LEGEND_COMPONENT_PROPERTY_INDEX),LegendComponent\x3dfunction(){return Split.apply(this,arguments)||this};$jscomp.inherits(LegendComponent,Split);var legendEncodeRules\x3d{symbols:function(symbolsSpec,$jscomp$destructuring$var236){var fieldOrDatumDef\x3d$jscomp$destructuring$var236.fieldOrDatumDef,model\x3d$jscomp$destructuring$var236.model,channel\x3d$jscomp$destructuring$var236.channel,legendCmpt\x3d$jscomp$destructuring$var236.legendCmpt,_a,_b,_c,\n_d,_e;if(\x22symbol\x22\x3d\x3d\x3d$jscomp$destructuring$var236.legendType){var markDef\x3dmodel.markDef,encoding\x3dmodel.encoding;$jscomp$destructuring$var236\x3dmodel.config;var mark\x3dmodel.mark,filled\x3dmarkDef.filled\x26\x26\x22trail\x22!\x3d\x3dmark;mark\x3dObject.assign(Object.assign({},applyMarkConfig({},model,FILL_STROKE_CONFIG)),color$jscomp$0(model,{filled:filled}));var opacity\x3dnull!\x3d\x3d(_a\x3dgetMaxValue(encoding.opacity))\x26\x26void 0!\x3d\x3d_a?_a:markDef.opacity;mark.fill\x26\x26(\x22fill\x22\x3d\x3d\x3dchannel||filled\x26\x26\x22color\x22\x3d\x3d\x3dchannel?delete mark.fill:mark.fill.field?\nlegendCmpt.get(\x22symbolFillColor\x22)?delete mark.fill:(mark.fill\x3dsignalOrValueRef(null!\x3d\x3d(_b\x3d$jscomp$destructuring$var236.legend.symbolBaseFillColor)\x26\x26void 0!\x3d\x3d_b?_b:\x22black\x22),mark.fillOpacity\x3dsignalOrValueRef(null!\x3d\x3dopacity\x26\x26void 0!\x3d\x3dopacity?opacity:1)):isArray(mark.fill)\x26\x26(_a\x3dnull!\x3d\x3d(_e\x3dnull!\x3d\x3d(_d\x3dgetFirstConditionValue(null!\x3d\x3d(_c\x3dencoding.fill)\x26\x26void 0!\x3d\x3d_c?_c:encoding.color))\x26\x26void 0!\x3d\x3d_d?_d:markDef.fill)\x26\x26void 0!\x3d\x3d_e?_e:filled\x26\x26markDef.color)\x26\x26(mark.fill\x3dsignalOrValueRef(_a)));mark.stroke\x26\x26(\x22stroke\x22\x3d\x3d\x3d\nchannel||!filled\x26\x26\x22color\x22\x3d\x3d\x3dchannel?delete mark.stroke:mark.stroke.field?delete mark.stroke:isArray(mark.stroke)\x26\x26(_c\x3dgetFirstDefined(getFirstConditionValue(encoding.stroke||encoding.color),markDef.stroke,filled?markDef.color:void 0))\x26\x26(mark.stroke\x3d{value:_c}));\x22opacity\x22!\x3d\x3dchannel\x26\x26((fieldOrDatumDef\x3disFieldDef(fieldOrDatumDef)\x26\x26selectedCondition(model,legendCmpt,fieldOrDatumDef))?mark.opacity\x3d[Object.assign({test:fieldOrDatumDef},signalOrValueRef(null!\x3d\x3dopacity\x26\x26void 0!\x3d\x3dopacity?opacity:1)),signalOrValueRef($jscomp$destructuring$var236.legend.unselectedOpacity)]:\nopacity\x26\x26(mark.opacity\x3dsignalOrValueRef(opacity)));mark\x3dObject.assign(Object.assign({},mark),symbolsSpec);return isEmpty(mark)?void 0:mark}},gradient:function(gradientSpec,$jscomp$destructuring$var239){var model\x3d$jscomp$destructuring$var239.model;if(\x22gradient\x22\x3d\x3d\x3d$jscomp$destructuring$var239.legendType){$jscomp$destructuring$var239\x3d{};if(model\x3dgetMaxValue(model.encoding.opacity)||model.markDef.opacity)$jscomp$destructuring$var239.opacity\x3dsignalOrValueRef(model);$jscomp$destructuring$var239\x3dObject.assign(Object.assign({},\n$jscomp$destructuring$var239),gradientSpec);return isEmpty($jscomp$destructuring$var239)?void 0:$jscomp$destructuring$var239}},labels:function(specifiedlabelsSpec,$jscomp$destructuring$var241){var fieldOrDatumDef\x3d$jscomp$destructuring$var241.fieldOrDatumDef,model\x3d$jscomp$destructuring$var241.model,legendCmpt\x3d$jscomp$destructuring$var241.legendCmpt,legend\x3dmodel.legend($jscomp$destructuring$var241.channel)||{};$jscomp$destructuring$var241\x3dmodel.config;model\x3d(model\x3disFieldDef(fieldOrDatumDef)?selectedCondition(model,\nlegendCmpt,fieldOrDatumDef):void 0)?[{test:model,value:1},{value:$jscomp$destructuring$var241.legend.unselectedOpacity}]:void 0;legendCmpt\x3dlegend.format;legend\x3dlegend.formatType;fieldOrDatumDef\x3disCustomFormatType(legend)?formatCustomType({fieldOrDatumDef:fieldOrDatumDef,field:\x22datum.value\x22,format:legendCmpt,formatType:legend,config:$jscomp$destructuring$var241}):void 0;specifiedlabelsSpec\x3dObject.assign(Object.assign(Object.assign({},model?{opacity:model}:{}),fieldOrDatumDef?{text:fieldOrDatumDef}:\n{}),specifiedlabelsSpec);return isEmpty(specifiedlabelsSpec)?void 0:specifiedlabelsSpec},entries:function(entriesSpec,$jscomp$destructuring$var244){$jscomp$destructuring$var244\x3d$jscomp$destructuring$var244.legendCmpt.get(\x22selections\x22);return(null\x3d\x3d\x3d$jscomp$destructuring$var244||void 0\x3d\x3d\x3d$jscomp$destructuring$var244?0:$jscomp$destructuring$var244.length)?Object.assign(Object.assign({},entriesSpec),{fill:{value:\x22transparent\x22}}):entriesSpec}},legendRules\x3d{direction:function($jscomp$destructuring$var246){return $jscomp$destructuring$var246.direction},\nformat:function($jscomp$destructuring$var248){var fieldOrDatumDef\x3d$jscomp$destructuring$var248.fieldOrDatumDef,$jscomp$destructuring$var250\x3d$jscomp$destructuring$var248.legend;return guideFormat(fieldOrDatumDef,fieldOrDatumDef.type,$jscomp$destructuring$var250.format,$jscomp$destructuring$var250.formatType,$jscomp$destructuring$var248.config,!1)},formatType:function($jscomp$destructuring$var251){return guideFormatType($jscomp$destructuring$var251.legend.formatType,$jscomp$destructuring$var251.fieldOrDatumDef,\n$jscomp$destructuring$var251.scaleType)},gradientLength:function(params){var _a,_b,legendConfig\x3dparams.legendConfig;if(null!\x3d\x3d(_b\x3dnull!\x3d\x3d(_a\x3dparams.legend.gradientLength)\x26\x26void 0!\x3d\x3d_a?_a:legendConfig.gradientLength)\x26\x26void 0!\x3d\x3d_b)params\x3d_b;else{_a\x3dparams.model;_b\x3dparams.direction;legendConfig\x3dparams.orient;var $jscomp$inline_7848\x3dparams.legendConfig,gradientHorizontalMaxLength\x3d$jscomp$inline_7848.gradientHorizontalMaxLength,gradientHorizontalMinLength\x3d$jscomp$inline_7848.gradientHorizontalMinLength,\ngradientVerticalMaxLength\x3d$jscomp$inline_7848.gradientVerticalMaxLength;$jscomp$inline_7848\x3d$jscomp$inline_7848.gradientVerticalMinLength;params\x3dparams.scaleType in CONTINUOUS_TO_CONTINUOUS_INDEX?\x22horizontal\x22\x3d\x3d\x3d_b?\x22top\x22\x3d\x3d\x3dlegendConfig||\x22bottom\x22\x3d\x3d\x3dlegendConfig?{signal:\x22clamp(\x22+_a.getSizeSignalRef(\x22width\x22).signal+\x22, \x22+gradientHorizontalMinLength+\x22, \x22+gradientHorizontalMaxLength+\x22)\x22}:gradientHorizontalMinLength:{signal:\x22clamp(\x22+_a.getSizeSignalRef(\x22height\x22).signal+\x22, \x22+$jscomp$inline_7848+\x22, \x22+gradientVerticalMaxLength+\n\x22)\x22}:void 0}return params},labelOverlap:function($jscomp$destructuring$var255){var legendConfig\x3d$jscomp$destructuring$var255.legendConfig,scaleType\x3d$jscomp$destructuring$var255.scaleType,_a,_b;$jscomp$destructuring$var255\x3dnull!\x3d\x3d(_b\x3dnull!\x3d\x3d(_a\x3d$jscomp$destructuring$var255.legend.labelOverlap)\x26\x26void 0!\x3d\x3d_a?_a:legendConfig.labelOverlap)\x26\x26void 0!\x3d\x3d_b?_b:contains([\x22quantile\x22,\x22threshold\x22,\x22log\x22],scaleType)?\x22greedy\x22:void 0;return $jscomp$destructuring$var255},symbolType:function($jscomp$destructuring$var257){var markDef\x3d\n$jscomp$destructuring$var257.markDef,channel\x3d$jscomp$destructuring$var257.channel,encoding\x3d$jscomp$destructuring$var257.encoding,_a;if(null!\x3d\x3d(_a\x3d$jscomp$destructuring$var257.legend.symbolType)\x26\x26void 0!\x3d\x3d_a)var JSCompiler_temp\x3d_a;else a:{$jscomp$destructuring$var257\x3dmarkDef.type;markDef\x3dmarkDef.shape;if(\x22shape\x22!\x3d\x3dchannel\x26\x26(channel\x3dnull!\x3d\x3d(JSCompiler_temp\x3dgetFirstConditionValue(encoding.shape))\x26\x26void 0!\x3d\x3dJSCompiler_temp?JSCompiler_temp:markDef)){JSCompiler_temp\x3dchannel;break a}switch($jscomp$destructuring$var257){case \x22bar\x22:case \x22rect\x22:case \x22image\x22:case \x22square\x22:JSCompiler_temp\x3d\n\x22square\x22;break a;case \x22line\x22:case \x22trail\x22:case \x22rule\x22:JSCompiler_temp\x3d\x22stroke\x22;break a;case \x22arc\x22:case \x22point\x22:case \x22circle\x22:case \x22tick\x22:case \x22geoshape\x22:case \x22area\x22:case \x22text\x22:JSCompiler_temp\x3d\x22circle\x22;break a}JSCompiler_temp\x3dvoid 0}return JSCompiler_temp},title:function($jscomp$destructuring$var259){return title$jscomp$0($jscomp$destructuring$var259.fieldOrDatumDef,$jscomp$destructuring$var259.config,{allowDisabling:!0})},type:function($jscomp$destructuring$var261){var legendType\x3d$jscomp$destructuring$var261.legendType,\nscaleType\x3d$jscomp$destructuring$var261.scaleType;if(isColorChannel($jscomp$destructuring$var261.channel)\x26\x26scaleType in CONTINUOUS_TO_CONTINUOUS_INDEX){if(\x22gradient\x22\x3d\x3d\x3dlegendType)return}else if(\x22symbol\x22\x3d\x3d\x3dlegendType)return;return legendType},values:function($jscomp$destructuring$var263){var JSCompiler_inline_result\x3d$jscomp$destructuring$var263.fieldOrDatumDef;$jscomp$destructuring$var263\x3d$jscomp$destructuring$var263.legend.values;JSCompiler_inline_result\x3disArray($jscomp$destructuring$var263)?valueArray(JSCompiler_inline_result,\n$jscomp$destructuring$var263):isSignalRef($jscomp$destructuring$var263)?$jscomp$destructuring$var263:void 0;return JSCompiler_inline_result}},PROJECTION_PROPERTIES\x3d\x22type clipAngle clipExtent center rotate precision reflectX reflectY coefficient distance fraction lobes parallel radius ratio spacing tilt\x22.split(\x22 \x22),ProjectionComponent\x3dfunction(name,specifiedProjection,size,data){name\x3dSplit.call(this,Object.assign({},specifiedProjection),{name:name})||this;name.specifiedProjection\x3dspecifiedProjection;\nname.size\x3dsize;name.data\x3ddata;name.merged\x3d!1;return name};$jscomp.inherits(ProjectionComponent,Split);$jscomp.global.Object.defineProperties(ProjectionComponent.prototype,{isFit:{configurable:!0,enumerable:!0,get:function(){return!!this.data}}});var BinNode\x3dfunction(parent,bins){parent\x3dDataFlowNode.call(this,parent)||this;parent.bins\x3dbins;return parent};$jscomp.inherits(BinNode,DataFlowNode);BinNode.prototype.clone\x3dfunction(){return new BinNode(null,duplicate(this.bins))};BinNode.makeFromEncoding\x3d\nfunction(parent,model){var bins\x3dmodel.reduceFieldDef(function(binComponentIndex,fieldDef,channel){if(isTypedFieldDef(fieldDef)\x26\x26isBinning(fieldDef.bin)){var $jscomp$destructuring$var281\x3dcreateBinComponent(fieldDef,fieldDef.bin,model),key\x3d$jscomp$destructuring$var281.key;binComponentIndex[key]\x3dObject.assign(Object.assign(Object.assign({},$jscomp$destructuring$var281.binComponent),binComponentIndex[key]),rangeFormula(model,fieldDef,channel,model.config))}return binComponentIndex},{});return isEmpty(bins)?\nnull:new BinNode(parent,bins)};BinNode.makeFromTransform\x3dfunction(parent,t,model){t\x3dcreateBinComponent(t,t.bin,model);model\x3d{};return new BinNode(parent,(model[t.key]\x3dt.binComponent,model))};BinNode.prototype.merge\x3dfunction(other,renameSignal){for(var $jscomp$iter$155\x3d$jscomp.makeIterator(keys$jscomp$0(other.bins)),$jscomp$key$key\x3d$jscomp$iter$155.next();!$jscomp$key$key.done;$jscomp$key$key\x3d$jscomp$iter$155.next())$jscomp$key$key\x3d$jscomp$key$key.value,$jscomp$key$key in this.bins?(renameSignal(other.bins[$jscomp$key$key].signal,\nthis.bins[$jscomp$key$key].signal),this.bins[$jscomp$key$key].as\x3dunique([].concat($jscomp.arrayFromIterable(this.bins[$jscomp$key$key].as),$jscomp.arrayFromIterable(other.bins[$jscomp$key$key].as)),hash)):this.bins[$jscomp$key$key]\x3dother.bins[$jscomp$key$key];renameSignal\x3d$jscomp.makeIterator(other.children);for($jscomp$iter$155\x3drenameSignal.next();!$jscomp$iter$155.done;$jscomp$iter$155\x3drenameSignal.next())$jscomp$iter$155\x3d$jscomp$iter$155.value,other.removeChild($jscomp$iter$155),$jscomp$iter$155.parent\x3d\nthis;other.remove()};BinNode.prototype.producedFields\x3dfunction(){return new Set(vals(this.bins).map(function(c){return c.as}).flat(2))};BinNode.prototype.dependentFields\x3dfunction(){return new Set(vals(this.bins).map(function(c){return c.field}))};BinNode.prototype.hash\x3dfunction(){return\x22Bin \x22+hash(this.bins)};BinNode.prototype.assemble\x3dfunction(){return vals(this.bins).flatMap(function(bin){var transform\x3d[],$jscomp$destructuring$var283\x3d$jscomp.makeIterator(bin.as),binAs\x3d$jscomp$destructuring$var283.next().value;\n$jscomp$destructuring$var283\x3d$jscomp.arrayFromIterator($jscomp$destructuring$var283);var _a\x3dbin.bin,extent\x3d_a.extent;_a\x3d__rest(_a,[\x22extent\x22]);_a\x3dObject.assign(Object.assign(Object.assign({type:\x22bin\x22,field:replacePathInField(bin.field),as:binAs,signal:bin.signal},isSelectionExtent(extent)?{extent:null}:{extent:extent}),bin.span?{span:{signal:\x22span(\x22+bin.span+\x22)\x22}}:{}),_a);!extent\x26\x26bin.extentSignal\x26\x26(transform.push({type:\x22extent\x22,field:replacePathInField(bin.field),signal:bin.extentSignal}),_a.extent\x3d\n{signal:bin.extentSignal});transform.push(_a);$jscomp$destructuring$var283\x3d$jscomp.makeIterator($jscomp$destructuring$var283);for(extent\x3d$jscomp$destructuring$var283.next();!extent.done;extent\x3d$jscomp$destructuring$var283.next())for(extent\x3dextent.value,_a\x3d0;2\x3e_a;_a++)transform.push({type:\x22formula\x22,expr:vgField({field:binAs[_a]},{expr:\x22datum\x22}),as:extent[_a]});bin.formula\x26\x26transform.push({type:\x22formula\x22,expr:bin.formula,as:bin.formulaAs});return transform})};var SourceNode\x3dfunction(data){var $jscomp$super$this\x3d\nDataFlowNode.call(this,null)||this;data\x3dnull!\x3d\x3ddata\x26\x26void 0!\x3d\x3ddata?data:{name:\x22source\x22};var format;isGenerator(data)||(format\x3ddata.format?Object.assign({},omit(data.format,[\x22parse\x22])):{});if(\x22values\x22in data)$jscomp$super$this._data\x3d{values:data.values};else if(\x22url\x22in data){if($jscomp$super$this._data\x3d{url:data.url},!format.type){var defaultExtension\x3d/(?:\\.([^.]+))?$/.exec(data.url)[1];contains([\x22json\x22,\x22csv\x22,\x22tsv\x22,\x22dsv\x22,\x22topojson\x22],defaultExtension)||(defaultExtension\x3d\x22json\x22);format.type\x3ddefaultExtension}}else if(\x22sphere\x22in\ndata)$jscomp$super$this._data\x3d{values:[{type:\x22Sphere\x22}]};else if(isNamedData(data)||isGenerator(data))$jscomp$super$this._data\x3d{};$jscomp$super$this._generator\x3disGenerator(data);data.name\x26\x26($jscomp$super$this._name\x3ddata.name);format\x26\x26!isEmpty(format)\x26\x26($jscomp$super$this._data.format\x3dformat);return $jscomp$super$this};$jscomp.inherits(SourceNode,DataFlowNode);SourceNode.prototype.dependentFields\x3dfunction(){return new Set};SourceNode.prototype.producedFields\x3dfunction(){};SourceNode.prototype.hasName\x3d\nfunction(){return!!this._name};SourceNode.prototype.remove\x3dfunction(){throw Error(\x22Source nodes are roots and cannot be removed.\x22);};SourceNode.prototype.hash\x3dfunction(){throw Error(\x22Cannot hash sources\x22);};SourceNode.prototype.assemble\x3dfunction(){return Object.assign(Object.assign({name:this._name},this._data),{transform:[]})};$jscomp.global.Object.defineProperties(SourceNode.prototype,{data:{configurable:!0,enumerable:!0,get:function(){return this._data}},isGenerator:{configurable:!0,enumerable:!0,\nget:function(){return this._generator}},dataName:{configurable:!0,enumerable:!0,get:function(){return this._name},set:function(name){this._name\x3dname}},parent:{configurable:!0,enumerable:!0,set:function(parent){throw Error(\x22Source nodes have to be roots.\x22);}}});var GraticuleNode\x3dfunction(parent,params){parent\x3dDataFlowNode.call(this,parent)||this;parent.params\x3dparams;return parent};$jscomp.inherits(GraticuleNode,DataFlowNode);GraticuleNode.prototype.clone\x3dfunction(){return new GraticuleNode(null,this.params)};\nGraticuleNode.prototype.dependentFields\x3dfunction(){return new Set};GraticuleNode.prototype.producedFields\x3dfunction(){};GraticuleNode.prototype.hash\x3dfunction(){return\x22Graticule \x22+hash(this.params)};GraticuleNode.prototype.assemble\x3dfunction(){return Object.assign({type:\x22graticule\x22},!0\x3d\x3d\x3dthis.params?{}:this.params)};var SequenceNode\x3dfunction(parent,params){parent\x3dDataFlowNode.call(this,parent)||this;parent.params\x3dparams;return parent};$jscomp.inherits(SequenceNode,DataFlowNode);SequenceNode.prototype.clone\x3d\nfunction(){return new SequenceNode(null,this.params)};SequenceNode.prototype.dependentFields\x3dfunction(){return new Set};SequenceNode.prototype.producedFields\x3dfunction(){var _a;return new Set([null!\x3d\x3d(_a\x3dthis.params.as)\x26\x26void 0!\x3d\x3d_a?_a:\x22data\x22])};SequenceNode.prototype.hash\x3dfunction(){return\x22Hash \x22+hash(this.params)};SequenceNode.prototype.assemble\x3dfunction(){return Object.assign({type:\x22sequence\x22},this.params)};var OptimizerBase\x3dfunction(){this._mutated\x3d!1};OptimizerBase.prototype.setMutated\x3dfunction(){this._mutated\x3d\n!0};$jscomp.global.Object.defineProperties(OptimizerBase.prototype,{mutatedFlag:{configurable:!0,enumerable:!0,get:function(){return this._mutated}}});var BottomUpOptimizer\x3dfunction(){this._continue\x3dthis._mutated\x3d!1;return this};$jscomp.inherits(BottomUpOptimizer,OptimizerBase);BottomUpOptimizer.prototype.setContinue\x3dfunction(){this._continue\x3d!0};BottomUpOptimizer.prototype.reset\x3dfunction(){};BottomUpOptimizer.prototype.optimizeNextFromLeaves\x3dfunction(node){if(isDataSourceNode(node))return!1;var next\x3d\nnode.parent;this.run(node).continueFlag\x26\x26this.optimizeNextFromLeaves(next);return this.mutatedFlag};$jscomp.global.Object.defineProperties(BottomUpOptimizer.prototype,{continueFlag:{configurable:!0,enumerable:!0,get:function(){return this._continue}},flags:{configurable:!0,enumerable:!0,get:function(){return{continueFlag:this.continueFlag,mutatedFlag:this.mutatedFlag}},set:function($jscomp$destructuring$var285){var mutatedFlag\x3d$jscomp$destructuring$var285.mutatedFlag;$jscomp$destructuring$var285.continueFlag\x26\x26\nthis.setContinue();mutatedFlag\x26\x26this.setMutated()}}});var TopDownOptimizer\x3dfunction(){return OptimizerBase.apply(this,arguments)||this};$jscomp.inherits(TopDownOptimizer,OptimizerBase);var AggregateNode\x3dfunction(parent,dimensions,measures){parent\x3dDataFlowNode.call(this,parent)||this;parent.dimensions\x3ddimensions;parent.measures\x3dmeasures;return parent};$jscomp.inherits(AggregateNode,DataFlowNode);AggregateNode.prototype.clone\x3dfunction(){return new AggregateNode(null,new Set(this.dimensions),duplicate(this.measures))};\nAggregateNode.makeFromEncoding\x3dfunction(parent,model){var isAggregate\x3d!1;model.forEachFieldDef(function(fd){fd.aggregate\x26\x26(isAggregate\x3d!0)});var meas\x3d{},dims\x3dnew Set;if(!isAggregate)return null;model.forEachFieldDef(function(fieldDef,channel){var _a,_b,_c,_d,aggregate\x3dfieldDef.aggregate,field\x3dfieldDef.field;aggregate?\x22count\x22\x3d\x3d\x3daggregate?(meas[\x22*\x22]\x3dnull!\x3d\x3d(_a\x3dmeas[\x22*\x22])\x26\x26void 0!\x3d\x3d_a?_a:{},meas[\x22*\x22].count\x3dnew Set([vgField(fieldDef,{forAs:!0})])):(isArgminDef(aggregate)||isArgmaxDef(aggregate)?(fieldDef\x3d\nisArgminDef(aggregate)?\x22argmin\x22:\x22argmax\x22,aggregate\x3daggregate[fieldDef],meas[aggregate]\x3dnull!\x3d\x3d(_b\x3dmeas[aggregate])\x26\x26void 0!\x3d\x3d_b?_b:{},meas[aggregate][fieldDef]\x3dnew Set([vgField({op:fieldDef,field:aggregate},{forAs:!0})])):(meas[field]\x3dnull!\x3d\x3d(_c\x3dmeas[field])\x26\x26void 0!\x3d\x3d_c?_c:{},meas[field][aggregate]\x3dnew Set([vgField(fieldDef,{forAs:!0})])),SCALE_CHANNEL_INDEX[channel]\x26\x26\x22unaggregated\x22\x3d\x3d\x3dmodel.scaleDomain(channel)\x26\x26(meas[field]\x3dnull!\x3d\x3d(_d\x3dmeas[field])\x26\x26void 0!\x3d\x3d_d?_d:{},meas[field].min\x3dnew Set([vgField({field:field,\naggregate:\x22min\x22},{forAs:!0})]),meas[field].max\x3dnew Set([vgField({field:field,aggregate:\x22max\x22},{forAs:!0})]))):(_b\x3disUnitModel(model)?model.encoding[getSecondaryRangeChannel(channel)]:void 0,isTypedFieldDef(fieldDef)\x26\x26isUnitModel(model)\x26\x26hasBand(channel,fieldDef,_b,model.stack,model.markDef,model.config)?(dims.add(vgField(fieldDef,{})),dims.add(vgField(fieldDef,{suffix:\x22end\x22})),fieldDef.bin\x26\x26binRequiresRange(fieldDef,channel)\x26\x26dims.add(vgField(fieldDef,{binSuffix:\x22range\x22}))):channel in GEO_POSIITON_CHANNEL_INDEX?\n(channel\x3dgetPositionChannelFromLatLong(channel),dims.add(model.getName(channel))):dims.add(vgField(fieldDef)))});return 0\x3d\x3d\x3ddims.size+keys$jscomp$0(meas).length?null:new AggregateNode(parent,dims,meas)};AggregateNode.makeFromTransform\x3dfunction(parent,t){for(var _a,_b,_c,dims\x3dnew Set,meas\x3d{},$jscomp$iter$162\x3d$jscomp.makeIterator(t.aggregate),$jscomp$key$s\x3d$jscomp$iter$162.next();!$jscomp$key$s.done;$jscomp$key$s\x3d$jscomp$iter$162.next()){var $jscomp$destructuring$var289\x3d$jscomp$key$s\x3d$jscomp$key$s.value,\nop\x3d$jscomp$destructuring$var289.op,field$478\x3d$jscomp$destructuring$var289.field;$jscomp$destructuring$var289\x3d$jscomp$destructuring$var289.as;op\x26\x26(\x22count\x22\x3d\x3d\x3dop?(meas[\x22*\x22]\x3dnull!\x3d\x3d(_a\x3dmeas[\x22*\x22])\x26\x26void 0!\x3d\x3d_a?_a:{},meas[\x22*\x22].count\x3dnew Set([$jscomp$destructuring$var289?$jscomp$destructuring$var289:vgField($jscomp$key$s,{forAs:!0})])):(meas[field$478]\x3dnull!\x3d\x3d(_b\x3dmeas[field$478])\x26\x26void 0!\x3d\x3d_b?_b:{},meas[field$478][op]\x3dnew Set([$jscomp$destructuring$var289?$jscomp$destructuring$var289:vgField($jscomp$key$s,\n{forAs:!0})])))}t\x3d$jscomp.makeIterator(null!\x3d\x3d(_c\x3dt.groupby)\x26\x26void 0!\x3d\x3d_c?_c:[]);for($jscomp$key$s\x3dt.next();!$jscomp$key$s.done;$jscomp$key$s\x3dt.next())dims.add($jscomp$key$s.value);return 0\x3d\x3d\x3ddims.size+keys$jscomp$0(meas).length?null:new AggregateNode(parent,dims,meas)};AggregateNode.prototype.merge\x3dfunction(other){a:{var a\x3dthis.dimensions;var JSCompiler_inline_result\x3dother.dimensions;if(a.size!\x3d\x3dJSCompiler_inline_result.size)JSCompiler_inline_result\x3d!1;else{a\x3d$jscomp.makeIterator(a);for(var $jscomp$inline_5137\x3d\na.next();!$jscomp$inline_5137.done;$jscomp$inline_5137\x3da.next())if(!JSCompiler_inline_result.has($jscomp$inline_5137.value)){JSCompiler_inline_result\x3d!1;break a}JSCompiler_inline_result\x3d!0}}if(JSCompiler_inline_result){JSCompiler_inline_result\x3dthis.measures;other\x3dother.measures;var _a;a\x3d$jscomp.makeIterator(keys$jscomp$0(other));for($jscomp$inline_5137\x3da.next();!$jscomp$inline_5137.done;$jscomp$inline_5137\x3da.next()){$jscomp$inline_5137\x3d$jscomp$inline_5137.value;for(var ops\x3dother[$jscomp$inline_5137],\n$jscomp$inline_5147\x3d$jscomp.makeIterator(keys$jscomp$0(ops)),$jscomp$inline_5148\x3d$jscomp$inline_5147.next();!$jscomp$inline_5148.done;$jscomp$inline_5148\x3d$jscomp$inline_5147.next())if($jscomp$inline_5148\x3d$jscomp$inline_5148.value,$jscomp$inline_5137 in JSCompiler_inline_result)JSCompiler_inline_result[$jscomp$inline_5137][$jscomp$inline_5148]\x3dnew Set([].concat($jscomp.arrayFromIterable(null!\x3d\x3d(_a\x3dJSCompiler_inline_result[$jscomp$inline_5137][$jscomp$inline_5148])\x26\x26void 0!\x3d\x3d_a?_a:[]),$jscomp.arrayFromIterable(ops[$jscomp$inline_5148])));\nelse{var $jscomp$inline_5150\x3d{};JSCompiler_inline_result[$jscomp$inline_5137]\x3d($jscomp$inline_5150[$jscomp$inline_5148]\x3dops[$jscomp$inline_5148],$jscomp$inline_5150)}}return!0}debug(\x22different dimensions, cannot merge\x22);return!1};AggregateNode.prototype.addDimensions\x3dfunction(fields){fields.forEach(this.dimensions.add,this.dimensions)};AggregateNode.prototype.dependentFields\x3dfunction(){return new Set([].concat($jscomp.arrayFromIterable(this.dimensions),$jscomp.arrayFromIterable(keys$jscomp$0(this.measures))))};\nAggregateNode.prototype.producedFields\x3dfunction(){for(var out\x3dnew Set,$jscomp$iter$165\x3d$jscomp.makeIterator(keys$jscomp$0(this.measures)),$jscomp$key$field\x3d$jscomp$iter$165.next();!$jscomp$key$field.done;$jscomp$key$field\x3d$jscomp$iter$165.next()){$jscomp$key$field\x3d$jscomp$key$field.value;for(var $jscomp$iter$164\x3d$jscomp.makeIterator(keys$jscomp$0(this.measures[$jscomp$key$field])),$jscomp$key$op\x3d$jscomp$iter$164.next();!$jscomp$key$op.done;$jscomp$key$op\x3d$jscomp$iter$164.next()){$jscomp$key$op\x3d$jscomp$key$op.value;\nvar m\x3dthis.measures[$jscomp$key$field][$jscomp$key$op];0\x3d\x3d\x3dm.size?out.add($jscomp$key$op+\x22_\x22+$jscomp$key$field):m.forEach(out.add,out)}}return out};AggregateNode.prototype.hash\x3dfunction(){return\x22Aggregate \x22+hash({dimensions:this.dimensions,measures:this.measures})};AggregateNode.prototype.assemble\x3dfunction(){for(var ops\x3d[],fields\x3d[],as\x3d[],$jscomp$iter$168\x3d$jscomp.makeIterator(keys$jscomp$0(this.measures)),$jscomp$key$field\x3d$jscomp$iter$168.next();!$jscomp$key$field.done;$jscomp$key$field\x3d$jscomp$iter$168.next()){$jscomp$key$field\x3d\n$jscomp$key$field.value;for(var $jscomp$iter$167\x3d$jscomp.makeIterator(keys$jscomp$0(this.measures[$jscomp$key$field])),$jscomp$key$op\x3d$jscomp$iter$167.next();!$jscomp$key$op.done;$jscomp$key$op\x3d$jscomp$iter$167.next()){$jscomp$key$op\x3d$jscomp$key$op.value;for(var $jscomp$iter$166\x3d$jscomp.makeIterator(this.measures[$jscomp$key$field][$jscomp$key$op]),$jscomp$key$alias\x3d$jscomp$iter$166.next();!$jscomp$key$alias.done;$jscomp$key$alias\x3d$jscomp$iter$166.next())as.push($jscomp$key$alias.value),ops.push($jscomp$key$op),\nfields.push(\x22*\x22\x3d\x3d\x3d$jscomp$key$field?null:replacePathInField($jscomp$key$field))}}return{type:\x22aggregate\x22,groupby:[].concat($jscomp.arrayFromIterable(this.dimensions)).map(replacePathInField),ops:ops,fields:fields,as:as}};$jscomp.global.Object.defineProperties(AggregateNode.prototype,{groupBy:{configurable:!0,enumerable:!0,get:function(){return this.dimensions}}});var FacetNode\x3dfunction(parent,model,name,data){parent\x3dDataFlowNode.call(this,parent)||this;parent.model\x3dmodel;parent.name\x3dname;parent.data\x3d\ndata;name\x3d$jscomp.makeIterator(FACET_CHANNELS);for(data\x3dname.next();!data.done;data\x3dname.next()){data\x3ddata.value;var fieldDef\x3dmodel.facet[data];if(fieldDef){var $jscomp$destructuring$var290\x3dfieldDef,bin$482\x3d$jscomp$destructuring$var290.bin;$jscomp$destructuring$var290\x3d$jscomp$destructuring$var290.sort;parent[data]\x3dObject.assign({name:model.getName(data+\x22_domain\x22),fields:[vgField(fieldDef)].concat($jscomp.arrayFromIterable(isBinning(bin$482)?[vgField(fieldDef,{binSuffix:\x22end\x22})]:[]))},isSortField($jscomp$destructuring$var290)?\n{sortField:$jscomp$destructuring$var290}:isArray($jscomp$destructuring$var290)?{sortIndexField:sortArrayIndexField(fieldDef,data)}:{})}}parent.childModel\x3dmodel.child;return parent};$jscomp.inherits(FacetNode,DataFlowNode);FacetNode.prototype.hash\x3dfunction(){for(var out\x3d\x22Facet\x22,$jscomp$iter$170\x3d$jscomp.makeIterator(FACET_CHANNELS),$jscomp$key$channel\x3d$jscomp$iter$170.next();!$jscomp$key$channel.done;$jscomp$key$channel\x3d$jscomp$iter$170.next())$jscomp$key$channel\x3d$jscomp$key$channel.value,this[$jscomp$key$channel]\x26\x26\n(out+\x3d\x22 \x22+$jscomp$key$channel.charAt(0)+\x22:\x22+hash(this[$jscomp$key$channel]));return out};FacetNode.prototype.dependentFields\x3dfunction(){for(var depFields\x3dnew Set(this.fields),$jscomp$iter$171\x3d$jscomp.makeIterator(FACET_CHANNELS),$jscomp$key$channel\x3d$jscomp$iter$171.next();!$jscomp$key$channel.done;$jscomp$key$channel\x3d$jscomp$iter$171.next())$jscomp$key$channel\x3d$jscomp$key$channel.value,this[$jscomp$key$channel]\x26\x26(this[$jscomp$key$channel].sortField\x26\x26depFields.add(this[$jscomp$key$channel].sortField.field),\nthis[$jscomp$key$channel].sortIndexField\x26\x26depFields.add(this[$jscomp$key$channel].sortIndexField));return depFields};FacetNode.prototype.producedFields\x3dfunction(){return new Set};FacetNode.prototype.getSource\x3dfunction(){return this.name};FacetNode.prototype.getChildIndependentFieldsWithStep\x3dfunction(){for(var childIndependentFieldsWithStep\x3d{},$jscomp$iter$172\x3d$jscomp.makeIterator(POSITION_SCALE_CHANNELS),$jscomp$key$channel\x3d$jscomp$iter$172.next();!$jscomp$key$channel.done;$jscomp$key$channel\x3d$jscomp$iter$172.next()){$jscomp$key$channel\x3d\n$jscomp$key$channel.value;var childScaleComponent\x3dthis.childModel.component.scales[$jscomp$key$channel];if(childScaleComponent\x26\x26!childScaleComponent.merged){var type\x3dchildScaleComponent.get(\x22type\x22);childScaleComponent\x3dchildScaleComponent.get(\x22range\x22);type in DISCRETE_DOMAIN_INDEX\x26\x26isVgRangeStep(childScaleComponent)\x26\x26(type\x3dassembleDomain(this.childModel,$jscomp$key$channel),(type\x3dgetFieldFromDomain(type))?childIndependentFieldsWithStep[$jscomp$key$channel]\x3dtype:warn(\x22Unknown field for \x22+$jscomp$key$channel+\n\x22. Cannot calculate view size.\x22))}}return childIndependentFieldsWithStep};FacetNode.prototype.assembleRowColumnHeaderData\x3dfunction(channel,crossedDataName,childIndependentFieldsWithStep){var childChannel\x3d{row:\x22y\x22,column:\x22x\x22}[channel],fields\x3d[],ops\x3d[],as\x3d[];childIndependentFieldsWithStep\x26\x26childIndependentFieldsWithStep[childChannel]\x26\x26(crossedDataName?(fields.push(\x22distinct_\x22+childIndependentFieldsWithStep[childChannel]),ops.push(\x22max\x22)):(fields.push(childIndependentFieldsWithStep[childChannel]),ops.push(\x22distinct\x22)),\nas.push(\x22distinct_\x22+childIndependentFieldsWithStep[childChannel]));childChannel\x3dthis[channel];childIndependentFieldsWithStep\x3dchildChannel.sortField;childChannel\x3dchildChannel.sortIndexField;childIndependentFieldsWithStep?(childChannel\x3dvoid 0\x3d\x3d\x3dchildIndependentFieldsWithStep.op?\x22min\x22:childIndependentFieldsWithStep.op,fields.push(childIndependentFieldsWithStep.field),ops.push(childChannel),as.push(vgField(childIndependentFieldsWithStep,{forAs:!0}))):childChannel\x26\x26(fields.push(childChannel),ops.push(\x22max\x22),\nas.push(childChannel));return{name:this[channel].name,source:null!\x3d\x3dcrossedDataName\x26\x26void 0!\x3d\x3dcrossedDataName?crossedDataName:this.data,transform:[Object.assign({type:\x22aggregate\x22,groupby:this[channel].fields},fields.length?{fields:fields,ops:ops,as:as}:{})]}};FacetNode.prototype.assembleFacetHeaderData\x3dfunction(childIndependentFieldsWithStep){for(var _a,_b,columns\x3dthis.model.layout.columns,layoutHeaders\x3dthis.model.component.layoutHeaders,data\x3d[],hasSharedAxis\x3d{},$jscomp$iter$175\x3d$jscomp.makeIterator(HEADER_CHANNELS),\n$jscomp$key$headerChannel\x3d$jscomp$iter$175.next();!$jscomp$key$headerChannel.done;$jscomp$key$headerChannel\x3d$jscomp$iter$175.next()){$jscomp$key$headerChannel\x3d$jscomp$key$headerChannel.value;for(var $jscomp$iter$174\x3d$jscomp.makeIterator(HEADER_TYPES),$jscomp$key$headerType\x3d$jscomp$iter$174.next();!$jscomp$key$headerType.done;$jscomp$key$headerType\x3d$jscomp$iter$174.next()){$jscomp$key$headerType\x3d$jscomp$key$headerType.value;$jscomp$key$headerType\x3dnull!\x3d\x3d(_a\x3dlayoutHeaders[$jscomp$key$headerChannel]\x26\x26\nlayoutHeaders[$jscomp$key$headerChannel][$jscomp$key$headerType])\x26\x26void 0!\x3d\x3d_a?_a:[];$jscomp$key$headerType\x3d$jscomp.makeIterator($jscomp$key$headerType);for(var $jscomp$key$header\x3d$jscomp$key$headerType.next();!$jscomp$key$header.done;$jscomp$key$header\x3d$jscomp$key$headerType.next())if(0\x3c(null\x3d\x3d\x3d(_b\x3d$jscomp$key$header.value.axes)||void 0\x3d\x3d\x3d_b?void 0:_b.length)){hasSharedAxis[$jscomp$key$headerChannel]\x3d!0;break}}hasSharedAxis[$jscomp$key$headerChannel]\x26\x26($jscomp$iter$174\x3d\x27length(data(\x22\x27+this.facet.name+\n\x27\x22))\x27,data.push({name:this.facet.name+\x22_\x22+$jscomp$key$headerChannel,transform:[{type:\x22sequence\x22,start:0,stop:\x22row\x22\x3d\x3d\x3d$jscomp$key$headerChannel?columns?{signal:\x22ceil(\x22+$jscomp$iter$174+\x22 / \x22+columns+\x22)\x22}:1:columns?{signal:\x22min(\x22+$jscomp$iter$174+\x22, \x22+columns+\x22)\x22}:{signal:$jscomp$iter$174}}]}))}_a\x3dhasSharedAxis.column;(hasSharedAxis.row||_a)\x26\x26data.unshift(this.assembleRowColumnHeaderData(\x22facet\x22,null,childIndependentFieldsWithStep));return data};FacetNode.prototype.assemble\x3dfunction(){var _a,_b,data\x3d\n[],crossedDataName\x3dnull,childIndependentFieldsWithStep\x3dthis.getChildIndependentFieldsWithStep(),row\x3dthis.row,facet\x3dthis.facet;this.column\x26\x26row\x26\x26(childIndependentFieldsWithStep.x||childIndependentFieldsWithStep.y)\x26\x26(crossedDataName\x3d\x22cross_\x22+this.column.name+\x22_\x22+this.row.name,row\x3d[].concat(null!\x3d\x3d(_a\x3dchildIndependentFieldsWithStep.x)\x26\x26void 0!\x3d\x3d_a?_a:[],null!\x3d\x3d(_b\x3dchildIndependentFieldsWithStep.y)\x26\x26void 0!\x3d\x3d_b?_b:[]),_a\x3drow.map(function(){return\x22distinct\x22}),data.push({name:crossedDataName,source:this.data,\ntransform:[{type:\x22aggregate\x22,groupby:this.fields,fields:row,ops:_a}]}));_a\x3d$jscomp.makeIterator([\x22column\x22,\x22row\x22]);for(_b\x3d_a.next();!_b.done;_b\x3d_a.next())_b\x3d_b.value,this[_b]\x26\x26data.push(this.assembleRowColumnHeaderData(_b,crossedDataName,childIndependentFieldsWithStep));facet\x26\x26(crossedDataName\x3dthis.assembleFacetHeaderData(childIndependentFieldsWithStep))\x26\x26data.push.apply(data,$jscomp.arrayFromIterable(crossedDataName));return data};$jscomp.global.Object.defineProperties(FacetNode.prototype,{fields:{configurable:!0,\nenumerable:!0,get:function(){for(var _a,f\x3d[],$jscomp$iter$177\x3d$jscomp.makeIterator(FACET_CHANNELS),$jscomp$key$channel\x3d$jscomp$iter$177.next();!$jscomp$key$channel.done;$jscomp$key$channel\x3d$jscomp$iter$177.next())$jscomp$key$channel\x3d$jscomp$key$channel.value,(null\x3d\x3d\x3d(_a\x3dthis[$jscomp$key$channel])||void 0\x3d\x3d\x3d_a?0:_a.fields)\x26\x26f.push.apply(f,$jscomp.arrayFromIterable(this[$jscomp$key$channel].fields));return f}}});var ParseNode\x3dfunction(parent,parse){parent\x3dDataFlowNode.call(this,parent)||this;parent._parse\x3d\nparse;return parent};$jscomp.inherits(ParseNode,DataFlowNode);ParseNode.prototype.clone\x3dfunction(){return new ParseNode(null,duplicate(this._parse))};ParseNode.prototype.hash\x3dfunction(){return\x22Parse \x22+hash(this._parse)};ParseNode.makeExplicit\x3dfunction(parent,model,ancestorParse){var explicit\x3d{};model\x3dmodel.data;!isGenerator(model)\x26\x26model\x26\x26model.format\x26\x26model.format.parse\x26\x26(explicit\x3dmodel.format.parse);return this.makeWithAncestors(parent,explicit,{},ancestorParse)};ParseNode.makeWithAncestors\x3dfunction(parent,\nexplicit,implicit,ancestorParse){for(var $jscomp$iter$180\x3d$jscomp.makeIterator(keys$jscomp$0(implicit)),$jscomp$key$field\x3d$jscomp$iter$180.next();!$jscomp$key$field.done;$jscomp$key$field\x3d$jscomp$iter$180.next()){$jscomp$key$field\x3d$jscomp$key$field.value;var parsedAs\x3dancestorParse.getWithExplicit($jscomp$key$field);void 0!\x3d\x3dparsedAs.value\x26\x26(parsedAs.explicit||parsedAs.value\x3d\x3d\x3dimplicit[$jscomp$key$field]||\x22derived\x22\x3d\x3d\x3dparsedAs.value||\x22flatten\x22\x3d\x3d\x3dimplicit[$jscomp$key$field]?delete implicit[$jscomp$key$field]:\nwarn(differentParse($jscomp$key$field,implicit[$jscomp$key$field],parsedAs.value)))}$jscomp$iter$180\x3d$jscomp.makeIterator(keys$jscomp$0(explicit));for($jscomp$key$field\x3d$jscomp$iter$180.next();!$jscomp$key$field.done;$jscomp$key$field\x3d$jscomp$iter$180.next())$jscomp$key$field\x3d$jscomp$key$field.value,parsedAs\x3dancestorParse.get($jscomp$key$field),void 0!\x3d\x3dparsedAs\x26\x26(parsedAs\x3d\x3d\x3dexplicit[$jscomp$key$field]?delete explicit[$jscomp$key$field]:warn(differentParse($jscomp$key$field,explicit[$jscomp$key$field],\nparsedAs)));explicit\x3dnew Split(explicit,implicit);ancestorParse.copyAll(explicit);implicit\x3d{};$jscomp$iter$180\x3d$jscomp.makeIterator(keys$jscomp$0(explicit.combine()));for($jscomp$key$field\x3d$jscomp$iter$180.next();!$jscomp$key$field.done;$jscomp$key$field\x3d$jscomp$iter$180.next())$jscomp$key$field\x3d$jscomp$key$field.value,parsedAs\x3dexplicit.get($jscomp$key$field),null!\x3d\x3dparsedAs\x26\x26(implicit[$jscomp$key$field]\x3dparsedAs);return 0\x3d\x3d\x3dkeys$jscomp$0(implicit).length||ancestorParse.parseNothing?null:new ParseNode(parent,\nimplicit)};ParseNode.prototype.merge\x3dfunction(other){this._parse\x3dObject.assign(Object.assign({},this._parse),other.parse);other.remove()};ParseNode.prototype.assembleFormatParse\x3dfunction(){for(var formatParse\x3d{},$jscomp$iter$183\x3d$jscomp.makeIterator(keys$jscomp$0(this._parse)),$jscomp$key$field\x3d$jscomp$iter$183.next();!$jscomp$key$field.done;$jscomp$key$field\x3d$jscomp$iter$183.next()){$jscomp$key$field\x3d$jscomp$key$field.value;var p\x3dthis._parse[$jscomp$key$field];1\x3d\x3d\x3daccessPathDepth($jscomp$key$field)\x26\x26\n(formatParse[$jscomp$key$field]\x3dp)}return formatParse};ParseNode.prototype.producedFields\x3dfunction(){return new Set(keys$jscomp$0(this._parse))};ParseNode.prototype.dependentFields\x3dfunction(){return new Set(keys$jscomp$0(this._parse))};ParseNode.prototype.assembleTransforms\x3dfunction(onlyNested){var $jscomp$this\x3dthis;onlyNested\x3dvoid 0\x3d\x3d\x3donlyNested?!1:onlyNested;return keys$jscomp$0(this._parse).filter(function(field){return onlyNested?1\x3caccessPathDepth(field):!0}).map(function(field){var expr\x3dparseExpression$1(field,\n$jscomp$this._parse[field]);return expr?{type:\x22formula\x22,expr:expr,as:\x22\x22+splitAccessPath(field).join(\x22.\x22)}:null}).filter(function(t){return null!\x3d\x3dt})};$jscomp.global.Object.defineProperties(ParseNode.prototype,{parse:{configurable:!0,enumerable:!0,get:function(){return this._parse}}});var IdentifierNode\x3dfunction(parent){return DataFlowNode.call(this,parent)||this};$jscomp.inherits(IdentifierNode,DataFlowNode);IdentifierNode.prototype.clone\x3dfunction(){return new IdentifierNode(null)};IdentifierNode.prototype.dependentFields\x3d\nfunction(){return new Set};IdentifierNode.prototype.producedFields\x3dfunction(){return new Set([\x22_vgsid_\x22])};IdentifierNode.prototype.hash\x3dfunction(){return\x22Identifier\x22};IdentifierNode.prototype.assemble\x3dfunction(){return{type:\x22identifier\x22,as:\x22_vgsid_\x22}};var JoinAggregateTransformNode\x3dfunction(parent,transform){parent\x3dDataFlowNode.call(this,parent)||this;parent.transform\x3dtransform;return parent};$jscomp.inherits(JoinAggregateTransformNode,DataFlowNode);JoinAggregateTransformNode.prototype.clone\x3dfunction(){return new JoinAggregateTransformNode(null,\nduplicate(this.transform))};JoinAggregateTransformNode.prototype.addDimensions\x3dfunction(fields){this.transform.groupby\x3dunique(this.transform.groupby.concat(fields),function(d){return d})};JoinAggregateTransformNode.prototype.dependentFields\x3dfunction(){var out\x3dnew Set;this.transform.groupby\x26\x26this.transform.groupby.forEach(out.add,out);this.transform.joinaggregate.map(function(w){return w.field}).filter(function(f){return void 0!\x3d\x3df}).forEach(out.add,out);return out};JoinAggregateTransformNode.prototype.producedFields\x3d\nfunction(){return new Set(this.transform.joinaggregate.map(this.getDefaultName))};JoinAggregateTransformNode.prototype.getDefaultName\x3dfunction(joinAggregateFieldDef){var _a;return null!\x3d\x3d(_a\x3djoinAggregateFieldDef.as)\x26\x26void 0!\x3d\x3d_a?_a:vgField(joinAggregateFieldDef)};JoinAggregateTransformNode.prototype.hash\x3dfunction(){return\x22JoinAggregateTransform \x22+hash(this.transform)};JoinAggregateTransformNode.prototype.assemble\x3dfunction(){for(var fields\x3d[],ops\x3d[],as\x3d[],$jscomp$iter$184\x3d$jscomp.makeIterator(this.transform.joinaggregate),\n$jscomp$key$joinaggregate\x3d$jscomp$iter$184.next();!$jscomp$key$joinaggregate.done;$jscomp$key$joinaggregate\x3d$jscomp$iter$184.next())$jscomp$key$joinaggregate\x3d$jscomp$key$joinaggregate.value,ops.push($jscomp$key$joinaggregate.op),as.push(this.getDefaultName($jscomp$key$joinaggregate)),fields.push(void 0\x3d\x3d\x3d$jscomp$key$joinaggregate.field?null:$jscomp$key$joinaggregate.field);$jscomp$iter$184\x3dthis.transform.groupby;return Object.assign({type:\x22joinaggregate\x22,as:as,ops:ops,fields:fields},void 0!\x3d\x3d$jscomp$iter$184?\n{groupby:$jscomp$iter$184}:{})};var StackNode\x3dfunction(parent,stack){parent\x3dDataFlowNode.call(this,parent)||this;parent._stack\x3dstack;return parent};$jscomp.inherits(StackNode,DataFlowNode);StackNode.prototype.clone\x3dfunction(){return new StackNode(null,duplicate(this._stack))};StackNode.makeFromTransform\x3dfunction(parent,stackTransform){var stack\x3dstackTransform.stack,groupby\x3dstackTransform.groupby,as\x3dstackTransform.as,offset\x3dvoid 0\x3d\x3d\x3dstackTransform.offset?\x22zero\x22:stackTransform.offset,sortFields\x3d[],\nsortOrder\x3d[];if(void 0!\x3d\x3dstackTransform.sort)for(var $jscomp$iter$185\x3d$jscomp.makeIterator(stackTransform.sort),$jscomp$key$sortField\x3d$jscomp$iter$185.next();!$jscomp$key$sortField.done;$jscomp$key$sortField\x3d$jscomp$iter$185.next())$jscomp$key$sortField\x3d$jscomp$key$sortField.value,sortFields.push($jscomp$key$sortField.field),sortOrder.push(getFirstDefined($jscomp$key$sortField.order,\x22ascending\x22));sortFields\x3d{field:sortFields,order:sortOrder};stackTransform\x3disValidAsArray(as)?as:isString(as)?[as,as+\n\x22_end\x22]:[stackTransform.stack+\x22_start\x22,stackTransform.stack+\x22_end\x22];return new StackNode(parent,{stackField:stack,groupby:groupby,offset:offset,sort:sortFields,facetby:[],as:stackTransform})};StackNode.makeFromEncoding\x3dfunction(parent,model){var stackProperties\x3dmodel.stack,encoding\x3dmodel.encoding;if(!stackProperties)return null;var groupbyChannel\x3dstackProperties.groupbyChannel,fieldChannel\x3dstackProperties.fieldChannel,offset\x3dstackProperties.offset;stackProperties\x3dstackProperties.impute;var dimensionFieldDef;\ngroupbyChannel\x26\x26(dimensionFieldDef\x3dgetFieldDef(encoding[groupbyChannel]));encoding\x3dgetStackByFields(model);groupbyChannel\x3dmodel.encoding.order;groupbyChannel\x3disArray(groupbyChannel)||isFieldDef(groupbyChannel)?sortParams(groupbyChannel):encoding.reduce(function(s,field){s.field.push(field);s.order.push(\x22y\x22\x3d\x3d\x3dfieldChannel?\x22descending\x22:\x22ascending\x22);return s},{field:[],order:[]});return new StackNode(parent,{dimensionFieldDef:dimensionFieldDef,stackField:model.vgField(fieldChannel),facetby:[],stackby:encoding,\nsort:groupbyChannel,offset:offset,impute:stackProperties,as:[model.vgField(fieldChannel,{suffix:\x22start\x22,forAs:!0}),model.vgField(fieldChannel,{suffix:\x22end\x22,forAs:!0})]})};StackNode.prototype.addDimensions\x3dfunction(fields){this._stack.facetby.push.apply(this._stack.facetby,$jscomp.arrayFromIterable(fields))};StackNode.prototype.dependentFields\x3dfunction(){var out\x3dnew Set;out.add(this._stack.stackField);this.getGroupbyFields().forEach(out.add,out);this._stack.facetby.forEach(out.add,out);this._stack.sort.field.forEach(out.add,\nout);return out};StackNode.prototype.producedFields\x3dfunction(){return new Set(this._stack.as)};StackNode.prototype.hash\x3dfunction(){return\x22Stack \x22+hash(this._stack)};StackNode.prototype.getGroupbyFields\x3dfunction(){var $jscomp$destructuring$var301\x3dthis._stack,dimensionFieldDef\x3d$jscomp$destructuring$var301.dimensionFieldDef,impute\x3d$jscomp$destructuring$var301.impute;$jscomp$destructuring$var301\x3d$jscomp$destructuring$var301.groupby;return dimensionFieldDef?dimensionFieldDef.bin?impute?[vgField(dimensionFieldDef,\n{binSuffix:\x22mid\x22})]:[vgField(dimensionFieldDef,{}),vgField(dimensionFieldDef,{binSuffix:\x22end\x22})]:[vgField(dimensionFieldDef)]:null!\x3d\x3d$jscomp$destructuring$var301\x26\x26void 0!\x3d\x3d$jscomp$destructuring$var301?$jscomp$destructuring$var301:[]};StackNode.prototype.assemble\x3dfunction(){var transform\x3d[],$jscomp$destructuring$var302\x3dthis._stack,facetby\x3d$jscomp$destructuring$var302.facetby,dimensionFieldDef\x3d$jscomp$destructuring$var302.dimensionFieldDef,field\x3d$jscomp$destructuring$var302.stackField,stackby\x3d$jscomp$destructuring$var302.stackby,\nsort\x3d$jscomp$destructuring$var302.sort,offset\x3d$jscomp$destructuring$var302.offset,as\x3d$jscomp$destructuring$var302.as;$jscomp$destructuring$var302.impute\x26\x26dimensionFieldDef\x26\x26($jscomp$destructuring$var302\x3dvoid 0\x3d\x3d\x3ddimensionFieldDef.band?.5:dimensionFieldDef.band,dimensionFieldDef.bin\x26\x26transform.push({type:\x22formula\x22,expr:$jscomp$destructuring$var302+\x22*\x22+vgField(dimensionFieldDef,{expr:\x22datum\x22})+(\x22+\x22+(1-$jscomp$destructuring$var302)+\x22*\x22)+vgField(dimensionFieldDef,{expr:\x22datum\x22,binSuffix:\x22end\x22}),as:vgField(dimensionFieldDef,\n{binSuffix:\x22mid\x22,forAs:!0})}),transform.push({type:\x22impute\x22,field:field,groupby:[].concat($jscomp.arrayFromIterable(stackby),$jscomp.arrayFromIterable(facetby)),key:vgField(dimensionFieldDef,{binSuffix:\x22mid\x22}),method:\x22value\x22,value:0}));transform.push({type:\x22stack\x22,groupby:[].concat($jscomp.arrayFromIterable(this.getGroupbyFields()),$jscomp.arrayFromIterable(facetby)),field:field,sort:sort,as:as,offset:offset});return transform};$jscomp.global.Object.defineProperties(StackNode.prototype,{stack:{configurable:!0,\nenumerable:!0,get:function(){return this._stack}}});var WindowTransformNode\x3dfunction(parent,transform){parent\x3dDataFlowNode.call(this,parent)||this;parent.transform\x3dtransform;return parent};$jscomp.inherits(WindowTransformNode,DataFlowNode);WindowTransformNode.prototype.clone\x3dfunction(){return new WindowTransformNode(null,duplicate(this.transform))};WindowTransformNode.prototype.addDimensions\x3dfunction(fields){this.transform.groupby\x3dunique(this.transform.groupby.concat(fields),function(d){return d})};\nWindowTransformNode.prototype.dependentFields\x3dfunction(){var _a,_b,out\x3dnew Set;(null!\x3d\x3d(_a\x3dthis.transform.groupby)\x26\x26void 0!\x3d\x3d_a?_a:[]).forEach(out.add,out);(null!\x3d\x3d(_b\x3dthis.transform.sort)\x26\x26void 0!\x3d\x3d_b?_b:[]).forEach(function(m){return out.add(m.field)});this.transform.window.map(function(w){return w.field}).filter(function(f){return void 0!\x3d\x3df}).forEach(out.add,out);return out};WindowTransformNode.prototype.producedFields\x3dfunction(){return new Set(this.transform.window.map(this.getDefaultName))};\nWindowTransformNode.prototype.getDefaultName\x3dfunction(windowFieldDef){var _a;return null!\x3d\x3d(_a\x3dwindowFieldDef.as)\x26\x26void 0!\x3d\x3d_a?_a:vgField(windowFieldDef)};WindowTransformNode.prototype.hash\x3dfunction(){return\x22WindowTransform \x22+hash(this.transform)};WindowTransformNode.prototype.assemble\x3dfunction(){for(var _a,fields\x3d[],ops\x3d[],as\x3d[],params\x3d[],$jscomp$iter$186\x3d$jscomp.makeIterator(this.transform.window),$jscomp$key$window\x3d$jscomp$iter$186.next();!$jscomp$key$window.done;$jscomp$key$window\x3d$jscomp$iter$186.next())$jscomp$key$window\x3d\n$jscomp$key$window.value,ops.push($jscomp$key$window.op),as.push(this.getDefaultName($jscomp$key$window)),params.push(void 0\x3d\x3d\x3d$jscomp$key$window.param?null:$jscomp$key$window.param),fields.push(void 0\x3d\x3d\x3d$jscomp$key$window.field?null:$jscomp$key$window.field);$jscomp$iter$186\x3dthis.transform.frame;$jscomp$key$window\x3dthis.transform.groupby;if($jscomp$iter$186\x26\x26null\x3d\x3d\x3d$jscomp$iter$186[0]\x26\x26null\x3d\x3d\x3d$jscomp$iter$186[1]\x26\x26ops.every(function(o){return isAggregateOp(o)}))return Object.assign({type:\x22joinaggregate\x22,\nas:as,ops:ops,fields:fields},void 0!\x3d\x3d$jscomp$key$window?{groupby:$jscomp$key$window}:{});var sortFields\x3d[],sortOrder\x3d[];if(void 0!\x3d\x3dthis.transform.sort)for(var $jscomp$iter$187\x3d$jscomp.makeIterator(this.transform.sort),$jscomp$key$sortField\x3d$jscomp$iter$187.next();!$jscomp$key$sortField.done;$jscomp$key$sortField\x3d$jscomp$iter$187.next())$jscomp$key$sortField\x3d$jscomp$key$sortField.value,sortFields.push($jscomp$key$sortField.field),sortOrder.push(null!\x3d\x3d(_a\x3d$jscomp$key$sortField.order)\x26\x26void 0!\x3d\x3d_a?\n_a:\x22ascending\x22);_a\x3dthis.transform.ignorePeers;return Object.assign(Object.assign(Object.assign({type:\x22window\x22,params:params,as:as,ops:ops,fields:fields,sort:{field:sortFields,order:sortOrder}},void 0!\x3d\x3d_a?{ignorePeers:_a}:{}),void 0!\x3d\x3d$jscomp$key$window?{groupby:$jscomp$key$window}:{}),void 0!\x3d\x3d$jscomp$iter$186?{frame:$jscomp$iter$186}:{})};var MoveParseUp\x3dfunction(){return BottomUpOptimizer.apply(this,arguments)||this};$jscomp.inherits(MoveParseUp,BottomUpOptimizer);MoveParseUp.prototype.run\x3dfunction(node){var parent\x3d\nnode.parent;if(node instanceof ParseNode){if(isDataSourceNode(parent))return this.flags;if(1\x3cparent.numChildren())return this.setContinue(),this.flags;if(parent instanceof ParseNode)this.setMutated(),parent.merge(node);else{if(fieldIntersection(parent.producedFields(),node.dependentFields()))return this.setContinue(),this.flags;this.setMutated();node.swapWithParent()}}this.setContinue();return this.flags};var MergeIdenticalNodes\x3dfunction(){return TopDownOptimizer.apply(this,arguments)||this};$jscomp.inherits(MergeIdenticalNodes,\nTopDownOptimizer);MergeIdenticalNodes.prototype.mergeNodes\x3dfunction(parent,nodes){var mergedNode\x3dnodes.shift();nodes\x3d$jscomp.makeIterator(nodes);for(var $jscomp$key$node\x3dnodes.next();!$jscomp$key$node.done;$jscomp$key$node\x3dnodes.next())$jscomp$key$node\x3d$jscomp$key$node.value,parent.removeChild($jscomp$key$node),$jscomp$key$node.parent\x3dmergedNode,$jscomp$key$node.remove()};MergeIdenticalNodes.prototype.run\x3dfunction(node){for(var hashes\x3dnode.children.map(function(x){return x.hash()}),buckets\x3d{},i\x3d0;i\x3c\nhashes.length;i++)void 0\x3d\x3d\x3dbuckets[hashes[i]]?buckets[hashes[i]]\x3d[node.children[i]]:buckets[hashes[i]].push(node.children[i]);hashes\x3d$jscomp.makeIterator(keys$jscomp$0(buckets));for(i\x3dhashes.next();!i.done;i\x3dhashes.next())i\x3di.value,1\x3cbuckets[i].length\x26\x26(this.setMutated(),this.mergeNodes(node,buckets[i]));node\x3d$jscomp.makeIterator(node.children);for(buckets\x3dnode.next();!buckets.done;buckets\x3dnode.next())this.run(buckets.value);return this.mutatedFlag};var RemoveUnusedSubtrees\x3dfunction(){return BottomUpOptimizer.apply(this,\narguments)||this};$jscomp.inherits(RemoveUnusedSubtrees,BottomUpOptimizer);RemoveUnusedSubtrees.prototype.run\x3dfunction(node){node instanceof OutputNode||0\x3cnode.numChildren()||node instanceof FacetNode||(this.setMutated(),node.remove());return this.flags};var RemoveDuplicateTimeUnits\x3dfunction(){var $jscomp$super$this\x3dBottomUpOptimizer.apply(this,arguments)||this;$jscomp$super$this.fields\x3dnew Set;$jscomp$super$this.prev\x3dnull;return $jscomp$super$this};$jscomp.inherits(RemoveDuplicateTimeUnits,BottomUpOptimizer);\nRemoveDuplicateTimeUnits.prototype.run\x3dfunction(node){this.setContinue();if(node instanceof TimeUnitNode){var pfields\x3dnode.producedFields();hasIntersection(pfields,this.fields)?(this.setMutated(),this.prev.remove()):this.fields\x3dnew Set([].concat($jscomp.arrayFromIterable(this.fields),$jscomp.arrayFromIterable(pfields)));this.prev\x3dnode}return this.flags};RemoveDuplicateTimeUnits.prototype.reset\x3dfunction(){this.fields.clear()};var MergeTimeUnits\x3dfunction(){return BottomUpOptimizer.apply(this,arguments)||\nthis};$jscomp.inherits(MergeTimeUnits,BottomUpOptimizer);MergeTimeUnits.prototype.run\x3dfunction(node){this.setContinue();var timeUnitChildren\x3dnode.parent.children.filter(function(x){return x instanceof TimeUnitNode});node\x3dtimeUnitChildren.pop();timeUnitChildren\x3d$jscomp.makeIterator(timeUnitChildren);for(var $jscomp$key$timeUnit\x3dtimeUnitChildren.next();!$jscomp$key$timeUnit.done;$jscomp$key$timeUnit\x3dtimeUnitChildren.next())$jscomp$key$timeUnit\x3d$jscomp$key$timeUnit.value,this.setMutated(),node.merge($jscomp$key$timeUnit);\nreturn this.flags};var RemoveUnnecessaryOutputNodes\x3dfunction(){return TopDownOptimizer.call(this)||this};$jscomp.inherits(RemoveUnnecessaryOutputNodes,TopDownOptimizer);RemoveUnnecessaryOutputNodes.prototype.run\x3dfunction(node){node instanceof OutputNode\x26\x26!node.isRequired()\x26\x26(this.setMutated(),node.remove());node\x3d$jscomp.makeIterator(node.children);for(var $jscomp$key$child\x3dnode.next();!$jscomp$key$child.done;$jscomp$key$child\x3dnode.next())this.run($jscomp$key$child.value);return this.mutatedFlag};\nvar RemoveUnnecessaryIdentifierNodes\x3dfunction(model){var $jscomp$super$this\x3dTopDownOptimizer.call(this)||this;$jscomp$super$this.requiresSelectionId\x3dmodel\x26\x26requiresSelectionId(model);return $jscomp$super$this};$jscomp.inherits(RemoveUnnecessaryIdentifierNodes,TopDownOptimizer);RemoveUnnecessaryIdentifierNodes.prototype.run\x3dfunction(node){!(node instanceof IdentifierNode)||this.requiresSelectionId\x26\x26(isDataSourceNode(node.parent)||node.parent instanceof AggregateNode||node.parent instanceof ParseNode)||\n(this.setMutated(),node.remove());node\x3d$jscomp.makeIterator(node.children);for(var $jscomp$key$child\x3dnode.next();!$jscomp$key$child.done;$jscomp$key$child\x3dnode.next())this.run($jscomp$key$child.value);return this.mutatedFlag};var MergeParse\x3dfunction(){return BottomUpOptimizer.apply(this,arguments)||this};$jscomp.inherits(MergeParse,BottomUpOptimizer);MergeParse.prototype.run\x3dfunction(node){node\x3dnode.parent;var originalChildren\x3d[].concat($jscomp.arrayFromIterable(node.children)),parseChildren\x3dnode.children.filter(function(child){return child instanceof\nParseNode});if(1\x3cnode.numChildren()\x26\x261\x3c\x3dparseChildren.length){var commonParse\x3d{},conflictingParse\x3dnew Set;parseChildren\x3d$jscomp.makeIterator(parseChildren);for(var $jscomp$key$parseNode\x3dparseChildren.next();!$jscomp$key$parseNode.done;$jscomp$key$parseNode\x3dparseChildren.next()){$jscomp$key$parseNode\x3d$jscomp$key$parseNode.value.parse;for(var $jscomp$iter$196\x3d$jscomp.makeIterator(keys$jscomp$0($jscomp$key$parseNode)),$jscomp$key$k\x3d$jscomp$iter$196.next();!$jscomp$key$k.done;$jscomp$key$k\x3d$jscomp$iter$196.next())$jscomp$key$k\x3d\n$jscomp$key$k.value,$jscomp$key$k in commonParse?commonParse[$jscomp$key$k]!\x3d\x3d$jscomp$key$parseNode[$jscomp$key$k]\x26\x26conflictingParse.add($jscomp$key$k):commonParse[$jscomp$key$k]\x3d$jscomp$key$parseNode[$jscomp$key$k]}conflictingParse\x3d$jscomp.makeIterator(conflictingParse);for(parseChildren\x3dconflictingParse.next();!parseChildren.done;parseChildren\x3dconflictingParse.next())delete commonParse[parseChildren.value];if(!isEmpty(commonParse))for(this.setMutated(),conflictingParse\x3dnew ParseNode(node,commonParse),\noriginalChildren\x3d$jscomp.makeIterator(originalChildren),parseChildren\x3doriginalChildren.next();!parseChildren.done;parseChildren\x3doriginalChildren.next()){parseChildren\x3dparseChildren.value;if(parseChildren instanceof ParseNode)for($jscomp$key$parseNode\x3d$jscomp.makeIterator(keys$jscomp$0(commonParse)),$jscomp$iter$196\x3d$jscomp$key$parseNode.next();!$jscomp$iter$196.done;$jscomp$iter$196\x3d$jscomp$key$parseNode.next())delete parseChildren.parse[$jscomp$iter$196.value];node.removeChild(parseChildren);parseChildren.parent\x3d\nconflictingParse;parseChildren instanceof ParseNode\x26\x260\x3d\x3d\x3dkeys$jscomp$0(parseChildren.parse).length\x26\x26parseChildren.remove()}}this.setContinue();return this.flags};var MergeAggregates\x3dfunction(){return BottomUpOptimizer.apply(this,arguments)||this};$jscomp.inherits(MergeAggregates,BottomUpOptimizer);MergeAggregates.prototype.run\x3dfunction(node){node\x3dnode.parent;var aggChildren\x3dnode.children.filter(function(child){return child instanceof AggregateNode}),groupedAggregates\x3d{};aggChildren\x3d$jscomp.makeIterator(aggChildren);\nfor(var $jscomp$key$agg\x3daggChildren.next();!$jscomp$key$agg.done;$jscomp$key$agg\x3daggChildren.next()){var agg\x3d$jscomp$key$agg.value;$jscomp$key$agg\x3dhash(agg.groupBy);$jscomp$key$agg in groupedAggregates||(groupedAggregates[$jscomp$key$agg]\x3d[]);groupedAggregates[$jscomp$key$agg].push(agg)}aggChildren\x3d$jscomp.makeIterator(keys$jscomp$0(groupedAggregates));for(agg\x3daggChildren.next();!agg.done;agg\x3daggChildren.next())if($jscomp$key$agg\x3dgroupedAggregates[agg.value],1\x3c$jscomp$key$agg.length){agg\x3d$jscomp$key$agg.pop();\nvar $jscomp$iter$202\x3d$jscomp.makeIterator($jscomp$key$agg);for($jscomp$key$agg\x3d$jscomp$iter$202.next();!$jscomp$key$agg.done;$jscomp$key$agg\x3d$jscomp$iter$202.next())$jscomp$key$agg\x3d$jscomp$key$agg.value,agg.merge($jscomp$key$agg)\x26\x26(node.removeChild($jscomp$key$agg),$jscomp$key$agg.parent\x3dagg,$jscomp$key$agg.remove(),this.setMutated())}this.setContinue();return this.flags};var MergeBins\x3dfunction(model){var $jscomp$super$this\x3dBottomUpOptimizer.call(this)||this;$jscomp$super$this.model\x3dmodel;return $jscomp$super$this};\n$jscomp.inherits(MergeBins,BottomUpOptimizer);MergeBins.prototype.run\x3dfunction(node){var parent\x3dnode.parent,moveBinsUp\x3d!(isDataSourceNode(parent)||parent instanceof FilterNode||parent instanceof ParseNode||parent instanceof IdentifierNode),promotableBins\x3d[];node\x3d[];for(var $jscomp$iter$204\x3d$jscomp.makeIterator(parent.children),$jscomp$key$child\x3d$jscomp$iter$204.next();!$jscomp$key$child.done;$jscomp$key$child\x3d$jscomp$iter$204.next())$jscomp$key$child\x3d$jscomp$key$child.value,$jscomp$key$child instanceof\nBinNode\x26\x26(moveBinsUp\x26\x26!fieldIntersection(parent.producedFields(),$jscomp$key$child.dependentFields())?promotableBins.push($jscomp$key$child):node.push($jscomp$key$child));if(0\x3cpromotableBins.length){moveBinsUp\x3dpromotableBins.pop();$jscomp$iter$204\x3d$jscomp.makeIterator(promotableBins);for(promotableBins\x3d$jscomp$iter$204.next();!promotableBins.done;promotableBins\x3d$jscomp$iter$204.next())moveBinsUp.merge(promotableBins.value,this.model.renameSignal.bind(this.model));this.setMutated();parent instanceof\nBinNode?parent.merge(moveBinsUp,this.model.renameSignal.bind(this.model)):moveBinsUp.swapWithParent()}if(1\x3cnode.length){parent\x3dnode.pop();node\x3d$jscomp.makeIterator(node);for(promotableBins\x3dnode.next();!promotableBins.done;promotableBins\x3dnode.next())parent.merge(promotableBins.value,this.model.renameSignal.bind(this.model));this.setMutated()}this.setContinue();return this.flags};var MergeOutputs\x3dfunction(){return BottomUpOptimizer.apply(this,arguments)||this};$jscomp.inherits(MergeOutputs,BottomUpOptimizer);\nMergeOutputs.prototype.run\x3dfunction(node){node\x3dnode.parent;var children\x3d[].concat($jscomp.arrayFromIterable(node.children));if(!some(children,function(child){return child instanceof OutputNode})||1\x3e\x3dnode.numChildren())return this.setContinue(),this.flags;var otherChildren\x3d[];children\x3d$jscomp.makeIterator(children);for(var $jscomp$key$child\x3dchildren.next();!$jscomp$key$child.done;$jscomp$key$child\x3dchildren.next())if($jscomp$key$child\x3d$jscomp$key$child.value,$jscomp$key$child instanceof OutputNode){for(var lastOutput\x3d\n$jscomp$key$child;1\x3d\x3d\x3dlastOutput.numChildren();){var theChild\x3dlastOutput.children[0];if(theChild instanceof OutputNode)lastOutput\x3dtheChild;else break}otherChildren.push.apply(otherChildren,$jscomp.arrayFromIterable(lastOutput.children));if(mainOutput)node.removeChild($jscomp$key$child),$jscomp$key$child.parent\x3dmainOutput.parent,mainOutput.parent.removeChild(mainOutput),mainOutput.parent\x3dlastOutput,this.setMutated();else var mainOutput\x3dlastOutput}else otherChildren.push($jscomp$key$child);if(otherChildren.length)for(this.setMutated(),\nnode\x3d$jscomp.makeIterator(otherChildren),$jscomp$key$child\x3dnode.next();!$jscomp$key$child.done;$jscomp$key$child\x3dnode.next())otherChildren\x3d$jscomp$key$child.value,otherChildren.parent.removeChild(otherChildren),otherChildren.parent\x3dmainOutput;this.setContinue();return this.flags};var SignalRefWrapper\x3dfunction(exprGenerator){Object.defineProperty(this,\x22signal\x22,{enumerable:!0,get:exprGenerator})};SignalRefWrapper.fromName\x3dfunction(rename,signalName){return new SignalRefWrapper(function(){return rename(signalName)})};\nvar ScaleComponent\x3dfunction(name,typeWithExplicit){name\x3dSplit.call(this,{},{name:name})||this;name.merged\x3d!1;name.setWithExplicit(\x22type\x22,typeWithExplicit);return name};$jscomp.inherits(ScaleComponent,Split);ScaleComponent.prototype.domainDefinitelyIncludesZero\x3dfunction(){return!1!\x3d\x3dthis.get(\x22zero\x22)?!0:some(this.get(\x22domains\x22),function(d){return isArray(d)\x26\x262\x3d\x3d\x3dd.length\x26\x260\x3e\x3dd[0]\x26\x260\x3c\x3dd[1]})};var RANGE_PROPERTIES\x3d[\x22range\x22,\x22scheme\x22],scaleRules\x3d{bins:function($jscomp$destructuring$var322){var model\x3d$jscomp$destructuring$var322.model;\n$jscomp$destructuring$var322\x3d$jscomp$destructuring$var322.fieldOrDatumDef;return isFieldDef($jscomp$destructuring$var322)?bins$jscomp$0(model,$jscomp$destructuring$var322):void 0},interpolate:function($jscomp$destructuring$var324){var type\x3d$jscomp$destructuring$var324.fieldOrDatumDef.type;$jscomp$destructuring$var324\x3dcontains([\x22color\x22,\x22fill\x22,\x22stroke\x22],$jscomp$destructuring$var324.channel)\x26\x26\x22nominal\x22!\x3d\x3dtype?\x22hcl\x22:void 0;return $jscomp$destructuring$var324},nice:function($jscomp$destructuring$var326){var scaleType\x3d\n$jscomp$destructuring$var326.scaleType,channel\x3d$jscomp$destructuring$var326.channel,_a;$jscomp$destructuring$var326\x3d(null\x3d\x3d\x3d(_a\x3dgetFieldDef($jscomp$destructuring$var326.fieldOrDatumDef))||void 0\x3d\x3d\x3d_a?0:_a.bin)||contains([ScaleType.TIME,ScaleType.UTC],scaleType)?void 0:channel in POSITION_SCALE_CHANNEL_INDEX?!0:void 0;return $jscomp$destructuring$var326},padding:function($jscomp$destructuring$var328){var config\x3d$jscomp$destructuring$var328.config;a:{var JSCompiler_inline_result\x3d$jscomp$destructuring$var328.channel;\nvar scaleType\x3d$jscomp$destructuring$var328.scaleType,scaleConfig\x3dconfig.scale,fieldOrDatumDef\x3d$jscomp$destructuring$var328.fieldOrDatumDef;$jscomp$destructuring$var328\x3d$jscomp$destructuring$var328.markDef;config\x3dconfig.bar;if(JSCompiler_inline_result in POSITION_SCALE_CHANNEL_INDEX){if(scaleType in CONTINUOUS_TO_CONTINUOUS_INDEX){if(void 0!\x3d\x3dscaleConfig.continuousPadding){JSCompiler_inline_result\x3dscaleConfig.continuousPadding;break a}var orient$518\x3d$jscomp$destructuring$var328.orient;if(\x22bar\x22\x3d\x3d\x3d$jscomp$destructuring$var328.type\x26\x26\n(!isFieldDef(fieldOrDatumDef)||!fieldOrDatumDef.bin\x26\x26!fieldOrDatumDef.timeUnit)\x26\x26(\x22vertical\x22\x3d\x3d\x3dorient$518\x26\x26\x22x\x22\x3d\x3d\x3dJSCompiler_inline_result||\x22horizontal\x22\x3d\x3d\x3dorient$518\x26\x26\x22y\x22\x3d\x3d\x3dJSCompiler_inline_result)){JSCompiler_inline_result\x3dconfig.continuousBandSize;break a}}if(scaleType\x3d\x3d\x3dScaleType.POINT){JSCompiler_inline_result\x3dscaleConfig.pointPadding;break a}}JSCompiler_inline_result\x3dvoid 0}return JSCompiler_inline_result},paddingInner:function($jscomp$destructuring$var330){var channel\x3d$jscomp$destructuring$var330.channel,\nmarkDef\x3d$jscomp$destructuring$var330.markDef,config\x3d$jscomp$destructuring$var330.config;void 0!\x3d\x3d$jscomp$destructuring$var330.scalePadding?markDef\x3dvoid 0:channel in POSITION_SCALE_CHANNEL_INDEX?($jscomp$destructuring$var330\x3dconfig.scale,channel\x3d$jscomp$destructuring$var330.barBandPaddingInner,config\x3d$jscomp$destructuring$var330.rectBandPaddingInner,markDef\x3dgetFirstDefined($jscomp$destructuring$var330.bandPaddingInner,\x22bar\x22\x3d\x3d\x3dmarkDef.type?channel:config)):markDef\x3dvoid 0;return markDef},paddingOuter:function($jscomp$destructuring$var332){var channel\x3d\n$jscomp$destructuring$var332.channel,scaleType\x3d$jscomp$destructuring$var332.scaleType,config\x3d$jscomp$destructuring$var332.config;var paddingInnerValue\x3d$jscomp$destructuring$var332.scalePaddingInner;$jscomp$destructuring$var332\x3dvoid 0!\x3d\x3d$jscomp$destructuring$var332.scalePadding?void 0:channel in POSITION_SCALE_CHANNEL_INDEX\x26\x26scaleType\x3d\x3d\x3dScaleType.BAND?getFirstDefined(config.scale.bandPaddingOuter,isSignalRef(paddingInnerValue)?{signal:paddingInnerValue.signal+\x22/2\x22}:paddingInnerValue/2):void 0;return $jscomp$destructuring$var332},\nreverse:function($jscomp$destructuring$var334){var fieldOrDatumDef\x3d$jscomp$destructuring$var334.fieldOrDatumDef,scaleType\x3d$jscomp$destructuring$var334.scaleType,channel\x3d$jscomp$destructuring$var334.channel;$jscomp$destructuring$var334\x3d$jscomp$destructuring$var334.config;fieldOrDatumDef\x3disFieldDef(fieldOrDatumDef)?fieldOrDatumDef.sort:void 0;$jscomp$destructuring$var334\x3d$jscomp$destructuring$var334.scale;scaleType\x3d\x22x\x22\x3d\x3d\x3dchannel\x26\x26void 0!\x3d\x3d$jscomp$destructuring$var334.xReverse?scaleType in CONTINUOUS_DOMAIN_INDEX\x26\x26\n\x22descending\x22\x3d\x3d\x3dfieldOrDatumDef?isSignalRef($jscomp$destructuring$var334.xReverse)?{signal:\x22!\x22+$jscomp$destructuring$var334.xReverse.signal}:!$jscomp$destructuring$var334.xReverse:$jscomp$destructuring$var334.xReverse:scaleType in CONTINUOUS_DOMAIN_INDEX\x26\x26\x22descending\x22\x3d\x3d\x3dfieldOrDatumDef?!0:void 0;return scaleType},zero:function($jscomp$destructuring$var336){a:{var JSCompiler_inline_result\x3d$jscomp$destructuring$var336.channel;var fieldDef\x3d$jscomp$destructuring$var336.fieldOrDatumDef,specifiedDomain\x3d\n$jscomp$destructuring$var336.domain,markDef\x3d$jscomp$destructuring$var336.markDef;$jscomp$destructuring$var336\x3d$jscomp$destructuring$var336.scaleType;if(specifiedDomain\x26\x26\x22unaggregated\x22!\x3d\x3dspecifiedDomain\x26\x26$jscomp$destructuring$var336 in CONTINUOUS_DOMAIN_INDEX){if(isArray(specifiedDomain)\x26\x26(JSCompiler_inline_result\x3dspecifiedDomain[specifiedDomain.length-1],0\x3e\x3dspecifiedDomain[0]\x26\x260\x3c\x3dJSCompiler_inline_result)){JSCompiler_inline_result\x3d!0;break a}JSCompiler_inline_result\x3d!1}else\x22size\x22!\x3d\x3dJSCompiler_inline_result||\n\x22quantitative\x22!\x3d\x3dfieldDef.type||$jscomp$destructuring$var336 in CONTINUOUS_TO_DISCRETE_INDEX?isFieldDef(fieldDef)\x26\x26fieldDef.bin||!contains([].concat($jscomp.arrayFromIterable(POSITION_SCALE_CHANNELS),$jscomp.arrayFromIterable(POLAR_POSITION_SCALE_CHANNELS)),JSCompiler_inline_result)?JSCompiler_inline_result\x3d!1:(specifiedDomain\x3dmarkDef.orient,JSCompiler_inline_result\x3dcontains([\x22bar\x22,\x22area\x22,\x22line\x22,\x22trail\x22],markDef.type)\x26\x26(\x22horizontal\x22\x3d\x3d\x3dspecifiedDomain\x26\x26\x22y\x22\x3d\x3d\x3dJSCompiler_inline_result||\x22vertical\x22\x3d\x3d\x3d\nspecifiedDomain\x26\x26\x22x\x22\x3d\x3d\x3dJSCompiler_inline_result)?!1:!0):JSCompiler_inline_result\x3d!0}return JSCompiler_inline_result}},scaleTypeTieBreaker\x3dtieBreakByComparing(function(st1,st2){return SCALE_PRECEDENCE_INDEX[st1]-SCALE_PRECEDENCE_INDEX[st2]}),NameMap\x3dfunction(){this.nameMap\x3d{}};NameMap.prototype.rename\x3dfunction(oldName,newName){this.nameMap[oldName]\x3dnewName};NameMap.prototype.has\x3dfunction(name){return void 0!\x3d\x3dthis.nameMap[name]};NameMap.prototype.get\x3dfunction(name){for(;this.nameMap[name]\x26\x26name!\x3d\x3d\nthis.nameMap[name];)name\x3dthis.nameMap[name];return name};var Model\x3dfunction(spec,type,parent,parentGivenName,config,resolve,view){var $jscomp$this\x3dthis,_a,_b;this.type\x3dtype;this.parent\x3dparent;this.config\x3dconfig;this.view\x3dview;this.children\x3d[];this.correctDataNames\x3dfunction(mark){mark.from\x26\x26mark.from.data\x26\x26(mark.from.data\x3d$jscomp$this.lookupDataSource(mark.from.data));mark.from\x26\x26mark.from.facet\x26\x26mark.from.facet.data\x26\x26(mark.from.facet.data\x3d$jscomp$this.lookupDataSource(mark.from.facet.data));return mark};\nthis.parent\x3dparent;this.config\x3dconfig;this.name\x3dnull!\x3d\x3d(_a\x3dspec.name)\x26\x26void 0!\x3d\x3d_a?_a:parentGivenName;this.title\x3disText(spec.title)?{text:spec.title}:spec.title;this.scaleNameMap\x3dparent?parent.scaleNameMap:new NameMap;this.projectionNameMap\x3dparent?parent.projectionNameMap:new NameMap;this.signalNameMap\x3dparent?parent.signalNameMap:new NameMap;this.data\x3dspec.data;this.description\x3dspec.description;this.transforms\x3dnormalizeTransform(null!\x3d\x3d(_b\x3dspec.transform)\x26\x26void 0!\x3d\x3d_b?_b:[]);this.layout\x3d\x22layer\x22\x3d\x3d\x3d\ntype||\x22unit\x22\x3d\x3d\x3dtype?{}:extractCompositionLayout(spec,type,config);this.component\x3d{data:{sources:parent?parent.component.data.sources:[],outputNodes:parent?parent.component.data.outputNodes:{},outputNodeRefCounts:parent?parent.component.data.outputNodeRefCounts:{},isFaceted:\x22facet\x22in spec||parent\x26\x26parent.component.data.isFaceted\x26\x26void 0\x3d\x3d\x3dspec.data},layoutSize:new Split,layoutHeaders:{row:{},column:{},facet:{}},mark:null,resolve:Object.assign({scale:{},axis:{},legend:{}},resolve?duplicate(resolve):\n{}),selection:null,scales:null,projection:null,axes:{},legends:{}}};Model.prototype.parse\x3dfunction(){this.parseScale();this.parseLayoutSize();this.renameTopLevelLayoutSizeSignal();this.parseSelections();this.parseProjection();this.parseData();this.parseAxesAndHeaders();this.parseLegends();this.parseMarkGroup()};Model.prototype.parseScale\x3dfunction(){var ignoreRange\x3d{}.ignoreRange;parseScaleCore(this);isUnitModel(this)?parseUnitScaleDomain(this):parseNonUnitScaleDomain(this);for(var $jscomp$inline_5197\x3d\n$jscomp.makeIterator(NON_TYPE_DOMAIN_RANGE_VEGA_SCALE_PROPERTIES),$jscomp$key$prop\x3d$jscomp$inline_5197.next();!$jscomp$key$prop.done;$jscomp$key$prop\x3d$jscomp$inline_5197.next())parseScaleProperty(this,$jscomp$key$prop.value);ignoreRange||parseScaleRange(this)};Model.prototype.parseProjection\x3dfunction(){this.component.projection\x3disUnitModel(this)?parseUnitProjection(this):parseNonUnitProjections(this)};Model.prototype.renameTopLevelLayoutSizeSignal\x3dfunction(){\x22width\x22!\x3d\x3dthis.getName(\x22width\x22)\x26\x26this.renameSignal(this.getName(\x22width\x22),\n\x22width\x22);\x22height\x22!\x3d\x3dthis.getName(\x22height\x22)\x26\x26this.renameSignal(this.getName(\x22height\x22),\x22height\x22)};Model.prototype.parseLegends\x3dfunction(){parseLegend(this)};Model.prototype.assembleGroupStyle\x3dfunction(){var _a,_b;if(\x22unit\x22\x3d\x3d\x3dthis.type||\x22layer\x22\x3d\x3d\x3dthis.type)return null!\x3d\x3d(_b\x3dnull\x3d\x3d\x3d(_a\x3dthis.view)||void 0\x3d\x3d\x3d_a?void 0:_a.style)\x26\x26void 0!\x3d\x3d_b?_b:\x22cell\x22};Model.prototype.assembleEncodeFromView\x3dfunction(view){view\x3d__rest(view,[\x22style\x22]);for(var e\x3d{},$jscomp$iter$228\x3d$jscomp.makeIterator(keys$jscomp$0(view)),\n$jscomp$key$property\x3d$jscomp$iter$228.next();!$jscomp$key$property.done;$jscomp$key$property\x3d$jscomp$iter$228.next()){$jscomp$key$property\x3d$jscomp$key$property.value;var value\x3dview[$jscomp$key$property];void 0!\x3d\x3dvalue\x26\x26(e[$jscomp$key$property]\x3dsignalOrValueRef(value))}return e};Model.prototype.assembleGroupEncodeEntry\x3dfunction(isTopLevel){var encodeEntry\x3d{};this.view\x26\x26(encodeEntry\x3dthis.assembleEncodeFromView(this.view));return isTopLevel||(this.description\x26\x26(encodeEntry.description\x3dsignalOrValueRef(this.description)),\n\x22unit\x22!\x3d\x3dthis.type\x26\x26\x22layer\x22!\x3d\x3dthis.type)?isEmpty(encodeEntry)?void 0:encodeEntry:Object.assign({width:this.getSizeSignalRef(\x22width\x22),height:this.getSizeSignalRef(\x22height\x22)},null!\x3d\x3dencodeEntry\x26\x26void 0!\x3d\x3dencodeEntry?encodeEntry:{})};Model.prototype.assembleLayout\x3dfunction(){if(this.layout){var _a\x3dthis.layout,spacing\x3d_a.spacing;_a\x3d__rest(_a,[\x22spacing\x22]);for(var config\x3dthis.config,headerComponentIndex\x3dthis.component.layoutHeaders,titleBand\x3d{},$jscomp$inline_5206\x3d$jscomp.makeIterator(FACET_CHANNELS),$jscomp$key$channel\x3d\n$jscomp$inline_5206.next();!$jscomp$key$channel.done;$jscomp$key$channel\x3d$jscomp$inline_5206.next()){$jscomp$key$channel\x3d$jscomp$key$channel.value;var headerComponent\x3dheaderComponentIndex[$jscomp$key$channel];if(null\x3d\x3d\x3dheaderComponent||void 0\x3d\x3d\x3dheaderComponent?0:headerComponent.facetFieldDef){var $jscomp$inline_5210\x3dgetHeaderProperties([\x22titleAnchor\x22,\x22titleOrient\x22],headerComponent.facetFieldDef,config,$jscomp$key$channel);headerComponent\x3d$jscomp$inline_5210.titleAnchor;$jscomp$key$channel\x3dgetHeaderChannel($jscomp$key$channel,\n$jscomp$inline_5210.titleOrient);headerComponent\x3dLAYOUT_TITLE_BAND[$jscomp$key$channel][headerComponent];void 0!\x3d\x3dheaderComponent\x26\x26(titleBand[$jscomp$key$channel]\x3dheaderComponent)}}config\x3disEmpty(titleBand)?void 0:titleBand;return Object.assign(Object.assign(Object.assign({padding:spacing},this.assembleDefaultLayout()),_a),config?{titleBand:config}:{})}};Model.prototype.assembleDefaultLayout\x3dfunction(){return{}};Model.prototype.assembleHeaderMarks\x3dfunction(){for(var layoutHeaders\x3dthis.component.layoutHeaders,\nheaderMarks\x3d[],$jscomp$iter$229\x3d$jscomp.makeIterator(FACET_CHANNELS),$jscomp$key$channel\x3d$jscomp$iter$229.next();!$jscomp$key$channel.done;$jscomp$key$channel\x3d$jscomp$iter$229.next())$jscomp$key$channel\x3d$jscomp$key$channel.value,layoutHeaders[$jscomp$key$channel].title\x26\x26headerMarks.push(assembleTitleGroup(this,$jscomp$key$channel));layoutHeaders\x3d$jscomp.makeIterator(HEADER_CHANNELS);for($jscomp$key$channel\x3dlayoutHeaders.next();!$jscomp$key$channel.done;$jscomp$key$channel\x3dlayoutHeaders.next())headerMarks\x3d\nheaderMarks.concat(assembleHeaderGroups(this,$jscomp$key$channel.value));return headerMarks};Model.prototype.assembleAxes\x3dfunction(){return assembleAxes(this.component.axes,this.config)};Model.prototype.assembleLegends\x3dfunction(){return assembleLegends(this)};Model.prototype.assembleProjections\x3dfunction(){var JSCompiler_inline_result\x3disLayerModel(this)||isConcatModel(this)?assembleProjectionsForModelAndChildren(this):assembleProjectionForModel(this);return JSCompiler_inline_result};Model.prototype.assembleTitle\x3d\nfunction(){var _a,_b,_c,_d\x3dnull!\x3d\x3d(_a\x3dthis.title)\x26\x26void 0!\x3d\x3d_a?_a:{};_a\x3d_d.encoding;_d\x3d__rest(_d,[\x22encoding\x22]);_d\x3dObject.assign(Object.assign(Object.assign({},extractTitleConfig(this.config.title).nonMark),_d),_a?{encode:{update:_a}}:{});if(_d.text)return contains([\x22unit\x22,\x22layer\x22],this.type)?contains([\x22middle\x22,void 0],_d.anchor)\x26\x26(_d.frame\x3dnull!\x3d\x3d(_b\x3d_d.frame)\x26\x26void 0!\x3d\x3d_b?_b:\x22group\x22):_d.anchor\x3dnull!\x3d\x3d(_c\x3d_d.anchor)\x26\x26void 0!\x3d\x3d_c?_c:\x22start\x22,isEmpty(_d)?void 0:_d};Model.prototype.assembleGroup\x3dfunction(signals){signals\x3d\nvoid 0\x3d\x3d\x3dsignals?[]:signals;var group\x3d{};signals\x3dsignals.concat(this.assembleSignals());0\x3csignals.length\x26\x26(group.signals\x3dsignals);if(signals\x3dthis.assembleLayout())group.layout\x3dsignals;group.marks\x3d[].concat(this.assembleHeaderMarks(),this.assembleMarks());signals\x3d!this.parent||isFacetModel(this.parent)?assembleScales(this):[];0\x3csignals.length\x26\x26(group.scales\x3dsignals);signals\x3dthis.assembleAxes();0\x3csignals.length\x26\x26(group.axes\x3dsignals);signals\x3dthis.assembleLegends();0\x3csignals.length\x26\x26(group.legends\x3dsignals);\nreturn group};Model.prototype.getName\x3dfunction(text){return varName((this.name?this.name+\x22_\x22:\x22\x22)+text)};Model.prototype.requestDataName\x3dfunction(name){var _a;name\x3dthis.getName(name);var refCounts\x3dthis.component.data.outputNodeRefCounts;refCounts[name]\x3d(null!\x3d\x3d(_a\x3drefCounts[name])\x26\x26void 0!\x3d\x3d_a?_a:0)+1;return name};Model.prototype.getSizeSignalRef\x3dfunction(layoutSizeType){if(isFacetModel(this.parent)){var sizeType\x3dgetSizeTypeFromLayoutSizeType(layoutSizeType),channel\x3dgetPositionScaleChannel(sizeType);\nif((sizeType\x3dthis.component.scales[channel])\x26\x26!sizeType.merged){var type\x3dsizeType.get(\x22type\x22),range\x3dsizeType.get(\x22range\x22);if(type in DISCRETE_DOMAIN_INDEX\x26\x26isVgRangeStep(range)){layoutSizeType\x3dsizeType.get(\x22name\x22);type\x3dassembleDomain(this,channel);if(type\x3dgetFieldFromDomain(type))return channel\x3dvgField({aggregate:\x22distinct\x22,field:type},{expr:\x22datum\x22}),{signal:sizeExpr(layoutSizeType,sizeType,channel)};warn(\x22Unknown field for \x22+channel+\x22. Cannot calculate view size.\x22);return null}}}return{signal:this.signalNameMap.get(this.getName(layoutSizeType))}};\nModel.prototype.lookupDataSource\x3dfunction(name){var node\x3dthis.component.data.outputNodes[name];return node?node.getSource():name};Model.prototype.getSignalName\x3dfunction(oldSignalName){return this.signalNameMap.get(oldSignalName)};Model.prototype.renameSignal\x3dfunction(oldName,newName){this.signalNameMap.rename(oldName,newName)};Model.prototype.renameScale\x3dfunction(oldName,newName){this.scaleNameMap.rename(oldName,newName)};Model.prototype.renameProjection\x3dfunction(oldName,newName){this.projectionNameMap.rename(oldName,\nnewName)};Model.prototype.scaleName\x3dfunction(originalScaleName,parse){if(parse)return this.getName(originalScaleName);if(CHANNEL_INDEX[originalScaleName]\x26\x26SCALE_CHANNEL_INDEX[originalScaleName]\x26\x26this.component.scales[originalScaleName]||this.scaleNameMap.has(this.getName(originalScaleName)))return this.scaleNameMap.get(this.getName(originalScaleName))};Model.prototype.projectionName\x3dfunction(parse){if(parse)return this.getName(\x22projection\x22);if(this.component.projection\x26\x26!this.component.projection.merged||\nthis.projectionNameMap.has(this.getName(\x22projection\x22)))return this.projectionNameMap.get(this.getName(\x22projection\x22))};Model.prototype.getScaleComponent\x3dfunction(channel){if(!this.component.scales)throw Error(\x22getScaleComponent cannot be called before parseScale(). Make sure you have called parseScale or use parseUnitModelWithScale().\x22);var localScaleComponent\x3dthis.component.scales[channel];return localScaleComponent\x26\x26!localScaleComponent.merged?localScaleComponent:this.parent?this.parent.getScaleComponent(channel):\nvoid 0};Model.prototype.getSelectionComponent\x3dfunction(variableName,origName){var sel\x3dthis.component.selection[variableName];!sel\x26\x26this.parent\x26\x26(sel\x3dthis.parent.getSelectionComponent(variableName,origName));if(!sel)throw Error(\x27Cannot find a selection named \x22\x27+origName+\x27\x22.\x27);return sel};Model.prototype.hasAxisOrientSignalRef\x3dfunction(){var _a,_b;return(null\x3d\x3d\x3d(_a\x3dthis.component.axes.x)||void 0\x3d\x3d\x3d_a?void 0:_a.some(function(a){return a.hasOrientSignalRef()}))||(null\x3d\x3d\x3d(_b\x3dthis.component.axes.y)||void 0\x3d\x3d\x3d\n_b?void 0:_b.some(function(a){return a.hasOrientSignalRef()}))};$jscomp.global.Object.defineProperties(Model.prototype,{width:{configurable:!0,enumerable:!0,get:function(){return this.getSizeSignalRef(\x22width\x22)}},height:{configurable:!0,enumerable:!0,get:function(){return this.getSizeSignalRef(\x22height\x22)}}});var ModelWithField\x3dfunction(){return Model.apply(this,arguments)||this};$jscomp.inherits(ModelWithField,Model);ModelWithField.prototype.vgField\x3dfunction(channel,opt){opt\x3dvoid 0\x3d\x3d\x3dopt?{}:opt;if(channel\x3d\nthis.fieldDef(channel))return vgField(channel,opt)};ModelWithField.prototype.reduceFieldDef\x3dfunction(f,init){return reduce(this.getMapping(),function(acc,cd,c){return(cd\x3dgetFieldDef(cd))?f(acc,cd,c):acc},init)};ModelWithField.prototype.forEachFieldDef\x3dfunction(f,t){forEach(this.getMapping(),function(cd,c){(cd\x3dgetFieldDef(cd))\x26\x26f(cd,c)},t)};var DensityTransformNode\x3dfunction(parent,transform){var _a,_b,_c;parent\x3dDataFlowNode.call(this,parent)||this;parent.transform\x3dtransform;parent.transform\x3dduplicate(transform);\ntransform\x3dnull!\x3d\x3d(_a\x3dparent.transform.as)\x26\x26void 0!\x3d\x3d_a?_a:[void 0,void 0];parent.transform.as\x3d[null!\x3d\x3d(_b\x3dtransform[0])\x26\x26void 0!\x3d\x3d_b?_b:\x22value\x22,null!\x3d\x3d(_c\x3dtransform[1])\x26\x26void 0!\x3d\x3d_c?_c:\x22density\x22];return parent};$jscomp.inherits(DensityTransformNode,DataFlowNode);DensityTransformNode.prototype.clone\x3dfunction(){return new DensityTransformNode(null,duplicate(this.transform))};DensityTransformNode.prototype.dependentFields\x3dfunction(){var _a;return new Set([this.transform.density].concat($jscomp.arrayFromIterable(null!\x3d\x3d\n(_a\x3dthis.transform.groupby)\x26\x26void 0!\x3d\x3d_a?_a:[])))};DensityTransformNode.prototype.producedFields\x3dfunction(){return new Set(this.transform.as)};DensityTransformNode.prototype.hash\x3dfunction(){return\x22DensityTransform \x22+hash(this.transform)};DensityTransformNode.prototype.assemble\x3dfunction(){var _a\x3dthis.transform,density\x3d_a.density;_a\x3d__rest(_a,[\x22density\x22]);return Object.assign({type:\x22kde\x22,field:density},_a)};var FilterInvalidNode\x3dfunction(parent,filter){parent\x3dDataFlowNode.call(this,parent)||this;parent.filter\x3d\nfilter;return parent};$jscomp.inherits(FilterInvalidNode,DataFlowNode);FilterInvalidNode.prototype.clone\x3dfunction(){return new FilterInvalidNode(null,Object.assign({},this.filter))};FilterInvalidNode.make\x3dfunction(parent,model){var mark\x3dmodel.mark;if(\x22filter\x22!\x3d\x3dgetMarkPropOrConfig(\x22invalid\x22,model.markDef,model.config))return null;var filter\x3dmodel.reduceFieldDef(function(aggregator,fieldDef,channel){(channel\x3d!!SCALE_CHANNEL_INDEX[channel]\x26\x26model.getScaleComponent(channel))\x26\x26channel.get(\x22type\x22)in CONTINUOUS_DOMAIN_INDEX\x26\x26\n\x22count\x22!\x3d\x3dfieldDef.aggregate\x26\x26!isPathMark(mark)\x26\x26(aggregator[fieldDef.field]\x3dfieldDef);return aggregator},{});return keys$jscomp$0(filter).length?new FilterInvalidNode(parent,filter):null};FilterInvalidNode.prototype.dependentFields\x3dfunction(){return new Set(keys$jscomp$0(this.filter))};FilterInvalidNode.prototype.producedFields\x3dfunction(){return new Set};FilterInvalidNode.prototype.hash\x3dfunction(){return\x22FilterInvalid \x22+hash(this.filter)};FilterInvalidNode.prototype.assemble\x3dfunction(){var $jscomp$this\x3d\nthis,filters\x3dkeys$jscomp$0(this.filter).reduce(function(vegaFilters,field){field\x3d$jscomp$this.filter[field];var ref\x3dvgField(field,{expr:\x22datum\x22});null!\x3d\x3dfield\x26\x26(\x22temporal\x22\x3d\x3d\x3dfield.type?vegaFilters.push(\x22(isDate(\x22+ref+\x22) || (isValid(\x22+ref+\x22) \\x26\\x26 isFinite(+\x22+ref+\x22)))\x22):\x22quantitative\x22\x3d\x3d\x3dfield.type\x26\x26(vegaFilters.push(\x22isValid(\x22+ref+\x22)\x22),vegaFilters.push(\x22isFinite(+\x22+ref+\x22)\x22)));return vegaFilters},[]);return 0\x3cfilters.length?{type:\x22filter\x22,expr:filters.join(\x22 \\x26\\x26 \x22)}:null};var FlattenTransformNode\x3d\nfunction(parent,transform){parent\x3dDataFlowNode.call(this,parent)||this;parent.transform\x3dtransform;parent.transform\x3dduplicate(transform);transform\x3dparent.transform;var as\x3dvoid 0\x3d\x3d\x3dtransform.as?[]:transform.as;parent.transform.as\x3dtransform.flatten.map(function(f,i){var _a;return null!\x3d\x3d(_a\x3das[i])\x26\x26void 0!\x3d\x3d_a?_a:f});return parent};$jscomp.inherits(FlattenTransformNode,DataFlowNode);FlattenTransformNode.prototype.clone\x3dfunction(){return new FlattenTransformNode(this.parent,duplicate(this.transform))};\nFlattenTransformNode.prototype.dependentFields\x3dfunction(){return new Set(this.transform.flatten)};FlattenTransformNode.prototype.producedFields\x3dfunction(){return new Set(this.transform.as)};FlattenTransformNode.prototype.hash\x3dfunction(){return\x22FlattenTransform \x22+hash(this.transform)};FlattenTransformNode.prototype.assemble\x3dfunction(){var $jscomp$destructuring$var353\x3dthis.transform;return{type:\x22flatten\x22,fields:$jscomp$destructuring$var353.flatten,as:$jscomp$destructuring$var353.as}};var FoldTransformNode\x3d\nfunction(parent,transform){var _a,_b,_c;parent\x3dDataFlowNode.call(this,parent)||this;parent.transform\x3dtransform;parent.transform\x3dduplicate(transform);transform\x3dnull!\x3d\x3d(_a\x3dparent.transform.as)\x26\x26void 0!\x3d\x3d_a?_a:[void 0,void 0];parent.transform.as\x3d[null!\x3d\x3d(_b\x3dtransform[0])\x26\x26void 0!\x3d\x3d_b?_b:\x22key\x22,null!\x3d\x3d(_c\x3dtransform[1])\x26\x26void 0!\x3d\x3d_c?_c:\x22value\x22];return parent};$jscomp.inherits(FoldTransformNode,DataFlowNode);FoldTransformNode.prototype.clone\x3dfunction(){return new FoldTransformNode(null,duplicate(this.transform))};\nFoldTransformNode.prototype.dependentFields\x3dfunction(){return new Set(this.transform.fold)};FoldTransformNode.prototype.producedFields\x3dfunction(){return new Set(this.transform.as)};FoldTransformNode.prototype.hash\x3dfunction(){return\x22FoldTransform \x22+hash(this.transform)};FoldTransformNode.prototype.assemble\x3dfunction(){var $jscomp$destructuring$var354\x3dthis.transform;return{type:\x22fold\x22,fields:$jscomp$destructuring$var354.fold,as:$jscomp$destructuring$var354.as}};var GeoJSONNode\x3dfunction(parent,fields,\ngeojson,signal){parent\x3dDataFlowNode.call(this,parent)||this;parent.fields\x3dfields;parent.geojson\x3dgeojson;parent.signal\x3dsignal;return parent};$jscomp.inherits(GeoJSONNode,DataFlowNode);GeoJSONNode.prototype.clone\x3dfunction(){return new GeoJSONNode(null,duplicate(this.fields),this.geojson,this.signal)};GeoJSONNode.parseAll\x3dfunction(parent,model){if(model.component.projection\x26\x26!model.component.projection.isFit)return parent;for(var geoJsonCounter\x3d0,$jscomp$iter$231\x3d$jscomp.makeIterator([[\x22longitude\x22,\x22latitude\x22],\n[\x22longitude2\x22,\x22latitude2\x22]]),$jscomp$key$coordinates\x3d$jscomp$iter$231.next();!$jscomp$key$coordinates.done;$jscomp$key$coordinates\x3d$jscomp$iter$231.next())if($jscomp$key$coordinates\x3d$jscomp$key$coordinates.value.map(function(channel){channel\x3dgetFieldOrDatumDef(model.encoding[channel]);return isFieldDef(channel)?channel.field:isDatumDef(channel)?{expr:\x22\x22+channel.datum}:isValueDef(channel)?{expr:\x22\x22+channel.value}:void 0}),$jscomp$key$coordinates[0]||$jscomp$key$coordinates[1])parent\x3dnew GeoJSONNode(parent,\n$jscomp$key$coordinates,null,model.getName(\x22geojson_\x22+geoJsonCounter++));model.channelHasField(\x22shape\x22)\x26\x26($jscomp$iter$231\x3dmodel.typedFieldDef(\x22shape\x22),$jscomp$iter$231.type\x3d\x3d\x3dGEOJSON\x26\x26(parent\x3dnew GeoJSONNode(parent,null,$jscomp$iter$231.field,model.getName(\x22geojson_\x22+geoJsonCounter++))));return parent};GeoJSONNode.prototype.dependentFields\x3dfunction(){var _a,fields\x3d(null!\x3d\x3d(_a\x3dthis.fields)\x26\x26void 0!\x3d\x3d_a?_a:[]).filter(isString);return new Set([].concat($jscomp.arrayFromIterable(this.geojson?[this.geojson]:\n[]),$jscomp.arrayFromIterable(fields)))};GeoJSONNode.prototype.producedFields\x3dfunction(){return new Set};GeoJSONNode.prototype.hash\x3dfunction(){return\x22GeoJSON \x22+this.geojson+\x22 \x22+this.signal+\x22 \x22+hash(this.fields)};GeoJSONNode.prototype.assemble\x3dfunction(){return Object.assign(Object.assign(Object.assign({type:\x22geojson\x22},this.fields?{fields:this.fields}:{}),this.geojson?{geojson:this.geojson}:{}),{signal:this.signal})};var GeoPointNode\x3dfunction(parent,projection,fields,as){parent\x3dDataFlowNode.call(this,\nparent)||this;parent.projection\x3dprojection;parent.fields\x3dfields;parent.as\x3das;return parent};$jscomp.inherits(GeoPointNode,DataFlowNode);GeoPointNode.prototype.clone\x3dfunction(){return new GeoPointNode(null,this.projection,duplicate(this.fields),duplicate(this.as))};GeoPointNode.parseAll\x3dfunction(parent,model){if(!model.projectionName())return parent;for(var $jscomp$iter$232\x3d$jscomp.makeIterator([[\x22longitude\x22,\x22latitude\x22],[\x22longitude2\x22,\x22latitude2\x22]]),$jscomp$key$coordinates\x3d$jscomp$iter$232.next();!$jscomp$key$coordinates.done;$jscomp$key$coordinates\x3d\n$jscomp$iter$232.next()){var coordinates\x3d$jscomp$key$coordinates.value;$jscomp$key$coordinates\x3dcoordinates.map(function(channel){channel\x3dgetFieldOrDatumDef(model.encoding[channel]);return isFieldDef(channel)?channel.field:isDatumDef(channel)?{expr:\x22\x22+channel.datum}:isValueDef(channel)?{expr:\x22\x22+channel.value}:void 0});coordinates\x3d\x22longitude2\x22\x3d\x3d\x3dcoordinates[0]?\x222\x22:\x22\x22;if($jscomp$key$coordinates[0]||$jscomp$key$coordinates[1])parent\x3dnew GeoPointNode(parent,model.projectionName(),$jscomp$key$coordinates,\n[model.getName(\x22x\x22+coordinates),model.getName(\x22y\x22+coordinates)])}return parent};GeoPointNode.prototype.dependentFields\x3dfunction(){return new Set(this.fields.filter(isString))};GeoPointNode.prototype.producedFields\x3dfunction(){return new Set(this.as)};GeoPointNode.prototype.hash\x3dfunction(){return\x22Geopoint \x22+this.projection+\x22 \x22+hash(this.fields)+\x22 \x22+hash(this.as)};GeoPointNode.prototype.assemble\x3dfunction(){return{type:\x22geopoint\x22,projection:this.projection,fields:this.fields,as:this.as}};var ImputeNode\x3d\nfunction(parent,transform){parent\x3dDataFlowNode.call(this,parent)||this;parent.transform\x3dtransform;return parent};$jscomp.inherits(ImputeNode,DataFlowNode);ImputeNode.prototype.clone\x3dfunction(){return new ImputeNode(null,duplicate(this.transform))};ImputeNode.prototype.dependentFields\x3dfunction(){var _a;return new Set([this.transform.impute,this.transform.key].concat($jscomp.arrayFromIterable(null!\x3d\x3d(_a\x3dthis.transform.groupby)\x26\x26void 0!\x3d\x3d_a?_a:[])))};ImputeNode.prototype.producedFields\x3dfunction(){return new Set([this.transform.impute])};\nImputeNode.prototype.processSequence\x3dfunction(keyvals){var step\x3dkeyvals.step;return{signal:\x22sequence(\x22+[void 0\x3d\x3d\x3dkeyvals.start?0:keyvals.start,keyvals.stop].concat($jscomp.arrayFromIterable(step?[step]:[])).join(\x22,\x22)+\x22)\x22}};ImputeNode.makeFromTransform\x3dfunction(parent,imputeTransform){return new ImputeNode(parent,imputeTransform)};ImputeNode.makeFromEncoding\x3dfunction(parent,model){var encoding\x3dmodel.encoding,xDef\x3dencoding.x,yDef\x3dencoding.y;if(isFieldDef(xDef)\x26\x26isFieldDef(yDef)){var imputedChannel\x3d\nxDef.impute?xDef:yDef.impute?yDef:void 0;if(void 0\x3d\x3d\x3dimputedChannel)return;xDef\x3dxDef.impute?yDef:yDef.impute?xDef:void 0;var $jscomp$destructuring$var356\x3dimputedChannel.impute;yDef\x3d$jscomp$destructuring$var356.method;var value\x3d$jscomp$destructuring$var356.value,frame\x3d$jscomp$destructuring$var356.frame;$jscomp$destructuring$var356\x3d$jscomp$destructuring$var356.keyvals;model\x3dpathGroupingFields(model.mark,encoding);return new ImputeNode(parent,Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({impute:imputedChannel.field,\nkey:xDef.field},yDef?{method:yDef}:{}),void 0!\x3d\x3dvalue?{value:value}:{}),frame?{frame:frame}:{}),void 0!\x3d\x3d$jscomp$destructuring$var356?{keyvals:$jscomp$destructuring$var356}:{}),model.length?{groupby:model}:{}))}return null};ImputeNode.prototype.hash\x3dfunction(){return\x22Impute \x22+hash(this.transform)};ImputeNode.prototype.assemble\x3dfunction(){var $jscomp$destructuring$var357\x3dthis.transform,impute\x3d$jscomp$destructuring$var357.impute,keyvals\x3d$jscomp$destructuring$var357.keyvals,method\x3d$jscomp$destructuring$var357.method,\ngroupby\x3d$jscomp$destructuring$var357.groupby,value\x3d$jscomp$destructuring$var357.value,frame\x3dvoid 0\x3d\x3d\x3d$jscomp$destructuring$var357.frame?[null,null]:$jscomp$destructuring$var357.frame;$jscomp$destructuring$var357\x3dObject.assign(Object.assign(Object.assign(Object.assign({type:\x22impute\x22,field:impute,key:$jscomp$destructuring$var357.key},keyvals?{keyvals:void 0!\x3d\x3d(null\x3d\x3d\x3dkeyvals||void 0\x3d\x3d\x3dkeyvals?void 0:keyvals.stop)?this.processSequence(keyvals):keyvals}:{}),{method:\x22value\x22}),groupby?{groupby:groupby}:\n{}),{value:method\x26\x26\x22value\x22!\x3d\x3dmethod?null:value});return method\x26\x26\x22value\x22!\x3d\x3dmethod?(method\x3dObject.assign({type:\x22window\x22,as:[\x22imputed_\x22+impute+\x22_value\x22],ops:[method],fields:[impute],frame:frame,ignorePeers:!1},groupby?{groupby:groupby}:{}),[$jscomp$destructuring$var357,method,{type:\x22formula\x22,expr:\x22datum.\x22+impute+\x22 \\x3d\\x3d\\x3d null ? datum.imputed_\x22+impute+\x22_value : datum.\x22+impute,as:impute}]):[$jscomp$destructuring$var357]};var LoessTransformNode\x3dfunction(parent,transform){var _a,_b,_c;parent\x3dDataFlowNode.call(this,\nparent)||this;parent.transform\x3dtransform;parent.transform\x3dduplicate(transform);var specifiedAs\x3dnull!\x3d\x3d(_a\x3dparent.transform.as)\x26\x26void 0!\x3d\x3d_a?_a:[void 0,void 0];parent.transform.as\x3d[null!\x3d\x3d(_b\x3dspecifiedAs[0])\x26\x26void 0!\x3d\x3d_b?_b:transform.on,null!\x3d\x3d(_c\x3dspecifiedAs[1])\x26\x26void 0!\x3d\x3d_c?_c:transform.loess];return parent};$jscomp.inherits(LoessTransformNode,DataFlowNode);LoessTransformNode.prototype.clone\x3dfunction(){return new LoessTransformNode(null,duplicate(this.transform))};LoessTransformNode.prototype.dependentFields\x3d\nfunction(){var _a;return new Set([this.transform.loess,this.transform.on].concat($jscomp.arrayFromIterable(null!\x3d\x3d(_a\x3dthis.transform.groupby)\x26\x26void 0!\x3d\x3d_a?_a:[])))};LoessTransformNode.prototype.producedFields\x3dfunction(){return new Set(this.transform.as)};LoessTransformNode.prototype.hash\x3dfunction(){return\x22LoessTransform \x22+hash(this.transform)};LoessTransformNode.prototype.assemble\x3dfunction(){var _a\x3dthis.transform,loess\x3d_a.loess,on\x3d_a.on;_a\x3d__rest(_a,[\x22loess\x22,\x22on\x22]);return Object.assign({type:\x22loess\x22,\nx:on,y:loess},_a)};var LookupNode\x3dfunction(parent,transform,secondary){parent\x3dDataFlowNode.call(this,parent)||this;parent.transform\x3dtransform;parent.secondary\x3dsecondary;return parent};$jscomp.inherits(LookupNode,DataFlowNode);LookupNode.prototype.clone\x3dfunction(){return new LookupNode(null,duplicate(this.transform),this.secondary)};LookupNode.make\x3dfunction(parent,model,transform,counter){var sources\x3dmodel.component.data.sources,from\x3dtransform.from,fromOutputNode\x3dnull;if(\x22data\x22in from)fromOutputNode\x3d\nfindSource(from.data,sources),fromOutputNode||(fromOutputNode\x3dnew SourceNode(from.data),sources.push(fromOutputNode)),counter\x3dmodel.getName(\x22lookup_\x22+counter),fromOutputNode\x3dnew OutputNode(fromOutputNode,counter,\x22lookup\x22,model.component.data.outputNodeRefCounts),model.component.data.outputNodes[counter]\x3dfromOutputNode;else if(\x22selection\x22in from\x26\x26(counter\x3dfrom.selection,transform\x3dObject.assign({as:counter},transform),fromOutputNode\x3dmodel.getSelectionComponent(varName(counter),counter).materialized,\n!fromOutputNode))throw Error(\x27Cannot define and lookup the \x22\x27+counter+\x27\x22 selection in the same view. Try moving the lookup into a second, layered view?\x27);return new LookupNode(parent,transform,fromOutputNode.getSource())};LookupNode.prototype.dependentFields\x3dfunction(){return new Set([this.transform.lookup])};LookupNode.prototype.producedFields\x3dfunction(){return new Set(this.transform.as?array$jscomp$0(this.transform.as):this.transform.from.fields)};LookupNode.prototype.hash\x3dfunction(){return\x22Lookup \x22+\nhash({transform:this.transform,secondary:this.secondary})};LookupNode.prototype.assemble\x3dfunction(){if(this.transform.from.fields)var foreign\x3dObject.assign({values:this.transform.from.fields},this.transform.as?{as:array$jscomp$0(this.transform.as)}:{});else foreign\x3dthis.transform.as,isString(foreign)||(warn(\x27If \x22from.fields\x22 is not specified, \x22as\x22 has to be a string that specifies the key to be used for the data from the secondary source.\x27),foreign\x3d\x22_lookup\x22),foreign\x3d{as:[foreign]};return Object.assign(Object.assign({type:\x22lookup\x22,\nfrom:this.secondary,key:this.transform.from.key,fields:[this.transform.lookup]},foreign),this.transform.default?{default:this.transform.default}:{})};var QuantileTransformNode\x3dfunction(parent,transform){var _a,_b,_c;parent\x3dDataFlowNode.call(this,parent)||this;parent.transform\x3dtransform;parent.transform\x3dduplicate(transform);transform\x3dnull!\x3d\x3d(_a\x3dparent.transform.as)\x26\x26void 0!\x3d\x3d_a?_a:[void 0,void 0];parent.transform.as\x3d[null!\x3d\x3d(_b\x3dtransform[0])\x26\x26void 0!\x3d\x3d_b?_b:\x22prob\x22,null!\x3d\x3d(_c\x3dtransform[1])\x26\x26void 0!\x3d\x3d\n_c?_c:\x22value\x22];return parent};$jscomp.inherits(QuantileTransformNode,DataFlowNode);QuantileTransformNode.prototype.clone\x3dfunction(){return new QuantileTransformNode(null,duplicate(this.transform))};QuantileTransformNode.prototype.dependentFields\x3dfunction(){var _a;return new Set([this.transform.quantile].concat($jscomp.arrayFromIterable(null!\x3d\x3d(_a\x3dthis.transform.groupby)\x26\x26void 0!\x3d\x3d_a?_a:[])))};QuantileTransformNode.prototype.producedFields\x3dfunction(){return new Set(this.transform.as)};QuantileTransformNode.prototype.hash\x3d\nfunction(){return\x22QuantileTransform \x22+hash(this.transform)};QuantileTransformNode.prototype.assemble\x3dfunction(){var _a\x3dthis.transform,quantile\x3d_a.quantile;_a\x3d__rest(_a,[\x22quantile\x22]);return Object.assign({type:\x22quantile\x22,field:quantile},_a)};var RegressionTransformNode\x3dfunction(parent,transform){var _a,_b,_c;parent\x3dDataFlowNode.call(this,parent)||this;parent.transform\x3dtransform;parent.transform\x3dduplicate(transform);var specifiedAs\x3dnull!\x3d\x3d(_a\x3dparent.transform.as)\x26\x26void 0!\x3d\x3d_a?_a:[void 0,void 0];parent.transform.as\x3d\n[null!\x3d\x3d(_b\x3dspecifiedAs[0])\x26\x26void 0!\x3d\x3d_b?_b:transform.on,null!\x3d\x3d(_c\x3dspecifiedAs[1])\x26\x26void 0!\x3d\x3d_c?_c:transform.regression];return parent};$jscomp.inherits(RegressionTransformNode,DataFlowNode);RegressionTransformNode.prototype.clone\x3dfunction(){return new RegressionTransformNode(null,duplicate(this.transform))};RegressionTransformNode.prototype.dependentFields\x3dfunction(){var _a;return new Set([this.transform.regression,this.transform.on].concat($jscomp.arrayFromIterable(null!\x3d\x3d(_a\x3dthis.transform.groupby)\x26\x26\nvoid 0!\x3d\x3d_a?_a:[])))};RegressionTransformNode.prototype.producedFields\x3dfunction(){return new Set(this.transform.as)};RegressionTransformNode.prototype.hash\x3dfunction(){return\x22RegressionTransform \x22+hash(this.transform)};RegressionTransformNode.prototype.assemble\x3dfunction(){var _a\x3dthis.transform,regression\x3d_a.regression,on\x3d_a.on;_a\x3d__rest(_a,[\x22regression\x22,\x22on\x22]);return Object.assign({type:\x22regression\x22,x:on,y:regression},_a)};var PivotTransformNode\x3dfunction(parent,transform){parent\x3dDataFlowNode.call(this,\nparent)||this;parent.transform\x3dtransform;return parent};$jscomp.inherits(PivotTransformNode,DataFlowNode);PivotTransformNode.prototype.clone\x3dfunction(){return new PivotTransformNode(null,duplicate(this.transform))};PivotTransformNode.prototype.addDimensions\x3dfunction(fields){var _a;this.transform.groupby\x3dunique((null!\x3d\x3d(_a\x3dthis.transform.groupby)\x26\x26void 0!\x3d\x3d_a?_a:[]).concat(fields),function(d){return d})};PivotTransformNode.prototype.producedFields\x3dfunction(){};PivotTransformNode.prototype.dependentFields\x3d\nfunction(){var _a;return new Set([this.transform.pivot,this.transform.value].concat($jscomp.arrayFromIterable(null!\x3d\x3d(_a\x3dthis.transform.groupby)\x26\x26void 0!\x3d\x3d_a?_a:[])))};PivotTransformNode.prototype.hash\x3dfunction(){return\x22PivotTransform \x22+hash(this.transform)};PivotTransformNode.prototype.assemble\x3dfunction(){var $jscomp$destructuring$var362\x3dthis.transform,groupby\x3d$jscomp$destructuring$var362.groupby,limit\x3d$jscomp$destructuring$var362.limit,op\x3d$jscomp$destructuring$var362.op;return Object.assign(Object.assign(Object.assign({type:\x22pivot\x22,\nfield:$jscomp$destructuring$var362.pivot,value:$jscomp$destructuring$var362.value},void 0!\x3d\x3dlimit?{limit:limit}:{}),void 0!\x3d\x3dop?{op:op}:{}),void 0!\x3d\x3dgroupby?{groupby:groupby}:{})};var SampleTransformNode\x3dfunction(parent,transform){parent\x3dDataFlowNode.call(this,parent)||this;parent.transform\x3dtransform;return parent};$jscomp.inherits(SampleTransformNode,DataFlowNode);SampleTransformNode.prototype.clone\x3dfunction(){return new SampleTransformNode(null,duplicate(this.transform))};SampleTransformNode.prototype.dependentFields\x3d\nfunction(){return new Set};SampleTransformNode.prototype.producedFields\x3dfunction(){return new Set};SampleTransformNode.prototype.hash\x3dfunction(){return\x22SampleTransform \x22+hash(this.transform)};SampleTransformNode.prototype.assemble\x3dfunction(){return{type:\x22sample\x22,size:this.transform.sample}};var FacetModel\x3dfunction(spec,parent,parentGivenName,config){parent\x3dModelWithField.call(this,spec,\x22facet\x22,parent,parentGivenName,config,spec.resolve)||this;parent.child\x3dbuildModel(spec.spec,parent,parent.getName(\x22child\x22),\nvoid 0,config);parent.children\x3d[parent.child];parent.facet\x3dparent.initFacet(spec.facet,config);return parent};$jscomp.inherits(FacetModel,ModelWithField);FacetModel.prototype.initFacet\x3dfunction(facet,config){return isFacetMapping(facet)?reduce(facet,function(normalizedFacet,fieldDef,channel){if(!contains([\x22row\x22,\x22column\x22],channel))return warn(incompatibleChannel(channel,\x22facet\x22)),normalizedFacet;if(void 0\x3d\x3d\x3dfieldDef.field)return warn(emptyFieldDef(fieldDef,channel)),normalizedFacet;normalizedFacet[channel]\x3d\ninitChannelDef(fieldDef,channel,config);return normalizedFacet},{}):{facet:initChannelDef(facet,\x22facet\x22,config)}};FacetModel.prototype.channelHasField\x3dfunction(channel){return!!this.facet[channel]};FacetModel.prototype.fieldDef\x3dfunction(channel){return this.facet[channel]};FacetModel.prototype.parseData\x3dfunction(){this.component.data\x3dparseData(this);this.child.parseData()};FacetModel.prototype.parseLayoutSize\x3dfunction(){parseChildrenLayoutSize(this)};FacetModel.prototype.parseSelections\x3dfunction(){this.child.parseSelections();\nthis.component.selection\x3dthis.child.component.selection};FacetModel.prototype.parseMarkGroup\x3dfunction(){this.child.parseMarkGroup()};FacetModel.prototype.parseAxesAndHeaders\x3dfunction(){this.child.parseAxesAndHeaders();for(var $jscomp$inline_5219\x3d$jscomp.makeIterator(FACET_CHANNELS),$jscomp$key$channel\x3d$jscomp$inline_5219.next();!$jscomp$key$channel.done;$jscomp$key$channel\x3d$jscomp$inline_5219.next()){var _a\x3dvoid 0;$jscomp$key$channel\x3d$jscomp$key$channel.value;var facet\x3dthis.facet,config\x3dthis.config,\nchild\x3dthis.child,component\x3dthis.component;if(this.channelHasField($jscomp$key$channel)){facet\x3dfacet[$jscomp$key$channel];var titleConfig\x3dgetHeaderProperty(\x22title\x22,null,config,$jscomp$key$channel);titleConfig\x3dtitle$jscomp$0(facet,config,{allowDisabling:!0,includeDefault:void 0\x3d\x3d\x3dtitleConfig||!!titleConfig});child.component.layoutHeaders[$jscomp$key$channel].title\x26\x26(titleConfig\x3disArray(titleConfig)?titleConfig.join(\x22, \x22):titleConfig,titleConfig+\x3d\x22 / \x22+child.component.layoutHeaders[$jscomp$key$channel].title,\nchild.component.layoutHeaders[$jscomp$key$channel].title\x3dnull);child\x3dgetHeaderProperty(\x22labelOrient\x22,facet,config,$jscomp$key$channel);var header\x3dnull!\x3d\x3d(_a\x3dfacet.header)\x26\x26void 0!\x3d\x3d_a?_a:{};_a\x3dgetFirstDefined(header.labels,config.header.labels,!0);config\x3dcontains([\x22bottom\x22,\x22right\x22],child)?\x22footer\x22:\x22header\x22;child\x3d{};component.layoutHeaders[$jscomp$key$channel]\x3d(child.title\x3dtitleConfig,child.facetFieldDef\x3dfacet,child[config]\x3d\x22facet\x22\x3d\x3d\x3d$jscomp$key$channel?[]:[makeHeaderComponent(this,$jscomp$key$channel,\n_a)],child)}}mergeChildAxis(this,\x22x\x22);mergeChildAxis(this,\x22y\x22)};FacetModel.prototype.assembleSelectionTopLevelSignals\x3dfunction(signals){return this.child.assembleSelectionTopLevelSignals(signals)};FacetModel.prototype.assembleSignals\x3dfunction(){this.child.assembleSignals();return[]};FacetModel.prototype.assembleSelectionData\x3dfunction(data){return this.child.assembleSelectionData(data)};FacetModel.prototype.getHeaderLayoutMixins\x3dfunction(){for(var _a,_b,_c,layoutMixins\x3d{},$jscomp$iter$249\x3d$jscomp.makeIterator(FACET_CHANNELS),\n$jscomp$key$channel\x3d$jscomp$iter$249.next();!$jscomp$key$channel.done;$jscomp$key$channel\x3d$jscomp$iter$249.next()){$jscomp$key$channel\x3d$jscomp$key$channel.value;for(var $jscomp$iter$248\x3d$jscomp.makeIterator(HEADER_TYPES),$jscomp$key$headerType\x3d$jscomp$iter$248.next();!$jscomp$key$headerType.done;$jscomp$key$headerType\x3d$jscomp$iter$248.next()){var headerType\x3d$jscomp$key$headerType.value;$jscomp$key$headerType\x3dthis.component.layoutHeaders[$jscomp$key$channel];var headerComponent\x3d$jscomp$key$headerType[headerType],\nfacetFieldDef\x3d$jscomp$key$headerType.facetFieldDef;facetFieldDef\x26\x26(facetFieldDef\x3dgetHeaderProperty(\x22titleOrient\x22,facetFieldDef,this.config,$jscomp$key$channel),contains([\x22right\x22,\x22bottom\x22],facetFieldDef)\x26\x26(facetFieldDef\x3dgetHeaderChannel($jscomp$key$channel,facetFieldDef),layoutMixins.titleAnchor\x3dnull!\x3d\x3d(_a\x3dlayoutMixins.titleAnchor)\x26\x26void 0!\x3d\x3d_a?_a:{},layoutMixins.titleAnchor[facetFieldDef]\x3d\x22end\x22));if(null\x3d\x3d\x3dheaderComponent||void 0\x3d\x3d\x3dheaderComponent?0:headerComponent[0])headerComponent\x3d\x22row\x22\x3d\x3d\x3d$jscomp$key$channel?\n\x22height\x22:\x22width\x22,headerType\x3d\x22header\x22\x3d\x3d\x3dheaderType?\x22headerBand\x22:\x22footerBand\x22,\x22facet\x22\x3d\x3d\x3d$jscomp$key$channel||this.child.component.layoutSize.get(headerComponent)||(layoutMixins[headerType]\x3dnull!\x3d\x3d(_b\x3dlayoutMixins[headerType])\x26\x26void 0!\x3d\x3d_b?_b:{},layoutMixins[headerType][$jscomp$key$channel]\x3d.5),$jscomp$key$headerType.title\x26\x26(layoutMixins.offset\x3dnull!\x3d\x3d(_c\x3dlayoutMixins.offset)\x26\x26void 0!\x3d\x3d_c?_c:{},layoutMixins.offset[\x22row\x22\x3d\x3d\x3d$jscomp$key$channel?\x22rowTitle\x22:\x22columnTitle\x22]\x3d10)}}return layoutMixins};FacetModel.prototype.assembleDefaultLayout\x3d\nfunction(){var $jscomp$destructuring$var370\x3dthis.facet,column\x3d$jscomp$destructuring$var370.column;$jscomp$destructuring$var370\x3d$jscomp$destructuring$var370.row;var columns\x3dcolumn?this.columnDistinctSignal():$jscomp$destructuring$var370?1:void 0,align\x3d\x22all\x22;$jscomp$destructuring$var370||\x22independent\x22!\x3d\x3dthis.component.resolve.scale.x?column||\x22independent\x22!\x3d\x3dthis.component.resolve.scale.y||(align\x3d\x22none\x22):align\x3d\x22none\x22;return Object.assign(Object.assign(Object.assign({},this.getHeaderLayoutMixins()),columns?\n{columns:columns}:{}),{bounds:\x22full\x22,align:align})};FacetModel.prototype.assembleLayoutSignals\x3dfunction(){return this.child.assembleLayoutSignals()};FacetModel.prototype.columnDistinctSignal\x3dfunction(){if(!(this.parent\x26\x26this.parent instanceof FacetModel))return{signal:\x22length(data(\x27\x22+this.getName(\x22column_domain\x22)+\x22\x27))\x22}};FacetModel.prototype.assembleGroup\x3dfunction(signals){return this.parent\x26\x26this.parent instanceof FacetModel?Object.assign(Object.assign({},this.channelHasField(\x22column\x22)?{encode:{update:{columns:{field:vgField(this.facet.column,\n{prefix:\x22distinct\x22})}}}}:{}),ModelWithField.prototype.assembleGroup.call(this,signals)):ModelWithField.prototype.assembleGroup.call(this,signals)};FacetModel.prototype.getCardinalityAggregateForChild\x3dfunction(){var fields\x3d[],ops\x3d[],as\x3d[];if(this.child instanceof FacetModel){if(this.child.channelHasField(\x22column\x22)){var field$538\x3dvgField(this.child.facet.column);fields.push(field$538);ops.push(\x22distinct\x22);as.push(\x22distinct_\x22+field$538)}}else{field$538\x3d$jscomp.makeIterator(POSITION_SCALE_CHANNELS);for(var $jscomp$key$channel\x3d\nfield$538.next();!$jscomp$key$channel.done;$jscomp$key$channel\x3dfield$538.next()){$jscomp$key$channel\x3d$jscomp$key$channel.value;var childScaleComponent\x3dthis.child.component.scales[$jscomp$key$channel];if(childScaleComponent\x26\x26!childScaleComponent.merged){var type\x3dchildScaleComponent.get(\x22type\x22);childScaleComponent\x3dchildScaleComponent.get(\x22range\x22);type in DISCRETE_DOMAIN_INDEX\x26\x26isVgRangeStep(childScaleComponent)\x26\x26(type\x3dassembleDomain(this.child,$jscomp$key$channel),(type\x3dgetFieldFromDomain(type))?(fields.push(type),\nops.push(\x22distinct\x22),as.push(\x22distinct_\x22+type)):warn(\x22Unknown field for \x22+$jscomp$key$channel+\x22. Cannot calculate view size.\x22))}}}return{fields:fields,ops:ops,as:as}};FacetModel.prototype.assembleFacet\x3dfunction(){var $jscomp$destructuring$var371\x3dthis.component.data.facetRoot,name\x3d$jscomp$destructuring$var371.name;$jscomp$destructuring$var371\x3d$jscomp$destructuring$var371.data;var $jscomp$destructuring$var372\x3dthis.facet,row\x3d$jscomp$destructuring$var372.row,column\x3d$jscomp$destructuring$var372.column,\n$jscomp$destructuring$var373\x3dthis.getCardinalityAggregateForChild();$jscomp$destructuring$var372\x3d$jscomp$destructuring$var373.fields;var ops\x3d$jscomp$destructuring$var373.ops;$jscomp$destructuring$var373\x3d$jscomp$destructuring$var373.as;for(var groupby\x3d[],$jscomp$iter$251\x3d$jscomp.makeIterator(FACET_CHANNELS),$jscomp$key$channel\x3d$jscomp$iter$251.next();!$jscomp$key$channel.done;$jscomp$key$channel\x3d$jscomp$iter$251.next()){var channel\x3d$jscomp$key$channel.value;if($jscomp$key$channel\x3dthis.facet[channel]){groupby.push(vgField($jscomp$key$channel));\nvar $jscomp$destructuring$var374\x3d$jscomp$key$channel,sort\x3d$jscomp$destructuring$var374.sort;isBinning($jscomp$destructuring$var374.bin)\x26\x26groupby.push(vgField($jscomp$key$channel,{binSuffix:\x22end\x22}));isSortField(sort)?($jscomp$destructuring$var374\x3dsort,channel\x3d$jscomp$destructuring$var374.field,$jscomp$destructuring$var374\x3dvoid 0\x3d\x3d\x3d$jscomp$destructuring$var374.op?\x22min\x22:$jscomp$destructuring$var374.op,$jscomp$key$channel\x3dfacetSortFieldName($jscomp$key$channel,sort),row\x26\x26column?($jscomp$destructuring$var372.push($jscomp$key$channel),\nops.push(\x22max\x22)):($jscomp$destructuring$var372.push(channel),ops.push($jscomp$destructuring$var374)),$jscomp$destructuring$var373.push($jscomp$key$channel)):isArray(sort)\x26\x26($jscomp$key$channel\x3dsortArrayIndexField($jscomp$key$channel,channel),$jscomp$destructuring$var372.push($jscomp$key$channel),ops.push(\x22max\x22),$jscomp$destructuring$var373.push($jscomp$key$channel))}}row\x3d!!row\x26\x26!!column;return Object.assign({name:name,data:$jscomp$destructuring$var371,groupby:groupby},row||0\x3c$jscomp$destructuring$var372.length?\n{aggregate:Object.assign(Object.assign({},row?{cross:row}:{}),$jscomp$destructuring$var372.length?{fields:$jscomp$destructuring$var372,ops:ops,as:$jscomp$destructuring$var373}:{})}:{})};FacetModel.prototype.facetSortFields\x3dfunction(channel){var fieldDef\x3dthis.facet[channel];return fieldDef?isSortField(fieldDef.sort)?[facetSortFieldName(fieldDef,fieldDef.sort,{expr:\x22datum\x22})]:isArray(fieldDef.sort)?[sortArrayIndexField(fieldDef,channel,{expr:\x22datum\x22})]:[vgField(fieldDef,{expr:\x22datum\x22})]:[]};FacetModel.prototype.facetSortOrder\x3d\nfunction(channel){return(channel\x3dthis.facet[channel])?(channel\x3dchannel.sort,[(isSortField(channel)?channel.order:!isArray(channel)\x26\x26channel)||\x22ascending\x22]):[]};FacetModel.prototype.assembleLabelTitle\x3dfunction(){var facet\x3dthis.facet,config\x3dthis.config;if(facet.facet)return assembleLabelTitle(facet.facet,\x22facet\x22,config);for(var ORTHOGONAL_ORIENT\x3d{row:[\x22top\x22,\x22bottom\x22],column:[\x22left\x22,\x22right\x22]},$jscomp$iter$252\x3d$jscomp.makeIterator(HEADER_CHANNELS),$jscomp$key$channel\x3d$jscomp$iter$252.next();!$jscomp$key$channel.done;$jscomp$key$channel\x3d\n$jscomp$iter$252.next())if($jscomp$key$channel\x3d$jscomp$key$channel.value,facet[$jscomp$key$channel]){var labelOrient\x3dgetHeaderProperty(\x22labelOrient\x22,facet[$jscomp$key$channel],config,$jscomp$key$channel);if(contains(ORTHOGONAL_ORIENT[$jscomp$key$channel],labelOrient))return assembleLabelTitle(facet[$jscomp$key$channel],$jscomp$key$channel,config)}};FacetModel.prototype.assembleMarks\x3dfunction(){var $jscomp$this\x3dthis,child\x3dthis.child,data\x3dassembleFacetData(this.component.data.facetRoot),encodeEntry\x3d\nchild.assembleGroupEncodeEntry(!1),title\x3dthis.assembleLabelTitle()||child.assembleTitle(),style\x3dchild.assembleGroupStyle();return[Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({name:this.getName(\x22cell\x22),type:\x22group\x22},title?{title:title}:{}),style?{style:style}:{}),{from:{facet:this.assembleFacet()},sort:{field:FACET_CHANNELS.map(function(c){return $jscomp$this.facetSortFields(c)}).flat(),order:FACET_CHANNELS.map(function(c){return $jscomp$this.facetSortOrder(c)}).flat()}}),\n0\x3cdata.length?{data:data}:{}),encodeEntry?{encode:{update:encodeEntry}}:{}),child.assembleGroup(assembleFacetSignals(this,[])))]};FacetModel.prototype.getMapping\x3dfunction(){return this.facet};var ConcatModel\x3dfunction(spec,parent,parentGivenName,config){var _a,_b,_c,_d;var $jscomp$super$this\x3dModel.call(this,spec,\x22concat\x22,parent,parentGivenName,config,spec.resolve)||this;\x22shared\x22!\x3d\x3d(null\x3d\x3d\x3d(_b\x3dnull\x3d\x3d\x3d(_a\x3dspec.resolve)||void 0\x3d\x3d\x3d_a?void 0:_a.axis)||void 0\x3d\x3d\x3d_b?void 0:_b.x)\x26\x26\x22shared\x22!\x3d\x3d(null\x3d\x3d\x3d(_d\x3dnull\x3d\x3d\x3d\n(_c\x3dspec.resolve)||void 0\x3d\x3d\x3d_c?void 0:_c.axis)||void 0\x3d\x3d\x3d_d?void 0:_d.y)||warn(\x22Axes cannot be shared in concatenated or repeated views yet (https://github.com/vega/vega-lite/issues/2415).\x22);$jscomp$super$this.children\x3d$jscomp$super$this.getChildren(spec).map(function(child,i){return buildModel(child,$jscomp$super$this,$jscomp$super$this.getName(\x22concat_\x22+i),void 0,config)});return $jscomp$super$this};$jscomp.inherits(ConcatModel,Model);ConcatModel.prototype.parseData\x3dfunction(){this.component.data\x3d\nparseData(this);for(var $jscomp$iter$257\x3d$jscomp.makeIterator(this.children),$jscomp$key$child\x3d$jscomp$iter$257.next();!$jscomp$key$child.done;$jscomp$key$child\x3d$jscomp$iter$257.next())$jscomp$key$child.value.parseData()};ConcatModel.prototype.parseSelections\x3dfunction(){this.component.selection\x3d{};for(var $jscomp$iter$259\x3d$jscomp.makeIterator(this.children),$jscomp$key$child\x3d$jscomp$iter$259.next();!$jscomp$key$child.done;$jscomp$key$child\x3d$jscomp$iter$259.next()){$jscomp$key$child\x3d$jscomp$key$child.value;\n$jscomp$key$child.parseSelections();for(var $jscomp$iter$258\x3d$jscomp.makeIterator(keys$jscomp$0($jscomp$key$child.component.selection)),$jscomp$key$key\x3d$jscomp$iter$258.next();!$jscomp$key$key.done;$jscomp$key$key\x3d$jscomp$iter$258.next())$jscomp$key$key\x3d$jscomp$key$key.value,this.component.selection[$jscomp$key$key]\x3d$jscomp$key$child.component.selection[$jscomp$key$key]}};ConcatModel.prototype.parseMarkGroup\x3dfunction(){for(var $jscomp$iter$260\x3d$jscomp.makeIterator(this.children),$jscomp$key$child\x3d\n$jscomp$iter$260.next();!$jscomp$key$child.done;$jscomp$key$child\x3d$jscomp$iter$260.next())$jscomp$key$child.value.parseMarkGroup()};ConcatModel.prototype.parseAxesAndHeaders\x3dfunction(){for(var $jscomp$iter$261\x3d$jscomp.makeIterator(this.children),$jscomp$key$child\x3d$jscomp$iter$261.next();!$jscomp$key$child.done;$jscomp$key$child\x3d$jscomp$iter$261.next())$jscomp$key$child.value.parseAxesAndHeaders()};ConcatModel.prototype.getChildren\x3dfunction(spec){return\x22vconcat\x22in spec?spec.vconcat:\x22hconcat\x22in spec?\nspec.hconcat:spec.concat};ConcatModel.prototype.parseLayoutSize\x3dfunction(){parseChildrenLayoutSize(this);var heightType\x3dvoid 0\x3d\x3d\x3dthis.layout.columns?\x22height\x22:\x22childHeight\x22;parseNonUnitLayoutSizeForChannel(this,1\x3d\x3d\x3dthis.layout.columns?\x22width\x22:\x22childWidth\x22);parseNonUnitLayoutSizeForChannel(this,heightType)};ConcatModel.prototype.parseAxisGroup\x3dfunction(){return null};ConcatModel.prototype.assembleSelectionTopLevelSignals\x3dfunction(signals){return this.children.reduce(function(sg,child){return child.assembleSelectionTopLevelSignals(sg)},\nsignals)};ConcatModel.prototype.assembleSignals\x3dfunction(){this.children.forEach(function(child){return child.assembleSignals()});return[]};ConcatModel.prototype.assembleLayoutSignals\x3dfunction(){for(var layoutSignals\x3dassembleLayoutSignals(this),$jscomp$iter$262\x3d$jscomp.makeIterator(this.children),$jscomp$key$child\x3d$jscomp$iter$262.next();!$jscomp$key$child.done;$jscomp$key$child\x3d$jscomp$iter$262.next())layoutSignals.push.apply(layoutSignals,$jscomp.arrayFromIterable($jscomp$key$child.value.assembleLayoutSignals()));\nreturn layoutSignals};ConcatModel.prototype.assembleSelectionData\x3dfunction(data){return this.children.reduce(function(db,child){return child.assembleSelectionData(db)},data)};ConcatModel.prototype.assembleMarks\x3dfunction(){return this.children.map(function(child){var title\x3dchild.assembleTitle(),style\x3dchild.assembleGroupStyle(),encodeEntry\x3dchild.assembleGroupEncodeEntry(!1);return Object.assign(Object.assign(Object.assign(Object.assign({type:\x22group\x22,name:child.getName(\x22group\x22)},title?{title:title}:\n{}),style?{style:style}:{}),encodeEntry?{encode:{update:encodeEntry}}:{}),child.assembleGroup())})};ConcatModel.prototype.assembleDefaultLayout\x3dfunction(){var columns\x3dthis.layout.columns;return Object.assign(Object.assign({},null!\x3dcolumns?{columns:columns}:{}),{bounds:\x22full\x22,align:\x22each\x22})};var AXIS_COMPONENT_PROPERTIES_INDEX\x3dObject.assign(Object.assign({disable:1,gridScale:1,scale:1},COMMON_AXIS_PROPERTIES_INDEX),{labelExpr:1,encode:1}),AXIS_COMPONENT_PROPERTIES\x3dkeys$jscomp$0(AXIS_COMPONENT_PROPERTIES_INDEX),\nAxisComponent\x3dfunction(explicit,implicit,mainExtracted){explicit\x3dvoid 0\x3d\x3d\x3dexplicit?{}:explicit;implicit\x3dvoid 0\x3d\x3d\x3dimplicit?{}:implicit;mainExtracted\x3dvoid 0\x3d\x3d\x3dmainExtracted?!1:mainExtracted;var $jscomp$super$this\x3dSplit.call(this)||this;$jscomp$super$this.explicit\x3dexplicit;$jscomp$super$this.implicit\x3dimplicit;$jscomp$super$this.mainExtracted\x3dmainExtracted;return $jscomp$super$this};$jscomp.inherits(AxisComponent,Split);AxisComponent.prototype.clone\x3dfunction(){return new AxisComponent(duplicate(this.explicit),\nduplicate(this.implicit),this.mainExtracted)};AxisComponent.prototype.hasAxisPart\x3dfunction(part){if(\x22axis\x22\x3d\x3d\x3dpart)return!0;if(\x22grid\x22\x3d\x3d\x3dpart||\x22title\x22\x3d\x3d\x3dpart)return!!this.get(part);part\x3dthis.get(part);return!(!1\x3d\x3d\x3dpart||null\x3d\x3d\x3dpart)};AxisComponent.prototype.hasOrientSignalRef\x3dfunction(){return isSignalRef(this.explicit.orient)};var OPPOSITE_ORIENT\x3d{bottom:\x22top\x22,top:\x22bottom\x22,left:\x22right\x22,right:\x22left\x22},propsToAlwaysIncludeConfig\x3dnew Set(\x22grid translate format formatType orient labelExpr tickCount position tickMinStep\x22.split(\x22 \x22)),\nmarkCompiler\x3d{arc:{vgMark:\x22arc\x22,encodeEntry:function(model){return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},baseEncodeEntry(model,{align:\x22ignore\x22,baseline:\x22ignore\x22,color:\x22include\x22,size:\x22ignore\x22,orient:\x22ignore\x22,theta:\x22ignore\x22})),pointPosition(\x22x\x22,model,{defaultPos:\x22mid\x22})),pointPosition(\x22y\x22,model,{defaultPos:\x22mid\x22})),rectPosition(model,\x22radius\x22,\x22arc\x22)),rectPosition(model,\x22theta\x22,\x22arc\x22))}},area:{vgMark:\x22area\x22,encodeEntry:function(model){return Object.assign(Object.assign(Object.assign(Object.assign({},\nbaseEncodeEntry(model,{align:\x22ignore\x22,baseline:\x22ignore\x22,color:\x22include\x22,orient:\x22include\x22,size:\x22ignore\x22,theta:\x22ignore\x22})),pointOrRangePosition(\x22x\x22,model,{defaultPos:\x22zeroOrMin\x22,defaultPos2:\x22zeroOrMin\x22,range:\x22horizontal\x22\x3d\x3d\x3dmodel.markDef.orient})),pointOrRangePosition(\x22y\x22,model,{defaultPos:\x22zeroOrMin\x22,defaultPos2:\x22zeroOrMin\x22,range:\x22vertical\x22\x3d\x3d\x3dmodel.markDef.orient})),defined(model))}},bar:{vgMark:\x22rect\x22,encodeEntry:function(model){return Object.assign(Object.assign(Object.assign({},baseEncodeEntry(model,\n{align:\x22ignore\x22,baseline:\x22ignore\x22,color:\x22include\x22,orient:\x22ignore\x22,size:\x22ignore\x22,theta:\x22ignore\x22})),rectPosition(model,\x22x\x22,\x22bar\x22)),rectPosition(model,\x22y\x22,\x22bar\x22))}},circle:{vgMark:\x22symbol\x22,encodeEntry:function(model){return encodeEntry(model,\x22circle\x22)}},geoshape:{vgMark:\x22shape\x22,encodeEntry:function(model){return Object.assign({},baseEncodeEntry(model,{align:\x22ignore\x22,baseline:\x22ignore\x22,color:\x22include\x22,size:\x22ignore\x22,orient:\x22ignore\x22,theta:\x22ignore\x22}))},postEncodingTransform:function(model){var shapeDef\x3dmodel.encoding.shape;\nreturn[Object.assign({type:\x22geoshape\x22,projection:model.projectionName()},shapeDef\x26\x26isFieldDef(shapeDef)\x26\x26shapeDef.type\x3d\x3d\x3dGEOJSON?{field:vgField(shapeDef,{expr:\x22datum\x22})}:{})]}},image:{vgMark:\x22image\x22,encodeEntry:function(model){return Object.assign(Object.assign(Object.assign(Object.assign({},baseEncodeEntry(model,{align:\x22ignore\x22,baseline:\x22ignore\x22,color:\x22ignore\x22,orient:\x22ignore\x22,size:\x22ignore\x22,theta:\x22ignore\x22})),rectPosition(model,\x22x\x22,\x22image\x22)),rectPosition(model,\x22y\x22,\x22image\x22)),text$jscomp$0(model,\x22url\x22))}},\nline:{vgMark:\x22line\x22,encodeEntry:function(model){return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},baseEncodeEntry(model,{align:\x22ignore\x22,baseline:\x22ignore\x22,color:\x22include\x22,size:\x22ignore\x22,orient:\x22ignore\x22,theta:\x22ignore\x22})),pointPosition(\x22x\x22,model,{defaultPos:\x22mid\x22})),pointPosition(\x22y\x22,model,{defaultPos:\x22mid\x22})),nonPosition(\x22size\x22,model,{vgChannel:\x22strokeWidth\x22})),defined(model))}},point:{vgMark:\x22symbol\x22,encodeEntry:function(model){return encodeEntry(model)}},rect:{vgMark:\x22rect\x22,\nencodeEntry:function(model){return Object.assign(Object.assign(Object.assign({},baseEncodeEntry(model,{align:\x22ignore\x22,baseline:\x22ignore\x22,color:\x22include\x22,orient:\x22ignore\x22,size:\x22ignore\x22,theta:\x22ignore\x22})),rectPosition(model,\x22x\x22,\x22rect\x22)),rectPosition(model,\x22y\x22,\x22rect\x22))}},rule:{vgMark:\x22rule\x22,encodeEntry:function(model){var orient\x3dmodel.markDef.orient;return model.encoding.x||model.encoding.y||model.encoding.latitude||model.encoding.longitude?Object.assign(Object.assign(Object.assign(Object.assign({},baseEncodeEntry(model,\n{align:\x22ignore\x22,baseline:\x22ignore\x22,color:\x22include\x22,orient:\x22ignore\x22,size:\x22ignore\x22,theta:\x22ignore\x22})),pointOrRangePosition(\x22x\x22,model,{defaultPos:\x22horizontal\x22\x3d\x3d\x3dorient?\x22zeroOrMax\x22:\x22mid\x22,defaultPos2:\x22zeroOrMin\x22,range:\x22vertical\x22!\x3d\x3dorient})),pointOrRangePosition(\x22y\x22,model,{defaultPos:\x22vertical\x22\x3d\x3d\x3dorient?\x22zeroOrMax\x22:\x22mid\x22,defaultPos2:\x22zeroOrMin\x22,range:\x22horizontal\x22!\x3d\x3dorient})),nonPosition(\x22size\x22,model,{vgChannel:\x22strokeWidth\x22})):{}}},square:{vgMark:\x22symbol\x22,encodeEntry:function(model){return encodeEntry(model,\n\x22square\x22)}},text:{vgMark:\x22text\x22,encodeEntry:function(model){var config\x3dmodel.config,encoding\x3dmodel.encoding;return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},baseEncodeEntry(model,{align:\x22include\x22,baseline:\x22include\x22,color:\x22include\x22,size:\x22ignore\x22,orient:\x22ignore\x22,theta:\x22include\x22})),pointPosition(\x22x\x22,model,{defaultPos:\x22mid\x22})),pointPosition(\x22y\x22,model,{defaultPos:\x22mid\x22})),text$jscomp$0(model)),nonPosition(\x22size\x22,\nmodel,{vgChannel:\x22fontSize\x22})),nonPosition(\x22angle\x22,model)),valueIfDefined(\x22align\x22,align(model.markDef,encoding,config))),valueIfDefined(\x22baseline\x22,baseline(model.markDef,encoding,config))),pointPosition(\x22radius\x22,model,{defaultPos:null,isMidPoint:!0})),pointPosition(\x22theta\x22,model,{defaultPos:null,isMidPoint:!0}))}},tick:{vgMark:\x22rect\x22,encodeEntry:function(model){var config\x3dmodel.config,markDef\x3dmodel.markDef,orient\x3dmarkDef.orient,vgSizeChannel\x3d\x22horizontal\x22\x3d\x3d\x3dorient?\x22width\x22:\x22height\x22;orient\x3d\x22horizontal\x22\x3d\x3d\x3d\norient?\x22height\x22:\x22width\x22;var $jscomp$compprop36\x3d{};return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},baseEncodeEntry(model,{align:\x22ignore\x22,baseline:\x22ignore\x22,color:\x22include\x22,orient:\x22ignore\x22,size:\x22ignore\x22,theta:\x22ignore\x22})),pointPosition(\x22x\x22,model,{defaultPos:\x22mid\x22,vgChannel:\x22xc\x22})),pointPosition(\x22y\x22,model,{defaultPos:\x22mid\x22,vgChannel:\x22yc\x22})),nonPosition(\x22size\x22,model,{defaultValue:defaultSize(model),vgChannel:vgSizeChannel})),($jscomp$compprop36[orient]\x3dsignalOrValueRef(getMarkPropOrConfig(\x22thickness\x22,\nmarkDef,config)),$jscomp$compprop36))}},trail:{vgMark:\x22trail\x22,encodeEntry:function(model){return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},baseEncodeEntry(model,{align:\x22ignore\x22,baseline:\x22ignore\x22,color:\x22include\x22,size:\x22include\x22,orient:\x22ignore\x22,theta:\x22ignore\x22})),pointPosition(\x22x\x22,model,{defaultPos:\x22mid\x22})),pointPosition(\x22y\x22,model,{defaultPos:\x22mid\x22})),nonPosition(\x22size\x22,model)),defined(model))}}},UnitModel\x3dfunction(spec,parent,parentGivenName,parentGivenSize,config){parentGivenSize\x3d\nvoid 0\x3d\x3d\x3dparentGivenSize?{}:parentGivenSize;var _a,_b;parent\x3dModelWithField.call(this,spec,\x22unit\x22,parent,parentGivenName,config,void 0,isFrameMixins(spec)?spec.view:void 0)||this;parent.specifiedScales\x3d{};parent.specifiedAxes\x3d{};parent.specifiedLegends\x3d{};parent.specifiedProjection\x3d{};parent.selection\x3d{};parent.children\x3d[];parentGivenName\x3disMarkDef(spec.mark)?spec.mark.type:spec.mark;var mark\x3dspec.mark,encoding\x3dnull!\x3d\x3d(_a\x3dspec.encoding)\x26\x26void 0!\x3d\x3d_a?_a:{},graticule\x3dspec.data\x26\x26\x22graticule\x22in spec.data;\n_a\x3disMarkDef(mark)?Object.assign({},mark):{type:mark};mark\x3dgetMarkPropOrConfig(\x22orient\x22,_a,config);_a.orient\x3dorient(_a.type,encoding,mark);void 0!\x3d\x3dmark\x26\x26mark!\x3d\x3d_a.orient\x26\x26warn(\x27Specified orient \x22\x27+_a.orient+\x27\x22 overridden with \x22\x27+mark+\x27\x22.\x27);if(\x22bar\x22\x3d\x3d\x3d_a.type\x26\x26_a.orient\x26\x26(mark\x3dgetMarkPropOrConfig(\x22cornerRadiusEnd\x22,_a,config),void 0!\x3d\x3dmark)){for(var $jscomp$inline_5239\x3d$jscomp.makeIterator(\x22horizontal\x22\x3d\x3d\x3d_a.orient\x26\x26encoding.x2||\x22vertical\x22\x3d\x3d\x3d_a.orient\x26\x26encoding.y2?[\x22cornerRadius\x22]:BAR_CORNER_RADIUS_INDEX[_a.orient]),\n$jscomp$inline_5240\x3d$jscomp$inline_5239.next();!$jscomp$inline_5240.done;$jscomp$inline_5240\x3d$jscomp$inline_5239.next())_a[$jscomp$inline_5240.value]\x3dmark;void 0!\x3d\x3d_a.cornerRadiusEnd\x26\x26delete _a.cornerRadiusEnd}void 0\x3d\x3d\x3dgetMarkPropOrConfig(\x22opacity\x22,_a,config)\x26\x26(mark\x3dcontains([POINT,TICK,CIRCLE,SQUARE],_a.type)\x26\x26!isAggregate(encoding)?.7:void 0,_a.opacity\x3dmark);void 0\x3d\x3d\x3d_a.filled\x26\x26(graticule?graticule\x3d!1:(graticule\x3dgetMarkConfig(\x22filled\x22,_a,config),mark\x3d_a.type,graticule\x3dgetFirstDefined(graticule,\nmark!\x3d\x3dPOINT\x26\x26mark!\x3d\x3dLINE\x26\x26mark!\x3d\x3dRULE)),_a.filled\x3dgraticule);void 0\x3d\x3d\x3dgetMarkPropOrConfig(\x22cursor\x22,_a,config)\x26\x26(_a.cursor\x3dencoding.href||_a.href||getMarkPropOrConfig(\x22href\x22,_a,config)?\x22pointer\x22:_a.cursor);parent.markDef\x3d_a;config\x3dparent.encoding\x3dinitEncoding(null!\x3d\x3d(_b\x3dspec.encoding)\x26\x26void 0!\x3d\x3d_b?_b:{},parent.markDef,config);parentGivenSize\x3disFrameMixins(spec)?Object.assign(Object.assign(Object.assign({},parentGivenSize),spec.width?{width:spec.width}:{}),spec.height?{height:spec.height}:{}):parentGivenSize;\n_b\x3d$jscomp.makeIterator(POSITION_SCALE_CHANNELS);for(encoding\x3d_b.next();!encoding.done;encoding\x3d_b.next())encoding\x3dencoding.value,_a\x3dgetSizeChannel(encoding),isStep(parentGivenSize[_a])\x26\x26isContinuousFieldOrDatumDef(config[encoding])\x26\x26(delete parentGivenSize[_a],warn(stepDropped(_a)));parent.size\x3dparentGivenSize;parent.stack\x3dstack$jscomp$0(parentGivenName,config);parent.specifiedScales\x3dparent.initScales(parentGivenName,config);parent.specifiedAxes\x3dparent.initAxes(config);parent.specifiedLegends\x3dparent.initLegend(config);\nparent.specifiedProjection\x3dspec.projection;parent.selection\x3dspec.selection;return parent};$jscomp.inherits(UnitModel,ModelWithField);UnitModel.prototype.scaleDomain\x3dfunction(channel){return(channel\x3dthis.specifiedScales[channel])?channel.domain:void 0};UnitModel.prototype.axis\x3dfunction(channel){return this.specifiedAxes[channel]};UnitModel.prototype.legend\x3dfunction(channel){return this.specifiedLegends[channel]};UnitModel.prototype.initScales\x3dfunction(mark,encoding){return SCALE_CHANNELS.reduce(function(scales,\nchannel){var _a,fieldOrDatumDef\x3dgetFieldOrDatumDef(encoding[channel]);fieldOrDatumDef\x26\x26(scales[channel]\x3dnull!\x3d\x3d(_a\x3dfieldOrDatumDef.scale)\x26\x26void 0!\x3d\x3d_a?_a:{});return scales},{})};UnitModel.prototype.initAxes\x3dfunction(encoding){return POSITION_SCALE_CHANNELS.reduce(function(_axis,channel){var channelDef\x3dencoding[channel];if(isFieldOrDatumDef(channelDef)||\x22x\x22\x3d\x3d\x3dchannel\x26\x26isFieldOrDatumDef(encoding.x2)||\x22y\x22\x3d\x3d\x3dchannel\x26\x26isFieldOrDatumDef(encoding.y2))channelDef\x3disFieldOrDatumDef(channelDef)?channelDef.axis:\nvoid 0,_axis[channel]\x3dchannelDef?Object.assign({},channelDef):channelDef;return _axis},{})};UnitModel.prototype.initLegend\x3dfunction(encoding){return NONPOSITION_SCALE_CHANNELS.reduce(function(_legend,channel){var fieldOrDatumDef\x3dgetFieldOrDatumDef(encoding[channel]),JSCompiler_temp;if(JSCompiler_temp\x3dfieldOrDatumDef)a:{switch(channel){case \x22color\x22:case \x22fill\x22:case \x22stroke\x22:case \x22size\x22:case \x22shape\x22:case \x22opacity\x22:case \x22strokeWidth\x22:case \x22strokeDash\x22:JSCompiler_temp\x3d!0;break a;case \x22fillOpacity\x22:case \x22strokeOpacity\x22:case \x22angle\x22:JSCompiler_temp\x3d\n!1;break a}JSCompiler_temp\x3dvoid 0}JSCompiler_temp\x26\x26(fieldOrDatumDef\x3dfieldOrDatumDef.legend,_legend[channel]\x3dfieldOrDatumDef?Object.assign({},fieldOrDatumDef):fieldOrDatumDef);return _legend},{})};UnitModel.prototype.parseData\x3dfunction(){this.component.data\x3dparseData(this)};UnitModel.prototype.parseLayoutSize\x3dfunction(){for(var size\x3dthis.size,component\x3dthis.component,$jscomp$inline_5261\x3d$jscomp.makeIterator(POSITION_SCALE_CHANNELS),$jscomp$key$channel\x3d$jscomp$inline_5261.next();!$jscomp$key$channel.done;$jscomp$key$channel\x3d\n$jscomp$inline_5261.next())if($jscomp$key$channel\x3dgetSizeChannel($jscomp$key$channel.value),size[$jscomp$key$channel]){var specifiedSize\x3dsize[$jscomp$key$channel];component.layoutSize.set($jscomp$key$channel,isStep(specifiedSize)?\x22step\x22:specifiedSize,!0)}else specifiedSize\x3ddefaultUnitSize(this,$jscomp$key$channel),component.layoutSize.set($jscomp$key$channel,specifiedSize,!1)};UnitModel.prototype.parseSelections\x3dfunction(){this.component.selection\x3dparseUnitSelection(this,this.selection)};UnitModel.prototype.parseMarkGroup\x3d\nfunction(){var JSCompiler_temp_const\x3dthis.component;if(contains([LINE,AREA,TRAIL],this.mark)){var JSCompiler_temp\x3dpathGroupingFields(this.mark,this.encoding);var pathMarks\x3dgetMarkGroups(this,{fromPrefix:0\x3cJSCompiler_temp.length?\x22faceted_path_\x22:\x22\x22});JSCompiler_temp\x3d0\x3cJSCompiler_temp.length?[{name:this.getName(\x22pathgroup\x22),type:\x22group\x22,from:{facet:{name:\x22faceted_path_\x22+this.requestDataName(\x22main\x22),data:this.requestDataName(\x22main\x22),groupby:JSCompiler_temp}},encode:{update:{width:{field:{group:\x22width\x22}},\nheight:{field:{group:\x22height\x22}}}},marks:pathMarks}]:pathMarks}else JSCompiler_temp\x3dcontains([BAR],this.mark)?getStackGroups(this):getMarkGroups(this);JSCompiler_temp_const.mark\x3dJSCompiler_temp};UnitModel.prototype.parseAxesAndHeaders\x3dfunction(){this.component.axes\x3dparseUnitAxes(this)};UnitModel.prototype.assembleSelectionTopLevelSignals\x3dfunction(signals){return assembleTopLevelSignals(this,signals)};UnitModel.prototype.assembleSignals\x3dfunction(){return[].concat($jscomp.arrayFromIterable(assembleAxisSignals(this)),\n$jscomp.arrayFromIterable(assembleUnitSelectionSignals(this,[])))};UnitModel.prototype.assembleSelectionData\x3dfunction(data){return assembleUnitSelectionData(this,data)};UnitModel.prototype.assembleLayout\x3dfunction(){return null};UnitModel.prototype.assembleLayoutSignals\x3dfunction(){return assembleLayoutSignals(this)};UnitModel.prototype.assembleMarks\x3dfunction(){var _a,marks\x3dnull!\x3d\x3d(_a\x3dthis.component.mark)\x26\x26void 0!\x3d\x3d_a?_a:[];this.parent\x26\x26isLayerModel(this.parent)||(marks\x3dassembleUnitSelectionMarks(this,\nmarks));return marks.map(this.correctDataNames)};UnitModel.prototype.getMapping\x3dfunction(){return this.encoding};UnitModel.prototype.channelHasField\x3dfunction(channel){return channelHasField(this.encoding,channel)};UnitModel.prototype.fieldDef\x3dfunction(channel){return getFieldDef(this.encoding[channel])};UnitModel.prototype.typedFieldDef\x3dfunction(channel){channel\x3dthis.fieldDef(channel);return isTypedFieldDef(channel)?channel:null};$jscomp.global.Object.defineProperties(UnitModel.prototype,{hasProjection:{configurable:!0,\nenumerable:!0,get:function(){var encoding\x3dthis.encoding,isGeoShapeMark\x3dthis.mark\x3d\x3d\x3dGEOSHAPE,hasGeoPosition\x3dencoding\x26\x26GEOPOSITION_CHANNELS.some(function(channel){return isFieldOrDatumDef(encoding[channel])});return isGeoShapeMark||hasGeoPosition}},mark:{configurable:!0,enumerable:!0,get:function(){return this.markDef.type}}});var LayerModel\x3dfunction(spec,parent,parentGivenName,parentGivenSize,config){var $jscomp$super$this\x3dModel.call(this,spec,\x22layer\x22,parent,parentGivenName,config,spec.resolve,spec.view)||\nthis;var layoutSize\x3dObject.assign(Object.assign(Object.assign({},parentGivenSize),spec.width?{width:spec.width}:{}),spec.height?{height:spec.height}:{});$jscomp$super$this.children\x3dspec.layer.map(function(layer,i){if(\x22layer\x22in layer)return new LayerModel(layer,$jscomp$super$this,$jscomp$super$this.getName(\x22layer_\x22+i),layoutSize,config);if(isUnitSpec(layer))return new UnitModel(layer,$jscomp$super$this,$jscomp$super$this.getName(\x22layer_\x22+i),layoutSize,config);throw Error(invalidSpec(layer));});return $jscomp$super$this};\n$jscomp.inherits(LayerModel,Model);LayerModel.prototype.parseData\x3dfunction(){this.component.data\x3dparseData(this);for(var $jscomp$iter$274\x3d$jscomp.makeIterator(this.children),$jscomp$key$child\x3d$jscomp$iter$274.next();!$jscomp$key$child.done;$jscomp$key$child\x3d$jscomp$iter$274.next())$jscomp$key$child.value.parseData()};LayerModel.prototype.parseLayoutSize\x3dfunction(){parseChildrenLayoutSize(this);parseNonUnitLayoutSizeForChannel(this,\x22width\x22);parseNonUnitLayoutSizeForChannel(this,\x22height\x22)};LayerModel.prototype.parseSelections\x3d\nfunction(){this.component.selection\x3d{};for(var $jscomp$iter$276\x3d$jscomp.makeIterator(this.children),$jscomp$key$child\x3d$jscomp$iter$276.next();!$jscomp$key$child.done;$jscomp$key$child\x3d$jscomp$iter$276.next()){$jscomp$key$child\x3d$jscomp$key$child.value;$jscomp$key$child.parseSelections();for(var $jscomp$iter$275\x3d$jscomp.makeIterator(keys$jscomp$0($jscomp$key$child.component.selection)),$jscomp$key$key\x3d$jscomp$iter$275.next();!$jscomp$key$key.done;$jscomp$key$key\x3d$jscomp$iter$275.next())$jscomp$key$key\x3d\n$jscomp$key$key.value,this.component.selection[$jscomp$key$key]\x3d$jscomp$key$child.component.selection[$jscomp$key$key]}};LayerModel.prototype.parseMarkGroup\x3dfunction(){for(var $jscomp$iter$277\x3d$jscomp.makeIterator(this.children),$jscomp$key$child\x3d$jscomp$iter$277.next();!$jscomp$key$child.done;$jscomp$key$child\x3d$jscomp$iter$277.next())$jscomp$key$child.value.parseMarkGroup()};LayerModel.prototype.parseAxesAndHeaders\x3dfunction(){var _a,$jscomp$inline_5274\x3dthis.component,axes\x3d$jscomp$inline_5274.axes;\n$jscomp$inline_5274\x3d$jscomp$inline_5274.resolve;for(var axisCount\x3d{top:0,bottom:0,right:0,left:0},$jscomp$inline_5278\x3d$jscomp.makeIterator(this.children),$jscomp$key$child\x3d$jscomp$inline_5278.next();!$jscomp$key$child.done;$jscomp$key$child\x3d$jscomp$inline_5278.next()){var child\x3d$jscomp$key$child.value;child.parseAxesAndHeaders();var $jscomp$inline_5281\x3d$jscomp.makeIterator(keys$jscomp$0(child.component.axes));for($jscomp$key$child\x3d$jscomp$inline_5281.next();!$jscomp$key$child.done;$jscomp$key$child\x3d\n$jscomp$inline_5281.next())$jscomp$key$child\x3d$jscomp$key$child.value,$jscomp$inline_5274.axis[$jscomp$key$child]\x3dparseGuideResolve(this.component.resolve,$jscomp$key$child),\x22shared\x22\x3d\x3d\x3d$jscomp$inline_5274.axis[$jscomp$key$child]\x26\x26(axes[$jscomp$key$child]\x3dmergeAxisComponents(axes[$jscomp$key$child],child.component.axes[$jscomp$key$child]),axes[$jscomp$key$child]||($jscomp$inline_5274.axis[$jscomp$key$child]\x3d\x22independent\x22,delete axes[$jscomp$key$child]))}$jscomp$inline_5278\x3d$jscomp.makeIterator(POSITION_SCALE_CHANNELS);\nfor($jscomp$key$child\x3d$jscomp$inline_5278.next();!$jscomp$key$child.done;$jscomp$key$child\x3d$jscomp$inline_5278.next()){child\x3d$jscomp$key$child.value;$jscomp$inline_5281\x3d$jscomp.makeIterator(this.children);for($jscomp$key$child\x3d$jscomp$inline_5281.next();!$jscomp$key$child.done;$jscomp$key$child\x3d$jscomp$inline_5281.next())if($jscomp$key$child\x3d$jscomp$key$child.value,$jscomp$key$child.component.axes[child]){if(\x22independent\x22\x3d\x3d\x3d$jscomp$inline_5274.axis[child]){axes[child]\x3d(null!\x3d\x3d(_a\x3daxes[child])\x26\x26void 0!\x3d\x3d\n_a?_a:[]).concat($jscomp$key$child.component.axes[child]);for(var $jscomp$inline_5288\x3d$jscomp.makeIterator($jscomp$key$child.component.axes[child]),$jscomp$key$axisComponent\x3d$jscomp$inline_5288.next();!$jscomp$key$axisComponent.done;$jscomp$key$axisComponent\x3d$jscomp$inline_5288.next()){$jscomp$key$axisComponent\x3d$jscomp$key$axisComponent.value;var $jscomp$inline_5291\x3d$jscomp$key$axisComponent.getWithExplicit(\x22orient\x22),orient$550\x3d$jscomp$inline_5291.value;$jscomp$inline_5291\x3d$jscomp$inline_5291.explicit;\nisSignalRef(orient$550)||(0\x3caxisCount[orient$550]\x26\x26!$jscomp$inline_5291\x26\x26($jscomp$inline_5291\x3dOPPOSITE_ORIENT[orient$550],axisCount[orient$550]\x3eaxisCount[$jscomp$inline_5291]\x26\x26$jscomp$key$axisComponent.set(\x22orient\x22,$jscomp$inline_5291,!1)),axisCount[orient$550]++)}}delete $jscomp$key$child.component.axes[child]}if(\x22independent\x22\x3d\x3d\x3d$jscomp$inline_5274.axis[child]\x26\x26axes[child]\x26\x261\x3caxes[child].length)for(child\x3d$jscomp.makeIterator(axes[child]),$jscomp$inline_5281\x3dchild.next();!$jscomp$inline_5281.done;$jscomp$inline_5281\x3d\nchild.next())$jscomp$inline_5281\x3d$jscomp$inline_5281.value,$jscomp$inline_5281.get(\x22grid\x22)\x26\x26!$jscomp$inline_5281.explicit.grid\x26\x26($jscomp$inline_5281.implicit.grid\x3d!1)}};LayerModel.prototype.assembleSelectionTopLevelSignals\x3dfunction(signals){return this.children.reduce(function(sg,child){return child.assembleSelectionTopLevelSignals(sg)},signals)};LayerModel.prototype.assembleSignals\x3dfunction(){return this.children.reduce(function(signals,child){return signals.concat(child.assembleSignals())},assembleAxisSignals(this))};\nLayerModel.prototype.assembleLayoutSignals\x3dfunction(){return this.children.reduce(function(signals,child){return signals.concat(child.assembleLayoutSignals())},assembleLayoutSignals(this))};LayerModel.prototype.assembleSelectionData\x3dfunction(data){return this.children.reduce(function(db,child){return child.assembleSelectionData(db)},data)};LayerModel.prototype.assembleTitle\x3dfunction(){var title\x3dModel.prototype.assembleTitle.call(this);if(title)return title;var $jscomp$iter$278\x3d$jscomp.makeIterator(this.children);\nfor(title\x3d$jscomp$iter$278.next();!title.done;title\x3d$jscomp$iter$278.next())if(title\x3dtitle.value.assembleTitle())return title};LayerModel.prototype.assembleLayout\x3dfunction(){return null};LayerModel.prototype.assembleMarks\x3dfunction(){return assembleLayerSelectionMarks(this,this.children.flatMap(function(child){return child.assembleMarks()}))};LayerModel.prototype.assembleLegends\x3dfunction(){return this.children.reduce(function(legends,child){return legends.concat(child.assembleLegends())},assembleLegends(this))};\nvar TransformExtractMapper\x3dfunction(){return SpecMapper.apply(this,arguments)||this};$jscomp.inherits(TransformExtractMapper,SpecMapper);TransformExtractMapper.prototype.mapUnit\x3dfunction(spec,$jscomp$destructuring$var406){var config\x3d$jscomp$destructuring$var406.config;if(spec.encoding){$jscomp$destructuring$var406\x3dspec.transform;var $jscomp$destructuring$var409\x3dextractTransformsFromEncoding(spec.encoding,config);config\x3d$jscomp$destructuring$var409.bins;var timeUnits\x3d$jscomp$destructuring$var409.timeUnits,\naggregate\x3d$jscomp$destructuring$var409.aggregate,groupby\x3d$jscomp$destructuring$var409.groupby;$jscomp$destructuring$var409\x3d$jscomp$destructuring$var409.encoding;$jscomp$destructuring$var406\x3d[].concat($jscomp.arrayFromIterable($jscomp$destructuring$var406?$jscomp$destructuring$var406:[]),$jscomp.arrayFromIterable(config),$jscomp.arrayFromIterable(timeUnits),$jscomp.arrayFromIterable(0\x3d\x3d\x3daggregate.length?[]:[{aggregate:aggregate,groupby:groupby}]));return Object.assign(Object.assign(Object.assign({},\nspec),0\x3c$jscomp$destructuring$var406.length?{transform:$jscomp$destructuring$var406}:{}),{encoding:$jscomp$destructuring$var409})}return spec};var extractor\x3dnew TransformExtractMapper;exports.compile\x3dfunction(inputSpec,opt){opt\x3dvoid 0\x3d\x3d\x3dopt?{}:opt;opt.logger\x26\x26(current\x3dopt.logger);opt.fieldTitle\x26\x26(titleFormatter\x3dopt.fieldTitle);try{var config\x3dinitConfig(mergeConfig(opt.config,inputSpec.config)),spec\x3dnormalize$jscomp$0(inputSpec,config),model\x3dbuildModel(spec,null,\x22\x22,void 0,config);model.parse();var data\x3d\nmodel.component.data;checkLinks(data.sources);for(var firstPassCounter\x3d0,secondPassCounter\x3d0,i\x3d0;5\x3ei\x26\x26optimizationDataflowHelper(data,model);i++)firstPassCounter++;data.sources.map(moveFacetDown);for(i\x3d0;5\x3ei\x26\x26optimizationDataflowHelper(data,model);i++)secondPassCounter++;checkLinks(data.sources);5\x3d\x3d\x3dMath.max(firstPassCounter,secondPassCounter)\x26\x26warn(\x22Maximum optimization runs(5) reached.\x22);var autosize\x3dspec.autosize,width\x3dmodel.component.layoutSize.get(\x22width\x22),height\x3dmodel.component.layoutSize.get(\x22height\x22);\nvoid 0\x3d\x3d\x3dautosize?(autosize\x3d{type:\x22pad\x22},model.hasAxisOrientSignalRef()\x26\x26(autosize.resize\x3d!0)):isString(autosize)\x26\x26(autosize\x3d{type:autosize});var JSCompiler_temp;if(JSCompiler_temp\x3dwidth\x26\x26height){var autoSizeType\x3dautosize.type;JSCompiler_temp\x3d\x22fit\x22\x3d\x3d\x3dautoSizeType||\x22fit-x\x22\x3d\x3d\x3dautoSizeType||\x22fit-y\x22\x3d\x3d\x3dautoSizeType}if(JSCompiler_temp)if(\x22step\x22\x3d\x3d\x3dwidth\x26\x26\x22step\x22\x3d\x3d\x3dheight)warn(droppingFit()),autosize.type\x3d\x22pad\x22;else if(\x22step\x22\x3d\x3d\x3dwidth||\x22step\x22\x3d\x3d\x3dheight){firstPassCounter\x3d\x22step\x22\x3d\x3d\x3dwidth?\x22width\x22:\x22height\x22;warn(droppingFit(getPositionScaleChannel(firstPassCounter)));\ndata\x3dautosize;var JSCompiler_inline_result\x3d(firstPassCounter\x3d\x22width\x22\x3d\x3d\x3dfirstPassCounter?\x22height\x22:\x22width\x22,\x22fit-\x22+getPositionScaleChannel(firstPassCounter));data.type\x3dJSCompiler_inline_result}var JSCompiler_inline_result$jscomp$0\x3dObject.assign(Object.assign(Object.assign({},1\x3d\x3d\x3dkeys$jscomp$0(autosize).length\x26\x26autosize.type?\x22pad\x22\x3d\x3d\x3dautosize.type?{}:{autosize:autosize.type}:{autosize:autosize}),extractTopLevelProperties(config)),extractTopLevelProperties(inputSpec));return{spec:assembleTopLevelModel(model,\nJSCompiler_inline_result$jscomp$0,inputSpec.datasets,inputSpec.usermeta),normalized:spec}}finally{opt.logger\x26\x26(current\x3dmain$1),opt.fieldTitle\x26\x26(titleFormatter\x3ddefaultTitleFormatter)}};exports.extractTransforms\x3dfunction(spec,config){return extractor.map(spec,{config:config})};exports.normalize\x3dnormalize$jscomp$0;exports.version\x3d\x224.13.1\x22;Object.defineProperty(exports,\x22__esModule\x22,{value:!0})})}");
SHADOW_ENV.evalLoad("module$node_modules$vega_util$build$vega_util.js", true , "shadow$provide.module$node_modules$vega_util$build$vega_util\x3dfunction(global$jscomp$0,require,module,exports$jscomp$0){(function(global,factory){\x22object\x22\x3d\x3d\x3dtypeof exports$jscomp$0\x26\x26\x22undefined\x22!\x3d\x3dtypeof module?factory(exports$jscomp$0):\x22function\x22\x3d\x3d\x3dtypeof define\x26\x26define.amd?define([\x22exports\x22],factory):(global\x3dglobal||self,factory(global.vega\x3d{}))})(this,function(exports){function accessor(fn,fields,name){fn.fields\x3dfields||[];fn.fname\x3dname;return fn}function accessorFields(fn){return null\x3d\x3dfn?null:\nfn.fields}function getter(path){return 1\x3d\x3d\x3dpath.length?get1(path[0]):getN(path)}function error(message){throw Error(message);}function splitAccessPath(p){function push(){path.push(s+p.substring(i,j));s\x3d\x22\x22;i\x3dj+1}var path\x3d[],q\x3dnull,b\x3d0,n\x3dp.length,s\x3d\x22\x22,i,j;p+\x3d\x22\x22;for(i\x3dj\x3d0;j\x3cn;++j){var c\x3dp[j];\x22\\\\\x22\x3d\x3d\x3dc?(s+\x3dp.substring(i,j),s+\x3dp.substring(++j,++j),i\x3dj):c\x3d\x3d\x3dq?(push(),q\x3dnull,b\x3d-1):q||(i\x3d\x3d\x3db\x26\x26\x27\x22\x27\x3d\x3d\x3dc?(i\x3dj+1,q\x3dc):i\x3d\x3d\x3db\x26\x26\x22\x27\x22\x3d\x3d\x3dc?(i\x3dj+1,q\x3dc):\x22.\x22!\x3d\x3dc||b?\x22[\x22\x3d\x3d\x3dc?(j\x3ei\x26\x26push(),b\x3di\x3dj+1):\x22]\x22\x3d\x3d\x3dc\x26\x26(b||error(\x22Access path missing open bracket: \x22+\np),0\x3cb\x26\x26push(),b\x3d0,i\x3dj+1):j\x3ei?push():i\x3dj+1)}b\x26\x26error(\x22Access path missing closing bracket: \x22+p);q\x26\x26error(\x22Access path missing closing quote: \x22+p);j\x3ei\x26\x26(j++,push());return path}function field$jscomp$0(field,name,opt){var path\x3dsplitAccessPath(field);field\x3d1\x3d\x3d\x3dpath.length?path[0]:field;return accessor((opt\x26\x26opt.get||getter)(path),[field],name||field)}function log(method,level,input){level\x3d[level].concat([].slice.call(input));console[method].apply(console,level)}function isObject(_){return _\x3d\x3d\x3dObject(_)}\nfunction writeConfig(output,key,value,recurse){if(\x22__proto__\x22!\x3d\x3dkey){var k;if(isObject(value)\x26\x26!isArray(value))for(k in output\x3disObject(output[key])?output[key]:output[key]\x3d{},value)recurse\x26\x26(!0\x3d\x3d\x3drecurse||recurse[k])?writeConfig(output,k,value[k]):\x22__proto__\x22!\x3d\x3dk\x26\x26(output[k]\x3dvalue[k]);else output[key]\x3dvalue}}function mergeNamed(a,b){function add(_){map[_.name]||(map[_.name]\x3d1,out.push(_))}if(null\x3d\x3da)return b;var map\x3d{},out\x3d[];b.forEach(add);a.forEach(add);return out}function peek(array){return array[array.length-\n1]}function toNumber(_){return null\x3d\x3d_||\x22\x22\x3d\x3d\x3d_?null:+_}function exp(sign){return function(x){return sign*Math.exp(x)}}function log$1(sign){return function(x){return Math.log(sign*x)}}function symlog(c){return function(x){return Math.sign(x)*Math.log1p(Math.abs(x/c))}}function symexp(c){return function(x){return Math.sign(x)*Math.expm1(Math.abs(x))*c}}function pow(exponent){return function(x){return 0\x3ex?-Math.pow(-x,exponent):Math.pow(x,exponent)}}function pan(domain,delta,lift,ground){var d0\x3dlift(domain[0]);\ndomain\x3dlift(peek(domain));delta*\x3ddomain-d0;return[ground(d0-delta),ground(domain-delta)]}function zoom(domain,anchor,scale,lift,ground){var d0\x3dlift(domain[0]);domain\x3dlift(peek(domain));anchor\x3dnull!\x3danchor?lift(anchor):(d0+domain)/2;return[ground(anchor+(d0-anchor)*scale),ground(anchor+(domain-anchor)*scale)]}function array$jscomp$0(_){return null!\x3d_?isArray(_)?_:[_]:[]}function isFunction(_){return\x22function\x22\x3d\x3d\x3dtypeof _}function has(object,property){return hop.call(object,property)}function isDate(_){return\x22[object Date]\x22\x3d\x3d\x3d\nObject.prototype.toString.call(_)}function isNumber(_){return\x22number\x22\x3d\x3d\x3dtypeof _}function isString(_){return\x22string\x22\x3d\x3d\x3dtypeof _}function repeat(str,reps){for(var s\x3d\x22\x22;0\x3c\x3d--reps;)s+\x3dstr;return s}function $(x){return isArray(x)?\x22[\x22+x.map($)+\x22]\x22:isObject(x)||isString(x)?JSON.stringify(x).replace(\x22\\u2028\x22,\x22\\\\u2028\x22).replace(\x22\\u2029\x22,\x22\\\\u2029\x22):x}function defaultParser(_){return isNumber(_)?_:isDate(_)?_:Date.parse(_)}var get1\x3dfunction(field){return function(obj){return obj[field]}},getN\x3dfunction(path){var len\x3d\npath.length;return function(obj){for(var i\x3d0;i\x3clen;++i)obj\x3dobj[path[i]];return obj}},empty\x3d[],id\x3dfield$jscomp$0(\x22id\x22),identity\x3daccessor(function(_){return _},empty,\x22identity\x22),zero\x3daccessor(function(){return 0},empty,\x22zero\x22),one\x3daccessor(function(){return 1},empty,\x22one\x22),truthy\x3daccessor(function(){return!0},empty,\x22true\x22);empty\x3daccessor(function(){return!1},empty,\x22false\x22);var isArray\x3dArray.isArray,compare$1\x3dfunction(u,v){return(u\x3cv||null\x3d\x3du)\x26\x26null!\x3dv?-1:(u\x3ev||null\x3d\x3dv)\x26\x26null!\x3du?1:(v\x3dv instanceof Date?\n+v:v,u\x3du instanceof Date?+u:u)!\x3d\x3du\x26\x26v\x3d\x3d\x3dv?-1:v!\x3d\x3dv\x26\x26u\x3d\x3d\x3du?1:0},comparator\x3dfunction(fields,orders){return 1\x3d\x3d\x3dfields.length?compare1(fields[0],orders[0]):compareN(fields,orders,fields.length)},compare1\x3dfunction(field,order){return function(a,b){return compare$1(field(a),field(b))*order}},compareN\x3dfunction(fields,orders,n){orders.push(0);return function(a,b){var f\x3d0;for(var i\x3d-1;0\x3d\x3d\x3df\x26\x26++i\x3cn;)f\x3dfields[i],f\x3dcompare$1(f(a),f(b));return f*orders[i]}},hop\x3dObject.prototype.hasOwnProperty,NULL\x3d{};exports.Debug\x3d\n4;exports.Error\x3d1;exports.Info\x3d3;exports.None\x3d0;exports.Warn\x3d2;exports.accessor\x3daccessor;exports.accessorFields\x3daccessorFields;exports.accessorName\x3dfunction(fn){return null\x3d\x3dfn?null:fn.fname};exports.array\x3darray$jscomp$0;exports.clampRange\x3dfunction(range,min,max){var lo\x3drange[0];range\x3drange[1];if(range\x3clo){var span\x3drange;range\x3dlo;lo\x3dspan}span\x3drange-lo;return span\x3e\x3dmax-min?[min,max]:[lo\x3dMath.min(Math.max(lo,min),max-span),lo+span]};exports.compare\x3dfunction(fields,orders,opt){opt\x3dopt||{};orders\x3darray$jscomp$0(orders)||\n[];var ord\x3d[],get\x3d[],fmap\x3d{},gen\x3dopt.comparator||comparator;array$jscomp$0(fields).forEach(function(f,i){null!\x3df\x26\x26(ord.push(\x22descending\x22\x3d\x3d\x3dorders[i]?-1:1),get.push(f\x3disFunction(f)?f:field$jscomp$0(f,null,opt)),(accessorFields(f)||[]).forEach(function(_){return fmap[_]\x3d1}))});return 0\x3d\x3d\x3dget.length?null:accessor(gen(get,ord),Object.keys(fmap))};exports.constant\x3dfunction(_){return isFunction(_)?_:function(){return _}};exports.debounce\x3dfunction(delay,handler){function callback(){handler(evt);tid\x3devt\x3d\nnull}var tid,evt;return function(e){evt\x3de;tid\x26\x26clearTimeout(tid);tid\x3dsetTimeout(callback,delay)}};exports.error\x3derror;exports.extend\x3dfunction(_){for(var x,k,i\x3d1,len\x3darguments.length;i\x3clen;++i)for(k in x\x3darguments[i],x)_[k]\x3dx[k];return _};exports.extent\x3dfunction(array,f){var i\x3d0,n,v,min,max;if(array\x26\x26(n\x3darray.length))if(null\x3d\x3df){for(v\x3darray[i];i\x3cn\x26\x26(null\x3d\x3dv||v!\x3d\x3dv);v\x3darray[++i]);for(min\x3dmax\x3dv;i\x3cn;++i)v\x3darray[i],null!\x3dv\x26\x26(v\x3cmin\x26\x26(min\x3dv),v\x3emax\x26\x26(max\x3dv))}else{for(v\x3df(array[i]);i\x3cn\x26\x26(null\x3d\x3dv||v!\x3d\x3dv);v\x3d\nf(array[++i]));for(min\x3dmax\x3dv;i\x3cn;++i)v\x3df(array[i]),null!\x3dv\x26\x26(v\x3cmin\x26\x26(min\x3dv),v\x3emax\x26\x26(max\x3dv))}return[min,max]};exports.extentIndex\x3dfunction(array,f){var i\x3d-1,n\x3darray.length,c,u,v;if(null\x3d\x3df){for(;++i\x3cn;){var b\x3darray[i];if(null!\x3db\x26\x26b\x3e\x3db){var a\x3dc\x3db;break}}if(i\x3d\x3d\x3dn)return[-1,-1];for(u\x3dv\x3di;++i\x3cn;)b\x3darray[i],null!\x3db\x26\x26(a\x3eb\x26\x26(a\x3db,u\x3di),c\x3cb\x26\x26(c\x3db,v\x3di))}else{for(;++i\x3cn;)if(b\x3df(array[i],i,array),null!\x3db\x26\x26b\x3e\x3db){a\x3dc\x3db;break}if(i\x3d\x3d\x3dn)return[-1,-1];for(u\x3dv\x3di;++i\x3cn;)b\x3df(array[i],i,array),null!\x3db\x26\x26(a\x3eb\x26\x26(a\x3db,u\x3di),c\x3c\nb\x26\x26(c\x3db,v\x3di))}return[u,v]};exports.falsy\x3dempty;exports.fastmap\x3dfunction(input){function has$1(key){return has(obj,key)\x26\x26obj[key]!\x3d\x3dNULL}var obj\x3d{},test;var map\x3d{size:0,empty:0,object:obj,has:has$1,get:function(key){return has$1(key)?obj[key]:void 0},set:function(key,value){has$1(key)||(++map.size,obj[key]\x3d\x3d\x3dNULL\x26\x26--map.empty);obj[key]\x3dvalue;return this},delete:function(key){has$1(key)\x26\x26(--map.size,++map.empty,obj[key]\x3dNULL);return this},clear:function(){map.size\x3dmap.empty\x3d0;map.object\x3dobj\x3d{}},test:function(_){return arguments.length?\n(test\x3d_,map):test},clean:function(){var next\x3d{},size\x3d0,key;for(key in obj){var value\x3dobj[key];value\x3d\x3d\x3dNULL||test\x26\x26test(value)||(next[key]\x3dvalue,++size)}map.size\x3dsize;map.empty\x3d0;map.object\x3dobj\x3dnext}};input\x26\x26Object.keys(input).forEach(function(key){map.set(key,input[key])});return map};exports.field\x3dfield$jscomp$0;exports.flush\x3dfunction(range,value,threshold,left,right,center){if(!threshold\x26\x260!\x3d\x3dthreshold)return center;var a\x3drange[0];range\x3dpeek(range);threshold\x3d+threshold;if(range\x3ca){var l\x3da;a\x3drange;\nrange\x3dl}l\x3dMath.abs(value-a);value\x3dMath.abs(range-value);return l\x3cvalue\x26\x26l\x3c\x3dthreshold?left:value\x3c\x3dthreshold?right:center};exports.hasOwnProperty\x3dhas;exports.id\x3did;exports.identity\x3didentity;exports.inherits\x3dfunction(child,parent){parent\x3dchild.prototype\x3dObject.create(parent.prototype);parent.constructor\x3dchild;return parent};exports.inrange\x3dfunction(value,range,left,right){var r0\x3drange[0];range\x3drange[range.length-1];if(r0\x3erange){var t\x3dr0;r0\x3drange;range\x3dt}return(void 0\x3d\x3d\x3dleft||left?r0\x3c\x3dvalue:r0\x3cvalue)\x26\x26\n(void 0\x3d\x3d\x3dright||right?value\x3c\x3drange:value\x3crange)};exports.isArray\x3disArray;exports.isBoolean\x3dfunction(_){return\x22boolean\x22\x3d\x3d\x3dtypeof _};exports.isDate\x3disDate;exports.isFunction\x3disFunction;exports.isNumber\x3disNumber;exports.isObject\x3disObject;exports.isRegExp\x3dfunction(_){return\x22[object RegExp]\x22\x3d\x3d\x3dObject.prototype.toString.call(_)};exports.isString\x3disString;exports.key\x3dfunction(fields,flat,opt){fields\x26\x26(fields\x3dflat?array$jscomp$0(fields).map(function(f){return f.replace(/\\\\(.)/g,\x22$1\x22)}):array$jscomp$0(fields));\nvar len\x3dfields\x26\x26fields.length,gen\x3dopt\x26\x26opt.get||getter;opt\x3dfunction(f){return gen(flat?[f]:splitAccessPath(f))};if(len)if(1\x3d\x3d\x3dlen){var get\x3dopt(fields[0]);opt\x3dfunction(_){return\x22\x22+get(_)}}else{var get$555\x3dfields.map(opt);opt\x3dfunction(_){for(var s\x3d\x22\x22+get$555[0](_),i\x3d0;++i\x3clen;)s+\x3d\x22|\x22+get$555[i](_);return s}}else opt\x3dfunction(){return\x22\x22};return accessor(opt,fields,\x22key\x22)};exports.lerp\x3dfunction(array,frac){var lo\x3darray[0];array\x3dpeek(array);return(frac\x3d+frac)?1\x3d\x3d\x3dfrac?array:lo+frac*(array-lo):lo};exports.logger\x3d\nfunction(_$jscomp$0,method){var level\x3d_$jscomp$0||0;return{level:function(_){return arguments.length?(level\x3d+_,this):level},error:function(){1\x3c\x3dlevel\x26\x26log(method||\x22error\x22,\x22ERROR\x22,arguments);return this},warn:function(){2\x3c\x3dlevel\x26\x26log(method||\x22warn\x22,\x22WARN\x22,arguments);return this},info:function(){3\x3c\x3dlevel\x26\x26log(method||\x22log\x22,\x22INFO\x22,arguments);return this},debug:function(){4\x3c\x3dlevel\x26\x26log(method||\x22log\x22,\x22DEBUG\x22,arguments);return this}}};exports.lruCache\x3dfunction(maxsize){maxsize\x3d+maxsize||1E4;var curr,prev,\nsize,clear\x3dfunction(){curr\x3d{};prev\x3d{};size\x3d0},update\x3dfunction(key,value){++size\x3emaxsize\x26\x26(prev\x3dcurr,curr\x3d{},size\x3d1);return curr[key]\x3dvalue};clear();return{clear:clear,has:function(key){return has(curr,key)||has(prev,key)},get:function(key){return has(curr,key)?curr[key]:has(prev,key)?update(key,prev[key]):void 0},set:function(key,value){return has(curr,key)?curr[key]\x3dvalue:update(key,value)}}};exports.merge\x3dfunction(compare,array0,array1,output){var n0\x3darray0.length,n1\x3darray1.length;if(!n1)return array0;\nif(!n0)return array1;output\x3doutput||new array0.constructor(n0+n1);for(var i0\x3d0,i1\x3d0,i\x3d0;i0\x3cn0\x26\x26i1\x3cn1;++i)output[i]\x3d0\x3ccompare(array0[i0],array1[i1])?array1[i1++]:array0[i0++];for(;i0\x3cn0;++i0,++i)output[i]\x3darray0[i0];for(;i1\x3cn1;++i1,++i)output[i]\x3darray1[i1];return output};exports.mergeConfig\x3dfunction(configs){for(var $jscomp$restParams\x3d[],$jscomp$restIndex\x3d0;$jscomp$restIndex\x3carguments.length;++$jscomp$restIndex)$jscomp$restParams[$jscomp$restIndex-0]\x3darguments[$jscomp$restIndex];return $jscomp$restParams.reduce(function(out,\nsource){for(var key in source)\x22signals\x22\x3d\x3d\x3dkey?out.signals\x3dmergeNamed(out.signals,source.signals):writeConfig(out,key,source[key],\x22legend\x22\x3d\x3d\x3dkey?{layout:1}:\x22style\x22\x3d\x3d\x3dkey?!0:null);return out},{})};exports.one\x3done;exports.pad\x3dfunction(str,length,padchar,align){padchar\x3dpadchar||\x22 \x22;str+\x3d\x22\x22;length-\x3dstr.length;return 0\x3e\x3dlength?str:\x22left\x22\x3d\x3d\x3dalign?repeat(padchar,length)+str:\x22center\x22\x3d\x3d\x3dalign?repeat(padchar,~~(length/2))+str+repeat(padchar,Math.ceil(length/2)):str+repeat(padchar,length)};exports.panLinear\x3d\nfunction(domain,delta){return pan(domain,delta,toNumber,identity)};exports.panLog\x3dfunction(domain,delta){var sign\x3dMath.sign(domain[0]);return pan(domain,delta,log$1(sign),exp(sign))};exports.panPow\x3dfunction(domain,delta,exponent){return pan(domain,delta,pow(exponent),pow(1/exponent))};exports.panSymlog\x3dfunction(domain,delta,constant){return pan(domain,delta,symlog(constant),symexp(constant))};exports.peek\x3dpeek;exports.quarter\x3dfunction(date){return 1+~~((new Date(date)).getMonth()/3)};exports.repeat\x3d\nrepeat;exports.span\x3dfunction(array){return array\x26\x26peek(array)-array[0]||0};exports.splitAccessPath\x3dsplitAccessPath;exports.stringValue\x3d$;exports.toBoolean\x3dfunction(_){return null\x3d\x3d_||\x22\x22\x3d\x3d\x3d_?null:_\x26\x26\x22false\x22!\x3d\x3d_\x26\x26\x220\x22!\x3d\x3d_?!!_:!1};exports.toDate\x3dfunction(_,parser){parser\x3dparser||defaultParser;return null\x3d\x3d_||\x22\x22\x3d\x3d\x3d_?null:parser(_)};exports.toNumber\x3dtoNumber;exports.toSet\x3dfunction(_){for(var s\x3d{},i\x3d0,n\x3d_.length;i\x3cn;++i)s[_[i]]\x3d!0;return s};exports.toString\x3dfunction(_){return null\x3d\x3d_||\x22\x22\x3d\x3d\x3d_?null:_+\x22\x22};\nexports.truncate\x3dfunction(str,length,align,ellipsis){ellipsis\x3dnull!\x3dellipsis?ellipsis:\x22\u2026\x22;str+\x3d\x22\x22;var n\x3dstr.length,l\x3dMath.max(0,length-ellipsis.length);return n\x3c\x3dlength?str:\x22left\x22\x3d\x3d\x3dalign?ellipsis+str.slice(n-l):\x22center\x22\x3d\x3d\x3dalign?str.slice(0,Math.ceil(l/2))+ellipsis+str.slice(n-~~(l/2)):str.slice(0,l)+ellipsis};exports.truthy\x3dtruthy;exports.utcquarter\x3dfunction(date){return 1+~~((new Date(date)).getUTCMonth()/3)};exports.visitArray\x3dfunction(array,filter,visitor){if(array)if(filter)for(var i\x3d0,n\x3darray.length,\nt;i\x3cn;++i)(t\x3dfilter(array[i]))\x26\x26visitor(t,i,array);else array.forEach(visitor)};exports.writeConfig\x3dwriteConfig;exports.zero\x3dzero;exports.zoomLinear\x3dfunction(domain,anchor,scale){return zoom(domain,anchor,scale,toNumber,identity)};exports.zoomLog\x3dfunction(domain,anchor,scale){var sign\x3dMath.sign(domain[0]);return zoom(domain,anchor,scale,log$1(sign),exp(sign))};exports.zoomPow\x3dfunction(domain,anchor,scale,exponent){return zoom(domain,anchor,scale,pow(exponent),pow(1/exponent))};exports.zoomSymlog\x3d\nfunction(domain,anchor,scale,constant){return zoom(domain,anchor,scale,symlog(constant),symexp(constant))};Object.defineProperty(exports,\x22__esModule\x22,{value:!0})})}");
SHADOW_ENV.evalLoad("module$node_modules$d3_dsv$dist$d3_dsv.js", true , "shadow$provide.module$node_modules$d3_dsv$dist$d3_dsv\x3dfunction(global$jscomp$0,require,module,exports$jscomp$0){(function(global,factory){\x22object\x22\x3d\x3d\x3dtypeof exports$jscomp$0\x26\x26\x22undefined\x22!\x3d\x3dtypeof module?factory(exports$jscomp$0):\x22function\x22\x3d\x3d\x3dtypeof define\x26\x26define.amd?define([\x22exports\x22],factory):(global\x3dglobal||self,factory(global.d3\x3dglobal.d3||{}))})(this,function(exports){function objectConverter(columns){return new Function(\x22d\x22,\x22return {\x22+columns.map(function(name,i){return JSON.stringify(name)+\n\x22: d[\x22+i+\x27] || \x22\x22\x27}).join(\x22,\x22)+\x22}\x22)}function customConverter(columns,f){var object\x3dobjectConverter(columns);return function(row,i){return f(object(row),i,columns)}}function inferColumns(rows){var columnSet\x3dObject.create(null),columns\x3d[];rows.forEach(function(row){for(var column in row)column in columnSet||columns.push(columnSet[column]\x3dcolumn)});return columns}function pad(value,width){value+\x3d\x22\x22;var length\x3dvalue.length;return length\x3cwidth?Array(width-length+1).join(0)+value:value}function dsv(delimiter){function parseRows(text,\nf){function token(){if(eof)return EOF;if(eol)return eol\x3d!1,EOL;var i,j\x3dI,c;if(34\x3d\x3d\x3dtext.charCodeAt(j)){for(;I++\x3cN\x26\x2634!\x3d\x3dtext.charCodeAt(I)||34\x3d\x3d\x3dtext.charCodeAt(++I););(i\x3dI)\x3e\x3dN?eof\x3d!0:10\x3d\x3d\x3d(c\x3dtext.charCodeAt(I++))?eol\x3d!0:13\x3d\x3d\x3dc\x26\x26(eol\x3d!0,10\x3d\x3d\x3dtext.charCodeAt(I)\x26\x26++I);return text.slice(j+1,i-1).replace(/\x22\x22/g,\x27\x22\x27)}for(;I\x3cN;){if(10\x3d\x3d\x3d(c\x3dtext.charCodeAt(i\x3dI++)))eol\x3d!0;else if(13\x3d\x3d\x3dc)eol\x3d!0,10\x3d\x3d\x3dtext.charCodeAt(I)\x26\x26++I;else if(c!\x3d\x3dDELIMITER)continue;return text.slice(j,i)}return eof\x3d!0,text.slice(j,N)}\nvar rows\x3d[],N\x3dtext.length,I\x3d0,n\x3d0,t,eof\x3d0\x3e\x3dN,eol\x3d!1;10\x3d\x3d\x3dtext.charCodeAt(N-1)\x26\x26--N;for(13\x3d\x3d\x3dtext.charCodeAt(N-1)\x26\x26--N;(t\x3dtoken())!\x3d\x3dEOF;){for(var row\x3d[];t!\x3d\x3dEOL\x26\x26t!\x3d\x3dEOF;)row.push(t),t\x3dtoken();f\x26\x26null\x3d\x3d(row\x3df(row,n++))||rows.push(row)}return rows}function preformatBody(rows,columns){return rows.map(function(row){return columns.map(function(column){return formatValue(row[column])}).join(delimiter)})}function formatRow(row){return row.map(formatValue).join(delimiter)}function formatValue(value){if(null\x3d\x3d\nvalue)value\x3d\x22\x22;else{if(value instanceof Date){var JSCompiler_temp\x3dvalue.getUTCHours();var minutes\x3dvalue.getUTCMinutes(),seconds\x3dvalue.getUTCSeconds(),milliseconds\x3dvalue.getUTCMilliseconds();if(isNaN(value))value\x3d\x22Invalid Date\x22;else{var year\x3dvalue.getUTCFullYear();value\x3d(0\x3eyear?\x22-\x22+pad(-year,6):9999\x3cyear?\x22+\x22+pad(year,6):pad(year,4))+\x22-\x22+pad(value.getUTCMonth()+1,2)+\x22-\x22+pad(value.getUTCDate(),2)+(milliseconds?\x22T\x22+pad(JSCompiler_temp,2)+\x22:\x22+pad(minutes,2)+\x22:\x22+pad(seconds,2)+\x22.\x22+pad(milliseconds,3)+\x22Z\x22:\nseconds?\x22T\x22+pad(JSCompiler_temp,2)+\x22:\x22+pad(minutes,2)+\x22:\x22+pad(seconds,2)+\x22Z\x22:minutes||JSCompiler_temp?\x22T\x22+pad(JSCompiler_temp,2)+\x22:\x22+pad(minutes,2)+\x22Z\x22:\x22\x22)}JSCompiler_temp\x3dvalue}else JSCompiler_temp\x3dreFormat.test(value+\x3d\x22\x22)?\x27\x22\x27+value.replace(/\x22/g,\x27\x22\x22\x27)+\x27\x22\x27:value;value\x3dJSCompiler_temp}return value}var reFormat\x3dnew RegExp(\x27[\x22\x27+delimiter+\x22\\n\\r]\x22),DELIMITER\x3ddelimiter.charCodeAt(0);return{parse:function(text,f){var convert,columns;text\x3dparseRows(text,function(row,i){if(convert)return convert(row,i-1);\ncolumns\x3drow;convert\x3df?customConverter(row,f):objectConverter(row)});text.columns\x3dcolumns||[];return text},parseRows:parseRows,format:function(rows,columns){null\x3d\x3dcolumns\x26\x26(columns\x3dinferColumns(rows));return[columns.map(formatValue).join(delimiter)].concat(preformatBody(rows,columns)).join(\x22\\n\x22)},formatBody:function(rows,columns){null\x3d\x3dcolumns\x26\x26(columns\x3dinferColumns(rows));return preformatBody(rows,columns).join(\x22\\n\x22)},formatRows:function(rows){return rows.map(formatRow).join(\x22\\n\x22)},formatRow:formatRow,\nformatValue:formatValue}}var EOL\x3d{},EOF\x3d{},csv\x3ddsv(\x22,\x22),csvParse\x3dcsv.parse,csvParseRows\x3dcsv.parseRows,csvFormat\x3dcsv.format,csvFormatBody\x3dcsv.formatBody,csvFormatRows\x3dcsv.formatRows,csvFormatRow\x3dcsv.formatRow;csv\x3dcsv.formatValue;var tsv\x3ddsv(\x22\\t\x22),tsvParse\x3dtsv.parse,tsvParseRows\x3dtsv.parseRows,tsvFormat\x3dtsv.format,tsvFormatBody\x3dtsv.formatBody,tsvFormatRows\x3dtsv.formatRows,tsvFormatRow\x3dtsv.formatRow;tsv\x3dtsv.formatValue;var fixtz\x3d(new Date(\x222019-01-01T00:00\x22)).getHours()||(new Date(\x222019-07-01T00:00\x22)).getHours();\nexports.autoType\x3dfunction(object){for(var key in object){var value\x3dobject[key].trim(),number;if(value)if(\x22true\x22\x3d\x3d\x3dvalue)value\x3d!0;else if(\x22false\x22\x3d\x3d\x3dvalue)value\x3d!1;else if(\x22NaN\x22\x3d\x3d\x3dvalue)value\x3dNaN;else if(isNaN(number\x3d+value))if(number\x3dvalue.match(/^([-+]\\d{2})?\\d{4}(-\\d{2}(-\\d{2})?)?(T\\d{2}:\\d{2}(:\\d{2}(\\.\\d{3})?)?(Z|[-+]\\d{2}:\\d{2})?)?$/))fixtz\x26\x26number[4]\x26\x26!number[7]\x26\x26(value\x3dvalue.replace(/-/g,\x22/\x22).replace(/T/,\x22 \x22)),value\x3dnew Date(value);else continue;else value\x3dnumber;else value\x3dnull;object[key]\x3d\nvalue}return object};exports.csvFormat\x3dcsvFormat;exports.csvFormatBody\x3dcsvFormatBody;exports.csvFormatRow\x3dcsvFormatRow;exports.csvFormatRows\x3dcsvFormatRows;exports.csvFormatValue\x3dcsv;exports.csvParse\x3dcsvParse;exports.csvParseRows\x3dcsvParseRows;exports.dsvFormat\x3ddsv;exports.tsvFormat\x3dtsvFormat;exports.tsvFormatBody\x3dtsvFormatBody;exports.tsvFormatRow\x3dtsvFormatRow;exports.tsvFormatRows\x3dtsvFormatRows;exports.tsvFormatValue\x3dtsv;exports.tsvParse\x3dtsvParse;exports.tsvParseRows\x3dtsvParseRows;Object.defineProperty(exports,\n\x22__esModule\x22,{value:!0})})}");
SHADOW_ENV.evalLoad("module$node_modules$topojson_client$dist$topojson_client.js", true , "shadow$provide.module$node_modules$topojson_client$dist$topojson_client\x3dfunction(global$jscomp$0,require,module,exports$jscomp$0){(function(global,factory){\x22object\x22\x3d\x3d\x3dtypeof exports$jscomp$0\x26\x26\x22undefined\x22!\x3d\x3dtypeof module?factory(exports$jscomp$0):\x22function\x22\x3d\x3d\x3dtypeof define\x26\x26define.amd?define([\x22exports\x22],factory):(global\x3dglobal||self,factory(global.topojson\x3dglobal.topojson||{}))})(this,function(exports){function identity(x){return x}function transform$jscomp$0(transform){if(null\x3d\x3dtransform)return identity;\nvar x0,y0,kx\x3dtransform.scale[0],ky\x3dtransform.scale[1],dx\x3dtransform.translate[0],dy\x3dtransform.translate[1];return function(input,i){i||(x0\x3dy0\x3d0);i\x3d2;var n\x3dinput.length,output\x3dArray(n);output[0]\x3d(x0+\x3dinput[0])*kx+dx;for(output[1]\x3d(y0+\x3dinput[1])*ky+dy;i\x3cn;)output[i]\x3dinput[i],++i;return output}}function bbox$jscomp$0(topology){function bboxPoint(p){p\x3dt(p);p[0]\x3cx0\x26\x26(x0\x3dp[0]);p[0]\x3ex1\x26\x26(x1\x3dp[0]);p[1]\x3cy0\x26\x26(y0\x3dp[1]);p[1]\x3ey1\x26\x26(y1\x3dp[1])}function bboxGeometry(o){switch(o.type){case \x22GeometryCollection\x22:o.geometries.forEach(bboxGeometry);\nbreak;case \x22Point\x22:bboxPoint(o.coordinates);break;case \x22MultiPoint\x22:o.coordinates.forEach(bboxPoint)}}var t\x3dtransform$jscomp$0(topology.transform),key,x0\x3dInfinity,y0\x3dx0,x1\x3d-x0,y1\x3d-x0;topology.arcs.forEach(function(arc){for(var i\x3d-1,n\x3darc.length,p;++i\x3cn;)p\x3dt(arc[i],i),p[0]\x3cx0\x26\x26(x0\x3dp[0]),p[0]\x3ex1\x26\x26(x1\x3dp[0]),p[1]\x3cy0\x26\x26(y0\x3dp[1]),p[1]\x3ey1\x26\x26(y1\x3dp[1])});for(key in topology.objects)bboxGeometry(topology.objects[key]);return[x0,y0,x1,y1]}function feature$1(topology,o){var id\x3do.id,bbox\x3do.bbox,properties\x3dnull\x3d\x3d\no.properties?{}:o.properties;topology\x3dobject$jscomp$0(topology,o);return null\x3d\x3did\x26\x26null\x3d\x3dbbox?{type:\x22Feature\x22,properties:properties,geometry:topology}:null\x3d\x3dbbox?{type:\x22Feature\x22,id:id,properties:properties,geometry:topology}:{type:\x22Feature\x22,id:id,bbox:bbox,properties:properties,geometry:topology}}function object$jscomp$0(topology,o$jscomp$0){function point(p){return transformPoint(p)}function line(arcs$jscomp$0){for(var points\x3d[],i\x3d0,n\x3darcs$jscomp$0.length;i\x3cn;++i){var i$jscomp$0\x3darcs$jscomp$0[i],\npoints$jscomp$0\x3dpoints;points$jscomp$0.length\x26\x26points$jscomp$0.pop();for(var a\x3darcs[0\x3ei$jscomp$0?~i$jscomp$0:i$jscomp$0],k\x3d0,n$jscomp$0\x3da.length;k\x3cn$jscomp$0;++k)points$jscomp$0.push(transformPoint(a[k],k));if(0\x3ei$jscomp$0)for(i$jscomp$0\x3dpoints$jscomp$0,points$jscomp$0\x3di$jscomp$0.length,a\x3dpoints$jscomp$0-n$jscomp$0;a\x3c--points$jscomp$0;)n$jscomp$0\x3di$jscomp$0[a],i$jscomp$0[a++]\x3di$jscomp$0[points$jscomp$0],i$jscomp$0[points$jscomp$0]\x3dn$jscomp$0}2\x3epoints.length\x26\x26points.push(points[0]);return points}function ring(arcs){for(arcs\x3d\nline(arcs);4\x3earcs.length;)arcs.push(arcs[0]);return arcs}function polygon(arcs){return arcs.map(ring)}function geometry(o){var type\x3do.type;switch(type){case \x22GeometryCollection\x22:return{type:type,geometries:o.geometries.map(geometry)};case \x22Point\x22:o\x3dtransformPoint(o.coordinates);break;case \x22MultiPoint\x22:o\x3do.coordinates.map(point);break;case \x22LineString\x22:o\x3dline(o.arcs);break;case \x22MultiLineString\x22:o\x3do.arcs.map(line);break;case \x22Polygon\x22:o\x3dpolygon(o.arcs);break;case \x22MultiPolygon\x22:o\x3do.arcs.map(polygon);\nbreak;default:return null}return{type:type,coordinates:o}}var transformPoint\x3dtransform$jscomp$0(topology.transform),arcs\x3dtopology.arcs;return geometry(o$jscomp$0)}function stitch(topology,arcs){function ends(i){var arc\x3dtopology.arcs[0\x3ei?~i:i],p0\x3darc[0];if(topology.transform){var p1\x3d[0,0];arc.forEach(function(dp){p1[0]+\x3ddp[0];p1[1]+\x3ddp[1]})}else p1\x3darc[arc.length-1];return 0\x3ei?[p1,p0]:[p0,p1]}function flush(fragmentByEnd,fragmentByStart){for(var k in fragmentByEnd){var f\x3dfragmentByEnd[k];delete fragmentByStart[f.start];\ndelete f.start;delete f.end;f.forEach(function(i){stitchedArcs[0\x3ei?~i:i]\x3d1});fragments.push(f)}}var stitchedArcs\x3d{},fragmentByStart\x3d{},fragmentByEnd\x3d{},fragments\x3d[],emptyIndex\x3d-1;arcs.forEach(function(i,j){var arc\x3dtopology.arcs[0\x3ei?~i:i];3\x3earc.length\x26\x26!arc[1][0]\x26\x26!arc[1][1]\x26\x26(arc\x3darcs[++emptyIndex],arcs[emptyIndex]\x3di,arcs[j]\x3darc)});arcs.forEach(function(i){var e\x3dends(i),start\x3de[0],end\x3de[1];(e\x3dfragmentByEnd[start])?(delete fragmentByEnd[e.end],e.push(i),e.end\x3dend,(i\x3dfragmentByStart[end])?(delete fragmentByStart[i.start],\nstart\x3di\x3d\x3d\x3de?e:e.concat(i),fragmentByStart[start.start\x3de.start]\x3dfragmentByEnd[start.end\x3di.end]\x3dstart):fragmentByStart[e.start]\x3dfragmentByEnd[e.end]\x3de):(e\x3dfragmentByStart[end])?(delete fragmentByStart[e.start],e.unshift(i),e.start\x3dstart,(i\x3dfragmentByEnd[start])?(delete fragmentByEnd[i.end],start\x3di\x3d\x3d\x3de?e:i.concat(e),fragmentByStart[start.start\x3di.start]\x3dfragmentByEnd[start.end\x3de.end]\x3dstart):fragmentByStart[e.start]\x3dfragmentByEnd[e.end]\x3de):(e\x3d[i],fragmentByStart[e.start\x3dstart]\x3dfragmentByEnd[e.end\x3dend]\x3d\ne)});flush(fragmentByEnd,fragmentByStart);flush(fragmentByStart,fragmentByEnd);arcs.forEach(function(i){stitchedArcs[0\x3ei?~i:i]||fragments.push([i])});return fragments}function meshArcs(topology,object,filter){var n;if(1\x3carguments.length)var arcs\x3dextractArcs(topology,object,filter);else{var i\x3d0;for(arcs\x3dArray(n\x3dtopology.arcs.length);i\x3cn;++i)arcs[i]\x3di}return{type:\x22MultiLineString\x22,arcs:stitch(topology,arcs)}}function extractArcs(topology,object,filter){function extract0(i){var j\x3d0\x3ei?~i:i;(geomsByArc[j]||\n(geomsByArc[j]\x3d[])).push({i:i,g:geom})}function extract1(arcs){arcs.forEach(extract0)}function extract2(arcs){arcs.forEach(extract1)}function geometry(o){switch(geom\x3do,o.type){case \x22GeometryCollection\x22:o.geometries.forEach(geometry);break;case \x22LineString\x22:extract1(o.arcs);break;case \x22MultiLineString\x22:case \x22Polygon\x22:extract2(o.arcs);break;case \x22MultiPolygon\x22:o.arcs.forEach(extract2)}}var arcs$jscomp$0\x3d[],geomsByArc\x3d[],geom;geometry(object);geomsByArc.forEach(null\x3d\x3dfilter?function(geoms){arcs$jscomp$0.push(geoms[0].i)}:\nfunction(geoms){filter(geoms[0].g,geoms[geoms.length-1].g)\x26\x26arcs$jscomp$0.push(geoms[0].i)});return arcs$jscomp$0}function mergeArcs(topology,objects){function geometry(o){switch(o.type){case \x22GeometryCollection\x22:o.geometries.forEach(geometry);break;case \x22Polygon\x22:extract(o.arcs);break;case \x22MultiPolygon\x22:o.arcs.forEach(extract)}}function extract(polygon){polygon.forEach(function(ring){ring.forEach(function(arc){(polygonsByArc[arc\x3d0\x3earc?~arc:arc]||(polygonsByArc[arc]\x3d[])).push(polygon)})});polygons$jscomp$0.push(polygon)}\nfunction area$jscomp$0(ring){ring\x3dobject$jscomp$0(topology,{type:\x22Polygon\x22,arcs:[ring]}).coordinates[0];for(var i\x3d-1,n\x3dring.length,a,b\x3dring[n-1],area\x3d0;++i\x3cn;)a\x3db,b\x3dring[i],area+\x3da[0]*b[1]-a[1]*b[0];return Math.abs(area)}var polygonsByArc\x3d{},polygons$jscomp$0\x3d[],groups\x3d[];objects.forEach(geometry);polygons$jscomp$0.forEach(function(polygon$jscomp$0){if(!polygon$jscomp$0._){var group\x3d[],neighbors\x3d[polygon$jscomp$0];polygon$jscomp$0._\x3d1;for(groups.push(group);polygon$jscomp$0\x3dneighbors.pop();)group.push(polygon$jscomp$0),\npolygon$jscomp$0.forEach(function(ring){ring.forEach(function(arc){polygonsByArc[0\x3earc?~arc:arc].forEach(function(polygon){polygon._||(polygon._\x3d1,neighbors.push(polygon))})})})}});polygons$jscomp$0.forEach(function(polygon){delete polygon._});return{type:\x22MultiPolygon\x22,arcs:groups.map(function(polygons){var arcs\x3d[];polygons.forEach(function(polygon){polygon.forEach(function(ring){ring.forEach(function(arc){2\x3epolygonsByArc[0\x3earc?~arc:arc].length\x26\x26arcs.push(arc)})})});arcs\x3dstitch(topology,arcs);if(1\x3c\n(polygons\x3darcs.length))for(var i\x3d1,k\x3darea$jscomp$0(arcs[0]),ki;i\x3cpolygons;++i)(ki\x3darea$jscomp$0(arcs[i]))\x3ek\x26\x26(k\x3darcs[0],arcs[0]\x3darcs[i],arcs[i]\x3dk,k\x3dki);return arcs}).filter(function(arcs){return 0\x3carcs.length})}}function bisect(a,x){for(var lo\x3d0,hi\x3da.length;lo\x3chi;){var mid\x3dlo+hi\x3e\x3e\x3e1;a[mid]\x3cx?lo\x3dmid+1:hi\x3dmid}return lo}function untransform(transform){if(null\x3d\x3dtransform)return identity;var x0,y0,kx\x3dtransform.scale[0],ky\x3dtransform.scale[1],dx\x3dtransform.translate[0],dy\x3dtransform.translate[1];return function(input,\ni){i||(x0\x3dy0\x3d0);i\x3d2;var n\x3dinput.length,output\x3dArray(n),x1\x3dMath.round((input[0]-dx)/kx),y1\x3dMath.round((input[1]-dy)/ky);output[0]\x3dx1-x0;x0\x3dx1;output[1]\x3dy1-y0;for(y0\x3dy1;i\x3cn;)output[i]\x3dinput[i],++i;return output}}exports.bbox\x3dbbox$jscomp$0;exports.feature\x3dfunction(topology,o$jscomp$0){\x22string\x22\x3d\x3d\x3dtypeof o$jscomp$0\x26\x26(o$jscomp$0\x3dtopology.objects[o$jscomp$0]);return\x22GeometryCollection\x22\x3d\x3d\x3do$jscomp$0.type?{type:\x22FeatureCollection\x22,features:o$jscomp$0.geometries.map(function(o){return feature$1(topology,o)})}:\nfeature$1(topology,o$jscomp$0)};exports.merge\x3dfunction(topology){return object$jscomp$0(topology,mergeArcs.apply(this,arguments))};exports.mergeArcs\x3dmergeArcs;exports.mesh\x3dfunction(topology){return object$jscomp$0(topology,meshArcs.apply(this,arguments))};exports.meshArcs\x3dmeshArcs;exports.neighbors\x3dfunction(objects){function line(arcs,i){arcs.forEach(function(a){0\x3ea\x26\x26(a\x3d~a);var o\x3dindexesByArc[a];o?o.push(i):indexesByArc[a]\x3d[i]})}function polygon(arcs,i){arcs.forEach(function(arc){line(arc,i)})}function geometry(o$jscomp$0,\ni){if(\x22GeometryCollection\x22\x3d\x3d\x3do$jscomp$0.type)o$jscomp$0.geometries.forEach(function(o){geometry(o,i)});else if(o$jscomp$0.type in geometryType)geometryType[o$jscomp$0.type](o$jscomp$0.arcs,i)}var indexesByArc\x3d{},neighbors\x3dobjects.map(function(){return[]}),geometryType\x3d{LineString:line,MultiLineString:polygon,Polygon:polygon,MultiPolygon:function(arcs,i){arcs.forEach(function(arc){polygon(arc,i)})}};objects.forEach(geometry);for(var i$jscomp$0 in indexesByArc){objects\x3dindexesByArc[i$jscomp$0];for(var m\x3d\nobjects.length,j\x3d0;j\x3cm;++j)for(var k\x3dj+1;k\x3cm;++k){var ij\x3dobjects[j],ik\x3dobjects[k],n;(n\x3dneighbors[ij])[i$jscomp$0\x3dbisect(n,ik)]!\x3d\x3dik\x26\x26n.splice(i$jscomp$0,0,ik);(n\x3dneighbors[ik])[i$jscomp$0\x3dbisect(n,ij)]!\x3d\x3dij\x26\x26n.splice(i$jscomp$0,0,ij)}}return neighbors};exports.quantize\x3dfunction(topology,transform){function quantizePoint(point){return t(point)}function quantizeGeometry(input){switch(input.type){case \x22GeometryCollection\x22:var output\x3d{type:\x22GeometryCollection\x22,geometries:input.geometries.map(quantizeGeometry)};\nbreak;case \x22Point\x22:output\x3d{type:\x22Point\x22,coordinates:t(input.coordinates)};break;case \x22MultiPoint\x22:output\x3d{type:\x22MultiPoint\x22,coordinates:input.coordinates.map(quantizePoint)};break;default:return input}null!\x3dinput.id\x26\x26(output.id\x3dinput.id);null!\x3dinput.bbox\x26\x26(output.bbox\x3dinput.bbox);null!\x3dinput.properties\x26\x26(output.properties\x3dinput.properties);return output}if(topology.transform)throw Error(\x22already quantized\x22);if(transform\x26\x26transform.scale)var box\x3dtopology.bbox;else{if(!(2\x3c\x3d(n$jscomp$0\x3dMath.floor(transform))))throw Error(\x22n must be \u22652\x22);\nbox\x3dtopology.bbox||bbox$jscomp$0(topology);transform\x3dbox[0];var y0\x3dbox[1],x1\x3dbox[2],y1\x3dbox[3],n$jscomp$0;transform\x3d{scale:[x1-transform?(x1-transform)/(n$jscomp$0-1):1,y1-y0?(y1-y0)/(n$jscomp$0-1):1],translate:[transform,y0]}}var t\x3duntransform(transform),key;y0\x3dtopology.objects;x1\x3d{};for(key in y0)x1[key]\x3dquantizeGeometry(y0[key]);return{type:\x22Topology\x22,bbox:box,transform:transform,objects:x1,arcs:topology.arcs.map(function(input){var i\x3d0,j\x3d1,n\x3dinput.length,p,output\x3dArray(n);for(output[0]\x3dt(input[0],\n0);++i\x3cn;)if((p\x3dt(input[i],i))[0]||p[1])output[j++]\x3dp;1\x3d\x3d\x3dj\x26\x26(output[j++]\x3d[0,0]);output.length\x3dj;return output})}};exports.transform\x3dtransform$jscomp$0;exports.untransform\x3duntransform;Object.defineProperty(exports,\x22__esModule\x22,{value:!0})})}");
SHADOW_ENV.evalLoad("module$node_modules$d3_array$dist$d3_array.js", true , "shadow$provide.module$node_modules$d3_array$dist$d3_array\x3dfunction(global$jscomp$0,require,module,exports$jscomp$0){(function(global,factory){\x22object\x22\x3d\x3d\x3dtypeof exports$jscomp$0\x26\x26\x22undefined\x22!\x3d\x3dtypeof module?factory(exports$jscomp$0):\x22function\x22\x3d\x3d\x3dtypeof define\x26\x26define.amd?define([\x22exports\x22],factory):(global\x3dglobal||self,factory(global.d3\x3dglobal.d3||{}))})(this,function(exports){function ascending(a,b){return a\x3cb?-1:a\x3eb?1:a\x3e\x3db?0:NaN}function bisector(compare){1\x3d\x3d\x3dcompare.length\x26\x26(compare\x3dascendingComparator(compare));\nreturn{left:function(a,x,lo,hi){null\x3d\x3dlo\x26\x26(lo\x3d0);null\x3d\x3dhi\x26\x26(hi\x3da.length);for(;lo\x3chi;){var mid\x3dlo+hi\x3e\x3e\x3e1;0\x3ecompare(a[mid],x)?lo\x3dmid+1:hi\x3dmid}return lo},right:function(a,x,lo,hi){null\x3d\x3dlo\x26\x26(lo\x3d0);null\x3d\x3dhi\x26\x26(hi\x3da.length);for(;lo\x3chi;){var mid\x3dlo+hi\x3e\x3e\x3e1;0\x3ccompare(a[mid],x)?hi\x3dmid:lo\x3dmid+1}return lo}}}function ascendingComparator(f){return function(d,x){return ascending(f(d),x)}}function count$jscomp$0(values,valueof){var count\x3d0;if(void 0\x3d\x3d\x3dvalueof){values\x3d$jscomp.makeIterator(values);for(var $jscomp$key$value\x3d\nvalues.next();!$jscomp$key$value.done;$jscomp$key$value\x3dvalues.next())valueof\x3d$jscomp$key$value.value,null!\x3dvalueof\x26\x26(valueof\x3d+valueof)\x3e\x3dvalueof\x26\x26++count}else{var index$556\x3d-1,$jscomp$iter$280\x3d$jscomp.makeIterator(values);for($jscomp$key$value\x3d$jscomp$iter$280.next();!$jscomp$key$value.done;$jscomp$key$value\x3d$jscomp$iter$280.next())$jscomp$key$value\x3d$jscomp$key$value.value,null!\x3d($jscomp$key$value\x3dvalueof($jscomp$key$value,++index$556,values))\x26\x26($jscomp$key$value\x3d+$jscomp$key$value)\x3e\x3d$jscomp$key$value\x26\x26\n++count}return count}function length$jscomp$0(array){return array.length|0}function empty(length){return!(0\x3clength)}function arrayify(values){return\x22object\x22!\x3d\x3dtypeof values||\x22length\x22in values?values:Array.from(values)}function reducer(reduce){return function(values){return reduce.apply(null,$jscomp.arrayFromIterable(values))}}function variance(values,valueof){var count\x3d0,delta,mean\x3d0,sum\x3d0;if(void 0\x3d\x3d\x3dvalueof)for(values\x3d$jscomp.makeIterator(values),delta\x3dvalues.next();!delta.done;delta\x3dvalues.next())valueof\x3d\ndelta.value,null!\x3dvalueof\x26\x26(valueof\x3d+valueof)\x3e\x3dvalueof\x26\x26(delta\x3dvalueof-mean,mean+\x3ddelta/++count,sum+\x3ddelta*(valueof-mean));else{var index$560\x3d-1,$jscomp$iter$282\x3d$jscomp.makeIterator(values);for(delta\x3d$jscomp$iter$282.next();!delta.done;delta\x3d$jscomp$iter$282.next()){var value$561\x3ddelta.value;null!\x3d(value$561\x3dvalueof(value$561,++index$560,values))\x26\x26(value$561\x3d+value$561)\x3e\x3dvalue$561\x26\x26(delta\x3dvalue$561-mean,mean+\x3ddelta/++count,sum+\x3ddelta*(value$561-mean))}}if(1\x3ccount)return sum/(count-1)}function deviation(values,\nvalueof){return(values\x3dvariance(values,valueof))?Math.sqrt(values):values}function extent(values,valueof){var min,max;if(void 0\x3d\x3d\x3dvalueof){values\x3d$jscomp.makeIterator(values);for(var $jscomp$key$value\x3dvalues.next();!$jscomp$key$value.done;$jscomp$key$value\x3dvalues.next())valueof\x3d$jscomp$key$value.value,null!\x3dvalueof\x26\x26(void 0\x3d\x3d\x3dmin?valueof\x3e\x3dvalueof\x26\x26(min\x3dmax\x3dvalueof):(min\x3evalueof\x26\x26(min\x3dvalueof),max\x3cvalueof\x26\x26(max\x3dvalueof)))}else{var index$562\x3d-1,$jscomp$iter$284\x3d$jscomp.makeIterator(values);for($jscomp$key$value\x3d\n$jscomp$iter$284.next();!$jscomp$key$value.done;$jscomp$key$value\x3d$jscomp$iter$284.next())$jscomp$key$value\x3d$jscomp$key$value.value,null!\x3d($jscomp$key$value\x3dvalueof($jscomp$key$value,++index$562,values))\x26\x26(void 0\x3d\x3d\x3dmin?$jscomp$key$value\x3e\x3d$jscomp$key$value\x26\x26(min\x3dmax\x3d$jscomp$key$value):(min\x3e$jscomp$key$value\x26\x26(min\x3d$jscomp$key$value),max\x3c$jscomp$key$value\x26\x26(max\x3d$jscomp$key$value)))}return[min,max]}function identity(x){return x}function nest(values$jscomp$0,map,reduce,keys){return function regroup(values,\ni){if(i\x3e\x3dkeys.length)return reduce(values);for(var groups\x3dnew Map,keyof\x3dkeys[i++],index\x3d-1,$jscomp$iter$285\x3d$jscomp.makeIterator(values),$jscomp$key$value\x3d$jscomp$iter$285.next();!$jscomp$key$value.done;$jscomp$key$value\x3d$jscomp$iter$285.next()){$jscomp$key$value\x3d$jscomp$key$value.value;var key\x3dkeyof($jscomp$key$value,++index,values),group$568\x3dgroups.get(key);group$568?group$568.push($jscomp$key$value):groups.set(key,[$jscomp$key$value])}values\x3d$jscomp.makeIterator(groups);for(keyof\x3dvalues.next();!keyof.done;keyof\x3d\nvalues.next())index\x3d$jscomp.makeIterator(keyof.value),keyof\x3dindex.next().value,index\x3dindex.next().value,groups.set(keyof,regroup(index,i));return map(groups)}(values$jscomp$0,0)}function constant(x){return function(){return x}}function range$jscomp$0(start,stop,step){start\x3d+start;stop\x3d+stop;step\x3d2\x3e(n\x3darguments.length)?(stop\x3dstart,start\x3d0,1):3\x3en?1:+step;for(var i\x3d-1,n\x3dMath.max(0,Math.ceil((stop-start)/step))|0,range\x3dArray(n);++i\x3cn;)range[i]\x3dstart+i*step;return range}function tickIncrement(start,stop,\ncount){stop\x3d(stop-start)/Math.max(0,count);start\x3dMath.floor(Math.log(stop)/Math.LN10);stop/\x3dMath.pow(10,start);return 0\x3c\x3dstart?(stop\x3e\x3de10?10:stop\x3e\x3de5?5:stop\x3e\x3de2?2:1)*Math.pow(10,start):-Math.pow(10,-start)/(stop\x3e\x3de10?10:stop\x3e\x3de5?5:stop\x3e\x3de2?2:1)}function tickStep(start,stop,count){var step0\x3dMath.abs(stop-start)/Math.max(0,count);count\x3dMath.pow(10,Math.floor(Math.log(step0)/Math.LN10));step0/\x3dcount;step0\x3e\x3de10?count*\x3d10:step0\x3e\x3de5?count*\x3d5:step0\x3e\x3de2\x26\x26(count*\x3d2);return stop\x3cstart?-count:count}function sturges(values){return Math.ceil(Math.log(count$jscomp$0(values))/\nMath.LN2)+1}function bin(){function histogram(data){Array.isArray(data)||(data\x3dArray.from(data));var i,n\x3ddata.length,values\x3dArray(n);for(i\x3d0;i\x3cn;++i)values[i]\x3dvalue(data[i],i,data);i\x3ddomain(values);var x0\x3di[0],x1\x3di[1],tz\x3dthreshold(values,x0,x1);Array.isArray(tz)||(tz\x3dtickStep(x0,x1,tz),tz\x3drange$jscomp$0(Math.ceil(x0/tz)*tz,x1,tz));for(var m\x3dtz.length;tz[0]\x3c\x3dx0;)tz.shift(),--m;for(;tz[m-1]\x3ex1;)tz.pop(),--m;var bins\x3dArray(m+1);for(i\x3d0;i\x3c\x3dm;++i){var x\x3dbins[i]\x3d[];x.x0\x3d0\x3ci?tz[i-1]:x0;x.x1\x3di\x3cm?tz[i]:x1}for(i\x3d\n0;i\x3cn;++i)x\x3dvalues[i],x0\x3c\x3dx\x26\x26x\x3c\x3dx1\x26\x26bins[bisectRight(tz,x,0,m)].push(data[i]);return bins}var value\x3didentity,domain\x3dextent,threshold\x3dsturges;histogram.value\x3dfunction(_){return arguments.length?(value\x3d\x22function\x22\x3d\x3d\x3dtypeof _?_:constant(_),histogram):value};histogram.domain\x3dfunction(_){return arguments.length?(domain\x3d\x22function\x22\x3d\x3d\x3dtypeof _?_:constant([_[0],_[1]]),histogram):domain};histogram.thresholds\x3dfunction(_){return arguments.length?(threshold\x3d\x22function\x22\x3d\x3d\x3dtypeof _?_:Array.isArray(_)?constant(slice.call(_)):\nconstant(_),histogram):threshold};return histogram}function max$jscomp$0(values,valueof){var max;if(void 0\x3d\x3d\x3dvalueof){values\x3d$jscomp.makeIterator(values);for(var $jscomp$key$value\x3dvalues.next();!$jscomp$key$value.done;$jscomp$key$value\x3dvalues.next())valueof\x3d$jscomp$key$value.value,null!\x3dvalueof\x26\x26(max\x3cvalueof||void 0\x3d\x3d\x3dmax\x26\x26valueof\x3e\x3dvalueof)\x26\x26(max\x3dvalueof)}else{var index$571\x3d-1,$jscomp$iter$288\x3d$jscomp.makeIterator(values);for($jscomp$key$value\x3d$jscomp$iter$288.next();!$jscomp$key$value.done;$jscomp$key$value\x3d\n$jscomp$iter$288.next())$jscomp$key$value\x3d$jscomp$key$value.value,null!\x3d($jscomp$key$value\x3dvalueof($jscomp$key$value,++index$571,values))\x26\x26(max\x3c$jscomp$key$value||void 0\x3d\x3d\x3dmax\x26\x26$jscomp$key$value\x3e\x3d$jscomp$key$value)\x26\x26(max\x3d$jscomp$key$value)}return max}function min$jscomp$0(values,valueof){var min;if(void 0\x3d\x3d\x3dvalueof){values\x3d$jscomp.makeIterator(values);for(var $jscomp$key$value\x3dvalues.next();!$jscomp$key$value.done;$jscomp$key$value\x3dvalues.next())valueof\x3d$jscomp$key$value.value,null!\x3dvalueof\x26\x26(min\x3e\nvalueof||void 0\x3d\x3d\x3dmin\x26\x26valueof\x3e\x3dvalueof)\x26\x26(min\x3dvalueof)}else{var index$573\x3d-1,$jscomp$iter$290\x3d$jscomp.makeIterator(values);for($jscomp$key$value\x3d$jscomp$iter$290.next();!$jscomp$key$value.done;$jscomp$key$value\x3d$jscomp$iter$290.next())$jscomp$key$value\x3d$jscomp$key$value.value,null!\x3d($jscomp$key$value\x3dvalueof($jscomp$key$value,++index$573,values))\x26\x26(min\x3e$jscomp$key$value||void 0\x3d\x3d\x3dmin\x26\x26$jscomp$key$value\x3e\x3d$jscomp$key$value)\x26\x26(min\x3d$jscomp$key$value)}return min}function quickselect(array,k,left,right,\ncompare){left\x3dvoid 0\x3d\x3d\x3dleft?0:left;right\x3dvoid 0\x3d\x3d\x3dright?array.length-1:right;for(compare\x3dvoid 0\x3d\x3d\x3dcompare?ascending:compare;right\x3eleft;){if(600\x3cright-left){var n\x3dright-left+1,m\x3dk-left+1,z\x3dMath.log(n),s\x3d.5*Math.exp(2*z/3);z\x3d.5*Math.sqrt(z*s*(n-s)/n)*(0\x3em-n/2?-1:1);quickselect(array,k,Math.max(left,Math.floor(k-m*s/n+z)),Math.min(right,Math.floor(k+(n-m)*s/n+z)),compare)}n\x3darray[k];m\x3dleft;s\x3dright;swap(array,left,k);for(0\x3ccompare(array[right],n)\x26\x26swap(array,left,right);m\x3cs;){swap(array,m,s);++m;for(--s;0\x3e\ncompare(array[m],n);)++m;for(;0\x3ccompare(array[s],n);)--s}0\x3d\x3d\x3dcompare(array[left],n)?swap(array,left,s):(++s,swap(array,s,right));s\x3c\x3dk\x26\x26(left\x3ds+1);k\x3c\x3ds\x26\x26(right\x3ds-1)}return array}function swap(array,i,j){var t\x3darray[i];array[i]\x3darray[j];array[j]\x3dt}function number(x){return null\x3d\x3d\x3dx?NaN:+x}function numbers(values,valueof){var index$575,$jscomp$iter$292,$jscomp$key$value,value$576,$jscomp$iter$291,value;return $jscomp.generator.createGenerator(numbers,function($jscomp$generator$context){switch($jscomp$generator$context.nextAddress){case 1:if(void 0\x3d\x3d\x3d\nvalueof){$jscomp$generator$context.jumpTo(2);break}index$575\x3d-1;$jscomp$iter$292\x3d$jscomp.makeIterator(values);$jscomp$key$value\x3d$jscomp$iter$292.next();case 4:if($jscomp$key$value.done){$jscomp$generator$context.jumpTo(0);break}value$576\x3d$jscomp$key$value.value;if(!(null!\x3d(value$576\x3dvalueof(value$576,++index$575,values))\x26\x26(value$576\x3d+value$576)\x3e\x3dvalue$576)){$jscomp$generator$context.jumpTo(5);break}return $jscomp$generator$context.yield(value$576,5);case 5:$jscomp$key$value\x3d$jscomp$iter$292.next();\n$jscomp$generator$context.jumpTo(4);break;case 2:$jscomp$iter$291\x3d$jscomp.makeIterator(values),$jscomp$key$value\x3d$jscomp$iter$291.next();case 9:if($jscomp$key$value.done){$jscomp$generator$context.jumpTo(0);break}value\x3d$jscomp$key$value.value;if(!(null!\x3dvalue\x26\x26(value\x3d+value)\x3e\x3dvalue)){$jscomp$generator$context.jumpTo(10);break}return $jscomp$generator$context.yield(value,10);case 10:$jscomp$key$value\x3d$jscomp$iter$291.next(),$jscomp$generator$context.jumpTo(9)}})}function quantile(values,p,valueof){values\x3d\nFloat64Array.from(numbers(values,valueof));if(valueof\x3dvalues.length){if(0\x3e\x3d(p\x3d+p)||2\x3evalueof)return min$jscomp$0(values);if(1\x3c\x3dp)return max$jscomp$0(values);p*\x3dvalueof-1;valueof\x3dMath.floor(p);var value0\x3dmax$jscomp$0(quickselect(values,valueof).subarray(0,valueof+1));values\x3dmin$jscomp$0(values.subarray(valueof+1));return value0+(values-value0)*(p-valueof)}}function maxIndex(values,valueof){var maxIndex\x3d-1,index\x3d-1;if(void 0\x3d\x3d\x3dvalueof){values\x3d$jscomp.makeIterator(values);for(var $jscomp$key$value\x3dvalues.next();!$jscomp$key$value.done;$jscomp$key$value\x3d\nvalues.next())if(valueof\x3d$jscomp$key$value.value,++index,null!\x3dvalueof\x26\x26(max\x3cvalueof||void 0\x3d\x3d\x3dmax\x26\x26valueof\x3e\x3dvalueof)){var max\x3dvalueof;maxIndex\x3dindex}}else{var $jscomp$iter$294\x3d$jscomp.makeIterator(values);for($jscomp$key$value\x3d$jscomp$iter$294.next();!$jscomp$key$value.done;$jscomp$key$value\x3d$jscomp$iter$294.next())$jscomp$key$value\x3d$jscomp$key$value.value,null!\x3d($jscomp$key$value\x3dvalueof($jscomp$key$value,++index,values))\x26\x26(max\x3c$jscomp$key$value||void 0\x3d\x3d\x3dmax\x26\x26$jscomp$key$value\x3e\x3d$jscomp$key$value)\x26\x26\n(max\x3d$jscomp$key$value,maxIndex\x3dindex)}return maxIndex}function flatten(arrays){var $jscomp$iter$297,$jscomp$key$array,array$580;return $jscomp.generator.createGenerator(flatten,function($jscomp$generator$context){1\x3d\x3d$jscomp$generator$context.nextAddress\x26\x26($jscomp$iter$297\x3d$jscomp.makeIterator(arrays),$jscomp$key$array\x3d$jscomp$iter$297.next());if(3!\x3d$jscomp$generator$context.nextAddress){if($jscomp$key$array.done)return $jscomp$generator$context.jumpTo(0);array$580\x3d$jscomp$key$array.value;return $jscomp$generator$context.yieldAll(array$580,\n3)}$jscomp$key$array\x3d$jscomp$iter$297.next();return $jscomp$generator$context.jumpTo(2)})}function minIndex(values,valueof){var minIndex\x3d-1,index\x3d-1;if(void 0\x3d\x3d\x3dvalueof){values\x3d$jscomp.makeIterator(values);for(var $jscomp$key$value\x3dvalues.next();!$jscomp$key$value.done;$jscomp$key$value\x3dvalues.next())if(valueof\x3d$jscomp$key$value.value,++index,null!\x3dvalueof\x26\x26(min\x3evalueof||void 0\x3d\x3d\x3dmin\x26\x26valueof\x3e\x3dvalueof)){var min\x3dvalueof;minIndex\x3dindex}}else{var $jscomp$iter$299\x3d$jscomp.makeIterator(values);for($jscomp$key$value\x3d\n$jscomp$iter$299.next();!$jscomp$key$value.done;$jscomp$key$value\x3d$jscomp$iter$299.next())$jscomp$key$value\x3d$jscomp$key$value.value,null!\x3d($jscomp$key$value\x3dvalueof($jscomp$key$value,++index,values))\x26\x26(min\x3e$jscomp$key$value||void 0\x3d\x3d\x3dmin\x26\x26$jscomp$key$value\x3e\x3d$jscomp$key$value)\x26\x26(min\x3d$jscomp$key$value,minIndex\x3dindex)}return minIndex}function pair(a,b){return[a,b]}function leastIndex(values,compare){compare\x3dvoid 0\x3d\x3d\x3dcompare?ascending:compare;if(1\x3d\x3d\x3dcompare.length)return minIndex(values,compare);var min\x3d\n-1,index\x3d-1;values\x3d$jscomp.makeIterator(values);for(var $jscomp$key$value\x3dvalues.next();!$jscomp$key$value.done;$jscomp$key$value\x3dvalues.next())if($jscomp$key$value\x3d$jscomp$key$value.value,++index,0\x3emin?0\x3d\x3d\x3dcompare($jscomp$key$value,$jscomp$key$value):0\x3ecompare($jscomp$key$value,minValue)){var minValue\x3d$jscomp$key$value;min\x3dindex}return min}function transpose$jscomp$0(matrix){if(!(n\x3dmatrix.length))return[];for(var i\x3d-1,m\x3dmin$jscomp$0(matrix,length$1),transpose\x3dArray(m);++i\x3cm;)for(var j\x3d-1,n,row\x3dtranspose[i]\x3d\nArray(n);++j\x3cn;)row[j]\x3dmatrix[j][i];return transpose}function length$1(d){return d.length}var ascendingBisect\x3dbisector(ascending),bisectRight\x3dascendingBisect.right;ascendingBisect\x3dascendingBisect.left;var slice\x3dArray.prototype.slice,e10\x3dMath.sqrt(50),e5\x3dMath.sqrt(10),e2\x3dMath.sqrt(2);exports.ascending\x3dascending;exports.bin\x3dbin;exports.bisect\x3dbisectRight;exports.bisectLeft\x3dascendingBisect;exports.bisectRight\x3dbisectRight;exports.bisector\x3dbisector;exports.count\x3dcount$jscomp$0;exports.cross\x3dfunction(values){for(var $jscomp$restParams\x3d\n[],$jscomp$restIndex\x3d0;$jscomp$restIndex\x3carguments.length;++$jscomp$restIndex)$jscomp$restParams[$jscomp$restIndex-0]\x3darguments[$jscomp$restIndex];var values$558\x3d$jscomp$restParams;$jscomp$restParams\x3d\x22function\x22\x3d\x3d\x3dtypeof values$558[values$558.length-1]\x26\x26reducer(values$558.pop());values$558\x3dvalues$558.map(arrayify);$jscomp$restIndex\x3dvalues$558.map(length$jscomp$0);var j$jscomp$0\x3dvalues$558.length-1,index$559\x3dArray(j$jscomp$0+1).fill(0),product\x3d[];if(0\x3ej$jscomp$0||$jscomp$restIndex.some(empty))return product;\nfor(;;){product.push(index$559.map(function(j,i){return values$558[i][j]}));for(var i$jscomp$0\x3dj$jscomp$0;++index$559[i$jscomp$0]\x3d\x3d\x3d$jscomp$restIndex[i$jscomp$0];){if(0\x3d\x3d\x3di$jscomp$0)return $jscomp$restParams?product.map($jscomp$restParams):product;index$559[i$jscomp$0--]\x3d0}}};exports.cumsum\x3dfunction(values,valueof){var sum\x3d0,index\x3d0;return Float64Array.from(values,void 0\x3d\x3d\x3dvalueof?function(v){return sum+\x3d+v||0}:function(v){return sum+\x3d+valueof(v,index++,values)||0})};exports.descending\x3dfunction(a,\nb){return b\x3ca?-1:b\x3ea?1:b\x3e\x3da?0:NaN};exports.deviation\x3ddeviation;exports.extent\x3dextent;exports.greatest\x3dfunction(values,compare){compare\x3dvoid 0\x3d\x3d\x3dcompare?ascending:compare;var defined\x3d!1;if(1\x3d\x3d\x3dcompare.length){values\x3d$jscomp.makeIterator(values);for(var $jscomp$key$element\x3dvalues.next();!$jscomp$key$element.done;$jscomp$key$element\x3dvalues.next()){$jscomp$key$element\x3d$jscomp$key$element.value;var value\x3dcompare($jscomp$key$element);if(defined?0\x3cascending(value,maxValue):0\x3d\x3d\x3dascending(value,value)){var max\x3d\n$jscomp$key$element;var maxValue\x3dvalue;defined\x3d!0}}}else for(maxValue\x3d$jscomp.makeIterator(values),values\x3dmaxValue.next();!values.done;values\x3dmaxValue.next())if(values\x3dvalues.value,defined?0\x3ccompare(values,max):0\x3d\x3d\x3dcompare(values,values))max\x3dvalues,defined\x3d!0;return max};exports.greatestIndex\x3dfunction(values,compare){compare\x3dvoid 0\x3d\x3d\x3dcompare?ascending:compare;if(1\x3d\x3d\x3dcompare.length)return maxIndex(values,compare);var max\x3d-1,index\x3d-1;values\x3d$jscomp.makeIterator(values);for(var $jscomp$key$value\x3dvalues.next();!$jscomp$key$value.done;$jscomp$key$value\x3d\nvalues.next())if($jscomp$key$value\x3d$jscomp$key$value.value,++index,0\x3emax?0\x3d\x3d\x3dcompare($jscomp$key$value,$jscomp$key$value):0\x3ccompare($jscomp$key$value,maxValue)){var maxValue\x3d$jscomp$key$value;max\x3dindex}return max};exports.group\x3dfunction(values,keys){for(var $jscomp$restParams\x3d[],$jscomp$restIndex\x3d1;$jscomp$restIndex\x3carguments.length;++$jscomp$restIndex)$jscomp$restParams[$jscomp$restIndex-1]\x3darguments[$jscomp$restIndex];return nest(values,identity,identity,$jscomp$restParams)};exports.groups\x3dfunction(values,\nkeys){for(var $jscomp$restParams\x3d[],$jscomp$restIndex\x3d1;$jscomp$restIndex\x3carguments.length;++$jscomp$restIndex)$jscomp$restParams[$jscomp$restIndex-1]\x3darguments[$jscomp$restIndex];return nest(values,Array.from,identity,$jscomp$restParams)};exports.histogram\x3dbin;exports.least\x3dfunction(values,compare){compare\x3dvoid 0\x3d\x3d\x3dcompare?ascending:compare;var defined\x3d!1;if(1\x3d\x3d\x3dcompare.length){values\x3d$jscomp.makeIterator(values);for(var $jscomp$key$element\x3dvalues.next();!$jscomp$key$element.done;$jscomp$key$element\x3d\nvalues.next()){$jscomp$key$element\x3d$jscomp$key$element.value;var value\x3dcompare($jscomp$key$element);if(defined?0\x3eascending(value,minValue):0\x3d\x3d\x3dascending(value,value)){var min\x3d$jscomp$key$element;var minValue\x3dvalue;defined\x3d!0}}}else for(minValue\x3d$jscomp.makeIterator(values),values\x3dminValue.next();!values.done;values\x3dminValue.next())if(values\x3dvalues.value,defined?0\x3ecompare(values,min):0\x3d\x3d\x3dcompare(values,values))min\x3dvalues,defined\x3d!0;return min};exports.leastIndex\x3dleastIndex;exports.max\x3dmax$jscomp$0;\nexports.maxIndex\x3dmaxIndex;exports.mean\x3dfunction(values,valueof){var count\x3d0,sum\x3d0;if(void 0\x3d\x3d\x3dvalueof){values\x3d$jscomp.makeIterator(values);for(var $jscomp$key$value\x3dvalues.next();!$jscomp$key$value.done;$jscomp$key$value\x3dvalues.next())valueof\x3d$jscomp$key$value.value,null!\x3dvalueof\x26\x26(valueof\x3d+valueof)\x3e\x3dvalueof\x26\x26(++count,sum+\x3dvalueof)}else{var index$578\x3d-1,$jscomp$iter$296\x3d$jscomp.makeIterator(values);for($jscomp$key$value\x3d$jscomp$iter$296.next();!$jscomp$key$value.done;$jscomp$key$value\x3d$jscomp$iter$296.next())$jscomp$key$value\x3d\n$jscomp$key$value.value,null!\x3d($jscomp$key$value\x3dvalueof($jscomp$key$value,++index$578,values))\x26\x26($jscomp$key$value\x3d+$jscomp$key$value)\x3e\x3d$jscomp$key$value\x26\x26(++count,sum+\x3d$jscomp$key$value)}if(count)return sum/count};exports.median\x3dfunction(values,valueof){return quantile(values,.5,valueof)};exports.merge\x3dfunction(arrays){return Array.from(flatten(arrays))};exports.min\x3dmin$jscomp$0;exports.minIndex\x3dminIndex;exports.pairs\x3dfunction(values,pairof){pairof\x3dvoid 0\x3d\x3d\x3dpairof?pair:pairof;var pairs\x3d[],first\x3d\n!1;values\x3d$jscomp.makeIterator(values);for(var $jscomp$key$value\x3dvalues.next();!$jscomp$key$value.done;$jscomp$key$value\x3dvalues.next()){$jscomp$key$value\x3d$jscomp$key$value.value;first\x26\x26pairs.push(pairof(previous,$jscomp$key$value));var previous\x3d$jscomp$key$value;first\x3d!0}return pairs};exports.permute\x3dfunction(source,keys){return Array.from(keys,function(key){return source[key]})};exports.quantile\x3dquantile;exports.quantileSorted\x3dfunction(values,p,valueof){valueof\x3dvoid 0\x3d\x3d\x3dvalueof?number:valueof;if(n\x3d\nvalues.length){if(0\x3e\x3d(p\x3d+p)||2\x3en)return+valueof(values[0],0,values);if(1\x3c\x3dp)return+valueof(values[n-1],n-1,values);var n;p*\x3dn-1;n\x3dMath.floor(p);var value0\x3d+valueof(values[n],n,values);values\x3d+valueof(values[n+1],n+1,values);return value0+(values-value0)*(p-n)}};exports.quickselect\x3dquickselect;exports.range\x3drange$jscomp$0;exports.rollup\x3dfunction(values,reduce,keys){for(var $jscomp$restParams\x3d[],$jscomp$restIndex\x3d2;$jscomp$restIndex\x3carguments.length;++$jscomp$restIndex)$jscomp$restParams[$jscomp$restIndex-\n2]\x3darguments[$jscomp$restIndex];return nest(values,identity,reduce,$jscomp$restParams)};exports.rollups\x3dfunction(values,reduce,keys){for(var $jscomp$restParams\x3d[],$jscomp$restIndex\x3d2;$jscomp$restIndex\x3carguments.length;++$jscomp$restIndex)$jscomp$restParams[$jscomp$restIndex-2]\x3darguments[$jscomp$restIndex];return nest(values,Array.from,reduce,$jscomp$restParams)};exports.scan\x3dfunction(values,compare){values\x3dleastIndex(values,compare);return 0\x3evalues?void 0:values};exports.shuffle\x3dfunction(array,i0,\ni1){i0\x3dvoid 0\x3d\x3d\x3di0?0:i0;i1\x3dvoid 0\x3d\x3d\x3di1?array.length:i1;i1-\x3di0\x3d+i0;for(var t,i;i1;)i\x3dMath.random()*i1--|0,t\x3darray[i1+i0],array[i1+i0]\x3darray[i+i0],array[i+i0]\x3dt;return array};exports.sum\x3dfunction(values,valueof){var sum\x3d0;if(void 0\x3d\x3d\x3dvalueof){values\x3d$jscomp.makeIterator(values);for(var $jscomp$key$value\x3dvalues.next();!$jscomp$key$value.done;$jscomp$key$value\x3dvalues.next())if(valueof\x3d$jscomp$key$value.value,valueof\x3d+valueof)sum+\x3dvalueof}else{var index$584\x3d-1,$jscomp$iter$308\x3d$jscomp.makeIterator(values);\nfor($jscomp$key$value\x3d$jscomp$iter$308.next();!$jscomp$key$value.done;$jscomp$key$value\x3d$jscomp$iter$308.next())if($jscomp$key$value\x3d$jscomp$key$value.value,$jscomp$key$value\x3d+valueof($jscomp$key$value,++index$584,values))sum+\x3d$jscomp$key$value}return sum};exports.thresholdFreedmanDiaconis\x3dfunction(values,min,max){return Math.ceil((max-min)/(2*(quantile(values,.75)-quantile(values,.25))*Math.pow(count$jscomp$0(values),-1/3)))};exports.thresholdScott\x3dfunction(values,min,max){return Math.ceil((max-\nmin)/(3.5*deviation(values)*Math.pow(count$jscomp$0(values),-1/3)))};exports.thresholdSturges\x3dsturges;exports.tickIncrement\x3dtickIncrement;exports.tickStep\x3dtickStep;exports.ticks\x3dfunction(start,stop,count){var reverse,i\x3d-1,step;stop\x3d+stop;start\x3d+start;count\x3d+count;if(start\x3d\x3d\x3dstop\x26\x260\x3ccount)return[start];if(reverse\x3dstop\x3cstart){var n\x3dstart;start\x3dstop;stop\x3dn}if(0\x3d\x3d\x3d(step\x3dtickIncrement(start,stop,count))||!isFinite(step))return[];if(0\x3cstep)for(start\x3dMath.ceil(start/step),stop\x3dMath.floor(stop/step),stop\x3d\nArray(n\x3dMath.ceil(stop-start+1));++i\x3cn;)stop[i]\x3d(start+i)*step;else for(start\x3dMath.floor(start*step),stop\x3dMath.ceil(stop*step),stop\x3dArray(n\x3dMath.ceil(start-stop+1));++i\x3cn;)stop[i]\x3d(start-i)/step;reverse\x26\x26stop.reverse();return stop};exports.transpose\x3dtranspose$jscomp$0;exports.variance\x3dvariance;exports.zip\x3dfunction(){return transpose$jscomp$0(arguments)};Object.defineProperty(exports,\x22__esModule\x22,{value:!0})})}");
SHADOW_ENV.evalLoad("module$node_modules$d3_format$dist$d3_format.js", true , "shadow$provide.module$node_modules$d3_format$dist$d3_format\x3dfunction(global$jscomp$0,require,module,exports$jscomp$0){(function(global,factory){\x22object\x22\x3d\x3d\x3dtypeof exports$jscomp$0\x26\x26\x22undefined\x22!\x3d\x3dtypeof module?factory(exports$jscomp$0):\x22function\x22\x3d\x3d\x3dtypeof define\x26\x26define.amd?define([\x22exports\x22],factory):(global\x3dglobal||self,factory(global.d3\x3dglobal.d3||{}))})(this,function(exports){function formatDecimal(x,p){if(0\x3e(p\x3d(x\x3dp?x.toExponential(p-1):x.toExponential()).indexOf(\x22e\x22)))return null;var coefficient\x3d\nx.slice(0,p);return[1\x3ccoefficient.length?coefficient[0]+coefficient.slice(2):coefficient,+x.slice(p+1)]}function exponent(x){return x\x3dformatDecimal(Math.abs(x)),x?x[1]:NaN}function formatGroup(grouping,thousands){return function(value,width){for(var i\x3dvalue.length,t\x3d[],j\x3d0,g\x3dgrouping[0],length\x3d0;0\x3ci\x26\x260\x3cg;){length+g+1\x3ewidth\x26\x26(g\x3dMath.max(1,width-length));t.push(value.substring(i-\x3dg,i+g));if((length+\x3dg+1)\x3ewidth)break;g\x3dgrouping[j\x3d(j+1)%grouping.length]}return t.reverse().join(thousands)}}function formatNumerals(numerals){return function(value){return value.replace(/[0-9]/g,\nfunction(i){return numerals[+i]})}}function formatSpecifier(specifier){if(!(match\x3dre.exec(specifier)))throw Error(\x22invalid format: \x22+specifier);var match;return new FormatSpecifier({fill:match[1],align:match[2],sign:match[3],symbol:match[4],zero:match[5],width:match[6],comma:match[7],precision:match[8]\x26\x26match[8].slice(1),trim:match[9],type:match[10]})}function FormatSpecifier(specifier){this.fill\x3dvoid 0\x3d\x3d\x3dspecifier.fill?\x22 \x22:specifier.fill+\x22\x22;this.align\x3dvoid 0\x3d\x3d\x3dspecifier.align?\x22\\x3e\x22:specifier.align+\n\x22\x22;this.sign\x3dvoid 0\x3d\x3d\x3dspecifier.sign?\x22-\x22:specifier.sign+\x22\x22;this.symbol\x3dvoid 0\x3d\x3d\x3dspecifier.symbol?\x22\x22:specifier.symbol+\x22\x22;this.zero\x3d!!specifier.zero;this.width\x3dvoid 0\x3d\x3d\x3dspecifier.width?void 0:+specifier.width;this.comma\x3d!!specifier.comma;this.precision\x3dvoid 0\x3d\x3d\x3dspecifier.precision?void 0:+specifier.precision;this.trim\x3d!!specifier.trim;this.type\x3dvoid 0\x3d\x3d\x3dspecifier.type?\x22\x22:specifier.type+\x22\x22}function formatRounded(x,p){p\x3dformatDecimal(x,p);if(!p)return x+\x22\x22;x\x3dp[0];p\x3dp[1];return 0\x3ep?\x220.\x22+Array(-p).join(\x220\x22)+\nx:x.length\x3ep+1?x.slice(0,p+1)+\x22.\x22+x.slice(p+1):x+Array(p-x.length+2).join(\x220\x22)}function identity(x){return x}function formatLocale(locale){function newFormat(specifier){function format(value){var valuePrefix\x3dprefix,valueSuffix\x3dsuffix,n,c;if(\x22c\x22\x3d\x3d\x3dtype)valueSuffix\x3dformatType(value)+valueSuffix,value\x3d\x22\x22;else{value\x3d+value;var i\x3d0\x3evalue||0\x3e1/value;value\x3disNaN(value)?nan:formatType(Math.abs(value),precision);if(trim){var n$jscomp$0\x3dvalue.length,i$jscomp$0\x3d1,i0\x3d-1;a:for(;i$jscomp$0\x3cn$jscomp$0;++i$jscomp$0)switch(value[i$jscomp$0]){case \x22.\x22:i0\x3d\nn\x3di$jscomp$0;break;case \x220\x22:0\x3d\x3d\x3di0\x26\x26(i0\x3di$jscomp$0);n\x3di$jscomp$0;break;default:if(!+value[i$jscomp$0])break a;0\x3ci0\x26\x26(i0\x3d0)}value\x3d0\x3ci0?value.slice(0,i0)+value.slice(n+1):value}i\x26\x260\x3d\x3d\x3d+value\x26\x26\x22+\x22!\x3d\x3dsign\x26\x26(i\x3d!1);valuePrefix\x3d(i?\x22(\x22\x3d\x3d\x3dsign?sign:minus:\x22-\x22\x3d\x3d\x3dsign||\x22(\x22\x3d\x3d\x3dsign?\x22\x22:sign)+valuePrefix;valueSuffix\x3d(\x22s\x22\x3d\x3d\x3dtype?prefixes[8+prefixExponent/3]:\x22\x22)+valueSuffix+(i\x26\x26\x22(\x22\x3d\x3d\x3dsign?\x22)\x22:\x22\x22);if(maybeSuffix)for(i\x3d-1,n\x3dvalue.length;++i\x3cn;)if(c\x3dvalue.charCodeAt(i),48\x3ec||57\x3cc){valueSuffix\x3d(46\x3d\x3d\x3dc?decimal+value.slice(i+\n1):value.slice(i))+valueSuffix;value\x3dvalue.slice(0,i);break}}comma\x26\x26!zero\x26\x26(value\x3dgroup(value,Infinity));c\x3dvaluePrefix.length+value.length+valueSuffix.length;i\x3dc\x3cwidth?Array(width-c+1).join(fill):\x22\x22;comma\x26\x26zero\x26\x26(value\x3dgroup(i+value,i.length?width-valueSuffix.length:Infinity),i\x3d\x22\x22);switch(align){case \x22\\x3c\x22:value\x3dvaluePrefix+value+valueSuffix+i;break;case \x22\\x3d\x22:value\x3dvaluePrefix+i+value+valueSuffix;break;case \x22^\x22:value\x3di.slice(0,c\x3di.length\x3e\x3e1)+valuePrefix+value+valueSuffix+i.slice(c);break;default:value\x3d\ni+valuePrefix+value+valueSuffix}return numerals(value)}specifier\x3dformatSpecifier(specifier);var fill\x3dspecifier.fill,align\x3dspecifier.align,sign\x3dspecifier.sign,symbol\x3dspecifier.symbol,zero\x3dspecifier.zero,width\x3dspecifier.width,comma\x3dspecifier.comma,precision\x3dspecifier.precision,trim\x3dspecifier.trim,type\x3dspecifier.type;\x22n\x22\x3d\x3d\x3dtype?(comma\x3d!0,type\x3d\x22g\x22):formatTypes[type]||(void 0\x3d\x3d\x3dprecision\x26\x26(precision\x3d12),trim\x3d!0,type\x3d\x22g\x22);if(zero||\x220\x22\x3d\x3d\x3dfill\x26\x26\x22\\x3d\x22\x3d\x3d\x3dalign)zero\x3d!0,fill\x3d\x220\x22,align\x3d\x22\\x3d\x22;var prefix\x3d\x22$\x22\x3d\x3d\x3d\nsymbol?currencyPrefix:\x22#\x22\x3d\x3d\x3dsymbol\x26\x26/[boxX]/.test(type)?\x220\x22+type.toLowerCase():\x22\x22,suffix\x3d\x22$\x22\x3d\x3d\x3dsymbol?currencySuffix:/[%p]/.test(type)?percent:\x22\x22,formatType\x3dformatTypes[type],maybeSuffix\x3d/[defgprs%]/.test(type);precision\x3dvoid 0\x3d\x3d\x3dprecision?6:/[gprs]/.test(type)?Math.max(1,Math.min(21,precision)):Math.max(0,Math.min(20,precision));format.toString\x3dfunction(){return specifier+\x22\x22};return format}var group\x3dvoid 0\x3d\x3d\x3dlocale.grouping||void 0\x3d\x3d\x3dlocale.thousands?identity:formatGroup(map.call(locale.grouping,\nNumber),locale.thousands+\x22\x22),currencyPrefix\x3dvoid 0\x3d\x3d\x3dlocale.currency?\x22\x22:locale.currency[0]+\x22\x22,currencySuffix\x3dvoid 0\x3d\x3d\x3dlocale.currency?\x22\x22:locale.currency[1]+\x22\x22,decimal\x3dvoid 0\x3d\x3d\x3dlocale.decimal?\x22.\x22:locale.decimal+\x22\x22,numerals\x3dvoid 0\x3d\x3d\x3dlocale.numerals?identity:formatNumerals(map.call(locale.numerals,String)),percent\x3dvoid 0\x3d\x3d\x3dlocale.percent?\x22%\x22:locale.percent+\x22\x22,minus\x3dvoid 0\x3d\x3d\x3dlocale.minus?\x22-\x22:locale.minus+\x22\x22,nan\x3dvoid 0\x3d\x3d\x3dlocale.nan?\x22NaN\x22:locale.nan+\x22\x22;return{format:newFormat,formatPrefix:function(specifier,\nvalue$jscomp$0){var f\x3dnewFormat((specifier\x3dformatSpecifier(specifier),specifier.type\x3d\x22f\x22,specifier));specifier\x3d3*Math.max(-8,Math.min(8,Math.floor(exponent(value$jscomp$0)/3)));var k\x3dMath.pow(10,-specifier),prefix\x3dprefixes[8+specifier/3];return function(value){return f(k*value)+prefix}}}}function defaultLocale(definition){locale\x3dformatLocale(definition);exports.format\x3dlocale.format;exports.formatPrefix\x3dlocale.formatPrefix;return locale}var re\x3d/^(?:(.)?([\x3c\x3e\x3d^]))?([+\\-( ])?([$#])?(0)?(\\d+)?(,)?(\\.\\d+)?(~)?([a-z%])?$/i;\nformatSpecifier.prototype\x3dFormatSpecifier.prototype;FormatSpecifier.prototype.toString\x3dfunction(){return this.fill+this.align+this.sign+this.symbol+(this.zero?\x220\x22:\x22\x22)+(void 0\x3d\x3d\x3dthis.width?\x22\x22:Math.max(1,this.width|0))+(this.comma?\x22,\x22:\x22\x22)+(void 0\x3d\x3d\x3dthis.precision?\x22\x22:\x22.\x22+Math.max(0,this.precision|0))+(this.trim?\x22~\x22:\x22\x22)+this.type};var prefixExponent,formatTypes\x3d{\x22%\x22:function(x,p){return(100*x).toFixed(p)},b:function(x){return Math.round(x).toString(2)},c:function(x){return x+\x22\x22},d:function(x){return Math.round(x).toString(10)},\ne:function(x,p){return x.toExponential(p)},f:function(x,p){return x.toFixed(p)},g:function(x,p){return x.toPrecision(p)},o:function(x){return Math.round(x).toString(8)},p:function(x,p){return formatRounded(100*x,p)},r:formatRounded,s:function(x,p){var d\x3dformatDecimal(x,p);if(!d)return x+\x22\x22;var coefficient\x3dd[0];d\x3dd[1];d\x3dd-(prefixExponent\x3d3*Math.max(-8,Math.min(8,Math.floor(d/3))))+1;var n\x3dcoefficient.length;return d\x3d\x3d\x3dn?coefficient:d\x3en?coefficient+Array(d-n+1).join(\x220\x22):0\x3cd?coefficient.slice(0,d)+\n\x22.\x22+coefficient.slice(d):\x220.\x22+Array(1-d).join(\x220\x22)+formatDecimal(x,Math.max(0,p+d-1))[0]},X:function(x){return Math.round(x).toString(16).toUpperCase()},x:function(x){return Math.round(x).toString(16)}},map\x3dArray.prototype.map,prefixes\x3d\x22y z a f p n \xb5 m  k M G T P E Z Y\x22.split(\x22 \x22),locale;defaultLocale({decimal:\x22.\x22,thousands:\x22,\x22,grouping:[3],currency:[\x22$\x22,\x22\x22],minus:\x22-\x22});exports.FormatSpecifier\x3dFormatSpecifier;exports.formatDefaultLocale\x3ddefaultLocale;exports.formatLocale\x3dformatLocale;exports.formatSpecifier\x3d\nformatSpecifier;exports.precisionFixed\x3dfunction(step){return Math.max(0,-exponent(Math.abs(step)))};exports.precisionPrefix\x3dfunction(step,value){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(exponent(value)/3)))-exponent(Math.abs(step)))};exports.precisionRound\x3dfunction(step,max){step\x3dMath.abs(step);max\x3dMath.abs(max)-step;return Math.max(0,exponent(max)-exponent(step))+1};Object.defineProperty(exports,\x22__esModule\x22,{value:!0})})}");
SHADOW_ENV.evalLoad("module$node_modules$d3_time$dist$d3_time.js", true , "shadow$provide.module$node_modules$d3_time$dist$d3_time\x3dfunction(global$jscomp$0,require,module,exports$jscomp$0){(function(global,factory){\x22object\x22\x3d\x3d\x3dtypeof exports$jscomp$0\x26\x26\x22undefined\x22!\x3d\x3dtypeof module?factory(exports$jscomp$0):\x22function\x22\x3d\x3d\x3dtypeof define\x26\x26define.amd?define([\x22exports\x22],factory):(global\x3dglobal||self,factory(global.d3\x3dglobal.d3||{}))})(this,function(exports){function newInterval(floori,offseti,count,field){function interval(date){return floori(date\x3d0\x3d\x3d\x3darguments.length?new Date:new Date(+date)),\ndate}interval.floor\x3dfunction(date){return floori(date\x3dnew Date(+date)),date};interval.ceil\x3dfunction(date){return floori(date\x3dnew Date(date-1)),offseti(date,1),floori(date),date};interval.round\x3dfunction(date){var d0\x3dinterval(date),d1\x3dinterval.ceil(date);return date-d0\x3cd1-date?d0:d1};interval.offset\x3dfunction(date,step){return offseti(date\x3dnew Date(+date),null\x3d\x3dstep?1:Math.floor(step)),date};interval.range\x3dfunction(start,stop,step){var range\x3d[],previous;start\x3dinterval.ceil(start);step\x3dnull\x3d\x3dstep?1:Math.floor(step);\nif(!(start\x3cstop\x26\x260\x3cstep))return range;do range.push(previous\x3dnew Date(+start)),offseti(start,step),floori(start);while(previous\x3cstart\x26\x26start\x3cstop);return range};interval.filter\x3dfunction(test){return newInterval(function(date){if(date\x3e\x3ddate)for(;floori(date),!test(date);)date.setTime(date-1)},function(date,step){if(date\x3e\x3ddate)if(0\x3estep)for(;0\x3e\x3d++step;)for(;offseti(date,-1),!test(date););else for(;0\x3c\x3d--step;)for(;offseti(date,1),!test(date););})};count\x26\x26(interval.count\x3dfunction(start,end){t0.setTime(+start);\nt1.setTime(+end);floori(t0);floori(t1);return Math.floor(count(t0,t1))},interval.every\x3dfunction(step){step\x3dMath.floor(step);return isFinite(step)\x26\x260\x3cstep?1\x3cstep?interval.filter(field?function(d){return 0\x3d\x3d\x3dfield(d)%step}:function(d){return 0\x3d\x3d\x3dinterval.count(0,d)%step}):interval:null});return interval}function weekday(i){return newInterval(function(date){date.setDate(date.getDate()-(date.getDay()+7-i)%7);date.setHours(0,0,0,0)},function(date,step){date.setDate(date.getDate()+7*step)},function(start,\nend){return(end-start-6E4*(end.getTimezoneOffset()-start.getTimezoneOffset()))/6048E5})}function utcWeekday(i){return newInterval(function(date){date.setUTCDate(date.getUTCDate()-(date.getUTCDay()+7-i)%7);date.setUTCHours(0,0,0,0)},function(date,step){date.setUTCDate(date.getUTCDate()+7*step)},function(start,end){return(end-start)/6048E5})}var t0\x3dnew Date,t1\x3dnew Date,millisecond\x3dnewInterval(function(){},function(date,step){date.setTime(+date+step)},function(start,end){return end-start});millisecond.every\x3d\nfunction(k){k\x3dMath.floor(k);return isFinite(k)\x26\x260\x3ck?1\x3ck?newInterval(function(date){date.setTime(Math.floor(date/k)*k)},function(date,step){date.setTime(+date+step*k)},function(start,end){return(end-start)/k}):millisecond:null};var milliseconds\x3dmillisecond.range,second\x3dnewInterval(function(date){date.setTime(date-date.getMilliseconds())},function(date,step){date.setTime(+date+1E3*step)},function(start,end){return(end-start)/1E3},function(date){return date.getUTCSeconds()}),seconds\x3dsecond.range,minute\x3d\nnewInterval(function(date){date.setTime(date-date.getMilliseconds()-1E3*date.getSeconds())},function(date,step){date.setTime(+date+6E4*step)},function(start,end){return(end-start)/6E4},function(date){return date.getMinutes()}),minutes\x3dminute.range,hour\x3dnewInterval(function(date){date.setTime(date-date.getMilliseconds()-1E3*date.getSeconds()-6E4*date.getMinutes())},function(date,step){date.setTime(+date+36E5*step)},function(start,end){return(end-start)/36E5},function(date){return date.getHours()}),\nhours\x3dhour.range,day\x3dnewInterval(function(date){date.setHours(0,0,0,0)},function(date,step){date.setDate(date.getDate()+step)},function(start,end){return(end-start-6E4*(end.getTimezoneOffset()-start.getTimezoneOffset()))/864E5},function(date){return date.getDate()-1}),days\x3dday.range,sunday\x3dweekday(0),monday\x3dweekday(1),tuesday\x3dweekday(2),wednesday\x3dweekday(3),thursday\x3dweekday(4),friday\x3dweekday(5),saturday\x3dweekday(6),sundays\x3dsunday.range,mondays\x3dmonday.range,tuesdays\x3dtuesday.range,wednesdays\x3dwednesday.range,\nthursdays\x3dthursday.range,fridays\x3dfriday.range,saturdays\x3dsaturday.range,month\x3dnewInterval(function(date){date.setDate(1);date.setHours(0,0,0,0)},function(date,step){date.setMonth(date.getMonth()+step)},function(start,end){return end.getMonth()-start.getMonth()+12*(end.getFullYear()-start.getFullYear())},function(date){return date.getMonth()}),months\x3dmonth.range,year\x3dnewInterval(function(date){date.setMonth(0,1);date.setHours(0,0,0,0)},function(date,step){date.setFullYear(date.getFullYear()+step)},\nfunction(start,end){return end.getFullYear()-start.getFullYear()},function(date){return date.getFullYear()});year.every\x3dfunction(k){return isFinite(k\x3dMath.floor(k))\x26\x260\x3ck?newInterval(function(date){date.setFullYear(Math.floor(date.getFullYear()/k)*k);date.setMonth(0,1);date.setHours(0,0,0,0)},function(date,step){date.setFullYear(date.getFullYear()+step*k)}):null};var years\x3dyear.range,utcMinute\x3dnewInterval(function(date){date.setUTCSeconds(0,0)},function(date,step){date.setTime(+date+6E4*step)},function(start,\nend){return(end-start)/6E4},function(date){return date.getUTCMinutes()}),utcMinutes\x3dutcMinute.range,utcHour\x3dnewInterval(function(date){date.setUTCMinutes(0,0,0)},function(date,step){date.setTime(+date+36E5*step)},function(start,end){return(end-start)/36E5},function(date){return date.getUTCHours()}),utcHours\x3dutcHour.range,utcDay\x3dnewInterval(function(date){date.setUTCHours(0,0,0,0)},function(date,step){date.setUTCDate(date.getUTCDate()+step)},function(start,end){return(end-start)/864E5},function(date){return date.getUTCDate()-\n1}),utcDays\x3dutcDay.range,utcSunday\x3dutcWeekday(0),utcMonday\x3dutcWeekday(1),utcTuesday\x3dutcWeekday(2),utcWednesday\x3dutcWeekday(3),utcThursday\x3dutcWeekday(4),utcFriday\x3dutcWeekday(5),utcSaturday\x3dutcWeekday(6),utcSundays\x3dutcSunday.range,utcMondays\x3dutcMonday.range,utcTuesdays\x3dutcTuesday.range,utcWednesdays\x3dutcWednesday.range,utcThursdays\x3dutcThursday.range,utcFridays\x3dutcFriday.range,utcSaturdays\x3dutcSaturday.range,utcMonth\x3dnewInterval(function(date){date.setUTCDate(1);date.setUTCHours(0,0,0,0)},function(date,\nstep){date.setUTCMonth(date.getUTCMonth()+step)},function(start,end){return end.getUTCMonth()-start.getUTCMonth()+12*(end.getUTCFullYear()-start.getUTCFullYear())},function(date){return date.getUTCMonth()}),utcMonths\x3dutcMonth.range,utcYear\x3dnewInterval(function(date){date.setUTCMonth(0,1);date.setUTCHours(0,0,0,0)},function(date,step){date.setUTCFullYear(date.getUTCFullYear()+step)},function(start,end){return end.getUTCFullYear()-start.getUTCFullYear()},function(date){return date.getUTCFullYear()});\nutcYear.every\x3dfunction(k){return isFinite(k\x3dMath.floor(k))\x26\x260\x3ck?newInterval(function(date){date.setUTCFullYear(Math.floor(date.getUTCFullYear()/k)*k);date.setUTCMonth(0,1);date.setUTCHours(0,0,0,0)},function(date,step){date.setUTCFullYear(date.getUTCFullYear()+step*k)}):null};var utcYears\x3dutcYear.range;exports.timeDay\x3dday;exports.timeDays\x3ddays;exports.timeFriday\x3dfriday;exports.timeFridays\x3dfridays;exports.timeHour\x3dhour;exports.timeHours\x3dhours;exports.timeInterval\x3dnewInterval;exports.timeMillisecond\x3d\nmillisecond;exports.timeMilliseconds\x3dmilliseconds;exports.timeMinute\x3dminute;exports.timeMinutes\x3dminutes;exports.timeMonday\x3dmonday;exports.timeMondays\x3dmondays;exports.timeMonth\x3dmonth;exports.timeMonths\x3dmonths;exports.timeSaturday\x3dsaturday;exports.timeSaturdays\x3dsaturdays;exports.timeSecond\x3dsecond;exports.timeSeconds\x3dseconds;exports.timeSunday\x3dsunday;exports.timeSundays\x3dsundays;exports.timeThursday\x3dthursday;exports.timeThursdays\x3dthursdays;exports.timeTuesday\x3dtuesday;exports.timeTuesdays\x3dtuesdays;exports.timeWednesday\x3d\nwednesday;exports.timeWednesdays\x3dwednesdays;exports.timeWeek\x3dsunday;exports.timeWeeks\x3dsundays;exports.timeYear\x3dyear;exports.timeYears\x3dyears;exports.utcDay\x3dutcDay;exports.utcDays\x3dutcDays;exports.utcFriday\x3dutcFriday;exports.utcFridays\x3dutcFridays;exports.utcHour\x3dutcHour;exports.utcHours\x3dutcHours;exports.utcMillisecond\x3dmillisecond;exports.utcMilliseconds\x3dmilliseconds;exports.utcMinute\x3dutcMinute;exports.utcMinutes\x3dutcMinutes;exports.utcMonday\x3dutcMonday;exports.utcMondays\x3dutcMondays;exports.utcMonth\x3dutcMonth;\nexports.utcMonths\x3dutcMonths;exports.utcSaturday\x3dutcSaturday;exports.utcSaturdays\x3dutcSaturdays;exports.utcSecond\x3dsecond;exports.utcSeconds\x3dseconds;exports.utcSunday\x3dutcSunday;exports.utcSundays\x3dutcSundays;exports.utcThursday\x3dutcThursday;exports.utcThursdays\x3dutcThursdays;exports.utcTuesday\x3dutcTuesday;exports.utcTuesdays\x3dutcTuesdays;exports.utcWednesday\x3dutcWednesday;exports.utcWednesdays\x3dutcWednesdays;exports.utcWeek\x3dutcSunday;exports.utcWeeks\x3dutcSundays;exports.utcYear\x3dutcYear;exports.utcYears\x3dutcYears;\nObject.defineProperty(exports,\x22__esModule\x22,{value:!0})})}");
SHADOW_ENV.evalLoad("module$node_modules$vega_time$build$vega_time.js", true , "shadow$provide.module$node_modules$vega_time$build$vega_time\x3dfunction(global$jscomp$0,require,module,exports$jscomp$0){(function(global,factory){\x22object\x22\x3d\x3d\x3dtypeof exports$jscomp$0\x26\x26\x22undefined\x22!\x3d\x3dtypeof module?factory(exports$jscomp$0,require(\x22module$node_modules$vega_util$build$vega_util\x22),require(\x22module$node_modules$d3_time$dist$d3_time\x22),require(\x22module$node_modules$d3_array$dist$d3_array\x22)):\x22function\x22\x3d\x3d\x3dtypeof define\x26\x26define.amd?define([\x22exports\x22,\x22vega-util\x22,\x22d3-time\x22,\x22d3-array\x22],factory):(global\x3d\nglobal||self,factory(global.vega\x3d{},global.vega,global.d3,global.d3))})(this,function(exports,vegaUtil,d3Time,d3Array){function timeUnits(units){var u\x3dvegaUtil.array(units).slice(),m\x3d{};u.length||vegaUtil.error(\x22Missing time unit.\x22);u.forEach(function(unit){vegaUtil.hasOwnProperty(UNITS,unit)?m[unit]\x3d1:vegaUtil.error(\x22Invalid time unit: \x22+unit+\x22.\x22)});1\x3c(m.week||m.day?1:0)+(m.quarter||m.month||m.date?1:0)+(m.dayofyear?1:0)\x26\x26vegaUtil.error(\x22Incompatible time units: \x22+units);u.sort(function(a,b){return UNITS[a]-\nUNITS[b]});return u}function localYear(y){t0.setFullYear(y);t0.setMonth(0);t0.setDate(1);t0.setHours(0,0,0,0);return t0}function localDayOfYear(d){return d3Time.timeDay.count(localYear(d.getFullYear())-1,d)}function localWeekNum(d){return d3Time.timeWeek.count(localYear(d.getFullYear())-1,d)}function localDate(y,m,d,H,M,S,L){return 0\x3c\x3dy\x26\x26100\x3ey?(m\x3dnew Date(-1,m,d,H,M,S,L),m.setFullYear(y),m):new Date(y,m,d,H,M,S,L)}function utcDayOfYear(d){var y\x3dDate.UTC(d.getUTCFullYear(),0,1);return d3Time.utcDay.count(y-\n1,d)}function utcWeekNum(d){var y\x3dDate.UTC(d.getUTCFullYear(),0,1);return d3Time.utcWeek.count(y-1,d)}function utcFirst(y){t0.setTime(Date.UTC(y,0,1));return t0.getUTCDay()}function utcDate(y,m,d,H,M,S,L){return 0\x3c\x3dy\x26\x26100\x3ey?(y\x3dnew Date(Date.UTC(-1,m,d,H,M,S,L)),y.setUTCFullYear(d.y),y):new Date(Date.UTC(y,m,d,H,M,S,L))}function floor(units,step,get,inv,newDate){var s\x3dstep||1,b\x3dvegaUtil.peek(units);step\x3dfunction(unit,p,key){key\x3dkey||unit;return getUnit(get[key],inv[key],unit\x3d\x3d\x3db\x26\x26s,p)};var t\x3dnew Date;\nunits\x3dvegaUtil.toSet(units);var y\x3dunits.year?step(\x22year\x22):vegaUtil.constant(2012),m\x3dunits.month?step(\x22month\x22):units.quarter?step(\x22quarter\x22):vegaUtil.zero,d\x3dunits.week\x26\x26units.day?step(\x22day\x22,1,\x22weekday\x22):units.week?step(\x22week\x22,1):units.day?step(\x22day\x22,1):units.date?step(\x22date\x22,1):units.dayofyear?step(\x22dayofyear\x22,1):vegaUtil.one,H\x3dunits.hours?step(\x22hours\x22):vegaUtil.zero,M\x3dunits.minutes?step(\x22minutes\x22):vegaUtil.zero,S\x3dunits.seconds?step(\x22seconds\x22):vegaUtil.zero,L\x3dunits.milliseconds?step(\x22milliseconds\x22):\nvegaUtil.zero;return function(v){t.setTime(+v);v\x3dy(t);return newDate(v,m(t),d(t,v),H(t),M(t),S(t),L(t))}}function getUnit(f,inv,step,phase){var u\x3d1\x3e\x3dstep?f:phase?function(d,y){return phase+step*Math.floor((f(d,y)-phase)/step)}:function(d,y){return step*Math.floor(f(d,y)/step)};return inv?function(d,y){return inv(u(d,y),y)}:u}function weekday(week,day,firstDay){return day+7*week-(firstDay+6)%7}var TIME_UNITS\x3d\x22year quarter month week date day dayofyear hours minutes seconds milliseconds\x22.split(\x22 \x22),\nUNITS\x3dTIME_UNITS.reduce(function(o,u,i){return o[u]\x3d1+i,o},{}),$jscomp$compprop39\x3d{},defaultSpecifiers\x3d($jscomp$compprop39.year\x3d\x22%Y \x22,$jscomp$compprop39.quarter\x3d\x22Q%q \x22,$jscomp$compprop39.month\x3d\x22%b \x22,$jscomp$compprop39.date\x3d\x22%d \x22,$jscomp$compprop39.week\x3d\x22W%U \x22,$jscomp$compprop39.day\x3d\x22%a \x22,$jscomp$compprop39.dayofyear\x3d\x22%j \x22,$jscomp$compprop39.hours\x3d\x22%H:00\x22,$jscomp$compprop39.minutes\x3d\x2200:%M\x22,$jscomp$compprop39.seconds\x3d\x22:%S\x22,$jscomp$compprop39.milliseconds\x3d\x22.%L\x22,$jscomp$compprop39[\x22year-month\x22]\x3d\x22%Y-%m \x22,\n$jscomp$compprop39[\x22year-month-date\x22]\x3d\x22%Y-%m-%d \x22,$jscomp$compprop39[\x22hours-minutes\x22]\x3d\x22%H:%M\x22,$jscomp$compprop39),t0\x3dnew Date;$jscomp$compprop39\x3d{};var localGet\x3d($jscomp$compprop39.year\x3dfunction(d){return d.getFullYear()},$jscomp$compprop39.quarter\x3dfunction(d){return Math.floor(d.getMonth()/3)},$jscomp$compprop39.month\x3dfunction(d){return d.getMonth()},$jscomp$compprop39.date\x3dfunction(d){return d.getDate()},$jscomp$compprop39.hours\x3dfunction(d){return d.getHours()},$jscomp$compprop39.minutes\x3dfunction(d){return d.getMinutes()},\n$jscomp$compprop39.seconds\x3dfunction(d){return d.getSeconds()},$jscomp$compprop39.milliseconds\x3dfunction(d){return d.getMilliseconds()},$jscomp$compprop39.dayofyear\x3dfunction(d){return localDayOfYear(d)},$jscomp$compprop39.week\x3dfunction(d){return localWeekNum(d)},$jscomp$compprop39.weekday\x3dfunction(d,y){return weekday(localWeekNum(d),d.getDay(),localYear(y).getDay())},$jscomp$compprop39.day\x3dfunction(d,y){return weekday(1,d.getDay(),localYear(y).getDay())},$jscomp$compprop39);$jscomp$compprop39\x3d{};var localInv\x3d\n($jscomp$compprop39.quarter\x3dfunction(q){return 3*q},$jscomp$compprop39.week\x3dfunction(w,y){return weekday(w,0,localYear(y).getDay())},$jscomp$compprop39);$jscomp$compprop39\x3d{};var utcGet\x3d($jscomp$compprop39.year\x3dfunction(d){return d.getUTCFullYear()},$jscomp$compprop39.quarter\x3dfunction(d){return Math.floor(d.getUTCMonth()/3)},$jscomp$compprop39.month\x3dfunction(d){return d.getUTCMonth()},$jscomp$compprop39.date\x3dfunction(d){return d.getUTCDate()},$jscomp$compprop39.hours\x3dfunction(d){return d.getUTCHours()},\n$jscomp$compprop39.minutes\x3dfunction(d){return d.getUTCMinutes()},$jscomp$compprop39.seconds\x3dfunction(d){return d.getUTCSeconds()},$jscomp$compprop39.milliseconds\x3dfunction(d){return d.getUTCMilliseconds()},$jscomp$compprop39.dayofyear\x3dfunction(d){return utcDayOfYear(d)},$jscomp$compprop39.week\x3dfunction(d){return utcWeekNum(d)},$jscomp$compprop39.day\x3dfunction(d,y){return weekday(1,d.getUTCDay(),utcFirst(y))},$jscomp$compprop39.weekday\x3dfunction(d,y){return weekday(utcWeekNum(d),d.getUTCDay(),utcFirst(y))},\n$jscomp$compprop39);$jscomp$compprop39\x3d{};var utcInv\x3d($jscomp$compprop39.quarter\x3dfunction(q){return 3*q},$jscomp$compprop39.week\x3dfunction(w,y){return weekday(w,0,utcFirst(y))},$jscomp$compprop39);$jscomp$compprop39\x3d{};var timeIntervals\x3d($jscomp$compprop39.year\x3dd3Time.timeYear,$jscomp$compprop39.quarter\x3dd3Time.timeMonth.every(3),$jscomp$compprop39.month\x3dd3Time.timeMonth,$jscomp$compprop39.week\x3dd3Time.timeWeek,$jscomp$compprop39.date\x3dd3Time.timeDay,$jscomp$compprop39.day\x3dd3Time.timeDay,$jscomp$compprop39.dayofyear\x3d\nd3Time.timeDay,$jscomp$compprop39.hours\x3dd3Time.timeHour,$jscomp$compprop39.minutes\x3dd3Time.timeMinute,$jscomp$compprop39.seconds\x3dd3Time.timeSecond,$jscomp$compprop39.milliseconds\x3dd3Time.timeMillisecond,$jscomp$compprop39);$jscomp$compprop39\x3d{};var utcIntervals\x3d($jscomp$compprop39.year\x3dd3Time.utcYear,$jscomp$compprop39.quarter\x3dd3Time.utcMonth.every(3),$jscomp$compprop39.month\x3dd3Time.utcMonth,$jscomp$compprop39.week\x3dd3Time.utcWeek,$jscomp$compprop39.date\x3dd3Time.utcDay,$jscomp$compprop39.day\x3dd3Time.utcDay,\n$jscomp$compprop39.dayofyear\x3dd3Time.utcDay,$jscomp$compprop39.hours\x3dd3Time.utcHour,$jscomp$compprop39.minutes\x3dd3Time.utcMinute,$jscomp$compprop39.seconds\x3dd3Time.utcSecond,$jscomp$compprop39.milliseconds\x3dd3Time.utcMillisecond,$jscomp$compprop39),Milli\x3d\x22year month date hours minutes seconds milliseconds\x22.split(\x22 \x22);$jscomp$compprop39\x3dMilli.slice(0,-1);var Minutes\x3d$jscomp$compprop39.slice(0,-1),Hours\x3dMinutes.slice(0,-1),Day\x3dHours.slice(0,-1),Month\x3d[\x22year\x22,\x22month\x22],Year\x3d[\x22year\x22],intervals\x3d[[$jscomp$compprop39,\n1,1E3],[$jscomp$compprop39,5,5E3],[$jscomp$compprop39,15,15E3],[$jscomp$compprop39,30,3E4],[Minutes,1,6E4],[Minutes,5,3E5],[Minutes,15,9E5],[Minutes,30,18E5],[Hours,1,36E5],[Hours,3,108E5],[Hours,6,216E5],[Hours,12,432E5],[Day,1,864E5],[[\x22year\x22,\x22week\x22],1,6048E5],[Month,1,2592E6],[Month,3,7776E6],[Year,1,31536E6]];exports.DATE\x3d\x22date\x22;exports.DAY\x3d\x22day\x22;exports.DAYOFYEAR\x3d\x22dayofyear\x22;exports.HOURS\x3d\x22hours\x22;exports.MILLISECONDS\x3d\x22milliseconds\x22;exports.MINUTES\x3d\x22minutes\x22;exports.MONTH\x3d\x22month\x22;exports.QUARTER\x3d\n\x22quarter\x22;exports.SECONDS\x3d\x22seconds\x22;exports.TIME_UNITS\x3dTIME_UNITS;exports.WEEK\x3d\x22week\x22;exports.YEAR\x3d\x22year\x22;exports.dayofyear\x3dfunction(d){return localDayOfYear(new Date(d))};exports.timeBin\x3dfunction(opt){var ext\x3dopt.extent;opt\x3dopt.maxbins||40;var target\x3dMath.abs(vegaUtil.span(ext))/opt,i$jscomp$0\x3dd3Array.bisector(function(i){return i[2]}).right(intervals,target);i$jscomp$0\x3d\x3d\x3dintervals.length?(target\x3dYear,ext\x3dd3Array.tickStep(ext[0]/31536E6,ext[1]/31536E6,opt)):i$jscomp$0?(i$jscomp$0\x3dintervals[target/\nintervals[i$jscomp$0-1][2]\x3cintervals[i$jscomp$0][2]/target?i$jscomp$0-1:i$jscomp$0],target\x3di$jscomp$0[0],ext\x3di$jscomp$0[1]):(target\x3dMilli,ext\x3dMath.max(d3Array.tickStep(ext[0],ext[1],opt),1));return{units:target,step:ext}};exports.timeFloor\x3dfunction(units,step){return floor(units,step||1,localGet,localInv,localDate)};exports.timeInterval\x3dfunction(unit){return timeIntervals[unit]};exports.timeOffset\x3dfunction(unit,date,step){return(unit\x3dtimeIntervals[unit])?unit.offset(date,step):void 0};exports.timeSequence\x3d\nfunction(unit,start,stop,step){return(unit\x3dtimeIntervals[unit])?unit.range(start,stop,step):void 0};exports.timeUnitSpecifier\x3dfunction(units,specifiers){specifiers\x3dvegaUtil.extend({},defaultSpecifiers,specifiers);units\x3dtimeUnits(units);var n\x3dunits.length,fmt\x3d\x22\x22,start,end;for(start\x3d0;start\x3cn;)for(end\x3dunits.length;end\x3estart;--end){var key\x3dunits.slice(start,end).join(\x22-\x22);if(null!\x3dspecifiers[key]){fmt+\x3dspecifiers[key];start\x3dend;break}}return fmt.trim()};exports.timeUnits\x3dtimeUnits;exports.utcFloor\x3dfunction(units,\nstep){return floor(units,step||1,utcGet,utcInv,utcDate)};exports.utcInterval\x3dfunction(unit){return utcIntervals[unit]};exports.utcOffset\x3dfunction(unit,date,step){return(unit\x3dutcIntervals[unit])?unit.offset(date,step):void 0};exports.utcSequence\x3dfunction(unit,start,stop,step){return(unit\x3dutcIntervals[unit])?unit.range(start,stop,step):void 0};exports.utcdayofyear\x3dfunction(d){return utcDayOfYear(new Date(d))};exports.utcweek\x3dfunction(d){return utcWeekNum(new Date(d))};exports.week\x3dfunction(d){return localWeekNum(new Date(d))};\nObject.defineProperty(exports,\x22__esModule\x22,{value:!0})})}");
SHADOW_ENV.evalLoad("module$node_modules$d3_time_format$dist$d3_time_format.js", true , "shadow$provide.module$node_modules$d3_time_format$dist$d3_time_format\x3dfunction(global$jscomp$0,require,module,exports$jscomp$0){(function(global,factory){\x22object\x22\x3d\x3d\x3dtypeof exports$jscomp$0\x26\x26\x22undefined\x22!\x3d\x3dtypeof module?factory(exports$jscomp$0,require(\x22module$node_modules$d3_time$dist$d3_time\x22)):\x22function\x22\x3d\x3d\x3dtypeof define\x26\x26define.amd?define([\x22exports\x22,\x22d3-time\x22],factory):(global\x3dglobal||self,factory(global.d3\x3dglobal.d3||{},global.d3))})(this,function(exports,d3Time){function localDate(d){if(0\x3c\x3dd.y\x26\x26\n100\x3ed.y){var date\x3dnew Date(-1,d.m,d.d,d.H,d.M,d.S,d.L);date.setFullYear(d.y);return date}return new Date(d.y,d.m,d.d,d.H,d.M,d.S,d.L)}function utcDate(d){if(0\x3c\x3dd.y\x26\x26100\x3ed.y){var date\x3dnew Date(Date.UTC(-1,d.m,d.d,d.H,d.M,d.S,d.L));date.setUTCFullYear(d.y);return date}return new Date(Date.UTC(d.y,d.m,d.d,d.H,d.M,d.S,d.L))}function newDate(y,m,d){return{y:y,m:m,d:d,H:0,M:0,S:0,L:0}}function formatLocale(locale){function newFormat(specifier,formats){return function(date){var string\x3d[],i\x3d-1,j\x3d0,n\x3dspecifier.length,\nc,format;for(date instanceof Date||(date\x3dnew Date(+date));++i\x3cn;)if(37\x3d\x3d\x3dspecifier.charCodeAt(i)){string.push(specifier.slice(j,i));null!\x3d(j\x3dpads[c\x3dspecifier.charAt(++i)])?c\x3dspecifier.charAt(++i):j\x3d\x22e\x22\x3d\x3d\x3dc?\x22 \x22:\x220\x22;if(format\x3dformats[c])c\x3dformat(date,j);string.push(c);j\x3di+1}string.push(specifier.slice(j,i));return string.join(\x22\x22)}}function newParse(specifier,Z){return function(string){var d\x3dnewDate(1900,void 0,1);if(parseSpecifier(d,specifier,string+\x3d\x22\x22,0)!\x3dstring.length)return null;if(\x22Q\x22in d)return new Date(d.Q);\nif(\x22s\x22in d)return new Date(1E3*d.s+(\x22L\x22in d?d.L:0));!Z||\x22Z\x22in d||(d.Z\x3d0);\x22p\x22in d\x26\x26(d.H\x3dd.H%12+12*d.p);void 0\x3d\x3d\x3dd.m\x26\x26(d.m\x3d\x22q\x22in d?d.q:0);if(\x22V\x22in d){if(1\x3ed.V||53\x3cd.V)return null;\x22w\x22in d||(d.w\x3d1);if(\x22Z\x22in d){string\x3dutcDate(newDate(d.y,0,1));var day\x3dstring.getUTCDay();string\x3d4\x3cday||0\x3d\x3d\x3dday?d3Time.utcMonday.ceil(string):d3Time.utcMonday(string);string\x3dd3Time.utcDay.offset(string,7*(d.V-1));d.y\x3dstring.getUTCFullYear();d.m\x3dstring.getUTCMonth();d.d\x3dstring.getUTCDate()+(d.w+6)%7}else string\x3dlocalDate(newDate(d.y,\n0,1)),day\x3dstring.getDay(),string\x3d4\x3cday||0\x3d\x3d\x3dday?d3Time.timeMonday.ceil(string):d3Time.timeMonday(string),string\x3dd3Time.timeDay.offset(string,7*(d.V-1)),d.y\x3dstring.getFullYear(),d.m\x3dstring.getMonth(),d.d\x3dstring.getDate()+(d.w+6)%7}else if(\x22W\x22in d||\x22U\x22in d)\x22w\x22in d||(d.w\x3d\x22u\x22in d?d.u%7:\x22W\x22in d?1:0),day\x3d\x22Z\x22in d?utcDate(newDate(d.y,0,1)).getUTCDay():localDate(newDate(d.y,0,1)).getDay(),d.m\x3d0,d.d\x3d\x22W\x22in d?(d.w+6)%7+7*d.W-(day+5)%7:d.w+7*d.U-(day+6)%7;return\x22Z\x22in d?(d.H+\x3dd.Z/100|0,d.M+\x3dd.Z%100,utcDate(d)):\nlocalDate(d)}}function parseSpecifier(d,specifier,string,j){for(var i\x3d0,n\x3dspecifier.length,m\x3dstring.length,c;i\x3cn;){if(j\x3e\x3dm)return-1;c\x3dspecifier.charCodeAt(i++);if(37\x3d\x3d\x3dc){if(c\x3dspecifier.charAt(i++),c\x3dparses[c in pads?specifier.charAt(i++):c],!c||0\x3e(j\x3dc(d,string,j)))return-1}else if(c!\x3dstring.charCodeAt(j++))return-1}return j}var locale_dateTime\x3dlocale.dateTime,locale_date\x3dlocale.date,locale_time\x3dlocale.time,locale_periods\x3dlocale.periods,locale_weekdays\x3dlocale.days,locale_shortWeekdays\x3dlocale.shortDays,\nlocale_months\x3dlocale.months,locale_shortMonths\x3dlocale.shortMonths,periodRe\x3dformatRe(locale_periods),periodLookup\x3dformatLookup(locale_periods),weekdayRe\x3dformatRe(locale_weekdays),weekdayLookup\x3dformatLookup(locale_weekdays),shortWeekdayRe\x3dformatRe(locale_shortWeekdays),shortWeekdayLookup\x3dformatLookup(locale_shortWeekdays),monthRe\x3dformatRe(locale_months),monthLookup\x3dformatLookup(locale_months),shortMonthRe\x3dformatRe(locale_shortMonths),shortMonthLookup\x3dformatLookup(locale_shortMonths),formats$jscomp$0\x3d\n{a:function(d){return locale_shortWeekdays[d.getDay()]},A:function(d){return locale_weekdays[d.getDay()]},b:function(d){return locale_shortMonths[d.getMonth()]},B:function(d){return locale_months[d.getMonth()]},c:null,d:formatDayOfMonth,e:formatDayOfMonth,f:formatMicroseconds,H:formatHour24,I:formatHour12,j:formatDayOfYear,L:formatMilliseconds,m:formatMonthNumber,M:formatMinutes,p:function(d){return locale_periods[+(12\x3c\x3dd.getHours())]},q:function(d){return 1+~~(d.getMonth()/3)},Q:formatUnixTimestamp,\ns:formatUnixTimestampSeconds,S:formatSeconds,u:formatWeekdayNumberMonday,U:formatWeekNumberSunday,V:formatWeekNumberISO,w:formatWeekdayNumberSunday,W:formatWeekNumberMonday,x:null,X:null,y:formatYear,Y:formatFullYear,Z:formatZone,\x22%\x22:formatLiteralPercent},utcFormats\x3d{a:function(d){return locale_shortWeekdays[d.getUTCDay()]},A:function(d){return locale_weekdays[d.getUTCDay()]},b:function(d){return locale_shortMonths[d.getUTCMonth()]},B:function(d){return locale_months[d.getUTCMonth()]},c:null,d:formatUTCDayOfMonth,\ne:formatUTCDayOfMonth,f:formatUTCMicroseconds,H:formatUTCHour24,I:formatUTCHour12,j:formatUTCDayOfYear,L:formatUTCMilliseconds,m:formatUTCMonthNumber,M:formatUTCMinutes,p:function(d){return locale_periods[+(12\x3c\x3dd.getUTCHours())]},q:function(d){return 1+~~(d.getUTCMonth()/3)},Q:formatUnixTimestamp,s:formatUnixTimestampSeconds,S:formatUTCSeconds,u:formatUTCWeekdayNumberMonday,U:formatUTCWeekNumberSunday,V:formatUTCWeekNumberISO,w:formatUTCWeekdayNumberSunday,W:formatUTCWeekNumberMonday,x:null,X:null,\ny:formatUTCYear,Y:formatUTCFullYear,Z:formatUTCZone,\x22%\x22:formatLiteralPercent},parses\x3d{a:function(d,string,i){return(string\x3dshortWeekdayRe.exec(string.slice(i)))?(d.w\x3dshortWeekdayLookup[string[0].toLowerCase()],i+string[0].length):-1},A:function(d,string,i){return(string\x3dweekdayRe.exec(string.slice(i)))?(d.w\x3dweekdayLookup[string[0].toLowerCase()],i+string[0].length):-1},b:function(d,string,i){return(string\x3dshortMonthRe.exec(string.slice(i)))?(d.m\x3dshortMonthLookup[string[0].toLowerCase()],i+string[0].length):\n-1},B:function(d,string,i){return(string\x3dmonthRe.exec(string.slice(i)))?(d.m\x3dmonthLookup[string[0].toLowerCase()],i+string[0].length):-1},c:function(d,string,i){return parseSpecifier(d,locale_dateTime,string,i)},d:parseDayOfMonth,e:parseDayOfMonth,f:parseMicroseconds,H:parseHour24,I:parseHour24,j:parseDayOfYear,L:parseMilliseconds,m:parseMonthNumber,M:parseMinutes,p:function(d,string,i){return(string\x3dperiodRe.exec(string.slice(i)))?(d.p\x3dperiodLookup[string[0].toLowerCase()],i+string[0].length):-1},\nq:parseQuarter,Q:parseUnixTimestamp,s:parseUnixTimestampSeconds,S:parseSeconds,u:parseWeekdayNumberMonday,U:parseWeekNumberSunday,V:parseWeekNumberISO,w:parseWeekdayNumberSunday,W:parseWeekNumberMonday,x:function(d,string,i){return parseSpecifier(d,locale_date,string,i)},X:function(d,string,i){return parseSpecifier(d,locale_time,string,i)},y:parseYear,Y:parseFullYear,Z:parseZone,\x22%\x22:parseLiteralPercent};formats$jscomp$0.x\x3dnewFormat(locale_date,formats$jscomp$0);formats$jscomp$0.X\x3dnewFormat(locale_time,\nformats$jscomp$0);formats$jscomp$0.c\x3dnewFormat(locale_dateTime,formats$jscomp$0);utcFormats.x\x3dnewFormat(locale_date,utcFormats);utcFormats.X\x3dnewFormat(locale_time,utcFormats);utcFormats.c\x3dnewFormat(locale_dateTime,utcFormats);return{format:function(specifier){var f\x3dnewFormat(specifier+\x3d\x22\x22,formats$jscomp$0);f.toString\x3dfunction(){return specifier};return f},parse:function(specifier){var p\x3dnewParse(specifier+\x3d\x22\x22,!1);p.toString\x3dfunction(){return specifier};return p},utcFormat:function(specifier){var f\x3d\nnewFormat(specifier+\x3d\x22\x22,utcFormats);f.toString\x3dfunction(){return specifier};return f},utcParse:function(specifier){var p\x3dnewParse(specifier+\x3d\x22\x22,!0);p.toString\x3dfunction(){return specifier};return p}}}function pad(value,fill,width){var sign\x3d0\x3evalue?\x22-\x22:\x22\x22;value\x3d(sign?-value:value)+\x22\x22;var length\x3dvalue.length;return sign+(length\x3cwidth?Array(width-length+1).join(fill)+value:value)}function requote(s){return s.replace(requoteRe,\x22\\\\$\\x26\x22)}function formatRe(names){return new RegExp(\x22^(?:\x22+names.map(requote).join(\x22|\x22)+\n\x22)\x22,\x22i\x22)}function formatLookup(names){for(var map\x3d{},i\x3d-1,n\x3dnames.length;++i\x3cn;)map[names[i].toLowerCase()]\x3di;return map}function parseWeekdayNumberSunday(d,string,i){return(string\x3dnumberRe.exec(string.slice(i,i+1)))?(d.w\x3d+string[0],i+string[0].length):-1}function parseWeekdayNumberMonday(d,string,i){return(string\x3dnumberRe.exec(string.slice(i,i+1)))?(d.u\x3d+string[0],i+string[0].length):-1}function parseWeekNumberSunday(d,string,i){return(string\x3dnumberRe.exec(string.slice(i,i+2)))?(d.U\x3d+string[0],i+\nstring[0].length):-1}function parseWeekNumberISO(d,string,i){return(string\x3dnumberRe.exec(string.slice(i,i+2)))?(d.V\x3d+string[0],i+string[0].length):-1}function parseWeekNumberMonday(d,string,i){return(string\x3dnumberRe.exec(string.slice(i,i+2)))?(d.W\x3d+string[0],i+string[0].length):-1}function parseFullYear(d,string,i){return(string\x3dnumberRe.exec(string.slice(i,i+4)))?(d.y\x3d+string[0],i+string[0].length):-1}function parseYear(d,string,i){return(string\x3dnumberRe.exec(string.slice(i,i+2)))?(d.y\x3d+string[0]+\n(68\x3c+string[0]?1900:2E3),i+string[0].length):-1}function parseZone(d,string,i){return(string\x3d/^(Z)|([+-]\\d\\d)(?::?(\\d\\d))?/.exec(string.slice(i,i+6)))?(d.Z\x3dstring[1]?0:-(string[2]+(string[3]||\x2200\x22)),i+string[0].length):-1}function parseQuarter(d,string,i){return(string\x3dnumberRe.exec(string.slice(i,i+1)))?(d.q\x3d3*string[0]-3,i+string[0].length):-1}function parseMonthNumber(d,string,i){return(string\x3dnumberRe.exec(string.slice(i,i+2)))?(d.m\x3dstring[0]-1,i+string[0].length):-1}function parseDayOfMonth(d,\nstring,i){return(string\x3dnumberRe.exec(string.slice(i,i+2)))?(d.d\x3d+string[0],i+string[0].length):-1}function parseDayOfYear(d,string,i){return(string\x3dnumberRe.exec(string.slice(i,i+3)))?(d.m\x3d0,d.d\x3d+string[0],i+string[0].length):-1}function parseHour24(d,string,i){return(string\x3dnumberRe.exec(string.slice(i,i+2)))?(d.H\x3d+string[0],i+string[0].length):-1}function parseMinutes(d,string,i){return(string\x3dnumberRe.exec(string.slice(i,i+2)))?(d.M\x3d+string[0],i+string[0].length):-1}function parseSeconds(d,string,\ni){return(string\x3dnumberRe.exec(string.slice(i,i+2)))?(d.S\x3d+string[0],i+string[0].length):-1}function parseMilliseconds(d,string,i){return(string\x3dnumberRe.exec(string.slice(i,i+3)))?(d.L\x3d+string[0],i+string[0].length):-1}function parseMicroseconds(d,string,i){return(string\x3dnumberRe.exec(string.slice(i,i+6)))?(d.L\x3dMath.floor(string[0]/1E3),i+string[0].length):-1}function parseLiteralPercent(d,string,i){return(d\x3dpercentRe.exec(string.slice(i,i+1)))?i+d[0].length:-1}function parseUnixTimestamp(d,string,\ni){return(string\x3dnumberRe.exec(string.slice(i)))?(d.Q\x3d+string[0],i+string[0].length):-1}function parseUnixTimestampSeconds(d,string,i){return(string\x3dnumberRe.exec(string.slice(i)))?(d.s\x3d+string[0],i+string[0].length):-1}function formatDayOfMonth(d,p){return pad(d.getDate(),p,2)}function formatHour24(d,p){return pad(d.getHours(),p,2)}function formatHour12(d,p){return pad(d.getHours()%12||12,p,2)}function formatDayOfYear(d,p){return pad(1+d3Time.timeDay.count(d3Time.timeYear(d),d),p,3)}function formatMilliseconds(d,\np){return pad(d.getMilliseconds(),p,3)}function formatMicroseconds(d,p){return formatMilliseconds(d,p)+\x22000\x22}function formatMonthNumber(d,p){return pad(d.getMonth()+1,p,2)}function formatMinutes(d,p){return pad(d.getMinutes(),p,2)}function formatSeconds(d,p){return pad(d.getSeconds(),p,2)}function formatWeekdayNumberMonday(d){d\x3dd.getDay();return 0\x3d\x3d\x3dd?7:d}function formatWeekNumberSunday(d,p){return pad(d3Time.timeSunday.count(d3Time.timeYear(d)-1,d),p,2)}function formatWeekNumberISO(d,p){var day\x3d\nd.getDay();d\x3d4\x3c\x3dday||0\x3d\x3d\x3dday?d3Time.timeThursday(d):d3Time.timeThursday.ceil(d);return pad(d3Time.timeThursday.count(d3Time.timeYear(d),d)+(4\x3d\x3d\x3dd3Time.timeYear(d).getDay()),p,2)}function formatWeekdayNumberSunday(d){return d.getDay()}function formatWeekNumberMonday(d,p){return pad(d3Time.timeMonday.count(d3Time.timeYear(d)-1,d),p,2)}function formatYear(d,p){return pad(d.getFullYear()%100,p,2)}function formatFullYear(d,p){return pad(d.getFullYear()%1E4,p,4)}function formatZone(d){d\x3dd.getTimezoneOffset();\nreturn(0\x3cd?\x22-\x22:(d*\x3d-1,\x22+\x22))+pad(d/60|0,\x220\x22,2)+pad(d%60,\x220\x22,2)}function formatUTCDayOfMonth(d,p){return pad(d.getUTCDate(),p,2)}function formatUTCHour24(d,p){return pad(d.getUTCHours(),p,2)}function formatUTCHour12(d,p){return pad(d.getUTCHours()%12||12,p,2)}function formatUTCDayOfYear(d,p){return pad(1+d3Time.utcDay.count(d3Time.utcYear(d),d),p,3)}function formatUTCMilliseconds(d,p){return pad(d.getUTCMilliseconds(),p,3)}function formatUTCMicroseconds(d,p){return formatUTCMilliseconds(d,p)+\x22000\x22}\nfunction formatUTCMonthNumber(d,p){return pad(d.getUTCMonth()+1,p,2)}function formatUTCMinutes(d,p){return pad(d.getUTCMinutes(),p,2)}function formatUTCSeconds(d,p){return pad(d.getUTCSeconds(),p,2)}function formatUTCWeekdayNumberMonday(d){d\x3dd.getUTCDay();return 0\x3d\x3d\x3dd?7:d}function formatUTCWeekNumberSunday(d,p){return pad(d3Time.utcSunday.count(d3Time.utcYear(d)-1,d),p,2)}function formatUTCWeekNumberISO(d,p){var day\x3dd.getUTCDay();d\x3d4\x3c\x3dday||0\x3d\x3d\x3dday?d3Time.utcThursday(d):d3Time.utcThursday.ceil(d);\nreturn pad(d3Time.utcThursday.count(d3Time.utcYear(d),d)+(4\x3d\x3d\x3dd3Time.utcYear(d).getUTCDay()),p,2)}function formatUTCWeekdayNumberSunday(d){return d.getUTCDay()}function formatUTCWeekNumberMonday(d,p){return pad(d3Time.utcMonday.count(d3Time.utcYear(d)-1,d),p,2)}function formatUTCYear(d,p){return pad(d.getUTCFullYear()%100,p,2)}function formatUTCFullYear(d,p){return pad(d.getUTCFullYear()%1E4,p,4)}function formatUTCZone(){return\x22+0000\x22}function formatLiteralPercent(){return\x22%\x22}function formatUnixTimestamp(d){return+d}\nfunction formatUnixTimestampSeconds(d){return Math.floor(+d/1E3)}function defaultLocale(definition){locale$jscomp$0\x3dformatLocale(definition);exports.timeFormat\x3dlocale$jscomp$0.format;exports.timeParse\x3dlocale$jscomp$0.parse;exports.utcFormat\x3dlocale$jscomp$0.utcFormat;exports.utcParse\x3dlocale$jscomp$0.utcParse;return locale$jscomp$0}function formatIsoNative(date){return date.toISOString()}function parseIsoNative(string){string\x3dnew Date(string);return isNaN(string)?null:string}var pads\x3d{\x22-\x22:\x22\x22,_:\x22 \x22,\n0:\x220\x22},numberRe\x3d/^\\s*\\d+/,percentRe\x3d/^%/,requoteRe\x3d/[\\\\^$*+?|[\\]().{}]/g,locale$jscomp$0;defaultLocale({dateTime:\x22%x, %X\x22,date:\x22%-m/%-d/%Y\x22,time:\x22%-I:%M:%S %p\x22,periods:[\x22AM\x22,\x22PM\x22],days:\x22Sunday Monday Tuesday Wednesday Thursday Friday Saturday\x22.split(\x22 \x22),shortDays:\x22Sun Mon Tue Wed Thu Fri Sat\x22.split(\x22 \x22),months:\x22January February March April May June July August September October November December\x22.split(\x22 \x22),shortMonths:\x22Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec\x22.split(\x22 \x22)});var formatIso\x3d\nDate.prototype.toISOString?formatIsoNative:exports.utcFormat(\x22%Y-%m-%dT%H:%M:%S.%LZ\x22),parseIso\x3d+new Date(\x222000-01-01T00:00:00.000Z\x22)?parseIsoNative:exports.utcParse(\x22%Y-%m-%dT%H:%M:%S.%LZ\x22);exports.isoFormat\x3dformatIso;exports.isoParse\x3dparseIso;exports.timeFormatDefaultLocale\x3ddefaultLocale;exports.timeFormatLocale\x3dformatLocale;Object.defineProperty(exports,\x22__esModule\x22,{value:!0})})}");
SHADOW_ENV.evalLoad("module$node_modules$vega_format$build$vega_format.js", true , "shadow$provide.module$node_modules$vega_format$build$vega_format\x3dfunction(global$jscomp$0,require,module,exports$jscomp$0){(function(global,factory){\x22object\x22\x3d\x3d\x3dtypeof exports$jscomp$0\x26\x26\x22undefined\x22!\x3d\x3dtypeof module?factory(exports$jscomp$0,require(\x22module$node_modules$d3_array$dist$d3_array\x22),require(\x22module$node_modules$d3_format$dist$d3_format\x22),require(\x22module$node_modules$vega_time$build$vega_time\x22),require(\x22module$node_modules$vega_util$build$vega_util\x22),require(\x22module$node_modules$d3_time_format$dist$d3_time_format\x22)):\n\x22function\x22\x3d\x3d\x3dtypeof define\x26\x26define.amd?define(\x22exports d3-array d3-format vega-time vega-util d3-time-format\x22.split(\x22 \x22),factory):(global\x3dglobal||self,factory(global.vega\x3d{},global.d3,global.d3,global.vega,global.vega,global.d3))})(this,function(exports,d3Array,d3Format,vegaTime,vegaUtil,d3TimeFormat){function memoize(method){var cache\x3d{};return function(spec){return cache[spec]||(cache[spec]\x3dmethod(spec))}}function trimZeroes(numberFormat,decimalChar){return function(x){x\x3dnumberFormat(x);var dec\x3d\nx.indexOf(decimalChar);if(0\x3edec)return x;a:{var idx\x3dx.lastIndexOf(\x22e\x22);if(!(0\x3cidx)){for(idx\x3dx.length;--idx\x3edec;){var end\x3dx.charCodeAt(idx);if(48\x3c\x3dend\x26\x2657\x3e\x3dend){idx+\x3d1;break a}}idx\x3dvoid 0}}for(end\x3didx\x3cx.length?x.slice(idx):\x22\x22;--idx\x3edec;)if(\x220\x22!\x3d\x3dx[idx]){++idx;break}return x.slice(0,idx)+end}}function numberLocale(locale){var format\x3dmemoize(locale.format),formatPrefix\x3dlocale.formatPrefix;return{format:format,formatPrefix:formatPrefix,formatFloat:function(spec){spec\x3dd3Format.formatSpecifier(spec||\x22,\x22);\nif(null\x3d\x3dspec.precision){spec.precision\x3d12;switch(spec.type){case \x22%\x22:spec.precision-\x3d2;break;case \x22e\x22:--spec.precision}return trimZeroes(format(spec),format(\x22.1f\x22)(1)[1])}return format(spec)},formatSpan:function(start,stop,count,specifier){specifier\x3dd3Format.formatSpecifier(null\x3d\x3dspecifier?\x22,f\x22:specifier);count\x3dd3Array.tickStep(start,stop,count);start\x3dMath.max(Math.abs(start),Math.abs(stop));if(null\x3d\x3dspecifier.precision)switch(specifier.type){case \x22s\x22:return isNaN(stop\x3dd3Format.precisionPrefix(count,\nstart))||(specifier.precision\x3dstop),formatPrefix(specifier,start);case \x22\x22:case \x22e\x22:case \x22g\x22:case \x22p\x22:case \x22r\x22:isNaN(stop\x3dd3Format.precisionRound(count,start))||(specifier.precision\x3dstop-(\x22e\x22\x3d\x3d\x3dspecifier.type));break;case \x22f\x22:case \x22%\x22:isNaN(stop\x3dd3Format.precisionFixed(count))||(specifier.precision\x3dstop-2*(\x22%\x22\x3d\x3d\x3dspecifier.type))}return format(specifier)}}}function resetNumberFormatDefaultLocale(){return defaultNumberLocale\x3dnumberLocale({format:d3Format.format,formatPrefix:d3Format.formatPrefix})}function numberFormatLocale(definition){return numberLocale(d3Format.formatLocale(definition))}\nfunction numberFormatDefaultLocale(definition){return arguments.length?defaultNumberLocale\x3dnumberFormatLocale(definition):defaultNumberLocale}function timeMultiFormat(format,interval,spec){spec\x3dspec||{};vegaUtil.isObject(spec)||vegaUtil.error(\x22Invalid time multi-format specifier: \x22+spec);var second\x3dinterval(vegaTime.SECONDS),minute\x3dinterval(vegaTime.MINUTES),hour\x3dinterval(vegaTime.HOURS),day\x3dinterval(vegaTime.DATE),week\x3dinterval(vegaTime.WEEK),month\x3dinterval(vegaTime.MONTH),quarter\x3dinterval(vegaTime.QUARTER),\nyear\x3dinterval(vegaTime.YEAR),L\x3dformat(spec[vegaTime.MILLISECONDS]||\x22.%L\x22),S\x3dformat(spec[vegaTime.SECONDS]||\x22:%S\x22),M\x3dformat(spec[vegaTime.MINUTES]||\x22%I:%M\x22),H\x3dformat(spec[vegaTime.HOURS]||\x22%I %p\x22),d\x3dformat(spec[vegaTime.DATE]||spec[vegaTime.DAY]||\x22%a %d\x22),w\x3dformat(spec[vegaTime.WEEK]||\x22%b %d\x22),m\x3dformat(spec[vegaTime.MONTH]||\x22%B\x22),q\x3dformat(spec[vegaTime.QUARTER]||\x22%B\x22),y\x3dformat(spec[vegaTime.YEAR]||\x22%Y\x22);return function(date){return(second(date)\x3cdate?L:minute(date)\x3cdate?S:hour(date)\x3cdate?M:day(date)\x3c\ndate?H:month(date)\x3cdate?week(date)\x3cdate?d:w:year(date)\x3cdate?quarter(date)\x3cdate?m:q:y)(date)}}function timeLocale(locale){var timeFormat\x3dmemoize(locale.format),utcFormat\x3dmemoize(locale.utcFormat);return{timeFormat:function(spec){return vegaUtil.isString(spec)?timeFormat(spec):timeMultiFormat(timeFormat,vegaTime.timeInterval,spec)},utcFormat:function(spec){return vegaUtil.isString(spec)?utcFormat(spec):timeMultiFormat(utcFormat,vegaTime.utcInterval,spec)},timeParse:memoize(locale.parse),utcParse:memoize(locale.utcParse)}}\nfunction resetTimeFormatDefaultLocale(){return defaultTimeLocale\x3dtimeLocale({format:d3TimeFormat.timeFormat,parse:d3TimeFormat.timeParse,utcFormat:d3TimeFormat.utcFormat,utcParse:d3TimeFormat.utcParse})}function timeFormatLocale(definition){return timeLocale(d3TimeFormat.timeFormatLocale(definition))}function timeFormatDefaultLocale(definition){return arguments.length?defaultTimeLocale\x3dtimeFormatLocale(definition):defaultTimeLocale}function defaultLocale(numberSpec,timeSpec){var args\x3darguments.length;\nargs\x26\x262!\x3d\x3dargs\x26\x26vegaUtil.error(\x22defaultLocale expects either zero or two arguments.\x22);return args?createLocale(numberFormatDefaultLocale(numberSpec),timeFormatDefaultLocale(timeSpec)):createLocale(numberFormatDefaultLocale(),timeFormatDefaultLocale())}var defaultNumberLocale;resetNumberFormatDefaultLocale();var defaultTimeLocale;resetTimeFormatDefaultLocale();var createLocale\x3dfunction(number,time){return vegaUtil.extend({},number,time)};exports.defaultLocale\x3ddefaultLocale;exports.locale\x3dfunction(numberSpec,\ntimeSpec){numberSpec\x3dnumberSpec?numberFormatLocale(numberSpec):numberFormatDefaultLocale();timeSpec\x3dtimeSpec?timeFormatLocale(timeSpec):timeFormatDefaultLocale();return createLocale(numberSpec,timeSpec)};exports.numberFormatDefaultLocale\x3dnumberFormatDefaultLocale;exports.numberFormatLocale\x3dnumberFormatLocale;exports.resetDefaultLocale\x3dfunction(){resetNumberFormatDefaultLocale();resetTimeFormatDefaultLocale();return defaultLocale()};exports.resetNumberFormatDefaultLocale\x3dresetNumberFormatDefaultLocale;\nexports.resetTimeFormatDefaultLocale\x3dresetTimeFormatDefaultLocale;exports.timeFormatDefaultLocale\x3dtimeFormatDefaultLocale;exports.timeFormatLocale\x3dtimeFormatLocale;Object.defineProperty(exports,\x22__esModule\x22,{value:!0})})}");
SHADOW_ENV.evalLoad("module$node_modules$vega_loader$build$vega_loader.js", true , "shadow$provide.module$node_modules$vega_loader$build$vega_loader\x3dfunction(global$jscomp$0,require,module,exports$jscomp$0){var Buffer\x3drequire(\x22module$node_modules$buffer$index\x22).Buffer;(function(global,factory){\x22object\x22\x3d\x3d\x3dtypeof exports$jscomp$0\x26\x26\x22undefined\x22!\x3d\x3dtypeof module?factory(exports$jscomp$0,require(\x22module$node_modules$vega_util$build$vega_util\x22),require(\x22module$node_modules$d3_dsv$dist$d3_dsv\x22),require(\x22module$node_modules$topojson_client$dist$topojson_client\x22),require(\x22module$node_modules$vega_format$build$vega_format\x22)):\n\x22function\x22\x3d\x3d\x3dtypeof define\x26\x26define.amd?define([\x22exports\x22,\x22vega-util\x22,\x22d3-dsv\x22,\x22topojson-client\x22,\x22vega-format\x22],factory):(global\x3dglobal||self,factory(global.vega\x3d{},global.vega,global.d3,global.topojson,global.vega))})(this,function(exports,vegaUtil,d3Dsv,topojsonClient,vegaFormat){function load(uri,options){var $jscomp$async$this\x3dthis,opt,url;return $jscomp.asyncExecutePromiseGeneratorProgram(function($jscomp$generator$context){if(1\x3d\x3d$jscomp$generator$context.nextAddress)return $jscomp$generator$context.yield($jscomp$async$this.sanitize(uri,\noptions),2);opt\x3d$jscomp$generator$context.yieldResult;url\x3dopt.href;return $jscomp$generator$context.return(opt.localFile?$jscomp$async$this.file(url):$jscomp$async$this.http(url,options))})}function sanitize(uri,options){var $jscomp$async$this\x3dthis,fileAccess,result,isFile,loadFile,base,isAllowed,hasProtocol;return $jscomp.asyncExecutePromiseGeneratorProgram(function($jscomp$generator$context){options\x3dvegaUtil.extend({},$jscomp$async$this.options,options);fileAccess\x3d$jscomp$async$this.fileAccess;\nresult\x3d{href:null};isAllowed\x3dallowed_re.test(uri.replace(whitespace_re,\x22\x22));null!\x3duri\x26\x26\x22string\x22\x3d\x3d\x3dtypeof uri\x26\x26isAllowed||vegaUtil.error(\x22Sanitize failure, invalid URI: \x22+vegaUtil.stringValue(uri));hasProtocol\x3dprotocol_re.test(uri);(base\x3doptions.baseURL)\x26\x26!hasProtocol\x26\x26(uri.startsWith(\x22/\x22)||\x22/\x22\x3d\x3d\x3dbase[base.length-1]||(uri\x3d\x22/\x22+uri),uri\x3dbase+uri);loadFile\x3d(isFile\x3duri.startsWith(\x22file://\x22))||\x22file\x22\x3d\x3d\x3doptions.mode||\x22http\x22!\x3d\x3doptions.mode\x26\x26!hasProtocol\x26\x26fileAccess;isFile?uri\x3duri.slice(7):uri.startsWith(\x22//\x22)\x26\x26\n(\x22file\x22\x3d\x3d\x3doptions.defaultProtocol?(uri\x3duri.slice(2),loadFile\x3d!0):uri\x3d(options.defaultProtocol||\x22http\x22)+\x22:\x22+uri);Object.defineProperty(result,\x22localFile\x22,{value:!!loadFile});result.href\x3duri;options.target\x26\x26(result.target\x3doptions.target+\x22\x22);options.rel\x26\x26(result.rel\x3doptions.rel+\x22\x22);\x22image\x22\x3d\x3d\x3doptions.context\x26\x26options.crossOrigin\x26\x26(result.crossOrigin\x3doptions.crossOrigin+\x22\x22);return $jscomp$generator$context.return(result)})}function fileLoader(fs){return fs?function(filename){return new Promise(function(accept,\nreject){fs.readFile(filename,function(error,data){error?reject(error):accept(data)})})}:fileReject}function fileReject(){return $jscomp.asyncExecutePromiseGeneratorProgram(function($jscomp$generator$context){vegaUtil.error(\x22No file system access.\x22);$jscomp$generator$context.jumpToEnd()})}function httpLoader(fetch){return fetch?function(url,options){var $jscomp$async$this\x3dthis,opt,type,response;return $jscomp.asyncExecutePromiseGeneratorProgram(function($jscomp$generator$context){if(1\x3d\x3d$jscomp$generator$context.nextAddress)return opt\x3d\nvegaUtil.extend({},$jscomp$async$this.options.http,options),type\x3doptions\x26\x26options.response,$jscomp$generator$context.yield(fetch(url,opt),2);response\x3d$jscomp$generator$context.yieldResult;return $jscomp$generator$context.return(response.ok?vegaUtil.isFunction(response[type])?response[type]():response.text():vegaUtil.error(response.status+\x22\x22+response.statusText))})}:httpReject}function httpReject(){return $jscomp.asyncExecutePromiseGeneratorProgram(function($jscomp$generator$context){vegaUtil.error(\x22No HTTP fetch method available.\x22);\n$jscomp$generator$context.jumpToEnd()})}function inferType(values,field){if(!values||!values.length)return\x22unknown\x22;for(var n\x3dvalues.length,m\x3dtypeTests.length,a\x3dtypeTests.map(function(_,i){return i+1}),i$jscomp$0\x3d0,t\x3d0,j\x3dvoid 0,value\x3dvoid 0;i$jscomp$0\x3cn;++i$jscomp$0)for(value\x3dfield?values[i$jscomp$0][field]:values[i$jscomp$0],j\x3d0;j\x3cm;++j)if(a[j]\x26\x26null!\x3dvalue\x26\x26value\x3d\x3d\x3dvalue\x26\x26!typeTests[j](value)\x26\x26(a[j]\x3d0,++t,t\x3d\x3d\x3dtypeTests.length))return\x22string\x22;return typeList[a.reduce(function(u,v){return 0\x3d\x3d\x3du?v:\nu},0)-1]}function inferTypes(data,fields){return fields.reduce(function(types,field){types[field]\x3dinferType(data,field);return types},{})}function isNumber(_){return!Number.isNaN(+_)\x26\x26!(_ instanceof Date)}function delimitedFormat(delimiter){var parse\x3dfunction(data,format){var delim\x3d{delimiter:delimiter};return dsv(data,format?vegaUtil.extend(format,delim):delim)};parse.responseType\x3d\x22text\x22;return parse}function dsv(data,format){format.header\x26\x26(data\x3dformat.header.map(vegaUtil.stringValue).join(format.delimiter)+\n\x22\\n\x22+data);return d3Dsv.dsvFormat(format.delimiter).parse(data+\x22\x22)}function json(data,format){format\x3dformat\x26\x26format.property?vegaUtil.field(format.property):vegaUtil.identity;var JSCompiler_temp;if(JSCompiler_temp\x3dvegaUtil.isObject(data))JSCompiler_temp\x3d!(\x22function\x22\x3d\x3d\x3dtypeof Buffer\x26\x26vegaUtil.isFunction(Buffer.isBuffer)\x26\x26Buffer.isBuffer(data));return JSCompiler_temp?format(data):format(JSON.parse(data))}function topojson(data,format){var object;data\x3djson(data,format);if(format\x26\x26format.feature){var method\x3d\ntopojsonClient.feature;var property\x3dformat.feature}else if(format\x26\x26format.mesh){method\x3dtopojsonClient.mesh;property\x3dformat.mesh;var filter\x3dfilters[format.filter]}else vegaUtil.error(\x22Missing TopoJSON feature or mesh parameter.\x22);return(object\x3d(object\x3ddata.objects[property])?method(data,object,filter):vegaUtil.error(\x22Invalid TopoJSON object: \x22+property))\x26\x26object.features||[object]}function formats(name,reader){return 1\x3carguments.length?(format$jscomp$0[name]\x3dreader,this):vegaUtil.hasOwnProperty(format$jscomp$0,\nname)?format$jscomp$0[name]:null}function parse$jscomp$0(data,types,timeParser,utcParser){if(data.length){var locale\x3dvegaFormat.timeFormatDefaultLocale();timeParser\x3dtimeParser||locale.timeParse;utcParser\x3dutcParser||locale.utcParse;locale\x3ddata.columns||Object.keys(data[0]);var j,m;\x22auto\x22\x3d\x3d\x3dtypes\x26\x26(types\x3dinferTypes(data,locale));locale\x3dObject.keys(types);var parsers\x3dlocale.map(function(field){var type\x3dtypes[field];if(type\x26\x26(type.startsWith(\x22date:\x22)||type.startsWith(\x22utc:\x22))){field\x3dtype.split(/:(.+)?/,\n2);type\x3dfield[1];if(\x22\x27\x22\x3d\x3d\x3dtype[0]\x26\x26\x22\x27\x22\x3d\x3d\x3dtype[type.length-1]||\x27\x22\x27\x3d\x3d\x3dtype[0]\x26\x26\x27\x22\x27\x3d\x3d\x3dtype[type.length-1])type\x3dtype.slice(1,-1);return(\x22utc\x22\x3d\x3d\x3dfield[0]?utcParser:timeParser)(type)}if(!typeParsers[type])throw Error(\x22Illegal format pattern: \x22+field+\x22:\x22+type);return typeParsers[type]});var i\x3d0;var n\x3ddata.length;for(m\x3dlocale.length;i\x3cn;++i){var datum\x3ddata[i];for(j\x3d0;j\x3cm;++j){var field$jscomp$0\x3dlocale[j];datum[field$jscomp$0]\x3dparsers[j](datum[field$jscomp$0])}}}}var protocol_re\x3d/^([A-Za-z]+:)?\\/\\//,allowed_re\x3d\n/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp|file|data):|[^a-z]|[a-z+.\\-]+(?:[^a-z+.\\-:]|$))/i,whitespace_re\x3d/[\\u0000-\\u0020\\u00A0\\u1680\\u180E\\u2000-\\u2029\\u205f\\u3000]/g,typeParsers\x3d{boolean:vegaUtil.toBoolean,integer:vegaUtil.toNumber,number:vegaUtil.toNumber,date:vegaUtil.toDate,string:vegaUtil.toString,unknown:vegaUtil.identity},typeTests\x3d[function(_){return\x22true\x22\x3d\x3d\x3d_||\x22false\x22\x3d\x3d\x3d_||!0\x3d\x3d\x3d_||!1\x3d\x3d\x3d_},function(_){return isNumber(_)\x26\x26Number.isInteger(+_)},isNumber,function(_){return!Number.isNaN(Date.parse(_))}],\ntypeList\x3d[\x22boolean\x22,\x22integer\x22,\x22number\x22,\x22date\x22];dsv.responseType\x3d\x22text\x22;json.responseType\x3d\x22json\x22;var filters\x3d{interior:function(a,b){return a!\x3d\x3db},exterior:function(a,b){return a\x3d\x3d\x3db}};topojson.responseType\x3d\x22json\x22;var format$jscomp$0\x3d{dsv:dsv,csv:delimitedFormat(\x22,\x22),tsv:delimitedFormat(\x22\\t\x22),json:json,topojson:topojson},loader\x3dfunction(fetch,fs){return function(options){return{options:options||{},sanitize:sanitize,load:load,fileAccess:!!fs,file:fileLoader(fs),http:httpLoader(fetch)}}}(\x22undefined\x22!\x3d\x3d\ntypeof fetch\x26\x26fetch,null);exports.format\x3dformat$jscomp$0;exports.formats\x3dformats;exports.inferType\x3dinferType;exports.inferTypes\x3dinferTypes;exports.loader\x3dloader;exports.read\x3dfunction(data,schema,timeParser,utcParser){schema\x3dschema||{};var reader\x3dformats(schema.type||\x22json\x22);reader||vegaUtil.error(\x22Unknown data format type: \x22+schema.type);data\x3dreader(data,schema);schema.parse\x26\x26parse$jscomp$0(data,schema.parse,timeParser,utcParser);vegaUtil.hasOwnProperty(data,\x22columns\x22)\x26\x26delete data.columns;return data};\nexports.responseType\x3dfunction(type){return(type\x3dformats(type))\x26\x26type.responseType||\x22text\x22};exports.typeParsers\x3dtypeParsers;Object.defineProperty(exports,\x22__esModule\x22,{value:!0})})}");
SHADOW_ENV.evalLoad("module$node_modules$vega_dataflow$build$vega_dataflow.js", true , "shadow$provide.module$node_modules$vega_dataflow$build$vega_dataflow\x3dfunction(global$jscomp$0,require,module,exports$jscomp$0){(function(global,factory){\x22object\x22\x3d\x3d\x3dtypeof exports$jscomp$0\x26\x26\x22undefined\x22!\x3d\x3dtypeof module?factory(exports$jscomp$0,require(\x22module$node_modules$vega_util$build$vega_util\x22),require(\x22module$node_modules$vega_loader$build$vega_loader\x22),require(\x22module$node_modules$vega_format$build$vega_format\x22)):\x22function\x22\x3d\x3d\x3dtypeof define\x26\x26define.amd?define([\x22exports\x22,\x22vega-util\x22,\x22vega-loader\x22,\n\x22vega-format\x22],factory):(global\x3dglobal||self,factory(global.vega\x3d{},global.vega,global.vega,global.vega))})(this,function(exports,vegaUtil,vegaLoader,vegaFormat){function UniqueList(idFunc){var $\x3didFunc||vegaUtil.identity,list\x3d[],ids\x3d{};list.add\x3dfunction(_){var id\x3d$(_);ids[id]||(ids[id]\x3d1,list.push(_));return list};list.remove\x3dfunction(_){var id\x3d$(_),idx;ids[id]\x26\x26(ids[id]\x3d0,0\x3c\x3d(idx\x3dlist.indexOf(_))\x26\x26list.splice(idx,1));return list};return list}function asyncCallback(df,callback){var err;return $jscomp.asyncExecutePromiseGeneratorProgram(function($jscomp$generator$context){if(1\x3d\x3d\n$jscomp$generator$context.nextAddress)return $jscomp$generator$context.setCatchFinallyBlocks(2),$jscomp$generator$context.yield(callback(df),4);if(2!\x3d$jscomp$generator$context.nextAddress)return $jscomp$generator$context.leaveTryBlock(0);err\x3d$jscomp$generator$context.enterCatchBlock();df.error(err);$jscomp$generator$context.jumpToEnd()})}function ingest(datum){datum\x3ddatum\x3d\x3d\x3dObject(datum)?datum:{data:datum};if(!datum[TUPLE_ID_KEY]){var id\x3dTUPLE_ID++;datum[TUPLE_ID_KEY]\x3did}return datum}function rederive(t,\nd){for(var k in t)d[k]\x3dt[k];return d}function isChangeSet(v){return v\x26\x26v.constructor\x3d\x3d\x3dchangeset}function changeset(){var add\x3d[],rem\x3d[],mod\x3d[],remp\x3d[],modp\x3d[],clean\x3dnull,reflow\x3d!1;return{constructor:changeset,insert:function(t){t\x3dvegaUtil.array(t);for(var i\x3d0,n\x3dt.length;i\x3cn;++i)add.push(t[i]);return this},remove:function(t){var a\x3dvegaUtil.isFunction(t)?remp:rem;t\x3dvegaUtil.array(t);for(var i\x3d0,n\x3dt.length;i\x3cn;++i)a.push(t[i]);return this},modify:function(t,field,value){field\x3d{field:field,value:vegaUtil.constant(value)};\nvegaUtil.isFunction(t)?(field.filter\x3dt,modp.push(field)):(field.tuple\x3dt,mod.push(field));return this},encode:function(t,set){vegaUtil.isFunction(t)?modp.push({filter:t,field:set}):mod.push({tuple:t,field:set});return this},clean:function(value){clean\x3dvalue;return this},reflow:function(){reflow\x3d!0;return this},pulse:function(pulse,tuples){function modify(t,f,v){v?t[f]\x3dv(t):pulse.encode\x3df;reflow||(out[t[TUPLE_ID_KEY]]\x3dt)}var cur\x3d{},out\x3d{},n;var i\x3d0;for(n\x3dtuples.length;i\x3cn;++i)cur[tuples[i][TUPLE_ID_KEY]]\x3d\n1;i\x3d0;for(n\x3drem.length;i\x3cn;++i){var t$jscomp$0\x3drem[i];cur[t$jscomp$0[TUPLE_ID_KEY]]\x3d-1}i\x3d0;for(n\x3dremp.length;i\x3cn;++i){var f$jscomp$0\x3dremp[i];tuples.forEach(function(t){f$jscomp$0(t)\x26\x26(cur[t[TUPLE_ID_KEY]]\x3d-1)})}i\x3d0;for(n\x3dadd.length;i\x3cn;++i){t$jscomp$0\x3dadd[i];var id\x3dt$jscomp$0[TUPLE_ID_KEY];cur[id]?cur[id]\x3d1:pulse.add.push(ingest(add[i]))}i\x3d0;for(n\x3dtuples.length;i\x3cn;++i)t$jscomp$0\x3dtuples[i],0\x3ecur[t$jscomp$0[TUPLE_ID_KEY]]\x26\x26pulse.rem.push(t$jscomp$0);i\x3d0;for(n\x3dmod.length;i\x3cn;++i){var m\x3dmod[i];t$jscomp$0\x3d\nm.tuple;f$jscomp$0\x3dm.field;id\x3dcur[t$jscomp$0[TUPLE_ID_KEY]];0\x3cid\x26\x26(modify(t$jscomp$0,f$jscomp$0,m.value),pulse.modifies(f$jscomp$0))}i\x3d0;for(n\x3dmodp.length;i\x3cn;++i)m\x3dmodp[i],f$jscomp$0\x3dm.filter,tuples.forEach(function(t){f$jscomp$0(t)\x26\x260\x3ccur[t[TUPLE_ID_KEY]]\x26\x26modify(t,m.field,m.value)}),pulse.modifies(m.field);if(reflow)pulse.mod\x3drem.length||remp.length?tuples.filter(function(t){return 0\x3ccur[t[TUPLE_ID_KEY]]}):tuples.slice();else for(id in out)pulse.mod.push(out[id]);(clean||null\x3d\x3dclean\x26\x26(rem.length||\nremp.length))\x26\x26pulse.clean(!0);return pulse}}}function Parameters(){Object.defineProperty(this,\x22_:mod:_\x22,{writable:!0,value:{}})}function Operator(init,update,params,react){this.id\x3d++OP_ID;this.value\x3dinit;this.qrank\x3dthis.rank\x3dthis.stamp\x3d-1;this.flags\x3d0;update\x26\x26(this._update\x3dupdate);params\x26\x26this.parameters(params,react)}function flag(bit){return function(state){var f\x3dthis.flags;if(0\x3d\x3d\x3darguments.length)return!!(f\x26bit);this.flags\x3dstate?f|bit:f\x26~bit;return this}}function EventStream(filter,apply,receive){this.id\x3d\n++STREAM_ID;this.value\x3dnull;receive\x26\x26(this.receive\x3dreceive);filter\x26\x26(this._filter\x3dfilter);apply\x26\x26(this._apply\x3dapply)}function stream$jscomp$0(filter,apply,receive){return new EventStream(filter,apply,receive)}function loadPending(df){var pending\x3dnew Promise(function(a){accept\x3da}),accept;pending.requests\x3d0;pending.done\x3dfunction(){0\x3d\x3d\x3d--pending.requests\x26\x26(df._pending\x3dnull,accept(df))};return df._pending\x3dpending}function onStream(df,stream,target,update,params,options){var opt\x3dvegaUtil.extend({},options,\nSKIP$1);vegaUtil.isFunction(target)||(target\x3dvegaUtil.constant(target));if(void 0\x3d\x3d\x3dupdate)params\x3dfunction(e){return df.touch(target(e))};else if(vegaUtil.isFunction(update)){var op\x3dnew Operator(null,update,params,!1);params\x3dfunction(e){op.evaluate(e);e\x3dtarget(e);var v\x3dop.value;isChangeSet(v)?df.pulse(e,v,options):df.update(e,v,opt)}}else params\x3dfunction(e){return df.update(target(e),update,opt)};stream.apply(params)}function onOperator(df,source,target,update,params,options){void 0\x3d\x3d\x3dupdate?source.targets().add(target):\n(options\x3doptions||{},update\x3dnew Operator(null,updater(target,update),params,!1),update.modified(options.force),update.rank\x3dsource.rank,source.targets().add(update),target\x26\x26(update.skip(!0),update.value\x3dtarget.value,update.targets().add(target),df.connect(target,[update])))}function updater(target,update){update\x3dvegaUtil.isFunction(update)?update:vegaUtil.constant(update);return target?function(_,pulse){_\x3dupdate(_,pulse);target.skip()||(target.skip(_!\x3d\x3dthis.value).value\x3d_);return _}:update}function Pulse(dataflow,\nstamp,encode){this.dataflow\x3ddataflow;this.stamp\x3dnull\x3d\x3dstamp?-1:stamp;this.add\x3d[];this.rem\x3d[];this.mod\x3d[];this.fields\x3dnull;this.encode\x3dencode||null}function addFilter(a,b){return a?function(t,i){return a(t,i)\x26\x26b(t,i)}:b}function materialize(data,filter){var out\x3d[];vegaUtil.visitArray(data,filter,function(_){return out.push(_)});return out}function filter$jscomp$0(pulse,flags){var map\x3d{};pulse.visit(flags,function(t){map[t[TUPLE_ID_KEY]]\x3d1});return function(t){return map[t[TUPLE_ID_KEY]]?null:t}}function MultiPulse(dataflow,\nstamp,pulses,encode){var c\x3d0,n,f;this.dataflow\x3ddataflow;this.stamp\x3dstamp;this.fields\x3dnull;this.encode\x3dencode||null;this.pulses\x3dpulses;var i\x3d0;for(n\x3dpulses.length;i\x3cn;++i)if(dataflow\x3dpulses[i],dataflow.stamp\x3d\x3d\x3dstamp){if(dataflow.fields)for(f in encode\x3dthis.fields||(this.fields\x3d{}),dataflow.fields)encode[f]\x3d1;dataflow.changed(this.ADD)\x26\x26(c|\x3dthis.ADD);dataflow.changed(this.REM)\x26\x26(c|\x3dthis.REM);dataflow.changed(this.MOD)\x26\x26(c|\x3dthis.MOD)}this.changes\x3dc}function reentrant(df){df.error(\x22Dataflow already running. Use runAsync() to chain invocations.\x22);\nreturn df}function singlePulse(p,s){if(s\x26\x26s.stamp\x3d\x3d\x3dp.stamp)return s;p\x3dp.fork();s\x26\x26s!\x3d\x3dStopPropagation\x26\x26(p.source\x3ds.source);return p}function Heap(cmp){var nodes\x3d[];return{clear:function(){return nodes\x3d[]},size:function(){return nodes.length},peek:function(){return nodes[0]},push:function(x){nodes.push(x);return siftdown(nodes,0,nodes.length-1,cmp)},pop:function(){var last\x3dnodes.pop();if(nodes.length){var item\x3dnodes[0];nodes[0]\x3dlast;last\x3dnodes;for(var idx\x3d0,start\x3didx,end\x3dlast.length,item$jscomp$0\x3d\nlast[idx],cidx\x3d(idx\x3c\x3c1)+1,ridx;cidx\x3cend;)ridx\x3dcidx+1,ridx\x3cend\x26\x260\x3c\x3dcmp(last[cidx],last[ridx])\x26\x26(cidx\x3dridx),last[idx]\x3dlast[cidx],idx\x3dcidx,cidx\x3d(idx\x3c\x3c1)+1;last[idx]\x3ditem$jscomp$0;siftdown(last,start,idx,cmp)}else item\x3dlast;return item}}}function siftdown(array,start,idx,cmp){var item;for(item\x3darray[idx];idx\x3estart;){var pidx\x3didx-1\x3e\x3e1;var parent\x3darray[pidx];if(0\x3ecmp(item,parent))array[idx]\x3dparent,idx\x3dpidx;else break}return array[idx]\x3ditem}function Dataflow(){this.logger(vegaUtil.logger());this.logLevel(vegaUtil.Error);\nthis._rank\x3dthis._clock\x3d0;this._locale\x3dvegaFormat.defaultLocale();try{this._loader\x3dvegaLoader.loader()}catch(e){}this._touched\x3dUniqueList(vegaUtil.id);this._input\x3d{};this._pulse\x3dnull;this._heap\x3dHeap(function(a,b){return a.qrank-b.qrank});this._postrun\x3d[]}function logMethod(method){return function(){return this._log[method].apply(this,arguments)}}function Transform(init,params){Operator.call(this,init,null,params)}function transform(type){type\x3dtype\x26\x26type.toLowerCase();return vegaUtil.hasOwnProperty(transforms,\ntype)?transforms[type]:null}$jscomp.initSymbol();var TUPLE_ID_KEY\x3dSymbol(\x22vega_id\x22),TUPLE_ID\x3d1,prototype\x3dParameters.prototype;prototype.set\x3dfunction(name,index,value,force){var v\x3dthis[name],mod\x3dthis[\x22_:mod:_\x22];if(null!\x3dindex\x26\x260\x3c\x3dindex){if(v[index]!\x3d\x3dvalue||force)v[index]\x3dvalue,mod[index+\x22:\x22+name]\x3d-1,mod[name]\x3d-1}else if(v!\x3d\x3dvalue||force)this[name]\x3dvalue,mod[name]\x3dvegaUtil.isArray(value)?1+value.length:-1;return this};prototype.modified\x3dfunction(name,index){var mod\x3dthis[\x22_:mod:_\x22],k;if(!arguments.length){for(k in mod)if(mod[k])return!0;\nreturn!1}if(vegaUtil.isArray(name)){for(k\x3d0;k\x3cname.length;++k)if(mod[name[k]])return!0;return!1}return null!\x3dindex\x26\x260\x3c\x3dindex?index+1\x3cmod[name]||!!mod[index+\x22:\x22+name]:!!mod[name]};prototype.clear\x3dfunction(){this[\x22_:mod:_\x22]\x3d{};return this};var OP_ID\x3d0,NO_PARAMS\x3dnew Parameters;prototype\x3dOperator.prototype;prototype.targets\x3dfunction(){return this._targets||(this._targets\x3dUniqueList(vegaUtil.id))};prototype.set\x3dfunction(value){return this.value!\x3d\x3dvalue?(this.value\x3dvalue,1):0};prototype.skip\x3dflag(1);prototype.modified\x3d\nflag(2);prototype.parameters\x3dfunction(params,react,initonly){function add(name,index,value){value instanceof Operator?(value!\x3d\x3dself\x26\x26(react\x26\x26value.targets().add(self),deps.push(value)),argops.push({op:value,name:name,index:index})):argval.set(name,index,value)}react\x3d!1!\x3d\x3dreact;var self\x3dthis,argval\x3dself._argval\x3dself._argval||new Parameters,argops\x3dself._argops\x3dself._argops||[],deps\x3d[],name$jscomp$0,n,i;for(name$jscomp$0 in params){var value$jscomp$0\x3dparams[name$jscomp$0];if(\x22pulse\x22\x3d\x3d\x3dname$jscomp$0)vegaUtil.array(value$jscomp$0).forEach(function(op){op instanceof\nOperator?op!\x3d\x3dself\x26\x26(op.targets().add(self),deps.push(op)):vegaUtil.error(\x22Pulse parameters must be operator instances.\x22)}),self.source\x3dvalue$jscomp$0;else if(vegaUtil.isArray(value$jscomp$0))for(argval.set(name$jscomp$0,-1,Array(n\x3dvalue$jscomp$0.length)),i\x3d0;i\x3cn;++i)add(name$jscomp$0,i,value$jscomp$0[i]);else add(name$jscomp$0,-1,value$jscomp$0)}this.marshall().clear();initonly\x26\x26(argops.initonly\x3d!0);return deps};prototype.marshall\x3dfunction(stamp){var argval\x3dthis._argval||NO_PARAMS,argops\x3dthis._argops,\nn;if(argops){var i\x3d0;for(n\x3dargops.length;i\x3cn;++i){var item\x3dargops[i];var op\x3ditem.op;var mod\x3dop.modified()\x26\x26op.stamp\x3d\x3d\x3dstamp;argval.set(item.name,item.index,op.value,mod)}if(argops.initonly){for(i\x3d0;i\x3cn;++i)item\x3dargops[i],item.op.targets().remove(this);this._update\x3dthis._argops\x3dnull}}return argval};prototype.detach\x3dfunction(){var argops\x3dthis._argops,n;if(argops){var i\x3d0;for(n\x3dargops.length;i\x3cn;++i){var item\x3dargops[i];item\x3ditem.op;item._targets\x26\x26item._targets.remove(this)}}};prototype.evaluate\x3dfunction(pulse){var update\x3d\nthis._update;if(update){var params\x3dthis.marshall(pulse.stamp);update\x3dupdate.call(this,params,pulse);params.clear();if(update!\x3d\x3dthis.value)this.value\x3dupdate;else if(!this.modified())return pulse.StopPropagation}};prototype.run\x3dfunction(pulse){if(pulse.stamp\x3cthis.stamp)return pulse.StopPropagation;if(this.skip()){this.skip(!1);var rv\x3d0}else rv\x3dthis.evaluate(pulse);return this.pulse\x3drv||pulse};var STREAM_ID\x3d0;prototype\x3dEventStream.prototype;prototype._filter\x3dvegaUtil.truthy;prototype._apply\x3dvegaUtil.identity;\nprototype.targets\x3dfunction(){return this._targets||(this._targets\x3dUniqueList(vegaUtil.id))};prototype.consume\x3dfunction(_){if(!arguments.length)return!!this._consume;this._consume\x3d!!_;return this};prototype.receive\x3dfunction(evt){if(this._filter(evt)){for(var val\x3dthis.value\x3dthis._apply(evt),trg\x3dthis._targets,n\x3dtrg?trg.length:0,i\x3d0;i\x3cn;++i)trg[i].receive(val);this._consume\x26\x26(evt.preventDefault(),evt.stopPropagation())}};prototype.filter\x3dfunction(filter){filter\x3dstream$jscomp$0(filter);this.targets().add(filter);\nreturn filter};prototype.apply\x3dfunction(apply){apply\x3dstream$jscomp$0(null,apply);this.targets().add(apply);return apply};prototype.merge\x3dfunction(){var s\x3dstream$jscomp$0();this.targets().add(s);for(var i\x3d0,n\x3darguments.length;i\x3cn;++i)arguments[i].targets().add(s);return s};prototype.throttle\x3dfunction(pause){var t\x3d-1;return this.filter(function(){var now\x3dDate.now();return now-t\x3epause?(t\x3dnow,1):0})};prototype.debounce\x3dfunction(delay){var s\x3dstream$jscomp$0();this.targets().add(stream$jscomp$0(null,null,\nvegaUtil.debounce(delay,function(e){var df\x3de.dataflow;s.receive(e);df\x26\x26df.run\x26\x26df.run()})));return s};prototype.between\x3dfunction(a,b){var active\x3d!1;a.targets().add(stream$jscomp$0(null,null,function(){active\x3d!0}));b.targets().add(stream$jscomp$0(null,null,function(){active\x3d!1}));return this.filter(function(){return active})};var SKIP$1\x3d{skip:!0},StopPropagation\x3d{};prototype\x3dPulse.prototype;prototype.StopPropagation\x3dStopPropagation;prototype.ADD\x3d1;prototype.REM\x3d2;prototype.MOD\x3d4;prototype.ADD_REM\x3d\n3;prototype.ADD_MOD\x3d5;prototype.ALL\x3d7;prototype.REFLOW\x3d8;prototype.SOURCE\x3d16;prototype.NO_SOURCE\x3d32;prototype.NO_FIELDS\x3d64;prototype.fork\x3dfunction(flags){return(new Pulse(this.dataflow)).init(this,flags)};prototype.clone\x3dfunction(){var p\x3dthis.fork(7);p.add\x3dp.add.slice();p.rem\x3dp.rem.slice();p.mod\x3dp.mod.slice();p.source\x26\x26(p.source\x3dp.source.slice());return p.materialize(23)};prototype.addAll\x3dfunction(){var p\x3dthis;p.source\x26\x26p.source.length!\x3d\x3dp.add.length\x26\x26(p\x3d(new Pulse(this.dataflow)).init(this),p.add\x3d\np.source);return p};prototype.init\x3dfunction(src,flags){this.stamp\x3dsrc.stamp;this.encode\x3dsrc.encode;!src.fields||flags\x2664||(this.fields\x3dsrc.fields);flags\x261?(this.addF\x3dsrc.addF,this.add\x3dsrc.add):(this.addF\x3dnull,this.add\x3d[]);flags\x262?(this.remF\x3dsrc.remF,this.rem\x3dsrc.rem):(this.remF\x3dnull,this.rem\x3d[]);flags\x264?(this.modF\x3dsrc.modF,this.mod\x3dsrc.mod):(this.modF\x3dnull,this.mod\x3d[]);flags\x2632?this.source\x3dthis.srcF\x3dnull:(this.srcF\x3dsrc.srcF,this.source\x3dsrc.source,src.cleans\x26\x26(this.cleans\x3dsrc.cleans));return this};\nprototype.runAfter\x3dfunction(func){this.dataflow.runAfter(func)};prototype.changed\x3dfunction(flags){flags\x3dflags||7;return flags\x261\x26\x26this.add.length||flags\x262\x26\x26this.rem.length||flags\x264\x26\x26this.mod.length};prototype.reflow\x3dfunction(fork){if(fork)return this.fork(7).reflow();fork\x3dthis.add.length;var src\x3dthis.source\x26\x26this.source.length;src\x26\x26src!\x3d\x3dfork\x26\x26(this.mod\x3dthis.source,fork\x26\x26this.filter(4,filter$jscomp$0(this,1)));return this};prototype.clean\x3dfunction(value){return arguments.length?(this.cleans\x3d!!value,\nthis):this.cleans};prototype.modifies\x3dfunction(_){var hash\x3dthis.fields||(this.fields\x3d{});vegaUtil.isArray(_)?_.forEach(function(f){return hash[f]\x3d!0}):hash[_]\x3d!0;return this};prototype.modified\x3dfunction(_,nomod){var fields\x3dthis.fields;return(nomod||this.mod.length)\x26\x26fields?arguments.length?vegaUtil.isArray(_)?_.some(function(f){return fields[f]}):fields[_]:!!fields:!1};prototype.filter\x3dfunction(flags,filter){flags\x261\x26\x26(this.addF\x3daddFilter(this.addF,filter));flags\x262\x26\x26(this.remF\x3daddFilter(this.remF,\nfilter));flags\x264\x26\x26(this.modF\x3daddFilter(this.modF,filter));flags\x2616\x26\x26(this.srcF\x3daddFilter(this.srcF,filter));return this};prototype.materialize\x3dfunction(flags){flags\x3dflags||7;flags\x261\x26\x26this.addF\x26\x26(this.add\x3dmaterialize(this.add,this.addF),this.addF\x3dnull);flags\x262\x26\x26this.remF\x26\x26(this.rem\x3dmaterialize(this.rem,this.remF),this.remF\x3dnull);flags\x264\x26\x26this.modF\x26\x26(this.mod\x3dmaterialize(this.mod,this.modF),this.modF\x3dnull);flags\x2616\x26\x26this.srcF\x26\x26(this.source\x3dthis.source.filter(this.srcF),this.srcF\x3dnull);return this};\nprototype.visit\x3dfunction(flags,visitor){var src;if(flags\x2616)return vegaUtil.visitArray(this.source,this.srcF,visitor),this;flags\x261\x26\x26vegaUtil.visitArray(this.add,this.addF,visitor);flags\x262\x26\x26vegaUtil.visitArray(this.rem,this.remF,visitor);flags\x264\x26\x26vegaUtil.visitArray(this.mod,this.modF,visitor);flags\x268\x26\x26(src\x3dthis.source)\x26\x26(flags\x3dthis.add.length+this.mod.length,flags!\x3d\x3dsrc.length\x26\x26(flags?vegaUtil.visitArray(src,filter$jscomp$0(this,5),visitor):vegaUtil.visitArray(src,this.srcF,visitor)));return this};\nprototype\x3dvegaUtil.inherits(MultiPulse,Pulse);prototype.fork\x3dfunction(flags){var p\x3d(new Pulse(this.dataflow)).init(this,flags\x26this.NO_FIELDS);void 0!\x3d\x3dflags\x26\x26(flags\x26p.ADD\x26\x26this.visit(p.ADD,function(t){return p.add.push(t)}),flags\x26p.REM\x26\x26this.visit(p.REM,function(t){return p.rem.push(t)}),flags\x26p.MOD\x26\x26this.visit(p.MOD,function(t){return p.mod.push(t)}));return p};prototype.changed\x3dfunction(flags){return this.changes\x26flags};prototype.modified\x3dfunction(_){var fields\x3dthis.fields;return fields\x26\x26this.changes\x26\nthis.MOD?vegaUtil.isArray(_)?_.some(function(f){return fields[f]}):fields[_]:0};prototype.filter\x3dfunction(){vegaUtil.error(\x22MultiPulse does not support filtering.\x22)};prototype.materialize\x3dfunction(){vegaUtil.error(\x22MultiPulse does not support materialization.\x22)};prototype.visit\x3dfunction(flags,visitor){var pulses\x3dthis.pulses,n\x3dpulses.length,i\x3d0;if(flags\x26this.SOURCE)for(;i\x3cn;++i)pulses[i].visit(flags,visitor);else for(;i\x3cn;++i)pulses[i].stamp\x3d\x3d\x3dthis.stamp\x26\x26pulses[i].visit(flags,visitor);return this};\nvar NO_OPT\x3d{skip:!1,force:!1};prototype\x3dDataflow.prototype;prototype.stamp\x3dfunction(){return this._clock};prototype.loader\x3dfunction(_){return arguments.length?(this._loader\x3d_,this):this._loader};prototype.locale\x3dfunction(_){return arguments.length?(this._locale\x3d_,this):this._locale};prototype.cleanThreshold\x3d1E4;prototype.add\x3dfunction(init,update,params,react){var shift\x3d1;init instanceof Operator||(init\x26\x26init.prototype instanceof Operator?init\x3dnew init:vegaUtil.isFunction(init)?init\x3dnew Operator(null,\ninit):(shift\x3d0,init\x3dnew Operator(init,update)));this.rank(init);shift\x26\x26(react\x3dparams,params\x3dupdate);params\x26\x26this.connect(init,init.parameters(params,react));this.touch(init);return init};prototype.connect\x3dfunction(target,sources){var targetRank\x3dtarget.rank,n;var i\x3d0;for(n\x3dsources.length;i\x3cn;++i)if(targetRank\x3csources[i].rank){this.rerank(target);break}};prototype.rank\x3dfunction(op){op.rank\x3d++this._rank};prototype.rerank\x3dfunction(op){for(var queue\x3d[op],cur,list,i;queue.length;)if(this.rank(cur\x3dqueue.pop()),\nlist\x3dcur._targets)for(i\x3dlist.length;0\x3c\x3d--i;)queue.push(cur\x3dlist[i]),cur\x3d\x3d\x3dop\x26\x26vegaUtil.error(\x22Cycle detected in dataflow graph.\x22)};prototype.pulse\x3dfunction(op,changeset,options){this.touch(op,options||NO_OPT);options\x3dnew Pulse(this,this._clock+(this._pulse?0:1));var t\x3dop.pulse\x26\x26op.pulse.source||[];options.target\x3dop;this._input[op.id]\x3dchangeset.pulse(options,t);return this};prototype.touch\x3dfunction(op,options){options\x3doptions||NO_OPT;this._pulse?this._enqueue(op):this._touched.add(op);options.skip\x26\x26\nop.skip(!0);return this};prototype.update\x3dfunction(op,value,options){options\x3doptions||NO_OPT;(op.set(value)||options.force)\x26\x26this.touch(op,options);return this};prototype.changeset\x3dchangeset;prototype.ingest\x3dfunction(target,data,format){data\x3dthis.parse(data,format);return this.pulse(target,this.changeset().insert(data))};prototype.parse\x3dfunction(data,format){var locale\x3dthis.locale();return vegaLoader.read(data,format,locale.timeParse,locale.utcParse)};prototype.preload\x3dfunction(target,url,format){var $jscomp$async$this\x3d\nthis,df,pending,res;return $jscomp.asyncExecutePromiseGeneratorProgram(function($jscomp$generator$context){if(1\x3d\x3d$jscomp$generator$context.nextAddress)return df\x3d$jscomp$async$this,pending\x3ddf._pending||loadPending(df),pending.requests+\x3d1,$jscomp$generator$context.yield(df.request(url,format),2);res\x3d$jscomp$generator$context.yieldResult;df.pulse(target,df.changeset().remove(vegaUtil.truthy).insert(res.data||[]));pending.done();return $jscomp$generator$context.return(res)})};prototype.request\x3dfunction(url,\nformat){var $jscomp$async$this\x3dthis,df,status,data,err$587;return $jscomp.asyncExecutePromiseGeneratorProgram(function($jscomp$generator$context){switch($jscomp$generator$context.nextAddress){case 1:return df\x3d$jscomp$async$this,status\x3d0,$jscomp$generator$context.setCatchFinallyBlocks(2),$jscomp$generator$context.yield(df.loader().load(url,{context:\x22dataflow\x22,response:vegaLoader.responseType(format\x26\x26format.type)}),4);case 4:data\x3d$jscomp$generator$context.yieldResult;try{data\x3ddf.parse(data,format)}catch(err){status\x3d\n-2,df.warn(\x22Data ingestion failed\x22,url,err)}$jscomp$generator$context.leaveTryBlock(3);break;case 2:err$587\x3d$jscomp$generator$context.enterCatchBlock(),status\x3d-1,df.warn(\x22Loading failed\x22,url,err$587);case 3:return $jscomp$generator$context.return({data:data,status:status})}})};prototype.events\x3dfunction(source,type,filter,apply){var df\x3dthis,s\x3dstream$jscomp$0(filter,apply);filter\x3dfunction(e){e.dataflow\x3ddf;try{s.receive(e)}catch(error){df.error(error)}finally{df.run()}};source\x3d\x22string\x22\x3d\x3d\x3dtypeof source\x26\x26\n\x22undefined\x22!\x3d\x3dtypeof document?document.querySelectorAll(source):vegaUtil.array(source);apply\x3d0;for(var n\x3dsource.length;apply\x3cn;++apply)source[apply].addEventListener(type,filter);return s};prototype.on\x3dfunction(source,target,update,params,options){(source instanceof Operator?onOperator:onStream)(this,source,target,update,params,options);return this};prototype.evaluate\x3dfunction(encode,prerun,postrun){var $jscomp$async$this\x3dthis,df,async,stamp,count,op$jscomp$0,next,error,err,pr,i;return $jscomp.asyncExecutePromiseGeneratorProgram(function($jscomp$generator$context){switch($jscomp$generator$context.nextAddress){case 1:df\x3d\n$jscomp$async$this;async\x3d[];if(df._pulse)return $jscomp$generator$context.return(reentrant(df));if(!df._pending){$jscomp$generator$context.jumpTo(2);break}return $jscomp$generator$context.yield(df._pending,2);case 2:if(!prerun){$jscomp$generator$context.jumpTo(4);break}return $jscomp$generator$context.yield(asyncCallback(df,prerun),4);case 4:if(!df._touched.length)return df.debug(\x22Dataflow invoked, but nothing to do.\x22),$jscomp$generator$context.return(df);stamp\x3d++df._clock;df._pulse\x3dnew Pulse(df,\nstamp,encode);df._touched.forEach(function(op){return df._enqueue(op,!0)});df._touched\x3dUniqueList(vegaUtil.id);count\x3d0;$jscomp$generator$context.setCatchFinallyBlocks(6);case 8:if(!(0\x3cdf._heap.size())){$jscomp$generator$context.leaveTryBlock(7);break}op$jscomp$0\x3ddf._heap.pop();if(op$jscomp$0.rank!\x3d\x3dop$jscomp$0.qrank){df._enqueue(op$jscomp$0,!0);$jscomp$generator$context.jumpTo(8);break}next\x3dop$jscomp$0.run(df._getPulse(op$jscomp$0,encode));if(!next.then){next.async\x26\x26(async.push(next.async),next\x3dStopPropagation);\n$jscomp$generator$context.jumpTo(10);break}return $jscomp$generator$context.yield(next,11);case 11:next\x3d$jscomp$generator$context.yieldResult;case 10:next!\x3d\x3dStopPropagation\x26\x26op$jscomp$0._targets\x26\x26op$jscomp$0._targets.forEach(function(op){return df._enqueue(op)});++count;$jscomp$generator$context.jumpTo(8);break;case 6:err\x3d$jscomp$generator$context.enterCatchBlock(),df._heap.clear(),error\x3derr;case 7:df._input\x3d{};df._pulse\x3dnull;df.debug(\x22Pulse \x22+stamp+\x22: \x22+count+\x22 operators\x22);error\x26\x26(df._postrun\x3d[],\ndf.error(error));if(!df._postrun.length){$jscomp$generator$context.jumpTo(12);break}pr\x3ddf._postrun.sort(function(a,b){return b.priority-a.priority});df._postrun\x3d[];i\x3d0;case 13:if(!(i\x3cpr.length)){$jscomp$generator$context.jumpTo(12);break}return $jscomp$generator$context.yield(asyncCallback(df,pr[i].callback),14);case 14:++i;$jscomp$generator$context.jumpTo(13);break;case 12:if(!postrun){$jscomp$generator$context.jumpTo(17);break}return $jscomp$generator$context.yield(asyncCallback(df,postrun),17);\ncase 17:return async.length\x26\x26Promise.all(async).then(function(cb){return df.runAsync(null,function(){cb.forEach(function(f){try{f(df)}catch(err$588){df.error(err$588)}})})}),$jscomp$generator$context.return(df)}})};prototype.run\x3dfunction(encode,prerun,postrun){return this._pulse?reentrant(this):(this.evaluate(encode,prerun,postrun),this)};prototype.runAsync\x3dfunction(encode,prerun,postrun){var $jscomp$async$this\x3dthis,clear;return $jscomp.asyncExecutePromiseGeneratorProgram(function($jscomp$generator$context){if(1\x3d\x3d\n$jscomp$generator$context.nextAddress)return $jscomp$async$this._running?$jscomp$generator$context.yield($jscomp$async$this._running,1):$jscomp$generator$context.jumpTo(3);clear\x3dfunction(){return $jscomp$async$this._running\x3dnull};($jscomp$async$this._running\x3d$jscomp$async$this.evaluate(encode,prerun,postrun)).then(clear,clear);return $jscomp$generator$context.return($jscomp$async$this._running)})};prototype.runAfter\x3dfunction(callback,enqueue,priority){if(this._pulse||enqueue)this._postrun.push({priority:priority||\n0,callback:callback});else try{callback(this)}catch(err){this.error(err)}};prototype._enqueue\x3dfunction(op,force){var q\x3dop.stamp\x3cthis._clock;q\x26\x26(op.stamp\x3dthis._clock);if(q||force)op.qrank\x3dop.rank,this._heap.push(op)};prototype._getPulse\x3dfunction(op,encode){var s\x3dop.source,stamp\x3dthis._clock;return s\x26\x26vegaUtil.isArray(s)?new MultiPulse(this,stamp,s.map(function(_){return _.pulse}),encode):this._input[op.id]||singlePulse(this._pulse,s\x26\x26s.pulse)};prototype.logger\x3dfunction(logger){return arguments.length?\n(this._log\x3dlogger,this):this._log};prototype.error\x3dlogMethod(\x22error\x22);prototype.warn\x3dlogMethod(\x22warn\x22);prototype.info\x3dlogMethod(\x22info\x22);prototype.debug\x3dlogMethod(\x22debug\x22);prototype.logLevel\x3dlogMethod(\x22level\x22);prototype\x3dvegaUtil.inherits(Transform,Operator);prototype.run\x3dfunction(pulse){var $jscomp$this\x3dthis;if(pulse.stamp\x3cthis.stamp)return pulse.StopPropagation;var rv;this.skip()?this.skip(!1):rv\x3dthis.evaluate(pulse);rv\x3drv||pulse;rv.then?rv\x3drv.then(function(_){return $jscomp$this.pulse\x3d_}):rv!\x3d\x3dpulse.StopPropagation\x26\x26\n(this.pulse\x3drv);return rv};prototype.evaluate\x3dfunction(pulse){var params\x3dthis.marshall(pulse.stamp);pulse\x3dthis.transform(params,pulse);params.clear();return pulse};prototype.transform\x3dfunction(){};var transforms\x3d{};exports.Dataflow\x3dDataflow;exports.EventStream\x3dEventStream;exports.MultiPulse\x3dMultiPulse;exports.Operator\x3dOperator;exports.Parameters\x3dParameters;exports.Pulse\x3dPulse;exports.Transform\x3dTransform;exports.UniqueList\x3dUniqueList;exports.asyncCallback\x3dasyncCallback;exports.changeset\x3dchangeset;\nexports.definition\x3dfunction(type){return(type\x3dtransform(type))\x26\x26type.Definition||null};exports.derive\x3dfunction(t){return rederive(t,ingest({}))};exports.ingest\x3dingest;exports.isChangeSet\x3disChangeSet;exports.isTuple\x3dfunction(t){return!(!t||!t[TUPLE_ID_KEY])};exports.rederive\x3drederive;exports.replace\x3dfunction(t,d){d[TUPLE_ID_KEY]\x3dt[TUPLE_ID_KEY];return d};exports.stableCompare\x3dfunction(cmp,f){return cmp?f?function(a,b){return cmp(a,b)||f(a)[TUPLE_ID_KEY]-f(b)[TUPLE_ID_KEY]}:function(a,b){return cmp(a,\nb)||a[TUPLE_ID_KEY]-b[TUPLE_ID_KEY]}:null};exports.transform\x3dtransform;exports.transforms\x3dtransforms;exports.tupleid\x3dfunction(t){return t[TUPLE_ID_KEY]};Object.defineProperty(exports,\x22__esModule\x22,{value:!0})})}");
SHADOW_ENV.evalLoad("module$node_modules$vega_statistics$build$vega_statistics.js", true , "shadow$provide.module$node_modules$vega_statistics$build$vega_statistics\x3dfunction(global$jscomp$0,require,module,exports$jscomp$0){(function(global,factory){\x22object\x22\x3d\x3d\x3dtypeof exports$jscomp$0\x26\x26\x22undefined\x22!\x3d\x3dtypeof module?factory(exports$jscomp$0,require(\x22module$node_modules$d3_array$dist$d3_array\x22)):\x22function\x22\x3d\x3d\x3dtypeof define\x26\x26define.amd?define([\x22exports\x22,\x22d3-array\x22],factory):(global\x3dglobal||self,factory(global.vega\x3d{},global.d3))})(this,function(exports,d3Array){function numbers(values,valueof){var index$589,\n$jscomp$iter$310,$jscomp$key$value,value$590,$jscomp$iter$309,value;return $jscomp.generator.createGenerator(numbers,function($jscomp$generator$context){switch($jscomp$generator$context.nextAddress){case 1:if(null\x3d\x3dvalueof){$jscomp$generator$context.jumpTo(2);break}index$589\x3d-1;$jscomp$iter$310\x3d$jscomp.makeIterator(values);$jscomp$key$value\x3d$jscomp$iter$310.next();case 4:if($jscomp$key$value.done){$jscomp$generator$context.jumpTo(0);break}value$590\x3d$jscomp$key$value.value;value$590\x3dvalueof(value$590,\n++index$589,values);if(!(null!\x3dvalue$590\x26\x26\x22\x22!\x3d\x3dvalue$590\x26\x26(value$590\x3d+value$590)\x3e\x3dvalue$590)){$jscomp$generator$context.jumpTo(5);break}return $jscomp$generator$context.yield(value$590,5);case 5:$jscomp$key$value\x3d$jscomp$iter$310.next();$jscomp$generator$context.jumpTo(4);break;case 2:$jscomp$iter$309\x3d$jscomp.makeIterator(values),$jscomp$key$value\x3d$jscomp$iter$309.next();case 9:if($jscomp$key$value.done){$jscomp$generator$context.jumpTo(0);break}value\x3d$jscomp$key$value.value;if(!(null!\x3dvalue\x26\x26\x22\x22!\x3d\x3d\nvalue\x26\x26(value\x3d+value)\x3e\x3dvalue)){$jscomp$generator$context.jumpTo(10);break}return $jscomp$generator$context.yield(value,10);case 10:$jscomp$key$value\x3d$jscomp$iter$309.next(),$jscomp$generator$context.jumpTo(9)}})}function quantiles(array,p,f){var values\x3dFloat64Array.from(numbers(array,f));values.sort(d3Array.ascending);return p.map(function(_){return d3Array.quantileSorted(values,_)})}function quartiles(array,f){return quantiles(array,[.25,.5,.75],f)}function estimateBandwidth(array,f){var n\x3darray.length,\nv\x3dd3Array.deviation(array,f);array\x3dquartiles(array,f);v\x3dMath.min(v,(array[2]-array[0])/1.34)||v||Math.abs(array[0])||1;return 1.06*v*Math.pow(n,-.2)}function smoothing(v,thresh){for(var n\x3dv.length,a\x3d0,b\x3d1,c,d;v[a]\x3d\x3d\x3dv[b];)++b;for(;b\x3cn;){for(c\x3db+1;v[b]\x3d\x3d\x3dv[c];)++c;if(v[b]-v[b-1]\x3cthresh){for(d\x3db+(a+c-b-b\x3e\x3e1);d\x3cb;)v[d++]\x3dv[b];for(;d\x3eb;)v[d--]\x3dv[a]}a\x3db;b\x3dc}return v}function sampleNormal(mean,stdev){mean\x3dmean||0;stdev\x3dnull\x3d\x3dstdev?1:stdev;if(nextSample\x3d\x3d\x3dnextSample){var x\x3dnextSample;nextSample\x3dNaN}else{do{x\x3d\n2*exports.random()-1;var y\x3d2*exports.random()-1;var rds\x3dx*x+y*y}while(0\x3d\x3d\x3drds||1\x3crds);rds\x3dMath.sqrt(-2*Math.log(rds)/rds);x*\x3drds;nextSample\x3dy*rds}return mean+x*stdev}function densityNormal(value,mean,stdev){stdev\x3dnull\x3d\x3dstdev?1:stdev;value\x3d(value-(mean||0))/stdev;return Math.exp(-.5*value*value)/(stdev*SQRT2PI)}function cumulativeNormal(value,mean,stdev){value\x3d(value-(mean||0))/(null\x3d\x3dstdev?1:stdev);mean\x3dMath.abs(value);37\x3cmean?mean\x3d0:(stdev\x3dMath.exp(-mean*mean/2),mean\x3d7.07106781186547\x3emean?stdev*\n((((((.0352624965998911*mean+.700383064443688)*mean+6.37396220353165)*mean+33.912866078383)*mean+112.079291497871)*mean+221.213596169931)*mean+220.206867912376)/(((((((.0883883476483184*mean+1.75566716318264)*mean+16.064177579207)*mean+86.7807322029461)*mean+296.564248779674)*mean+637.333633378831)*mean+793.826512519948)*mean+440.413735824752):stdev/(mean+1/(mean+2/(mean+3/(mean+4/(mean+.65)))))/2.506628274631);return 0\x3cvalue?1-mean:mean}function quantileNormal(p,mean,stdev){if(0\x3ep||1\x3cp)return NaN;\np\x3d2*p-1;var w\x3d-Math.log((1-p)*(1+p));6.25\x3ew?(w-\x3d3.125,w\x3d1.6536545626831027+(.24015818242558962+(-.006033670871430149+(-7.40702534166267E-4+(1.8673420803405714E-4+(-1.3882523362786469E-5+(-1.3654692000834679E-6+(4.2347877827932404E-7+(-2.9070369957882005E-8+(-4.112633980346984E-9+(1.0512122733215323E-9+(-5.415412054294628E-11+(-1.2975133253453532E-11+(2.6335093153082323E-12+(-8.151934197605472E-14+(-4.054566272975207E-14+(6.637638134358324E-15+(2.0972767875968562E-17+(-1.333171662854621E-16+(1.1157877678025181E-17+\n(1.28584807152564E-18+(-1.6850591381820166E-19+-3.64441206401782E-21*w)*w)*w)*w)*w)*w)*w)*w)*w)*w)*w)*w)*w)*w)*w)*w)*w)*w)*w)*w)*w)*w):16\x3ew?(w\x3dMath.sqrt(w)-3.25,w\x3d3.0838856104922208+(1.0052589676941592+(.005370914553590064+(-.003751208507569241+(.002491442096107851+(-.0016882755560235047+(9.532893797373805E-4+(-3.550375203628475E-4+(2.4031110387097894E-5+(6.828485145957318E-5+(-4.7318229009055734E-5+(1.2475304481671779E-5+(2.9234449089955446E-6+(-4.013867526981546E-6+(1.5027403968909828E-6+(1.8239629214389228E-8+\n(-2.7517406297064545E-7+(9.075656193888539E-8+2.2137376921775787E-9*w)*w)*w)*w)*w)*w)*w)*w)*w)*w)*w)*w)*w)*w)*w)*w)*w)*w):Number.isFinite(w)?(w\x3dMath.sqrt(w)-5,w\x3d4.849906401408584+(1.0103004648645344+(-1.3871931833623122E-4+(-2.1503011930044477E-4+(7.599527703001776E-5+(-1.968177810553167E-5+(4.526062597223154E-6+(-9.9298272942317E-7+(2.2900482228026655E-7+(-6.771199775845234E-8+(2.914795345090108E-8+(-1.496002662714924E-8+(7.61570120807834E-9+(-3.789465440126737E-9+(1.5076572693500548E-9+(-2.555641816996525E-10+\n-2.7109920616438573E-11*w)*w)*w)*w)*w)*w)*w)*w)*w)*w)*w)*w)*w)*w)*w)*w):w\x3dInfinity;return(mean||0)+(null\x3d\x3dstdev?1:stdev)*SQRT2*w*p}function gaussian(mean,stdev){var mu,sigma,dist\x3d{mean:function(_){return arguments.length?(mu\x3d_||0,dist):mu},stdev:function(_){return arguments.length?(sigma\x3dnull\x3d\x3d_?1:_,dist):sigma},sample:function(){return sampleNormal(mu,sigma)},pdf:function(value){return densityNormal(value,mu,sigma)},cdf:function(value){return cumulativeNormal(value,mu,sigma)},icdf:function(p){return quantileNormal(p,\nmu,sigma)}};return dist.mean(mean).stdev(stdev)}function sampleLogNormal(mean,stdev){stdev\x3dnull\x3d\x3dstdev?1:stdev;return Math.exp((mean||0)+sampleNormal()*stdev)}function densityLogNormal(value,mean,stdev){if(0\x3e\x3dvalue)return 0;stdev\x3dnull\x3d\x3dstdev?1:stdev;mean\x3d(Math.log(value)-(mean||0))/stdev;return Math.exp(-.5*mean*mean)/(stdev*SQRT2PI*value)}function cumulativeLogNormal(value,mean,stdev){return cumulativeNormal(Math.log(value),mean,stdev)}function quantileLogNormal(p,mean,stdev){return Math.exp(quantileNormal(p,\nmean,stdev))}function sampleUniform(min,max){null\x3d\x3dmax\x26\x26(max\x3dnull\x3d\x3dmin?1:min,min\x3d0);return min+(max-min)*exports.random()}function densityUniform(value,min,max){null\x3d\x3dmax\x26\x26(max\x3dnull\x3d\x3dmin?1:min,min\x3d0);return value\x3e\x3dmin\x26\x26value\x3c\x3dmax?1/(max-min):0}function cumulativeUniform(value,min,max){null\x3d\x3dmax\x26\x26(max\x3dnull\x3d\x3dmin?1:min,min\x3d0);return value\x3cmin?0:value\x3emax?1:(value-min)/(max-min)}function quantileUniform(p,min,max){null\x3d\x3dmax\x26\x26(max\x3dnull\x3d\x3dmin?1:min,min\x3d0);return 0\x3c\x3dp\x26\x261\x3e\x3dp?min+p*(max-min):NaN}function ols(uX,\nuY,uXY,uX2){uX2-\x3duX*uX;uXY\x3d1E-24\x3eMath.abs(uX2)?0:(uXY-uX*uY)/uX2;return[uY-uXY*uX,uXY]}function points(data,x,y,sort){data\x3ddata.filter(function(d){var u\x3dx(d);d\x3dy(d);return null!\x3du\x26\x26(u\x3d+u)\x3e\x3du\x26\x26null!\x3dd\x26\x26(d\x3d+d)\x3e\x3dd});sort\x26\x26data.sort(function(a,b){return x(a)-x(b)});sort\x3ddata.length;var X\x3dnew Float64Array(sort),Y\x3dnew Float64Array(sort),i\x3d0,ux\x3d0,uy\x3d0,xv;data\x3d$jscomp.makeIterator(data);for(xv\x3ddata.next();!xv.done;xv\x3ddata.next()){var yv\x3dxv.value;X[i]\x3dxv\x3d+x(yv);Y[i]\x3dyv\x3d+y(yv);++i;ux+\x3d(xv-ux)/i;uy+\x3d(yv-uy)/\ni}for(i\x3d0;i\x3csort;++i)X[i]-\x3dux,Y[i]-\x3duy;return[X,Y,ux,uy]}function visitPoints(data,x,y,callback){var i\x3d-1,u;data\x3d$jscomp.makeIterator(data);for(u\x3ddata.next();!u.done;u\x3ddata.next()){var v\x3du.value;u\x3dx(v);v\x3dy(v);null!\x3du\x26\x26(u\x3d+u)\x3e\x3du\x26\x26null!\x3dv\x26\x26(v\x3d+v)\x3e\x3dv\x26\x26callback(u,v,++i)}}function rSquared(data,x,y,uY,predict){var SSE\x3d0,SST\x3d0;visitPoints(data,x,y,function(dx,dy){dx\x3ddy-predict(dx);dy-\x3duY;SSE+\x3ddx*dx;SST+\x3ddy*dy});return 1-SSE/SST}function linear(data,x$jscomp$0,y){var X\x3d0,Y\x3d0,XY\x3d0,X2\x3d0,n\x3d0;visitPoints(data,\nx$jscomp$0,y,function(dx,dy){++n;X+\x3d(dx-X)/n;Y+\x3d(dy-Y)/n;XY+\x3d(dx*dy-XY)/n;X2+\x3d(dx*dx-X2)/n});var coef\x3dols(X,Y,XY,X2),predict\x3dfunction(x){return coef[0]+coef[1]*x};return{coef:coef,predict:predict,rSquared:rSquared(data,x$jscomp$0,y,Y,predict)}}function quad(data,x$jscomp$0,y){var $jscomp$destructuring$var414\x3d$jscomp.makeIterator(points(data,x$jscomp$0,y)),xv\x3d$jscomp$destructuring$var414.next().value,yv\x3d$jscomp$destructuring$var414.next().value,ux\x3d$jscomp$destructuring$var414.next().value,uy\x3d$jscomp$destructuring$var414.next().value,\nn\x3dxv.length,X3\x3d$jscomp$destructuring$var414\x3d0,X4\x3d0,XY\x3d0,X2Y\x3d0,i;for(i\x3d0;i\x3cn;){var dx\x3dxv[i];var dy\x3dyv[i++];var x2\x3ddx*dx;$jscomp$destructuring$var414+\x3d(x2-$jscomp$destructuring$var414)/i;X3+\x3d(x2*dx-X3)/i;X4+\x3d(x2*x2-X4)/i;XY+\x3d(dx*dy-XY)/i;X2Y+\x3d(x2*dy-X2Y)/i}xv\x3dX4-$jscomp$destructuring$var414*$jscomp$destructuring$var414;yv\x3d$jscomp$destructuring$var414*xv-X3*X3;var a\x3d(X2Y*$jscomp$destructuring$var414-XY*X3)/yv,b\x3d(XY*xv-X2Y*X3)/yv,c\x3d-a*$jscomp$destructuring$var414;$jscomp$destructuring$var414\x3dfunction(x){x-\x3d\nux;return a*x*x+b*x+c+uy};return{coef:[c-b*ux+a*ux*ux+uy,b-2*a*ux,a],predict:$jscomp$destructuring$var414,rSquared:rSquared(data,x$jscomp$0,y,uy,$jscomp$destructuring$var414)}}function uncenter(k,a,x,y){var z\x3dArray(k),i;for(i\x3d0;i\x3ck;++i)z[i]\x3d0;for(i\x3dk-1;0\x3c\x3di;--i){var v\x3da[i];var c\x3d1;z[i]+\x3dv;for(k\x3d1;k\x3c\x3di;++k)c*\x3d(i+1-k)/k,z[i-k]+\x3dv*Math.pow(x,k)*c}z[0]+\x3dy;return z}function gaussianElimination(matrix){var n\x3dmatrix.length-1,coef\x3d[],i,j,k;for(i\x3d0;i\x3cn;++i){var r\x3di;for(j\x3di+1;j\x3cn;++j)Math.abs(matrix[i][j])\x3e\nMath.abs(matrix[i][r])\x26\x26(r\x3dj);for(k\x3di;k\x3cn+1;++k){var t\x3dmatrix[k][i];matrix[k][i]\x3dmatrix[k][r];matrix[k][r]\x3dt}for(j\x3di+1;j\x3cn;++j)for(k\x3dn;k\x3e\x3di;k--)matrix[k][j]-\x3dmatrix[k][i]*matrix[i][j]/matrix[i][i]}for(j\x3dn-1;0\x3c\x3dj;--j){t\x3d0;for(k\x3dj+1;k\x3cn;++k)t+\x3dmatrix[k][j]*coef[k];coef[j]\x3d(matrix[n][j]-t)/matrix[j][j]}return coef}exports.random\x3dMath.random;var SQRT2PI\x3dMath.sqrt(2*Math.PI),SQRT2\x3dMath.SQRT2,nextSample\x3dNaN,MIN_RADIANS\x3d.1*Math.PI/180;exports.bandwidthNRD\x3destimateBandwidth;exports.bin\x3dfunction(_){var maxb\x3d\n_.maxbins||20,base\x3d_.base||10,logb\x3dMath.log(base),div\x3d_.divide||[5,2],min\x3d_.extent[0],max\x3d_.extent[1],span\x3d_.span||max-min||Math.abs(min)||1,n;if(_.step)var step\x3d_.step;else if(_.steps){var v\x3dspan/maxb;var i\x3d0;for(n\x3d_.steps.length;i\x3cn\x26\x26_.steps[i]\x3cv;++i);step\x3d_.steps[Math.max(0,i-1)]}else{step\x3dMath.ceil(Math.log(maxb)/logb);var minstep\x3d_.minstep||0;for(step\x3dMath.max(minstep,Math.pow(base,Math.round(Math.log(span)/logb)-step));Math.ceil(span/step)\x3emaxb;)step*\x3dbase;i\x3d0;for(n\x3ddiv.length;i\x3cn;++i)v\x3dstep/\ndiv[i],v\x3e\x3dminstep\x26\x26span/v\x3c\x3dmaxb\x26\x26(step\x3dv)}v\x3dMath.log(step);maxb\x3dMath.pow(base,-(0\x3c\x3dv?0:~~(-v/logb)+1)-1);if(_.nice||void 0\x3d\x3d\x3d_.nice)v\x3dMath.floor(min/step+maxb)*step,min\x3dmin\x3cv?v-step:v,max\x3dMath.ceil(max/step)*step;return{start:min,stop:max\x3d\x3d\x3dmin?min+step:max,step:step}};exports.bootstrapCI\x3dfunction(array,samples,alpha,f){if(!array.length)return[void 0,void 0];array\x3dFloat64Array.from(numbers(array,f));f\x3darray.length;var a,i,mu;var j\x3d0;for(mu\x3dArray(samples);j\x3csamples;++j){for(i\x3da\x3d0;i\x3cf;++i)a+\x3darray[~~(exports.random()*\nf)];mu[j]\x3da/f}mu.sort(d3Array.ascending);return[d3Array.quantile(mu,alpha/2),d3Array.quantile(mu,1-alpha/2)]};exports.cumulativeLogNormal\x3dcumulativeLogNormal;exports.cumulativeNormal\x3dcumulativeNormal;exports.cumulativeUniform\x3dcumulativeUniform;exports.densityLogNormal\x3ddensityLogNormal;exports.densityNormal\x3ddensityNormal;exports.densityUniform\x3ddensityUniform;exports.dotbin\x3dfunction(array,step,smooth,f){f\x3df||function(_){return _};for(var i\x3d0,j\x3d1,n\x3darray.length,v\x3dnew Float64Array(n),a\x3df(array[0]),b\x3d\na,w\x3da+step,x;j\x3cn;++j){x\x3df(array[j]);if(x\x3e\x3dw){for(b\x3d(a+b)/2;i\x3cj;++i)v[i]\x3db;w\x3dx+step;a\x3dx}b\x3dx}for(b\x3d(a+b)/2;i\x3cj;++i)v[i]\x3db;return smooth?smoothing(v,step+step/4):v};exports.quantileLogNormal\x3dquantileLogNormal;exports.quantileNormal\x3dquantileNormal;exports.quantileUniform\x3dquantileUniform;exports.quantiles\x3dquantiles;exports.quartiles\x3dquartiles;exports.randomInteger\x3dfunction(min,max){null\x3d\x3dmax\x26\x26(max\x3dmin,min\x3d0);var dist\x3d{},a,b,d;dist.min\x3dfunction(_){return arguments.length?(a\x3d_||0,d\x3db-a,dist):a};dist.max\x3d\nfunction(_){return arguments.length?(b\x3d_||0,d\x3db-a,dist):b};dist.sample\x3dfunction(){return a+Math.floor(d*exports.random())};dist.pdf\x3dfunction(x){return x\x3d\x3d\x3dMath.floor(x)\x26\x26x\x3e\x3da\x26\x26x\x3cb?1/d:0};dist.cdf\x3dfunction(x){x\x3dMath.floor(x);return x\x3ca?0:x\x3e\x3db?1:(x-a+1)/d};dist.icdf\x3dfunction(p){return 0\x3c\x3dp\x26\x261\x3e\x3dp?a-1+Math.floor(p*d):NaN};return dist.min(min).max(max)};exports.randomKDE\x3dfunction(support,bandwidth){var kernel\x3dgaussian(),dist\x3d{},n\x3d0;dist.data\x3dfunction(_){return arguments.length?(n\x3d(support\x3d_)?_.length:\n0,dist.bandwidth(bandwidth)):support};dist.bandwidth\x3dfunction(_){if(!arguments.length)return bandwidth;bandwidth\x3d_;!bandwidth\x26\x26support\x26\x26(bandwidth\x3destimateBandwidth(support));return dist};dist.sample\x3dfunction(){return support[~~(exports.random()*n)]+bandwidth*kernel.sample()};dist.pdf\x3dfunction(x){for(var y\x3d0,i\x3d0;i\x3cn;++i)y+\x3dkernel.pdf((x-support[i])/bandwidth);return y/bandwidth/n};dist.cdf\x3dfunction(x){for(var y\x3d0,i\x3d0;i\x3cn;++i)y+\x3dkernel.cdf((x-support[i])/bandwidth);return y/n};dist.icdf\x3dfunction(){throw Error(\x22KDE icdf not supported.\x22);\n};return dist.data(support)};exports.randomLCG\x3dfunction(seed){return function(){seed\x3d(1103515245*seed+12345)%2147483647;return seed/2147483647}};exports.randomLogNormal\x3dfunction(mean,stdev){var mu,sigma,dist\x3d{mean:function(_){return arguments.length?(mu\x3d_||0,dist):mu},stdev:function(_){return arguments.length?(sigma\x3dnull\x3d\x3d_?1:_,dist):sigma},sample:function(){return sampleLogNormal(mu,sigma)},pdf:function(value){return densityLogNormal(value,mu,sigma)},cdf:function(value){return cumulativeLogNormal(value,\nmu,sigma)},icdf:function(p){return quantileLogNormal(p,mu,sigma)}};return dist.mean(mean).stdev(stdev)};exports.randomMixture\x3dfunction(dists,weights){var dist\x3d{},m\x3d0,w$jscomp$0;dist.weights\x3dfunction(_){if(arguments.length){var x\x3dweights\x3d_||[],w\x3d[],sum\x3d0,i;for(i\x3d0;i\x3cm;++i)sum+\x3dw[i]\x3dnull\x3d\x3dx[i]?1:+x[i];for(i\x3d0;i\x3cm;++i)w[i]/\x3dsum;w$jscomp$0\x3dw;return dist}return weights};dist.distributions\x3dfunction(_){return arguments.length?(_?(m\x3d_.length,dists\x3d_):(m\x3d0,dists\x3d[]),dist.weights(weights)):dists};dist.sample\x3d\nfunction(){for(var r\x3dexports.random(),d\x3ddists[m-1],v\x3dw$jscomp$0[0],i\x3d0;i\x3cm-1;v+\x3dw$jscomp$0[++i])if(r\x3cv){d\x3ddists[i];break}return d.sample()};dist.pdf\x3dfunction(x){for(var p\x3d0,i\x3d0;i\x3cm;++i)p+\x3dw$jscomp$0[i]*dists[i].pdf(x);return p};dist.cdf\x3dfunction(x){for(var p\x3d0,i\x3d0;i\x3cm;++i)p+\x3dw$jscomp$0[i]*dists[i].cdf(x);return p};dist.icdf\x3dfunction(){throw Error(\x22Mixture icdf not supported.\x22);};return dist.distributions(dists).weights(weights)};exports.randomNormal\x3dgaussian;exports.randomUniform\x3dfunction(min,max){var a,\nb,dist\x3d{min:function(_){return arguments.length?(a\x3d_||0,dist):a},max:function(_){return arguments.length?(b\x3dnull\x3d\x3d_?1:_,dist):b},sample:function(){return sampleUniform(a,b)},pdf:function(value){return densityUniform(value,a,b)},cdf:function(value){return cumulativeUniform(value,a,b)},icdf:function(p){return quantileUniform(p,a,b)}};null\x3d\x3dmax\x26\x26(max\x3dnull\x3d\x3dmin?1:min,min\x3d0);return dist.min(min).max(max)};exports.regressionExp\x3dfunction(data,x$jscomp$0,y){var $jscomp$destructuring$var412\x3d$jscomp.makeIterator(points(data,\nx$jscomp$0,y)),xv\x3d$jscomp$destructuring$var412.next().value;$jscomp$destructuring$var412.next();var ux\x3d$jscomp$destructuring$var412.next().value;$jscomp$destructuring$var412\x3d$jscomp$destructuring$var412.next().value;var YL\x3d0,XY\x3d0,XYL\x3d0,X2Y\x3d0,n\x3d0,dx,ly,xy;visitPoints(data,x$jscomp$0,y,function(_,dy){dx\x3dxv[n++];ly\x3dMath.log(dy);xy\x3ddx*dy;YL+\x3d(dy*ly-YL)/n;XY+\x3d(xy-XY)/n;XYL+\x3d(xy*ly-XYL)/n;X2Y+\x3d(dx*xy-X2Y)/n});var $jscomp$destructuring$var413\x3d$jscomp.makeIterator(ols(XY/$jscomp$destructuring$var412,YL/$jscomp$destructuring$var412,\nXYL/$jscomp$destructuring$var412,X2Y/$jscomp$destructuring$var412)),c0\x3d$jscomp$destructuring$var413.next().value,c1\x3d$jscomp$destructuring$var413.next().value;$jscomp$destructuring$var413\x3dfunction(x){return Math.exp(c0+c1*(x-ux))};return{coef:[Math.exp(c0-c1*ux),c1],predict:$jscomp$destructuring$var413,rSquared:rSquared(data,x$jscomp$0,y,$jscomp$destructuring$var412,$jscomp$destructuring$var413)}};exports.regressionLinear\x3dlinear;exports.regressionLoess\x3dfunction(data,x$jscomp$0,y,bandwidth){y\x3d$jscomp.makeIterator(points(data,\nx$jscomp$0,y,!0));data\x3dy.next().value;var yv\x3dy.next().value;x$jscomp$0\x3dy.next().value;y\x3dy.next().value;var n\x3ddata.length,bw\x3dMath.max(2,~~(bandwidth*n));bandwidth\x3dnew Float64Array(n);for(var residuals\x3dnew Float64Array(n),robustWeights\x3d(new Float64Array(n)).fill(1),iter\x3d-1;2\x3e\x3d++iter;){for(var interval\x3d[0,bw-1],i\x3d0;i\x3cn;++i){for(var dx\x3ddata[i],i0\x3dinterval[0],i1\x3dinterval[1],W\x3d0,X\x3d0,Y\x3d0,XY\x3d0,X2\x3d0,denom\x3d1/Math.abs(data[dx-data[i0]\x3edata[i1]-dx?i0:i1]-dx||1);i0\x3c\x3di1;++i0){var xk\x3ddata[i0],yk\x3dyv[i0],x\x3dMath.abs(dx-\nxk)*denom,w\x3d(x\x3d1-x*x*x)*x*x*robustWeights[i0];x\x3dxk*w;W+\x3dw;X+\x3dx;Y+\x3dyk*w;XY+\x3dyk*x;X2+\x3dxk*x}W\x3d$jscomp.makeIterator(ols(X/W,Y/W,XY/W,X2/W));i1\x3dW.next().value;W\x3dW.next().value;bandwidth[i]\x3di1+W*dx;residuals[i]\x3dMath.abs(yv[i]-bandwidth[i]);dx\x3di+1;i1\x3ddata[dx];W\x3dinterval[0];X\x3dinterval[1]+1;if(!(X\x3e\x3ddata.length))for(;dx\x3eW\x26\x26data[X]-i1\x3c\x3di1-data[W];)interval[0]\x3d++W,interval[1]\x3dX,++X}if(2\x3d\x3d\x3diter)break;interval\x3dd3Array.median(residuals);if(1E-12\x3eMath.abs(interval))break;i\x3d0;for(i1\x3dvoid 0;i\x3cn;++i)dx\x3dresiduals[i]/\n(6*interval),robustWeights[i]\x3d1\x3c\x3ddx?1E-12:(i1\x3d1-dx*dx)*i1}yv\x3ddata.length;n\x3d[];residuals\x3dbw\x3d0;for(robustWeights\x3d[];bw\x3cyv;++bw)iter\x3ddata[bw]+x$jscomp$0,robustWeights[0]\x3d\x3d\x3diter?robustWeights[1]+\x3d(bandwidth[bw]-robustWeights[1])/++residuals:(residuals\x3d0,robustWeights[1]+\x3dy,robustWeights\x3d[iter,bandwidth[bw]],n.push(robustWeights));robustWeights[1]+\x3dy;return n};exports.regressionLog\x3dfunction(data,x$jscomp$0,y){var X\x3d0,Y\x3d0,XY\x3d0,X2\x3d0,n\x3d0;visitPoints(data,x$jscomp$0,y,function(dx,dy){++n;dx\x3dMath.log(dx);X+\x3d\n(dx-X)/n;Y+\x3d(dy-Y)/n;XY+\x3d(dx*dy-XY)/n;X2+\x3d(dx*dx-X2)/n});var coef\x3dols(X,Y,XY,X2),predict\x3dfunction(x){return coef[0]+coef[1]*Math.log(x)};return{coef:coef,predict:predict,rSquared:rSquared(data,x$jscomp$0,y,Y,predict)}};exports.regressionPoly\x3dfunction(data,x$jscomp$0,y$jscomp$0,order){if(1\x3d\x3d\x3dorder)return linear(data,x$jscomp$0,y$jscomp$0);if(2\x3d\x3d\x3dorder)return quad(data,x$jscomp$0,y$jscomp$0);var $jscomp$destructuring$var415\x3d$jscomp.makeIterator(points(data,x$jscomp$0,y$jscomp$0)),xv\x3d$jscomp$destructuring$var415.next().value,\nyv\x3d$jscomp$destructuring$var415.next().value,ux\x3d$jscomp$destructuring$var415.next().value,uy\x3d$jscomp$destructuring$var415.next().value;$jscomp$destructuring$var415\x3dxv.length;var lhs\x3d[],rhs\x3d[],k\x3dorder+1,i,l,v;for(i\x3d0;i\x3ck;++i){for(v\x3dl\x3d0;l\x3c$jscomp$destructuring$var415;++l)v+\x3dMath.pow(xv[l],i)*yv[l];lhs.push(v);var c\x3dnew Float64Array(k);for(order\x3d0;order\x3ck;++order){for(v\x3dl\x3d0;l\x3c$jscomp$destructuring$var415;++l)v+\x3dMath.pow(xv[l],i+order);c[order]\x3dv}rhs.push(c)}rhs.push(lhs);var coef\x3dgaussianElimination(rhs);\nxv\x3dfunction(x){x-\x3dux;var y\x3duy+coef[0]+coef[1]*x+coef[2]*x*x;for(i\x3d3;i\x3ck;++i)y+\x3dcoef[i]*Math.pow(x,i);return y};return{coef:uncenter(k,coef,-ux,uy),predict:xv,rSquared:rSquared(data,x$jscomp$0,y$jscomp$0,uy,xv)}};exports.regressionPow\x3dfunction(data,x$jscomp$0,y){var X\x3d0,Y\x3d0,XY\x3d0,X2\x3d0,YS\x3d0,n\x3d0;visitPoints(data,x$jscomp$0,y,function(dx,dy){dx\x3dMath.log(dx);var ly\x3dMath.log(dy);++n;X+\x3d(dx-X)/n;Y+\x3d(ly-Y)/n;XY+\x3d(dx*ly-XY)/n;X2+\x3d(dx*dx-X2)/n;YS+\x3d(dy-YS)/n});var coef\x3dols(X,Y,XY,X2),predict\x3dfunction(x){return coef[0]*\nMath.pow(x,coef[1])};coef[0]\x3dMath.exp(coef[0]);return{coef:coef,predict:predict,rSquared:rSquared(data,x$jscomp$0,y,YS,predict)}};exports.regressionQuad\x3dquad;exports.sampleCurve\x3dfunction(f,extent,minSteps,maxSteps){minSteps\x3dminSteps||25;maxSteps\x3dMath.max(minSteps,maxSteps||200);var point\x3dfunction(x){return[x,f(x)]},minX\x3dextent[0],maxX\x3dextent[1],span\x3dmaxX-minX,stop\x3dspan/maxSteps;extent\x3d[point(minX)];var next\x3d[];if(minSteps\x3d\x3d\x3dmaxSteps){for(stop\x3d1;stop\x3cmaxSteps;++stop)extent.push(point(minX+stop/minSteps*\nspan));extent.push(point(maxX));return extent}next.push(point(maxX));for(maxSteps\x3dminSteps;0\x3c--maxSteps;)next.push(point(minX+maxSteps/minSteps*span));minSteps\x3dextent[0];for(minX\x3dnext[next.length-1];minX;)maxSteps\x3dpoint((minSteps[0]+minX[0])/2),maxSteps[0]-minSteps[0]\x3e\x3dstop\x26\x26Math.abs(Math.atan2(minX[1]-minSteps[1],minX[0]-minSteps[0])-Math.atan2(maxSteps[1]-minSteps[1],maxSteps[0]-minSteps[0]))\x3eMIN_RADIANS?next.push(maxSteps):(minSteps\x3dminX,extent.push(minX),next.pop()),minX\x3dnext[next.length-1];return extent};\nexports.sampleLogNormal\x3dsampleLogNormal;exports.sampleNormal\x3dsampleNormal;exports.sampleUniform\x3dsampleUniform;exports.setRandom\x3dfunction(r){exports.random\x3dr};Object.defineProperty(exports,\x22__esModule\x22,{value:!0})})}");
SHADOW_ENV.evalLoad("module$node_modules$vega_transforms$build$vega_transforms.js", true , "shadow$provide.module$node_modules$vega_transforms$build$vega_transforms\x3dfunction(global$jscomp$0,require,module,exports$jscomp$0){(function(global,factory){\x22object\x22\x3d\x3d\x3dtypeof exports$jscomp$0\x26\x26\x22undefined\x22!\x3d\x3dtypeof module?factory(exports$jscomp$0,require(\x22module$node_modules$vega_util$build$vega_util\x22),require(\x22module$node_modules$vega_dataflow$build$vega_dataflow\x22),require(\x22module$node_modules$vega_statistics$build$vega_statistics\x22),require(\x22module$node_modules$d3_array$dist$d3_array\x22),require(\x22module$node_modules$vega_time$build$vega_time\x22)):\n\x22function\x22\x3d\x3d\x3dtypeof define\x26\x26define.amd?define(\x22exports vega-util vega-dataflow vega-statistics d3-array vega-time\x22.split(\x22 \x22),factory):(global\x3dglobal||self,factory((global.vega\x3dglobal.vega||{},global.vega.transforms\x3d{}),global.vega,global.vega,global.vega,global.d3,global.vega))})(this,function(exports,vegaUtil,vegaDataflow,vegaStatistics,d3Array,vegaTime){function multikey(f){return function(x){for(var n\x3df.length,i\x3d1,k\x3dString(f[0](x));i\x3cn;++i)k+\x3d\x22|\x22+f[i](x);return k}}function groupkey(fields){return fields\x26\x26\nfields.length?1\x3d\x3d\x3dfields.length?fields[0]:multikey(fields):function(){return\x22\x22}}function measure(key,value){return function(out){return vegaUtil.extend({name:key,out:out||key},base_op,value)}}function compareIndex(a,b){return a.idx-b.idx}function resolve(agg){var map\x3d{};agg.forEach(function(a){return map[a.name]\x3da});var getreqs\x3dfunction(a){a.req\x26\x26a.req.forEach(function(key){map[key]||getreqs(map[key]\x3dAggregateOps[key]())})};agg.forEach(getreqs);return Object.values(map).sort(compareIndex)}function init$jscomp$0(){var $jscomp$this\x3d\nthis;this.missing\x3dthis.valid\x3d0;this._ops.forEach(function(op){return op.init($jscomp$this)})}function add$jscomp$0(v,t){var $jscomp$this\x3dthis;null\x3d\x3dv||\x22\x22\x3d\x3d\x3dv?++this.missing:v\x3d\x3d\x3dv\x26\x26(++this.valid,this._ops.forEach(function(op){return op.add($jscomp$this,v,t)}))}function rem$jscomp$0(v,t){var $jscomp$this\x3dthis;null\x3d\x3dv||\x22\x22\x3d\x3d\x3dv?--this.missing:v\x3d\x3d\x3dv\x26\x26(--this.valid,this._ops.forEach(function(op){return op.rem($jscomp$this,v,t)}))}function set$jscomp$0(t){var $jscomp$this\x3dthis;this._out.forEach(function(op){return t[op.out]\x3d\nop.value($jscomp$this)});return t}function compileMeasures(agg,field){function ctr(cell){this._ops\x3dops;this._out\x3dout;this.cell\x3dcell;this.init()}field\x3dfield||vegaUtil.identity;var ops\x3dresolve(agg),out\x3dagg.slice().sort(compareIndex);ctr.prototype.init\x3dinit$jscomp$0;ctr.prototype.add\x3dadd$jscomp$0;ctr.prototype.rem\x3drem$jscomp$0;ctr.prototype.set\x3dset$jscomp$0;ctr.prototype.get\x3dfield;ctr.fields\x3dagg.map(function(op){return op.out});return ctr}function TupleStore(key){this._key\x3dkey?vegaUtil.field(key):vegaDataflow.tupleid;\nthis.reset()}function Aggregate(params){vegaDataflow.Transform.call(this,null,params);this._adds\x3d[];this._mods\x3d[];this._mlen\x3dthis._alen\x3d0;this._drop\x3d!0;this._cross\x3d!1;this._dims\x3d[];this._dnames\x3d[];this._measures\x3d[];this._countOnly\x3d!1;this._outputs\x3dthis._inputs\x3dthis._prev\x3dthis._counts\x3dnull}function Bin(params){vegaDataflow.Transform.call(this,null,params)}function SortedList(idFunc,source,input){var data\x3dsource||[],add\x3dinput||[],rem\x3d{},cnt\x3d0;return{add:function(t){add.push(t)},remove:function(t){rem[idFunc(t)]\x3d\n++cnt},size:function(){return data.length},data:function(compare,resort){cnt\x26\x26(data\x3ddata.filter(function(t){return!rem[idFunc(t)]}),rem\x3d{},cnt\x3d0);resort\x26\x26compare\x26\x26data.sort(compare);add.length\x26\x26(data\x3dcompare?vegaUtil.merge(compare,data,add.sort(compare)):data.concat(add),add\x3d[]);return data}}}function Collect(params){vegaDataflow.Transform.call(this,[],params)}function Compare(params){vegaDataflow.Operator.call(this,null,update$jscomp$0,params)}function update$jscomp$0(_){return this.value\x26\x26!_.modified()?\nthis.value:vegaUtil.compare(_.fields,_.orders)}function CountPattern(params){vegaDataflow.Transform.call(this,null,params)}function Cross(params){vegaDataflow.Transform.call(this,null,params)}function parse(def,data){var func\x3ddef[\x22function\x22];vegaUtil.hasOwnProperty(Distributions,func)||vegaUtil.error(\x22Unknown distribution function: \x22+func);func\x3dDistributions[func]();for(var name in def)if(\x22field\x22\x3d\x3d\x3dname)func.data((def.from||data()).map(def[name]));else if(\x22distributions\x22\x3d\x3d\x3dname)func[name](def[name].map(function(_){return parse(_,\ndata)}));else if(\x22function\x22\x3d\x3d\x3dtypeof func[name])func[name](def[name]);return func}function Density(params){vegaDataflow.Transform.call(this,null,params)}function source$jscomp$0(pulse){return function(){return pulse.materialize(pulse.SOURCE).source}}function fieldNames(fields,as){return fields?fields.map(function(f,i){return as[i]||vegaUtil.accessorName(f)}):null}function partition(data,groupby,field){var groups\x3d[],get\x3dfunction(f){return f(t)},n;if(null\x3d\x3dgroupby)groups.push(data.map(field));else{var map\x3d\n{};var i\x3d0;for(n\x3ddata.length;i\x3cn;++i){var t\x3ddata[i];var k\x3dgroupby.map(get);var g\x3dmap[k];g||(map[k]\x3dg\x3d[],g.dims\x3dk,groups.push(g));g.push(field(t))}}return groups}function DotBin(params){vegaDataflow.Transform.call(this,null,params)}function Expression(params){vegaDataflow.Operator.call(this,null,update$1,params);this.modified(!0)}function update$1(_){var expr\x3d_.expr;return this.value\x26\x26!_.modified(\x22expr\x22)?this.value:vegaUtil.accessor(function(datum){return expr(datum,_)},vegaUtil.accessorFields(expr),\nvegaUtil.accessorName(expr))}function Extent(params){vegaDataflow.Transform.call(this,[void 0,void 0],params)}function Subflow(pulse,parent){vegaDataflow.Operator.call(this,pulse);this.parent\x3dparent;this.count\x3d0}function Facet(params){vegaDataflow.Transform.call(this,{},params);this._keys\x3dvegaUtil.fastmap();var a\x3dthis._targets\x3d[];a.active\x3d0;a.forEach\x3dfunction(f){for(var i\x3d0,n\x3da.active;i\x3cn;++i)f(a[i],i,a)}}function Field(params){vegaDataflow.Operator.call(this,null,update$2,params)}function update$2(_){return this.value\x26\x26\n!_.modified()?this.value:vegaUtil.isArray(_.name)?vegaUtil.array(_.name).map(function(f){return vegaUtil.field(f)}):vegaUtil.field(_.name,_.as)}function Filter(params){vegaDataflow.Transform.call(this,vegaUtil.fastmap(),params)}function Flatten(params){vegaDataflow.Transform.call(this,[],params)}function Fold(params){vegaDataflow.Transform.call(this,[],params)}function Formula(params){vegaDataflow.Transform.call(this,null,params)}function Generate(params){vegaDataflow.Transform.call(this,[],params)}\nfunction Impute(params){vegaDataflow.Transform.call(this,[],params)}function getValue(_){var m\x3d_.method||Methods.value;if(null\x3d\x3dMethods[m])vegaUtil.error(\x22Unrecognized imputation method: \x22+m);else{if(m\x3d\x3d\x3dMethods.value){var v\x3dvoid 0!\x3d\x3d_.value?_.value:0;return function(){return v}}return Methods[m]}}function getField(_){var f\x3d_.field;return function(t){return t?f(t):NaN}}function partition$1(data,groupby,key,keyvals){var get\x3dfunction(f){return f(t)},groups\x3d[];keyvals\x3dkeyvals?keyvals.slice():[];var kMap\x3d\n{},gMap\x3d{},group,n;keyvals.forEach(function(k,i){kMap[k]\x3di+1});var i$jscomp$0\x3d0;for(n\x3ddata.length;i$jscomp$0\x3cn;++i$jscomp$0){var t\x3ddata[i$jscomp$0];var gVals\x3dkey(t);var j\x3dkMap[gVals]||(kMap[gVals]\x3dkeyvals.push(gVals));var gKey\x3d(gVals\x3dgroupby?groupby.map(get):Empty)+\x22\x22;(group\x3dgMap[gKey])||(group\x3dgMap[gKey]\x3d[],groups.push(group),group.values\x3dgVals);group[j-1]\x3dt}groups.domain\x3dkeyvals;return groups}function JoinAggregate(params){Aggregate.call(this,params)}function KDE(params){vegaDataflow.Transform.call(this,\nnull,params)}function Key(params){vegaDataflow.Operator.call(this,null,update$3,params)}function update$3(_){return this.value\x26\x26!_.modified()?this.value:vegaUtil.key(_.fields,_.flat)}function Load(params){vegaDataflow.Transform.call(this,[],params);this._pending\x3dnull}function stop$jscomp$0(_){return _.modified(\x22async\x22)\x26\x26!(_.modified(\x22values\x22)||_.modified(\x22url\x22)||_.modified(\x22format\x22))}function output$jscomp$0(op,pulse,data){data.forEach(vegaDataflow.ingest);pulse\x3dpulse.fork(pulse.NO_FIELDS\x26pulse.NO_SOURCE);\npulse.rem\x3dop.value;op.value\x3dpulse.source\x3dpulse.add\x3ddata;op._pending\x3dnull;pulse.rem.length\x26\x26pulse.clean(!0);return pulse}function Lookup(params){vegaDataflow.Transform.call(this,{},params)}function MultiExtent(params){vegaDataflow.Operator.call(this,null,update$4,params)}function update$4(_){if(this.value\x26\x26!_.modified())return this.value;var min\x3dInfinity,max\x3d-Infinity;_\x3d_.extents;var n;var i\x3d0;for(n\x3d_.length;i\x3cn;++i){var e\x3d_[i];e[0]\x3cmin\x26\x26(min\x3de[0]);e[1]\x3emax\x26\x26(max\x3de[1])}return[min,max]}function MultiValues(params){vegaDataflow.Operator.call(this,\nnull,update$5,params)}function update$5(_$jscomp$0){return this.value\x26\x26!_$jscomp$0.modified()?this.value:_$jscomp$0.values.reduce(function(data,_){return data.concat(_)},[])}function Params(params){vegaDataflow.Transform.call(this,null,params)}function Pivot(params){Aggregate.call(this,params)}function aggregateParams(_,pulse){var key\x3d_.field,value\x3d_.value,op\x3d(\x22count\x22\x3d\x3d\x3d_.op?\x22__count__\x22:_.op)||\x22sum\x22,fields\x3dvegaUtil.accessorFields(key).concat(vegaUtil.accessorFields(value)),keys\x3dpivotKeys(key,_.limit||\n0,pulse);pulse.changed()\x26\x26_.set(\x22__pivot__\x22,null,null,!0);return{key:_.key,groupby:_.groupby,ops:keys.map(function(){return op}),fields:keys.map(function(k){return get$jscomp$0(k,key,value,fields)}),as:keys.map(function(k){return k+\x22\x22}),modified:_.modified.bind(_)}}function get$jscomp$0(k,key,value,fields){return vegaUtil.accessor(function(d){return key(d)\x3d\x3d\x3dk?value(d):NaN},fields,k+\x22\x22)}function pivotKeys(key,limit,pulse){var map\x3d{},list\x3d[];pulse.visit(pulse.SOURCE,function(t){t\x3dkey(t);map[t]||(map[t]\x3d\n1,list.push(t))});list.sort(function(u,v){return(u\x3cv||null\x3d\x3du)\x26\x26null!\x3dv?-1:(u\x3ev||null\x3d\x3dv)\x26\x26null!\x3du?1:(v\x3dv instanceof Date?+v:v,u\x3du instanceof Date?+u:u)!\x3d\x3du\x26\x26v\x3d\x3d\x3dv?-1:v!\x3d\x3dv\x26\x26u\x3d\x3d\x3du?1:0});return limit?list.slice(0,limit):list}function PreFacet(params){Facet.call(this,params)}function Project(params){vegaDataflow.Transform.call(this,null,params)}function Proxy(params){vegaDataflow.Transform.call(this,null,params)}function Quantile(params){vegaDataflow.Transform.call(this,null,params)}function Relay(params){vegaDataflow.Transform.call(this,\nnull,params)}function Sample(params){vegaDataflow.Transform.call(this,[],params);this.count\x3d0}function Sequence(params){vegaDataflow.Transform.call(this,null,params)}function Sieve(params){vegaDataflow.Transform.call(this,null,params);this.modified(!0)}function TimeUnit(params){vegaDataflow.Transform.call(this,null,params)}function TupleIndex(params){vegaDataflow.Transform.call(this,vegaUtil.fastmap(),params)}function Values(params){vegaDataflow.Transform.call(this,null,params)}function WindowOp(op,\nfield,param,as){var fn\x3dWindowOps[op](field,param);return{init:fn.init||vegaUtil.zero,update:function(w,t){t[as]\x3dfn.next(w)}}}function WindowState(_$jscomp$0){function visitInputs(f){vegaUtil.array(vegaUtil.accessorFields(f)).forEach(function(_){return inputs[_]\x3d1})}var ops\x3dvegaUtil.array(_$jscomp$0.ops),fields\x3dvegaUtil.array(_$jscomp$0.fields),params\x3dvegaUtil.array(_$jscomp$0.params),as\x3dvegaUtil.array(_$jscomp$0.as),outputs\x3dthis.outputs\x3d[],windows\x3dthis.windows\x3d[],inputs\x3d{},map\x3d{},countOnly\x3d!0,counts\x3d\n[],measures\x3d[];visitInputs(_$jscomp$0.sort);ops.forEach(function(op,i){var field\x3dfields[i],mname\x3dvegaUtil.accessorName(field),name\x3das[i]||op+(mname?\x22_\x22+mname:\x22\x22);visitInputs(field);outputs.push(name);vegaUtil.hasOwnProperty(WindowOps,op)?windows.push(WindowOp(op,fields[i],params[i],name)):(null\x3d\x3dfield\x26\x26\x22count\x22!\x3d\x3dop\x26\x26vegaUtil.error(\x22Null aggregate field specified.\x22),\x22count\x22\x3d\x3d\x3dop?counts.push(name):(countOnly\x3d!1,i\x3dmap[mname],i||(i\x3dmap[mname]\x3d[],i.field\x3dfield,measures.push(i)),i.push(AggregateOps[op](name))))});\nif(counts.length||measures.length)this.cell\x3dcell$jscomp$0(measures,counts,countOnly);this.inputs\x3dObject.keys(inputs)}function cell$jscomp$0(measures,counts,countOnly){measures\x3dmeasures.map(function(m){return compileMeasures(m,m.field)});var cell\x3d{num:0,agg:null,store:!1,count:counts};if(!countOnly)for(var n$jscomp$0\x3dmeasures.length,a\x3dcell.agg\x3dArray(n$jscomp$0),i$jscomp$0\x3d0;i$jscomp$0\x3cn$jscomp$0;++i$jscomp$0)a[i$jscomp$0]\x3dnew measures[i$jscomp$0](cell);if(cell.store)var store\x3dcell.data\x3dnew TupleStore;\ncell.add\x3dfunction(t){cell.num+\x3d1;if(!countOnly){store\x26\x26store.add(t);for(var i$597\x3d0;i$597\x3cn$jscomp$0;++i$597)a[i$597].add(a[i$597].get(t),t)}};cell.rem\x3dfunction(t){--cell.num;if(!countOnly){store\x26\x26store.rem(t);for(var i$598\x3d0;i$598\x3cn$jscomp$0;++i$598)a[i$598].rem(a[i$598].get(t),t)}};cell.set\x3dfunction(t){var n;store\x26\x26store.values();var i\x3d0;for(n\x3dcounts.length;i\x3cn;++i)t[counts[i]]\x3dcell.num;if(!countOnly)for(i\x3d0,n\x3da.length;i\x3cn;++i)a[i].set(t)};cell.init\x3dfunction(){cell.num\x3d0;store\x26\x26store.reset();for(var i$599\x3d\n0;i$599\x3cn$jscomp$0;++i$599)a[i$599].init()};return cell}function Window(params){vegaDataflow.Transform.call(this,{},params);this._mlen\x3d0;this._mods\x3d[]}function processPartition(list,state,cmp,_){var sort\x3d_.sort,range\x3dsort\x26\x26!_.ignorePeers;_\x3d_.frame||[null,0];list\x3dlist.data(cmp);cmp\x3dlist.length;var i\x3d0,b\x3drange?d3Array.bisector(sort):null;sort\x3d{i0:0,i1:0,p0:0,p1:0,index:0,data:list,compare:sort||vegaUtil.constant(-1)};for(state.init();i\x3ccmp;++i){var w\x3dsort,f\x3d_,i$jscomp$0\x3di,n\x3dcmp;w.p0\x3dw.i0;w.p1\x3dw.i1;\nw.i0\x3dnull\x3d\x3df[0]?0:Math.max(0,i$jscomp$0-Math.abs(f[0]));w.i1\x3dnull\x3d\x3df[1]?n:Math.min(n,i$jscomp$0+Math.abs(f[1])+1);w.index\x3di$jscomp$0;if(range){w\x3dsort;f\x3db;i$jscomp$0\x3dw.i0;n\x3dw.i1-1;var c\x3dw.compare,d\x3dw.data,n$jscomp$0\x3dd.length-1;0\x3ci$jscomp$0\x26\x26!c(d[i$jscomp$0],d[i$jscomp$0-1])\x26\x26(w.i0\x3df.left(d,d[i$jscomp$0]));n\x3cn$jscomp$0\x26\x26!c(d[n],d[n+1])\x26\x26(w.i1\x3df.right(d,d[n]))}state.update(sort,list[i])}}var noop\x3dfunction(){},base_op\x3d{init:noop,add:noop,rem:noop,idx:0},AggregateOps\x3d{values:{init:function(m){return m.cell.store\x3d\n!0},value:function(m){return m.cell.data.values()},idx:-1},count:{value:function(m){return m.cell.num}},__count__:{value:function(m){return m.missing+m.valid}},missing:{value:function(m){return m.missing}},valid:{value:function(m){return m.valid}},sum:{init:function(m){return m.sum\x3d0},value:function(m){return m.sum},add:function(m,v){return m.sum+\x3d+v},rem:function(m,v){return m.sum-\x3dv}},product:{init:function(m){return m.product\x3d1},value:function(m){return m.valid?m.product:void 0},add:function(m,\nv){return m.product*\x3dv},rem:function(m,v){return m.product/\x3dv}},mean:{init:function(m){return m.mean\x3d0},value:function(m){return m.valid?m.mean:void 0},add:function(m,v){return m.mean_d\x3dv-m.mean,m.mean+\x3dm.mean_d/m.valid},rem:function(m,v){return m.mean_d\x3dv-m.mean,m.mean-\x3dm.valid?m.mean_d/m.valid:m.mean}},average:{value:function(m){return m.valid?m.mean:void 0},req:[\x22mean\x22],idx:1},variance:{init:function(m){return m.dev\x3d0},value:function(m){return 1\x3cm.valid?m.dev/(m.valid-1):void 0},add:function(m,\nv){return m.dev+\x3dm.mean_d*(v-m.mean)},rem:function(m,v){return m.dev-\x3dm.mean_d*(v-m.mean)},req:[\x22mean\x22],idx:1},variancep:{value:function(m){return 1\x3cm.valid?m.dev/m.valid:void 0},req:[\x22variance\x22],idx:2},stdev:{value:function(m){return 1\x3cm.valid?Math.sqrt(m.dev/(m.valid-1)):void 0},req:[\x22variance\x22],idx:2},stdevp:{value:function(m){return 1\x3cm.valid?Math.sqrt(m.dev/m.valid):void 0},req:[\x22variance\x22],idx:2},stderr:{value:function(m){return 1\x3cm.valid?Math.sqrt(m.dev/(m.valid*(m.valid-1))):void 0},req:[\x22variance\x22],\nidx:2},distinct:{value:function(m){return m.cell.data.distinct(m.get)},req:[\x22values\x22],idx:3},ci0:{value:function(m){return m.cell.data.ci0(m.get)},req:[\x22values\x22],idx:3},ci1:{value:function(m){return m.cell.data.ci1(m.get)},req:[\x22values\x22],idx:3},median:{value:function(m){return m.cell.data.q2(m.get)},req:[\x22values\x22],idx:3},q1:{value:function(m){return m.cell.data.q1(m.get)},req:[\x22values\x22],idx:3},q3:{value:function(m){return m.cell.data.q3(m.get)},req:[\x22values\x22],idx:3},min:{init:function(m){return m.min\x3d\nvoid 0},value:function(m){return m.min\x3dNumber.isNaN(m.min)?m.cell.data.min(m.get):m.min},add:function(m,v){if(v\x3cm.min||void 0\x3d\x3d\x3dm.min)m.min\x3dv},rem:function(m,v){v\x3c\x3dm.min\x26\x26(m.min\x3dNaN)},req:[\x22values\x22],idx:4},max:{init:function(m){return m.max\x3dvoid 0},value:function(m){return m.max\x3dNumber.isNaN(m.max)?m.cell.data.max(m.get):m.max},add:function(m,v){if(v\x3em.max||void 0\x3d\x3d\x3dm.max)m.max\x3dv},rem:function(m,v){v\x3e\x3dm.max\x26\x26(m.max\x3dNaN)},req:[\x22values\x22],idx:4},argmin:{init:function(m){return m.argmin\x3dvoid 0},value:function(m){return m.argmin||\nm.cell.data.argmin(m.get)},add:function(m,v,t){v\x3cm.min\x26\x26(m.argmin\x3dt)},rem:function(m,v){v\x3c\x3dm.min\x26\x26(m.argmin\x3dvoid 0)},req:[\x22min\x22,\x22values\x22],idx:3},argmax:{init:function(m){return m.argmax\x3dvoid 0},value:function(m){return m.argmax||m.cell.data.argmax(m.get)},add:function(m,v,t){v\x3em.max\x26\x26(m.argmax\x3dt)},rem:function(m,v){v\x3e\x3dm.max\x26\x26(m.argmax\x3dvoid 0)},req:[\x22max\x22,\x22values\x22],idx:3}},ValidAggregateOps\x3dObject.keys(AggregateOps);ValidAggregateOps.forEach(function(key){AggregateOps[key]\x3dmeasure(key,AggregateOps[key])});\nvar prototype\x3dTupleStore.prototype;prototype.reset\x3dfunction(){this._add\x3d[];this._rem\x3d[];this._q\x3dthis._get\x3dthis._ext\x3dnull};prototype.add\x3dfunction(v){this._add.push(v)};prototype.rem\x3dfunction(v){this._rem.push(v)};prototype.values\x3dfunction(){this._get\x3dnull;if(0\x3d\x3d\x3dthis._rem.length)return this._add;var a\x3dthis._add,r\x3dthis._rem,k\x3dthis._key,n\x3da.length,m\x3dr.length,x\x3dArray(n-m),map\x3d{},i,v;for(i\x3d0;i\x3cm;++i)map[k(r[i])]\x3d1;for(r\x3di\x3d0;i\x3cn;++i)map[k(v\x3da[i])]?map[k(v)]\x3d0:x[r++]\x3dv;this._rem\x3d[];return this._add\x3dx};prototype.distinct\x3d\nfunction(get){for(var v\x3dthis.values(),n\x3dv.length,map\x3d{},count\x3d0,s;0\x3c\x3d--n;)s\x3dget(v[n])+\x22\x22,vegaUtil.hasOwnProperty(map,s)||(map[s]\x3d1,++count);return count};prototype.extent\x3dfunction(get){if(this._get!\x3d\x3dget||!this._ext){var v\x3dthis.values(),i\x3dvegaUtil.extentIndex(v,get);this._ext\x3d[v[i[0]],v[i[1]]];this._get\x3dget}return this._ext};prototype.argmin\x3dfunction(get){return this.extent(get)[0]||{}};prototype.argmax\x3dfunction(get){return this.extent(get)[1]||{}};prototype.min\x3dfunction(get){var m\x3dthis.extent(get)[0];\nreturn null!\x3dm?get(m):void 0};prototype.max\x3dfunction(get){var m\x3dthis.extent(get)[1];return null!\x3dm?get(m):void 0};prototype.quartile\x3dfunction(get){this._get\x3d\x3d\x3dget\x26\x26this._q||(this._q\x3dvegaStatistics.quartiles(this.values(),get),this._get\x3dget);return this._q};prototype.q1\x3dfunction(get){return this.quartile(get)[0]};prototype.q2\x3dfunction(get){return this.quartile(get)[1]};prototype.q3\x3dfunction(get){return this.quartile(get)[2]};prototype.ci\x3dfunction(get){this._get\x3d\x3d\x3dget\x26\x26this._ci||(this._ci\x3dvegaStatistics.bootstrapCI(this.values(),\n1E3,.05,get),this._get\x3dget);return this._ci};prototype.ci0\x3dfunction(get){return this.ci(get)[0]};prototype.ci1\x3dfunction(get){return this.ci(get)[1]};Aggregate.Definition\x3d{type:\x22Aggregate\x22,metadata:{generates:!0,changes:!0},params:[{name:\x22groupby\x22,type:\x22field\x22,array:!0},{name:\x22ops\x22,type:\x22enum\x22,array:!0,values:ValidAggregateOps},{name:\x22fields\x22,type:\x22field\x22,\x22null\x22:!0,array:!0},{name:\x22as\x22,type:\x22string\x22,\x22null\x22:!0,array:!0},{name:\x22drop\x22,type:\x22boolean\x22,\x22default\x22:!0},{name:\x22cross\x22,type:\x22boolean\x22,\x22default\x22:!1},\n{name:\x22key\x22,type:\x22field\x22}]};var prototype$1\x3dvegaUtil.inherits(Aggregate,vegaDataflow.Transform);prototype$1.transform\x3dfunction(_,pulse){var $jscomp$this\x3dthis,aggr\x3dthis,out\x3dpulse.fork(pulse.NO_SOURCE|pulse.NO_FIELDS),mod\x3d_.modified();aggr.stamp\x3dout.stamp;aggr.value\x26\x26(mod||pulse.modified(aggr._inputs,!0))?(aggr._prev\x3daggr.value,aggr.value\x3dmod?aggr.init(_):{},pulse.visit(pulse.SOURCE,function(t){return aggr.add(t)})):(aggr.value\x3daggr.value||aggr.init(_),pulse.visit(pulse.REM,function(t){return aggr.rem(t)}),\npulse.visit(pulse.ADD,function(t){return aggr.add(t)}));out.modifies(aggr._outputs);aggr._drop\x3d!1!\x3d\x3d_.drop;_.cross\x26\x261\x3caggr._dims.length\x26\x26(aggr._drop\x3d!1,aggr.cross());pulse.clean()\x26\x26aggr._drop\x26\x26out.clean(!0).runAfter(function(){return $jscomp$this.clean()});return aggr.changes(out)};prototype$1.cross\x3dfunction(){function collect(cells){var key,i,v;for(key in cells){var t\x3dcells[key].tuple;for(i\x3d0;i\x3cn;++i)vals[i][v\x3dt[dims[i]]]\x3dv}}function generate(base,tuple,index){var name\x3ddims[index],v\x3dvals[index++],\nk;for(k in v){tuple[name]\x3dv[k];var key\x3dbase?base+\x22|\x22+k:k;index\x3cn?generate(key,tuple,index):curr[key]||aggr.cell(key,tuple)}}var aggr\x3dthis,curr\x3daggr.value,dims\x3daggr._dnames,vals\x3ddims.map(function(){return{}}),n\x3ddims.length;collect(aggr._prev);collect(curr);generate(\x22\x22,{},0)};prototype$1.init\x3dfunction(_){function inputVisit(get){get\x3dvegaUtil.array(vegaUtil.accessorFields(get));for(var i\x3d0,n\x3dget.length,f;i\x3cn;++i)inputMap[f\x3dget[i]]||(inputMap[f]\x3d1,inputs.push(f))}var inputs\x3dthis._inputs\x3d[],outputs\x3dthis._outputs\x3d\n[],inputMap\x3d{};this._dims\x3dvegaUtil.array(_.groupby);this._dnames\x3dthis._dims.map(function(d){var dname\x3dvegaUtil.accessorName(d);inputVisit(d);outputs.push(dname);return dname});this.cellkey\x3d_.key?_.key:groupkey(this._dims);this._countOnly\x3d!0;this._counts\x3d[];this._measures\x3d[];var fields\x3d_.fields||[null],ops\x3d_.ops||[\x22count\x22];_\x3d_.as||[];var n$jscomp$0\x3dfields.length,map\x3d{},i$jscomp$0;n$jscomp$0!\x3d\x3dops.length\x26\x26vegaUtil.error(\x22Unmatched number of fields and aggregate ops.\x22);for(i$jscomp$0\x3d0;i$jscomp$0\x3cn$jscomp$0;++i$jscomp$0){var field\x3d\nfields[i$jscomp$0];var op\x3dops[i$jscomp$0];null\x3d\x3dfield\x26\x26\x22count\x22!\x3d\x3dop\x26\x26vegaUtil.error(\x22Null aggregate field specified.\x22);var mname\x3dvegaUtil.accessorName(field);var outname\x3d_[i$jscomp$0]||op+(mname?\x22_\x22+mname:\x22\x22);outputs.push(outname);if(\x22count\x22\x3d\x3d\x3dop)this._counts.push(outname);else{var m$jscomp$0\x3dmap[mname];m$jscomp$0||(inputVisit(field),m$jscomp$0\x3dmap[mname]\x3d[],m$jscomp$0.field\x3dfield,this._measures.push(m$jscomp$0));\x22count\x22!\x3d\x3dop\x26\x26(this._countOnly\x3d!1);m$jscomp$0.push(AggregateOps[op](outname))}}this._measures\x3d\nthis._measures.map(function(m){return compileMeasures(m,m.field)});return{}};prototype$1.cellkey\x3dgroupkey();prototype$1.cell\x3dfunction(key,t){var cell\x3dthis.value[key];cell?0\x3d\x3d\x3dcell.num\x26\x26this._drop\x26\x26cell.stamp\x3cthis.stamp?(cell.stamp\x3dthis.stamp,this._adds[this._alen++]\x3dcell):cell.stamp\x3cthis.stamp\x26\x26(cell.stamp\x3dthis.stamp,this._mods[this._mlen++]\x3dcell):(cell\x3dthis.value[key]\x3dthis.newcell(key,t),this._adds[this._alen++]\x3dcell);return cell};prototype$1.newcell\x3dfunction(key,t){key\x3d{key:key,num:0,agg:null,tuple:this.newtuple(t,\nthis._prev\x26\x26this._prev[key]),stamp:this.stamp,store:!1};if(!this._countOnly){t\x3dthis._measures;var n\x3dt.length,i;key.agg\x3dArray(n);for(i\x3d0;i\x3cn;++i)key.agg[i]\x3dnew t[i](key)}key.store\x26\x26(key.data\x3dnew TupleStore);return key};prototype$1.newtuple\x3dfunction(t,p){var names\x3dthis._dnames,dims\x3dthis._dims,x\x3d{},n;var i\x3d0;for(n\x3ddims.length;i\x3cn;++i)x[names[i]]\x3ddims[i](t);return p?vegaDataflow.replace(p.tuple,x):vegaDataflow.ingest(x)};prototype$1.clean\x3dfunction(){var cells\x3dthis.value,key;for(key in cells)0\x3d\x3d\x3dcells[key].num\x26\x26\ndelete cells[key]};prototype$1.add\x3dfunction(t){var key\x3dthis.cellkey(t);key\x3dthis.cell(key,t);var n;key.num+\x3d1;if(!this._countOnly){key.store\x26\x26key.data.add(t);key\x3dkey.agg;var i\x3d0;for(n\x3dkey.length;i\x3cn;++i)key[i].add(key[i].get(t),t)}};prototype$1.rem\x3dfunction(t){var key\x3dthis.cellkey(t);key\x3dthis.cell(key,t);var n;--key.num;if(!this._countOnly){key.store\x26\x26key.data.rem(t);key\x3dkey.agg;var i\x3d0;for(n\x3dkey.length;i\x3cn;++i)key[i].rem(key[i].get(t),t)}};prototype$1.celltuple\x3dfunction(cell){var tuple\x3dcell.tuple,\ncounts\x3dthis._counts,n;cell.store\x26\x26cell.data.values();var i\x3d0;for(n\x3dcounts.length;i\x3cn;++i)tuple[counts[i]]\x3dcell.num;if(!this._countOnly)for(cell\x3dcell.agg,i\x3d0,n\x3dcell.length;i\x3cn;++i)cell[i].set(tuple);return tuple};prototype$1.changes\x3dfunction(out){var adds\x3dthis._adds,mods\x3dthis._mods,prev\x3dthis._prev,drop\x3dthis._drop,add\x3dout.add,rem\x3dout.rem,mod\x3dout.mod,key;if(prev)for(key in prev){var cell\x3dprev[key];drop\x26\x26!cell.num||rem.push(cell.tuple)}prev\x3d0;for(key\x3dthis._alen;prev\x3ckey;++prev)add.push(this.celltuple(adds[prev])),\nadds[prev]\x3dnull;prev\x3d0;for(key\x3dthis._mlen;prev\x3ckey;++prev)cell\x3dmods[prev],(0\x3d\x3d\x3dcell.num\x26\x26drop?rem:mod).push(this.celltuple(cell)),mods[prev]\x3dnull;this._alen\x3dthis._mlen\x3d0;this._prev\x3dnull;return out};Bin.Definition\x3d{type:\x22Bin\x22,metadata:{modifies:!0},params:[{name:\x22field\x22,type:\x22field\x22,required:!0},{name:\x22interval\x22,type:\x22boolean\x22,\x22default\x22:!0},{name:\x22anchor\x22,type:\x22number\x22},{name:\x22maxbins\x22,type:\x22number\x22,\x22default\x22:20},{name:\x22base\x22,type:\x22number\x22,\x22default\x22:10},{name:\x22divide\x22,type:\x22number\x22,array:!0,\x22default\x22:[5,\n2]},{name:\x22extent\x22,type:\x22number\x22,array:!0,length:2,required:!0},{name:\x22span\x22,type:\x22number\x22},{name:\x22step\x22,type:\x22number\x22},{name:\x22steps\x22,type:\x22number\x22,array:!0},{name:\x22minstep\x22,type:\x22number\x22,\x22default\x22:0},{name:\x22nice\x22,type:\x22boolean\x22,\x22default\x22:!0},{name:\x22name\x22,type:\x22string\x22},{name:\x22as\x22,type:\x22string\x22,array:!0,length:2,\x22default\x22:[\x22bin0\x22,\x22bin1\x22]}]};var prototype$2\x3dvegaUtil.inherits(Bin,vegaDataflow.Transform);prototype$2.transform\x3dfunction(_,pulse){var band\x3d!1!\x3d\x3d_.interval,bins\x3dthis._bins(_),start\x3dbins.start,\nstep\x3dbins.step,as\x3d_.as||[\x22bin0\x22,\x22bin1\x22],b0\x3das[0],b1\x3das[1];_.modified()?(pulse\x3dpulse.reflow(!0),_\x3dpulse.SOURCE):_\x3dpulse.modified(vegaUtil.accessorFields(_.field))?pulse.ADD_MOD:pulse.ADD;pulse.visit(_,band?function(t){var v\x3dbins(t);t[b0]\x3dv;t[b1]\x3dnull\x3d\x3dv?null:start+step*(1+(v-start)/step)}:function(t){t[b0]\x3dbins(t)});return pulse.modifies(band?as:b0)};prototype$2._bins\x3dfunction(_){if(this.value\x26\x26!_.modified())return this.value;var field\x3d_.field,bins\x3dvegaStatistics.bin(_),step\x3dbins.step,start\x3dbins.start,\nstop\x3dstart+Math.ceil((bins.stop-start)/step)*step,a;null!\x3d(a\x3d_.anchor)\x26\x26(a-\x3dstart+step*Math.floor((a-start)/step),start+\x3da,stop+\x3da);a\x3dfunction(t){t\x3dvegaUtil.toNumber(field(t));return null\x3d\x3dt?null:t\x3cstart?-Infinity:t\x3estop?Infinity:(t\x3dMath.max(start,Math.min(t,stop-step)),start+step*Math.floor(1E-14+(t-start)/step))};a.start\x3dstart;a.stop\x3dbins.stop;a.step\x3dstep;return this.value\x3dvegaUtil.accessor(a,vegaUtil.accessorFields(field),_.name||\x22bin_\x22+vegaUtil.accessorName(field))};Collect.Definition\x3d{type:\x22Collect\x22,\nmetadata:{source:!0},params:[{name:\x22sort\x22,type:\x22compare\x22}]};vegaUtil.inherits(Collect,vegaDataflow.Transform).transform\x3dfunction(_,pulse){var out\x3dpulse.fork(pulse.ALL),list\x3dSortedList(vegaDataflow.tupleid,this.value,out.materialize(out.ADD).add),sort\x3d_.sort;_\x3dpulse.changed()||sort\x26\x26(_.modified(\x22sort\x22)||pulse.modified(sort.fields));out.visit(out.REM,list.remove);this.modified(_);this.value\x3dout.source\x3dlist.data(vegaDataflow.stableCompare(sort),_);pulse.source\x26\x26pulse.source.root\x26\x26(this.value.root\x3dpulse.source.root);\nreturn out};vegaUtil.inherits(Compare,vegaDataflow.Operator);CountPattern.Definition\x3d{type:\x22CountPattern\x22,metadata:{generates:!0,changes:!0},params:[{name:\x22field\x22,type:\x22field\x22,required:!0},{name:\x22case\x22,type:\x22enum\x22,values:[\x22upper\x22,\x22lower\x22,\x22mixed\x22],\x22default\x22:\x22mixed\x22},{name:\x22pattern\x22,type:\x22string\x22,\x22default\x22:\x27[\\\\w\x22]+\x27},{name:\x22stopwords\x22,type:\x22string\x22,\x22default\x22:\x22\x22},{name:\x22as\x22,type:\x22string\x22,array:!0,length:2,\x22default\x22:[\x22text\x22,\x22count\x22]}]};var prototype$4\x3dvegaUtil.inherits(CountPattern,vegaDataflow.Transform);\nprototype$4.transform\x3dfunction(_,pulse){function process(update){return function(tuple){tuple\x3dget(tuple);var match\x3dmatch$jscomp$0;switch(_.case){case \x22upper\x22:tuple\x3dtuple.toUpperCase();break;case \x22lower\x22:tuple\x3dtuple.toLowerCase()}tuple\x3dtuple.match(match)||[];var t;match\x3d0;for(var n\x3dtuple.length;match\x3cn;++match)stop.test(t\x3dtuple[match])||update(t)}}var init\x3dthis._parameterCheck(_,pulse),counts\x3dthis._counts,match$jscomp$0\x3dthis._match,stop\x3dthis._stop,get\x3d_.field,as\x3d_.as||[\x22text\x22,\x22count\x22],add\x3dprocess(function(t){counts[t]\x3d\n1+(counts[t]||0)}),rem\x3dprocess(function(t){--counts[t]});init?pulse.visit(pulse.SOURCE,add):(pulse.visit(pulse.ADD,add),pulse.visit(pulse.REM,rem));return this._finish(pulse,as)};prototype$4._parameterCheck\x3dfunction(_,pulse){var init\x3d!1;if(_.modified(\x22stopwords\x22)||!this._stop)this._stop\x3dnew RegExp(\x22^\x22+(_.stopwords||\x22\x22)+\x22$\x22,\x22i\x22),init\x3d!0;if(_.modified(\x22pattern\x22)||!this._match)this._match\x3dnew RegExp(_.pattern||\x22[\\\\w\x27]+\x22,\x22g\x22),init\x3d!0;if(_.modified(\x22field\x22)||pulse.modified(_.field.fields))init\x3d!0;init\x26\x26\n(this._counts\x3d{});return init};prototype$4._finish\x3dfunction(pulse,as){var counts\x3dthis._counts,tuples\x3dthis._tuples||(this._tuples\x3d{}),text\x3das[0],count\x3das[1];pulse\x3dpulse.fork(pulse.NO_SOURCE|pulse.NO_FIELDS);var w;for(w in counts){var t\x3dtuples[w];var c\x3dcounts[w]||0;!t\x26\x26c?(tuples[w]\x3dt\x3dvegaDataflow.ingest({}),t[text]\x3dw,t[count]\x3dc,pulse.add.push(t)):0\x3d\x3d\x3dc?(t\x26\x26pulse.rem.push(t),counts[w]\x3dnull,tuples[w]\x3dnull):t[count]!\x3d\x3dc\x26\x26(t[count]\x3dc,pulse.mod.push(t))}return pulse.modifies(as)};Cross.Definition\x3d{type:\x22Cross\x22,\nmetadata:{generates:!0},params:[{name:\x22filter\x22,type:\x22expr\x22},{name:\x22as\x22,type:\x22string\x22,array:!0,length:2,\x22default\x22:[\x22a\x22,\x22b\x22]}]};vegaUtil.inherits(Cross,vegaDataflow.Transform).transform\x3dfunction(_,pulse){var out\x3dpulse.fork(pulse.NO_SOURCE),data\x3dthis.value,as\x3d_.as||[\x22a\x22,\x22b\x22],a\x3das[0],b\x3das[1];if(!data||pulse.changed(pulse.ADD_REM)||_.modified(\x22as\x22)||_.modified(\x22filter\x22)){data\x26\x26(out.rem\x3ddata);pulse\x3ddata\x3dpulse.materialize(pulse.SOURCE).source;_\x3d_.filter||vegaUtil.truthy;data\x3d[];for(var t\x3d{},n\x3dpulse.length,\ni\x3d0,j,left;i\x3cn;++i)for(t[a]\x3dleft\x3dpulse[i],j\x3d0;j\x3cn;++j)t[b]\x3dpulse[j],_(t)\x26\x26(data.push(vegaDataflow.ingest(t)),t\x3d{},t[a]\x3dleft);out.add\x3dthis.value\x3ddata}else out.mod\x3ddata;out.source\x3dthis.value;return out.modifies(as)};var Distributions\x3d{kde:vegaStatistics.randomKDE,mixture:vegaStatistics.randomMixture,normal:vegaStatistics.randomNormal,lognormal:vegaStatistics.randomLogNormal,uniform:vegaStatistics.randomUniform},distributions\x3d[{key:{\x22function\x22:\x22normal\x22},params:[{name:\x22mean\x22,type:\x22number\x22,\x22default\x22:0},\n{name:\x22stdev\x22,type:\x22number\x22,\x22default\x22:1}]},{key:{\x22function\x22:\x22lognormal\x22},params:[{name:\x22mean\x22,type:\x22number\x22,\x22default\x22:0},{name:\x22stdev\x22,type:\x22number\x22,\x22default\x22:1}]},{key:{\x22function\x22:\x22uniform\x22},params:[{name:\x22min\x22,type:\x22number\x22,\x22default\x22:0},{name:\x22max\x22,type:\x22number\x22,\x22default\x22:1}]},{key:{\x22function\x22:\x22kde\x22},params:[{name:\x22field\x22,type:\x22field\x22,required:!0},{name:\x22from\x22,type:\x22data\x22},{name:\x22bandwidth\x22,type:\x22number\x22,\x22default\x22:0}]}];Density.Definition\x3d{type:\x22Density\x22,metadata:{generates:!0},params:[{name:\x22extent\x22,\ntype:\x22number\x22,array:!0,length:2},{name:\x22steps\x22,type:\x22number\x22},{name:\x22minsteps\x22,type:\x22number\x22,\x22default\x22:25},{name:\x22maxsteps\x22,type:\x22number\x22,\x22default\x22:200},{name:\x22method\x22,type:\x22string\x22,\x22default\x22:\x22pdf\x22,values:[\x22pdf\x22,\x22cdf\x22]},{name:\x22distribution\x22,type:\x22param\x22,params:distributions.concat({key:{\x22function\x22:\x22mixture\x22},params:[{name:\x22distributions\x22,type:\x22param\x22,array:!0,params:distributions},{name:\x22weights\x22,type:\x22number\x22,array:!0}]})},{name:\x22as\x22,type:\x22string\x22,array:!0,\x22default\x22:[\x22value\x22,\x22density\x22]}]};vegaUtil.inherits(Density,\nvegaDataflow.Transform).transform\x3dfunction(_,pulse){var out\x3dpulse.fork(pulse.NO_SOURCE|pulse.NO_FIELDS);if(!this.value||pulse.changed()||_.modified()){var dist\x3dparse(_.distribution,source$jscomp$0(pulse));pulse\x3d_.steps||_.minsteps||25;var maxsteps\x3d_.steps||_.maxsteps||200,method\x3d_.method||\x22pdf\x22;\x22pdf\x22!\x3d\x3dmethod\x26\x26\x22cdf\x22!\x3d\x3dmethod\x26\x26vegaUtil.error(\x22Invalid density method: \x22+method);_.extent||dist.data||vegaUtil.error(\x22Missing density extent parameter.\x22);method\x3ddist[method];var as\x3d_.as||[\x22value\x22,\x22density\x22];\n_\x3d_.extent||vegaUtil.extent(dist.data());_\x3dvegaStatistics.sampleCurve(method,_,pulse,maxsteps).map(function(v){var tuple\x3d{};tuple[as[0]]\x3dv[0];tuple[as[1]]\x3dv[1];return vegaDataflow.ingest(tuple)});this.value\x26\x26(out.rem\x3dthis.value);this.value\x3dout.add\x3dout.source\x3d_}return out};DotBin.Definition\x3d{type:\x22DotBin\x22,metadata:{modifies:!0},params:[{name:\x22field\x22,type:\x22field\x22,required:!0},{name:\x22groupby\x22,type:\x22field\x22,array:!0},{name:\x22step\x22,type:\x22number\x22},{name:\x22smooth\x22,type:\x22boolean\x22,\x22default\x22:!1},{name:\x22as\x22,type:\x22string\x22,\n\x22default\x22:\x22bin\x22}]};vegaUtil.inherits(DotBin,vegaDataflow.Transform).transform\x3dfunction(_,pulse){if(this.value\x26\x26!_.modified()\x26\x26!pulse.changed())return pulse;var source\x3dpulse.materialize(pulse.SOURCE).source,groups\x3dpartition(pulse.source,_.groupby,vegaUtil.identity),smooth\x3d_.smooth||!1,field\x3d_.field;source\x3d_.step||vegaUtil.span(vegaUtil.extent(source,field))/30;var sort\x3dvegaDataflow.stableCompare(function(a,b){return field(a)-field(b)});_\x3d_.as||\x22bin\x22;for(var n\x3dgroups.length,min\x3dInfinity,max\x3d-Infinity,\ni\x3d0,j;i\x3cn;++i){var g\x3dgroups[i].sort(sort);j\x3d-1;for(var $jscomp$iter$313\x3d$jscomp.makeIterator(vegaStatistics.dotbin(g,source,smooth,field)),$jscomp$key$v\x3d$jscomp$iter$313.next();!$jscomp$key$v.done;$jscomp$key$v\x3d$jscomp$iter$313.next())$jscomp$key$v\x3d$jscomp$key$v.value,$jscomp$key$v\x3cmin\x26\x26(min\x3d$jscomp$key$v),$jscomp$key$v\x3emax\x26\x26(max\x3d$jscomp$key$v),g[++j][_]\x3d$jscomp$key$v}this.value\x3d{start:min,stop:max,step:source};return pulse.reflow(!0).modifies(_)};vegaUtil.inherits(Expression,vegaDataflow.Operator);\nExtent.Definition\x3d{type:\x22Extent\x22,metadata:{},params:[{name:\x22field\x22,type:\x22field\x22,required:!0}]};vegaUtil.inherits(Extent,vegaDataflow.Transform).transform\x3dfunction(_,pulse){var extent\x3dthis.value,field\x3d_.field,min\x3dextent[0],max\x3dextent[1];if((_\x3dpulse.changed()||pulse.modified(field.fields)||_.modified(\x22field\x22))||null\x3d\x3dmin)min\x3dInfinity,max\x3d-Infinity;pulse.visit(_?pulse.SOURCE:pulse.ADD,function(t){t\x3dvegaUtil.toNumber(field(t));null!\x3dt\x26\x26(t\x3cmin\x26\x26(min\x3dt),t\x3emax\x26\x26(max\x3dt))});Number.isFinite(min)\x26\x26Number.isFinite(max)||\n((_\x3dvegaUtil.accessorName(field))\x26\x26(_\x3d\x27 for field \x22\x27+_+\x27\x22\x27),pulse.dataflow.warn(\x22Infinite extent\x22+_+\x22: [\x22+min+\x22, \x22+max+\x22]\x22),min\x3dmax\x3dvoid 0);this.value\x3d[min,max]};var prototype$9\x3dvegaUtil.inherits(Subflow,vegaDataflow.Operator);prototype$9.connect\x3dfunction(target){this.detachSubflow\x3dtarget.detachSubflow;this.targets().add(target);return target.source\x3dthis};prototype$9.add\x3dfunction(t){this.count+\x3d1;this.value.add.push(t)};prototype$9.rem\x3dfunction(t){--this.count;this.value.rem.push(t)};prototype$9.mod\x3d\nfunction(t){this.value.mod.push(t)};prototype$9.init\x3dfunction(pulse){this.value.init(pulse,pulse.NO_SOURCE)};prototype$9.evaluate\x3dfunction(){return this.value};var prototype$a\x3dvegaUtil.inherits(Facet,vegaDataflow.Transform);prototype$a.activate\x3dfunction(flow){this._targets[this._targets.active++]\x3dflow};prototype$a.subflow\x3dfunction(key,flow,pulse,parent){var flows\x3dthis.value,sf\x3dvegaUtil.hasOwnProperty(flows,key)\x26\x26flows[key];if(sf)sf.value.stamp\x3cpulse.stamp\x26\x26(sf.init(pulse),this.activate(sf));else{var p\x3d\nparent||(p\x3dthis._group[key])\x26\x26p.tuple;parent\x3dpulse.dataflow;sf\x3dnew Subflow(pulse.fork(pulse.NO_SOURCE),this);parent.add(sf).connect(flow(parent,key,p));flows[key]\x3dsf;this.activate(sf)}return sf};prototype$a.clean\x3dfunction(){var flows\x3dthis.value,key;for(key in flows)if(0\x3d\x3d\x3dflows[key].count){var detach\x3dflows[key].detachSubflow;detach\x26\x26detach();delete flows[key]}};prototype$a.initTargets\x3dfunction(){for(var a\x3dthis._targets,n\x3da.length,i\x3d0;i\x3cn\x26\x26null!\x3da[i];++i)a[i]\x3dnull;a.active\x3d0};prototype$a.transform\x3d\nfunction(_,pulse){var $jscomp$this\x3dthis,df\x3dpulse.dataflow,key$jscomp$0\x3d_.key,flow\x3d_.subflow,cache\x3dthis._keys,rekey\x3d_.modified(\x22key\x22),subflow\x3dfunction(key){return $jscomp$this.subflow(key,flow,pulse)};this._group\x3d_.group||{};this.initTargets();pulse.visit(pulse.REM,function(t){var id\x3dvegaDataflow.tupleid(t),k\x3dcache.get(id);void 0!\x3d\x3dk\x26\x26(cache.delete(id),subflow(k).rem(t))});pulse.visit(pulse.ADD,function(t){var k\x3dkey$jscomp$0(t);cache.set(vegaDataflow.tupleid(t),k);subflow(k).add(t)});rekey||pulse.modified(key$jscomp$0.fields)?\npulse.visit(pulse.MOD,function(t){var id\x3dvegaDataflow.tupleid(t),k0\x3dcache.get(id),k1\x3dkey$jscomp$0(t);k0\x3d\x3d\x3dk1?subflow(k1).mod(t):(cache.set(id,k1),subflow(k0).rem(t),subflow(k1).add(t))}):pulse.changed(pulse.MOD)\x26\x26pulse.visit(pulse.MOD,function(t){subflow(cache.get(vegaDataflow.tupleid(t))).mod(t)});rekey\x26\x26pulse.visit(pulse.REFLOW,function(t){var id\x3dvegaDataflow.tupleid(t),k0\x3dcache.get(id),k1\x3dkey$jscomp$0(t);k0!\x3d\x3dk1\x26\x26(cache.set(id,k1),subflow(k0).rem(t),subflow(k1).add(t))});pulse.clean()?df.runAfter(function(){$jscomp$this.clean();\ncache.clean()}):cache.empty\x3edf.cleanThreshold\x26\x26df.runAfter(cache.clean);return pulse};vegaUtil.inherits(Field,vegaDataflow.Operator);Filter.Definition\x3d{type:\x22Filter\x22,metadata:{changes:!0},params:[{name:\x22expr\x22,type:\x22expr\x22,required:!0}]};vegaUtil.inherits(Filter,vegaDataflow.Transform).transform\x3dfunction(_,pulse){function revisit(t){var id\x3dvegaDataflow.tupleid(t),b\x3dtest(t,_),s\x3dcache.get(id);b\x26\x26s?(cache.delete(id),add.push(t)):b||s?isMod\x26\x26b\x26\x26!s\x26\x26mod.push(t):(cache.set(id,1),rem.push(t))}var df\x3dpulse.dataflow,\ncache\x3dthis.value,output\x3dpulse.fork(),add\x3doutput.add,rem\x3doutput.rem,mod\x3doutput.mod,test\x3d_.expr,isMod\x3d!0;pulse.visit(pulse.REM,function(t){var id\x3dvegaDataflow.tupleid(t);cache.has(id)?cache.delete(id):rem.push(t)});pulse.visit(pulse.ADD,function(t){test(t,_)?add.push(t):cache.set(vegaDataflow.tupleid(t),1)});pulse.visit(pulse.MOD,revisit);_.modified()\x26\x26(isMod\x3d!1,pulse.visit(pulse.REFLOW,revisit));cache.empty\x3edf.cleanThreshold\x26\x26df.runAfter(cache.clean);return output};Flatten.Definition\x3d{type:\x22Flatten\x22,\nmetadata:{generates:!0},params:[{name:\x22fields\x22,type:\x22field\x22,array:!0,required:!0},{name:\x22index\x22,type:\x22string\x22},{name:\x22as\x22,type:\x22string\x22,array:!0}]};vegaUtil.inherits(Flatten,vegaDataflow.Transform).transform\x3dfunction(_,pulse){var out\x3dpulse.fork(pulse.NO_SOURCE),fields\x3d_.fields,as\x3dfieldNames(fields,_.as||[]),index\x3d_.index||null,m\x3das.length;out.rem\x3dthis.value;pulse.visit(pulse.SOURCE,function(t){for(var arrays\x3dfields.map(function(f){return f(t)}),maxlen\x3darrays.reduce(function(l,a){return Math.max(l,\na.length)},0),i\x3d0,j,d,v;i\x3cmaxlen;++i){d\x3dvegaDataflow.derive(t);for(j\x3d0;j\x3cm;++j)d[as[j]]\x3dnull\x3d\x3d(v\x3darrays[j][i])?null:v;index\x26\x26(d[index]\x3di);out.add.push(d)}});this.value\x3dout.source\x3dout.add;index\x26\x26out.modifies(index);return out.modifies(as)};Fold.Definition\x3d{type:\x22Fold\x22,metadata:{generates:!0},params:[{name:\x22fields\x22,type:\x22field\x22,array:!0,required:!0},{name:\x22as\x22,type:\x22string\x22,array:!0,length:2,\x22default\x22:[\x22key\x22,\x22value\x22]}]};vegaUtil.inherits(Fold,vegaDataflow.Transform).transform\x3dfunction(_,pulse){var out\x3d\npulse.fork(pulse.NO_SOURCE),fields\x3d_.fields,fnames\x3dfields.map(vegaUtil.accessorName);_\x3d_.as||[\x22key\x22,\x22value\x22];var k\x3d_[0],v\x3d_[1],n\x3dfields.length;out.rem\x3dthis.value;pulse.visit(pulse.SOURCE,function(t){for(var i\x3d0,d;i\x3cn;++i)d\x3dvegaDataflow.derive(t),d[k]\x3dfnames[i],d[v]\x3dfields[i](t),out.add.push(d)});this.value\x3dout.source\x3dout.add;return out.modifies(_)};Formula.Definition\x3d{type:\x22Formula\x22,metadata:{modifies:!0},params:[{name:\x22expr\x22,type:\x22expr\x22,required:!0},{name:\x22as\x22,type:\x22string\x22,required:!0},{name:\x22initonly\x22,\ntype:\x22boolean\x22}]};vegaUtil.inherits(Formula,vegaDataflow.Transform).transform\x3dfunction(_,pulse){var func\x3d_.expr,as\x3d_.as,mod\x3d_.modified(),flag\x3d_.initonly?pulse.ADD:mod?pulse.SOURCE:pulse.modified(func.fields)||pulse.modified(as)?pulse.ADD_MOD:pulse.ADD;mod\x26\x26(pulse\x3dpulse.materialize().reflow(!0));_.initonly||pulse.modifies(as);return pulse.visit(flag,function(t){return t[as]\x3dfunc(t,_)})};vegaUtil.inherits(Generate,vegaDataflow.Transform).transform\x3dfunction(_,pulse){var data\x3dthis.value;pulse\x3dpulse.fork(pulse.ALL);\nvar num\x3d_.size-data.length,gen\x3d_.generator,add,t;if(0\x3cnum){for(add\x3d[];0\x3c\x3d--num;)add.push(t\x3dvegaDataflow.ingest(gen(_))),data.push(t);pulse.add\x3dpulse.add.length?pulse.materialize(pulse.ADD).add.concat(add):add}else _\x3ddata.slice(0,-num),pulse.rem\x3dpulse.rem.length?pulse.materialize(pulse.REM).rem.concat(_):_,data\x3ddata.slice(-num);pulse.source\x3dthis.value\x3ddata;return pulse};var Methods\x3d{value:\x22value\x22,median:d3Array.median,mean:d3Array.mean,min:d3Array.min,max:d3Array.max},Empty\x3d[];Impute.Definition\x3d{type:\x22Impute\x22,\nmetadata:{changes:!0},params:[{name:\x22field\x22,type:\x22field\x22,required:!0},{name:\x22key\x22,type:\x22field\x22,required:!0},{name:\x22keyvals\x22,array:!0},{name:\x22groupby\x22,type:\x22field\x22,array:!0},{name:\x22method\x22,type:\x22enum\x22,\x22default\x22:\x22value\x22,values:[\x22value\x22,\x22mean\x22,\x22median\x22,\x22max\x22,\x22min\x22]},{name:\x22value\x22,\x22default\x22:0}]};vegaUtil.inherits(Impute,vegaDataflow.Transform).transform\x3dfunction(_,pulse){var out\x3dpulse.fork(pulse.ALL),impute\x3dgetValue(_),field\x3dgetField(_),fName\x3dvegaUtil.accessorName(_.field),kName\x3dvegaUtil.accessorName(_.key),\ngNames\x3d(_.groupby||[]).map(vegaUtil.accessorName);_\x3dpartition$1(pulse.source,_.groupby,_.key,_.keyvals);pulse\x3d[];var prev\x3dthis.value,m\x3d_.domain.length,j,l,n;var g\x3d0;for(l\x3d_.length;g\x3cl;++g){var group\x3d_[g];var gVals\x3dgroup.values;var value\x3dNaN;for(j\x3d0;j\x3cm;++j)if(null\x3d\x3dgroup[j]){var kVal\x3d_.domain[j];var t\x3d{_impute:!0};var i\x3d0;for(n\x3dgVals.length;i\x3cn;++i)t[gNames[i]]\x3dgVals[i];t[kName]\x3dkVal;t[fName]\x3dNumber.isNaN(value)?value\x3dimpute(group,field):value;pulse.push(vegaDataflow.ingest(t))}}pulse.length\x26\x26(out.add\x3d\nout.materialize(out.ADD).add.concat(pulse));prev.length\x26\x26(out.rem\x3dout.materialize(out.REM).rem.concat(prev));this.value\x3dpulse;return out};JoinAggregate.Definition\x3d{type:\x22JoinAggregate\x22,metadata:{modifies:!0},params:[{name:\x22groupby\x22,type:\x22field\x22,array:!0},{name:\x22fields\x22,type:\x22field\x22,\x22null\x22:!0,array:!0},{name:\x22ops\x22,type:\x22enum\x22,array:!0,values:ValidAggregateOps},{name:\x22as\x22,type:\x22string\x22,\x22null\x22:!0,array:!0},{name:\x22key\x22,type:\x22field\x22}]};var prototype$h\x3dvegaUtil.inherits(JoinAggregate,Aggregate);prototype$h.transform\x3d\nfunction(_,pulse){var aggr\x3dthis,mod\x3d_.modified();if(aggr.value\x26\x26(mod||pulse.modified(aggr._inputs,!0))){var cells\x3daggr.value\x3dmod?aggr.init(_):{};pulse.visit(pulse.SOURCE,function(t){aggr.add(t)})}else cells\x3daggr.value\x3daggr.value||this.init(_),pulse.visit(pulse.REM,function(t){aggr.rem(t)}),pulse.visit(pulse.ADD,function(t){aggr.add(t)});aggr.changes();pulse.visit(pulse.SOURCE,function(t){vegaUtil.extend(t,cells[aggr.cellkey(t)].tuple)});return pulse.reflow(mod).modifies(this._outputs)};prototype$h.changes\x3d\nfunction(){var adds\x3dthis._adds,mods\x3dthis._mods,n;var i\x3d0;for(n\x3dthis._alen;i\x3cn;++i)this.celltuple(adds[i]),adds[i]\x3dnull;i\x3d0;for(n\x3dthis._mlen;i\x3cn;++i)this.celltuple(mods[i]),mods[i]\x3dnull;this._alen\x3dthis._mlen\x3d0};KDE.Definition\x3d{type:\x22KDE\x22,metadata:{generates:!0},params:[{name:\x22groupby\x22,type:\x22field\x22,array:!0},{name:\x22field\x22,type:\x22field\x22,required:!0},{name:\x22cumulative\x22,type:\x22boolean\x22,\x22default\x22:!1},{name:\x22counts\x22,type:\x22boolean\x22,\x22default\x22:!1},{name:\x22bandwidth\x22,type:\x22number\x22,\x22default\x22:0},{name:\x22extent\x22,type:\x22number\x22,\narray:!0,length:2},{name:\x22resolve\x22,type:\x22enum\x22,values:[\x22shared\x22,\x22independent\x22],\x22default\x22:\x22independent\x22},{name:\x22steps\x22,type:\x22number\x22},{name:\x22minsteps\x22,type:\x22number\x22,\x22default\x22:25},{name:\x22maxsteps\x22,type:\x22number\x22,\x22default\x22:200},{name:\x22as\x22,type:\x22string\x22,array:!0,\x22default\x22:[\x22value\x22,\x22density\x22]}]};vegaUtil.inherits(KDE,vegaDataflow.Transform).transform\x3dfunction(_,pulse){var out\x3dpulse.fork(pulse.NO_SOURCE|pulse.NO_FIELDS);if(!this.value||pulse.changed()||_.modified()){pulse\x3dpulse.materialize(pulse.SOURCE).source;\nvar groups\x3dpartition(pulse,_.groupby,_.field),names\x3d(_.groupby||[]).map(vegaUtil.accessorName),bandwidth\x3d_.bandwidth,method\x3d_.cumulative?\x22cdf\x22:\x22pdf\x22,as\x3d_.as||[\x22value\x22,\x22density\x22],values\x3d[],domain\x3d_.extent,minsteps\x3d_.steps||_.minsteps||25,maxsteps\x3d_.steps||_.maxsteps||200;\x22pdf\x22!\x3d\x3dmethod\x26\x26\x22cdf\x22!\x3d\x3dmethod\x26\x26vegaUtil.error(\x22Invalid density method: \x22+method);\x22shared\x22\x3d\x3d\x3d_.resolve\x26\x26(domain||(domain\x3dvegaUtil.extent(pulse,_.field)),minsteps\x3dmaxsteps\x3d_.steps||maxsteps);groups.forEach(function(g){var density\x3dvegaStatistics.randomKDE(g,\nbandwidth)[method],scale\x3d_.counts?g.length:1,local\x3ddomain||vegaUtil.extent(g);vegaStatistics.sampleCurve(density,local,minsteps,maxsteps).forEach(function(v){for(var t\x3d{},i\x3d0;i\x3cnames.length;++i)t[names[i]]\x3dg.dims[i];t[as[0]]\x3dv[0];t[as[1]]\x3dv[1]*scale;values.push(vegaDataflow.ingest(t))})});this.value\x26\x26(out.rem\x3dthis.value);this.value\x3dout.add\x3dout.source\x3dvalues}return out};vegaUtil.inherits(Key,vegaDataflow.Operator);vegaUtil.inherits(Load,vegaDataflow.Transform).transform\x3dfunction(_,pulse){var $jscomp$this\x3d\nthis,df$jscomp$0\x3dpulse.dataflow;return this._pending?output$jscomp$0(this,pulse,this._pending):stop$jscomp$0(_)?pulse.StopPropagation:_.values?output$jscomp$0(this,pulse,df$jscomp$0.parse(_.values,_.format)):_.async?{async:df$jscomp$0.request(_.url,_.format).then(function(res){$jscomp$this._pending\x3dvegaUtil.array(res.data);return function(df){return df.touch($jscomp$this)}})}:df$jscomp$0.request(_.url,_.format).then(function(res){return output$jscomp$0($jscomp$this,pulse,vegaUtil.array(res.data))})};\nLookup.Definition\x3d{type:\x22Lookup\x22,metadata:{modifies:!0},params:[{name:\x22index\x22,type:\x22index\x22,params:[{name:\x22from\x22,type:\x22data\x22,required:!0},{name:\x22key\x22,type:\x22field\x22,required:!0}]},{name:\x22values\x22,type:\x22field\x22,array:!0},{name:\x22fields\x22,type:\x22field\x22,array:!0,required:!0},{name:\x22as\x22,type:\x22string\x22,array:!0},{name:\x22default\x22,\x22default\x22:null}]};vegaUtil.inherits(Lookup,vegaDataflow.Transform).transform\x3dfunction(_,pulse){var out\x3dpulse,as\x3d_.as,keys\x3d_.fields,index\x3d_.index,values\x3d_.values,defaultValue\x3dnull\x3d\x3d_.default?\nnull:_.default,reset\x3d_.modified();_\x3dreset?pulse.SOURCE:pulse.ADD;var n\x3dkeys.length;if(values){var m\x3dvalues.length;1\x3cn\x26\x26!as\x26\x26vegaUtil.error(\x27Multi-field lookup requires explicit \x22as\x22 parameter.\x27);as\x26\x26as.length!\x3d\x3dn*m\x26\x26vegaUtil.error(\x27The \x22as\x22 parameter has too few output field names.\x27);as\x3das||values.map(vegaUtil.accessorName);var set\x3dfunction(t){for(var i\x3d0,k\x3d0,j,v;i\x3cn;++i)if(v\x3dindex.get(keys[i](t)),null\x3d\x3dv)for(j\x3d0;j\x3cm;++j,++k)t[as[k]]\x3ddefaultValue;else for(j\x3d0;j\x3cm;++j,++k)t[as[k]]\x3dvalues[j](v)}}else as||\nvegaUtil.error(\x22Missing output field names.\x22),set\x3dfunction(t){for(var i\x3d0,v;i\x3cn;++i)v\x3dindex.get(keys[i](t)),t[as[i]]\x3dnull\x3d\x3dv?defaultValue:v};reset?out\x3dpulse.reflow(!0):(reset\x3dkeys.some(function(k){return pulse.modified(k.fields)}),_|\x3dreset?pulse.MOD:0);pulse.visit(_,set);return out.modifies(as)};vegaUtil.inherits(MultiExtent,vegaDataflow.Operator);vegaUtil.inherits(MultiValues,vegaDataflow.Operator);vegaUtil.inherits(Params,vegaDataflow.Transform);Params.prototype.transform\x3dfunction(_,pulse){this.modified(_.modified());\nthis.value\x3d_;return pulse.fork(pulse.NO_SOURCE|pulse.NO_FIELDS)};Pivot.Definition\x3d{type:\x22Pivot\x22,metadata:{generates:!0,changes:!0},params:[{name:\x22groupby\x22,type:\x22field\x22,array:!0},{name:\x22field\x22,type:\x22field\x22,required:!0},{name:\x22value\x22,type:\x22field\x22,required:!0},{name:\x22op\x22,type:\x22enum\x22,values:ValidAggregateOps,\x22default\x22:\x22sum\x22},{name:\x22limit\x22,type:\x22number\x22,\x22default\x22:0},{name:\x22key\x22,type:\x22field\x22}]};var prototype$l\x3dvegaUtil.inherits(Pivot,Aggregate);prototype$l._transform\x3dprototype$l.transform;prototype$l.transform\x3d\nfunction(_,pulse){return this._transform(aggregateParams(_,pulse),pulse)};vegaUtil.inherits(PreFacet,Facet).transform\x3dfunction(_$jscomp$0,pulse){var $jscomp$this\x3dthis,flow\x3d_$jscomp$0.subflow,field\x3d_$jscomp$0.field,subflow\x3dfunction(t){return $jscomp$this.subflow(vegaDataflow.tupleid(t),flow,pulse,t)};(_$jscomp$0.modified(\x22field\x22)||field\x26\x26pulse.modified(vegaUtil.accessorFields(field)))\x26\x26vegaUtil.error(\x22PreFacet does not support field modification.\x22);this.initTargets();field?(pulse.visit(pulse.MOD,function(t){var sf\x3d\nsubflow(t);field(t).forEach(function(_){return sf.mod(_)})}),pulse.visit(pulse.ADD,function(t){var sf\x3dsubflow(t);field(t).forEach(function(_){return sf.add(vegaDataflow.ingest(_))})}),pulse.visit(pulse.REM,function(t){var sf\x3dsubflow(t);field(t).forEach(function(_){return sf.rem(_)})})):(pulse.visit(pulse.MOD,function(t){return subflow(t).mod(t)}),pulse.visit(pulse.ADD,function(t){return subflow(t).add(t)}),pulse.visit(pulse.REM,function(t){return subflow(t).rem(t)}));pulse.clean()\x26\x26pulse.runAfter(function(){return $jscomp$this.clean()});\nreturn pulse};Project.Definition\x3d{type:\x22Project\x22,metadata:{generates:!0,changes:!0},params:[{name:\x22fields\x22,type:\x22field\x22,array:!0},{name:\x22as\x22,type:\x22string\x22,\x22null\x22:!0,array:!0}]};vegaUtil.inherits(Project,vegaDataflow.Transform).transform\x3dfunction(_,pulse){var fields\x3d_.fields,as\x3dfieldNames(_.fields,_.as||[]),derive\x3dfields?function(s,t){for(var i\x3d0,n\x3dfields.length;i\x3cn;++i)t[as[i]]\x3dfields[i](s);return t}:vegaDataflow.rederive;if(this.value)var lut\x3dthis.value;else pulse\x3dpulse.addAll(),lut\x3dthis.value\x3d{};\nvar out\x3dpulse.fork(pulse.NO_SOURCE);pulse.visit(pulse.REM,function(t){t\x3dvegaDataflow.tupleid(t);out.rem.push(lut[t]);lut[t]\x3dnull});pulse.visit(pulse.ADD,function(t){var dt\x3dderive(t,vegaDataflow.ingest({}));lut[vegaDataflow.tupleid(t)]\x3ddt;out.add.push(dt)});pulse.visit(pulse.MOD,function(t){out.mod.push(derive(t,lut[vegaDataflow.tupleid(t)]))});return out};vegaUtil.inherits(Proxy,vegaDataflow.Transform).transform\x3dfunction(_,pulse){this.value\x3d_.value;return _.modified(\x22value\x22)?pulse.fork(pulse.NO_SOURCE|\npulse.NO_FIELDS):pulse.StopPropagation};Quantile.Definition\x3d{type:\x22Quantile\x22,metadata:{generates:!0,changes:!0},params:[{name:\x22groupby\x22,type:\x22field\x22,array:!0},{name:\x22field\x22,type:\x22field\x22,required:!0},{name:\x22probs\x22,type:\x22number\x22,array:!0},{name:\x22step\x22,type:\x22number\x22,\x22default\x22:.01},{name:\x22as\x22,type:\x22string\x22,array:!0,\x22default\x22:[\x22prob\x22,\x22value\x22]}]};vegaUtil.inherits(Quantile,vegaDataflow.Transform).transform\x3dfunction(_,pulse){var out\x3dpulse.fork(pulse.NO_SOURCE|pulse.NO_FIELDS),as\x3d_.as||[\x22prob\x22,\x22value\x22];if(this.value\x26\x26\n!_.modified()\x26\x26!pulse.changed())return out.source\x3dthis.value,out;pulse\x3dpulse.materialize(pulse.SOURCE).source;pulse\x3dpartition(pulse,_.groupby,_.field);var names\x3d(_.groupby||[]).map(vegaUtil.accessorName),values\x3d[],step\x3d_.step||.01,p\x3d_.probs||d3Array.range(step/2,1-1E-14,step),n\x3dp.length;pulse.forEach(function(g){for(var q\x3dvegaStatistics.quantiles(g,p),i\x3d0;i\x3cn;++i){for(var t\x3d{},i$596\x3d0;i$596\x3cnames.length;++i$596)t[names[i$596]]\x3dg.dims[i$596];t[as[0]]\x3dp[i];t[as[1]]\x3dq[i];values.push(vegaDataflow.ingest(t))}});\nthis.value\x26\x26(out.rem\x3dthis.value);this.value\x3dout.add\x3dout.source\x3dvalues;return out};vegaUtil.inherits(Relay,vegaDataflow.Transform).transform\x3dfunction(_,pulse){if(this.value)var lut\x3dthis.value;else{var out\x3dpulse\x3dpulse.addAll();lut\x3dthis.value\x3d{}}_.derive\x26\x26(out\x3dpulse.fork(pulse.NO_SOURCE),pulse.visit(pulse.REM,function(t){t\x3dvegaDataflow.tupleid(t);out.rem.push(lut[t]);lut[t]\x3dnull}),pulse.visit(pulse.ADD,function(t){var dt\x3dvegaDataflow.derive(t);lut[vegaDataflow.tupleid(t)]\x3ddt;out.add.push(dt)}),pulse.visit(pulse.MOD,\nfunction(t){var dt\x3dlut[vegaDataflow.tupleid(t)],k;for(k in t)dt[k]\x3dt[k],out.modifies(k);out.mod.push(dt)}));return out};Sample.Definition\x3d{type:\x22Sample\x22,metadata:{},params:[{name:\x22size\x22,type:\x22number\x22,\x22default\x22:1E3}]};vegaUtil.inherits(Sample,vegaDataflow.Transform).transform\x3dfunction(_,pulse){function update(t){if(res.length\x3cnum)res.push(t);else{var idx\x3d~~((cnt+1)*vegaStatistics.random());if(idx\x3cres.length\x26\x26idx\x3e\x3dcap){var p\x3dres[idx];map[vegaDataflow.tupleid(p)]\x26\x26out.rem.push(p);res[idx]\x3dt}}++cnt}var out\x3d\npulse.fork(pulse.NO_SOURCE),mod\x3d_.modified(\x22size\x22),num\x3d_.size,res\x3dthis.value,cnt\x3dthis.count,cap\x3d0,map\x3dres.reduce(function(m,t){m[vegaDataflow.tupleid(t)]\x3d1;return m},{});pulse.rem.length\x26\x26(pulse.visit(pulse.REM,function(t){var id\x3dvegaDataflow.tupleid(t);map[id]\x26\x26(map[id]\x3d-1,out.rem.push(t));--cnt}),res\x3dres.filter(function(t){return-1!\x3d\x3dmap[vegaDataflow.tupleid(t)]}));(pulse.rem.length||mod)\x26\x26res.length\x3cnum\x26\x26pulse.source\x26\x26(cap\x3dcnt\x3dres.length,pulse.visit(pulse.SOURCE,function(t){map[vegaDataflow.tupleid(t)]||\nupdate(t)}),cap\x3d-1);if(mod\x26\x26res.length\x3enum){_\x3d0;for(mod\x3dres.length-num;_\x3cmod;++_)map[vegaDataflow.tupleid(res[_])]\x3d-1,out.rem.push(res[_]);res\x3dres.slice(mod)}pulse.mod.length\x26\x26pulse.visit(pulse.MOD,function(t){map[vegaDataflow.tupleid(t)]\x26\x26out.mod.push(t)});pulse.add.length\x26\x26pulse.visit(pulse.ADD,update);if(pulse.add.length||0\x3ecap)out.add\x3dres.filter(function(t){return!map[vegaDataflow.tupleid(t)]});this.count\x3dcnt;this.value\x3dout.source\x3dres;return out};Sequence.Definition\x3d{type:\x22Sequence\x22,metadata:{generates:!0,\nchanges:!0},params:[{name:\x22start\x22,type:\x22number\x22,required:!0},{name:\x22stop\x22,type:\x22number\x22,required:!0},{name:\x22step\x22,type:\x22number\x22,\x22default\x22:1},{name:\x22as\x22,type:\x22string\x22,\x22default\x22:\x22data\x22}]};vegaUtil.inherits(Sequence,vegaDataflow.Transform).transform\x3dfunction(_,pulse){if(!this.value||_.modified()){var out\x3dpulse.materialize().fork(pulse.MOD),as\x3d_.as||\x22data\x22;out.rem\x3dthis.value?pulse.rem.concat(this.value):pulse.rem;this.value\x3dd3Array.range(_.start,_.stop,_.step||1).map(function(v){var t\x3d{};t[as]\x3dv;return vegaDataflow.ingest(t)});\nout.add\x3dpulse.add.concat(this.value);return out}};vegaUtil.inherits(Sieve,vegaDataflow.Transform).transform\x3dfunction(_,pulse){this.value\x3dpulse.source;return pulse.changed()?pulse.fork(pulse.NO_SOURCE|pulse.NO_FIELDS):pulse.StopPropagation};var OUTPUT\x3d[\x22unit0\x22,\x22unit1\x22];TimeUnit.Definition\x3d{type:\x22TimeUnit\x22,metadata:{modifies:!0},params:[{name:\x22field\x22,type:\x22field\x22,required:!0},{name:\x22interval\x22,type:\x22boolean\x22,\x22default\x22:!0},{name:\x22units\x22,type:\x22enum\x22,values:vegaTime.TIME_UNITS,array:!0},{name:\x22step\x22,type:\x22number\x22,\n\x22default\x22:1},{name:\x22maxbins\x22,type:\x22number\x22,\x22default\x22:40},{name:\x22extent\x22,type:\x22date\x22,array:!0},{name:\x22timezone\x22,type:\x22enum\x22,\x22default\x22:\x22local\x22,values:[\x22local\x22,\x22utc\x22]},{name:\x22as\x22,type:\x22string\x22,array:!0,length:2,\x22default\x22:OUTPUT}]};var prototype$u\x3dvegaUtil.inherits(TimeUnit,vegaDataflow.Transform);prototype$u.transform\x3dfunction(_,pulse){var field\x3d_.field,band\x3d!1!\x3d\x3d_.interval,utc\x3d\x22utc\x22\x3d\x3d\x3d_.timezone,floor\x3dthis._floor(_,pulse),offset\x3d(utc?vegaTime.utcInterval:vegaTime.timeInterval)(floor.unit).offset;utc\x3d\n_.as||OUTPUT;var u0\x3dutc[0],u1\x3dutc[1],min\x3dfloor.start||Infinity,max\x3dfloor.stop||-Infinity,step\x3dfloor.step,flag\x3dpulse.ADD;if(_.modified()||pulse.modified(vegaUtil.accessorFields(field)))pulse\x3dpulse.reflow(!0),flag\x3dpulse.SOURCE,min\x3dInfinity,max\x3d-Infinity;pulse.visit(flag,function(t){var v\x3dfield(t),b;null\x3d\x3dv?(t[u0]\x3dnull,band\x26\x26(t[u1]\x3dnull)):(t[u0]\x3dv\x3db\x3dfloor(v),band\x26\x26(t[u1]\x3db\x3doffset(v,step)),v\x3cmin\x26\x26(min\x3dv),b\x3emax\x26\x26(max\x3db))});floor.start\x3dmin;floor.stop\x3dmax;return pulse.modifies(band?utc:u0)};prototype$u._floor\x3d\nfunction(_,pulse){var utc\x3d\x22utc\x22\x3d\x3d\x3d_.timezone;pulse\x3d_.units?{units:_.units,step:_.step||1}:vegaTime.timeBin({extent:_.extent||vegaUtil.extent(pulse.materialize(pulse.SOURCE).source,_.field),maxbins:_.maxbins});_\x3dpulse.units;pulse\x3dpulse.step;_\x3dvegaTime.timeUnits(_);var prev\x3dthis.value||{};utc\x3d(utc?vegaTime.utcFloor:vegaTime.timeFloor)(_,pulse);utc.unit\x3dvegaUtil.peek(_);utc.units\x3d_;utc.step\x3dpulse;utc.start\x3dprev.start;utc.stop\x3dprev.stop;return this.value\x3dutc};vegaUtil.inherits(TupleIndex,vegaDataflow.Transform).transform\x3d\nfunction(_,pulse){function set(t){index.set(field(t),t)}var df\x3dpulse.dataflow,field\x3d_.field,index\x3dthis.value,mod\x3d!0;_.modified(\x22field\x22)||pulse.modified(field.fields)?(index.clear(),pulse.visit(pulse.SOURCE,set)):pulse.changed()?(pulse.visit(pulse.REM,function(t){index.delete(field(t))}),pulse.visit(pulse.ADD,set)):mod\x3d!1;this.modified(mod);index.empty\x3edf.cleanThreshold\x26\x26df.runAfter(index.clean);return pulse.fork()};vegaUtil.inherits(Values,vegaDataflow.Transform).transform\x3dfunction(_,pulse){if(!this.value||\n_.modified(\x22field\x22)||_.modified(\x22sort\x22)||pulse.changed()||_.sort\x26\x26pulse.modified(_.sort.fields))this.value\x3d(_.sort?pulse.source.slice().sort(vegaDataflow.stableCompare(_.sort)):pulse.source).map(_.field)};var WindowOps\x3d{row_number:function(){return{next:function(w){return w.index+1}}},rank:function(){var rank;return{init:function(){return rank\x3d1},next:function(w){var i\x3dw.index,data\x3dw.data;return i\x26\x26w.compare(data[i-1],data[i])?rank\x3di+1:rank}}},dense_rank:function(){var drank;return{init:function(){return drank\x3d\n1},next:function(w){var i\x3dw.index,d\x3dw.data;return i\x26\x26w.compare(d[i-1],d[i])?++drank:drank}}},percent_rank:function(){var rank\x3dWindowOps.rank(),next\x3drank.next;return{init:rank.init,next:function(w){return(next(w)-1)/(w.data.length-1)}}},cume_dist:function(){var cume;return{init:function(){return cume\x3d0},next:function(w){var i\x3dw.index,d\x3dw.data;w\x3dw.compare;if(cume\x3ci){for(;i+1\x3cd.length\x26\x26!w(d[i],d[i+1]);)++i;cume\x3di}return(1+cume)/d.length}}},ntile:function(field,num){num\x3d+num;0\x3cnum||vegaUtil.error(\x22ntile num must be greater than zero.\x22);\nfield\x3dWindowOps.cume_dist();var next\x3dfield.next;return{init:field.init,next:function(w){return Math.ceil(num*next(w))}}},lag:function(field,offset){offset\x3d+offset||1;return{next:function(w){var i\x3dw.index-offset;return 0\x3c\x3di?field(w.data[i]):null}}},lead:function(field,offset){offset\x3d+offset||1;return{next:function(w){var i\x3dw.index+offset;w\x3dw.data;return i\x3cw.length?field(w[i]):null}}},first_value:function(field){return{next:function(w){return field(w.data[w.i0])}}},last_value:function(field){return{next:function(w){return field(w.data[w.i1-\n1])}}},nth_value:function(field,nth){nth\x3d+nth;0\x3cnth||vegaUtil.error(\x22nth_value nth must be greater than zero.\x22);return{next:function(w){var i\x3dw.i0+(nth-1);return i\x3cw.i1?field(w.data[i]):null}}},prev_value:function(field){var prev;return{init:function(){return prev\x3dnull},next:function(w){w\x3dfield(w.data[w.index]);return null!\x3dw?prev\x3dw:prev}}},next_value:function(field){var v,i;return{init:function(){return v\x3dnull,i\x3d-1},next:function(w){var d\x3dw.data;if(w.index\x3c\x3di)d\x3dv;else{a:{w\x3dw.index;for(var n\x3dd.length;w\x3c\nn;++w)if(null!\x3dfield(d[w]))break a;w\x3d-1}d\x3d0\x3e(i\x3dw)?(i\x3dd.length,v\x3dnull):v\x3dfield(d[i])}return d}}}},ValidWindowOps\x3dObject.keys(WindowOps),prototype$x\x3dWindowState.prototype;prototype$x.init\x3dfunction(){this.windows.forEach(function(_){return _.init()});this.cell\x26\x26this.cell.init()};prototype$x.update\x3dfunction(w,t){var cell\x3dthis.cell,wind\x3dthis.windows,data\x3dw.data,m\x3dwind\x26\x26wind.length,j;if(cell){for(j\x3dw.p0;j\x3cw.i0;++j)cell.rem(data[j]);for(j\x3dw.p1;j\x3cw.i1;++j)cell.add(data[j]);cell.set(t)}for(j\x3d0;j\x3cm;++j)wind[j].update(w,\nt)};Window.Definition\x3d{type:\x22Window\x22,metadata:{modifies:!0},params:[{name:\x22sort\x22,type:\x22compare\x22},{name:\x22groupby\x22,type:\x22field\x22,array:!0},{name:\x22ops\x22,type:\x22enum\x22,array:!0,values:ValidWindowOps.concat(ValidAggregateOps)},{name:\x22params\x22,type:\x22number\x22,\x22null\x22:!0,array:!0},{name:\x22fields\x22,type:\x22field\x22,\x22null\x22:!0,array:!0},{name:\x22as\x22,type:\x22string\x22,\x22null\x22:!0,array:!0},{name:\x22frame\x22,type:\x22number\x22,\x22null\x22:!0,array:!0,length:2,\x22default\x22:[null,0]},{name:\x22ignorePeers\x22,type:\x22boolean\x22,\x22default\x22:!1}]};var prototype$y\x3d\nvegaUtil.inherits(Window,vegaDataflow.Transform);prototype$y.transform\x3dfunction(_,pulse){var self\x3dthis,state\x3dself.state,mod\x3d_.modified(),cmp\x3dvegaDataflow.stableCompare(_.sort),n;this.stamp\x3dpulse.stamp;if(!state||mod)state\x3dself.state\x3dnew WindowState(_);var key\x3dgroupkey(_.groupby);mod||pulse.modified(state.inputs)?(self.value\x3d{},pulse.visit(pulse.SOURCE,function(t){self.group(key(t)).add(t)})):(pulse.visit(pulse.REM,function(t){self.group(key(t)).remove(t)}),pulse.visit(pulse.ADD,function(t){self.group(key(t)).add(t)}));\nvar i\x3d0;for(n\x3dself._mlen;i\x3cn;++i)processPartition(self._mods[i],state,cmp,_);self._mlen\x3d0;self._mods\x3d[];return pulse.reflow(mod).modifies(state.outputs)};prototype$y.group\x3dfunction(key){var group\x3dthis.value[key];group||(group\x3dthis.value[key]\x3dSortedList(vegaDataflow.tupleid),group.stamp\x3d-1);group.stamp\x3cthis.stamp\x26\x26(group.stamp\x3dthis.stamp,this._mods[this._mlen++]\x3dgroup);return group};exports.aggregate\x3dAggregate;exports.bin\x3dBin;exports.collect\x3dCollect;exports.compare\x3dCompare;exports.countpattern\x3dCountPattern;\nexports.cross\x3dCross;exports.density\x3dDensity;exports.dotbin\x3dDotBin;exports.expression\x3dExpression;exports.extent\x3dExtent;exports.facet\x3dFacet;exports.field\x3dField;exports.filter\x3dFilter;exports.flatten\x3dFlatten;exports.fold\x3dFold;exports.formula\x3dFormula;exports.generate\x3dGenerate;exports.impute\x3dImpute;exports.joinaggregate\x3dJoinAggregate;exports.kde\x3dKDE;exports.key\x3dKey;exports.load\x3dLoad;exports.lookup\x3dLookup;exports.multiextent\x3dMultiExtent;exports.multivalues\x3dMultiValues;exports.params\x3dParams;exports.pivot\x3d\nPivot;exports.prefacet\x3dPreFacet;exports.project\x3dProject;exports.proxy\x3dProxy;exports.quantile\x3dQuantile;exports.relay\x3dRelay;exports.sample\x3dSample;exports.sequence\x3dSequence;exports.sieve\x3dSieve;exports.subflow\x3dSubflow;exports.timeunit\x3dTimeUnit;exports.tupleindex\x3dTupleIndex;exports.values\x3dValues;exports.window\x3dWindow;Object.defineProperty(exports,\x22__esModule\x22,{value:!0})})}");
SHADOW_ENV.evalLoad("module$node_modules$d3_path$dist$d3_path.js", true , "shadow$provide.module$node_modules$d3_path$dist$d3_path\x3dfunction(global$jscomp$0,require,module,exports$jscomp$0){(function(global,factory){\x22object\x22\x3d\x3d\x3dtypeof exports$jscomp$0\x26\x26\x22undefined\x22!\x3d\x3dtypeof module?factory(exports$jscomp$0):\x22function\x22\x3d\x3d\x3dtypeof define\x26\x26define.amd?define([\x22exports\x22],factory):(global\x3dglobal||self,factory(global.d3\x3dglobal.d3||{}))})(this,function(exports){function Path(){this._x0\x3dthis._y0\x3dthis._x1\x3dthis._y1\x3dnull;this._\x3d\x22\x22}function path(){return new Path}var pi\x3dMath.PI,tau\x3d2*pi,tauEpsilon\x3d\ntau-1E-6;Path.prototype\x3dpath.prototype\x3d{constructor:Path,moveTo:function(x,y){this._+\x3d\x22M\x22+(this._x0\x3dthis._x1\x3d+x)+\x22,\x22+(this._y0\x3dthis._y1\x3d+y)},closePath:function(){null!\x3d\x3dthis._x1\x26\x26(this._x1\x3dthis._x0,this._y1\x3dthis._y0,this._+\x3d\x22Z\x22)},lineTo:function(x,y){this._+\x3d\x22L\x22+(this._x1\x3d+x)+\x22,\x22+(this._y1\x3d+y)},quadraticCurveTo:function(x1,y1,x,y){this._+\x3d\x22Q\x22+ +x1+\x22,\x22+ +y1+\x22,\x22+(this._x1\x3d+x)+\x22,\x22+(this._y1\x3d+y)},bezierCurveTo:function(x1,y1,x2,y2,x,y){this._+\x3d\x22C\x22+ +x1+\x22,\x22+ +y1+\x22,\x22+ +x2+\x22,\x22+ +y2+\x22,\x22+(this._x1\x3d+x)+\x22,\x22+\n(this._y1\x3d+y)},arcTo:function(x1,y1,x2,y2,r){x1\x3d+x1;y1\x3d+y1;x2\x3d+x2;y2\x3d+y2;r\x3d+r;var x0\x3dthis._x1,y0\x3dthis._y1,x21\x3dx2-x1,y21\x3dy2-y1,x01\x3dx0-x1,y01\x3dy0-y1,l01_2\x3dx01*x01+y01*y01;if(0\x3er)throw Error(\x22negative radius: \x22+r);if(null\x3d\x3d\x3dthis._x1)this._+\x3d\x22M\x22+(this._x1\x3dx1)+\x22,\x22+(this._y1\x3dy1);else if(1E-6\x3cl01_2)if(1E-6\x3cMath.abs(y01*x21-y21*x01)\x26\x26r){x2-\x3dx0;y2-\x3dy0;var l21_2\x3dx21*x21+y21*y21;y0\x3dMath.sqrt(l21_2);x0\x3dMath.sqrt(l01_2);l01_2\x3dr*Math.tan((pi-Math.acos((l21_2+l01_2-(x2*x2+y2*y2))/(2*y0*x0)))/2);x0\x3dl01_2/x0;l01_2/\x3d\ny0;1E-6\x3cMath.abs(x0-1)\x26\x26(this._+\x3d\x22L\x22+(x1+x0*x01)+\x22,\x22+(y1+x0*y01));this._+\x3d\x22A\x22+r+\x22,\x22+r+\x22,0,0,\x22+ +(y01*x2\x3ex01*y2)+\x22,\x22+(this._x1\x3dx1+l01_2*x21)+\x22,\x22+(this._y1\x3dy1+l01_2*y21)}else this._+\x3d\x22L\x22+(this._x1\x3dx1)+\x22,\x22+(this._y1\x3dy1)},arc:function(x,y,r,a0,a1,ccw){x\x3d+x;y\x3d+y;r\x3d+r;ccw\x3d!!ccw;var dx\x3dr*Math.cos(a0),dy\x3dr*Math.sin(a0),x0\x3dx+dx,y0\x3dy+dy,cw\x3d1^ccw;a0\x3dccw?a0-a1:a1-a0;if(0\x3er)throw Error(\x22negative radius: \x22+r);if(null\x3d\x3d\x3dthis._x1)this._+\x3d\x22M\x22+x0+\x22,\x22+y0;else if(1E-6\x3cMath.abs(this._x1-x0)||1E-6\x3cMath.abs(this._y1-y0))this._+\x3d\n\x22L\x22+x0+\x22,\x22+y0;r\x26\x26(0\x3ea0\x26\x26(a0\x3da0%tau+tau),a0\x3etauEpsilon?this._+\x3d\x22A\x22+r+\x22,\x22+r+\x22,0,1,\x22+cw+\x22,\x22+(x-dx)+\x22,\x22+(y-dy)+\x22A\x22+r+\x22,\x22+r+\x22,0,1,\x22+cw+\x22,\x22+(this._x1\x3dx0)+\x22,\x22+(this._y1\x3dy0):1E-6\x3ca0\x26\x26(this._+\x3d\x22A\x22+r+\x22,\x22+r+\x22,0,\x22+ +(a0\x3e\x3dpi)+\x22,\x22+cw+\x22,\x22+(this._x1\x3dx+r*Math.cos(a1))+\x22,\x22+(this._y1\x3dy+r*Math.sin(a1))))},rect:function(x,y,w,h){this._+\x3d\x22M\x22+(this._x0\x3dthis._x1\x3d+x)+\x22,\x22+(this._y0\x3dthis._y1\x3d+y)+\x22h\x22+ +w+\x22v\x22+ +h+\x22h\x22+-w+\x22Z\x22},toString:function(){return this._}};exports.path\x3dpath;Object.defineProperty(exports,\x22__esModule\x22,{value:!0})})}");
SHADOW_ENV.evalLoad("module$node_modules$d3_shape$dist$d3_shape.js", true , "shadow$provide.module$node_modules$d3_shape$dist$d3_shape\x3dfunction(global$jscomp$0,require,module,exports$jscomp$0){(function(global,factory){\x22object\x22\x3d\x3d\x3dtypeof exports$jscomp$0\x26\x26\x22undefined\x22!\x3d\x3dtypeof module?factory(exports$jscomp$0,require(\x22module$node_modules$d3_path$dist$d3_path\x22)):\x22function\x22\x3d\x3d\x3dtypeof define\x26\x26define.amd?define([\x22exports\x22,\x22d3-path\x22],factory):(global\x3dglobal||self,factory(global.d3\x3dglobal.d3||{},global.d3))})(this,function(exports,d3Path){function constant(x){return function(){return x}}\nfunction asin(x){return 1\x3c\x3dx?halfPi:-1\x3e\x3dx?-halfPi:Math.asin(x)}function arcInnerRadius(d){return d.innerRadius}function arcOuterRadius(d){return d.outerRadius}function arcStartAngle(d){return d.startAngle}function arcEndAngle(d){return d.endAngle}function arcPadAngle(d){return d\x26\x26d.padAngle}function cornerTangents(x0,y0,x1,y1,r1,rc,cw){var x01\x3dx0-x1,y01\x3dy0-y1;cw\x3d(cw?rc:-rc)/sqrt(x01*x01+y01*y01);y01*\x3dcw;x01*\x3d-cw;var x11\x3dx0+y01,y11\x3dy0+x01,x10\x3dx1+y01,y10\x3dy1+x01;x1\x3d(x11+x10)/2;y1\x3d(y11+y10)/2;y0\x3dx10-\nx11;x0\x3dy10-y11;cw\x3dy0*y0+x0*x0;rc\x3dr1-rc;y10\x3dx11*y10-x10*y11;var d\x3d(0\x3ex0?-1:1)*sqrt(max(0,rc*rc*cw-y10*y10));x11\x3d(y10*x0-y0*d)/cw;y11\x3d(-y10*y0-x0*d)/cw;x10\x3d(y10*x0+y0*d)/cw;y0\x3d(-y10*y0+x0*d)/cw;x0\x3dx11-x1;cw\x3dy11-y1;x1\x3dx10-x1;y1\x3dy0-y1;x0*x0+cw*cw\x3ex1*x1+y1*y1\x26\x26(x11\x3dx10,y11\x3dy0);return{cx:x11,cy:y11,x01:-y01,y01:-x01,x11:x11*(r1/rc-1),y11:y11*(r1/rc-1)}}function Linear(context){this._context\x3dcontext}function curveLinear(context){return new Linear(context)}function x$jscomp$0(p){return p[0]}function y$jscomp$0(p){return p[1]}\nfunction line$jscomp$0(){function line(data){var i,n\x3ddata.length,d,defined0\x3d!1,buffer;null\x3d\x3dcontext\x26\x26(output\x3dcurve(buffer\x3dd3Path.path()));for(i\x3d0;i\x3c\x3dn;++i)!(i\x3cn\x26\x26defined(d\x3ddata[i],i,data))\x3d\x3d\x3ddefined0\x26\x26((defined0\x3d!defined0)?output.lineStart():output.lineEnd()),defined0\x26\x26output.point(+x$1(d,i,data),+y$1(d,i,data));if(buffer)return output\x3dnull,buffer+\x22\x22||null}var x$1\x3dx$jscomp$0,y$1\x3dy$jscomp$0,defined\x3dconstant(!0),context\x3dnull,curve\x3dcurveLinear,output\x3dnull;line.x\x3dfunction(_){return arguments.length?(x$1\x3d\n\x22function\x22\x3d\x3d\x3dtypeof _?_:constant(+_),line):x$1};line.y\x3dfunction(_){return arguments.length?(y$1\x3d\x22function\x22\x3d\x3d\x3dtypeof _?_:constant(+_),line):y$1};line.defined\x3dfunction(_){return arguments.length?(defined\x3d\x22function\x22\x3d\x3d\x3dtypeof _?_:constant(!!_),line):defined};line.curve\x3dfunction(_){return arguments.length?(curve\x3d_,null!\x3dcontext\x26\x26(output\x3dcurve(context)),line):curve};line.context\x3dfunction(_){return arguments.length?(null\x3d\x3d_?context\x3doutput\x3dnull:output\x3dcurve(context\x3d_),line):context};return line}function area$jscomp$0(){function area(data){var i,\nk,n\x3ddata.length,d,defined0\x3d!1,buffer,x0z\x3dArray(n),y0z\x3dArray(n);null\x3d\x3dcontext\x26\x26(output\x3dcurve(buffer\x3dd3Path.path()));for(i\x3d0;i\x3c\x3dn;++i){if(!(i\x3cn\x26\x26defined(d\x3ddata[i],i,data))\x3d\x3d\x3ddefined0)if(defined0\x3d!defined0){var j\x3di;output.areaStart();output.lineStart()}else{output.lineEnd();output.lineStart();for(k\x3di-1;k\x3e\x3dj;--k)output.point(x0z[k],y0z[k]);output.lineEnd();output.areaEnd()}defined0\x26\x26(x0z[i]\x3d+x0(d,i,data),y0z[i]\x3d+y0(d,i,data),output.point(x1?+x1(d,i,data):x0z[i],y1?+y1(d,i,data):y0z[i]))}if(buffer)return output\x3d\nnull,buffer+\x22\x22||null}function arealine(){return line$jscomp$0().defined(defined).curve(curve).context(context)}var x0\x3dx$jscomp$0,x1\x3dnull,y0\x3dconstant(0),y1\x3dy$jscomp$0,defined\x3dconstant(!0),context\x3dnull,curve\x3dcurveLinear,output\x3dnull;area.x\x3dfunction(_){return arguments.length?(x0\x3d\x22function\x22\x3d\x3d\x3dtypeof _?_:constant(+_),x1\x3dnull,area):x0};area.x0\x3dfunction(_){return arguments.length?(x0\x3d\x22function\x22\x3d\x3d\x3dtypeof _?_:constant(+_),area):x0};area.x1\x3dfunction(_){return arguments.length?(x1\x3dnull\x3d\x3d_?null:\x22function\x22\x3d\x3d\x3d\ntypeof _?_:constant(+_),area):x1};area.y\x3dfunction(_){return arguments.length?(y0\x3d\x22function\x22\x3d\x3d\x3dtypeof _?_:constant(+_),y1\x3dnull,area):y0};area.y0\x3dfunction(_){return arguments.length?(y0\x3d\x22function\x22\x3d\x3d\x3dtypeof _?_:constant(+_),area):y0};area.y1\x3dfunction(_){return arguments.length?(y1\x3dnull\x3d\x3d_?null:\x22function\x22\x3d\x3d\x3dtypeof _?_:constant(+_),area):y1};area.lineX0\x3darea.lineY0\x3dfunction(){return arealine().x(x0).y(y0)};area.lineY1\x3dfunction(){return arealine().x(x0).y(y1)};area.lineX1\x3dfunction(){return arealine().x(x1).y(y0)};\narea.defined\x3dfunction(_){return arguments.length?(defined\x3d\x22function\x22\x3d\x3d\x3dtypeof _?_:constant(!!_),area):defined};area.curve\x3dfunction(_){return arguments.length?(curve\x3d_,null!\x3dcontext\x26\x26(output\x3dcurve(context)),area):curve};area.context\x3dfunction(_){return arguments.length?(null\x3d\x3d_?context\x3doutput\x3dnull:output\x3dcurve(context\x3d_),area):context};return area}function descending(a,b){return b\x3ca?-1:b\x3ea?1:b\x3e\x3da?0:NaN}function identity(d){return d}function Radial(curve){this._curve\x3dcurve}function curveRadial(curve){function radial(context){return new Radial(curve(context))}\nradial._curve\x3dcurve;return radial}function lineRadial(l){var c\x3dl.curve;l.angle\x3dl.x;delete l.x;l.radius\x3dl.y;delete l.y;l.curve\x3dfunction(_){return arguments.length?c(curveRadial(_)):c()._curve};return l}function lineRadial$1(){return lineRadial(line$jscomp$0().curve(curveRadialLinear))}function areaRadial(){var a\x3darea$jscomp$0().curve(curveRadialLinear),c\x3da.curve,x0\x3da.lineX0,x1\x3da.lineX1,y0\x3da.lineY0,y1\x3da.lineY1;a.angle\x3da.x;delete a.x;a.startAngle\x3da.x0;delete a.x0;a.endAngle\x3da.x1;delete a.x1;a.radius\x3d\na.y;delete a.y;a.innerRadius\x3da.y0;delete a.y0;a.outerRadius\x3da.y1;delete a.y1;a.lineStartAngle\x3dfunction(){return lineRadial(x0())};delete a.lineX0;a.lineEndAngle\x3dfunction(){return lineRadial(x1())};delete a.lineX1;a.lineInnerRadius\x3dfunction(){return lineRadial(y0())};delete a.lineY0;a.lineOuterRadius\x3dfunction(){return lineRadial(y1())};delete a.lineY1;a.curve\x3dfunction(_){return arguments.length?c(curveRadial(_)):c()._curve};return a}function pointRadial(x,y){return[(y\x3d+y)*Math.cos(x-\x3dMath.PI/2),y*\nMath.sin(x)]}function linkSource(d){return d.source}function linkTarget(d){return d.target}function link$jscomp$0(curve){function link(){var buffer,argv\x3dslice.call(arguments),s\x3dsource.apply(this,argv),t\x3dtarget.apply(this,argv);context||(context\x3dbuffer\x3dd3Path.path());curve(context,+x$1.apply(this,(argv[0]\x3ds,argv)),+y$1.apply(this,argv),+x$1.apply(this,(argv[0]\x3dt,argv)),+y$1.apply(this,argv));if(buffer)return context\x3dnull,buffer+\x22\x22||null}var source\x3dlinkSource,target\x3dlinkTarget,x$1\x3dx$jscomp$0,y$1\x3dy$jscomp$0,\ncontext\x3dnull;link.source\x3dfunction(_){return arguments.length?(source\x3d_,link):source};link.target\x3dfunction(_){return arguments.length?(target\x3d_,link):target};link.x\x3dfunction(_){return arguments.length?(x$1\x3d\x22function\x22\x3d\x3d\x3dtypeof _?_:constant(+_),link):x$1};link.y\x3dfunction(_){return arguments.length?(y$1\x3d\x22function\x22\x3d\x3d\x3dtypeof _?_:constant(+_),link):y$1};link.context\x3dfunction(_){return arguments.length?(context\x3dnull\x3d\x3d_?null:_,link):context};return link}function curveHorizontal(context,x0,y0,x1,y1){context.moveTo(x0,\ny0);context.bezierCurveTo(x0\x3d(x0+x1)/2,y0,x0,y1,x1,y1)}function curveVertical(context,x0,y0,x1,y1){context.moveTo(x0,y0);context.bezierCurveTo(x0,y0\x3d(y0+y1)/2,x1,y0,x1,y1)}function curveRadial$1(context,x0,y0,x1,y1){var p0\x3dpointRadial(x0,y0);x0\x3dpointRadial(x0,y0\x3d(y0+y1)/2);y0\x3dpointRadial(x1,y0);x1\x3dpointRadial(x1,y1);context.moveTo(p0[0],p0[1]);context.bezierCurveTo(x0[0],x0[1],y0[0],y0[1],x1[0],x1[1])}function noop(){}function point(that,x,y){that._context.bezierCurveTo((2*that._x0+that._x1)/3,(2*\nthat._y0+that._y1)/3,(that._x0+2*that._x1)/3,(that._y0+2*that._y1)/3,(that._x0+4*that._x1+x)/6,(that._y0+4*that._y1+y)/6)}function Basis(context){this._context\x3dcontext}function BasisClosed(context){this._context\x3dcontext}function BasisOpen(context){this._context\x3dcontext}function Bundle(context,beta){this._basis\x3dnew Basis(context);this._beta\x3dbeta}function point$1(that,x,y){that._context.bezierCurveTo(that._x1+that._k*(that._x2-that._x0),that._y1+that._k*(that._y2-that._y0),that._x2+that._k*(that._x1-\nx),that._y2+that._k*(that._y1-y),that._x2,that._y2)}function Cardinal(context,tension){this._context\x3dcontext;this._k\x3d(1-tension)/6}function CardinalClosed(context,tension){this._context\x3dcontext;this._k\x3d(1-tension)/6}function CardinalOpen(context,tension){this._context\x3dcontext;this._k\x3d(1-tension)/6}function point$2(that,x,y){var x1\x3dthat._x1,y1\x3dthat._y1,x2\x3dthat._x2,y2\x3dthat._y2;if(1E-12\x3cthat._l01_a){var a\x3d2*that._l01_2a+3*that._l01_a*that._l12_a+that._l12_2a,n\x3d3*that._l01_a*(that._l01_a+that._l12_a);\nx1\x3d(x1*a-that._x0*that._l12_2a+that._x2*that._l01_2a)/n;y1\x3d(y1*a-that._y0*that._l12_2a+that._y2*that._l01_2a)/n}1E-12\x3cthat._l23_a\x26\x26(a\x3d2*that._l23_2a+3*that._l23_a*that._l12_a+that._l12_2a,n\x3d3*that._l23_a*(that._l23_a+that._l12_a),x2\x3d(x2*a+that._x1*that._l23_2a-x*that._l12_2a)/n,y2\x3d(y2*a+that._y1*that._l23_2a-y*that._l12_2a)/n);that._context.bezierCurveTo(x1,y1,x2,y2,that._x2,that._y2)}function CatmullRom(context,alpha){this._context\x3dcontext;this._alpha\x3dalpha}function CatmullRomClosed(context,alpha){this._context\x3d\ncontext;this._alpha\x3dalpha}function CatmullRomOpen(context,alpha){this._context\x3dcontext;this._alpha\x3dalpha}function LinearClosed(context){this._context\x3dcontext}function slope3(that,x2,y2){var h0\x3dthat._x1-that._x0;x2-\x3dthat._x1;var s0\x3d(that._y1-that._y0)/(h0||0\x3ex2\x26\x26-0);that\x3d(y2-that._y1)/(x2||0\x3eh0\x26\x26-0);return((0\x3es0?-1:1)+(0\x3ethat?-1:1))*Math.min(Math.abs(s0),Math.abs(that),.5*Math.abs((s0*x2+that*h0)/(h0+x2)))||0}function slope2(that,t){var h\x3dthat._x1-that._x0;return h?(3*(that._y1-that._y0)/h-t)/2:t}\nfunction point$3(that,t0,t1){var x0\x3dthat._x0,x1\x3dthat._x1,y1\x3dthat._y1,dx\x3d(x1-x0)/3;that._context.bezierCurveTo(x0+dx,that._y0+dx*t0,x1-dx,y1-dx*t1,x1,y1)}function MonotoneX(context){this._context\x3dcontext}function MonotoneY(context){this._context\x3dnew ReflectContext(context)}function ReflectContext(context){this._context\x3dcontext}function Natural(context){this._context\x3dcontext}function controlPoints(x){var i,n\x3dx.length-1,a\x3dArray(n),b\x3dArray(n),r\x3dArray(n);a[0]\x3d0;b[0]\x3d2;r[0]\x3dx[0]+2*x[1];for(i\x3d1;i\x3cn-1;++i)a[i]\x3d\n1,b[i]\x3d4,r[i]\x3d4*x[i]+2*x[i+1];a[n-1]\x3d2;b[n-1]\x3d7;r[n-1]\x3d8*x[n-1]+x[n];for(i\x3d1;i\x3cn;++i){var m\x3da[i]/b[i-1];b[i]-\x3dm;r[i]-\x3dm*r[i-1]}a[n-1]\x3dr[n-1]/b[n-1];for(i\x3dn-2;0\x3c\x3di;--i)a[i]\x3d(r[i]-a[i+1])/b[i];b[n-1]\x3d(x[n]+a[n-1])/2;for(i\x3d0;i\x3cn-1;++i)b[i]\x3d2*x[i+1]-a[i+1];return[a,b]}function Step(context,t){this._context\x3dcontext;this._t\x3dt}function none(series,order){if(1\x3c(n\x3dseries.length))for(var i\x3d1,j,s0,s1\x3dseries[order[0]],n,m\x3ds1.length;i\x3cn;++i)for(s0\x3ds1,s1\x3dseries[order[i]],j\x3d0;j\x3cm;++j)s1[j][1]+\x3ds1[j][0]\x3disNaN(s0[j][1])?\ns0[j][0]:s0[j][1]}function none$1(series){series\x3dseries.length;for(var o\x3dArray(series);0\x3c\x3d--series;)o[series]\x3dseries;return o}function stackValue(d,key){return d[key]}function appearance(series){var peaks\x3dseries.map(peak);return none$1(series).sort(function(a,b){return peaks[a]-peaks[b]})}function peak(series){for(var i\x3d-1,j\x3d0,n\x3dseries.length,vi,vj\x3d-Infinity;++i\x3cn;)(vi\x3d+series[i][1])\x3evj\x26\x26(vj\x3dvi,j\x3di);return j}function ascending(series){var sums\x3dseries.map(sum);return none$1(series).sort(function(a,\nb){return sums[a]-sums[b]})}function sum(series){for(var s\x3d0,i\x3d-1,n\x3dseries.length,v;++i\x3cn;)if(v\x3d+series[i][1])s+\x3dv;return s}var abs\x3dMath.abs,atan2\x3dMath.atan2,cos\x3dMath.cos,max\x3dMath.max,min\x3dMath.min,sin\x3dMath.sin,sqrt\x3dMath.sqrt,pi\x3dMath.PI,halfPi\x3dpi/2,tau\x3d2*pi;Linear.prototype\x3d{areaStart:function(){this._line\x3d0},areaEnd:function(){this._line\x3dNaN},lineStart:function(){this._point\x3d0},lineEnd:function(){(this._line||0!\x3d\x3dthis._line\x26\x261\x3d\x3d\x3dthis._point)\x26\x26this._context.closePath();this._line\x3d1-this._line},point:function(x,\ny){x\x3d+x;y\x3d+y;switch(this._point){case 0:this._point\x3d1;this._line?this._context.lineTo(x,y):this._context.moveTo(x,y);break;case 1:this._point\x3d2;default:this._context.lineTo(x,y)}}};var curveRadialLinear\x3dcurveRadial(curveLinear);Radial.prototype\x3d{areaStart:function(){this._curve.areaStart()},areaEnd:function(){this._curve.areaEnd()},lineStart:function(){this._curve.lineStart()},lineEnd:function(){this._curve.lineEnd()},point:function(a,r){this._curve.point(r*Math.sin(a),r*-Math.cos(a))}};var slice\x3d\nArray.prototype.slice,circle\x3d{draw:function(context,size){size\x3dMath.sqrt(size/pi);context.moveTo(size,0);context.arc(0,0,size,0,tau)}},cross\x3d{draw:function(context,size){size\x3dMath.sqrt(size/5)/2;context.moveTo(-3*size,-size);context.lineTo(-size,-size);context.lineTo(-size,-3*size);context.lineTo(size,-3*size);context.lineTo(size,-size);context.lineTo(3*size,-size);context.lineTo(3*size,size);context.lineTo(size,size);context.lineTo(size,3*size);context.lineTo(-size,3*size);context.lineTo(-size,size);\ncontext.lineTo(-3*size,size);context.closePath()}},tan30\x3dMath.sqrt(1/3),tan30_2\x3d2*tan30,diamond\x3d{draw:function(context,size){size\x3dMath.sqrt(size/tan30_2);var x\x3dsize*tan30;context.moveTo(0,-size);context.lineTo(x,0);context.lineTo(0,size);context.lineTo(-x,0);context.closePath()}},kr\x3dMath.sin(pi/10)/Math.sin(7*pi/10),kx\x3dMath.sin(tau/10)*kr,ky\x3d-Math.cos(tau/10)*kr;kr\x3d{draw:function(context,size){size\x3dMath.sqrt(.8908130915292852*size);var x\x3dkx*size,y\x3dky*size;context.moveTo(0,-size);context.lineTo(x,\ny);for(var i\x3d1;5\x3ei;++i){var a\x3dtau*i/5,c\x3dMath.cos(a);a\x3dMath.sin(a);context.lineTo(a*size,-c*size);context.lineTo(c*x-a*y,a*x+c*y)}context.closePath()}};var square\x3d{draw:function(context,size){size\x3dMath.sqrt(size);var x\x3d-size/2;context.rect(x,x,size,size)}},sqrt3\x3dMath.sqrt(3),triangle\x3d{draw:function(context,size){size\x3d-Math.sqrt(size/(3*sqrt3));context.moveTo(0,2*size);context.lineTo(-sqrt3*size,-size);context.lineTo(sqrt3*size,-size);context.closePath()}},s$jscomp$0\x3dMath.sqrt(3)/2,k$jscomp$0\x3d1/Math.sqrt(12),\na$jscomp$0\x3d3*(k$jscomp$0/2+1),wye\x3d{draw:function(context,size){var r\x3dMath.sqrt(size/a$jscomp$0);size\x3dr/2;var y0\x3dr*k$jscomp$0;r\x3dr*k$jscomp$0+r;var x2\x3d-size;context.moveTo(size,y0);context.lineTo(size,r);context.lineTo(x2,r);context.lineTo(-.5*size-s$jscomp$0*y0,s$jscomp$0*size+-.5*y0);context.lineTo(-.5*size-s$jscomp$0*r,s$jscomp$0*size+-.5*r);context.lineTo(-.5*x2-s$jscomp$0*r,s$jscomp$0*x2+-.5*r);context.lineTo(-.5*size+s$jscomp$0*y0,-.5*y0-s$jscomp$0*size);context.lineTo(-.5*size+s$jscomp$0*r,-.5*\nr-s$jscomp$0*size);context.lineTo(-.5*x2+s$jscomp$0*r,-.5*r-s$jscomp$0*x2);context.closePath()}},symbols\x3d[circle,cross,diamond,square,kr,triangle,wye];Basis.prototype\x3d{areaStart:function(){this._line\x3d0},areaEnd:function(){this._line\x3dNaN},lineStart:function(){this._x0\x3dthis._x1\x3dthis._y0\x3dthis._y1\x3dNaN;this._point\x3d0},lineEnd:function(){switch(this._point){case 3:point(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1)}(this._line||0!\x3d\x3dthis._line\x26\x261\x3d\x3d\x3dthis._point)\x26\x26this._context.closePath();\nthis._line\x3d1-this._line},point:function(x,y){x\x3d+x;y\x3d+y;switch(this._point){case 0:this._point\x3d1;this._line?this._context.lineTo(x,y):this._context.moveTo(x,y);break;case 1:this._point\x3d2;break;case 2:this._point\x3d3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:point(this,x,y)}this._x0\x3dthis._x1;this._x1\x3dx;this._y0\x3dthis._y1;this._y1\x3dy}};BasisClosed.prototype\x3d{areaStart:noop,areaEnd:noop,lineStart:function(){this._x0\x3dthis._x1\x3dthis._x2\x3dthis._x3\x3dthis._x4\x3dthis._y0\x3dthis._y1\x3d\nthis._y2\x3dthis._y3\x3dthis._y4\x3dNaN;this._point\x3d0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x2,this._y2);this._context.closePath();break;case 2:this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3);this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3);this._context.closePath();break;case 3:this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4)}},point:function(x,y){x\x3d+x;y\x3d+y;switch(this._point){case 0:this._point\x3d\n1;this._x2\x3dx;this._y2\x3dy;break;case 1:this._point\x3d2;this._x3\x3dx;this._y3\x3dy;break;case 2:this._point\x3d3;this._x4\x3dx;this._y4\x3dy;this._context.moveTo((this._x0+4*this._x1+x)/6,(this._y0+4*this._y1+y)/6);break;default:point(this,x,y)}this._x0\x3dthis._x1;this._x1\x3dx;this._y0\x3dthis._y1;this._y1\x3dy}};BasisOpen.prototype\x3d{areaStart:function(){this._line\x3d0},areaEnd:function(){this._line\x3dNaN},lineStart:function(){this._x0\x3dthis._x1\x3dthis._y0\x3dthis._y1\x3dNaN;this._point\x3d0},lineEnd:function(){(this._line||0!\x3d\x3dthis._line\x26\x26\n3\x3d\x3d\x3dthis._point)\x26\x26this._context.closePath();this._line\x3d1-this._line},point:function(x,y){x\x3d+x;y\x3d+y;switch(this._point){case 0:this._point\x3d1;break;case 1:this._point\x3d2;break;case 2:this._point\x3d3;var x0\x3d(this._x0+4*this._x1+x)/6,y0\x3d(this._y0+4*this._y1+y)/6;this._line?this._context.lineTo(x0,y0):this._context.moveTo(x0,y0);break;case 3:this._point\x3d4;default:point(this,x,y)}this._x0\x3dthis._x1;this._x1\x3dx;this._y0\x3dthis._y1;this._y1\x3dy}};Bundle.prototype\x3d{lineStart:function(){this._x\x3d[];this._y\x3d[];this._basis.lineStart()},\nlineEnd:function(){var x\x3dthis._x,y\x3dthis._y,j\x3dx.length-1;if(0\x3cj)for(var x0\x3dx[0],y0\x3dy[0],dx\x3dx[j]-x0,dy\x3dy[j]-y0,i\x3d-1,t;++i\x3c\x3dj;)t\x3di/j,this._basis.point(this._beta*x[i]+(1-this._beta)*(x0+t*dx),this._beta*y[i]+(1-this._beta)*(y0+t*dy));this._x\x3dthis._y\x3dnull;this._basis.lineEnd()},point:function(x,y){this._x.push(+x);this._y.push(+y)}};var bundle\x3dfunction custom(beta$jscomp$0){function bundle(context){return 1\x3d\x3d\x3dbeta$jscomp$0?new Basis(context):new Bundle(context,beta$jscomp$0)}bundle.beta\x3dfunction(beta){return custom(+beta)};\nreturn bundle}(.85);Cardinal.prototype\x3d{areaStart:function(){this._line\x3d0},areaEnd:function(){this._line\x3dNaN},lineStart:function(){this._x0\x3dthis._x1\x3dthis._x2\x3dthis._y0\x3dthis._y1\x3dthis._y2\x3dNaN;this._point\x3d0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:point$1(this,this._x1,this._y1)}(this._line||0!\x3d\x3dthis._line\x26\x261\x3d\x3d\x3dthis._point)\x26\x26this._context.closePath();this._line\x3d1-this._line},point:function(x,y){x\x3d+x;y\x3d+y;switch(this._point){case 0:this._point\x3d\n1;this._line?this._context.lineTo(x,y):this._context.moveTo(x,y);break;case 1:this._point\x3d2;this._x1\x3dx;this._y1\x3dy;break;case 2:this._point\x3d3;default:point$1(this,x,y)}this._x0\x3dthis._x1;this._x1\x3dthis._x2;this._x2\x3dx;this._y0\x3dthis._y1;this._y1\x3dthis._y2;this._y2\x3dy}};var cardinal\x3dfunction custom(tension$jscomp$0){function cardinal(context){return new Cardinal(context,tension$jscomp$0)}cardinal.tension\x3dfunction(tension){return custom(+tension)};return cardinal}(0);CardinalClosed.prototype\x3d{areaStart:noop,\nareaEnd:noop,lineStart:function(){this._x0\x3dthis._x1\x3dthis._x2\x3dthis._x3\x3dthis._x4\x3dthis._x5\x3dthis._y0\x3dthis._y1\x3dthis._y2\x3dthis._y3\x3dthis._y4\x3dthis._y5\x3dNaN;this._point\x3d0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3);this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3);this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(x,y){x\x3d+x;y\x3d+y;switch(this._point){case 0:this._point\x3d\n1;this._x3\x3dx;this._y3\x3dy;break;case 1:this._point\x3d2;this._context.moveTo(this._x4\x3dx,this._y4\x3dy);break;case 2:this._point\x3d3;this._x5\x3dx;this._y5\x3dy;break;default:point$1(this,x,y)}this._x0\x3dthis._x1;this._x1\x3dthis._x2;this._x2\x3dx;this._y0\x3dthis._y1;this._y1\x3dthis._y2;this._y2\x3dy}};var cardinalClosed\x3dfunction custom(tension$jscomp$0){function cardinal(context){return new CardinalClosed(context,tension$jscomp$0)}cardinal.tension\x3dfunction(tension){return custom(+tension)};return cardinal}(0);CardinalOpen.prototype\x3d\n{areaStart:function(){this._line\x3d0},areaEnd:function(){this._line\x3dNaN},lineStart:function(){this._x0\x3dthis._x1\x3dthis._x2\x3dthis._y0\x3dthis._y1\x3dthis._y2\x3dNaN;this._point\x3d0},lineEnd:function(){(this._line||0!\x3d\x3dthis._line\x26\x263\x3d\x3d\x3dthis._point)\x26\x26this._context.closePath();this._line\x3d1-this._line},point:function(x,y){x\x3d+x;y\x3d+y;switch(this._point){case 0:this._point\x3d1;break;case 1:this._point\x3d2;break;case 2:this._point\x3d3;this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;\ncase 3:this._point\x3d4;default:point$1(this,x,y)}this._x0\x3dthis._x1;this._x1\x3dthis._x2;this._x2\x3dx;this._y0\x3dthis._y1;this._y1\x3dthis._y2;this._y2\x3dy}};var cardinalOpen\x3dfunction custom(tension$jscomp$0){function cardinal(context){return new CardinalOpen(context,tension$jscomp$0)}cardinal.tension\x3dfunction(tension){return custom(+tension)};return cardinal}(0);CatmullRom.prototype\x3d{areaStart:function(){this._line\x3d0},areaEnd:function(){this._line\x3dNaN},lineStart:function(){this._x0\x3dthis._x1\x3dthis._x2\x3dthis._y0\x3dthis._y1\x3d\nthis._y2\x3dNaN;this._l01_a\x3dthis._l12_a\x3dthis._l23_a\x3dthis._l01_2a\x3dthis._l12_2a\x3dthis._l23_2a\x3dthis._point\x3d0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2)}(this._line||0!\x3d\x3dthis._line\x26\x261\x3d\x3d\x3dthis._point)\x26\x26this._context.closePath();this._line\x3d1-this._line},point:function(x,y){x\x3d+x;y\x3d+y;if(this._point){var x23\x3dthis._x2-x,y23\x3dthis._y2-y;this._l23_a\x3dMath.sqrt(this._l23_2a\x3dMath.pow(x23*x23+y23*y23,this._alpha))}switch(this._point){case 0:this._point\x3d\n1;this._line?this._context.lineTo(x,y):this._context.moveTo(x,y);break;case 1:this._point\x3d2;break;case 2:this._point\x3d3;default:point$2(this,x,y)}this._l01_a\x3dthis._l12_a;this._l12_a\x3dthis._l23_a;this._l01_2a\x3dthis._l12_2a;this._l12_2a\x3dthis._l23_2a;this._x0\x3dthis._x1;this._x1\x3dthis._x2;this._x2\x3dx;this._y0\x3dthis._y1;this._y1\x3dthis._y2;this._y2\x3dy}};var catmullRom\x3dfunction custom(alpha$jscomp$0){function catmullRom(context){return alpha$jscomp$0?new CatmullRom(context,alpha$jscomp$0):new Cardinal(context,0)}\ncatmullRom.alpha\x3dfunction(alpha){return custom(+alpha)};return catmullRom}(.5);CatmullRomClosed.prototype\x3d{areaStart:noop,areaEnd:noop,lineStart:function(){this._x0\x3dthis._x1\x3dthis._x2\x3dthis._x3\x3dthis._x4\x3dthis._x5\x3dthis._y0\x3dthis._y1\x3dthis._y2\x3dthis._y3\x3dthis._y4\x3dthis._y5\x3dNaN;this._l01_a\x3dthis._l12_a\x3dthis._l23_a\x3dthis._l01_2a\x3dthis._l12_2a\x3dthis._l23_2a\x3dthis._point\x3d0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3);this._context.closePath();break;case 2:this._context.lineTo(this._x3,\nthis._y3);this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(x,y){x\x3d+x;y\x3d+y;if(this._point){var x23\x3dthis._x2-x,y23\x3dthis._y2-y;this._l23_a\x3dMath.sqrt(this._l23_2a\x3dMath.pow(x23*x23+y23*y23,this._alpha))}switch(this._point){case 0:this._point\x3d1;this._x3\x3dx;this._y3\x3dy;break;case 1:this._point\x3d2;this._context.moveTo(this._x4\x3dx,this._y4\x3dy);break;case 2:this._point\x3d3;this._x5\x3dx;this._y5\x3dy;break;default:point$2(this,\nx,y)}this._l01_a\x3dthis._l12_a;this._l12_a\x3dthis._l23_a;this._l01_2a\x3dthis._l12_2a;this._l12_2a\x3dthis._l23_2a;this._x0\x3dthis._x1;this._x1\x3dthis._x2;this._x2\x3dx;this._y0\x3dthis._y1;this._y1\x3dthis._y2;this._y2\x3dy}};var catmullRomClosed\x3dfunction custom(alpha$jscomp$0){function catmullRom(context){return alpha$jscomp$0?new CatmullRomClosed(context,alpha$jscomp$0):new CardinalClosed(context,0)}catmullRom.alpha\x3dfunction(alpha){return custom(+alpha)};return catmullRom}(.5);CatmullRomOpen.prototype\x3d{areaStart:function(){this._line\x3d\n0},areaEnd:function(){this._line\x3dNaN},lineStart:function(){this._x0\x3dthis._x1\x3dthis._x2\x3dthis._y0\x3dthis._y1\x3dthis._y2\x3dNaN;this._l01_a\x3dthis._l12_a\x3dthis._l23_a\x3dthis._l01_2a\x3dthis._l12_2a\x3dthis._l23_2a\x3dthis._point\x3d0},lineEnd:function(){(this._line||0!\x3d\x3dthis._line\x26\x263\x3d\x3d\x3dthis._point)\x26\x26this._context.closePath();this._line\x3d1-this._line},point:function(x,y){x\x3d+x;y\x3d+y;if(this._point){var x23\x3dthis._x2-x,y23\x3dthis._y2-y;this._l23_a\x3dMath.sqrt(this._l23_2a\x3dMath.pow(x23*x23+y23*y23,this._alpha))}switch(this._point){case 0:this._point\x3d\n1;break;case 1:this._point\x3d2;break;case 2:this._point\x3d3;this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point\x3d4;default:point$2(this,x,y)}this._l01_a\x3dthis._l12_a;this._l12_a\x3dthis._l23_a;this._l01_2a\x3dthis._l12_2a;this._l12_2a\x3dthis._l23_2a;this._x0\x3dthis._x1;this._x1\x3dthis._x2;this._x2\x3dx;this._y0\x3dthis._y1;this._y1\x3dthis._y2;this._y2\x3dy}};var catmullRomOpen\x3dfunction custom(alpha$jscomp$0){function catmullRom(context){return alpha$jscomp$0?new CatmullRomOpen(context,\nalpha$jscomp$0):new CardinalOpen(context,0)}catmullRom.alpha\x3dfunction(alpha){return custom(+alpha)};return catmullRom}(.5);LinearClosed.prototype\x3d{areaStart:noop,areaEnd:noop,lineStart:function(){this._point\x3d0},lineEnd:function(){this._point\x26\x26this._context.closePath()},point:function(x,y){x\x3d+x;y\x3d+y;this._point?this._context.lineTo(x,y):(this._point\x3d1,this._context.moveTo(x,y))}};MonotoneX.prototype\x3d{areaStart:function(){this._line\x3d0},areaEnd:function(){this._line\x3dNaN},lineStart:function(){this._x0\x3d\nthis._x1\x3dthis._y0\x3dthis._y1\x3dthis._t0\x3dNaN;this._point\x3d0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:point$3(this,this._t0,slope2(this,this._t0))}(this._line||0!\x3d\x3dthis._line\x26\x261\x3d\x3d\x3dthis._point)\x26\x26this._context.closePath();this._line\x3d1-this._line},point:function(x,y){var t1\x3dNaN;x\x3d+x;y\x3d+y;if(x!\x3d\x3dthis._x1||y!\x3d\x3dthis._y1){switch(this._point){case 0:this._point\x3d1;this._line?this._context.lineTo(x,y):this._context.moveTo(x,y);break;case 1:this._point\x3d2;break;\ncase 2:this._point\x3d3;point$3(this,slope2(this,t1\x3dslope3(this,x,y)),t1);break;default:point$3(this,this._t0,t1\x3dslope3(this,x,y))}this._x0\x3dthis._x1;this._x1\x3dx;this._y0\x3dthis._y1;this._y1\x3dy;this._t0\x3dt1}}};(MonotoneY.prototype\x3dObject.create(MonotoneX.prototype)).point\x3dfunction(x,y){MonotoneX.prototype.point.call(this,y,x)};ReflectContext.prototype\x3d{moveTo:function(x,y){this._context.moveTo(y,x)},closePath:function(){this._context.closePath()},lineTo:function(x,y){this._context.lineTo(y,x)},bezierCurveTo:function(x1,\ny1,x2,y2,x,y){this._context.bezierCurveTo(y1,x1,y2,x2,y,x)}};Natural.prototype\x3d{areaStart:function(){this._line\x3d0},areaEnd:function(){this._line\x3dNaN},lineStart:function(){this._x\x3d[];this._y\x3d[]},lineEnd:function(){var x\x3dthis._x,y\x3dthis._y,n\x3dx.length;if(n)if(this._line?this._context.lineTo(x[0],y[0]):this._context.moveTo(x[0],y[0]),2\x3d\x3d\x3dn)this._context.lineTo(x[1],y[1]);else for(var px\x3dcontrolPoints(x),py\x3dcontrolPoints(y),i0\x3d0,i1\x3d1;i1\x3cn;++i0,++i1)this._context.bezierCurveTo(px[0][i0],py[0][i0],px[1][i0],\npy[1][i0],x[i1],y[i1]);(this._line||0!\x3d\x3dthis._line\x26\x261\x3d\x3d\x3dn)\x26\x26this._context.closePath();this._line\x3d1-this._line;this._x\x3dthis._y\x3dnull},point:function(x,y){this._x.push(+x);this._y.push(+y)}};Step.prototype\x3d{areaStart:function(){this._line\x3d0},areaEnd:function(){this._line\x3dNaN},lineStart:function(){this._x\x3dthis._y\x3dNaN;this._point\x3d0},lineEnd:function(){0\x3cthis._t\x26\x261\x3ethis._t\x26\x262\x3d\x3d\x3dthis._point\x26\x26this._context.lineTo(this._x,this._y);(this._line||0!\x3d\x3dthis._line\x26\x261\x3d\x3d\x3dthis._point)\x26\x26this._context.closePath();0\x3c\x3d\nthis._line\x26\x26(this._t\x3d1-this._t,this._line\x3d1-this._line)},point:function(x,y){x\x3d+x;y\x3d+y;switch(this._point){case 0:this._point\x3d1;this._line?this._context.lineTo(x,y):this._context.moveTo(x,y);break;case 1:this._point\x3d2;default:if(0\x3e\x3dthis._t)this._context.lineTo(this._x,y),this._context.lineTo(x,y);else{var x1\x3dthis._x*(1-this._t)+x*this._t;this._context.lineTo(x1,this._y);this._context.lineTo(x1,y)}}this._x\x3dx;this._y\x3dy}};exports.arc\x3dfunction(){function arc(){var buffer,r0\x3d+innerRadius.apply(this,arguments),\nr1\x3d+outerRadius.apply(this,arguments),a0\x3dstartAngle.apply(this,arguments)-halfPi,a1\x3dendAngle.apply(this,arguments)-halfPi,da\x3dabs(a1-a0),cw\x3da1\x3ea0;context||(context\x3dbuffer\x3dd3Path.path());if(r1\x3cr0){var r\x3dr1;r1\x3dr0;r0\x3dr}if(1E-12\x3cr1)if(da\x3etau-1E-12)context.moveTo(r1*cos(a0),r1*sin(a0)),context.arc(0,0,r1,a0,a1,!cw),1E-12\x3cr0\x26\x26(context.moveTo(r0*cos(a1),r0*sin(a1)),context.arc(0,0,r0,a1,a0,cw));else{var a01\x3da0,a11\x3da1;r\x3da0;var a10\x3da1,da0\x3dda,da1\x3dda,ap\x3dpadAngle.apply(this,arguments)/2,rp\x3d1E-12\x3cap\x26\x26(padRadius?\n+padRadius.apply(this,arguments):sqrt(r0*r0+r1*r1)),rc\x3dmin(abs(r1-r0)/2,+cornerRadius.apply(this,arguments)),rc0\x3drc,rc1\x3drc;if(1E-12\x3crp){var p0\x3dasin(rp/r0*sin(ap));ap\x3dasin(rp/r1*sin(ap));1E-12\x3c(da0-\x3d2*p0)?(p0*\x3dcw?1:-1,r+\x3dp0,a10-\x3dp0):(da0\x3d0,r\x3da10\x3d(a0+a1)/2);1E-12\x3c(da1-\x3d2*ap)?(ap*\x3dcw?1:-1,a01+\x3dap,a11-\x3dap):(da1\x3d0,a01\x3da11\x3d(a0+a1)/2)}a0\x3dr1*cos(a01);a1\x3dr1*sin(a01);p0\x3dr0*cos(a10);ap\x3dr0*sin(a10);if(1E-12\x3crc){var x11\x3dr1*cos(a11),y11\x3dr1*sin(a11),x00\x3dr0*cos(r),y00\x3dr0*sin(r);if(da\x3dda\x3cpi){var oc\x3dx00-a0;da\x3dy00-\na1;rp\x3dp0-x11;var y32\x3dap-y11,t\x3dy32*oc-rp*da;1E-12\x3et*t?oc\x3dvoid 0:(t\x3d(rp*(a1-y11)-y32*(a0-x11))/t,oc\x3d[a0+t*oc,a1+t*da]);da\x3doc}da\x26\x26(rc0\x3da0-oc[0],rc1\x3da1-oc[1],da\x3dx11-oc[0],rp\x3dy11-oc[1],rc0\x3d(rc0*da+rc1*rp)/(sqrt(rc0*rc0+rc1*rc1)*sqrt(da*da+rp*rp)),rc1\x3d1/sin((1\x3crc0?0:-1\x3erc0?pi:Math.acos(rc0))/2),oc\x3dsqrt(oc[0]*oc[0]+oc[1]*oc[1]),rc0\x3dmin(rc,(r0-oc)/(rc1-1)),rc1\x3dmin(rc,(r1-oc)/(rc1+1)))}1E-12\x3cda1?1E-12\x3crc1?(a01\x3dcornerTangents(x00,y00,a0,a1,r1,rc1,cw),a11\x3dcornerTangents(x11,y11,p0,ap,r1,rc1,cw),context.moveTo(a01.cx+\na01.x01,a01.cy+a01.y01),rc1\x3crc?context.arc(a01.cx,a01.cy,rc1,atan2(a01.y01,a01.x01),atan2(a11.y01,a11.x01),!cw):(context.arc(a01.cx,a01.cy,rc1,atan2(a01.y01,a01.x01),atan2(a01.y11,a01.x11),!cw),context.arc(0,0,r1,atan2(a01.cy+a01.y11,a01.cx+a01.x11),atan2(a11.cy+a11.y11,a11.cx+a11.x11),!cw),context.arc(a11.cx,a11.cy,rc1,atan2(a11.y11,a11.x11),atan2(a11.y01,a11.x01),!cw))):(context.moveTo(a0,a1),context.arc(0,0,r1,a01,a11,!cw)):context.moveTo(a0,a1);1E-12\x3cr0\x26\x261E-12\x3cda0?1E-12\x3crc0?(a01\x3dcornerTangents(p0,\nap,x11,y11,r0,-rc0,cw),a11\x3dcornerTangents(a0,a1,x00,y00,r0,-rc0,cw),context.lineTo(a01.cx+a01.x01,a01.cy+a01.y01),rc0\x3crc?context.arc(a01.cx,a01.cy,rc0,atan2(a01.y01,a01.x01),atan2(a11.y01,a11.x01),!cw):(context.arc(a01.cx,a01.cy,rc0,atan2(a01.y01,a01.x01),atan2(a01.y11,a01.x11),!cw),context.arc(0,0,r0,atan2(a01.cy+a01.y11,a01.cx+a01.x11),atan2(a11.cy+a11.y11,a11.cx+a11.x11),cw),context.arc(a11.cx,a11.cy,rc0,atan2(a11.y11,a11.x11),atan2(a11.y01,a11.x01),!cw))):context.arc(0,0,r0,a10,r,cw):context.lineTo(p0,\nap)}else context.moveTo(0,0);context.closePath();if(buffer)return context\x3dnull,buffer+\x22\x22||null}var innerRadius\x3darcInnerRadius,outerRadius\x3darcOuterRadius,cornerRadius\x3dconstant(0),padRadius\x3dnull,startAngle\x3darcStartAngle,endAngle\x3darcEndAngle,padAngle\x3darcPadAngle,context\x3dnull;arc.centroid\x3dfunction(){var r\x3d(+innerRadius.apply(this,arguments)+ +outerRadius.apply(this,arguments))/2,a\x3d(+startAngle.apply(this,arguments)+ +endAngle.apply(this,arguments))/2-pi/2;return[cos(a)*r,sin(a)*r]};arc.innerRadius\x3dfunction(_){return arguments.length?\n(innerRadius\x3d\x22function\x22\x3d\x3d\x3dtypeof _?_:constant(+_),arc):innerRadius};arc.outerRadius\x3dfunction(_){return arguments.length?(outerRadius\x3d\x22function\x22\x3d\x3d\x3dtypeof _?_:constant(+_),arc):outerRadius};arc.cornerRadius\x3dfunction(_){return arguments.length?(cornerRadius\x3d\x22function\x22\x3d\x3d\x3dtypeof _?_:constant(+_),arc):cornerRadius};arc.padRadius\x3dfunction(_){return arguments.length?(padRadius\x3dnull\x3d\x3d_?null:\x22function\x22\x3d\x3d\x3dtypeof _?_:constant(+_),arc):padRadius};arc.startAngle\x3dfunction(_){return arguments.length?(startAngle\x3d\n\x22function\x22\x3d\x3d\x3dtypeof _?_:constant(+_),arc):startAngle};arc.endAngle\x3dfunction(_){return arguments.length?(endAngle\x3d\x22function\x22\x3d\x3d\x3dtypeof _?_:constant(+_),arc):endAngle};arc.padAngle\x3dfunction(_){return arguments.length?(padAngle\x3d\x22function\x22\x3d\x3d\x3dtypeof _?_:constant(+_),arc):padAngle};arc.context\x3dfunction(_){return arguments.length?(context\x3dnull\x3d\x3d_?null:_,arc):context};return arc};exports.area\x3darea$jscomp$0;exports.areaRadial\x3dareaRadial;exports.curveBasis\x3dfunction(context){return new Basis(context)};exports.curveBasisClosed\x3d\nfunction(context){return new BasisClosed(context)};exports.curveBasisOpen\x3dfunction(context){return new BasisOpen(context)};exports.curveBundle\x3dbundle;exports.curveCardinal\x3dcardinal;exports.curveCardinalClosed\x3dcardinalClosed;exports.curveCardinalOpen\x3dcardinalOpen;exports.curveCatmullRom\x3dcatmullRom;exports.curveCatmullRomClosed\x3dcatmullRomClosed;exports.curveCatmullRomOpen\x3dcatmullRomOpen;exports.curveLinear\x3dcurveLinear;exports.curveLinearClosed\x3dfunction(context){return new LinearClosed(context)};exports.curveMonotoneX\x3d\nfunction(context){return new MonotoneX(context)};exports.curveMonotoneY\x3dfunction(context){return new MonotoneY(context)};exports.curveNatural\x3dfunction(context){return new Natural(context)};exports.curveStep\x3dfunction(context){return new Step(context,.5)};exports.curveStepAfter\x3dfunction(context){return new Step(context,1)};exports.curveStepBefore\x3dfunction(context){return new Step(context,0)};exports.line\x3dline$jscomp$0;exports.lineRadial\x3dlineRadial$1;exports.linkHorizontal\x3dfunction(){return link$jscomp$0(curveHorizontal)};\nexports.linkRadial\x3dfunction(){var l\x3dlink$jscomp$0(curveRadial$1);l.angle\x3dl.x;delete l.x;l.radius\x3dl.y;delete l.y;return l};exports.linkVertical\x3dfunction(){return link$jscomp$0(curveVertical)};exports.pie\x3dfunction(){function pie(data){var i$jscomp$0,n\x3ddata.length;var j$jscomp$0\x3d0;var index\x3dArray(n),arcs\x3dArray(n),a0\x3d+startAngle.apply(this,arguments);var k\x3dMath.min(tau,Math.max(-tau,endAngle.apply(this,arguments)-a0));var p\x3dMath.min(Math.abs(k)/n,padAngle.apply(this,arguments)),pa\x3dp*(0\x3ek?-1:1),v;for(i$jscomp$0\x3d\n0;i$jscomp$0\x3cn;++i$jscomp$0)0\x3c(v\x3darcs[index[i$jscomp$0]\x3di$jscomp$0]\x3d+value(data[i$jscomp$0],i$jscomp$0,data))\x26\x26(j$jscomp$0+\x3dv);null!\x3dsortValues?index.sort(function(i,j){return sortValues(arcs[i],arcs[j])}):null!\x3dsort\x26\x26index.sort(function(i,j){return sort(data[i],data[j])});i$jscomp$0\x3d0;for(k\x3dj$jscomp$0?(k-n*pa)/j$jscomp$0:0;i$jscomp$0\x3cn;++i$jscomp$0,a0\x3da1){j$jscomp$0\x3dindex[i$jscomp$0];v\x3darcs[j$jscomp$0];var a1\x3da0+(0\x3cv?v*k:0)+pa;arcs[j$jscomp$0]\x3d{data:data[j$jscomp$0],index:i$jscomp$0,value:v,startAngle:a0,\nendAngle:a1,padAngle:p}}return arcs}var value\x3didentity,sortValues\x3ddescending,sort\x3dnull,startAngle\x3dconstant(0),endAngle\x3dconstant(tau),padAngle\x3dconstant(0);pie.value\x3dfunction(_){return arguments.length?(value\x3d\x22function\x22\x3d\x3d\x3dtypeof _?_:constant(+_),pie):value};pie.sortValues\x3dfunction(_){return arguments.length?(sortValues\x3d_,sort\x3dnull,pie):sortValues};pie.sort\x3dfunction(_){return arguments.length?(sort\x3d_,sortValues\x3dnull,pie):sort};pie.startAngle\x3dfunction(_){return arguments.length?(startAngle\x3d\x22function\x22\x3d\x3d\x3d\ntypeof _?_:constant(+_),pie):startAngle};pie.endAngle\x3dfunction(_){return arguments.length?(endAngle\x3d\x22function\x22\x3d\x3d\x3dtypeof _?_:constant(+_),pie):endAngle};pie.padAngle\x3dfunction(_){return arguments.length?(padAngle\x3d\x22function\x22\x3d\x3d\x3dtypeof _?_:constant(+_),pie):padAngle};return pie};exports.pointRadial\x3dpointRadial;exports.radialArea\x3dareaRadial;exports.radialLine\x3dlineRadial$1;exports.stack\x3dfunction(){function stack(data){var kz\x3dkeys.apply(this,arguments),i,m\x3ddata.length,n\x3dkz.length,sz\x3dArray(n);for(i\x3d0;i\x3cn;++i){for(var ki\x3d\nkz[i],si\x3dsz[i]\x3dArray(m),j\x3d0,sij;j\x3cm;++j)si[j]\x3dsij\x3d[0,+value(data[j],ki,j,data)],sij.data\x3ddata[j];si.key\x3dki}i\x3d0;for(kz\x3dorder(sz);i\x3cn;++i)sz[kz[i]].index\x3di;offset(sz,kz);return sz}var keys\x3dconstant([]),order\x3dnone$1,offset\x3dnone,value\x3dstackValue;stack.keys\x3dfunction(_){return arguments.length?(keys\x3d\x22function\x22\x3d\x3d\x3dtypeof _?_:constant(slice.call(_)),stack):keys};stack.value\x3dfunction(_){return arguments.length?(value\x3d\x22function\x22\x3d\x3d\x3dtypeof _?_:constant(+_),stack):value};stack.order\x3dfunction(_){return arguments.length?\n(order\x3dnull\x3d\x3d_?none$1:\x22function\x22\x3d\x3d\x3dtypeof _?_:constant(slice.call(_)),stack):order};stack.offset\x3dfunction(_){return arguments.length?(offset\x3dnull\x3d\x3d_?none:_,stack):offset};return stack};exports.stackOffsetDiverging\x3dfunction(series,order){if(0\x3c(n\x3dseries.length))for(var i,j\x3d0,d,dy,yp,yn,n,m\x3dseries[order[0]].length;j\x3cm;++j)for(i\x3dyp\x3dyn\x3d0;i\x3cn;++i)0\x3c(dy\x3d(d\x3dseries[order[i]][j])[1]-d[0])?(d[0]\x3dyp,d[1]\x3dyp+\x3ddy):0\x3edy?(d[1]\x3dyn,d[0]\x3dyn+\x3ddy):(d[0]\x3d0,d[1]\x3ddy)};exports.stackOffsetExpand\x3dfunction(series,order){if(0\x3c\n(n\x3dseries.length)){for(var i,n,j\x3d0,m\x3dseries[0].length,y;j\x3cm;++j){for(y\x3di\x3d0;i\x3cn;++i)y+\x3dseries[i][j][1]||0;if(y)for(i\x3d0;i\x3cn;++i)series[i][j][1]/\x3dy}none(series,order)}};exports.stackOffsetNone\x3dnone;exports.stackOffsetSilhouette\x3dfunction(series,order){if(0\x3c(n\x3dseries.length)){for(var j\x3d0,s0\x3dseries[order[0]],n,m\x3ds0.length;j\x3cm;++j){for(var i\x3d0,y\x3d0;i\x3cn;++i)y+\x3dseries[i][j][1]||0;s0[j][1]+\x3ds0[j][0]\x3d-y/2}none(series,order)}};exports.stackOffsetWiggle\x3dfunction(series,order){if(0\x3c(n\x3dseries.length)\x26\x260\x3c(m\x3d(s0\x3dseries[order[0]]).length)){for(var y\x3d\n0,j\x3d1,s0,m,n;j\x3cm;++j){for(var i\x3d0,s1\x3d0,s2\x3d0;i\x3cn;++i){var si\x3dseries[order[i]],sij0\x3dsi[j][1]||0;si\x3d(sij0-(si[j-1][1]||0))/2;for(var k\x3d0;k\x3ci;++k){var sk\x3dseries[order[k]];si+\x3d(sk[j][1]||0)-(sk[j-1][1]||0)}s1+\x3dsij0;s2+\x3dsi*sij0}s0[j-1][1]+\x3ds0[j-1][0]\x3dy;s1\x26\x26(y-\x3ds2/s1)}s0[j-1][1]+\x3ds0[j-1][0]\x3dy;none(series,order)}};exports.stackOrderAppearance\x3dappearance;exports.stackOrderAscending\x3dascending;exports.stackOrderDescending\x3dfunction(series){return ascending(series).reverse()};exports.stackOrderInsideOut\x3dfunction(series){var n\x3d\nseries.length,sums\x3dseries.map(sum),order\x3dappearance(series),top\x3d0,bottom\x3d0,tops\x3d[],bottoms\x3d[];for(series\x3d0;series\x3cn;++series){var j\x3dorder[series];top\x3cbottom?(top+\x3dsums[j],tops.push(j)):(bottom+\x3dsums[j],bottoms.push(j))}return bottoms.reverse().concat(tops)};exports.stackOrderNone\x3dnone$1;exports.stackOrderReverse\x3dfunction(series){return none$1(series).reverse()};exports.symbol\x3dfunction(){function symbol(){var buffer;context||(context\x3dbuffer\x3dd3Path.path());type.apply(this,arguments).draw(context,+size.apply(this,\narguments));if(buffer)return context\x3dnull,buffer+\x22\x22||null}var type\x3dconstant(circle),size\x3dconstant(64),context\x3dnull;symbol.type\x3dfunction(_){return arguments.length?(type\x3d\x22function\x22\x3d\x3d\x3dtypeof _?_:constant(_),symbol):type};symbol.size\x3dfunction(_){return arguments.length?(size\x3d\x22function\x22\x3d\x3d\x3dtypeof _?_:constant(+_),symbol):size};symbol.context\x3dfunction(_){return arguments.length?(context\x3dnull\x3d\x3d_?null:_,symbol):context};return symbol};exports.symbolCircle\x3dcircle;exports.symbolCross\x3dcross;exports.symbolDiamond\x3d\ndiamond;exports.symbolSquare\x3dsquare;exports.symbolStar\x3dkr;exports.symbolTriangle\x3dtriangle;exports.symbolWye\x3dwye;exports.symbols\x3dsymbols;Object.defineProperty(exports,\x22__esModule\x22,{value:!0})})}");
SHADOW_ENV.evalLoad("module$node_modules$vega_canvas$build$vega_canvas.js", true , "shadow$provide.module$node_modules$vega_canvas$build$vega_canvas\x3dfunction(global$jscomp$0,require,module,exports$jscomp$0){(function(global,factory){\x22object\x22\x3d\x3d\x3dtypeof exports$jscomp$0\x26\x26\x22undefined\x22!\x3d\x3dtypeof module?factory(exports$jscomp$0):\x22function\x22\x3d\x3d\x3dtypeof define\x26\x26define.amd?define([\x22exports\x22],factory):(global\x3dglobal||self,factory(global.vega\x3d{}))})(this,function(exports){function domCanvas(w,h){if(\x22undefined\x22!\x3d\x3dtypeof document\x26\x26document.createElement){var c\x3ddocument.createElement(\x22canvas\x22);if(c\x26\x26\nc.getContext)return c.width\x3dw,c.height\x3dh,c}return null}exports.canvas\x3ddomCanvas;exports.domCanvas\x3ddomCanvas;exports.image\x3dfunction(){return\x22undefined\x22!\x3d\x3dtypeof Image?Image:null};Object.defineProperty(exports,\x22__esModule\x22,{value:!0})})}");
SHADOW_ENV.evalLoad("module$node_modules$d3_color$dist$d3_color.js", true , "shadow$provide.module$node_modules$d3_color$dist$d3_color\x3dfunction(global$jscomp$0,require,module,exports$jscomp$0){(function(global,factory){\x22object\x22\x3d\x3d\x3dtypeof exports$jscomp$0\x26\x26\x22undefined\x22!\x3d\x3dtypeof module?factory(exports$jscomp$0):\x22function\x22\x3d\x3d\x3dtypeof define\x26\x26define.amd?define([\x22exports\x22],factory):(global\x3dglobal||self,factory(global.d3\x3dglobal.d3||{}))})(this,function(exports){function define(constructor,factory,prototype){constructor.prototype\x3dfactory.prototype\x3dprototype;prototype.constructor\x3dconstructor}\nfunction extend(parent,definition){parent\x3dObject.create(parent.prototype);for(var key in definition)parent[key]\x3ddefinition[key];return parent}function Color(){}function color_formatHex(){return this.rgb().formatHex()}function color_formatRgb(){return this.rgb().formatRgb()}function color(format){var m,l;format\x3d(format+\x22\x22).trim().toLowerCase();return(m\x3dreHex.exec(format))?(l\x3dm[1].length,m\x3dparseInt(m[1],16),6\x3d\x3d\x3dl?rgbn(m):3\x3d\x3d\x3dl?new Rgb(m\x3e\x3e8\x2615|m\x3e\x3e4\x26240,m\x3e\x3e4\x2615|m\x26240,(m\x2615)\x3c\x3c4|m\x2615,1):8\x3d\x3d\x3dl?rgba(m\x3e\x3e24\x26\n255,m\x3e\x3e16\x26255,m\x3e\x3e8\x26255,(m\x26255)/255):4\x3d\x3d\x3dl?rgba(m\x3e\x3e12\x2615|m\x3e\x3e8\x26240,m\x3e\x3e8\x2615|m\x3e\x3e4\x26240,m\x3e\x3e4\x2615|m\x26240,((m\x2615)\x3c\x3c4|m\x2615)/255):null):(m\x3dreRgbInteger.exec(format))?new Rgb(m[1],m[2],m[3],1):(m\x3dreRgbPercent.exec(format))?new Rgb(255*m[1]/100,255*m[2]/100,255*m[3]/100,1):(m\x3dreRgbaInteger.exec(format))?rgba(m[1],m[2],m[3],m[4]):(m\x3dreRgbaPercent.exec(format))?rgba(255*m[1]/100,255*m[2]/100,255*m[3]/100,m[4]):(m\x3dreHslPercent.exec(format))?hsla(m[1],m[2]/100,m[3]/100,1):(m\x3dreHslaPercent.exec(format))?hsla(m[1],m[2]/\n100,m[3]/100,m[4]):named.hasOwnProperty(format)?rgbn(named[format]):\x22transparent\x22\x3d\x3d\x3dformat?new Rgb(NaN,NaN,NaN,0):null}function rgbn(n){return new Rgb(n\x3e\x3e16\x26255,n\x3e\x3e8\x26255,n\x26255,1)}function rgba(r,g,b,a){0\x3e\x3da\x26\x26(r\x3dg\x3db\x3dNaN);return new Rgb(r,g,b,a)}function rgbConvert(o){o instanceof Color||(o\x3dcolor(o));if(!o)return new Rgb;o\x3do.rgb();return new Rgb(o.r,o.g,o.b,o.opacity)}function rgb(r,g,b,opacity){return 1\x3d\x3d\x3darguments.length?rgbConvert(r):new Rgb(r,g,b,null\x3d\x3dopacity?1:opacity)}function Rgb(r,g,b,opacity){this.r\x3d\n+r;this.g\x3d+g;this.b\x3d+b;this.opacity\x3d+opacity}function rgb_formatHex(){return\x22#\x22+hex(this.r)+hex(this.g)+hex(this.b)}function rgb_formatRgb(){var a\x3dthis.opacity;a\x3disNaN(a)?1:Math.max(0,Math.min(1,a));return(1\x3d\x3d\x3da?\x22rgb(\x22:\x22rgba(\x22)+Math.max(0,Math.min(255,Math.round(this.r)||0))+\x22, \x22+Math.max(0,Math.min(255,Math.round(this.g)||0))+\x22, \x22+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1\x3d\x3d\x3da?\x22)\x22:\x22, \x22+a+\x22)\x22)}function hex(value){value\x3dMath.max(0,Math.min(255,Math.round(value)||0));return(16\x3evalue?\x220\x22:\x22\x22)+\nvalue.toString(16)}function hsla(h,s,l,a){0\x3e\x3da?h\x3ds\x3dl\x3dNaN:0\x3e\x3dl||1\x3c\x3dl?h\x3ds\x3dNaN:0\x3e\x3ds\x26\x26(h\x3dNaN);return new Hsl(h,s,l,a)}function hslConvert(o){if(o instanceof Hsl)return new Hsl(o.h,o.s,o.l,o.opacity);o instanceof Color||(o\x3dcolor(o));if(!o)return new Hsl;if(o instanceof Hsl)return o;o\x3do.rgb();var r\x3do.r/255,g\x3do.g/255,b\x3do.b/255,min\x3dMath.min(r,g,b),max\x3dMath.max(r,g,b),h\x3dNaN,s\x3dmax-min,l\x3d(max+min)/2;s?(h\x3dr\x3d\x3d\x3dmax?(g-b)/s+6*(g\x3cb):g\x3d\x3d\x3dmax?(b-r)/s+2:(r-g)/s+4,s/\x3d.5\x3el?max+min:2-max-min,h*\x3d60):s\x3d0\x3cl\x26\x261\x3el?0:h;return new Hsl(h,\ns,l,o.opacity)}function hsl(h,s,l,opacity){return 1\x3d\x3d\x3darguments.length?hslConvert(h):new Hsl(h,s,l,null\x3d\x3dopacity?1:opacity)}function Hsl(h,s,l,opacity){this.h\x3d+h;this.s\x3d+s;this.l\x3d+l;this.opacity\x3d+opacity}function hsl2rgb(h,m1,m2){return 255*(60\x3eh?m1+(m2-m1)*h/60:180\x3eh?m2:240\x3eh?m1+(m2-m1)*(240-h)/60:m1)}function labConvert(o){if(o instanceof Lab)return new Lab(o.l,o.a,o.b,o.opacity);if(o instanceof Hcl)return hcl2lab(o);o instanceof Rgb||(o\x3drgbConvert(o));var r\x3drgb2lrgb(o.r),g\x3drgb2lrgb(o.g),b\x3drgb2lrgb(o.b),\ny\x3dxyz2lab(.2225045*r+.7168786*g+.0606169*b);if(r\x3d\x3d\x3dg\x26\x26g\x3d\x3d\x3db)var x\x3dr\x3dy;else x\x3dxyz2lab((.4360747*r+.3850649*g+.1430804*b)/.96422),r\x3dxyz2lab((.0139322*r+.0971045*g+.7141733*b)/.82521);return new Lab(116*y-16,500*(x-y),200*(y-r),o.opacity)}function lab(l,a,b,opacity){return 1\x3d\x3d\x3darguments.length?labConvert(l):new Lab(l,a,b,null\x3d\x3dopacity?1:opacity)}function Lab(l,a,b,opacity){this.l\x3d+l;this.a\x3d+a;this.b\x3d+b;this.opacity\x3d+opacity}function xyz2lab(t){return t\x3et3?Math.pow(t,1/3):t/t2+t0}function lab2xyz(t){return t\x3e\nt1?t*t*t:t2*(t-t0)}function lrgb2rgb(x){return 255*(.0031308\x3e\x3dx?12.92*x:1.055*Math.pow(x,1/2.4)-.055)}function rgb2lrgb(x){return.04045\x3e\x3d(x/\x3d255)?x/12.92:Math.pow((x+.055)/1.055,2.4)}function hclConvert(o){if(o instanceof Hcl)return new Hcl(o.h,o.c,o.l,o.opacity);o instanceof Lab||(o\x3dlabConvert(o));if(0\x3d\x3d\x3do.a\x26\x260\x3d\x3d\x3do.b)return new Hcl(NaN,0\x3co.l\x26\x26100\x3eo.l?0:NaN,o.l,o.opacity);var h\x3dMath.atan2(o.b,o.a)*rad2deg;return new Hcl(0\x3eh?h+360:h,Math.sqrt(o.a*o.a+o.b*o.b),o.l,o.opacity)}function hcl(h,c,l,opacity){return 1\x3d\x3d\x3d\narguments.length?hclConvert(h):new Hcl(h,c,l,null\x3d\x3dopacity?1:opacity)}function Hcl(h,c,l,opacity){this.h\x3d+h;this.c\x3d+c;this.l\x3d+l;this.opacity\x3d+opacity}function hcl2lab(o){if(isNaN(o.h))return new Lab(o.l,0,0,o.opacity);var h\x3do.h*deg2rad;return new Lab(o.l,Math.cos(h)*o.c,Math.sin(h)*o.c,o.opacity)}function cubehelix(h,s,l$jscomp$0,opacity){if(1\x3d\x3d\x3darguments.length){var JSCompiler_temp\x3dh;if(JSCompiler_temp instanceof Cubehelix)JSCompiler_temp\x3dnew Cubehelix(JSCompiler_temp.h,JSCompiler_temp.s,JSCompiler_temp.l,\nJSCompiler_temp.opacity);else{JSCompiler_temp instanceof Rgb||(JSCompiler_temp\x3drgbConvert(JSCompiler_temp));var g\x3dJSCompiler_temp.g/255,b\x3dJSCompiler_temp.b/255,l\x3d(BC_DA*b+JSCompiler_temp.r/255*-1.7884503806-3.5172982438*g)/(BC_DA+-1.7884503806-3.5172982438);b-\x3dl;var k\x3d(1.97294*(g-l)- -.29227*b)/-.90649;b\x3d(g\x3dMath.sqrt(k*k+b*b)/(1.97294*l*(1-l)))?Math.atan2(k,b)*rad2deg-120:NaN;JSCompiler_temp\x3dnew Cubehelix(0\x3eb?b+360:b,g,l,JSCompiler_temp.opacity)}}else JSCompiler_temp\x3dnew Cubehelix(h,s,l$jscomp$0,\nnull\x3d\x3dopacity?1:opacity);return JSCompiler_temp}function Cubehelix(h,s,l,opacity){this.h\x3d+h;this.s\x3d+s;this.l\x3d+l;this.opacity\x3d+opacity}var brighter\x3d1/.7,reHex\x3d/^#([0-9a-f]{3,8})$/,reRgbInteger\x3d/^rgb\\(\\s*([+-]?\\d+)\\s*,\\s*([+-]?\\d+)\\s*,\\s*([+-]?\\d+)\\s*\\)$/,reRgbPercent\x3d/^rgb\\(\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*,\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*,\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*\\)$/,reRgbaInteger\x3d/^rgba\\(\\s*([+-]?\\d+)\\s*,\\s*([+-]?\\d+)\\s*,\\s*([+-]?\\d+)\\s*,\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*\\)$/,\nreRgbaPercent\x3d/^rgba\\(\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*,\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*,\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*,\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*\\)$/,reHslPercent\x3d/^hsl\\(\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*,\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*,\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*\\)$/,reHslaPercent\x3d/^hsla\\(\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*,\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*,\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*,\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*\\)$/,\nnamed\x3d{aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,\ndarkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,\nhotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,\nlinen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,\npalevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,\nturquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};define(Color,color,{copy:function(channels){return Object.assign(new this.constructor,this,channels)},displayable:function(){return this.rgb().displayable()},hex:color_formatHex,formatHex:color_formatHex,formatHsl:function(){return hslConvert(this).formatHsl()},formatRgb:color_formatRgb,toString:color_formatRgb});define(Rgb,rgb,extend(Color,{brighter:function(k){k\x3dnull\x3d\x3dk?brighter:\nMath.pow(brighter,k);return new Rgb(this.r*k,this.g*k,this.b*k,this.opacity)},darker:function(k){k\x3dnull\x3d\x3dk?.7:Math.pow(.7,k);return new Rgb(this.r*k,this.g*k,this.b*k,this.opacity)},rgb:function(){return this},displayable:function(){return-.5\x3c\x3dthis.r\x26\x26255.5\x3ethis.r\x26\x26-.5\x3c\x3dthis.g\x26\x26255.5\x3ethis.g\x26\x26-.5\x3c\x3dthis.b\x26\x26255.5\x3ethis.b\x26\x260\x3c\x3dthis.opacity\x26\x261\x3e\x3dthis.opacity},hex:rgb_formatHex,formatHex:rgb_formatHex,formatRgb:rgb_formatRgb,toString:rgb_formatRgb}));define(Hsl,hsl,extend(Color,{brighter:function(k){k\x3dnull\x3d\x3d\nk?brighter:Math.pow(brighter,k);return new Hsl(this.h,this.s,this.l*k,this.opacity)},darker:function(k){k\x3dnull\x3d\x3dk?.7:Math.pow(.7,k);return new Hsl(this.h,this.s,this.l*k,this.opacity)},rgb:function(){var h\x3dthis.h%360+360*(0\x3ethis.h),s\x3disNaN(h)||isNaN(this.s)?0:this.s,l\x3dthis.l;s\x3dl+(.5\x3el?l:1-l)*s;l\x3d2*l-s;return new Rgb(hsl2rgb(240\x3c\x3dh?h-240:h+120,l,s),hsl2rgb(h,l,s),hsl2rgb(120\x3eh?h+240:h-120,l,s),this.opacity)},displayable:function(){return(0\x3c\x3dthis.s\x26\x261\x3e\x3dthis.s||isNaN(this.s))\x26\x260\x3c\x3dthis.l\x26\x261\x3e\x3dthis.l\x26\x26\n0\x3c\x3dthis.opacity\x26\x261\x3e\x3dthis.opacity},formatHsl:function(){var a\x3dthis.opacity;a\x3disNaN(a)?1:Math.max(0,Math.min(1,a));return(1\x3d\x3d\x3da?\x22hsl(\x22:\x22hsla(\x22)+(this.h||0)+\x22, \x22+100*(this.s||0)+\x22%, \x22+100*(this.l||0)+\x22%\x22+(1\x3d\x3d\x3da?\x22)\x22:\x22, \x22+a+\x22)\x22)}}));var deg2rad\x3dMath.PI/180,rad2deg\x3d180/Math.PI,t0\x3d4/29,t1\x3d6/29,t2\x3d3*t1*t1,t3\x3dt1*t1*t1;define(Lab,lab,extend(Color,{brighter:function(k){return new Lab(this.l+18*(null\x3d\x3dk?1:k),this.a,this.b,this.opacity)},darker:function(k){return new Lab(this.l-18*(null\x3d\x3dk?1:k),this.a,this.b,\nthis.opacity)},rgb:function(){var y\x3d(this.l+16)/116,x\x3disNaN(this.a)?y:y+this.a/500,z\x3disNaN(this.b)?y:y-this.b/200;x\x3d.96422*lab2xyz(x);y\x3d1*lab2xyz(y);z\x3d.82521*lab2xyz(z);return new Rgb(lrgb2rgb(3.1338561*x-1.6168667*y-.4906146*z),lrgb2rgb(-.9787684*x+1.9161415*y+.033454*z),lrgb2rgb(.0719453*x-.2289914*y+1.4052427*z),this.opacity)}}));define(Hcl,hcl,extend(Color,{brighter:function(k){return new Hcl(this.h,this.c,this.l+18*(null\x3d\x3dk?1:k),this.opacity)},darker:function(k){return new Hcl(this.h,this.c,\nthis.l-18*(null\x3d\x3dk?1:k),this.opacity)},rgb:function(){return hcl2lab(this).rgb()}}));var BC_DA\x3d1.78277*-.29227-.1347134789;define(Cubehelix,cubehelix,extend(Color,{brighter:function(k){k\x3dnull\x3d\x3dk?brighter:Math.pow(brighter,k);return new Cubehelix(this.h,this.s,this.l*k,this.opacity)},darker:function(k){k\x3dnull\x3d\x3dk?.7:Math.pow(.7,k);return new Cubehelix(this.h,this.s,this.l*k,this.opacity)},rgb:function(){var h\x3disNaN(this.h)?0:(this.h+120)*deg2rad,l\x3d+this.l,a\x3disNaN(this.s)?0:this.s*l*(1-l),cosh\x3dMath.cos(h);\nh\x3dMath.sin(h);return new Rgb(255*(l+a*(-.14861*cosh+1.78277*h)),255*(l+a*(-.29227*cosh+-.90649*h)),255*(l+1.97294*a*cosh),this.opacity)}}));exports.color\x3dcolor;exports.cubehelix\x3dcubehelix;exports.gray\x3dfunction(l,opacity){return new Lab(l,0,0,null\x3d\x3dopacity?1:opacity)};exports.hcl\x3dhcl;exports.hsl\x3dhsl;exports.lab\x3dlab;exports.lch\x3dfunction(l,c,h,opacity){return 1\x3d\x3d\x3darguments.length?hclConvert(l):new Hcl(h,c,l,null\x3d\x3dopacity?1:opacity)};exports.rgb\x3drgb;Object.defineProperty(exports,\x22__esModule\x22,{value:!0})})}");
SHADOW_ENV.evalLoad("module$node_modules$d3_interpolate$dist$d3_interpolate.js", true , "shadow$provide.module$node_modules$d3_interpolate$dist$d3_interpolate\x3dfunction(global$jscomp$0,require,module,exports$jscomp$0){(function(global,factory){\x22object\x22\x3d\x3d\x3dtypeof exports$jscomp$0\x26\x26\x22undefined\x22!\x3d\x3dtypeof module?factory(exports$jscomp$0,require(\x22module$node_modules$d3_color$dist$d3_color\x22)):\x22function\x22\x3d\x3d\x3dtypeof define\x26\x26define.amd?define([\x22exports\x22,\x22d3-color\x22],factory):(global\x3dglobal||self,factory(global.d3\x3dglobal.d3||{},global.d3))})(this,function(exports,d3Color){function basis(t1,v0,v1,v2,\nv3){var t2\x3dt1*t1,t3\x3dt2*t1;return((1-3*t1+3*t2-t3)*v0+(4-6*t2+3*t3)*v1+(1+3*t1+3*t2-3*t3)*v2+t3*v3)/6}function basis$1(values){var n\x3dvalues.length-1;return function(t){var i\x3d0\x3e\x3dt?t\x3d0:1\x3c\x3dt?(t\x3d1,n-1):Math.floor(t*n),v1\x3dvalues[i],v2\x3dvalues[i+1];return basis((t-i/n)*n,0\x3ci?values[i-1]:2*v1-v2,v1,v2,i\x3cn-1?values[i+2]:2*v2-v1)}}function basisClosed(values){var n\x3dvalues.length;return function(t){var i\x3dMath.floor((0\x3e(t%\x3d1)?++t:t)*n);return basis((t-i/n)*n,values[(i+n-1)%n],values[i%n],values[(i+1)%n],values[(i+\n2)%n])}}function constant(x){return function(){return x}}function linear(a,d){return function(t){return a+t*d}}function exponential(a,b,y){return a\x3dMath.pow(a,y),b\x3dMath.pow(b,y)-a,y\x3d1/y,function(t){return Math.pow(a+t*b,y)}}function hue(a,b){var d\x3db-a;return d?linear(a,180\x3cd||-180\x3ed?d-360*Math.round(d/360):d):constant(isNaN(a)?b:a)}function gamma(y){return 1\x3d\x3d\x3d(y\x3d+y)?nogamma:function(a,b){return b-a?exponential(a,b,y):constant(isNaN(a)?b:a)}}function nogamma(a,b){var d\x3db-a;return d?linear(a,d):constant(isNaN(a)?\nb:a)}function rgbSpline(spline){return function(colors){var n\x3dcolors.length,r\x3dArray(n),g\x3dArray(n),b\x3dArray(n),i;for(i\x3d0;i\x3cn;++i){var color\x3dd3Color.rgb(colors[i]);r[i]\x3dcolor.r||0;g[i]\x3dcolor.g||0;b[i]\x3dcolor.b||0}r\x3dspline(r);g\x3dspline(g);b\x3dspline(b);color.opacity\x3d1;return function(t){color.r\x3dr(t);color.g\x3dg(t);color.b\x3db(t);return color+\x22\x22}}}function numberArray(a,b){b||(b\x3d[]);var n\x3da?Math.min(b.length,a.length):0,c\x3db.slice(),i;return function(t){for(i\x3d0;i\x3cn;++i)c[i]\x3da[i]*(1-t)+b[i]*t;return c}}function isNumberArray(x){return ArrayBuffer.isView(x)\x26\x26\n!(x instanceof DataView)}function genericArray(a,b){var nb\x3db?b.length:0,na\x3da?Math.min(nb,a.length):0,x\x3dArray(na),c\x3dArray(nb),i;for(i\x3d0;i\x3cna;++i)x[i]\x3dvalue$jscomp$0(a[i],b[i]);for(;i\x3cnb;++i)c[i]\x3db[i];return function(t){for(i\x3d0;i\x3cna;++i)c[i]\x3dx[i](t);return c}}function date(a,b){var d\x3dnew Date;return a\x3d+a,b\x3d+b,function(t){return d.setTime(a*(1-t)+b*t),d}}function number(a,b){return a\x3d+a,b\x3d+b,function(t){return a*(1-t)+b*t}}function object(a,b){var i\x3d{},c\x3d{},k;if(null\x3d\x3d\x3da||\x22object\x22!\x3d\x3dtypeof a)a\x3d{};if(null\x3d\x3d\x3d\nb||\x22object\x22!\x3d\x3dtypeof b)b\x3d{};for(k in b)k in a?i[k]\x3dvalue$jscomp$0(a[k],b[k]):c[k]\x3db[k];return function(t){for(k in i)c[k]\x3di[k](t);return c}}function zero(b){return function(){return b}}function one(b){return function(t){return b(t)+\x22\x22}}function string(a,b){var bi\x3dreA.lastIndex\x3dreB.lastIndex\x3d0,am,bm,bs,i$jscomp$0\x3d-1,s\x3d[],q\x3d[];a+\x3d\x22\x22;for(b+\x3d\x22\x22;(am\x3dreA.exec(a))\x26\x26(bm\x3dreB.exec(b));)(bs\x3dbm.index)\x3ebi\x26\x26(bs\x3db.slice(bi,bs),s[i$jscomp$0]?s[i$jscomp$0]+\x3dbs:s[++i$jscomp$0]\x3dbs),(am\x3dam[0])\x3d\x3d\x3d(bm\x3dbm[0])?s[i$jscomp$0]?\ns[i$jscomp$0]+\x3dbm:s[++i$jscomp$0]\x3dbm:(s[++i$jscomp$0]\x3dnull,q.push({i:i$jscomp$0,x:number(am,bm)})),bi\x3dreB.lastIndex;bi\x3cb.length\x26\x26(bs\x3db.slice(bi),s[i$jscomp$0]?s[i$jscomp$0]+\x3dbs:s[++i$jscomp$0]\x3dbs);return 2\x3es.length?q[0]?one(q[0].x):zero(b):(b\x3dq.length,function(t){for(var i\x3d0,o;i\x3cb;++i)s[(o\x3dq[i]).i]\x3do.x(t);return s.join(\x22\x22)})}function value$jscomp$0(a,b){var t\x3dtypeof b,c;return null\x3d\x3db||\x22boolean\x22\x3d\x3d\x3dt?constant(b):(\x22number\x22\x3d\x3d\x3dt?number:\x22string\x22\x3d\x3d\x3dt?(c\x3dd3Color.color(b))?(b\x3dc,rgb$jscomp$0):string:b instanceof\nd3Color.color?rgb$jscomp$0:b instanceof Date?date:isNumberArray(b)?numberArray:Array.isArray(b)?genericArray:\x22function\x22!\x3d\x3dtypeof b.valueOf\x26\x26\x22function\x22!\x3d\x3dtypeof b.toString||isNaN(b)?object:number)(a,b)}function decompose(a,b,c,d,e,f){var scaleX,scaleY,skewX;if(scaleX\x3dMath.sqrt(a*a+b*b))a/\x3dscaleX,b/\x3dscaleX;if(skewX\x3da*c+b*d)c-\x3da*skewX,d-\x3db*skewX;if(scaleY\x3dMath.sqrt(c*c+d*d))c/\x3dscaleY,d/\x3dscaleY,skewX/\x3dscaleY;a*d\x3cb*c\x26\x26(a\x3d-a,b\x3d-b,skewX\x3d-skewX,scaleX\x3d-scaleX);return{translateX:e,translateY:f,rotate:Math.atan2(b,\na)*degrees,skewX:Math.atan(skewX)*degrees,scaleX:scaleX,scaleY:scaleY}}function interpolateTransform(parse,pxComma,pxParen,degParen){function pop(s){return s.length?s.pop()+\x22 \x22:\x22\x22}function translate(xa,ya,xb,yb,s,q){xa!\x3d\x3dxb||ya!\x3d\x3dyb?(s\x3ds.push(\x22translate(\x22,null,pxComma,null,pxParen),q.push({i:s-4,x:number(xa,xb)},{i:s-2,x:number(ya,yb)})):(xb||yb)\x26\x26s.push(\x22translate(\x22+xb+pxComma+yb+pxParen)}function rotate(a,b,s,q){a!\x3d\x3db?(180\x3ca-b?b+\x3d360:180\x3cb-a\x26\x26(a+\x3d360),q.push({i:s.push(pop(s)+\x22rotate(\x22,null,degParen)-\n2,x:number(a,b)})):b\x26\x26s.push(pop(s)+\x22rotate(\x22+b+degParen)}function skewX(a,b,s,q){a!\x3d\x3db?q.push({i:s.push(pop(s)+\x22skewX(\x22,null,degParen)-2,x:number(a,b)}):b\x26\x26s.push(pop(s)+\x22skewX(\x22+b+degParen)}function scale(xa,ya,xb,yb,s,q){xa!\x3d\x3dxb||ya!\x3d\x3dyb?(s\x3ds.push(pop(s)+\x22scale(\x22,null,\x22,\x22,null,\x22)\x22),q.push({i:s-4,x:number(xa,xb)},{i:s-2,x:number(ya,yb)})):1\x3d\x3d\x3dxb\x26\x261\x3d\x3d\x3dyb||s.push(pop(s)+\x22scale(\x22+xb+\x22,\x22+yb+\x22)\x22)}return function(a,b){var s\x3d[],q\x3d[];a\x3dparse(a);b\x3dparse(b);translate(a.translateX,a.translateY,b.translateX,\nb.translateY,s,q);rotate(a.rotate,b.rotate,s,q);skewX(a.skewX,b.skewX,s,q);scale(a.scaleX,a.scaleY,b.scaleX,b.scaleY,s,q);a\x3db\x3dnull;return function(t){for(var i\x3d-1,n\x3dq.length,o;++i\x3cn;)s[(o\x3dq[i]).i]\x3do.x(t);return s.join(\x22\x22)}}}function cosh(x){return((x\x3dMath.exp(x))+1/x)/2}function hsl(hue){return function(start,end){var h\x3dhue((start\x3dd3Color.hsl(start)).h,(end\x3dd3Color.hsl(end)).h),s\x3dnogamma(start.s,end.s),l\x3dnogamma(start.l,end.l),opacity\x3dnogamma(start.opacity,end.opacity);return function(t){start.h\x3d\nh(t);start.s\x3ds(t);start.l\x3dl(t);start.opacity\x3dopacity(t);return start+\x22\x22}}}function hcl(hue){return function(start,end){var h\x3dhue((start\x3dd3Color.hcl(start)).h,(end\x3dd3Color.hcl(end)).h),c\x3dnogamma(start.c,end.c),l\x3dnogamma(start.l,end.l),opacity\x3dnogamma(start.opacity,end.opacity);return function(t){start.h\x3dh(t);start.c\x3dc(t);start.l\x3dl(t);start.opacity\x3dopacity(t);return start+\x22\x22}}}function cubehelix$jscomp$0(hue){return function cubehelixGamma(y){function cubehelix(start,end){var h\x3dhue((start\x3dd3Color.cubehelix(start)).h,\n(end\x3dd3Color.cubehelix(end)).h),s\x3dnogamma(start.s,end.s),l\x3dnogamma(start.l,end.l),opacity\x3dnogamma(start.opacity,end.opacity);return function(t){start.h\x3dh(t);start.s\x3ds(t);start.l\x3dl(Math.pow(t,y));start.opacity\x3dopacity(t);return start+\x22\x22}}y\x3d+y;cubehelix.gamma\x3dcubehelixGamma;return cubehelix}(1)}var rgb$jscomp$0\x3dfunction rgbGamma(y){function rgb(start,end){var r\x3dcolor((start\x3dd3Color.rgb(start)).r,(end\x3dd3Color.rgb(end)).r),g\x3dcolor(start.g,end.g),b\x3dcolor(start.b,end.b),opacity\x3dnogamma(start.opacity,end.opacity);\nreturn function(t){start.r\x3dr(t);start.g\x3dg(t);start.b\x3db(t);start.opacity\x3dopacity(t);return start+\x22\x22}}var color\x3dgamma(y);rgb.gamma\x3drgbGamma;return rgb}(1),rgbBasis\x3drgbSpline(basis$1),rgbBasisClosed\x3drgbSpline(basisClosed),reA\x3d/[-+]?(?:\\d+\\.?\\d*|\\.?\\d+)(?:[eE][-+]?\\d+)?/g,reB\x3dnew RegExp(reA.source,\x22g\x22),degrees\x3d180/Math.PI,identity\x3d{translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1},cssNode,cssRoot,cssView,svgNode,interpolateTransformCss\x3dinterpolateTransform(function(value){if(\x22none\x22\x3d\x3d\x3dvalue)return identity;\ncssNode||(cssNode\x3ddocument.createElement(\x22DIV\x22),cssRoot\x3ddocument.documentElement,cssView\x3ddocument.defaultView);cssNode.style.transform\x3dvalue;value\x3dcssView.getComputedStyle(cssRoot.appendChild(cssNode),null).getPropertyValue(\x22transform\x22);cssRoot.removeChild(cssNode);value\x3dvalue.slice(7,-1).split(\x22,\x22);return decompose(+value[0],+value[1],+value[2],+value[3],+value[4],+value[5])},\x22px, \x22,\x22px)\x22,\x22deg)\x22),interpolateTransformSvg\x3dinterpolateTransform(function(value){if(null\x3d\x3dvalue)return identity;svgNode||\n(svgNode\x3ddocument.createElementNS(\x22http://www.w3.org/2000/svg\x22,\x22g\x22));svgNode.setAttribute(\x22transform\x22,value);if(!(value\x3dsvgNode.transform.baseVal.consolidate()))return identity;value\x3dvalue.matrix;return decompose(value.a,value.b,value.c,value.d,value.e,value.f)},\x22, \x22,\x22)\x22,\x22)\x22),rho\x3dMath.SQRT2,hsl$1\x3dhsl(hue),hslLong\x3dhsl(nogamma),hcl$1\x3dhcl(hue),hclLong\x3dhcl(nogamma),cubehelix$1\x3dcubehelix$jscomp$0(hue),cubehelixLong\x3dcubehelix$jscomp$0(nogamma);exports.interpolate\x3dvalue$jscomp$0;exports.interpolateArray\x3d\nfunction(a,b){return(isNumberArray(b)?numberArray:genericArray)(a,b)};exports.interpolateBasis\x3dbasis$1;exports.interpolateBasisClosed\x3dbasisClosed;exports.interpolateCubehelix\x3dcubehelix$1;exports.interpolateCubehelixLong\x3dcubehelixLong;exports.interpolateDate\x3ddate;exports.interpolateDiscrete\x3dfunction(range){var n\x3drange.length;return function(t){return range[Math.max(0,Math.min(n-1,Math.floor(t*n)))]}};exports.interpolateHcl\x3dhcl$1;exports.interpolateHclLong\x3dhclLong;exports.interpolateHsl\x3dhsl$1;exports.interpolateHslLong\x3d\nhslLong;exports.interpolateHue\x3dfunction(a,b){var i\x3dhue(+a,+b);return function(t){t\x3di(t);return t-360*Math.floor(t/360)}};exports.interpolateLab\x3dfunction(start,end){var l\x3dnogamma((start\x3dd3Color.lab(start)).l,(end\x3dd3Color.lab(end)).l),a\x3dnogamma(start.a,end.a),b\x3dnogamma(start.b,end.b),opacity\x3dnogamma(start.opacity,end.opacity);return function(t){start.l\x3dl(t);start.a\x3da(t);start.b\x3db(t);start.opacity\x3dopacity(t);return start+\x22\x22}};exports.interpolateNumber\x3dnumber;exports.interpolateNumberArray\x3dnumberArray;\nexports.interpolateObject\x3dobject;exports.interpolateRgb\x3drgb$jscomp$0;exports.interpolateRgbBasis\x3drgbBasis;exports.interpolateRgbBasisClosed\x3drgbBasisClosed;exports.interpolateRound\x3dfunction(a,b){return a\x3d+a,b\x3d+b,function(t){return Math.round(a*(1-t)+b*t)}};exports.interpolateString\x3dstring;exports.interpolateTransformCss\x3dinterpolateTransformCss;exports.interpolateTransformSvg\x3dinterpolateTransformSvg;exports.interpolateZoom\x3dfunction(p0,p1){var ux0\x3dp0[0],uy0\x3dp0[1],w0\x3dp0[2];p0\x3dp1[2];var dx\x3dp1[0]-ux0,dy\x3d\np1[1]-uy0,d2\x3ddx*dx+dy*dy;if(1E-12\x3ed2){var S\x3dMath.log(p0/w0)/rho;p0\x3dfunction(t){return[ux0+t*dx,uy0+t*dy,w0*Math.exp(rho*t*S)]}}else{var d1\x3dMath.sqrt(d2);p1\x3d(p0*p0-w0*w0+4*d2)/(4*w0*d1);p0\x3d(p0*p0-w0*w0-4*d2)/(4*p0*d1);var r0\x3dMath.log(Math.sqrt(p1*p1+1)-p1);S\x3d(Math.log(Math.sqrt(p0*p0+1)-p0)-r0)/rho;p0\x3dfunction(t){t*\x3dS;var coshr0\x3dcosh(r0),x\x3drho*t+r0;var JSCompiler_inline_result\x3d((x\x3dMath.exp(2*x))-1)/(x+1);var x$jscomp$0\x3dr0;x\x3d((x$jscomp$0\x3dMath.exp(x$jscomp$0))-1/x$jscomp$0)/2;JSCompiler_inline_result\x3d\nw0/(2*d1)*(coshr0*JSCompiler_inline_result-x);return[ux0+JSCompiler_inline_result*dx,uy0+JSCompiler_inline_result*dy,w0*coshr0/cosh(rho*t+r0)]}}p0.duration\x3d1E3*S;return p0};exports.piecewise\x3dfunction(interpolate,values){for(var i$jscomp$0\x3d0,n\x3dvalues.length-1,v\x3dvalues[0],I\x3dArray(0\x3en?0:n);i$jscomp$0\x3cn;)I[i$jscomp$0]\x3dinterpolate(v,v\x3dvalues[++i$jscomp$0]);return function(t){var i\x3dMath.max(0,Math.min(n-1,Math.floor(t*\x3dn)));return I[i](t-i)}};exports.quantize\x3dfunction(interpolator,n){for(var samples\x3dArray(n),\ni\x3d0;i\x3cn;++i)samples[i]\x3dinterpolator(i/(n-1));return samples};Object.defineProperty(exports,\x22__esModule\x22,{value:!0})})}");
SHADOW_ENV.evalLoad("module$node_modules$d3_scale$dist$d3_scale.js", true , "shadow$provide.module$node_modules$d3_scale$dist$d3_scale\x3dfunction(global$jscomp$0,require,module,exports$jscomp$0){(function(global,factory){\x22object\x22\x3d\x3d\x3dtypeof exports$jscomp$0\x26\x26\x22undefined\x22!\x3d\x3dtypeof module?factory(exports$jscomp$0,require(\x22module$node_modules$d3_array$dist$d3_array\x22),require(\x22module$node_modules$d3_interpolate$dist$d3_interpolate\x22),require(\x22module$node_modules$d3_format$dist$d3_format\x22),require(\x22module$node_modules$d3_time$dist$d3_time\x22),require(\x22module$node_modules$d3_time_format$dist$d3_time_format\x22)):\n\x22function\x22\x3d\x3d\x3dtypeof define\x26\x26define.amd?define(\x22exports d3-array d3-interpolate d3-format d3-time d3-time-format\x22.split(\x22 \x22),factory):(global\x3dglobal||self,factory(global.d3\x3dglobal.d3||{},global.d3,global.d3,global.d3,global.d3,global.d3))})(this,function(exports,d3Array,d3Interpolate,d3Format,d3Time,d3TimeFormat){function initRange(domain,range){switch(arguments.length){case 0:break;case 1:this.range(domain);break;default:this.range(range).domain(domain)}return this}function initInterpolator(domain,\ninterpolator){switch(arguments.length){case 0:break;case 1:\x22function\x22\x3d\x3d\x3dtypeof domain?this.interpolator(domain):this.range(domain);break;default:this.domain(domain),\x22function\x22\x3d\x3d\x3dtypeof interpolator?this.interpolator(interpolator):this.range(interpolator)}return this}function ordinal(){function scale(d){var key\x3dd+\x22\x22,i\x3dindex.get(key);if(!i){if(unknown!\x3d\x3dimplicit)return unknown;index.set(key,i\x3ddomain.push(d))}return range[(i-1)%range.length]}var index\x3dnew Map,domain\x3d[],range\x3d[],unknown\x3dimplicit;scale.domain\x3d\nfunction(_){if(!arguments.length)return domain.slice();domain\x3d[];index\x3dnew Map;for(var $jscomp$iter$314\x3d$jscomp.makeIterator(_),$jscomp$key$value\x3d$jscomp$iter$314.next();!$jscomp$key$value.done;$jscomp$key$value\x3d$jscomp$iter$314.next()){$jscomp$key$value\x3d$jscomp$key$value.value;var key\x3d$jscomp$key$value+\x22\x22;index.has(key)||index.set(key,domain.push($jscomp$key$value))}return scale};scale.range\x3dfunction(_){return arguments.length?(range\x3dArray.from(_),scale):range.slice()};scale.unknown\x3dfunction(_){return arguments.length?\n(unknown\x3d_,scale):unknown};scale.copy\x3dfunction(){return ordinal(domain,range).unknown(unknown)};initRange.apply(scale,arguments);return scale}function band(){function rescale(){var n\x3ddomain().length,reverse\x3dr1\x3cr0,start\x3dreverse?r1:r0,stop\x3dreverse?r0:r1;step\x3d(stop-start)/Math.max(1,n-paddingInner+2*paddingOuter);round\x26\x26(step\x3dMath.floor(step));start+\x3d(stop-start-step*(n-paddingInner))*align;bandwidth\x3dstep*(1-paddingInner);round\x26\x26(start\x3dMath.round(start),bandwidth\x3dMath.round(bandwidth));n\x3dd3Array.range(n).map(function(i){return start+\nstep*i});return ordinalRange(reverse?n.reverse():n)}var scale\x3dordinal().unknown(void 0),domain\x3dscale.domain,ordinalRange\x3dscale.range,r0\x3d0,r1\x3d1,step,bandwidth,round\x3d!1,paddingInner\x3d0,paddingOuter\x3d0,align\x3d.5;delete scale.unknown;scale.domain\x3dfunction(_){return arguments.length?(domain(_),rescale()):domain()};scale.range\x3dfunction(_){if(arguments.length){var JSCompiler_temp\x3d$jscomp.makeIterator(_);r0\x3dJSCompiler_temp.next().value;r1\x3dJSCompiler_temp.next().value;JSCompiler_temp\x3d(r0\x3d+r0,r1\x3d+r1,rescale())}else JSCompiler_temp\x3d\n[r0,r1];return JSCompiler_temp};scale.rangeRound\x3dfunction(_){_\x3d$jscomp.makeIterator(_);r0\x3d_.next().value;r1\x3d_.next().value;return r0\x3d+r0,r1\x3d+r1,round\x3d!0,rescale()};scale.bandwidth\x3dfunction(){return bandwidth};scale.step\x3dfunction(){return step};scale.round\x3dfunction(_){return arguments.length?(round\x3d!!_,rescale()):round};scale.padding\x3dfunction(_){return arguments.length?(paddingInner\x3dMath.min(1,paddingOuter\x3d+_),rescale()):paddingInner};scale.paddingInner\x3dfunction(_){return arguments.length?(paddingInner\x3d\nMath.min(1,_),rescale()):paddingInner};scale.paddingOuter\x3dfunction(_){return arguments.length?(paddingOuter\x3d+_,rescale()):paddingOuter};scale.align\x3dfunction(_){return arguments.length?(align\x3dMath.max(0,Math.min(1,_)),rescale()):align};scale.copy\x3dfunction(){return band(domain(),[r0,r1]).round(round).paddingInner(paddingInner).paddingOuter(paddingOuter).align(align)};return initRange.apply(rescale(),arguments)}function pointish(scale){var copy\x3dscale.copy;scale.padding\x3dscale.paddingOuter;delete scale.paddingInner;\ndelete scale.paddingOuter;scale.copy\x3dfunction(){return pointish(copy())};return scale}function constant(x){return function(){return x}}function number(x){return+x}function identity(x){return x}function normalize(a,b){return(b-\x3da\x3d+a)?function(x){return(x-a)/b}:constant(isNaN(b)?NaN:.5)}function clamper(a,b){if(a\x3eb){var t\x3da;a\x3db;b\x3dt}return function(x){return Math.max(a,Math.min(b,x))}}function bimap(domain,range,interpolate){var d0\x3ddomain[0];domain\x3ddomain[1];var r0\x3drange[0];range\x3drange[1];domain\x3cd0?\n(d0\x3dnormalize(domain,d0),r0\x3dinterpolate(range,r0)):(d0\x3dnormalize(d0,domain),r0\x3dinterpolate(r0,range));return function(x){return r0(d0(x))}}function polymap(domain,range,interpolate){var j\x3dMath.min(domain.length,range.length)-1,d\x3dArray(j),r\x3dArray(j),i$jscomp$0\x3d-1;domain[j]\x3cdomain[0]\x26\x26(domain\x3ddomain.slice().reverse(),range\x3drange.slice().reverse());for(;++i$jscomp$0\x3cj;)d[i$jscomp$0]\x3dnormalize(domain[i$jscomp$0],domain[i$jscomp$0+1]),r[i$jscomp$0]\x3dinterpolate(range[i$jscomp$0],range[i$jscomp$0+1]);return function(x){var i\x3d\nd3Array.bisect(domain,x,1,j)-1;return r[i](d[i](x))}}function copy$jscomp$0(source,target){return target.domain(source.domain()).range(source.range()).interpolate(source.interpolate()).clamp(source.clamp()).unknown(source.unknown())}function transformer(){function rescale(){var n\x3dMath.min(domain.length,range.length);clamp!\x3d\x3didentity\x26\x26(clamp\x3dclamper(domain[0],domain[n-1]));piecewise\x3d2\x3cn?polymap:bimap;output\x3dinput\x3dnull;return scale}function scale(x){return isNaN(x\x3d+x)?unknown:(output||(output\x3dpiecewise(domain.map(transform),\nrange,interpolate)))(transform(clamp(x)))}var domain\x3dunit,range\x3dunit,interpolate\x3dd3Interpolate.interpolate,transform,untransform,unknown,clamp\x3didentity,piecewise,output,input;scale.invert\x3dfunction(y){return clamp(untransform((input||(input\x3dpiecewise(range,domain.map(transform),d3Interpolate.interpolateNumber)))(y)))};scale.domain\x3dfunction(_){return arguments.length?(domain\x3dArray.from(_,number),rescale()):domain.slice()};scale.range\x3dfunction(_){return arguments.length?(range\x3dArray.from(_),rescale()):\nrange.slice()};scale.rangeRound\x3dfunction(_){return range\x3dArray.from(_),interpolate\x3dd3Interpolate.interpolateRound,rescale()};scale.clamp\x3dfunction(_){return arguments.length?(clamp\x3d_?!0:identity,rescale()):clamp!\x3d\x3didentity};scale.interpolate\x3dfunction(_){return arguments.length?(interpolate\x3d_,rescale()):interpolate};scale.unknown\x3dfunction(_){return arguments.length?(unknown\x3d_,scale):unknown};return function(t,u){transform\x3dt;untransform\x3du;return rescale()}}function tickFormat(start,stop,count,specifier){count\x3d\nd3Array.tickStep(start,stop,count);var precision;specifier\x3dd3Format.formatSpecifier(null\x3d\x3dspecifier?\x22,f\x22:specifier);switch(specifier.type){case \x22s\x22:return start\x3dMath.max(Math.abs(start),Math.abs(stop)),null!\x3dspecifier.precision||isNaN(precision\x3dd3Format.precisionPrefix(count,start))||(specifier.precision\x3dprecision),d3Format.formatPrefix(specifier,start);case \x22\x22:case \x22e\x22:case \x22g\x22:case \x22p\x22:case \x22r\x22:null!\x3dspecifier.precision||isNaN(precision\x3dd3Format.precisionRound(count,Math.max(Math.abs(start),Math.abs(stop))))||\n(specifier.precision\x3dprecision-(\x22e\x22\x3d\x3d\x3dspecifier.type));break;case \x22f\x22:case \x22%\x22:null!\x3dspecifier.precision||isNaN(precision\x3dd3Format.precisionFixed(count))||(specifier.precision\x3dprecision-2*(\x22%\x22\x3d\x3d\x3dspecifier.type))}return d3Format.format(specifier)}function linearish(scale){var domain\x3dscale.domain;scale.ticks\x3dfunction(count){var d\x3ddomain();return d3Array.ticks(d[0],d[d.length-1],null\x3d\x3dcount?10:count)};scale.tickFormat\x3dfunction(count,specifier){var d\x3ddomain();return tickFormat(d[0],d[d.length-1],null\x3d\x3d\ncount?10:count,specifier)};scale.nice\x3dfunction(count){null\x3d\x3dcount\x26\x26(count\x3d10);var d\x3ddomain(),i0\x3d0,i1\x3dd.length-1,start\x3dd[i0],stop\x3dd[i1];if(stop\x3cstart){var step\x3dstart;start\x3dstop;stop\x3dstep;step\x3di0;i0\x3di1;i1\x3dstep}step\x3dd3Array.tickIncrement(start,stop,count);0\x3cstep?(start\x3dMath.floor(start/step)*step,stop\x3dMath.ceil(stop/step)*step,step\x3dd3Array.tickIncrement(start,stop,count)):0\x3estep\x26\x26(start\x3dMath.ceil(start*step)/step,stop\x3dMath.floor(stop*step)/step,step\x3dd3Array.tickIncrement(start,stop,count));0\x3cstep?(d[i0]\x3d\nMath.floor(start/step)*step,d[i1]\x3dMath.ceil(stop/step)*step,domain(d)):0\x3estep\x26\x26(d[i0]\x3dMath.ceil(start*step)/step,d[i1]\x3dMath.floor(stop*step)/step,domain(d));return scale};return scale}function linear(){var scale\x3dtransformer()(identity,identity);scale.copy\x3dfunction(){return copy$jscomp$0(scale,linear())};initRange.apply(scale,arguments);return linearish(scale)}function identity$1(domain){function scale(x){return isNaN(x\x3d+x)?unknown:x}var unknown;scale.invert\x3dscale;scale.domain\x3dscale.range\x3dfunction(_){return arguments.length?\n(domain\x3dArray.from(_,number),scale):domain.slice()};scale.unknown\x3dfunction(_){return arguments.length?(unknown\x3d_,scale):unknown};scale.copy\x3dfunction(){return identity$1(domain).unknown(unknown)};domain\x3darguments.length?Array.from(domain,number):[0,1];return linearish(scale)}function nice(domain,interval){domain\x3ddomain.slice();var i0\x3d0,i1\x3ddomain.length-1,x0\x3ddomain[i0],x1\x3ddomain[i1];if(x1\x3cx0){var t\x3di0;i0\x3di1;i1\x3dt;t\x3dx0;x0\x3dx1;x1\x3dt}domain[i0]\x3dinterval.floor(x0);domain[i1]\x3dinterval.ceil(x1);return domain}\nfunction transformLog(x){return Math.log(x)}function transformExp(x){return Math.exp(x)}function transformLogn(x){return-Math.log(-x)}function transformExpn(x){return-Math.exp(-x)}function pow10(x){return isFinite(x)?+(\x221e\x22+x):0\x3ex?0:x}function powp(base){return 10\x3d\x3d\x3dbase?pow10:base\x3d\x3d\x3dMath.E?Math.exp:function(x){return Math.pow(base,x)}}function logp(base){return base\x3d\x3d\x3dMath.E?Math.log:10\x3d\x3d\x3dbase\x26\x26Math.log10||2\x3d\x3d\x3dbase\x26\x26Math.log2||(base\x3dMath.log(base),function(x){return Math.log(x)/base})}function reflect(f){return function(x){return-f(-x)}}\nfunction loggish(transform){function rescale(){logs\x3dlogp(base);pows\x3dpowp(base);0\x3edomain()[0]?(logs\x3dreflect(logs),pows\x3dreflect(pows),transform(transformLogn,transformExpn)):transform(transformLog,transformExp);return scale}var scale\x3dtransform(transformLog,transformExp),domain\x3dscale.domain,base\x3d10,logs,pows;scale.base\x3dfunction(_){return arguments.length?(base\x3d+_,rescale()):base};scale.domain\x3dfunction(_){return arguments.length?(domain(_),rescale()):domain()};scale.ticks\x3dfunction(count){var d\x3ddomain(),\nu\x3dd[0];d\x3dd[d.length-1];var r;if(r\x3dd\x3cu)i\x3du,u\x3dd,d\x3di;var i\x3dlogs(u),j\x3dlogs(d),n\x3dnull\x3d\x3dcount?10:+count,z\x3d[];if(!(base%1)\x26\x26j-i\x3cn){i\x3dMath.floor(i);j\x3dMath.ceil(j);if(0\x3cu)for(;i\x3c\x3dj;++i){var k\x3d1;for(count\x3dpows(i);k\x3cbase;++k){var t\x3dcount*k;if(!(t\x3cu)){if(t\x3ed)break;z.push(t)}}}else for(;i\x3c\x3dj;++i)for(k\x3dbase-1,count\x3dpows(i);1\x3c\x3dk;--k)if(t\x3dcount*k,!(t\x3cu)){if(t\x3ed)break;z.push(t)}2*z.length\x3cn\x26\x26(z\x3dd3Array.ticks(u,d,n))}else z\x3dd3Array.ticks(i,j,Math.min(j-i,n)).map(pows);return r?z.reverse():z};scale.tickFormat\x3dfunction(count,\nspecifier){null\x3d\x3dspecifier\x26\x26(specifier\x3d10\x3d\x3d\x3dbase?\x22.0e\x22:\x22,\x22);\x22function\x22!\x3d\x3dtypeof specifier\x26\x26(specifier\x3dd3Format.format(specifier));if(Infinity\x3d\x3d\x3dcount)return specifier;null\x3d\x3dcount\x26\x26(count\x3d10);var k\x3dMath.max(1,base*count/scale.ticks().length);return function(d){var i\x3dd/pows(Math.round(logs(d)));i*base\x3cbase-.5\x26\x26(i*\x3dbase);return i\x3c\x3dk?specifier(d):\x22\x22}};scale.nice\x3dfunction(){return domain(nice(domain(),{floor:function(x){return pows(Math.floor(logs(x)))},ceil:function(x){return pows(Math.ceil(logs(x)))}}))};\nreturn scale}function log(){var scale\x3dloggish(transformer()).domain([1,10]);scale.copy\x3dfunction(){return copy$jscomp$0(scale,log()).base(scale.base())};initRange.apply(scale,arguments);return scale}function transformSymlog(c){return function(x){return Math.sign(x)*Math.log1p(Math.abs(x/c))}}function transformSymexp(c){return function(x){return Math.sign(x)*Math.expm1(Math.abs(x))*c}}function symlogish(transform){var c\x3d1,scale\x3dtransform(transformSymlog(c),transformSymexp(c));scale.constant\x3dfunction(_){return arguments.length?\ntransform(transformSymlog(c\x3d+_),transformSymexp(c)):c};return linearish(scale)}function symlog(){var scale\x3dsymlogish(transformer());scale.copy\x3dfunction(){return copy$jscomp$0(scale,symlog()).constant(scale.constant())};return initRange.apply(scale,arguments)}function transformPow(exponent){return function(x){return 0\x3ex?-Math.pow(-x,exponent):Math.pow(x,exponent)}}function transformSqrt(x){return 0\x3ex?-Math.sqrt(-x):Math.sqrt(x)}function transformSquare(x){return 0\x3ex?-x*x:x*x}function powish(transform){var scale\x3d\ntransform(identity,identity),exponent\x3d1;scale.exponent\x3dfunction(_){return arguments.length?(exponent\x3d+_,1\x3d\x3d\x3dexponent?transform(identity,identity):.5\x3d\x3d\x3dexponent?transform(transformSqrt,transformSquare):transform(transformPow(exponent),transformPow(1/exponent))):exponent};return linearish(scale)}function pow(){var scale\x3dpowish(transformer());scale.copy\x3dfunction(){return copy$jscomp$0(scale,pow()).exponent(scale.exponent())};initRange.apply(scale,arguments);return scale}function square(x){return Math.sign(x)*\nx*x}function radial(){function scale(x){x\x3dsquared(x);x\x3dMath.sign(x)*Math.sqrt(Math.abs(x));return isNaN(x)?unknown:round?Math.round(x):x}var squared\x3dtransformer()(identity,identity),range\x3d[0,1],round\x3d!1,unknown;scale.invert\x3dfunction(y){return squared.invert(square(y))};scale.domain\x3dfunction(_){return arguments.length?(squared.domain(_),scale):squared.domain()};scale.range\x3dfunction(_){return arguments.length?(squared.range((range\x3dArray.from(_,number)).map(square)),scale):range.slice()};scale.rangeRound\x3d\nfunction(_){return scale.range(_).round(!0)};scale.round\x3dfunction(_){return arguments.length?(round\x3d!!_,scale):round};scale.clamp\x3dfunction(_){return arguments.length?(squared.clamp(_),scale):squared.clamp()};scale.unknown\x3dfunction(_){return arguments.length?(unknown\x3d_,scale):unknown};scale.copy\x3dfunction(){return radial(squared.domain(),range).round(round).clamp(squared.clamp()).unknown(unknown)};initRange.apply(scale,arguments);return linearish(scale)}function quantile(){function rescale(){var i\x3d\n0,n\x3dMath.max(1,range.length);for(thresholds\x3dArray(n-1);++i\x3cn;)thresholds[i-1]\x3dd3Array.quantile(domain,i/n);return scale}function scale(x){return isNaN(x\x3d+x)?unknown:range[d3Array.bisect(thresholds,x)]}var domain\x3d[],range\x3d[],thresholds\x3d[],unknown;scale.invertExtent\x3dfunction(y){y\x3drange.indexOf(y);return 0\x3ey?[NaN,NaN]:[0\x3cy?thresholds[y-1]:domain[0],y\x3cthresholds.length?thresholds[y]:domain[domain.length-1]]};scale.domain\x3dfunction(_){if(!arguments.length)return domain.slice();domain\x3d[];for(var $jscomp$iter$315\x3d\n$jscomp.makeIterator(_),$jscomp$key$d\x3d$jscomp$iter$315.next();!$jscomp$key$d.done;$jscomp$key$d\x3d$jscomp$iter$315.next())$jscomp$key$d\x3d$jscomp$key$d.value,null\x3d\x3d$jscomp$key$d||isNaN($jscomp$key$d\x3d+$jscomp$key$d)||domain.push($jscomp$key$d);domain.sort(d3Array.ascending);return rescale()};scale.range\x3dfunction(_){return arguments.length?(range\x3dArray.from(_),rescale()):range.slice()};scale.unknown\x3dfunction(_){return arguments.length?(unknown\x3d_,scale):unknown};scale.quantiles\x3dfunction(){return thresholds.slice()};\nscale.copy\x3dfunction(){return quantile().domain(domain).range(range).unknown(unknown)};return initRange.apply(scale,arguments)}function quantize(){function scale(x){return x\x3c\x3dx?range[d3Array.bisect(domain,x,0,n)]:unknown}function rescale(){var i\x3d-1;for(domain\x3dArray(n);++i\x3cn;)domain[i]\x3d((i+1)*x1-(i-n)*x0)/(n+1);return scale}var x0\x3d0,x1\x3d1,n\x3d1,domain\x3d[.5],range\x3d[0,1],unknown;scale.domain\x3dfunction(_){if(arguments.length){var JSCompiler_temp\x3d$jscomp.makeIterator(_);x0\x3dJSCompiler_temp.next().value;x1\x3dJSCompiler_temp.next().value;\nJSCompiler_temp\x3d(x0\x3d+x0,x1\x3d+x1,rescale())}else JSCompiler_temp\x3d[x0,x1];return JSCompiler_temp};scale.range\x3dfunction(_){return arguments.length?(n\x3d(range\x3dArray.from(_)).length-1,rescale()):range.slice()};scale.invertExtent\x3dfunction(y){y\x3drange.indexOf(y);return 0\x3ey?[NaN,NaN]:1\x3ey?[x0,domain[0]]:y\x3e\x3dn?[domain[n-1],x1]:[domain[y-1],domain[y]]};scale.unknown\x3dfunction(_){return arguments.length?(unknown\x3d_,scale):scale};scale.thresholds\x3dfunction(){return domain.slice()};scale.copy\x3dfunction(){return quantize().domain([x0,\nx1]).range(range).unknown(unknown)};return initRange.apply(linearish(scale),arguments)}function threshold(){function scale(x){return x\x3c\x3dx?range[d3Array.bisect(domain,x,0,n)]:unknown}var domain\x3d[.5],range\x3d[0,1],unknown,n\x3d1;scale.domain\x3dfunction(_){return arguments.length?(domain\x3dArray.from(_),n\x3dMath.min(domain.length,range.length-1),scale):domain.slice()};scale.range\x3dfunction(_){return arguments.length?(range\x3dArray.from(_),n\x3dMath.min(domain.length,range.length-1),scale):range.slice()};scale.invertExtent\x3d\nfunction(y){y\x3drange.indexOf(y);return[domain[y-1],domain[y]]};scale.unknown\x3dfunction(_){return arguments.length?(unknown\x3d_,scale):unknown};scale.copy\x3dfunction(){return threshold().domain(domain).range(range).unknown(unknown)};return initRange.apply(scale,arguments)}function date$jscomp$0(t){return new Date(t)}function number$1(t){return t instanceof Date?+t:+new Date(+t)}function calendar(year,month,week,day,hour,minute,second,millisecond,format){function tickFormat(date){return(second(date)\x3cdate?\nformatMillisecond:minute(date)\x3cdate?formatSecond:hour(date)\x3cdate?formatMinute:day(date)\x3cdate?formatHour:month(date)\x3cdate?week(date)\x3cdate?formatDay:formatWeek:year(date)\x3cdate?formatMonth:formatYear)(date)}function tickInterval(interval,start,stop){null\x3d\x3dinterval\x26\x26(interval\x3d10);if(\x22number\x22\x3d\x3d\x3dtypeof interval){var target\x3dMath.abs(stop-start)/interval,i$jscomp$0\x3dd3Array.bisector(function(i){return i[2]}).right(tickIntervals,target);i$jscomp$0\x3d\x3d\x3dtickIntervals.length?(start\x3dd3Array.tickStep(start/31536E6,\nstop/31536E6,interval),interval\x3dyear):i$jscomp$0?(i$jscomp$0\x3dtickIntervals[target/tickIntervals[i$jscomp$0-1][2]\x3ctickIntervals[i$jscomp$0][2]/target?i$jscomp$0-1:i$jscomp$0],start\x3di$jscomp$0[1],interval\x3di$jscomp$0[0]):(start\x3dMath.max(d3Array.tickStep(start,stop,interval),1),interval\x3dmillisecond);return interval.every(start)}return interval}var scale\x3dtransformer()(identity,identity),invert\x3dscale.invert,domain\x3dscale.domain,formatMillisecond\x3dformat(\x22.%L\x22),formatSecond\x3dformat(\x22:%S\x22),formatMinute\x3dformat(\x22%I:%M\x22),\nformatHour\x3dformat(\x22%I %p\x22),formatDay\x3dformat(\x22%a %d\x22),formatWeek\x3dformat(\x22%b %d\x22),formatMonth\x3dformat(\x22%B\x22),formatYear\x3dformat(\x22%Y\x22),tickIntervals\x3d[[second,1,1E3],[second,5,5E3],[second,15,15E3],[second,30,3E4],[minute,1,6E4],[minute,5,3E5],[minute,15,9E5],[minute,30,18E5],[hour,1,36E5],[hour,3,108E5],[hour,6,216E5],[hour,12,432E5],[day,1,864E5],[day,2,1728E5],[week,1,6048E5],[month,1,2592E6],[month,3,7776E6],[year,1,31536E6]];scale.invert\x3dfunction(y){return new Date(invert(y))};scale.domain\x3dfunction(_){return arguments.length?\ndomain(Array.from(_,number$1)):domain().map(date$jscomp$0)};scale.ticks\x3dfunction(interval){var d\x3ddomain(),t0\x3dd[0];d\x3dd[d.length-1];var r\x3dd\x3ct0;if(r){var t\x3dt0;t0\x3dd;d\x3dt}t\x3d(t\x3dtickInterval(interval,t0,d))?t.range(t0,d+1):[];return r?t.reverse():t};scale.tickFormat\x3dfunction(count,specifier){return null\x3d\x3dspecifier?tickFormat:format(specifier)};scale.nice\x3dfunction(interval){var d\x3ddomain();return(interval\x3dtickInterval(interval,d[0],d[d.length-1]))?domain(nice(d,interval)):scale};scale.copy\x3dfunction(){return copy$jscomp$0(scale,\ncalendar(year,month,week,day,hour,minute,second,millisecond,format))};return scale}function transformer$1(){function scale(x){return isNaN(x\x3d+x)?unknown:interpolator(0\x3d\x3d\x3dk10?.5:(x\x3d(transform(x)-t0)*k10,clamp?Math.max(0,Math.min(1,x)):x))}function range(interpolate){return function(_){if(arguments.length){var r1\x3d$jscomp.makeIterator(_);var r0\x3dr1.next().value;r1\x3dr1.next().value;r0\x3d(interpolator\x3dinterpolate(r0,r1),scale)}else r0\x3d[interpolator(0),interpolator(1)];return r0}}var x0\x3d0,x1\x3d1,t0,t1,k10,transform,\ninterpolator\x3didentity,clamp\x3d!1,unknown;scale.domain\x3dfunction(_){if(arguments.length){var JSCompiler_temp\x3d$jscomp.makeIterator(_);x0\x3dJSCompiler_temp.next().value;x1\x3dJSCompiler_temp.next().value;JSCompiler_temp\x3d(t0\x3dtransform(x0\x3d+x0),t1\x3dtransform(x1\x3d+x1),k10\x3dt0\x3d\x3d\x3dt1?0:1/(t1-t0),scale)}else JSCompiler_temp\x3d[x0,x1];return JSCompiler_temp};scale.clamp\x3dfunction(_){return arguments.length?(clamp\x3d!!_,scale):clamp};scale.interpolator\x3dfunction(_){return arguments.length?(interpolator\x3d_,scale):interpolator};\nscale.range\x3drange(d3Interpolate.interpolate);scale.rangeRound\x3drange(d3Interpolate.interpolateRound);scale.unknown\x3dfunction(_){return arguments.length?(unknown\x3d_,scale):unknown};return function(t){transform\x3dt;t0\x3dt(x0);t1\x3dt(x1);k10\x3dt0\x3d\x3d\x3dt1?0:1/(t1-t0);return scale}}function copy$1(source,target){return target.domain(source.domain()).interpolator(source.interpolator()).clamp(source.clamp()).unknown(source.unknown())}function sequential(){var scale\x3dlinearish(transformer$1()(identity));scale.copy\x3dfunction(){return copy$1(scale,\nsequential())};return initInterpolator.apply(scale,arguments)}function sequentialLog(){var scale\x3dloggish(transformer$1()).domain([1,10]);scale.copy\x3dfunction(){return copy$1(scale,sequentialLog()).base(scale.base())};return initInterpolator.apply(scale,arguments)}function sequentialSymlog(){var scale\x3dsymlogish(transformer$1());scale.copy\x3dfunction(){return copy$1(scale,sequentialSymlog()).constant(scale.constant())};return initInterpolator.apply(scale,arguments)}function sequentialPow(){var scale\x3dpowish(transformer$1());\nscale.copy\x3dfunction(){return copy$1(scale,sequentialPow()).exponent(scale.exponent())};return initInterpolator.apply(scale,arguments)}function sequentialQuantile(){function scale(x){if(!isNaN(x\x3d+x))return interpolator((d3Array.bisect(domain,x,1)-1)/(domain.length-1))}var domain\x3d[],interpolator\x3didentity;scale.domain\x3dfunction(_){if(!arguments.length)return domain.slice();domain\x3d[];for(var $jscomp$iter$316\x3d$jscomp.makeIterator(_),$jscomp$key$d\x3d$jscomp$iter$316.next();!$jscomp$key$d.done;$jscomp$key$d\x3d\n$jscomp$iter$316.next())$jscomp$key$d\x3d$jscomp$key$d.value,null\x3d\x3d$jscomp$key$d||isNaN($jscomp$key$d\x3d+$jscomp$key$d)||domain.push($jscomp$key$d);domain.sort(d3Array.ascending);return scale};scale.interpolator\x3dfunction(_){return arguments.length?(interpolator\x3d_,scale):interpolator};scale.range\x3dfunction(){return domain.map(function(d,i){return interpolator(i/(domain.length-1))})};scale.quantiles\x3dfunction(n){return Array.from({length:n+1},function(_,i){return d3Array.quantile(domain,i/n)})};scale.copy\x3d\nfunction(){return sequentialQuantile(interpolator).domain(domain)};return initInterpolator.apply(scale,arguments)}function transformer$2(){function scale(x){return isNaN(x\x3d+x)?unknown:(x\x3d.5+((x\x3d+transform(x))-t1)*(s*x\x3cs*t1?k10:k21),interpolator(clamp?Math.max(0,Math.min(1,x)):x))}function range(interpolate){return function(_){if(arguments.length){var r2\x3d$jscomp.makeIterator(_);var r0\x3dr2.next().value;var r1\x3dr2.next().value;r2\x3dr2.next().value;r0\x3d(interpolator\x3dd3Interpolate.piecewise(interpolate,[r0,\nr1,r2]),scale)}else r0\x3d[interpolator(0),interpolator(.5),interpolator(1)];return r0}}var x0\x3d0,x1\x3d.5,x2\x3d1,s\x3d1,t0,t1,t2,k10,k21,interpolator\x3didentity,transform,clamp\x3d!1,unknown;scale.domain\x3dfunction(_){if(arguments.length){var JSCompiler_temp\x3d$jscomp.makeIterator(_);x0\x3dJSCompiler_temp.next().value;x1\x3dJSCompiler_temp.next().value;x2\x3dJSCompiler_temp.next().value;JSCompiler_temp\x3d(t0\x3dtransform(x0\x3d+x0),t1\x3dtransform(x1\x3d+x1),t2\x3dtransform(x2\x3d+x2),k10\x3dt0\x3d\x3d\x3dt1?0:.5/(t1-t0),k21\x3dt1\x3d\x3d\x3dt2?0:.5/(t2-t1),s\x3dt1\x3ct0?-1:\n1,scale)}else JSCompiler_temp\x3d[x0,x1,x2];return JSCompiler_temp};scale.clamp\x3dfunction(_){return arguments.length?(clamp\x3d!!_,scale):clamp};scale.interpolator\x3dfunction(_){return arguments.length?(interpolator\x3d_,scale):interpolator};scale.range\x3drange(d3Interpolate.interpolate);scale.rangeRound\x3drange(d3Interpolate.interpolateRound);scale.unknown\x3dfunction(_){return arguments.length?(unknown\x3d_,scale):unknown};return function(t){transform\x3dt;t0\x3dt(x0);t1\x3dt(x1);t2\x3dt(x2);k10\x3dt0\x3d\x3d\x3dt1?0:.5/(t1-t0);k21\x3dt1\x3d\x3d\x3dt2?\n0:.5/(t2-t1);s\x3dt1\x3ct0?-1:1;return scale}}function diverging(){var scale\x3dlinearish(transformer$2()(identity));scale.copy\x3dfunction(){return copy$1(scale,diverging())};return initInterpolator.apply(scale,arguments)}function divergingLog(){var scale\x3dloggish(transformer$2()).domain([.1,1,10]);scale.copy\x3dfunction(){return copy$1(scale,divergingLog()).base(scale.base())};return initInterpolator.apply(scale,arguments)}function divergingSymlog(){var scale\x3dsymlogish(transformer$2());scale.copy\x3dfunction(){return copy$1(scale,\ndivergingSymlog()).constant(scale.constant())};return initInterpolator.apply(scale,arguments)}function divergingPow(){var scale\x3dpowish(transformer$2());scale.copy\x3dfunction(){return copy$1(scale,divergingPow()).exponent(scale.exponent())};return initInterpolator.apply(scale,arguments)}$jscomp.initSymbol();var implicit\x3dSymbol(\x22implicit\x22),unit\x3d[0,1];exports.scaleBand\x3dband;exports.scaleDiverging\x3ddiverging;exports.scaleDivergingLog\x3ddivergingLog;exports.scaleDivergingPow\x3ddivergingPow;exports.scaleDivergingSqrt\x3d\nfunction(){return divergingPow.apply(null,arguments).exponent(.5)};exports.scaleDivergingSymlog\x3ddivergingSymlog;exports.scaleIdentity\x3didentity$1;exports.scaleImplicit\x3dimplicit;exports.scaleLinear\x3dlinear;exports.scaleLog\x3dlog;exports.scaleOrdinal\x3dordinal;exports.scalePoint\x3dfunction(){return pointish(band.apply(null,arguments).paddingInner(1))};exports.scalePow\x3dpow;exports.scaleQuantile\x3dquantile;exports.scaleQuantize\x3dquantize;exports.scaleRadial\x3dradial;exports.scaleSequential\x3dsequential;exports.scaleSequentialLog\x3d\nsequentialLog;exports.scaleSequentialPow\x3dsequentialPow;exports.scaleSequentialQuantile\x3dsequentialQuantile;exports.scaleSequentialSqrt\x3dfunction(){return sequentialPow.apply(null,arguments).exponent(.5)};exports.scaleSequentialSymlog\x3dsequentialSymlog;exports.scaleSqrt\x3dfunction(){return pow.apply(null,arguments).exponent(.5)};exports.scaleSymlog\x3dsymlog;exports.scaleThreshold\x3dthreshold;exports.scaleTime\x3dfunction(){return initRange.apply(calendar(d3Time.timeYear,d3Time.timeMonth,d3Time.timeWeek,d3Time.timeDay,\nd3Time.timeHour,d3Time.timeMinute,d3Time.timeSecond,d3Time.timeMillisecond,d3TimeFormat.timeFormat).domain([new Date(2E3,0,1),new Date(2E3,0,2)]),arguments)};exports.scaleUtc\x3dfunction(){return initRange.apply(calendar(d3Time.utcYear,d3Time.utcMonth,d3Time.utcWeek,d3Time.utcDay,d3Time.utcHour,d3Time.utcMinute,d3Time.utcSecond,d3Time.utcMillisecond,d3TimeFormat.utcFormat).domain([Date.UTC(2E3,0,1),Date.UTC(2E3,0,2)]),arguments)};exports.tickFormat\x3dtickFormat;Object.defineProperty(exports,\x22__esModule\x22,\n{value:!0})})}");
SHADOW_ENV.evalLoad("module$node_modules$vega_scale$build$vega_scale.js", true , "shadow$provide.module$node_modules$vega_scale$build$vega_scale\x3dfunction(global$jscomp$0,require,module,exports$jscomp$0){(function(global,factory){\x22object\x22\x3d\x3d\x3dtypeof exports$jscomp$0\x26\x26\x22undefined\x22!\x3d\x3dtypeof module?factory(exports$jscomp$0,require(\x22module$node_modules$vega_util$build$vega_util\x22),require(\x22module$node_modules$d3_array$dist$d3_array\x22),require(\x22module$node_modules$d3_scale$dist$d3_scale\x22),require(\x22module$node_modules$d3_interpolate$dist$d3_interpolate\x22),require(\x22module$node_modules$vega_time$build$vega_time\x22)):\n\x22function\x22\x3d\x3d\x3dtypeof define\x26\x26define.amd?define(\x22exports vega-util d3-array d3-scale d3-interpolate vega-time\x22.split(\x22 \x22),factory):(global\x3dglobal||self,factory(global.vega\x3d{},global.vega,global.d3,global.d3,global.d3,global.vega))})(this,function(exports,vegaUtil,d3Array,$,$$1,vegaTime){function bandSpace(count,paddingInner,paddingOuter){paddingInner\x3dcount-paddingInner+2*paddingOuter;return count?0\x3cpaddingInner?paddingInner:1:0}function invertRange(scale){return function(_){var lo\x3d_[0];_\x3d_[1];if(_\x3c\nlo){var t\x3dlo;lo\x3d_;_\x3dt}return[scale.invert(lo),scale.invert(_)]}}function invertRangeExtent(scale){return function(_){var range\x3dscale.range(),lo\x3d_[0];_\x3d_[1];var min\x3d-1,n;if(_\x3clo){var t\x3dlo;lo\x3d_;_\x3dt}t\x3d0;for(n\x3drange.length;t\x3cn;++t)if(range[t]\x3e\x3dlo\x26\x26range[t]\x3c\x3d_){0\x3emin\x26\x26(min\x3dt);var max\x3dt}if(!(0\x3emin))return lo\x3dscale.invertExtent(range[min]),_\x3dscale.invertExtent(range[max]),[void 0\x3d\x3d\x3dlo[0]?lo[1]:lo[0],void 0\x3d\x3d\x3d_[1]?_[0]:_[1]]}}function band(){function rescale(){var n\x3ddomain().length,reverse\x3drange[1]\x3crange[0],\nstart\x3drange[reverse-0],stop\x3drange[1-reverse],space\x3dbandSpace(n,paddingInner,paddingOuter);step\x3d(stop-start)/(space||1);round\x26\x26(step\x3dMath.floor(step));start+\x3d(stop-start-step*(n-paddingInner))*align;bandwidth\x3dstep*(1-paddingInner);round\x26\x26(start\x3dMath.round(start),bandwidth\x3dMath.round(bandwidth));n\x3dd3Array.range(n).map(function(i){return start+step*i});return ordinalRange(reverse?n.reverse():n)}var scale\x3d$.scaleOrdinal().unknown(void 0),domain\x3dscale.domain,ordinalRange\x3dscale.range,range\x3d[0,1],step,bandwidth,\nround\x3d!1,paddingInner\x3d0,paddingOuter\x3d0,align\x3d.5;delete scale.unknown;scale.domain\x3dfunction(_){return arguments.length?(domain(_),rescale()):domain()};scale.range\x3dfunction(_){return arguments.length?(range\x3d[+_[0],+_[1]],rescale()):range.slice()};scale.rangeRound\x3dfunction(_){range\x3d[+_[0],+_[1]];round\x3d!0;return rescale()};scale.bandwidth\x3dfunction(){return bandwidth};scale.step\x3dfunction(){return step};scale.round\x3dfunction(_){return arguments.length?(round\x3d!!_,rescale()):round};scale.padding\x3dfunction(_){return arguments.length?\n(paddingInner\x3dpaddingOuter\x3dMath.max(0,Math.min(1,_)),rescale()):paddingInner};scale.paddingInner\x3dfunction(_){return arguments.length?(paddingInner\x3dMath.max(0,Math.min(1,_)),rescale()):paddingInner};scale.paddingOuter\x3dfunction(_){return arguments.length?(paddingOuter\x3dMath.max(0,Math.min(1,_)),rescale()):paddingOuter};scale.align\x3dfunction(_){return arguments.length?(align\x3dMath.max(0,Math.min(1,_)),rescale()):align};scale.invertRange\x3dfunction(_){if(null!\x3d_[0]\x26\x26null!\x3d_[1]){var lo\x3d+_[0],hi\x3d+_[1],values\x3d\n(_\x3drange[1]\x3crange[0])?ordinalRange().reverse():ordinalRange(),n\x3dvalues.length-1;if(lo\x3d\x3d\x3dlo\x26\x26hi\x3d\x3d\x3dhi){if(hi\x3clo){var t\x3dlo;lo\x3dhi;hi\x3dt}if(!(hi\x3cvalues[0]||lo\x3erange[1-_])){var a\x3dMath.max(0,d3Array.bisectRight(values,lo)-1);hi\x3dlo\x3d\x3d\x3dhi?a:d3Array.bisectRight(values,hi)-1;lo-values[a]\x3ebandwidth+1E-10\x26\x26++a;_\x26\x26(t\x3da,a\x3dn-hi,hi\x3dn-t);return a\x3ehi?void 0:domain().slice(a,hi+1)}}}};scale.invert\x3dfunction(_){return(_\x3dscale.invertRange([_,_]))?_[0]:_};scale.copy\x3dfunction(){return band().domain(domain()).range(range).round(round).paddingInner(paddingInner).paddingOuter(paddingOuter).align(align)};\nreturn rescale()}function pointish(scale){var copy\x3dscale.copy;scale.padding\x3dscale.paddingOuter;delete scale.paddingInner;scale.copy\x3dfunction(){return pointish(copy())};return scale}function numbers(_){return map.call(_,function(x){return+x})}function scaleBinOrdinal(){function scale(x){return null\x3d\x3dx||x!\x3d\x3dx?void 0:range[(d3Array.bisect(domain,x)-1)%range.length]}var domain\x3d[],range\x3d[];scale.domain\x3dfunction(_){return arguments.length?(domain\x3dnumbers(_),scale):domain.slice()};scale.range\x3dfunction(_){return arguments.length?\n(range\x3dslice.call(_),scale):range.slice()};scale.tickFormat\x3dfunction(count,specifier){return $.tickFormat(domain[0],vegaUtil.peek(domain),null\x3d\x3dcount?10:count,specifier)};scale.copy\x3dfunction(){return scaleBinOrdinal().domain(scale.domain()).range(scale.range())};return scale}function create(type,constructor,metadata){var ctr\x3dfunction(){var s\x3dconstructor();s.invertRange||(s.invertRange\x3ds.invert?invertRange(s):s.invertExtent?invertRangeExtent(s):void 0);s.type\x3dtype;return s};ctr.metadata\x3dvegaUtil.toSet(vegaUtil.array(metadata));\nreturn ctr}function scale$jscomp$0(type,scale,metadata){return 1\x3carguments.length?(scales[type]\x3dcreate(type,scale,metadata),this):isValidScaleType(type)?scales[type]:void 0}function isValidScaleType(type){return vegaUtil.hasOwnProperty(scales,type)}function hasType(key,type){return(key\x3dscales[key])\x26\x26key.metadata[type]}function isDiscrete(key){return hasType(key,\x22discrete\x22)}function isDiscretizing(key){return hasType(key,\x22discretizing\x22)}function isLogarithmic(key){return hasType(key,\x22log\x22)}function isTemporal(key){return hasType(key,\n\x22temporal\x22)}function interpolateColors(colors,type,gamma){return $$1.piecewise(interpolate(type||\x22rgb\x22,gamma),colors)}function interpolate(type,gamma){type\x3d$$1[method(type)];return null!\x3dgamma\x26\x26type\x26\x26type.gamma?type.gamma(gamma):type}function method(type){return\x22interpolate\x22+type.toLowerCase().split(\x22-\x22).map(function(s){return s[0].toUpperCase()+s.slice(1)}).join(\x22\x22)}function colors$jscomp$0(palette){for(var n\x3dpalette.length/6|0,c\x3dArray(n),i\x3d0;i\x3cn;)c[i]\x3d\x22#\x22+palette.slice(6*i,6*++i);return c}function apply(_,\nf){for(var k in _)scheme$jscomp$0(k,f(_[k]))}function scheme$jscomp$0(name,scheme){name\x3dname\x26\x26name.toLowerCase();return 1\x3carguments.length?(schemes[name]\x3dscheme,this):schemes[name]}function validTicks(scale,ticks,count){var range\x3dscale.range(),lo\x3drange[0],hi\x3dvegaUtil.peek(range);range\x3dascending;lo\x3ehi\x26\x26(range\x3dhi,hi\x3dlo,lo\x3drange,range\x3ddescending);lo\x3dMath.floor(lo);hi\x3dMath.ceil(hi);ticks\x3dticks.map(function(v){return[v,scale(v)]}).filter(function(_){return lo\x3c\x3d_[1]\x26\x26_[1]\x3c\x3dhi}).sort(range).map(function(_){return _[0]});\nif(0\x3ccount\x26\x261\x3cticks.length){for(range\x3d[ticks[0],vegaUtil.peek(ticks)];ticks.length\x3ecount\x26\x263\x3c\x3dticks.length;)ticks\x3dticks.filter(function(_,i){return!(i%2)});3\x3eticks.length\x26\x26(ticks\x3drange)}return ticks}function tickValues(scale,count){return scale.bins?validTicks(scale,scale.bins):scale.ticks?scale.ticks(count):scale.domain()}function tickFormat(locale,scale,count,specifier,formatType,noSkip){var type\x3dscale.type,format\x3ddefaultFormatter;if(\x22time\x22\x3d\x3d\x3dtype||\x22time\x22\x3d\x3d\x3dformatType)format\x3dlocale.timeFormat(specifier);\nelse if(\x22utc\x22\x3d\x3d\x3dtype||\x22utc\x22\x3d\x3d\x3dformatType)format\x3dlocale.utcFormat(specifier);else if(isLogarithmic(type)){var varfmt\x3dlocale.formatFloat(specifier);if(noSkip||scale.bins)format\x3dvarfmt;else{var test\x3dtickLog(scale,count,!1);format\x3dfunction(_){return test(_)?varfmt(_):\x22\x22}}}else scale.tickFormat?(scale\x3dscale.domain(),format\x3dlocale.formatSpan(scale[0],scale[scale.length-1],count,specifier)):specifier\x26\x26(format\x3dlocale.format(specifier));return format}function tickLog(scale,count,values){var ticks\x3dtickValues(scale,\ncount),base\x3dscale.base(),logb\x3dMath.log(base),k\x3dMath.max(1,base*count/ticks.length);scale\x3dfunction(d){d/\x3dMath.pow(base,Math.round(Math.log(d)/logb));d*base\x3cbase-.5\x26\x26(d*\x3dbase);return d\x3c\x3dk};return values?ticks.filter(scale):scale}function labelValues(scale,count){scale.bins?(scale\x3dscale.bins,count\x3dscale.slice(0,-1),count.max\x3dvegaUtil.peek(scale),scale\x3dcount):\x22log\x22\x3d\x3d\x3dscale.type?scale\x3dtickLog(scale,count,!0):symbols[scale.type]?(scale\x3dscale[symbols[scale.type]](),scale\x3d[-Infinity].concat(scale),scale.max\x3d\nInfinity):scale\x3dtickValues(scale,count);return scale}function labelFormat(locale,scale,count,type,specifier,formatType,noSkip){if(formats[scale.type]\x26\x26\x22time\x22!\x3d\x3dformatType\x26\x26\x22utc\x22!\x3d\x3dformatType){count\x3dscale[formats[scale.type]]();formatType\x3dcount.length;noSkip\x3d1\x3cformatType?count[1]-count[0]:count[0];var i;for(i\x3d1;i\x3cformatType;++i)noSkip\x3dMath.min(noSkip,count[i]-count[i-1]);locale\x3dlocale.formatSpan(0,noSkip,30,specifier)}else locale\x3dtickFormat(locale,scale,count,specifier,formatType,noSkip);return\x22symbol\x22\x3d\x3d\x3d\ntype\x26\x26(symbols[scale.type]||scale.bins)?formatRange(locale):\x22discrete\x22\x3d\x3d\x3dtype?formatDiscrete(locale):formatPoint(locale)}function formatRange(format){return function(value,index,array){index\x3darray[index+1];array\x3darray.max;array\x3dnull!\x3darray?array:Infinity;index\x3dnull!\x3dindex?index:array;value\x3dNumber.isFinite(value)?format(value):null;index\x3dNumber.isFinite(index)?format(index):null;return value\x26\x26index?value+\x22 \u2013 \x22+index:index?\x22\\x3c \x22+index:\x22\u2265 \x22+value}}function formatDiscrete(format){return function(value,\nindex){return index?format(value):null}}function formatPoint(format){return function(value){return format(value)}}var map\x3dArray.prototype.map,slice\x3dArray.prototype.slice,scales\x3d{};scale$jscomp$0(\x22identity\x22,$.scaleIdentity);scale$jscomp$0(\x22linear\x22,$.scaleLinear,\x22continuous\x22);scale$jscomp$0(\x22log\x22,$.scaleLog,[\x22continuous\x22,\x22log\x22]);scale$jscomp$0(\x22pow\x22,$.scalePow,\x22continuous\x22);scale$jscomp$0(\x22sqrt\x22,$.scaleSqrt,\x22continuous\x22);scale$jscomp$0(\x22symlog\x22,$.scaleSymlog,\x22continuous\x22);scale$jscomp$0(\x22time\x22,$.scaleTime,\n[\x22continuous\x22,\x22temporal\x22]);scale$jscomp$0(\x22utc\x22,$.scaleUtc,[\x22continuous\x22,\x22temporal\x22]);scale$jscomp$0(\x22sequential\x22,$.scaleSequential,[\x22continuous\x22,\x22interpolating\x22]);scale$jscomp$0(\x22sequential-linear\x22,$.scaleSequential,[\x22continuous\x22,\x22interpolating\x22]);scale$jscomp$0(\x22sequential-log\x22,$.scaleSequentialLog,[\x22continuous\x22,\x22interpolating\x22,\x22log\x22]);scale$jscomp$0(\x22sequential-pow\x22,$.scaleSequentialPow,[\x22continuous\x22,\x22interpolating\x22]);scale$jscomp$0(\x22sequential-sqrt\x22,$.scaleSequentialSqrt,[\x22continuous\x22,\x22interpolating\x22]);\nscale$jscomp$0(\x22sequential-symlog\x22,$.scaleSequentialSymlog,[\x22continuous\x22,\x22interpolating\x22]);scale$jscomp$0(\x22diverging-linear\x22,$.scaleDiverging,[\x22continuous\x22,\x22interpolating\x22]);scale$jscomp$0(\x22diverging-log\x22,$.scaleDivergingLog,[\x22continuous\x22,\x22interpolating\x22,\x22log\x22]);scale$jscomp$0(\x22diverging-pow\x22,$.scaleDivergingPow,[\x22continuous\x22,\x22interpolating\x22]);scale$jscomp$0(\x22diverging-sqrt\x22,$.scaleDivergingSqrt,[\x22continuous\x22,\x22interpolating\x22]);scale$jscomp$0(\x22diverging-symlog\x22,$.scaleDivergingSymlog,[\x22continuous\x22,\n\x22interpolating\x22]);scale$jscomp$0(\x22quantile\x22,$.scaleQuantile,[\x22discretizing\x22,\x22quantile\x22]);scale$jscomp$0(\x22quantize\x22,$.scaleQuantize,\x22discretizing\x22);scale$jscomp$0(\x22threshold\x22,$.scaleThreshold,\x22discretizing\x22);scale$jscomp$0(\x22bin-ordinal\x22,scaleBinOrdinal,[\x22discrete\x22,\x22discretizing\x22]);scale$jscomp$0(\x22ordinal\x22,$.scaleOrdinal,\x22discrete\x22);scale$jscomp$0(\x22band\x22,band,\x22discrete\x22);scale$jscomp$0(\x22point\x22,function(){return pointish(band().paddingInner(1))},\x22discrete\x22);var scaleProps\x3d[\x22clamp\x22,\x22base\x22,\x22constant\x22,\n\x22exponent\x22],schemes\x3d{};apply({category10:\x221f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf\x22,category20:\x221f77b4aec7e8ff7f0effbb782ca02c98df8ad62728ff98969467bdc5b0d58c564bc49c94e377c2f7b6d27f7f7fc7c7c7bcbd22dbdb8d17becf9edae5\x22,category20b:\x22393b795254a36b6ecf9c9ede6379398ca252b5cf6bcedb9c8c6d31bd9e39e7ba52e7cb94843c39ad494ad6616be7969c7b4173a55194ce6dbdde9ed6\x22,category20c:\x223182bd6baed69ecae1c6dbefe6550dfd8d3cfdae6bfdd0a231a35474c476a1d99bc7e9c0756bb19e9ac8bcbddcdadaeb636363969696bdbdbdd9d9d9\x22,\ntableau10:\x224c78a8f58518e4575672b7b254a24beeca3bb279a2ff9da69d755dbab0ac\x22,tableau20:\x224c78a89ecae9f58518ffbf7954a24b88d27ab79a20f2cf5b43989483bcb6e45756ff9d9879706ebab0acd67195fcbfd2b279a2d6a5c99e765fd8b5a5\x22,accent:\x227fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666\x22,dark2:\x221b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666\x22,paired:\x22a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928\x22,pastel1:\x22fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2\x22,pastel2:\x22b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc\x22,\nset1:\x22e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999\x22,set2:\x2266c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3\x22,set3:\x228dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f\x22},colors$jscomp$0);apply({blues:\x22cfe1f2bed8eca8cee58fc1de74b2d75ba3cf4592c63181bd206fb2125ca40a4a90\x22,greens:\x22d3eecdc0e6baabdda594d3917bc77d60ba6c46ab5e329a512089430e7735036429\x22,greys:\x22e2e2e2d4d4d4c4c4c4b1b1b19d9d9d8888887575756262624d4d4d3535351e1e1e\x22,oranges:\x22fdd8b3fdc998fdb87bfda55efc9244f87f2cf06b18e4580bd14904b93d029f3303\x22,\npurples:\x22e2e1efd4d4e8c4c5e0b4b3d6a3a0cc928ec3827cb97566ae684ea25c3696501f8c\x22,reds:\x22fdc9b4fcb49afc9e80fc8767fa7051f6573fec3f2fdc2a25c81b1db21218970b13\x22,blueGreen:\x22d5efedc1e8e0a7ddd18bd2be70c6a958ba9144ad77319c5d2089460e7736036429\x22,bluePurple:\x22ccddecbad0e4a8c2dd9ab0d4919cc98d85be8b6db28a55a6873c99822287730f71\x22,greenBlue:\x22d3eecec5e8c3b1e1bb9bd8bb82cec269c2ca51b2cd3c9fc7288abd1675b10b60a1\x22,orangeRed:\x22fddcaffdcf9bfdc18afdad77fb9562f67d53ee6545e24932d32d1ebf130da70403\x22,purpleBlue:\x22dbdaebc8cee4b1c3de97b7d87bacd15b9fc93a90c01e7fb70b70ab056199045281\x22,\npurpleBlueGreen:\x22dbd8eac8cee4b0c3de93b7d872acd1549fc83892bb1c88a3097f8702736b016353\x22,purpleRed:\x22dcc9e2d3b3d7ce9eccd186c0da6bb2e14da0e23189d91e6fc61159ab07498f023a\x22,redPurple:\x22fccfccfcbec0faa9b8f98faff571a5ec539ddb3695c41b8aa908808d0179700174\x22,yellowGreen:\x22e4f4acd1eca0b9e2949ed68880c97c62bb6e47aa5e3297502083440e723b036034\x22,yellowOrangeBrown:\x22feeaa1fedd84fecc63feb746fca031f68921eb7215db5e0bc54c05ab3d038f3204\x22,yellowOrangeRed:\x22fee087fed16ffebd59fea849fd903efc7335f9522bee3423de1b20ca0b22af0225\x22,blueOrange:\x22134b852f78b35da2cb9dcae1d2e5eff2f0ebfce0bafbbf74e8932fc5690d994a07\x22,\nbrownBlueGreen:\x22704108a0651ac79548e3c78af3e6c6eef1eac9e9e48ed1c74da79e187a72025147\x22,purpleGreen:\x225b1667834792a67fb6c9aed3e6d6e8eff0efd9efd5aedda971bb75368e490e5e29\x22,purpleOrange:\x224114696647968f83b7b9b4d6dadbebf3eeeafce0bafbbf74e8932fc5690d994a07\x22,redBlue:\x228c0d25bf363adf745ef4ae91fbdbc9f2efeed2e5ef9dcae15da2cb2f78b3134b85\x22,redGrey:\x228c0d25bf363adf745ef4ae91fcdccbfaf4f1e2e2e2c0c0c0969696646464343434\x22,yellowGreenBlue:\x22eff9bddbf1b4bde5b594d5b969c5be45b4c22c9ec02182b82163aa23479c1c3185\x22,redYellowBlue:\x22a50026d4322cf16e43fcac64fedd90faf8c1dcf1ecabd6e875abd04a74b4313695\x22,\nredYellowGreen:\x22a50026d4322cf16e43fcac63fedd8df9f7aed7ee8ea4d86e64bc6122964f006837\x22,pinkYellowGreen:\x228e0152c0267edd72adf0b3d6faddedf5f3efe1f2cab6de8780bb474f9125276419\x22,spectral:\x229e0142d13c4bf0704afcac63fedd8dfbf8b0e0f3a1a9dda269bda94288b55e4fa2\x22,viridis:\x22440154470e61481a6c482575472f7d443a834144873d4e8a39568c35608d31688e2d708e2a788e27818e23888e21918d1f988b1fa08822a8842ab07f35b77943bf7154c56866cc5d7ad1518fd744a5db36bcdf27d2e21be9e51afde725\x22,magma:\x220000040404130b0924150e3720114b2c11603b0f704a107957157e651a80721f817f24828c29819a2e80a8327db6377ac43c75d1426fde4968e95462f1605df76f5cfa7f5efc8f65fe9f6dfeaf78febf84fece91fddea0fcedaffcfdbf\x22,\ninferno:\x220000040403130c0826170c3b240c4f330a5f420a68500d6c5d126e6b176e781c6d86216b932667a12b62ae305cbb3755c73e4cd24644dd513ae65c30ed6925f3771af8850ffb9506fca50afcb519fac62df6d645f2e661f3f484fcffa4\x22,plasma:\x220d088723069033059742039d5002a25d01a66a00a87801a88405a7900da49c179ea72198b12a90ba3488c33d80cb4779d35171da5a69e16462e76e5bed7953f2834cf68f44fa9a3dfca636fdb32ffec029fcce25f9dc24f5ea27f0f921\x22,rainbow:\x226e40aa883eb1a43db3bf3cafd83fa4ee4395fe4b83ff576eff6659ff7847ff8c38f3a130e2b72fcfcc36bee044aff05b8ff4576ff65b52f6673af27828ea8d1ddfa319d0b81cbecb23abd82f96e03d82e14c6edb5a5dd0664dbf6e40aa\x22,\nsinebow:\x22ff4040fc582af47218e78d0bd5a703bfbf00a7d5038de70b72f41858fc2a40ff402afc5818f4720be78d03d5a700bfbf03a7d50b8de71872f42a58fc4040ff582afc7218f48d0be7a703d5bf00bfd503a7e70b8df41872fc2a58ff4040\x22,browns:\x22eedbbdecca96e9b97ae4a865dc9856d18954c7784cc0673fb85536ad44339f3632\x22,tealBlues:\x22bce4d89dd3d181c3cb65b3c245a2b9368fae347da0306a932c5985\x22,teals:\x22bbdfdfa2d4d58ac9c975bcbb61b0af4da5a43799982b8b8c1e7f7f127273006667\x22,warmGreys:\x22dcd4d0cec5c1c0b8b4b3aaa7a59c9998908c8b827f7e7673726866665c5a59504e\x22,goldGreen:\x22f4d166d5ca60b6c35c98bb597cb25760a6564b9c533f8f4f33834a257740146c36\x22,\ngoldOrange:\x22f4d166f8be5cf8aa4cf5983bf3852aef701be2621fd65322c54923b142239e3a26\x22,goldRed:\x22f4d166f6be59f9aa51fc964ef6834bee734ae56249db5247cf4244c43141b71d3e\x22,lightGreyRed:\x22efe9e6e1dad7d5cbc8c8bdb9bbaea9cd967ddc7b43e15f19df4011dc000b\x22,lightGreyTeal:\x22e4eaead6dcddc8ced2b7c2c7a6b4bc64b0bf22a6c32295c11f85be1876bc\x22,lightMulti:\x22e0f1f2c4e9d0b0de9fd0e181f6e072f6c053f3993ef77440ef4a3c\x22,lightOrange:\x22f2e7daf7d5baf9c499fab184fa9c73f68967ef7860e8645bde515bd43d5b\x22,lightTealBlue:\x22e3e9e0c0dccf9aceca7abfc859afc0389fb9328dad2f7ca0276b95255988\x22,\ndarkBlue:\x223232322d46681a5c930074af008cbf05a7ce25c0dd38daed50f3faffffff\x22,darkGold:\x223c3c3c584b37725e348c7631ae8b2bcfa424ecc31ef9de30fff184ffffff\x22,darkGreen:\x223a3a3a215748006f4d048942489e4276b340a6c63dd2d836ffeb2cffffaa\x22,darkMulti:\x223737371f5287197d8c29a86995ce3fffe800ffffff\x22,darkRed:\x223434347036339e3c38cc4037e75d1eec8620eeab29f0ce32ffeb2c\x22},function(_){return interpolateColors(colors$jscomp$0(_))});var defaultFormatter\x3dfunction(value){return vegaUtil.isArray(value)?value.map(function(v){return String(v)}):\nString(value)},ascending\x3dfunction(a,b){return a[1]-b[1]},descending\x3dfunction(a,b){return b[1]-a[1]},$jscomp$compprop46\x3d{},symbols\x3d($jscomp$compprop46.quantile\x3d\x22quantiles\x22,$jscomp$compprop46.quantize\x3d\x22thresholds\x22,$jscomp$compprop46.threshold\x3d\x22domain\x22,$jscomp$compprop46);$jscomp$compprop46\x3d{};var formats\x3d($jscomp$compprop46.quantile\x3d\x22quantiles\x22,$jscomp$compprop46.quantize\x3d\x22domain\x22,$jscomp$compprop46);Object.defineProperty(exports,\x22scaleImplicit\x22,{enumerable:!0,get:function(){return $.scaleImplicit}});\nexports.Band\x3d\x22band\x22;exports.BinOrdinal\x3d\x22bin-ordinal\x22;exports.DiscreteLegend\x3d\x22discrete\x22;exports.Diverging\x3d\x22diverging\x22;exports.GradientLegend\x3d\x22gradient\x22;exports.Identity\x3d\x22identity\x22;exports.Linear\x3d\x22linear\x22;exports.Log\x3d\x22log\x22;exports.Ordinal\x3d\x22ordinal\x22;exports.Point\x3d\x22point\x22;exports.Pow\x3d\x22pow\x22;exports.Quantile\x3d\x22quantile\x22;exports.Quantize\x3d\x22quantize\x22;exports.Sequential\x3d\x22sequential\x22;exports.Sqrt\x3d\x22sqrt\x22;exports.SymbolLegend\x3d\x22symbol\x22;exports.Symlog\x3d\x22symlog\x22;exports.Threshold\x3d\x22threshold\x22;exports.Time\x3d\x22time\x22;exports.UTC\x3d\n\x22utc\x22;exports.bandSpace\x3dbandSpace;exports.domainCaption\x3dfunction(locale,scale,opt){opt\x3dopt||{};var max\x3dMath.max(3,opt.maxlen||7),specifier\x3dopt.format,type\x3d(opt\x3dopt.formatType)||scale.type;vegaUtil.isString(specifier)\x26\x26isTemporal(type)\x26\x26(specifier\x3dspecifier.replace(/%a/g,\x22%A\x22).replace(/%b/g,\x22%B\x22));locale\x3dspecifier||\x22time\x22!\x3d\x3dtype?specifier||\x22utc\x22!\x3d\x3dtype?labelFormat(locale,scale,5,null,specifier,opt,!0):locale.utcFormat(\x22%A, %d %B %Y, %X UTC\x22):locale.timeFormat(\x22%A, %d %B %Y, %X\x22);if(isDiscretizing(scale.type))return max\x3d\nlabelValues(scale).slice(1).map(locale),scale\x3dmax.length,scale+\x22 boundar\x22+(1\x3d\x3d\x3dscale?\x22y\x22:\x22ies\x22)+\x22: \x22+max.join(\x22, \x22);if(isDiscrete(scale.type))return specifier\x3dscale.domain(),scale\x3dspecifier.length,max\x3dscale\x3emax?specifier.slice(0,max-2).map(locale).join(\x22, \x22)+\x22, ending with \x22+specifier.slice(-1).map(locale):specifier.map(locale).join(\x22, \x22),scale+\x22 value\x22+(1\x3d\x3d\x3dscale?\x22\x22:\x22s\x22)+\x22: \x22+max;max\x3dscale.domain();return\x22values from \x22+locale(max[0])+\x22 to \x22+locale(vegaUtil.peek(max))};exports.interpolate\x3dinterpolate;\nexports.interpolateColors\x3dinterpolateColors;exports.interpolateRange\x3dfunction(interpolator,range){var start\x3drange[0],span\x3dvegaUtil.peek(range)-start;return function(i){return interpolator(start+i*span)}};exports.isContinuous\x3dfunction(key){return hasType(key,\x22continuous\x22)};exports.isDiscrete\x3disDiscrete;exports.isDiscretizing\x3disDiscretizing;exports.isInterpolating\x3dfunction(key){return hasType(key,\x22interpolating\x22)};exports.isLogarithmic\x3disLogarithmic;exports.isQuantile\x3dfunction(key){return hasType(key,\n\x22quantile\x22)};exports.isTemporal\x3disTemporal;exports.isValidScaleType\x3disValidScaleType;exports.labelFormat\x3dlabelFormat;exports.labelFraction\x3dfunction(scale){var domain\x3dscale.domain(),count\x3ddomain.length-1,lo\x3d+domain[0];domain\x3d+vegaUtil.peek(domain);var span\x3ddomain-lo;\x22threshold\x22\x3d\x3d\x3dscale.type\x26\x26(scale\x3dcount?span/count:.1,lo-\x3dscale,span\x3ddomain+scale-lo);return function(value){return(value-lo)/span}};exports.labelValues\x3dlabelValues;exports.quantizeInterpolator\x3dfunction(interpolator,count){for(var samples\x3d\nArray(count),n\x3dcount+1,i\x3d0;i\x3ccount;)samples[i]\x3dinterpolator(++i/n);return samples};exports.scale\x3dscale$jscomp$0;exports.scaleCopy\x3dfunction(scale){var t\x3dscale.type;scale\x3dscale.copy();scale.type\x3dt;return scale};exports.scaleFraction\x3dfunction(scale$1,min,max){var delta\x3dmax-min,t;if(delta\x26\x26Number.isFinite(delta)){delta\x3d(t\x3dscale$1.type).indexOf(\x22-\x22);t\x3d0\x3edelta?t:t.slice(delta+1);var s\x3dscale$jscomp$0(t)().domain([min,max]).range([0,1]);scaleProps.forEach(function(m){return scale$1[m]?s[m](scale$1[m]()):\n0});return s}return vegaUtil.constant(.5)};exports.scheme\x3dscheme$jscomp$0;exports.tickCount\x3dfunction(scale,count,minStep){vegaUtil.isNumber(count)\x26\x26(scale.bins\x26\x26(count\x3dMath.max(count,scale.bins.length)),null!\x3dminStep\x26\x26(count\x3dMath.min(count,Math.floor(vegaUtil.span(scale.domain())/minStep||1))));if(vegaUtil.isObject(count)){var step\x3dcount.step;count\x3dcount.interval}vegaUtil.isString(count)\x26\x26(count\x3d\x22time\x22\x3d\x3d\x3dscale.type?vegaTime.timeInterval(count):\x22utc\x22\x3d\x3dscale.type?vegaTime.utcInterval(count):vegaUtil.error(\x22Only time and utc scales accept interval strings.\x22),\nstep\x26\x26(count\x3dcount.every(step)));return count};exports.tickFormat\x3dtickFormat;exports.tickValues\x3dtickValues;exports.validTicks\x3dvalidTicks;Object.defineProperty(exports,\x22__esModule\x22,{value:!0})})}");
SHADOW_ENV.evalLoad("module$node_modules$vega_scenegraph$build$vega_scenegraph.js", true , "shadow$provide.module$node_modules$vega_scenegraph$build$vega_scenegraph\x3dfunction(global$jscomp$0,require,module,exports$jscomp$0){(function(global,factory){\x22object\x22\x3d\x3d\x3dtypeof exports$jscomp$0\x26\x26\x22undefined\x22!\x3d\x3dtypeof module?factory(exports$jscomp$0,require(\x22module$node_modules$vega_util$build$vega_util\x22),require(\x22module$node_modules$d3_shape$dist$d3_shape\x22),require(\x22module$node_modules$d3_path$dist$d3_path\x22),require(\x22module$node_modules$vega_canvas$build$vega_canvas\x22),require(\x22module$node_modules$vega_loader$build$vega_loader\x22),\nrequire(\x22module$node_modules$vega_scale$build$vega_scale\x22)):\x22function\x22\x3d\x3d\x3dtypeof define\x26\x26define.amd?define(\x22exports vega-util d3-shape d3-path vega-canvas vega-loader vega-scale\x22.split(\x22 \x22),factory):(global\x3dglobal||self,factory(global.vega\x3d{},global.vega,global.d3,global.d3,global.vega,global.vega,global.vega))})(this,function(exports,vegaUtil,d3Shape,d3Path,vegaCanvas,vegaLoader,vegaScale){function gradientRef(g,defs,base){var id\x3dg.id,type\x3dg.gradient,prefix\x3d\x22radial\x22\x3d\x3d\x3dtype?\x22p_\x22:\x22\x22;id||(id\x3dg.id\x3d\x22gradient_\x22+\ngradient_id++,\x22radial\x22\x3d\x3d\x3dtype?(g.x1\x3dget(g.x1,.5),g.y1\x3dget(g.y1,.5),g.r1\x3dget(g.r1,0),g.x2\x3dget(g.x2,.5),g.y2\x3dget(g.y2,.5),g.r2\x3dget(g.r2,.5),prefix\x3d\x22p_\x22):(g.x1\x3dget(g.x1,0),g.y1\x3dget(g.y1,0),g.x2\x3dget(g.x2,1),g.y2\x3dget(g.y2,0)));defs[id]\x3dg;return\x22url(\x22+(base||\x22\x22)+\x22#\x22+prefix+id+\x22)\x22}function get(val,def){return null!\x3dval?val:def}function curves(type,orientation,tension){type\x3dvegaUtil.hasOwnProperty(lookup,type)\x26\x26lookup[type];var curve\x3dnull;type\x26\x26(curve\x3dtype.curve||type[orientation||\x22vertical\x22],type.tension\x26\x26\nnull!\x3dtension\x26\x26(curve\x3dcurve[type.tension](tension)));return curve}function pathParse(pathstr){var result\x3d[],param,n,m;pathstr\x3dpathstr.slice().replace(regexp[0],\x22###$1\x22).split(regexp[1]).slice(1);var i\x3d0;for(n\x3dpathstr.length;i\x3cn;++i){var curr\x3dpathstr[i];var chunks\x3dcurr.slice(1).trim().replace(regexp[2],\x22$1###$2\x22).split(regexp[3]);var cmd\x3dcurr.charAt(0);curr\x3d[cmd];var j\x3d0;for(m\x3dchunks.length;j\x3cm;++j)(param\x3d+chunks[j])\x3d\x3d\x3dparam\x26\x26curr.push(param);chunks\x3dcmdlen[cmd.toLowerCase()];if(curr.length-1\x3echunks)for(j\x3d\n1,m\x3dcurr.length;j\x3cm;j+\x3dchunks)result.push([cmd].concat(curr.slice(j,j+chunks)));else result.push(curr)}return result}function segments(x,y,rx,ry,large,sweep,rotateX,ox,oy){var key\x3djoin.call(arguments);if(segmentCache[key])return segmentCache[key];var th\x3drotateX*DegToRad,sin_th\x3dMath.sin(th);th\x3dMath.cos(th);rx\x3dMath.abs(rx);ry\x3dMath.abs(ry);var px\x3dth*(ox-x)*.5+sin_th*(oy-y)*.5,py\x3dth*(oy-y)*.5-sin_th*(ox-x)*.5;px\x3dpx*px/(rx*rx)+py*py/(ry*ry);1\x3cpx\x26\x26(px\x3dMath.sqrt(px),rx*\x3dpx,ry*\x3dpx);var a00\x3dth/rx,a01\x3dsin_th/\nrx,a10\x3d-sin_th/ry,a11\x3dth/ry;px\x3da00*ox+a01*oy;py\x3da10*ox+a11*oy;a00\x3da00*x+a01*y;a01\x3da10*x+a11*y;a10\x3d1/((a00-px)*(a00-px)+(a01-py)*(a01-py))-.25;0\x3ea10\x26\x26(a10\x3d0);a11\x3dMath.sqrt(a10);sweep\x3d\x3dlarge\x26\x26(a11\x3d-a11);a10\x3d.5*(px+a00)-a11*(a01-py);a11\x3d.5*(py+a01)+a11*(a00-px);px\x3dMath.atan2(py-a11,px-a10);py\x3dMath.atan2(a01-a11,a00-a10)-px;0\x3epy\x26\x261\x3d\x3d\x3dsweep?py+\x3dTau:0\x3cpy\x26\x260\x3d\x3d\x3dsweep\x26\x26(py-\x3dTau);a00\x3dMath.ceil(Math.abs(py/(HalfPi+.001)));a01\x3d[];for(var i\x3d0;i\x3ca00;++i)a01[i]\x3d[a10,a11,px+i*py/a00,px+(i+1)*py/a00,rx,ry,sin_th,\nth];return segmentCache[key]\x3da01}function pathRender(context,path,l,t,sX,sY){var previous\x3dnull,x\x3d0,y\x3d0,controlX\x3d0,controlY\x3d0;null\x3d\x3dl\x26\x26(l\x3d0);null\x3d\x3dt\x26\x26(t\x3d0);null\x3d\x3dsX\x26\x26(sX\x3d1);null\x3d\x3dsY\x26\x26(sY\x3dsX);context.beginPath\x26\x26context.beginPath();for(var i\x3d0,len\x3dpath.length;i\x3clen;++i){var current\x3dpath[i];if(1!\x3d\x3dsX||1!\x3d\x3dsY){var tempX\x3dsX;var tempY\x3dsY;var c\x3dtemp[0]\x3dcurrent[0];if(\x22a\x22\x3d\x3d\x3dc||\x22A\x22\x3d\x3d\x3dc)temp[1]\x3dtempX*current[1],temp[2]\x3dtempY*current[2],temp[3]\x3dcurrent[3],temp[4]\x3dcurrent[4],temp[5]\x3dcurrent[5],temp[6]\x3dtempX*current[6],\ntemp[7]\x3dtempY*current[7];else if(\x22h\x22\x3d\x3d\x3dc||\x22H\x22\x3d\x3d\x3dc)temp[1]\x3dtempX*current[1];else if(\x22v\x22\x3d\x3d\x3dc||\x22V\x22\x3d\x3d\x3dc)temp[1]\x3dtempY*current[1];else{c\x3d1;for(var n\x3dcurrent.length;c\x3cn;++c)temp[c]\x3d(1\x3d\x3dc%2?tempX:tempY)*current[c]}current\x3dtemp}switch(current[0]){case \x22l\x22:x+\x3dcurrent[1];y+\x3dcurrent[2];context.lineTo(x+l,y+t);break;case \x22L\x22:x\x3dcurrent[1];y\x3dcurrent[2];context.lineTo(x+l,y+t);break;case \x22h\x22:x+\x3dcurrent[1];context.lineTo(x+l,y+t);break;case \x22H\x22:x\x3dcurrent[1];context.lineTo(x+l,y+t);break;case \x22v\x22:y+\x3dcurrent[1];context.lineTo(x+\nl,y+t);break;case \x22V\x22:y\x3dcurrent[1];context.lineTo(x+l,y+t);break;case \x22m\x22:x+\x3dcurrent[1];y+\x3dcurrent[2];context.moveTo(x+l,y+t);break;case \x22M\x22:x\x3dcurrent[1];y\x3dcurrent[2];context.moveTo(x+l,y+t);break;case \x22c\x22:tempX\x3dx+current[5];tempY\x3dy+current[6];controlX\x3dx+current[3];controlY\x3dy+current[4];context.bezierCurveTo(x+current[1]+l,y+current[2]+t,controlX+l,controlY+t,tempX+l,tempY+t);x\x3dtempX;y\x3dtempY;break;case \x22C\x22:x\x3dcurrent[5];y\x3dcurrent[6];controlX\x3dcurrent[3];controlY\x3dcurrent[4];context.bezierCurveTo(current[1]+\nl,current[2]+t,controlX+l,controlY+t,x+l,y+t);break;case \x22s\x22:tempX\x3dx+current[3];tempY\x3dy+current[4];controlX\x3d2*x-controlX;controlY\x3d2*y-controlY;context.bezierCurveTo(controlX+l,controlY+t,x+current[1]+l,y+current[2]+t,tempX+l,tempY+t);controlX\x3dx+current[1];controlY\x3dy+current[2];x\x3dtempX;y\x3dtempY;break;case \x22S\x22:tempX\x3dcurrent[3];tempY\x3dcurrent[4];controlX\x3d2*x-controlX;controlY\x3d2*y-controlY;context.bezierCurveTo(controlX+l,controlY+t,current[1]+l,current[2]+t,tempX+l,tempY+t);x\x3dtempX;y\x3dtempY;controlX\x3dcurrent[1];\ncontrolY\x3dcurrent[2];break;case \x22q\x22:tempX\x3dx+current[3];tempY\x3dy+current[4];controlX\x3dx+current[1];controlY\x3dy+current[2];context.quadraticCurveTo(controlX+l,controlY+t,tempX+l,tempY+t);x\x3dtempX;y\x3dtempY;break;case \x22Q\x22:tempX\x3dcurrent[3];tempY\x3dcurrent[4];context.quadraticCurveTo(current[1]+l,current[2]+t,tempX+l,tempY+t);x\x3dtempX;y\x3dtempY;controlX\x3dcurrent[1];controlY\x3dcurrent[2];break;case \x22t\x22:tempX\x3dx+current[1];tempY\x3dy+current[2];null\x3d\x3d\x3dprevious[0].match(/[QqTt]/)?(controlX\x3dx,controlY\x3dy):\x22t\x22\x3d\x3d\x3dprevious[0]?(controlX\x3d\n2*x-tempControlX,controlY\x3d2*y-tempControlY):\x22q\x22\x3d\x3d\x3dprevious[0]\x26\x26(controlX\x3d2*x-controlX,controlY\x3d2*y-controlY);var tempControlX\x3dcontrolX;var tempControlY\x3dcontrolY;context.quadraticCurveTo(controlX+l,controlY+t,tempX+l,tempY+t);x\x3dtempX;y\x3dtempY;controlX\x3dx+current[1];controlY\x3dy+current[2];break;case \x22T\x22:tempX\x3dcurrent[1];tempY\x3dcurrent[2];controlX\x3d2*x-controlX;controlY\x3d2*y-controlY;context.quadraticCurveTo(controlX+l,controlY+t,tempX+l,tempY+t);x\x3dtempX;y\x3dtempY;break;case \x22a\x22:drawArc(context,x+l,y+t,[current[1],\ncurrent[2],current[3],current[4],current[5],current[6]+x+l,current[7]+y+t]);x+\x3dcurrent[6];y+\x3dcurrent[7];break;case \x22A\x22:drawArc(context,x+l,y+t,[current[1],current[2],current[3],current[4],current[5],current[6]+l,current[7]+t]);x\x3dcurrent[6];y\x3dcurrent[7];break;case \x22z\x22:case \x22Z\x22:context.closePath()}previous\x3dcurrent}}function drawArc(context,x,y,coords){x\x3dsegments(coords[5],coords[6],coords[0],coords[1],coords[3],coords[4],coords[2],x,y);for(y\x3d0;y\x3cx.length;++y){var params\x3dx[y];coords\x3djoin.call(params);\nif(bezierCache[coords])coords\x3dbezierCache[coords];else{var cx\x3dparams[0],cy\x3dparams[1],th0\x3dparams[2],th1\x3dparams[3],rx\x3dparams[4],ry\x3dparams[5],sin_th\x3dparams[6],cos_th\x3dparams[7];params\x3dcos_th*rx;var a01\x3d-sin_th*ry;rx*\x3dsin_th;ry*\x3dcos_th;var cos_th0\x3dMath.cos(th0),sin_th0\x3dMath.sin(th0);sin_th\x3dMath.cos(th1);cos_th\x3dMath.sin(th1);th0\x3d.5*(th1-th0);th1\x3dMath.sin(.5*th0);th1\x3d8/3*th1*th1/Math.sin(th0);th0\x3dcx+cos_th0-th1*sin_th0;cos_th0\x3dcy+sin_th0+th1*cos_th0;cx+\x3dsin_th;cy+\x3dcos_th;cos_th\x3dcx+th1*cos_th;sin_th\x3dcy-th1*\nsin_th;coords\x3dbezierCache[coords]\x3d[params*th0+a01*cos_th0,rx*th0+ry*cos_th0,params*cos_th+a01*sin_th,rx*cos_th+ry*sin_th,params*cx+a01*cy,rx*cx+ry*cy]}context.bezierCurveTo(coords[0],coords[1],coords[2],coords[3],coords[4],coords[5])}}function symbols(_){return vegaUtil.hasOwnProperty(builtins,_)?builtins[_]:customSymbol(_)}function customSymbol(path){if(!vegaUtil.hasOwnProperty(custom,path)){var parsed\x3dpathParse(path);custom[path]\x3d{draw:function(context,size){pathRender(context,parsed,0,0,Math.sqrt(size)/\n2)}}}return custom[path]}function rectangleX(d){return d.x}function rectangleY(d){return d.y}function rectangleWidth(d){return d.width}function rectangleHeight(d){return d.height}function number(_){return\x22function\x22\x3d\x3d\x3dtypeof _?_:function(){return+_}}function clamp(value,min,max){return Math.max(min,Math.min(value,max))}function vg_rect(){function rectangle(_,x0,y0){var buffer;x0\x3dnull!\x3dx0?x0:+x.call(this,_);y0\x3dnull!\x3dy0?y0:+y.call(this,_);var w\x3d+width.call(this,_),h\x3d+height.call(this,_),s\x3dMath.min(w,\nh)/2,tl\x3dclamp(+crTL.call(this,_),0,s),tr\x3dclamp(+crTR.call(this,_),0,s),bl\x3dclamp(+crBL.call(this,_),0,s);_\x3dclamp(+crBR.call(this,_),0,s);context||(context\x3dbuffer\x3dd3Path.path());0\x3e\x3dtl\x26\x260\x3e\x3dtr\x26\x260\x3e\x3dbl\x26\x260\x3e\x3d_?context.rect(x0,y0,w,h):(w\x3dx0+w,h\x3dy0+h,context.moveTo(x0+tl,y0),context.lineTo(w-tr,y0),context.bezierCurveTo(w-.448084975506*tr,y0,w,y0+.448084975506*tr,w,y0+tr),context.lineTo(w,h-_),context.bezierCurveTo(w,h-.448084975506*_,w-.448084975506*_,h,w-_,h),context.lineTo(x0+bl,h),context.bezierCurveTo(x0+\n.448084975506*bl,h,x0,h-.448084975506*bl,x0,h-bl),context.lineTo(x0,y0+tl),context.bezierCurveTo(x0,y0+.448084975506*tl,x0+.448084975506*tl,y0,x0+tl,y0),context.closePath());if(buffer)return context\x3dnull,buffer+\x22\x22||null}var x\x3drectangleX,y\x3drectangleY,width\x3drectangleWidth,height\x3drectangleHeight,crTL\x3dnumber(0),crTR\x3dcrTL,crBL\x3dcrTL,crBR\x3dcrTL,context\x3dnull;rectangle.x\x3dfunction(_){return arguments.length?(x\x3dnumber(_),rectangle):x};rectangle.y\x3dfunction(_){return arguments.length?(y\x3dnumber(_),rectangle):y};\nrectangle.width\x3dfunction(_){return arguments.length?(width\x3dnumber(_),rectangle):width};rectangle.height\x3dfunction(_){return arguments.length?(height\x3dnumber(_),rectangle):height};rectangle.cornerRadius\x3dfunction(tl,tr,br,bl){return arguments.length?(crTL\x3dnumber(tl),crTR\x3dnull!\x3dtr?number(tr):crTL,crBR\x3dnull!\x3dbr?number(br):crTL,crBL\x3dnull!\x3dbl?number(bl):crTR,rectangle):crTL};rectangle.context\x3dfunction(_){return arguments.length?(context\x3dnull\x3d\x3d_?null:_,rectangle):context};return rectangle}function vg_trail(){function trail(data){var i,\nn\x3ddata.length,d,defined0\x3d!1,buffer;null\x3d\x3dcontext\x26\x26(context\x3dbuffer\x3dd3Path.path());for(i\x3d0;i\x3c\x3dn;++i)if(!(i\x3cn\x26\x26defined(d\x3ddata[i],i,data))\x3d\x3d\x3ddefined0\x26\x26(defined0\x3d!defined0)\x26\x26(ready\x3d0),defined0){var x2\x3d+x(d,i,data),y2\x3d+y(d,i,data),r2\x3d+size(d,i,data)/2;if(ready){var ux\x3dy1-y2,uy\x3dx2-x1;if(ux||uy){var ud\x3dMath.sqrt(ux*ux+uy*uy),rx\x3d(ux/\x3dud)*r1;ud\x3d(uy/\x3dud)*r1;var t\x3dMath.atan2(uy,ux);context.moveTo(x1-rx,y1-ud);context.lineTo(x2-ux*r2,y2-uy*r2);context.arc(x2,y2,r2,t-Math.PI,t);context.lineTo(x1+rx,y1+ud);context.arc(x1,\ny1,r1,t,t+Math.PI)}else context.arc(x2,y2,r2,0,Tau);context.closePath()}else ready\x3d1;x1\x3dx2;y1\x3dy2;r1\x3dr2}if(buffer)return context\x3dnull,buffer+\x22\x22||null}var x,y,size,defined,context\x3dnull,ready,x1,y1,r1;trail.x\x3dfunction(_){return arguments.length?(x\x3d_,trail):x};trail.y\x3dfunction(_){return arguments.length?(y\x3d_,trail):y};trail.size\x3dfunction(_){return arguments.length?(size\x3d_,trail):size};trail.defined\x3dfunction(_){return arguments.length?(defined\x3d_,trail):defined};trail.context\x3dfunction(_){return arguments.length?\n(context\x3dnull\x3d\x3d_?null:_,trail):context};return trail}function value$jscomp$0(a,b){return null!\x3da?a:b}function hasCornerRadius(item){return item.cornerRadius||item.cornerRadiusTopLeft||item.cornerRadiusTopRight||item.cornerRadiusBottomRight||item.cornerRadiusBottomLeft}function rectangle$jscomp$0(context,item,x,y){return rectShape.context(context)(item,x,y)}function clip$jscomp$0(renderer,item,size){var clip\x3ditem.clip;renderer\x3drenderer._defs;item\x3ditem.clip_id||(item.clip_id\x3d\x22clip\x22+clip_id++);renderer\x3d\nrenderer.clipping[item]||(renderer.clipping[item]\x3d{id:item});vegaUtil.isFunction(clip)?renderer.path\x3dclip(null):hasCornerRadius(size)?renderer.path\x3drectangle$jscomp$0(null,size,0,0):(renderer.width\x3dsize.width||0,renderer.height\x3dsize.height||0);return\x22url(#\x22+item+\x22)\x22}function Bounds(b){this.clear();b\x26\x26this.union(b)}function Item(mark){this.mark\x3dmark;this.bounds\x3dthis.bounds||new Bounds}function GroupItem(mark){Item.call(this,mark);this.items\x3dthis.items||[]}function ResourceLoader(customLoader){this._pending\x3d\n0;this._loader\x3dcustomLoader||vegaLoader.loader()}function boundStroke(bounds,item,miter){if(item.stroke\x26\x260!\x3d\x3ditem.opacity\x26\x260!\x3d\x3ditem.strokeOpacity){var sw\x3dnull!\x3ditem.strokeWidth?+item.strokeWidth:1;bounds.expand(sw+(miter?item.strokeJoin\x26\x26\x22miter\x22!\x3d\x3ditem.strokeJoin?0:sw:0))}return bounds}function context$jscomp$0(_){bounds$jscomp$0\x3d_;return context$jscomp$0}function noop(){}function addL(x,y){x\x3dlx\x3dx;y\x3dly\x3dy;bounds$jscomp$0.add(x,y)}function addX(x){bounds$jscomp$0.add(x,bounds$jscomp$0.y1)}function addY(y){bounds$jscomp$0.add(bounds$jscomp$0.x1,\ny)}function quadExtrema(x0,x1,x2,cb){x2\x3d(x0-x1)/(x0+x2-2*x1);0\x3cx2\x26\x261\x3ex2\x26\x26cb(x0+(x1-x0)*x2)}function cubicExtrema(x0,x1,x2,x3,cb){var a\x3dx3-x0+3*x1-3*x2,b\x3dx0+x2-2*x1,c\x3dx0-x1,t0\x3d0,t1\x3d0;1E-14\x3cMath.abs(a)?(c\x3db*b+c*a,0\x3c\x3dc\x26\x26(c\x3dMath.sqrt(c),t0\x3d(-b+c)/a,t1\x3d(-b-c)/a)):t0\x3d.5*c/b;0\x3ct0\x26\x261\x3et0\x26\x26cb(cubic(t0,x0,x1,x2,x3));0\x3ct1\x26\x261\x3et1\x26\x26cb(cubic(t1,x0,x1,x2,x3))}function cubic(t,x0,x1,x2,x3){var s\x3d1-t,s2\x3ds*s,t2\x3dt*t;return s2*s*x0+3*s2*t*x1+3*s*t2*x2+t2*t*x3}function intersectPath(draw){return function(item,brush){if(!context$1)return!0;\ndraw(context$1,item);b$jscomp$0.clear().union(item.bounds).intersect(brush).round();var $jscomp$destructuring$var434\x3db$jscomp$0;item\x3d$jscomp$destructuring$var434.x1;brush\x3d$jscomp$destructuring$var434.x2;var y2\x3d$jscomp$destructuring$var434.y2;for($jscomp$destructuring$var434\x3d$jscomp$destructuring$var434.y1;$jscomp$destructuring$var434\x3c\x3dy2;++$jscomp$destructuring$var434)for(var x$604\x3ditem;x$604\x3c\x3dbrush;++x$604)if(context$1.isPointInPath(x$604,$jscomp$destructuring$var434))return!0;return!1}}function intersectPoint(item,\nbox){return box.contains(item.x||0,item.y||0)}function intersectRect(item,box){var x\x3ditem.x||0,y\x3ditem.y||0;return box.intersects(b$jscomp$0.set(x,y,x+(item.width||0),y+(item.height||0)))}function intersectRule(item,box){var x\x3ditem.x||0,y\x3ditem.y||0;return intersectBoxLine(box,x,y,null!\x3ditem.x2?item.x2:x,null!\x3ditem.y2?item.y2:y)}function intersectBoxLine(box,x,y,u,v){var x1\x3dbox.x1,y1\x3dbox.y1,x2\x3dbox.x2;box\x3dbox.y2;u-\x3dx;v-\x3dy;var t0\x3d0,t1\x3d1,e;for(e\x3d0;4\x3ee;++e){if(0\x3d\x3d\x3de){var p\x3d-u;var q\x3d-(x1-x)}1\x3d\x3d\x3de\x26\x26(p\x3du,\nq\x3dx2-x);2\x3d\x3d\x3de\x26\x26(p\x3d-v,q\x3d-(y1-y));3\x3d\x3d\x3de\x26\x26(p\x3dv,q\x3dbox-y);if(1E-10\x3eMath.abs(p)\x26\x260\x3eq)return!1;var r\x3dq/p;if(0\x3ep){if(r\x3et1)return!1;r\x3et0\x26\x26(t0\x3dr)}else if(0\x3cp){if(r\x3ct0)return!1;r\x3ct1\x26\x26(t1\x3dr)}}return!0}function blend(context,item){context.globalCompositeOperation\x3ditem.blend||\x22source-over\x22}function value$1(value,dflt){return null\x3d\x3dvalue?dflt:value}function addStops(gradient,stops){for(var n\x3dstops.length,i\x3d0;i\x3cn;++i)gradient.addColorStop(stops[i].offset,stops[i].color);return gradient}function gradient$jscomp$0(context,\nspec,bounds){var w\x3dbounds.width(),h\x3dbounds.height();if(\x22radial\x22\x3d\x3d\x3dspec.gradient)context\x3dcontext.createRadialGradient(bounds.x1+value$1(spec.x1,.5)*w,bounds.y1+value$1(spec.y1,.5)*h,Math.max(w,h)*value$1(spec.r1,0),bounds.x1+value$1(spec.x2,.5)*w,bounds.y1+value$1(spec.y2,.5)*h,Math.max(w,h)*value$1(spec.r2,.5));else{var x1\x3dvalue$1(spec.x1,0),y1\x3dvalue$1(spec.y1,0),x2\x3dvalue$1(spec.x2,1),y2\x3dvalue$1(spec.y2,0);if(x1\x3d\x3d\x3dx2||y1\x3d\x3d\x3dy2||w\x3d\x3d\x3dh)context\x3dcontext.createLinearGradient(bounds.x1+x1*w,bounds.y1+y1*\nh,bounds.x1+x2*w,bounds.y1+y2*h);else{bounds\x3dvegaCanvas.canvas(Math.ceil(w),Math.ceil(h));var ictx\x3dbounds.getContext(\x222d\x22);ictx.scale(w,h);ictx.fillStyle\x3daddStops(ictx.createLinearGradient(x1,y1,x2,y2),spec.stops);ictx.fillRect(0,0,w,h);return context.createPattern(bounds,\x22no-repeat\x22)}}return addStops(context,spec.stops)}function fill$jscomp$0(context,item,opacity){opacity*\x3dnull\x3d\x3ditem.fillOpacity?1:item.fillOpacity;return 0\x3copacity?(context.globalAlpha\x3dopacity,item\x3d(opacity\x3ditem.fill)\x26\x26opacity.gradient?\ngradient$jscomp$0(context,opacity,item.bounds):opacity,context.fillStyle\x3ditem,!0):!1}function stroke$jscomp$0(context,item,opacity){var lw\x3dnull!\x3d(lw\x3ditem.strokeWidth)?lw:1;if(0\x3e\x3dlw)return!1;opacity*\x3dnull\x3d\x3ditem.strokeOpacity?1:item.strokeOpacity;return 0\x3copacity?(context.globalAlpha\x3dopacity,opacity\x3d(opacity\x3ditem.stroke)\x26\x26opacity.gradient?gradient$jscomp$0(context,opacity,item.bounds):opacity,context.strokeStyle\x3dopacity,context.lineWidth\x3dlw,context.lineCap\x3ditem.strokeCap||\x22butt\x22,context.lineJoin\x3ditem.strokeJoin||\n\x22miter\x22,context.miterLimit\x3ditem.strokeMiterLimit||10,context.setLineDash\x26\x26(context.setLineDash(item.strokeDash||Empty),context.lineDashOffset\x3ditem.strokeDashOffset||0),!0):!1}function compare(a,b){return a.zindex-b.zindex||a.index-b.index}function zorder(scene){if(!scene.zdirty)return scene.zitems;var items\x3dscene.items,output\x3d[],n;var i\x3d0;for(n\x3ditems.length;i\x3cn;++i){var item\x3ditems[i];item.index\x3di;item.zindex\x26\x26output.push(item)}scene.zdirty\x3d!1;return scene.zitems\x3doutput.sort(compare)}function visit(scene,\nvisitor){var items\x3dscene.items,n;if(items\x26\x26items.length){var zitems\x3dzorder(scene);if(zitems\x26\x26zitems.length){scene\x3d0;for(n\x3ditems.length;scene\x3cn;++scene)items[scene].zindex||visitor(items[scene]);items\x3dzitems}scene\x3d0;for(n\x3ditems.length;scene\x3cn;++scene)visitor(items[scene])}}function pickVisit(scene,visitor){var items\x3dscene.items,hit,i;if(!items||!items.length)return null;var zitems\x3dzorder(scene);zitems\x26\x26zitems.length\x26\x26(items\x3dzitems);for(i\x3ditems.length;0\x3c\x3d--i;)if(hit\x3dvisitor(items[i]))return hit;if(items\x3d\x3d\x3d\nzitems)for(items\x3dscene.items,i\x3ditems.length;0\x3c\x3d--i;)if(!items[i].zindex\x26\x26(hit\x3dvisitor(items[i])))return hit;return null}function drawAll(path){return function(context,scene,bounds){visit(scene,function(item){bounds\x26\x26!bounds.intersects(item.bounds)||drawPath(path,context,item,item)})}}function drawOne(path){return function(context,scene,bounds){!scene.items.length||bounds\x26\x26!bounds.intersects(scene.bounds)||drawPath(path,context,scene.items[0],scene.items)}}function drawPath(path,context,item,items){var opacity\x3d\nnull\x3d\x3ditem.opacity?1:item.opacity;0\x3d\x3d\x3dopacity||path(context,items)||(blend(context,item),item.fill\x26\x26fill$jscomp$0(context,item,opacity)\x26\x26context.fill(),item.stroke\x26\x26stroke$jscomp$0(context,item,opacity)\x26\x26context.stroke())}function pick(test){test\x3dtest||vegaUtil.truthy;return function(context,scene,x,y,gx,gy){x*\x3dcontext.pixelRatio;y*\x3dcontext.pixelRatio;return pickVisit(scene,function(item){var b\x3ditem.bounds;if((!b||b.contains(gx,gy))\x26\x26b\x26\x26test(context,item,x,y,gx,gy))return item})}}function hitPath(path,\nfilled){return function(context,o,x,y){var item\x3dArray.isArray(o)?o[0]:o,fill\x3dnull\x3d\x3dfilled?item.fill:filled,stroke\x3ditem.stroke\x26\x26context.isPointInStroke;if(stroke){var lw\x3ditem.strokeWidth;item\x3ditem.strokeCap;context.lineWidth\x3dnull!\x3dlw?lw:1;context.lineCap\x3dnull!\x3ditem?item:\x22butt\x22}return path(context,o)?!1:fill\x26\x26context.isPointInPath(x,y)||stroke\x26\x26context.isPointInStroke(x,y)}}function translate(x,y){return\x22translate(\x22+x+\x22,\x22+y+\x22)\x22}function transformItem(item){return translate(item.x||0,item.y||0)+(item.angle?\n\x22 rotate(\x22+(item.angle+\x22)\x22):\x22\x22)+(item.scaleX||item.scaleY?\x22 scale(\x22+((item.scaleX||1)+\x22,\x22+(item.scaleY||1)+\x22)\x22):\x22\x22)}function markItemPath(type,shape,isect){function draw(context,item){var x\x3ditem.x||0,y\x3ditem.y||0,a\x3ditem.angle||0;context.translate(x,y);a\x26\x26context.rotate(a*\x3dDegToRad);context.beginPath();shape(context,item);a\x26\x26context.rotate(-a);context.translate(-x,-y)}return{type:type,tag:\x22path\x22,nested:!1,attr:function(emit,item){emit(\x22transform\x22,transformItem(item));emit(\x22d\x22,shape(null,item))},bound:function(bounds,\nitem){var x\x3ditem.x||0,y\x3ditem.y||0;shape(context$jscomp$0(bounds),item);boundStroke(bounds,item).translate(x,y);item.angle\x26\x26bounds.rotate(item.angle*DegToRad,x,y);return bounds},draw:drawAll(draw),pick:pick(hitPath(draw)),isect:isect||intersectPath(draw)}}function markMultiItemPath(type,shape,tip){function draw(context,items){context.beginPath();shape(context,items)}var hit\x3dhitPath(draw);return{type:type,tag:\x22path\x22,nested:!0,attr:function(emit,item){item\x3ditem.mark.items;item.length\x26\x26emit(\x22d\x22,shape(null,\nitem))},bound:function(bounds,mark){mark\x3dmark.items;if(0\x3d\x3d\x3dmark.length)return bounds;shape(context$jscomp$0(bounds),mark);return boundStroke(bounds,mark[0])},draw:drawOne(draw),pick:function(context,scene,x,y,gx,gy){var items\x3dscene.items;scene\x3dscene.bounds;if(!items||!items.length||scene\x26\x26!scene.contains(gx,gy))return null;x*\x3dcontext.pixelRatio;y*\x3dcontext.pixelRatio;return hit(context,items,x,y)?items[0]:null},isect:intersectPoint,tip:tip}}function clipGroup(context,group){context.beginPath();hasCornerRadius(group)?\nrectangle$jscomp$0(context,group,0,0):context.rect(0,0,group.width||0,group.height||0);context.clip()}function offset$jscomp$0(item){var sw\x3dvalue$1(item.strokeWidth,1);return null!\x3ditem.strokeOffset?item.strokeOffset:item.stroke\x26\x26.5\x3csw\x26\x261.5\x3esw?.5-Math.abs(sw-1):0}function rectanglePath(context,group,x,y){var off\x3doffset$jscomp$0(group);context.beginPath();rectangle$jscomp$0(context,group,(x||0)+off,(y||0)+off)}function getImage(item,renderer){var image$jscomp$0\x3ditem.image;if(!image$jscomp$0||item.url\x26\x26\nitem.url!\x3d\x3dimage$jscomp$0.url)image$jscomp$0\x3d{complete:!1,width:0,height:0},renderer.loadImage(item.url).then(function(image){item.image\x3dimage;item.image.url\x3ditem.url});return image$jscomp$0}function imageWidth(item,image){return null!\x3ditem.width?item.width:image\x26\x26image.width?!1!\x3d\x3ditem.aspect\x26\x26item.height?item.height*image.width/image.height:image.width:0}function imageHeight(item,image){return null!\x3ditem.height?item.height:image\x26\x26image.height?!1!\x3d\x3ditem.aspect\x26\x26item.width?item.width*image.height/\nimage.width:image.height:0}function imageXOffset(align,w){return\x22center\x22\x3d\x3d\x3dalign?w/2:\x22right\x22\x3d\x3d\x3dalign?w:0}function imageYOffset(baseline,h){return\x22middle\x22\x3d\x3d\x3dbaseline?h/2:\x22bottom\x22\x3d\x3d\x3dbaseline?h:0}function path$jscomp$0(context,item){var path\x3ditem.path;if(null\x3d\x3dpath)return!0;var x\x3ditem.x||0,y\x3ditem.y||0,sx\x3ditem.scaleX||1,sy\x3ditem.scaleY||1,a\x3d(item.angle||0)*DegToRad,cache\x3ditem.pathCache;cache\x26\x26cache.path\x3d\x3d\x3dpath||((item.pathCache\x3dcache\x3dpathParse(path)).path\x3dpath);a\x26\x26context.rotate\x26\x26context.translate?(context.translate(x,\ny),context.rotate(a),pathRender(context,cache,0,0,sx,sy),context.rotate(-a),context.translate(-x,-y)):pathRender(context,cache,x,y,sx,sy)}function draw$2(context,item){context.beginPath();rectangle$jscomp$0(context,item)}function path$2(context,item,opacity){if(item.stroke\x26\x26stroke$jscomp$0(context,item,opacity)){opacity\x3ditem.x||0;var y1\x3ditem.y||0;var x2\x3dnull!\x3ditem.x2?item.x2:opacity;item\x3dnull!\x3ditem.y2?item.y2:y1;context.beginPath();context.moveTo(opacity,y1);context.lineTo(x2,item);return!0}return!1}\nfunction useCanvas(use){textMetrics.width\x3duse\x26\x26context$1?measureWidth:estimateWidth}function estimateWidth(item,text){text\x3dtextValue(item,text);item\x3dfontSize(item);return~~(.8*text.length*item)}function measureWidth(item,text){return 0\x3e\x3dfontSize(item)||!(text\x3dtextValue(item,text))?0:_measureWidth(text,font(item))}function _measureWidth(text,currentFont){var key\x3d\x22(\x22+currentFont+\x22) \x22+text,width\x3dwidthCache.get(key);void 0\x3d\x3d\x3dwidth\x26\x26(context$1.font\x3dcurrentFont,width\x3dcontext$1.measureText(text).width,widthCache.set(key,\nwidth));return width}function fontSize(item){return null!\x3ditem.fontSize?+item.fontSize||0:11}function lineHeight(item){return null!\x3ditem.lineHeight?item.lineHeight:fontSize(item)+2}function textLines(item){item\x3ditem.lineBreak\x26\x26item.text\x26\x26!vegaUtil.isArray(item.text)?item.text.split(item.lineBreak):item.text;return vegaUtil.isArray(item)?1\x3citem.length?item:item[0]:item}function textValue(item,line){line\x3dnull\x3d\x3dline?\x22\x22:(line+\x22\x22).trim();if(0\x3citem.limit\x26\x26line.length){var limit\x3d+item.limit,width\x3dwidthGetter(item);\nif(!(width(line)\x3climit)){var ellipsis\x3ditem.ellipsis||\x22\u2026\x22,rtl\x3d\x22rtl\x22\x3d\x3d\x3ditem.dir;item\x3d0;var hi\x3dline.length;limit-\x3dwidth(ellipsis);if(rtl){for(;item\x3chi;)rtl\x3ditem+hi\x3e\x3e\x3e1,width(line.slice(rtl))\x3elimit?item\x3drtl+1:hi\x3drtl;line\x3dellipsis+line.slice(item)}else{for(;item\x3chi;)rtl\x3d1+(item+hi\x3e\x3e\x3e1),width(line.slice(0,rtl))\x3climit?item\x3drtl:hi\x3drtl-1;line\x3dline.slice(0,item)+ellipsis}}}return line}function widthGetter(item){if(textMetrics.width\x3d\x3d\x3dmeasureWidth){var currentFont\x3dfont(item);return function(text){return _measureWidth(text,\ncurrentFont)}}var currentFontHeight\x3dfontSize(item);return function(text){return~~(.8*text.length*currentFontHeight)}}function fontFamily(item,quote){item\x3ditem.font;return(quote\x26\x26item?String(item).replace(/\x22/g,\x22\x27\x22):item)||\x22sans-serif\x22}function font(item,quote){return(item.fontStyle?item.fontStyle+\x22 \x22:\x22\x22)+(item.fontVariant?item.fontVariant+\x22 \x22:\x22\x22)+(item.fontWeight?item.fontWeight+\x22 \x22:\x22\x22)+fontSize(item)+\x22px \x22+fontFamily(item,quote)}function offset$1(item){var baseline\x3ditem.baseline,h\x3dfontSize(item);\nreturn Math.round(\x22top\x22\x3d\x3d\x3dbaseline?.79*h:\x22middle\x22\x3d\x3d\x3dbaseline?.3*h:\x22bottom\x22\x3d\x3d\x3dbaseline?-.21*h:\x22line-top\x22\x3d\x3d\x3dbaseline?.29*h+.5*lineHeight(item):\x22line-bottom\x22\x3d\x3d\x3dbaseline?.29*h-.5*lineHeight(item):0)}function anchorPoint(item){var x\x3ditem.x||0,y\x3ditem.y||0,r\x3ditem.radius||0;r\x26\x26(item\x3d(item.theta||0)-HalfPi,x+\x3dr*Math.cos(item),y+\x3dr*Math.sin(item));tempBounds.x1\x3dx;tempBounds.y1\x3dy;return tempBounds}function bound$5(bounds,item,mode){var h\x3dtextMetrics.height(item),a\x3ditem.align,p\x3danchorPoint(item),x\x3dp.x1;p\x3dp.y1;\nvar dx\x3ditem.dx||0,dy\x3d(item.dy||0)+offset$1(item)-Math.round(.8*h),tl\x3dtextLines(item);vegaUtil.isArray(tl)?(h+\x3dlineHeight(item)*(tl.length-1),tl\x3dtl.reduce(function(w,t){return Math.max(w,textMetrics.width(item,t))},0)):tl\x3dtextMetrics.width(item,tl);\x22center\x22\x3d\x3d\x3da?dx-\x3dtl/2:\x22right\x22\x3d\x3d\x3da\x26\x26(dx-\x3dtl);bounds.set(dx+\x3dx,dy+\x3dp,dx+tl,dy+h);if(item.angle\x26\x26!mode)bounds.rotate(item.angle*DegToRad,x,p);else if(2\x3d\x3d\x3dmode)return bounds.rotatedPoints(item.angle*DegToRad,x,p);return bounds}function boundItem(item,func,opt){var type\x3d\nMarks[item.mark.marktype];func\x3dfunc||type.bound;type.nested\x26\x26(item\x3ditem.mark);return func(item.bounds||(item.bounds\x3dnew Bounds),item,opt)}function boundMark(mark,bounds,opt){var type\x3dMarks[mark.marktype],bound\x3dtype.bound,items\x3dmark.items,hasItems\x3ditems\x26\x26items.length;if(type.nested)return hasItems?mark\x3ditems[0]:(DUMMY.mark\x3dmark,mark\x3dDUMMY),opt\x3dboundItem(mark,bound,opt),bounds\x3dbounds\x26\x26bounds.union(opt)||opt;bounds\x3dbounds||mark.bounds\x26\x26mark.bounds.clear()||new Bounds;if(hasItems)for(type\x3d0,hasItems\x3d\nitems.length;type\x3chasItems;++type)bounds.union(boundItem(items[type],bound,opt));return mark.bounds\x3dbounds}function sceneToJSON(scene,indent){return JSON.stringify(scene,keys,indent)}function sceneFromJSON(json){json\x3d\x22string\x22\x3d\x3d\x3dtypeof json?JSON.parse(json):json;return initialize(json)}function initialize(scene){var type\x3dscene.marktype,items\x3dscene.items,n;if(items){var i\x3d0;for(n\x3ditems.length;i\x3cn;++i){var parent\x3dtype?\x22mark\x22:\x22group\x22;items[i][parent]\x3dscene;items[i].zindex\x26\x26(items[i][parent].zdirty\x3d!0);\n\x22group\x22\x3d\x3d\x3d(type||parent)\x26\x26initialize(items[i])}}type\x26\x26boundMark(scene);return scene}function Scenegraph(scene){arguments.length?this.root\x3dsceneFromJSON(scene):(this.root\x3dcreateMark({marktype:\x22group\x22,name:\x22root\x22,role:\x22frame\x22}),this.root.items\x3d[new GroupItem(this.root)])}function createMark(def,group){group\x3d{bounds:new Bounds,clip:!!def.clip,group:group,interactive:!1\x3d\x3d\x3ddef.interactive?!1:!0,items:[],marktype:def.marktype,name:def.name||void 0,role:def.role||void 0,zindex:def.zindex||0};null!\x3ddef.aria\x26\x26\n(group.aria\x3ddef.aria);def.description\x26\x26(group.description\x3ddef.description);return group}function domCreate(doc,tag,ns){!doc\x26\x26\x22undefined\x22!\x3d\x3dtypeof document\x26\x26document.createElement\x26\x26(doc\x3ddocument);return doc?ns?doc.createElementNS(ns,tag):doc.createElement(tag):null}function domFind(el,tag){tag\x3dtag.toLowerCase();el\x3del.childNodes;for(var i\x3d0,n\x3del.length;i\x3cn;++i)if(el[i].tagName.toLowerCase()\x3d\x3d\x3dtag)return el[i]}function domChild(el,index,tag,ns){index\x3del.childNodes[index];if(!index||index.tagName.toLowerCase()!\x3d\x3d\ntag.toLowerCase()){var b\x3dindex||null;index\x3ddomCreate(el.ownerDocument,tag,ns);el.insertBefore(index,b)}return index}function domClear(el,index){for(var nodes\x3del.childNodes,curr\x3dnodes.length;curr\x3eindex;)el.removeChild(nodes[--curr]);return el}function cssClass(mark){return\x22mark-\x22+mark.marktype+(mark.role?\x22 role-\x22+mark.role:\x22\x22)+(mark.name?\x22 \x22+mark.name:\x22\x22)}function point(event,el){var rect\x3del.getBoundingClientRect();return[event.clientX-rect.left-(el.clientLeft||0),event.clientY-rect.top-(el.clientTop||\n0)]}function Handler(customLoader,customTooltip){this._active\x3dnull;this._handlers\x3d{};this._loader\x3dcustomLoader||vegaLoader.loader();this._tooltip\x3dcustomTooltip||defaultTooltip}function defaultTooltip(handler,event,item,value){handler.element().setAttribute(\x22title\x22,value||\x22\x22)}function Renderer(loader){this._bgcolor\x3dthis._el\x3dnull;this._loader\x3dnew ResourceLoader(loader)}function CanvasHandler(loader,tooltip){Handler.call(this,loader,tooltip);this._touch\x3dthis._down\x3dnull;this._first\x3d!0;this._events\x3d{}}\nfunction eventListenerCheck(handler,type){(\x22touchstart\x22\x3d\x3d\x3dtype||\x22touchmove\x22\x3d\x3d\x3dtype||\x22touchend\x22\x3d\x3d\x3dtype?[\x22touchstart\x22,\x22touchmove\x22,\x22touchend\x22]:[type]).forEach(function(_){return addEventListener(handler,_)})}function addEventListener(handler,type){var canvas\x3dhandler.canvas();canvas\x26\x26!handler._events[type]\x26\x26(handler._events[type]\x3d1,canvas.addEventListener(type,handler[type]?function(evt){return handler[type](evt)}:function(evt){return handler.fire(type,evt)}))}function move(moveEvent,overEvent,outEvent){return function(evt){var a\x3d\nthis._active,p\x3dthis.pickEvent(evt);p!\x3d\x3da\x26\x26(a\x26\x26a.exit||this.fire(outEvent,evt),this._active\x3dp,this.fire(overEvent,evt));this.fire(moveEvent,evt)}}function inactive(type){return function(evt){this.fire(type,evt);this._active\x3dnull}}function CanvasRenderer(loader){Renderer.call(this,loader);this._options\x3d{};this._redraw\x3d!1;this._dirty\x3dnew Bounds;this._tempb\x3dnew Bounds}function SVGHandler(loader,tooltip){Handler.call(this,loader,tooltip);var h\x3dthis;h._hrefHandler\x3dlistener(h,function(evt,item){item\x26\x26item.href\x26\x26\nh.handleHref(evt,item,item.href)});h._tooltipHandler\x3dlistener(h,function(evt,item){h.handleTooltip(evt,item,\x22mouseout\x22!\x3d\x3devt.type)})}function ariaItemAttributes(emit,item){var hide\x3d!1\x3d\x3d\x3ditem.aria;emit(\x22aria-hidden\x22,hide||void 0);if(hide||null\x3d\x3ditem.description)for(var prop in AriaEncode)emit(AriaEncode[prop],void 0);else hide\x3ditem.mark.marktype,emit(\x22aria-label\x22,item.description),emit(\x22role\x22,item.ariaRole||(\x22group\x22\x3d\x3d\x3dhide?\x22graphics-object\x22:\x22graphics-symbol\x22)),emit(\x22aria-roledescription\x22,item.ariaRoleDescription||\nhide+\x22 mark\x22)}function ariaMarkAttributes(mark){var $jscomp$compprop49\x3d{};return!1\x3d\x3d\x3dmark.aria?($jscomp$compprop49[\x22aria-hidden\x22]\x3d!0,$jscomp$compprop49):AriaIgnore[mark.role]?null:AriaGuides[mark.role]?ariaGuide(mark,AriaGuides[mark.role]):ariaMark(mark)}function ariaMark(mark){var type\x3dmark.marktype,recurse\x3d\x22group\x22\x3d\x3d\x3dtype||\x22text\x22\x3d\x3d\x3dtype||mark.items.some(function(_){return null!\x3d_.description\x26\x26!1!\x3d\x3d_.aria});return bundle(recurse?\x22graphics-object\x22:\x22graphics-symbol\x22,type+\x22 mark container\x22,mark.description)}\nfunction ariaGuide(mark,opt){try{var item\x3dmark.items[0],caption\x3dopt.caption||function(){return\x22\x22};return bundle(opt.role||\x22graphics-symbol\x22,opt.desc,item.description||caption(item))}catch(err){return null}}function extractTitle(item){try{return vegaUtil.array(vegaUtil.peek(item.items).items[0].text).join(\x22 \x22)}catch(err){return null}}function channelCaption(props){props\x3dprops.map(function(p){return p+(\x22fill\x22\x3d\x3d\x3dp||\x22stroke\x22\x3d\x3d\x3dp?\x22 color\x22:\x22\x22)});return 2\x3eprops.length?props[0]:props.slice(0,-1).join(\x22, \x22)+\n\x22 and \x22+vegaUtil.peek(props)}function openTag(tag,attr,raw){tag\x3d\x22\\x3c\x22+tag;var key;if(attr)for(key in attr){var val\x3dattr[key];null!\x3dval\x26\x26(tag+\x3d\x22 \x22+key+\x27\\x3d\x22\x27+(val+\x22\x22).replace(/\x26/g,\x22\\x26amp;\x22).replace(/\x22/g,\x22\\x26quot;\x22)+\x27\x22\x27)}raw\x26\x26(tag+\x3d\x22 \x22+raw);return tag+\x22\\x3e\x22}function closeTag(tag){return\x22\\x3c/\x22+tag+\x22\\x3e\x22}function SVGRenderer(loader){Renderer.call(this,loader);this._dirtyID\x3d0;this._dirty\x3d[];this._defs\x3dthis._root\x3dthis._svg\x3dnull}function dirtyParents(item,id){for(;item\x26\x26item.dirty!\x3d\x3did;item\x3ditem.mark.group)if(item.dirty\x3d\nid,item.mark\x26\x26item.mark.dirty!\x3d\x3did)item.mark.dirty\x3did;else break}function recurse$jscomp$0(renderer,el,group){el\x3del.lastChild.previousSibling;var prev,idx\x3d0;visit(group,function(item){prev\x3drenderer.draw(el,item,prev);++idx});domClear(el,1+idx)}function bind(item,el,sibling,tag,svg){var node\x3ditem._svg;if(!node){var doc\x3del.ownerDocument;node\x3ddomCreate(doc,tag,ns$jscomp$0);item._svg\x3dnode;item.mark\x26\x26(node.__data__\x3ditem,node.__values__\x3d{fill:\x22default\x22},\x22g\x22\x3d\x3d\x3dtag\x26\x26(tag\x3ddomCreate(doc,\x22path\x22,ns$jscomp$0),\nnode.appendChild(tag),tag.__data__\x3ditem,tag\x3ddomCreate(doc,\x22g\x22,ns$jscomp$0),node.appendChild(tag),tag.__data__\x3ditem,doc\x3ddomCreate(doc,\x22path\x22,ns$jscomp$0),node.appendChild(doc),doc.__data__\x3ditem,doc.__values__\x3d{fill:\x22default\x22}))}(node.ownerSVGElement!\x3d\x3dsvg||node.parentNode\x26\x261\x3cnode.parentNode.childNodes.length\x26\x26node.previousSibling!\x3dsibling)\x26\x26el.insertBefore(node,sibling?sibling.nextSibling:el.firstChild);return node}function setStyle(el,name,value){value!\x3d\x3dvalues[name]\x26\x26(null\x3d\x3dvalue?el.style.removeProperty(name):\nel.style.setProperty(name,value+\x22\x22),values[name]\x3dvalue)}function emit$jscomp$0(name,value,ns){if(value!\x3d\x3dvalues[name]){if(ns){var el\x3delement;null!\x3dvalue?el.setAttributeNS(ns,name,value):el.removeAttributeNS(ns,name)}else setAttribute(element,name,value);values[name]\x3dvalue}}function setAttribute(el,name,value){null!\x3dvalue?el.setAttribute(name,value):el.removeAttribute(name)}function href(){var loc;return\x22undefined\x22\x3d\x3d\x3dtypeof window?\x22\x22:(loc\x3dwindow.location).hash?loc.href.slice(0,-loc.hash.length):loc.href}\nfunction SVGStringRenderer(loader){Renderer.call(this,loader);this._text\x3d{head:\x22\x22,bg:\x22\x22,root:\x22\x22,foot:\x22\x22,defs:\x22\x22,body:\x22\x22};this._defs\x3d{gradient:{},clipping:{}}}function applyStyles(s,item,scene,tag,defs){if(null\x3d\x3ditem)return s;\x22bgrect\x22\x3d\x3d\x3dtag\x26\x26!1\x3d\x3d\x3dscene.interactive\x26\x26(s[\x22pointer-events\x22]\x3d\x22none\x22);if(\x22bgfore\x22\x3d\x3d\x3dtag\x26\x26(!1\x3d\x3d\x3dscene.interactive\x26\x26(s[\x22pointer-events\x22]\x3d\x22none\x22),s.display\x3d\x22none\x22,null!\x3d\x3ditem.fill))return s;\x22image\x22\x3d\x3d\x3dtag\x26\x26!1\x3d\x3d\x3ditem.smooth\x26\x26(s.style\x3d\x22image-rendering: optimizeSpeed; image-rendering: pixelated;\x22);\n\x22text\x22\x3d\x3d\x3dtag\x26\x26(s[\x22font-family\x22]\x3dfontFamily(item),s[\x22font-size\x22]\x3dfontSize(item)+\x22px\x22,item.fontStyle\x26\x26(s[\x22font-style\x22]\x3ditem.fontStyle),item.fontVariant\x26\x26(s[\x22font-variant\x22]\x3ditem.fontVariant),item.fontWeight\x26\x26(s[\x22font-weight\x22]\x3ditem.fontWeight));for(var prop in styles)scene\x3ditem[prop],tag\x3dstyles[prop],(\x22transparent\x22!\x3d\x3dscene||\x22fill\x22!\x3d\x3dtag\x26\x26\x22stroke\x22!\x3d\x3dtag)\x26\x26null!\x3dscene\x26\x26(scene\x26\x26scene.gradient\x26\x26(scene\x3dgradientRef(scene,defs.gradient,\x22\x22)),s[tag]\x3dscene);return s}function escape_text(s){return s.replace(/\x26/g,\n\x22\\x26amp;\x22).replace(/\x3c/g,\x22\\x26lt;\x22).replace(/\x3e/g,\x22\\x26gt;\x22)}function intersectMark(mark,box,filter,hits){if(mark.bounds\x26\x26box.intersects(mark.bounds)\x26\x26(\x22group\x22\x3d\x3d\x3dmark.marktype||!1!\x3d\x3dmark.interactive\x26\x26(!filter||filter(mark)))){var items\x3dmark.items,type$620\x3dmark.marktype;mark\x3ditems.length;var i\x3d0;if(\x22group\x22\x3d\x3d\x3dtype$620)for(;i\x3cmark;++i)intersectGroup(items[i],box,filter,hits);else for(filter\x3dMarks[type$620].isect;i\x3cmark;++i)type$620\x3ditems[i],intersectItem(type$620,box,filter)\x26\x26hits.push(type$620)}return hits}\nfunction intersectGroup(group,box,filter,hits){filter\x26\x26filter(group.mark)\x26\x26intersectItem(group,box,Marks.group.isect)\x26\x26hits.push(group);var marks\x3dgroup.items,n\x3dmarks\x26\x26marks.length;if(n){var x$621\x3dgroup.x||0;group\x3dgroup.y||0;box.translate(-x$621,-group);for(var i\x3d0;i\x3cn;++i)intersectMark(marks[i],box,filter,hits);box.translate(x$621,group)}return hits}function intersectItem(item,box,test){var bounds\x3ditem.bounds;return box.encloses(bounds)||box.intersects(bounds)\x26\x26test(item,box)}function sceneEqual(a,\nb,key){return a\x3d\x3d\x3db?!0:\x22path\x22\x3d\x3d\x3dkey?pathEqual(a,b):a instanceof Date\x26\x26b instanceof Date?+a\x3d\x3d\x3d+b:vegaUtil.isNumber(a)\x26\x26vegaUtil.isNumber(b)?1E-9\x3e\x3dMath.abs(a-b):a\x26\x26b\x26\x26(vegaUtil.isObject(a)||vegaUtil.isObject(b))?null\x3d\x3da||null\x3d\x3db?!1:objectEqual(a,b):a\x3d\x3db}function pathEqual(a,b){return sceneEqual(pathParse(a),pathParse(b))}function objectEqual(a,b){var ka\x3dObject.keys(a),kb\x3dObject.keys(b),i;if(ka.length!\x3d\x3dkb.length)return!1;ka.sort();kb.sort();for(i\x3dka.length-1;0\x3c\x3di;i--)if(ka[i]!\x3dkb[i])return!1;for(i\x3d\nka.length-1;0\x3c\x3di;i--)if(kb\x3dka[i],!sceneEqual(a[kb],b[kb],kb))return!1;return typeof a\x3d\x3d\x3dtypeof b}var gradient_id\x3d0,lookup\x3d{basis:{curve:d3Shape.curveBasis},\x22basis-closed\x22:{curve:d3Shape.curveBasisClosed},\x22basis-open\x22:{curve:d3Shape.curveBasisOpen},bundle:{curve:d3Shape.curveBundle,tension:\x22beta\x22,value:.85},cardinal:{curve:d3Shape.curveCardinal,tension:\x22tension\x22,value:0},\x22cardinal-open\x22:{curve:d3Shape.curveCardinalOpen,tension:\x22tension\x22,value:0},\x22cardinal-closed\x22:{curve:d3Shape.curveCardinalClosed,\ntension:\x22tension\x22,value:0},\x22catmull-rom\x22:{curve:d3Shape.curveCatmullRom,tension:\x22alpha\x22,value:.5},\x22catmull-rom-closed\x22:{curve:d3Shape.curveCatmullRomClosed,tension:\x22alpha\x22,value:.5},\x22catmull-rom-open\x22:{curve:d3Shape.curveCatmullRomOpen,tension:\x22alpha\x22,value:.5},linear:{curve:d3Shape.curveLinear},\x22linear-closed\x22:{curve:d3Shape.curveLinearClosed},monotone:{horizontal:d3Shape.curveMonotoneY,vertical:d3Shape.curveMonotoneX},natural:{curve:d3Shape.curveNatural},step:{curve:d3Shape.curveStep},\x22step-after\x22:{curve:d3Shape.curveStepAfter},\n\x22step-before\x22:{curve:d3Shape.curveStepBefore}},cmdlen\x3d{m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7},regexp\x3d[/([MLHVCSQTAZmlhvcsqtaz])/g,/###/,/(\\d)([-+])/g,/\\s|,|###/],DegToRad\x3dMath.PI/180,HalfPi\x3dMath.PI/2,Tau\x3d2*Math.PI,HalfSqrt3\x3dMath.sqrt(3)/2,segmentCache\x3d{},bezierCache\x3d{},join\x3d[].join,temp\x3d[\x22l\x22,0,0,0,0,0,0,0],builtins\x3d{circle:{draw:function(context,size){size\x3dMath.sqrt(size)/2;context.moveTo(size,0);context.arc(0,0,size,0,Tau)}},cross:{draw:function(context,size){size\x3dMath.sqrt(size)/2;var s\x3dsize/2.5;\ncontext.moveTo(-size,-s);context.lineTo(-size,s);context.lineTo(-s,s);context.lineTo(-s,size);context.lineTo(s,size);context.lineTo(s,s);context.lineTo(size,s);context.lineTo(size,-s);context.lineTo(s,-s);context.lineTo(s,-size);context.lineTo(-s,-size);context.lineTo(-s,-s);context.closePath()}},diamond:{draw:function(context,size){size\x3dMath.sqrt(size)/2;context.moveTo(-size,0);context.lineTo(0,-size);context.lineTo(size,0);context.lineTo(0,size);context.closePath()}},square:{draw:function(context,\nsize){size\x3dMath.sqrt(size);var x\x3d-size/2;context.rect(x,x,size,size)}},arrow:{draw:function(context,size){size\x3dMath.sqrt(size)/2;var s\x3dsize/7,t\x3dsize/2.5,v\x3dsize/8;context.moveTo(-s,size);context.lineTo(s,size);context.lineTo(s,-v);context.lineTo(t,-v);context.lineTo(0,-size);context.lineTo(-t,-v);context.lineTo(-s,-v);context.closePath()}},wedge:{draw:function(context,size){var r\x3dMath.sqrt(size)/2;size\x3dHalfSqrt3*r;var o\x3dsize-.5773502691896257*r;r/\x3d4;context.moveTo(0,-size-o);context.lineTo(-r,size-\no);context.lineTo(r,size-o);context.closePath()}},triangle:{draw:function(context,size){size\x3dMath.sqrt(size)/2;var h\x3dHalfSqrt3*size,o\x3dh-.5773502691896257*size;context.moveTo(0,-h-o);context.lineTo(-size,h-o);context.lineTo(size,h-o);context.closePath()}},\x22triangle-up\x22:{draw:function(context,size){size\x3dMath.sqrt(size)/2;var h\x3dHalfSqrt3*size;context.moveTo(0,-h);context.lineTo(-size,h);context.lineTo(size,h);context.closePath()}},\x22triangle-down\x22:{draw:function(context,size){size\x3dMath.sqrt(size)/2;var h\x3d\nHalfSqrt3*size;context.moveTo(0,h);context.lineTo(-size,-h);context.lineTo(size,-h);context.closePath()}},\x22triangle-right\x22:{draw:function(context,size){size\x3dMath.sqrt(size)/2;var h\x3dHalfSqrt3*size;context.moveTo(h,0);context.lineTo(-h,-size);context.lineTo(-h,size);context.closePath()}},\x22triangle-left\x22:{draw:function(context,size){size\x3dMath.sqrt(size)/2;var h\x3dHalfSqrt3*size;context.moveTo(-h,0);context.lineTo(h,-size);context.lineTo(h,size);context.closePath()}},stroke:{draw:function(context,size){size\x3d\nMath.sqrt(size)/2;context.moveTo(-size,0);context.lineTo(size,0)}}},custom\x3d{},x$jscomp$0\x3dfunction(item){return item.x||0},y$jscomp$0\x3dfunction(item){return item.y||0},def$jscomp$0\x3dfunction(item){return!1!\x3d\x3ditem.defined},arcShape\x3dd3Shape.arc().startAngle(function(item){return item.startAngle||0}).endAngle(function(item){return item.endAngle||0}).padAngle(function(item){return item.padAngle||0}).innerRadius(function(item){return item.innerRadius||0}).outerRadius(function(item){return item.outerRadius||\n0}).cornerRadius(function(item){return item.cornerRadius||0}),areavShape\x3dd3Shape.area().x(x$jscomp$0).y1(y$jscomp$0).y0(function(item){return(item.y||0)+(item.height||0)}).defined(def$jscomp$0),areahShape\x3dd3Shape.area().y(y$jscomp$0).x1(x$jscomp$0).x0(function(item){return(item.x||0)+(item.width||0)}).defined(def$jscomp$0),lineShape\x3dd3Shape.line().x(x$jscomp$0).y(y$jscomp$0).defined(def$jscomp$0),rectShape\x3dvg_rect().x(x$jscomp$0).y(y$jscomp$0).width(function(item){return item.width||0}).height(function(item){return item.height||\n0}).cornerRadius(function(item){return value$jscomp$0(item.cornerRadiusTopLeft,item.cornerRadius)||0},function(item){return value$jscomp$0(item.cornerRadiusTopRight,item.cornerRadius)||0},function(item){return value$jscomp$0(item.cornerRadiusBottomRight,item.cornerRadius)||0},function(item){return value$jscomp$0(item.cornerRadiusBottomLeft,item.cornerRadius)||0}),symbolShape\x3dd3Shape.symbol().type(function(item){return symbols(item.shape||\x22circle\x22)}).size(function(item){return value$jscomp$0(item.size,\n64)}),trailShape\x3dvg_trail().x(x$jscomp$0).y(y$jscomp$0).defined(def$jscomp$0).size(function(item){return item.size||1}),clip_id\x3d1,prototype\x3dBounds.prototype;prototype.clone\x3dfunction(){return new Bounds(this)};prototype.clear\x3dfunction(){this.x1\x3d+Number.MAX_VALUE;this.y1\x3d+Number.MAX_VALUE;this.x2\x3d-Number.MAX_VALUE;this.y2\x3d-Number.MAX_VALUE;return this};prototype.empty\x3dfunction(){return this.x1\x3d\x3d\x3d+Number.MAX_VALUE\x26\x26this.y1\x3d\x3d\x3d+Number.MAX_VALUE\x26\x26this.x2\x3d\x3d\x3d-Number.MAX_VALUE\x26\x26this.y2\x3d\x3d\x3d-Number.MAX_VALUE};\nprototype.equals\x3dfunction(b){return this.x1\x3d\x3d\x3db.x1\x26\x26this.y1\x3d\x3d\x3db.y1\x26\x26this.x2\x3d\x3d\x3db.x2\x26\x26this.y2\x3d\x3d\x3db.y2};prototype.set\x3dfunction(x1,y1,x2,y2){x2\x3cx1?(this.x2\x3dx1,this.x1\x3dx2):(this.x1\x3dx1,this.x2\x3dx2);y2\x3cy1?(this.y2\x3dy1,this.y1\x3dy2):(this.y1\x3dy1,this.y2\x3dy2);return this};prototype.add\x3dfunction(x,y){x\x3cthis.x1\x26\x26(this.x1\x3dx);y\x3cthis.y1\x26\x26(this.y1\x3dy);x\x3ethis.x2\x26\x26(this.x2\x3dx);y\x3ethis.y2\x26\x26(this.y2\x3dy);return this};prototype.expand\x3dfunction(d){this.x1-\x3dd;this.y1-\x3dd;this.x2+\x3dd;this.y2+\x3dd;return this};prototype.round\x3dfunction(){this.x1\x3d\nMath.floor(this.x1);this.y1\x3dMath.floor(this.y1);this.x2\x3dMath.ceil(this.x2);this.y2\x3dMath.ceil(this.y2);return this};prototype.scale\x3dfunction(s){this.x1*\x3ds;this.y1*\x3ds;this.x2*\x3ds;this.y2*\x3ds;return this};prototype.translate\x3dfunction(dx,dy){this.x1+\x3ddx;this.x2+\x3ddx;this.y1+\x3ddy;this.y2+\x3ddy;return this};prototype.rotate\x3dfunction(angle,x,y){angle\x3dthis.rotatedPoints(angle,x,y);return this.clear().add(angle[0],angle[1]).add(angle[2],angle[3]).add(angle[4],angle[5]).add(angle[6],angle[7])};prototype.rotatedPoints\x3d\nfunction(angle,x,y){var x1\x3dthis.x1,y1\x3dthis.y1,x2\x3dthis.x2,y2\x3dthis.y2,cos\x3dMath.cos(angle);angle\x3dMath.sin(angle);var cx\x3dx-x*cos+y*angle;x\x3dy-x*angle-y*cos;return[cos*x1-angle*y1+cx,angle*x1+cos*y1+x,cos*x1-angle*y2+cx,angle*x1+cos*y2+x,cos*x2-angle*y1+cx,angle*x2+cos*y1+x,cos*x2-angle*y2+cx,angle*x2+cos*y2+x]};prototype.union\x3dfunction(b){b.x1\x3cthis.x1\x26\x26(this.x1\x3db.x1);b.y1\x3cthis.y1\x26\x26(this.y1\x3db.y1);b.x2\x3ethis.x2\x26\x26(this.x2\x3db.x2);b.y2\x3ethis.y2\x26\x26(this.y2\x3db.y2);return this};prototype.intersect\x3dfunction(b){b.x1\x3e\nthis.x1\x26\x26(this.x1\x3db.x1);b.y1\x3ethis.y1\x26\x26(this.y1\x3db.y1);b.x2\x3cthis.x2\x26\x26(this.x2\x3db.x2);b.y2\x3cthis.y2\x26\x26(this.y2\x3db.y2);return this};prototype.encloses\x3dfunction(b){return b\x26\x26this.x1\x3c\x3db.x1\x26\x26this.x2\x3e\x3db.x2\x26\x26this.y1\x3c\x3db.y1\x26\x26this.y2\x3e\x3db.y2};prototype.alignsWith\x3dfunction(b){return b\x26\x26(this.x1\x3d\x3db.x1||this.x2\x3d\x3db.x2||this.y1\x3d\x3db.y1||this.y2\x3d\x3db.y2)};prototype.intersects\x3dfunction(b){return b\x26\x26!(this.x2\x3cb.x1||this.x1\x3eb.x2||this.y2\x3cb.y1||this.y1\x3eb.y2)};prototype.contains\x3dfunction(x,y){return!(x\x3cthis.x1||x\x3ethis.x2||y\x3cthis.y1||\ny\x3ethis.y2)};prototype.width\x3dfunction(){return this.x2-this.x1};prototype.height\x3dfunction(){return this.y2-this.y1};vegaUtil.inherits(GroupItem,Item);var prototype$1\x3dResourceLoader.prototype;prototype$1.pending\x3dfunction(){return this._pending};prototype$1.sanitizeURL\x3dfunction(uri){var loader\x3dthis;loader._pending+\x3d1;return loader._loader.sanitize(uri,{context:\x22href\x22}).then(function(opt){--loader._pending;return opt}).catch(function(){--loader._pending;return null})};prototype$1.loadImage\x3dfunction(uri){var loader\x3d\nthis,Image\x3dvegaCanvas.image();loader._pending+\x3d1;return loader._loader.sanitize(uri,{context:\x22image\x22}).then(function(opt){var url\x3dopt.href;if(!url||!Image)throw{url:url};var img\x3dnew Image;opt\x3dvegaUtil.hasOwnProperty(opt,\x22crossOrigin\x22)?opt.crossOrigin:\x22anonymous\x22;null!\x3dopt\x26\x26(img.crossOrigin\x3dopt);img.onload\x3dfunction(){--loader._pending};img.onerror\x3dfunction(){--loader._pending};img.src\x3durl;return img}).catch(function(e){--loader._pending;return{complete:!1,width:0,height:0,src:e\x26\x26e.url||\x22\x22}})};prototype$1.ready\x3d\nfunction(){var loader\x3dthis;return new Promise(function(accept){function poll(value){loader.pending()?setTimeout(function(){poll(!0)},10):accept(value)}poll(!1)})};var bounds$jscomp$0,lx,ly,circleThreshold\x3dTau-1E-8;context$jscomp$0.beginPath\x3dnoop;context$jscomp$0.closePath\x3dnoop;context$jscomp$0.moveTo\x3daddL;context$jscomp$0.lineTo\x3daddL;context$jscomp$0.rect\x3dfunction(x,y,w,h){bounds$jscomp$0.add(x+w,y+h);addL(x,y)};context$jscomp$0.quadraticCurveTo\x3dfunction(x1,y1,x2,y2){quadExtrema(lx,x1,x2,addX);quadExtrema(ly,\ny1,y2,addY);addL(x2,y2)};context$jscomp$0.bezierCurveTo\x3dfunction(x1,y1,x2,y2,x3,y3){cubicExtrema(lx,x1,x2,x3,addX);cubicExtrema(ly,y1,y2,y3,addY);addL(x3,y3)};context$jscomp$0.arc\x3dfunction(cx,cy,r,sa,ea,ccw){lx\x3dr*Math.cos(ea)+cx;ly\x3dr*Math.sin(ea)+cy;if(Math.abs(ea-sa)\x3ecircleThreshold)bounds$jscomp$0.add(cx-r,cy-r),bounds$jscomp$0.add(cx+r,cy+r);else{var update\x3dfunction(a){bounds$jscomp$0.add(r*Math.cos(a)+cx,r*Math.sin(a)+cy)};update(sa);update(ea);if(ea!\x3d\x3dsa){sa%\x3dTau;0\x3esa\x26\x26(sa+\x3dTau);ea%\x3dTau;0\x3eea\x26\x26\n(ea+\x3dTau);if(ea\x3csa){ccw\x3d!ccw;var s\x3dsa;sa\x3dea;ea\x3ds}if(ccw)for(ea-\x3dTau,s\x3dsa-sa%HalfPi,sa\x3d0;4\x3esa\x26\x26s\x3eea;++sa,s-\x3dHalfPi)update(s);else for(s\x3dsa-sa%HalfPi+HalfPi,sa\x3d0;4\x3esa\x26\x26s\x3cea;++sa,s+\x3dHalfPi)update(s)}}};var context$1\x3d(context$1\x3dvegaCanvas.canvas(1,1))?context$1.getContext(\x222d\x22):null,b$jscomp$0\x3dnew Bounds,Empty\x3d[],arc$1\x3dmarkItemPath(\x22arc\x22,function(context,item){return arcShape.context(context)(item)}),area$1\x3dmarkMultiItemPath(\x22area\x22,function(context,items){var item\x3ditems[0];return(\x22horizontal\x22\x3d\x3d\x3ditem.orient?\nareahShape:areavShape).curve(curves(item.interpolate||\x22linear\x22,item.orient,item.tension)).context(context)(items)},function(a,p){p\x3d\x22horizontal\x22\x3d\x3d\x3da[0].orient?p[1]:p[0];for(var z\x3d\x22horizontal\x22\x3d\x3d\x3da[0].orient?\x22y\x22:\x22x\x22,i\x3da.length,min\x3dInfinity,hit,d;0\x3c\x3d--i;)!1!\x3d\x3da[i].defined\x26\x26(d\x3dMath.abs(a[i][z]-p),d\x3cmin\x26\x26(min\x3dd,hit\x3da[i]));return hit}),hitBackground\x3dhitPath(rectanglePath),hitForeground\x3dhitPath(rectanglePath,!1),group$jscomp$0\x3d{type:\x22group\x22,tag:\x22g\x22,nested:!1,attr:function(emit,item){emit(\x22transform\x22,translate(item.x||\n0,item.y||0))},bound:function(bounds,group){if(!group.clip\x26\x26group.items)for(var items\x3dgroup.items,m\x3ditems.length,j\x3d0;j\x3cm;++j)bounds.union(items[j].bounds);(group.clip||group.width||group.height)\x26\x26!group.noBound\x26\x26bounds.add(0,0).add(group.width||0,group.height||0);boundStroke(bounds,group);return bounds.translate(group.x||0,group.y||0)},draw:function(context,scene,bounds){var $jscomp$this\x3dthis;visit(scene,function(group){var gx\x3dgroup.x||0,gy\x3dgroup.y||0,fore\x3dgroup.strokeForeground,opacity\x3dnull\x3d\x3dgroup.opacity?\n1:group.opacity;(group.stroke||group.fill)\x26\x26opacity\x26\x26(rectanglePath(context,group,gx,gy),blend(context,group),group.fill\x26\x26fill$jscomp$0(context,group,opacity)\x26\x26context.fill(),group.stroke\x26\x26!fore\x26\x26stroke$jscomp$0(context,group,opacity)\x26\x26context.stroke());context.save();context.translate(gx,gy);group.clip\x26\x26clipGroup(context,group);bounds\x26\x26bounds.translate(-gx,-gy);visit(group,function(item){$jscomp$this.draw(context,item,bounds)});bounds\x26\x26bounds.translate(gx,gy);context.restore();fore\x26\x26group.stroke\x26\x26\nopacity\x26\x26(rectanglePath(context,group,gx,gy),blend(context,group),stroke$jscomp$0(context,group,opacity)\x26\x26context.stroke())})},pick:function(context,scene,x,y,gx,gy){var $jscomp$this\x3dthis;if(scene.bounds\x26\x26!scene.bounds.contains(gx,gy)||!scene.items)return null;var cx\x3dx*context.pixelRatio,cy\x3dy*context.pixelRatio;return pickVisit(scene,function(group){var hit\x3dgroup.bounds;if(!hit||hit.contains(gx,gy)){var dx\x3dgroup.x||0;var dy\x3dgroup.y||0;hit\x3ddx+(group.width||0);var fore\x3ddy+(group.height||0);var ix\x3dgroup.clip;\nif(!ix||!(gx\x3cdx||gx\x3ehit||gy\x3cdy||gy\x3efore)){context.save();context.translate(dx,dy);dx\x3dgx-dx;dy\x3dgy-dy;if(ix\x26\x26hasCornerRadius(group)\x26\x26!hitBackground(context,group,cx,cy))return context.restore(),null;fore\x3dgroup.strokeForeground;if((ix\x3d!1!\x3d\x3dscene.interactive)\x26\x26fore\x26\x26group.stroke\x26\x26hitForeground(context,group,cx,cy))return context.restore(),group;hit\x3dpickVisit(group,function(mark){return(!1!\x3d\x3dmark.interactive||\x22group\x22\x3d\x3d\x3dmark.marktype)\x26\x26mark.bounds\x26\x26mark.bounds.contains(dx,dy)?$jscomp$this.pick(mark,x,y,\ndx,dy):null});!hit\x26\x26ix\x26\x26(group.fill||!fore\x26\x26group.stroke)\x26\x26hitBackground(context,group,cx,cy)\x26\x26(hit\x3dgroup);context.restore();return hit||null}}})},isect:intersectRect,content:function(emit,item,renderer){item\x3ditem.clip?clip$jscomp$0(renderer,item,item):null;emit(\x22clip-path\x22,item)},background:function(emit,item){emit(\x22class\x22,\x22background\x22);emit(\x22aria-hidden\x22,!0);var off\x3doffset$jscomp$0(item);emit(\x22d\x22,rectangle$jscomp$0(null,item,off,off))},foreground:function(emit,item){emit(\x22class\x22,\x22foreground\x22);emit(\x22aria-hidden\x22,\n!0);if(item.strokeForeground){var off\x3doffset$jscomp$0(item);emit(\x22d\x22,rectangle$jscomp$0(null,item,off,off))}else emit(\x22d\x22,\x22\x22)}},metadata\x3d{version:\x221.1\x22,xmlns:\x22http://www.w3.org/2000/svg\x22,\x22xmlns:xlink\x22:\x22http://www.w3.org/1999/xlink\x22},image$jscomp$1\x3d{type:\x22image\x22,tag:\x22image\x22,nested:!1,attr:function(emit,item,renderer){var img\x3dgetImage(item,renderer);renderer\x3dimageWidth(item,img);var h\x3dimageHeight(item,img),x\x3d(item.x||0)-imageXOffset(item.align,renderer),y\x3d(item.y||0)-imageYOffset(item.baseline,h);img\x3d\n!img.src\x26\x26img.toDataURL?img.toDataURL():img.src||\x22\x22;emit(\x22href\x22,img,metadata[\x22xmlns:xlink\x22],\x22xlink:href\x22);emit(\x22transform\x22,translate(x,y));emit(\x22width\x22,renderer);emit(\x22height\x22,h);emit(\x22preserveAspectRatio\x22,!1\x3d\x3d\x3ditem.aspect?\x22none\x22:\x22xMidYMid\x22)},bound:function(bounds,item){var img\x3ditem.image,w\x3dimageWidth(item,img);img\x3dimageHeight(item,img);var x\x3d(item.x||0)-imageXOffset(item.align,w);item\x3d(item.y||0)-imageYOffset(item.baseline,img);return bounds.set(x,item,x+w,item+img)},draw:function(context,scene,\nbounds){var $jscomp$this\x3dthis;visit(scene,function(item){if(!bounds||bounds.intersects(item.bounds)){var img\x3dgetImage(item,$jscomp$this),w\x3dimageWidth(item,img),h\x3dimageHeight(item,img),x\x3d(item.x||0)-imageXOffset(item.align,w),y\x3d(item.y||0)-imageYOffset(item.baseline,h),opacity;if(!1!\x3d\x3ditem.aspect){var ar0\x3dimg.width/img.height;var ar1\x3ditem.width/item.height;ar0\x3d\x3d\x3dar0\x26\x26ar1\x3d\x3d\x3dar1\x26\x26ar0!\x3d\x3dar1\x26\x26(ar1\x3car0?(ar0\x3dw/ar0,y+\x3d(h-ar0)/2,h\x3dar0):(ar0*\x3dh,x+\x3d(w-ar0)/2,w\x3dar0))}if(img.complete||img.toDataURL)blend(context,\nitem),context.globalAlpha\x3dnull!\x3d(opacity\x3ditem.opacity)?opacity:1,context.imageSmoothingEnabled\x3d!1!\x3d\x3ditem.smooth,context.drawImage(img,x,y,w,h)}})},pick:pick(),isect:vegaUtil.truthy,get:getImage,xOffset:imageXOffset,yOffset:imageYOffset},line$1\x3dmarkMultiItemPath(\x22line\x22,function(context,items){var item\x3ditems[0];return lineShape.curve(curves(item.interpolate||\x22linear\x22,item.orient,item.tension)).context(context)(items)},function(a,p){for(var t\x3dMath.pow(a[0].strokeWidth||1,2),i\x3da.length,dx,dy;0\x3c\x3d--i;)if(!1!\x3d\x3d\na[i].defined\x26\x26(dx\x3da[i].x-p[0],dy\x3da[i].y-p[1],dx\x3ddx*dx+dy*dy,dx\x3ct))return a[i];return null}),path$1\x3d{type:\x22path\x22,tag:\x22path\x22,nested:!1,attr:function(emit,item){var sy\x3ditem.scaleY||1;1\x3d\x3d\x3d(item.scaleX||1)\x26\x261\x3d\x3d\x3dsy||emit(\x22vector-effect\x22,\x22non-scaling-stroke\x22);emit(\x22transform\x22,transformItem(item));emit(\x22d\x22,item.path)},bound:function(bounds,item){path$jscomp$0(context$jscomp$0(bounds),item)?bounds.set(0,0,0,0):boundStroke(bounds,item,!0);item.angle\x26\x26bounds.rotate(item.angle*DegToRad,item.x||0,item.y||0);return bounds},\ndraw:drawAll(path$jscomp$0),pick:pick(hitPath(path$jscomp$0)),isect:intersectPath(path$jscomp$0)},rect$jscomp$0\x3d{type:\x22rect\x22,tag:\x22path\x22,nested:!1,attr:function(emit,item){emit(\x22d\x22,rectangle$jscomp$0(null,item))},bound:function(bounds,item){var x,y;return boundStroke(bounds.set(x\x3ditem.x||0,y\x3ditem.y||0,x+item.width||0,y+item.height||0),item)},draw:drawAll(draw$2),pick:pick(hitPath(draw$2)),isect:intersectRect},rule\x3d{type:\x22rule\x22,tag:\x22line\x22,nested:!1,attr:function(emit,item){emit(\x22transform\x22,translate(item.x||\n0,item.y||0));emit(\x22x2\x22,null!\x3ditem.x2?item.x2-(item.x||0):0);emit(\x22y2\x22,null!\x3ditem.y2?item.y2-(item.y||0):0)},bound:function(bounds,item){var x1,y1;return boundStroke(bounds.set(x1\x3ditem.x||0,y1\x3ditem.y||0,null!\x3ditem.x2?item.x2:x1,null!\x3ditem.y2?item.y2:y1),item)},draw:function(context,scene,bounds){visit(scene,function(item){if(!bounds||bounds.intersects(item.bounds)){var opacity\x3dnull\x3d\x3ditem.opacity?1:item.opacity;opacity\x26\x26path$2(context,item,opacity)\x26\x26(blend(context,item),context.stroke())}})},pick:pick(function(context,\nitem,x,y){return context.isPointInStroke?path$2(context,item,1)\x26\x26context.isPointInStroke(x,y):!1}),isect:intersectRule},shape$1\x3dmarkItemPath(\x22shape\x22,function(context,item){return(item.mark.shape||item.shape).context(context)(item)}),symbol$1\x3dmarkItemPath(\x22symbol\x22,function(context,item){return symbolShape.context(context)(item)},intersectPoint),widthCache\x3dvegaUtil.lruCache(),textMetrics\x3d{height:fontSize,measureWidth:measureWidth,estimateWidth:estimateWidth,width:estimateWidth,canvas:useCanvas};useCanvas(!0);\nvar textAlign\x3d{left:\x22start\x22,center:\x22middle\x22,right:\x22end\x22},tempBounds\x3dnew Bounds,text$jscomp$0\x3d{type:\x22text\x22,tag:\x22text\x22,nested:!1,attr:function(emit,item){var dx\x3ditem.dx||0,dy\x3d(item.dy||0)+offset$1(item),p\x3danchorPoint(item),x\x3dp.x1;p\x3dp.y1;var a\x3ditem.angle||0;emit(\x22text-anchor\x22,textAlign[item.align]||\x22start\x22);if(a){if(item\x3dtranslate(x,p)+\x22 rotate(\x22+(a+\x22)\x22),dx||dy)item+\x3d\x22 \x22+translate(dx,dy)}else item\x3dtranslate(x+dx,p+dy);emit(\x22transform\x22,item)},bound:bound$5,draw:function(context,scene,bounds){visit(scene,\nfunction(item){var opacity\x3dnull\x3d\x3ditem.opacity?1:item.opacity,i;if(!(bounds\x26\x26!bounds.intersects(item.bounds)||0\x3d\x3d\x3dopacity||0\x3e\x3ditem.fontSize||null\x3d\x3ditem.text||0\x3d\x3d\x3ditem.text.length)){context.font\x3dfont(item);context.textAlign\x3ditem.align||\x22left\x22;var p\x3danchorPoint(item);var x\x3dp.x1;p\x3dp.y1;item.angle\x26\x26(context.save(),context.translate(x,p),context.rotate(item.angle*DegToRad),x\x3dp\x3d0);x+\x3ditem.dx||0;p+\x3d(item.dy||0)+offset$1(item);var tl\x3dtextLines(item);blend(context,item);if(vegaUtil.isArray(tl)){var lh\x3dlineHeight(item);\nfor(i\x3d0;i\x3ctl.length;++i){var str\x3dtextValue(item,tl[i]);item.fill\x26\x26fill$jscomp$0(context,item,opacity)\x26\x26context.fillText(str,x,p);item.stroke\x26\x26stroke$jscomp$0(context,item,opacity)\x26\x26context.strokeText(str,x,p);p+\x3dlh}}else str\x3dtextValue(item,tl),item.fill\x26\x26fill$jscomp$0(context,item,opacity)\x26\x26context.fillText(str,x,p),item.stroke\x26\x26stroke$jscomp$0(context,item,opacity)\x26\x26context.strokeText(str,x,p);item.angle\x26\x26context.restore()}})},pick:pick(function(context,item,x,y,gx,gy){if(0\x3e\x3ditem.fontSize)return!1;\nif(!item.angle)return!0;x\x3danchorPoint(item);context\x3dx.x1;x\x3dx.y1;y\x3dbound$5(tempBounds,item,1);var a\x3d-item.angle*DegToRad;item\x3dMath.cos(a);a\x3dMath.sin(a);return y.contains(item*gx-a*gy+(context-item*context+a*x),a*gx+item*gy+(x-a*context-item*x))}),isect:function(item,box){item\x3dbound$5(tempBounds,item,2);return intersectBoxLine(box,item[0],item[1],item[2],item[3])||intersectBoxLine(box,item[0],item[1],item[4],item[5])||intersectBoxLine(box,item[4],item[5],item[6],item[7])||intersectBoxLine(box,item[2],\nitem[3],item[6],item[7])}},trail$1\x3dmarkMultiItemPath(\x22trail\x22,function(context,items){return trailShape.context(context)(items)},function(a,p){for(var i\x3da.length,dx,dy;0\x3c\x3d--i;)if(!1!\x3d\x3da[i].defined\x26\x26(dx\x3da[i].x-p[0],dy\x3da[i].y-p[1],dy\x3ddx*dx+dy*dy,dx\x3da[i].size||1,dy\x3cdx*dx))return a[i];return null}),Marks\x3d{arc:arc$1,area:area$1,group:group$jscomp$0,image:image$jscomp$1,line:line$1,path:path$1,rect:rect$jscomp$0,rule:rule,shape:shape$1,symbol:symbol$1,text:text$jscomp$0,trail:trail$1},DUMMY\x3d{mark:null},\nkeys\x3d\x22marktype name role interactive clip items zindex x y width height align baseline fill fillOpacity opacity blend stroke strokeOpacity strokeWidth strokeCap strokeDash strokeDashOffset strokeForeground strokeOffset startAngle endAngle innerRadius outerRadius cornerRadius padAngle cornerRadiusTopLeft cornerRadiusTopRight cornerRadiusBottomLeft cornerRadiusBottomRight interpolate tension orient defined url aspect smooth path scaleX scaleY x2 y2 size shape text angle theta radius dir dx dy ellipsis limit lineBreak lineHeight font fontSize fontWeight fontStyle fontVariant description aria ariaRole ariaRoleDescription\x22.split(\x22 \x22),\nprototype$2\x3dScenegraph.prototype;prototype$2.toJSON\x3dfunction(indent){return sceneToJSON(this.root,indent||0)};prototype$2.mark\x3dfunction(markdef,group,index){group\x3dgroup||this.root.items[0];markdef\x3dcreateMark(markdef,group);group.items[index]\x3dmarkdef;markdef.zindex\x26\x26(markdef.group.zdirty\x3d!0);return markdef};var prototype$3\x3dHandler.prototype;prototype$3.initialize\x3dfunction(el,origin,obj){this._el\x3del;this._obj\x3dobj||null;return this.origin(origin)};prototype$3.element\x3dfunction(){return this._el};prototype$3.canvas\x3d\nfunction(){return this._el\x26\x26this._el.firstChild};prototype$3.origin\x3dfunction(origin){return arguments.length?(this._origin\x3dorigin||[0,0],this):this._origin.slice()};prototype$3.scene\x3dfunction(scene){if(!arguments.length)return this._scene;this._scene\x3dscene;return this};prototype$3.on\x3dfunction(){};prototype$3.off\x3dfunction(){};prototype$3._handlerIndex\x3dfunction(h,type,handler){for(var i\x3dh?h.length:0;0\x3c\x3d--i;)if(h[i].type\x3d\x3d\x3dtype\x26\x26(!handler||h[i].handler\x3d\x3d\x3dhandler))return i;return-1};prototype$3.handlers\x3d\nfunction(type){var h\x3dthis._handlers,a\x3d[];if(type)a.push.apply(a,h[this.eventName(type)]);else for(var k in h)a.push.apply(a,h[k]);return a};prototype$3.eventName\x3dfunction(name){var i\x3dname.indexOf(\x22.\x22);return 0\x3ei?name:name.slice(0,i)};prototype$3.handleHref\x3dfunction(event,item,href){this._loader.sanitize(href,{context:\x22href\x22}).then(function(opt){var e\x3dnew MouseEvent(event.type,event),a\x3ddomCreate(null,\x22a\x22),name;for(name in opt)a.setAttribute(name,opt[name]);a.dispatchEvent(e)}).catch(function(){})};\nprototype$3.handleTooltip\x3dfunction(event,item,show){if(item\x26\x26null!\x3ditem.tooltip){var el\x3dthis.canvas(),origin\x3dthis._origin,mark\x3ditem\x26\x26item.mark,mdef;if(mark\x26\x26(mdef\x3dMarks[mark.marktype]).tip){el\x3dpoint(event,el);el[0]-\x3dorigin[0];for(el[1]-\x3dorigin[1];item\x3ditem.mark.group;)el[0]-\x3ditem.x||0,el[1]-\x3ditem.y||0;item\x3dmdef.tip(mark.items,el)}this._tooltip.call(this._obj,this,event,item,show\x26\x26item\x26\x26item.tooltip||null)}};prototype$3.getItemBoundingClientRect\x3dfunction(item){var el\x3dthis.canvas();if(el){var rect\x3d\nel.getBoundingClientRect(),origin\x3dthis._origin,bounds\x3ditem.bounds;el\x3dbounds.width();var height\x3dbounds.height(),x\x3dbounds.x1+origin[0]+rect.left;for(rect\x3dbounds.y1+origin[1]+rect.top;item.mark\x26\x26(item\x3ditem.mark.group);)x+\x3ditem.x||0,rect+\x3ditem.y||0;return{x:x,y:rect,width:el,height:height,left:x,top:rect,right:x+el,bottom:rect+height}}};var prototype$4\x3dRenderer.prototype;prototype$4.initialize\x3dfunction(el,width,height,origin,scaleFactor){this._el\x3del;return this.resize(width,height,origin,scaleFactor)};\nprototype$4.element\x3dfunction(){return this._el};prototype$4.canvas\x3dfunction(){return this._el\x26\x26this._el.firstChild};prototype$4.background\x3dfunction(bgcolor){if(0\x3d\x3d\x3darguments.length)return this._bgcolor;this._bgcolor\x3dbgcolor;return this};prototype$4.resize\x3dfunction(width,height,origin,scaleFactor){this._width\x3dwidth;this._height\x3dheight;this._origin\x3dorigin||[0,0];this._scale\x3dscaleFactor||1;return this};prototype$4.dirty\x3dfunction(){};prototype$4.render\x3dfunction(scene){var r\x3dthis;r._call\x3dfunction(){r._render(scene)};\nr._call();r._call\x3dnull;return r};prototype$4._render\x3dfunction(){};prototype$4.renderAsync\x3dfunction(scene){var r\x3dthis.render(scene);return this._ready?this._ready.then(function(){return r}):Promise.resolve(r)};prototype$4._load\x3dfunction(method,uri){var r\x3dthis;method\x3dr._loader[method](uri);if(!r._ready){var call\x3dr._call;r._ready\x3dr._loader.ready().then(function(redraw){redraw\x26\x26call();r._ready\x3dnull})}return method};prototype$4.sanitizeURL\x3dfunction(uri){return this._load(\x22sanitizeURL\x22,uri)};prototype$4.loadImage\x3d\nfunction(uri){return this._load(\x22loadImage\x22,uri)};var prototype$5\x3dvegaUtil.inherits(CanvasHandler,Handler);prototype$5.initialize\x3dfunction(el,origin,obj){var $jscomp$this\x3dthis;this._canvas\x3del\x26\x26domFind(el,\x22canvas\x22);[\x22click\x22,\x22mousedown\x22,\x22mousemove\x22,\x22mouseout\x22,\x22dragleave\x22].forEach(function(type){return eventListenerCheck($jscomp$this,type)});return Handler.prototype.initialize.call(this,el,origin,obj)};prototype$5.canvas\x3dfunction(){return this._canvas};prototype$5.context\x3dfunction(){return this._canvas.getContext(\x222d\x22)};\nprototype$5.events\x3d\x22keydown keypress keyup dragenter dragleave dragover mousedown mouseup mousemove mouseout mouseover click dblclick wheel mousewheel touchstart touchmove touchend\x22.split(\x22 \x22);prototype$5.DOMMouseScroll\x3dfunction(evt){this.fire(\x22mousewheel\x22,evt)};prototype$5.mousemove\x3dmove(\x22mousemove\x22,\x22mouseover\x22,\x22mouseout\x22);prototype$5.dragover\x3dmove(\x22dragover\x22,\x22dragenter\x22,\x22dragleave\x22);prototype$5.mouseout\x3dinactive(\x22mouseout\x22);prototype$5.dragleave\x3dinactive(\x22dragleave\x22);prototype$5.mousedown\x3dfunction(evt){this._down\x3d\nthis._active;this.fire(\x22mousedown\x22,evt)};prototype$5.click\x3dfunction(evt){this._down\x3d\x3d\x3dthis._active\x26\x26(this.fire(\x22click\x22,evt),this._down\x3dnull)};prototype$5.touchstart\x3dfunction(evt){this._touch\x3dthis.pickEvent(evt.changedTouches[0]);this._first\x26\x26(this._active\x3dthis._touch,this._first\x3d!1);this.fire(\x22touchstart\x22,evt,!0)};prototype$5.touchmove\x3dfunction(evt){this.fire(\x22touchmove\x22,evt,!0)};prototype$5.touchend\x3dfunction(evt){this.fire(\x22touchend\x22,evt,!0);this._touch\x3dnull};prototype$5.fire\x3dfunction(type,evt,touch){touch\x3d\ntouch?this._touch:this._active;var h\x3dthis._handlers[type];evt.vegaType\x3dtype;\x22click\x22\x3d\x3d\x3dtype\x26\x26touch\x26\x26touch.href?this.handleHref(evt,touch,touch.href):(\x22mousemove\x22\x3d\x3d\x3dtype||\x22mouseout\x22\x3d\x3d\x3dtype)\x26\x26this.handleTooltip(evt,touch,\x22mouseout\x22!\x3d\x3dtype);if(h){type\x3d0;for(var len\x3dh.length;type\x3clen;++type)h[type].handler.call(this._obj,evt,touch)}};prototype$5.on\x3dfunction(type,handler){var name\x3dthis.eventName(type),h\x3dthis._handlers;0\x3ethis._handlerIndex(h[name],type,handler)\x26\x26(eventListenerCheck(this,type),(h[name]||\n(h[name]\x3d[])).push({type:type,handler:handler}));return this};prototype$5.off\x3dfunction(type,handler){var name\x3dthis.eventName(type);name\x3dthis._handlers[name];type\x3dthis._handlerIndex(name,type,handler);0\x3c\x3dtype\x26\x26name.splice(type,1);return this};prototype$5.pickEvent\x3dfunction(evt){evt\x3dpoint(evt,this._canvas);var o\x3dthis._origin;return this.pick(this._scene,evt[0],evt[1],evt[0]-o[0],evt[1]-o[1])};prototype$5.pick\x3dfunction(scene,x,y,gx,gy){var g\x3dthis.context();return Marks[scene.marktype].pick.call(this,\ng,scene,x,y,gx,gy)};var pixelRatio\x3d\x22undefined\x22!\x3d\x3dtypeof window?window.devicePixelRatio||1:1,prototype$6\x3dvegaUtil.inherits(CanvasRenderer,Renderer),base$jscomp$0\x3dRenderer.prototype;prototype$6.initialize\x3dfunction(el,width,height,origin,scaleFactor,options){this._options\x3doptions||{};this._canvas\x3dthis._options.externalContext?null:vegaCanvas.canvas(1,1,this._options.type);el\x26\x26this._canvas\x26\x26(domClear(el,0).appendChild(this._canvas),this._canvas.setAttribute(\x22class\x22,\x22marks\x22));return base$jscomp$0.initialize.call(this,\nel,width,height,origin,scaleFactor)};prototype$6.resize\x3dfunction(width,height,origin,scaleFactor$jscomp$0){base$jscomp$0.resize.call(this,width,height,origin,scaleFactor$jscomp$0);if(this._canvas){width\x3dthis._canvas;height\x3dthis._width;origin\x3dthis._height;scaleFactor$jscomp$0\x3dthis._origin;var scaleFactor\x3dthis._scale,opt\x3dthis._options.context,inDOM\x3d\x22undefined\x22!\x3d\x3dtypeof HTMLElement\x26\x26width instanceof HTMLElement\x26\x26null!\x3dwidth.parentNode,context\x3dwidth.getContext(\x222d\x22);scaleFactor\x3dinDOM?pixelRatio:scaleFactor;\nwidth.width\x3dheight*scaleFactor;width.height\x3dorigin*scaleFactor;for(var key in opt)context[key]\x3dopt[key];inDOM\x26\x261!\x3d\x3dscaleFactor\x26\x26(width.style.width\x3dheight+\x22px\x22,width.style.height\x3dorigin+\x22px\x22);context.pixelRatio\x3dscaleFactor;context.setTransform(scaleFactor,0,0,scaleFactor,scaleFactor*scaleFactor$jscomp$0[0],scaleFactor*scaleFactor$jscomp$0[1])}else(key\x3dthis._options.externalContext)||vegaUtil.error(\x22CanvasRenderer is missing a valid canvas or context\x22),key.scale(this._scale,this._scale),key.translate(this._origin[0],\nthis._origin[1]);this._redraw\x3d!0;return this};prototype$6.canvas\x3dfunction(){return this._canvas};prototype$6.context\x3dfunction(){return this._options.externalContext||(this._canvas?this._canvas.getContext(\x222d\x22):null)};prototype$6.dirty\x3dfunction(item){var b\x3dthis._tempb.clear().union(item.bounds);for(item\x3ditem.mark.group;item;)b.translate(item.x||0,item.y||0),item\x3ditem.mark.group;this._dirty.union(b)};prototype$6._render\x3dfunction(scene){var g\x3dthis.context(),o\x3dthis._origin,w\x3dthis._width,h\x3dthis._height,\ndb\x3dthis._dirty,vb\x3d(new Bounds).set(0,0,w,h).translate(-o[0],-o[1]);g.save();this._redraw||db.empty()?vb\x3d(this._redraw\x3d!1,vb.expand(1)):(vb\x3dvb.intersect(db),vb.expand(1).round(),g.pixelRatio%1\x26\x26vb.scale(g.pixelRatio).round().scale(1/g.pixelRatio),vb.translate(-(o[0]%1),-(o[1]%1)),g.beginPath(),g.rect(vb.x1,vb.y1,vb.width(),vb.height()),g.clip());this.clear(-o[0],-o[1],w,h);this.draw(g,scene,vb);g.restore();db.clear();return this};prototype$6.draw\x3dfunction(ctx,scene,bounds){var mark\x3dMarks[scene.marktype];\nif(scene.clip){var clip\x3dscene.clip;ctx.save();vegaUtil.isFunction(clip)?(ctx.beginPath(),clip(ctx),ctx.clip()):clipGroup(ctx,scene.group)}mark.draw.call(this,ctx,scene,bounds);scene.clip\x26\x26ctx.restore()};prototype$6.clear\x3dfunction(x,y,w,h){var opt\x3dthis._options,g\x3dthis.context();\x22pdf\x22\x3d\x3d\x3dopt.type||opt.externalContext||g.clearRect(x,y,w,h);null!\x3dthis._bgcolor\x26\x26(g.fillStyle\x3dthis._bgcolor,g.fillRect(x,y,w,h))};var prototype$7\x3dvegaUtil.inherits(SVGHandler,Handler);prototype$7.initialize\x3dfunction(el,origin,\nobj){var svg\x3dthis._svg;svg\x26\x26(svg.removeEventListener(\x22click\x22,this._hrefHandler),svg.removeEventListener(\x22mousemove\x22,this._tooltipHandler),svg.removeEventListener(\x22mouseout\x22,this._tooltipHandler));if(this._svg\x3dsvg\x3del\x26\x26domFind(el,\x22svg\x22))svg.addEventListener(\x22click\x22,this._hrefHandler),svg.addEventListener(\x22mousemove\x22,this._tooltipHandler),svg.addEventListener(\x22mouseout\x22,this._tooltipHandler);return Handler.prototype.initialize.call(this,el,origin,obj)};prototype$7.canvas\x3dfunction(){return this._svg};\nvar listener\x3dfunction(context,handler){return function(evt){var item\x3devt.target.__data__;item\x3dArray.isArray(item)?item[0]:item;evt.vegaType\x3devt.type;handler.call(context._obj,evt,item)}};prototype$7.on\x3dfunction(type,handler){var name\x3dthis.eventName(type),h\x3dthis._handlers;0\x3ethis._handlerIndex(h[name],type,handler)\x26\x26(type\x3d{type:type,handler:handler,listener:listener(this,handler)},(h[name]||(h[name]\x3d[])).push(type),this._svg\x26\x26this._svg.addEventListener(name,type.listener));return this};prototype$7.off\x3d\nfunction(type,handler){var name\x3dthis.eventName(type),h\x3dthis._handlers[name];type\x3dthis._handlerIndex(h,type,handler);0\x3c\x3dtype\x26\x26(this._svg\x26\x26this._svg.removeEventListener(name,h[type].listener),h.splice(type,1));return this};var bundle\x3dfunction(role,roledesc,label){var $jscomp$compprop48\x3d{};return $jscomp$compprop48.role\x3drole,$jscomp$compprop48[\x22aria-roledescription\x22]\x3droledesc,$jscomp$compprop48[\x22aria-label\x22]\x3dlabel||void 0,$jscomp$compprop48},AriaIgnore\x3dvegaUtil.toSet(\x22axis-domain axis-grid axis-label axis-tick axis-title legend-band legend-entry legend-gradient legend-label legend-title legend-symbol title\x22.split(\x22 \x22)),\nAriaGuides\x3d{axis:{desc:\x22axis\x22,caption:function(item){var datum\x3ditem.datum,orient\x3ditem.orient,title\x3ddatum.title?extractTitle(item):null,ctx\x3ditem.context;datum\x3dctx.scales[datum.scale].value;ctx\x3dctx.dataflow.locale();var type\x3ddatum.type;return(\x22left\x22\x3d\x3d\x3dorient||\x22right\x22\x3d\x3d\x3dorient?\x22Y\x22:\x22X\x22)+\x22-axis\x22+(title?\x22 titled \x27\x22+title+\x22\x27\x22:\x22\x22)+(\x22 for a \x22+(vegaScale.isDiscrete(type)?\x22discrete\x22:type)+\x22 scale with \x22)+vegaScale.domainCaption(ctx,datum,item)}},legend:{desc:\x22legend\x22,caption:function(item){var datum\x3ditem.datum,\ntitle\x3ddatum.title?extractTitle(item):null,type\x3d((datum.type||\x22\x22)+\x22 legend\x22).trim(),scales\x3ddatum.scales;datum\x3dObject.keys(scales);var ctx\x3ditem.context;scales\x3dctx.scales[scales[datum[0]]].value;ctx\x3dctx.dataflow.locale();return(type.length?type[0].toUpperCase()+type.slice(1):type)+(title?\x22 titled \x27\x22+title+\x22\x27\x22:\x22\x22)+(\x22 for \x22+channelCaption(datum))+(\x22 with \x22+vegaScale.domainCaption(ctx,scales,item))}},\x22title-text\x22:{desc:\x22title\x22,caption:function(item){return\x22Title text \x27\x22+vegaUtil.array(item.text).join(\x22 \x22)+\n\x22\x27\x22}},\x22title-subtitle\x22:{desc:\x22subtitle\x22,caption:function(item){return\x22Subtitle text \x27\x22+vegaUtil.array(item.text).join(\x22 \x22)+\x22\x27\x22}}},AriaEncode\x3d{ariaRole:\x22role\x22,ariaRoleDescription:\x22aria-roledescription\x22,description:\x22aria-label\x22},styles\x3d{fill:\x22fill\x22,fillOpacity:\x22fill-opacity\x22,stroke:\x22stroke\x22,strokeOpacity:\x22stroke-opacity\x22,strokeWidth:\x22stroke-width\x22,strokeCap:\x22stroke-linecap\x22,strokeJoin:\x22stroke-linejoin\x22,strokeDash:\x22stroke-dasharray\x22,strokeDashOffset:\x22stroke-dashoffset\x22,strokeMiterLimit:\x22stroke-miterlimit\x22,\nopacity:\x22opacity\x22,blend:\x22mix-blend-mode\x22},rootAttributes\x3d{fill:\x22none\x22,\x22stroke-miterlimit\x22:10},ns$jscomp$0\x3dmetadata.xmlns,prototype$8\x3dvegaUtil.inherits(SVGRenderer,Renderer),base$1\x3dRenderer.prototype;prototype$8.initialize\x3dfunction(el,width,height,padding){this._defs\x3d{gradient:{},clipping:{}};if(el){this._svg\x3ddomChild(el,0,\x22svg\x22,ns$jscomp$0);this._svg.setAttribute(\x22class\x22,\x22marks\x22);domClear(el,1);this._root\x3ddomChild(this._svg,0,\x22g\x22,ns$jscomp$0);for(var attr$609 in rootAttributes)this._root.setAttribute(attr$609,\nrootAttributes[attr$609]);domClear(this._svg,1)}this.background(this._bgcolor);return base$1.initialize.call(this,el,width,height,padding)};prototype$8.background\x3dfunction(bgcolor){arguments.length\x26\x26this._svg\x26\x26this._svg.style.setProperty(\x22background-color\x22,bgcolor);return base$1.background.apply(this,arguments)};prototype$8.resize\x3dfunction(width,height,origin,scaleFactor){base$1.resize.call(this,width,height,origin,scaleFactor);this._svg\x26\x26(this._svg.setAttribute(\x22width\x22,this._width*this._scale),this._svg.setAttribute(\x22height\x22,\nthis._height*this._scale),this._svg.setAttribute(\x22viewBox\x22,\x220 0 \x22+this._width+\x22 \x22+this._height),this._root.setAttribute(\x22transform\x22,\x22translate(\x22+this._origin+\x22)\x22));this._dirty\x3d[];return this};prototype$8.canvas\x3dfunction(){return this._svg};prototype$8.svg\x3dfunction(){if(!this._svg)return null;var attr\x3d{class:\x22marks\x22,width:this._width*this._scale,height:this._height*this._scale,viewBox:\x220 0 \x22+this._width+\x22 \x22+this._height};for(key in metadata)attr[key]\x3dmetadata[key];var key\x3dthis._bgcolor?openTag(\x22rect\x22,\n{width:this._width,height:this._height,fill:this._bgcolor})+closeTag(\x22rect\x22):\x22\x22;return openTag(\x22svg\x22,attr)+(this._defs.el?this._defs.el.outerHTML:\x22\x22)+key+this._root.outerHTML+closeTag(\x22svg\x22)};prototype$8._render\x3dfunction(scene){this._dirtyCheck()\x26\x26(this._dirtyAll\x26\x26this._resetDefs(),this.draw(this._root,scene),domClear(this._root,1));this.updateDefs();this._dirty\x3d[];++this._dirtyID;return this};prototype$8.updateDefs\x3dfunction(){var svg\x3dthis._svg,defs\x3dthis._defs,el\x3ddefs.el,index\x3d0;for(id in defs.gradient){el||\n(defs.el\x3del\x3ddomChild(svg,0,\x22defs\x22,ns$jscomp$0));var n,el$jscomp$0\x3del,grad\x3ddefs.gradient[id];if(\x22radial\x22\x3d\x3d\x3dgrad.gradient){var stop\x3ddomChild(el$jscomp$0,index++,\x22pattern\x22,ns$jscomp$0);stop.setAttribute(\x22id\x22,\x22p_\x22+grad.id);stop.setAttribute(\x22viewBox\x22,\x220,0,1,1\x22);stop.setAttribute(\x22width\x22,\x22100%\x22);stop.setAttribute(\x22height\x22,\x22100%\x22);stop.setAttribute(\x22preserveAspectRatio\x22,\x22xMidYMid slice\x22);stop\x3ddomChild(stop,0,\x22rect\x22,ns$jscomp$0);stop.setAttribute(\x22width\x22,\x221\x22);stop.setAttribute(\x22height\x22,\x221\x22);stop.setAttribute(\x22fill\x22,\n\x22url(\x22+href()+\x22#\x22+grad.id+\x22)\x22);el$jscomp$0\x3ddomChild(el$jscomp$0,index++,\x22radialGradient\x22,ns$jscomp$0);el$jscomp$0.setAttribute(\x22id\x22,grad.id);el$jscomp$0.setAttribute(\x22fx\x22,grad.x1);el$jscomp$0.setAttribute(\x22fy\x22,grad.y1);el$jscomp$0.setAttribute(\x22fr\x22,grad.r1);el$jscomp$0.setAttribute(\x22cx\x22,grad.x2);el$jscomp$0.setAttribute(\x22cy\x22,grad.y2);el$jscomp$0.setAttribute(\x22r\x22,grad.r2)}else el$jscomp$0\x3ddomChild(el$jscomp$0,index++,\x22linearGradient\x22,ns$jscomp$0),el$jscomp$0.setAttribute(\x22id\x22,grad.id),el$jscomp$0.setAttribute(\x22x1\x22,\ngrad.x1),el$jscomp$0.setAttribute(\x22x2\x22,grad.x2),el$jscomp$0.setAttribute(\x22y1\x22,grad.y1),el$jscomp$0.setAttribute(\x22y2\x22,grad.y2);var i\x3d0;for(n\x3dgrad.stops.length;i\x3cn;++i)stop\x3ddomChild(el$jscomp$0,i,\x22stop\x22,ns$jscomp$0),stop.setAttribute(\x22offset\x22,grad.stops[i].offset),stop.setAttribute(\x22stop-color\x22,grad.stops[i].color);domClear(el$jscomp$0,i)}for(var id$610 in defs.clipping){el||(defs.el\x3del\x3ddomChild(svg,0,\x22defs\x22,ns$jscomp$0));var id\x3del;el$jscomp$0\x3ddefs.clipping[id$610];id\x3ddomChild(id,index,\x22clipPath\x22,ns$jscomp$0);\nid.setAttribute(\x22id\x22,el$jscomp$0.id);el$jscomp$0.path?(grad\x3ddomChild(id,0,\x22path\x22,ns$jscomp$0),grad.setAttribute(\x22d\x22,el$jscomp$0.path)):(grad\x3ddomChild(id,0,\x22rect\x22,ns$jscomp$0),grad.setAttribute(\x22x\x22,0),grad.setAttribute(\x22y\x22,0),grad.setAttribute(\x22width\x22,el$jscomp$0.width),grad.setAttribute(\x22height\x22,el$jscomp$0.height));domClear(id,1);index+\x3d1}el\x26\x26(0\x3d\x3d\x3dindex?(svg.removeChild(el),defs.el\x3dnull):domClear(el,index))};prototype$8._resetDefs\x3dfunction(){var def\x3dthis._defs;def.gradient\x3d{};def.clipping\x3d{}};prototype$8.dirty\x3d\nfunction(item){item.dirty!\x3d\x3dthis._dirtyID\x26\x26(item.dirty\x3dthis._dirtyID,this._dirty.push(item))};prototype$8.isDirty\x3dfunction(item){return this._dirtyAll||!item._svg||item.dirty\x3d\x3d\x3dthis._dirtyID};prototype$8._dirtyCheck\x3dfunction(){this._dirtyAll\x3d!0;var items\x3dthis._dirty;if(!items.length||!this._dirtyID)return!0;var id\x3d++this._dirtyID,n;var i$jscomp$0\x3d0;for(n\x3ditems.length;i$jscomp$0\x3cn;++i$jscomp$0){var item\x3ditems[i$jscomp$0];var mark\x3ditem.mark;if(mark.marktype!\x3d\x3dtype){var type\x3dmark.marktype;var mdef\x3dMarks[type]}mark.zdirty\x26\x26\nmark.dirty!\x3d\x3did\x26\x26(this._dirtyAll\x3d!1,dirtyParents(item,id),mark.items.forEach(function(i){i.dirty\x3did}));mark.zdirty||(item.exit?(mdef.nested\x26\x26mark.items.length?(mark\x3dmark.items[0],mark._svg\x26\x26this._update(mdef,mark._svg,mark)):item._svg\x26\x26(mark\x3ditem._svg.parentNode)\x26\x26mark.removeChild(item._svg),item._svg\x3dnull):(item\x3dmdef.nested?mark.items[0]:item,item._update!\x3d\x3did\x26\x26(item._svg\x26\x26item._svg.ownerSVGElement?this._update(mdef,item._svg,item):(this._dirtyAll\x3d!1,dirtyParents(item,id)),item._update\x3did)))}return!this._dirtyAll};\nprototype$8.draw\x3dfunction(el,scene,prev){var $jscomp$this\x3dthis;if(!this.isDirty(scene))return scene._svg;var svg\x3dthis._svg,mdef\x3dMarks[scene.marktype],events\x3d!1\x3d\x3d\x3dscene.interactive?\x22none\x22:null,isGroup\x3d\x22g\x22\x3d\x3d\x3dmdef.tag,sibling\x3dnull,i\x3d0;var parent\x3dbind(scene,el,prev,\x22g\x22,svg);parent.setAttribute(\x22class\x22,cssClass(scene));el\x3dariaMarkAttributes(scene);for(var key in el)setAttribute(parent,key,el[key]);isGroup||setAttribute(parent,\x22pointer-events\x22,events);setAttribute(parent,\x22clip-path\x22,scene.clip?clip$jscomp$0(this,\nscene,scene.group):null);events\x3dfunction(item){var dirty\x3d$jscomp$this.isDirty(item),node\x3dbind(item,parent,sibling,mdef.tag,svg);dirty\x26\x26($jscomp$this._update(mdef,node,item),isGroup\x26\x26recurse$jscomp$0($jscomp$this,node,item));sibling\x3dnode;++i};mdef.nested?scene.items.length\x26\x26events(scene.items[0]):visit(scene,events);domClear(parent,i);return parent};var element\x3dnull,values\x3dnull,mark_extras\x3d{group:function(mdef,el,item){var fg\x3delement\x3del.childNodes[2];values\x3dfg.__values__;mdef.foreground(emit$jscomp$0,\nitem,this);values\x3del.__values__;element\x3del.childNodes[1];mdef.content(emit$jscomp$0,item,this);el\x3delement\x3del.childNodes[0];mdef.background(emit$jscomp$0,item,this);mdef\x3d!1\x3d\x3d\x3ditem.mark.interactive?\x22none\x22:null;mdef!\x3d\x3dvalues.events\x26\x26(setAttribute(fg,\x22pointer-events\x22,mdef),setAttribute(el,\x22pointer-events\x22,mdef),values.events\x3dmdef);item.strokeForeground\x26\x26item.stroke?(mdef\x3ditem.fill,setAttribute(fg,\x22display\x22,null),this.style(el,item),setAttribute(el,\x22stroke\x22,null),mdef\x26\x26(item.fill\x3dnull),values\x3dfg.__values__,\nthis.style(fg,item),mdef\x26\x26(item.fill\x3dmdef),element\x3dnull):setAttribute(fg,\x22display\x22,\x22none\x22)},image:function(mdef,el,item){!1\x3d\x3d\x3ditem.smooth?(setStyle(el,\x22image-rendering\x22,\x22optimizeSpeed\x22),setStyle(el,\x22image-rendering\x22,\x22pixelated\x22)):setStyle(el,\x22image-rendering\x22,null)},text:function(mdef,el,item){mdef\x3dtextLines(item);if(vegaUtil.isArray(mdef)){var value\x3dmdef.map(function(_){return textValue(item,_)});mdef\x3dvalue.join(\x22\\n\x22);if(mdef!\x3d\x3dvalues.text){domClear(el,0);var doc\x3del.ownerDocument;var lh\x3dlineHeight(item);\nvalue.forEach(function(t,i){var ts\x3ddomCreate(doc,\x22tspan\x22,ns$jscomp$0);ts.__data__\x3ditem;ts.textContent\x3dt;i\x26\x26(ts.setAttribute(\x22x\x22,0),ts.setAttribute(\x22dy\x22,lh));el.appendChild(ts)});values.text\x3dmdef}}else value\x3dtextValue(item,mdef),value!\x3d\x3dvalues.text\x26\x26(el.textContent\x3dvalue,values.text\x3dvalue);setAttribute(el,\x22font-family\x22,fontFamily(item));setAttribute(el,\x22font-size\x22,fontSize(item)+\x22px\x22);setAttribute(el,\x22font-style\x22,item.fontStyle);setAttribute(el,\x22font-variant\x22,item.fontVariant);setAttribute(el,\x22font-weight\x22,\nitem.fontWeight)}};prototype$8._update\x3dfunction(mdef,el,item){element\x3del;values\x3del.__values__;ariaItemAttributes(emit$jscomp$0,item);mdef.attr(emit$jscomp$0,item,this);var extra\x3dmark_extras[mdef.type];extra\x26\x26extra.call(this,mdef,el,item);element\x26\x26this.style(element,item)};prototype$8.style\x3dfunction(el,o){if(null!\x3do)for(var prop in styles){var value$612\x3d\x22font\x22\x3d\x3d\x3dprop?fontFamily(o):o[prop];if(value$612!\x3d\x3dvalues[prop]){var name\x3dstyles[prop];null\x3d\x3dvalue$612?el.removeAttribute(name):(value$612\x26\x26value$612.gradient\x26\x26\n(value$612\x3dgradientRef(value$612,this._defs.gradient,href())),el.setAttribute(name,value$612+\x22\x22));values[prop]\x3dvalue$612}}};var prototype$9\x3dvegaUtil.inherits(SVGStringRenderer,Renderer),base$2\x3dRenderer.prototype;prototype$9.resize\x3dfunction(width,height,origin,scaleFactor){base$2.resize.call(this,width,height,origin,scaleFactor);width\x3dthis._origin;height\x3dthis._text;origin\x3d{class:\x22marks\x22,width:this._width*this._scale,height:this._height*this._scale,viewBox:\x220 0 \x22+this._width+\x22 \x22+this._height};for(var key in metadata)origin[key]\x3d\nmetadata[key];height.head\x3dopenTag(\x22svg\x22,origin);key\x3dthis._bgcolor;if(\x22transparent\x22\x3d\x3d\x3dkey||\x22none\x22\x3d\x3d\x3dkey)key\x3dnull;height.bg\x3dkey?openTag(\x22rect\x22,{width:this._width,height:this._height,fill:key})+closeTag(\x22rect\x22):\x22\x22;height.root\x3dopenTag(\x22g\x22,vegaUtil.extend({},rootAttributes,{transform:\x22translate(\x22+width+\x22)\x22}));height.foot\x3dcloseTag(\x22g\x22)+closeTag(\x22svg\x22);return this};prototype$9.background\x3dfunction(){var rv\x3dbase$2.background.apply(this,arguments);arguments.length\x26\x26this._text.head\x26\x26this.resize(this._width,\nthis._height,this._origin,this._scale);return rv};prototype$9.svg\x3dfunction(){var t\x3dthis._text;return t.head+t.defs+t.bg+t.root+t.body+t.foot};prototype$9._render\x3dfunction(scene){this._text.body\x3dthis.mark(scene);this._text.defs\x3dthis.buildDefs();return this};prototype$9.buildDefs\x3dfunction(){var defs\x3d\x22\x22,tag,id;for(id in this._defs.gradient){var def$613\x3dthis._defs.gradient[id],stops\x3ddef$613.stops;\x22radial\x22\x3d\x3d\x3ddef$613.gradient?(defs+\x3dopenTag(tag\x3d\x22pattern\x22,{id:\x22p_\x22+id,viewBox:\x220,0,1,1\x22,width:\x22100%\x22,height:\x22100%\x22,\npreserveAspectRatio:\x22xMidYMid slice\x22}),defs+\x3dopenTag(\x22rect\x22,{width:\x221\x22,height:\x221\x22,fill:\x22url(#\x22+id+\x22)\x22})+closeTag(\x22rect\x22),defs+\x3dcloseTag(tag),defs+\x3dopenTag(tag\x3d\x22radialGradient\x22,{id:id,fx:def$613.x1,fy:def$613.y1,fr:def$613.r1,cx:def$613.x2,cy:def$613.y2,r:def$613.r2})):defs+\x3dopenTag(tag\x3d\x22linearGradient\x22,{id:id,x1:def$613.x1,x2:def$613.x2,y1:def$613.y1,y2:def$613.y2});for(def$613\x3d0;def$613\x3cstops.length;++def$613)defs+\x3dopenTag(\x22stop\x22,{offset:stops[def$613].offset,\x22stop-color\x22:stops[def$613].color})+\ncloseTag(\x22stop\x22);defs+\x3dcloseTag(tag)}for(var id$614 in this._defs.clipping)tag\x3dthis._defs.clipping[id$614],defs+\x3dopenTag(\x22clipPath\x22,{id:id$614}),defs\x3dtag.path?defs+(openTag(\x22path\x22,{d:tag.path})+closeTag(\x22path\x22)):defs+(openTag(\x22rect\x22,{x:0,y:0,width:tag.width,height:tag.height})+closeTag(\x22rect\x22)),defs+\x3dcloseTag(\x22clipPath\x22);return defs?openTag(\x22defs\x22)+defs+closeTag(\x22defs\x22):\x22\x22};prototype$9.attr\x3dfunction(scene,item,attrs,tag){var $jscomp$this\x3dthis,object\x3d{},emit\x3dfunction(name,value,ns,prefixed){object[prefixed||\nname]\x3dvalue};Array.isArray(attrs)?attrs.forEach(function(fn){return fn(emit,item,$jscomp$this)}):attrs(emit,item,this);tag\x26\x26applyStyles(object,item,scene,tag,this._defs);return object};prototype$9.href\x3dfunction(item){var that\x3dthis,href\x3ditem.href;if(href){if(item\x3dthat._hrefs\x26\x26that._hrefs[href])return item;that.sanitizeURL(href).then(function(attr){attr[\x22xlink:href\x22]\x3dattr.href;attr.href\x3dnull;(that._hrefs||(that._hrefs\x3d{}))[href]\x3dattr})}return null};prototype$9.mark\x3dfunction(scene){var $jscomp$this\x3d\nthis,mdef\x3dMarks[scene.marktype],tag\x3dmdef.tag,attrList\x3d[ariaItemAttributes,mdef.attr],str\x3d\x22\x22;str+\x3dopenTag(\x22g\x22,vegaUtil.extend({\x22class\x22:cssClass(scene),\x22clip-path\x22:scene.clip?clip$jscomp$0(this,scene,scene.group):null},ariaMarkAttributes(scene),{\x22pointer-events\x22:\x22g\x22!\x3d\x3dtag\x26\x26!1\x3d\x3d\x3dscene.interactive?\x22none\x22:null}));var process\x3dfunction(item){var href\x3d$jscomp$this.href(item);href\x26\x26(str+\x3dopenTag(\x22a\x22,href));str+\x3dopenTag(tag,$jscomp$this.attr(scene,item,attrList,\x22g\x22!\x3d\x3dtag?tag:null));if(\x22text\x22\x3d\x3d\x3dtag){var tl$616\x3d\ntextLines(item);if(vegaUtil.isArray(tl$616))for(var attrs\x3d{x:0,dy:lineHeight(item)},i\x3d0;i\x3ctl$616.length;++i)str+\x3dopenTag(\x22tspan\x22,i?attrs:null)+escape_text(textValue(item,tl$616[i]))+closeTag(\x22tspan\x22);else str+\x3descape_text(textValue(item,tl$616))}else\x22g\x22\x3d\x3d\x3dtag\x26\x26(tl$616\x3ditem.strokeForeground,attrs\x3ditem.fill,i\x3ditem.stroke,tl$616\x26\x26i\x26\x26(item.stroke\x3dnull),str+\x3dopenTag(\x22path\x22,$jscomp$this.attr(scene,item,mdef.background,\x22bgrect\x22))+closeTag(\x22path\x22),str+\x3dopenTag(\x22g\x22,$jscomp$this.attr(scene,item,mdef.content))+\n$jscomp$this.markGroup(item)+closeTag(\x22g\x22),tl$616\x26\x26i?(attrs\x26\x26(item.fill\x3dnull),item.stroke\x3di,str+\x3dopenTag(\x22path\x22,$jscomp$this.attr(scene,item,mdef.foreground,\x22bgrect\x22))+closeTag(\x22path\x22),attrs\x26\x26(item.fill\x3dattrs)):str+\x3dopenTag(\x22path\x22,$jscomp$this.attr(scene,item,mdef.foreground,\x22bgfore\x22))+closeTag(\x22path\x22));str+\x3dcloseTag(tag);href\x26\x26(str+\x3dcloseTag(\x22a\x22))};mdef.nested?scene.items\x26\x26scene.items.length\x26\x26process(scene.items[0]):visit(scene,process);return str+closeTag(\x22g\x22)};prototype$9.markGroup\x3dfunction(scene){var $jscomp$this\x3d\nthis,str\x3d\x22\x22;visit(scene,function(item){str+\x3d$jscomp$this.mark(item)});return str};var modules\x3d{};modules.canvas\x3dmodules.png\x3d{renderer:CanvasRenderer,headless:CanvasRenderer,handler:CanvasHandler};modules.svg\x3d{renderer:SVGRenderer,headless:SVGStringRenderer,handler:SVGHandler};modules.none\x3d{};var clipBounds\x3dnew Bounds;exports.Bounds\x3dBounds;exports.CanvasHandler\x3dCanvasHandler;exports.CanvasRenderer\x3dCanvasRenderer;exports.Gradient\x3dfunction(p0,p1){var stops\x3d[],gradient;return gradient\x3d{gradient:\x22linear\x22,\nx1:p0?p0[0]:0,y1:p0?p0[1]:0,x2:p1?p1[0]:1,y2:p1?p1[1]:0,stops:stops,stop:function(offset,color){stops.push({offset:offset,color:color});return gradient}}};exports.GroupItem\x3dGroupItem;exports.Handler\x3dHandler;exports.Item\x3dItem;exports.Marks\x3dMarks;exports.RenderType\x3d{Canvas:\x22canvas\x22,PNG:\x22png\x22,SVG:\x22svg\x22,None:\x22none\x22};exports.Renderer\x3dRenderer;exports.ResourceLoader\x3dResourceLoader;exports.SVGHandler\x3dSVGHandler;exports.SVGRenderer\x3dSVGRenderer;exports.SVGStringRenderer\x3dSVGStringRenderer;exports.Scenegraph\x3d\nScenegraph;exports.boundClip\x3dfunction(mark){var clip\x3dmark.clip;if(vegaUtil.isFunction(clip))clip(context$jscomp$0(clipBounds.clear()));else if(clip)clipBounds.set(0,0,mark.group.width,mark.group.height);else return;mark.bounds.intersect(clipBounds)};exports.boundContext\x3dcontext$jscomp$0;exports.boundItem\x3dboundItem;exports.boundMark\x3dboundMark;exports.boundStroke\x3dboundStroke;exports.closeTag\x3dcloseTag;exports.domChild\x3ddomChild;exports.domClear\x3ddomClear;exports.domCreate\x3ddomCreate;exports.domFind\x3ddomFind;\nexports.font\x3dfont;exports.fontFamily\x3dfontFamily;exports.fontSize\x3dfontSize;exports.intersect\x3dfunction(scene,bounds,filter){var hits\x3d[];bounds\x3d(new Bounds).union(bounds);var type\x3dscene.marktype;return type?intersectMark(scene,bounds,filter,hits):\x22group\x22\x3d\x3d\x3dtype?intersectGroup(scene,bounds,filter,hits):vegaUtil.error(\x22Intersect scene must be mark node or group item.\x22)};exports.intersectBoxLine\x3dintersectBoxLine;exports.intersectPath\x3dintersectPath;exports.intersectPoint\x3dintersectPoint;exports.intersectRule\x3d\nintersectRule;exports.lineHeight\x3dlineHeight;exports.multiLineOffset\x3dfunction(item){var tl\x3dtextLines(item);return(vegaUtil.isArray(tl)?tl.length-1:0)*lineHeight(item)};exports.openTag\x3dopenTag;exports.pathCurves\x3dcurves;exports.pathEqual\x3dpathEqual;exports.pathParse\x3dpathParse;exports.pathRectangle\x3dvg_rect;exports.pathRender\x3dpathRender;exports.pathSymbols\x3dsymbols;exports.pathTrail\x3dvg_trail;exports.point\x3dpoint;exports.renderModule\x3dfunction(name,_){name\x3dString(name||\x22\x22).toLowerCase();return 1\x3carguments.length?\n(modules[name]\x3d_,this):modules[name]};exports.resetSVGClipId\x3dfunction(){clip_id\x3d1};exports.resetSVGDefIds\x3dfunction(){clip_id\x3d1;gradient_id\x3d0};exports.sceneEqual\x3dsceneEqual;exports.sceneFromJSON\x3dsceneFromJSON;exports.scenePickVisit\x3dpickVisit;exports.sceneToJSON\x3dsceneToJSON;exports.sceneVisit\x3dvisit;exports.sceneZOrder\x3dzorder;exports.textMetrics\x3dtextMetrics;Object.defineProperty(exports,\x22__esModule\x22,{value:!0})})}");
SHADOW_ENV.evalLoad("module$node_modules$vega_view_transforms$build$vega_view_transforms.js", true , "shadow$provide.module$node_modules$vega_view_transforms$build$vega_view_transforms\x3dfunction(global$jscomp$0,require,module,exports$jscomp$0){(function(global,factory){\x22object\x22\x3d\x3d\x3dtypeof exports$jscomp$0\x26\x26\x22undefined\x22!\x3d\x3dtypeof module?factory(exports$jscomp$0,require(\x22module$node_modules$vega_dataflow$build$vega_dataflow\x22),require(\x22module$node_modules$vega_scenegraph$build$vega_scenegraph\x22),require(\x22module$node_modules$vega_util$build$vega_util\x22)):\x22function\x22\x3d\x3d\x3dtypeof define\x26\x26define.amd?define([\x22exports\x22,\n\x22vega-dataflow\x22,\x22vega-scenegraph\x22,\x22vega-util\x22],factory):(global\x3dglobal||self,factory((global.vega\x3dglobal.vega||{},global.vega.transforms\x3d{}),global.vega,global.vega,global.vega))})(this,function(exports,vegaDataflow,vegaScenegraph,vegaUtil){function Bound(params){vegaDataflow.Transform.call(this,null,params)}function boundItem(item,bound,opt){return bound(item.bounds.clear(),item,opt)}function Identifier(params){vegaDataflow.Transform.call(this,0,params)}function getCounter(view){var counter\x3dview._signals[\x22:vega_identifier:\x22];\ncounter||(view._signals[\x22:vega_identifier:\x22]\x3dcounter\x3dview.add(0));return counter}function Mark(params){vegaDataflow.Transform.call(this,null,params)}function lookup(_){var g\x3d_.groups;_\x3d_.parent;return g\x26\x261\x3d\x3d\x3dg.size?g.get(Object.keys(g.object)[0]):g\x26\x26_?g.lookup(_):null}function Overlap(params){vegaDataflow.Transform.call(this,null,params)}function intersect(a,b,sep){return sep\x3eMath.max(b.x1-a.x2,a.x1-b.x2,b.y1-a.y2,a.y1-b.y2)}function hasOverlap(items,pad){for(var i\x3d1,n\x3ditems.length,a\x3ditems[0].bounds;i\x3c\nn;++i)if(intersect(a,a\x3ditems[i].bounds,pad))return!0}function hasBounds(item){item\x3ditem.bounds;return 1\x3citem.width()\x26\x261\x3citem.height()}function boundTest(scale,orient,tolerance){scale\x3dscale.range();var b\x3dnew vegaScenegraph.Bounds;\x22top\x22\x3d\x3d\x3dorient||\x22bottom\x22\x3d\x3d\x3dorient?b.set(scale[0],-Infinity,scale[1],Infinity):b.set(-Infinity,scale[0],Infinity,scale[1]);b.expand(tolerance||1);return function(item){return b.encloses(item.bounds)}}function reset(source){source.forEach(function(item){return item.opacity\x3d\n1});return source}function Render(params){vegaDataflow.Transform.call(this,null,params)}function set(item,property,value){return item[property]\x3d\x3d\x3dvalue?0:(item[property]\x3dvalue,1)}function isYAxis(mark){mark\x3dmark.items[0].orient;return\x22left\x22\x3d\x3d\x3dmark||\x22right\x22\x3d\x3d\x3dmark}function axisLayout(view,axis,width,height){axis\x3daxis.items[0];var datum\x3daxis.datum,delta\x3dnull!\x3daxis.translate?axis.translate:.5,orient\x3daxis.orient,index\x3d+datum.grid;var indices\x3d[datum.ticks?index++:-1,datum.labels?index++:-1,index+ +datum.domain];\nindex\x3daxis.range;var offset\x3daxis.offset,position\x3daxis.position,minExtent\x3daxis.minExtent,maxExtent\x3daxis.maxExtent;datum\x3ddatum.title\x26\x26axis.items[indices[2]].items[0];var titlePadding\x3daxis.titlePadding,bounds\x3daxis.bounds,dl\x3ddatum\x26\x26vegaScenegraph.multiLineOffset(datum),i;tempBounds.clear().union(bounds);bounds.clear();-1\x3c(i\x3dindices[0])\x26\x26bounds.union(axis.items[i].bounds);-1\x3c(i\x3dindices[1])\x26\x26bounds.union(axis.items[i].bounds);switch(orient){case \x22top\x22:width\x3dposition||0;height\x3d-offset;minExtent\x3dMath.max(minExtent,\nMath.min(maxExtent,-bounds.y1));bounds.add(0,-minExtent).add(index,0);datum\x26\x26axisTitleLayout(view,datum,minExtent,titlePadding,dl,0,-1,bounds);break;case \x22left\x22:width\x3d-offset;height\x3dposition||0;minExtent\x3dMath.max(minExtent,Math.min(maxExtent,-bounds.x1));bounds.add(-minExtent,0).add(0,index);datum\x26\x26axisTitleLayout(view,datum,minExtent,titlePadding,dl,1,-1,bounds);break;case \x22right\x22:width+\x3doffset;height\x3dposition||0;minExtent\x3dMath.max(minExtent,Math.min(maxExtent,bounds.x2));bounds.add(0,0).add(minExtent,\nindex);datum\x26\x26axisTitleLayout(view,datum,minExtent,titlePadding,dl,1,1,bounds);break;case \x22bottom\x22:width\x3dposition||0;height+\x3doffset;minExtent\x3dMath.max(minExtent,Math.min(maxExtent,bounds.y2));bounds.add(0,0).add(index,minExtent);datum\x26\x26axisTitleLayout(view,datum,minExtent,titlePadding,0,0,1,bounds);break;default:width\x3daxis.x,height\x3daxis.y}vegaScenegraph.boundStroke(bounds.translate(width,height),axis);set(axis,\x22x\x22,width+delta)|set(axis,\x22y\x22,height+delta)\x26\x26(axis.bounds\x3dtempBounds,view.dirty(axis),axis.bounds\x3d\nbounds,view.dirty(axis));return axis.mark.bounds.clear().union(bounds)}function axisTitleLayout(view,title,offset,pad,dl,isYAxis,sign,bounds){var b\x3dtitle.bounds;title.auto\x26\x26(offset\x3dsign*(offset+dl+pad),dl\x3dpad\x3d0,view.dirty(title),isYAxis?pad\x3d(title.x||0)-(title.x\x3doffset):dl\x3d(title.y||0)-(title.y\x3doffset),title.mark.bounds.clear().union(b.translate(-pad,-dl)),view.dirty(title));bounds.union(b)}function bboxFlush(item){return(new vegaScenegraph.Bounds).set(0,0,item.width||0,item.height||0)}function bboxFull(item){var b\x3d\nitem.bounds.clone();return b.empty()?b.set(0,0,0,0):b.translate(-(item.x||0),-(item.y||0))}function get(opt,key,d){opt\x3dvegaUtil.isObject(opt)?opt[key]:opt;return null!\x3dopt?opt:void 0!\x3d\x3dd?d:0}function offsetValue(v){return 0\x3ev?Math.ceil(-v):0}function gridLayout(view,groups,opt){var dirty\x3d!opt.nodirty,bbox\x3d\x22flush\x22\x3d\x3d\x3dopt.bounds?bboxFlush:bboxFull,bounds\x3dtempBounds.set(0,0,0,0),alignCol\x3dget(opt.align,\x22column\x22),alignRow\x3dget(opt.align,\x22row\x22),padCol\x3dget(opt.padding,\x22column\x22),padRow\x3dget(opt.padding,\x22row\x22),\nncols\x3dopt.columns||groups.length,nrows\x3d0\x3e\x3dncols?1:Math.ceil(groups.length/ncols),n\x3dgroups.length,xOffset\x3dArray(n),xExtent\x3dArray(ncols),xMax\x3d0,yOffset\x3dArray(n),yExtent\x3dArray(nrows),yMax\x3d0,dx\x3dArray(n),dy\x3dArray(n),boxes\x3dArray(n),i,px,py;for(i\x3d0;i\x3cncols;++i)xExtent[i]\x3d0;for(i\x3d0;i\x3cnrows;++i)yExtent[i]\x3d0;for(i\x3d0;i\x3cn;++i){var m\x3dgroups[i];var b\x3dboxes[i]\x3dbbox(m);m.x\x3dm.x||0;dx[i]\x3d0;m.y\x3dm.y||0;dy[i]\x3d0;m\x3di%ncols;var r\x3d~~(i/ncols);xMax\x3dMath.max(xMax,px\x3dMath.ceil(b.x2));yMax\x3dMath.max(yMax,py\x3dMath.ceil(b.y2));xExtent[m]\x3d\nMath.max(xExtent[m],px);yExtent[r]\x3dMath.max(yExtent[r],py);xOffset[i]\x3dpadCol+offsetValue(b.x1);yOffset[i]\x3dpadRow+offsetValue(b.y1);dirty\x26\x26view.dirty(groups[i])}for(i\x3d0;i\x3cn;++i)0\x3d\x3d\x3di%ncols\x26\x26(xOffset[i]\x3d0),i\x3cncols\x26\x26(yOffset[i]\x3d0);if(\x22each\x22\x3d\x3d\x3dalignCol)for(m\x3d1;m\x3cncols;++m){bbox\x3d0;for(i\x3dm;i\x3cn;i+\x3dncols)bbox\x3cxOffset[i]\x26\x26(bbox\x3dxOffset[i]);for(i\x3dm;i\x3cn;i+\x3dncols)xOffset[i]\x3dbbox+xExtent[m-1]}else if(\x22all\x22\x3d\x3d\x3dalignCol){for(i\x3dbbox\x3d0;i\x3cn;++i)i%ncols\x26\x26bbox\x3cxOffset[i]\x26\x26(bbox\x3dxOffset[i]);for(i\x3d0;i\x3cn;++i)i%ncols\x26\x26(xOffset[i]\x3d\nbbox+xMax)}else for(alignCol\x3d!1,m\x3d1;m\x3cncols;++m)for(i\x3dm;i\x3cn;i+\x3dncols)xOffset[i]+\x3dxExtent[m-1];if(\x22each\x22\x3d\x3d\x3dalignRow)for(r\x3d1;r\x3cnrows;++r){bbox\x3d0;i\x3dr*ncols;for(m\x3di+ncols;i\x3cm;++i)bbox\x3cyOffset[i]\x26\x26(bbox\x3dyOffset[i]);for(i\x3dr*ncols;i\x3cm;++i)yOffset[i]\x3dbbox+yExtent[r-1]}else if(\x22all\x22\x3d\x3d\x3dalignRow){bbox\x3d0;for(i\x3dncols;i\x3cn;++i)bbox\x3cyOffset[i]\x26\x26(bbox\x3dyOffset[i]);for(i\x3dncols;i\x3cn;++i)yOffset[i]\x3dbbox+yMax}else for(alignRow\x3d!1,r\x3d1;r\x3cnrows;++r)for(i\x3dr*ncols,m\x3di+ncols;i\x3cm;++i)yOffset[i]+\x3dyExtent[r-1];for(i\x3dr\x3d0;i\x3cn;++i)r\x3d\nxOffset[i]+(i%ncols?r:0),dx[i]+\x3dr-groups[i].x;for(m\x3d0;m\x3cncols;++m)for(xOffset\x3d0,i\x3dm;i\x3cn;i+\x3dncols)xOffset+\x3dyOffset[i],dy[i]+\x3dxOffset-groups[i].y;if(alignCol\x26\x26get(opt.center,\x22column\x22)\x26\x261\x3cnrows)for(i\x3d0;i\x3cn;++i)b\x3d\x22all\x22\x3d\x3d\x3dalignCol?xMax:xExtent[i%ncols],r\x3db-boxes[i].x2-groups[i].x-dx[i],0\x3cr\x26\x26(dx[i]+\x3dr/2);if(alignRow\x26\x26get(opt.center,\x22row\x22)\x26\x261!\x3d\x3dncols)for(i\x3d0;i\x3cn;++i)b\x3d\x22all\x22\x3d\x3d\x3dalignRow?yMax:yExtent[~~(i/ncols)],xOffset\x3db-boxes[i].y2-groups[i].y-dy[i],0\x3cxOffset\x26\x26(dy[i]+\x3dxOffset/2);for(i\x3d0;i\x3cn;++i)bounds.union(boxes[i].translate(dx[i],\ndy[i]));r\x3dget(opt.anchor,\x22x\x22);xOffset\x3dget(opt.anchor,\x22y\x22);switch(get(opt.anchor,\x22column\x22)){case \x22end\x22:r-\x3dbounds.width();break;case \x22middle\x22:r-\x3dbounds.width()/2}switch(get(opt.anchor,\x22row\x22)){case \x22end\x22:xOffset-\x3dbounds.height();break;case \x22middle\x22:xOffset-\x3dbounds.height()/2}r\x3dMath.round(r);xOffset\x3dMath.round(xOffset);bounds.clear();for(i\x3d0;i\x3cn;++i)groups[i].mark.bounds.clear();for(i\x3d0;i\x3cn;++i)m\x3dgroups[i],m.x+\x3ddx[i]+\x3dr,m.y+\x3ddy[i]+\x3dxOffset,bounds.union(m.mark.bounds.union(m.bounds.translate(dx[i],dy[i]))),\ndirty\x26\x26view.dirty(m);return bounds}function boundFlush(item,field){return\x22x1\x22\x3d\x3d\x3dfield?item.x||0:\x22y1\x22\x3d\x3d\x3dfield?item.y||0:\x22x2\x22\x3d\x3d\x3dfield?(item.x||0)+(item.width||0):\x22y2\x22\x3d\x3d\x3dfield?(item.y||0)+(item.height||0):void 0}function boundFull(item,field){return item.bounds[field]}function layoutHeaders(view,headers,groups,ncols,limit,offset,agg,isX,bound,bf,start,stride,back,band){var n\x3dgroups.length,edge\x3dncols\x3d0,i,g;if(!n)return ncols;for(i\x3dstart;i\x3cn;i+\x3dstride)groups[i]\x26\x26(ncols\x3dagg(ncols,bound(groups[i],bf)));\nif(!headers.length)return ncols;headers.length\x3elimit\x26\x26(view.warn(\x22Grid headers exceed limit: \x22+limit),headers\x3dheaders.slice(0,limit));ncols+\x3doffset;limit\x3d0;for(offset\x3dheaders.length;limit\x3coffset;++limit)view.dirty(headers[limit]),headers[limit].mark.bounds.clear();i\x3dstart;limit\x3d0;for(offset\x3dheaders.length;limit\x3coffset;++limit,i+\x3dstride){bound\x3dheaders[limit];start\x3dbound.mark.bounds;for(n\x3di;0\x3c\x3dn\x26\x26null\x3d\x3d(g\x3dgroups[n]);n-\x3dback);if(isX){n\x3dnull\x3d\x3dband?g.x:Math.round(g.bounds.x1+band*g.bounds.width());var y\x3d\nncols}else n\x3dncols,y\x3dnull\x3d\x3dband?g.y:Math.round(g.bounds.y1+band*g.bounds.height());start.union(bound.bounds.translate(n-(bound.x||0),y-(bound.y||0)));bound.x\x3dn;bound.y\x3dy;view.dirty(bound);edge\x3dagg(edge,start[bf])}return edge}function layoutTitle(view,g,offset,isX,bounds,band){if(g){view.dirty(g);var x\x3doffset;isX?x\x3dMath.round(bounds.x1+band*bounds.width()):offset\x3dMath.round(bounds.y1+band*bounds.height());g.bounds.translate(x-(g.x||0),offset-(g.y||0));g.mark.bounds.clear().union(g.bounds);g.x\x3dx;g.y\x3d\noffset;view.dirty(g)}}function lookup$1(config,orient){var opt\x3dconfig[orient]||{};return function(key,d){return null!\x3dopt[key]?opt[key]:null!\x3dconfig[key]?config[key]:d}}function offsets(legends,value){var max\x3d-Infinity;legends.forEach(function(item){null!\x3ditem.offset\x26\x26(max\x3dMath.max(max,item.offset))});return-Infinity\x3cmax?max:value}function legendParams(g,orient,config,xb,yb,w,h){var _\x3dlookup$1(config,orient);config\x3doffsets(g,_(\x22offset\x22,0));var anchor\x3d_(\x22anchor\x22,\x22start\x22),mult\x3d\x22end\x22\x3d\x3d\x3danchor?1:\x22middle\x22\x3d\x3d\x3d\nanchor?.5:0;g\x3d{align:\x22each\x22,bounds:_(\x22bounds\x22,\x22flush\x22),columns:\x22vertical\x22\x3d\x3d\x3d_(\x22direction\x22)?1:g.length,padding:_(\x22margin\x22,8),center:_(\x22center\x22),nodirty:!0};switch(orient){case \x22left\x22:g.anchor\x3d{x:Math.floor(xb.x1)-config,column:\x22end\x22,y:mult*(h||xb.height()+2*xb.y1),row:anchor};break;case \x22right\x22:g.anchor\x3d{x:Math.ceil(xb.x2)+config,y:mult*(h||xb.height()+2*xb.y1),row:anchor};break;case \x22top\x22:g.anchor\x3d{y:Math.floor(yb.y1)-config,row:\x22end\x22,x:mult*(w||yb.width()+2*yb.x1),column:anchor};break;case \x22bottom\x22:g.anchor\x3d\n{y:Math.ceil(yb.y2)+config,x:mult*(w||yb.width()+2*yb.x1),column:anchor};break;case \x22top-left\x22:g.anchor\x3d{x:config,y:config};break;case \x22top-right\x22:g.anchor\x3d{x:w-config,y:config,column:\x22end\x22};break;case \x22bottom-left\x22:g.anchor\x3d{x:config,y:h-config,row:\x22end\x22};break;case \x22bottom-right\x22:g.anchor\x3d{x:w-config,y:h-config,column:\x22end\x22,row:\x22end\x22}}return g}function legendLayout(view,legend){legend\x3dlegend.items[0];var datum\x3dlegend.datum,orient\x3dlegend.orient,bounds\x3dlegend.bounds,x\x3dlegend.x,y\x3dlegend.y;legend._bounds?\nlegend._bounds.clear().union(bounds):legend._bounds\x3dbounds.clone();bounds.clear();var h\x3dlegend.items[0].items[0];var pad\x3dlegend.padding,ex\x3dpad-h.x,ey\x3dpad-h.y;if(legend.datum.title){var title\x3dlegend.items[1].items[0],anchor\x3dtitle.anchor,tpad\x3dlegend.titlePadding||0,tx\x3dpad-title.x,ty\x3dpad-title.y;switch(title.orient){case \x22left\x22:ex+\x3dMath.ceil(title.bounds.width())+tpad;break;case \x22right\x22:case \x22bottom\x22:break;default:ey+\x3dtitle.bounds.height()+tpad}(ex||ey)\x26\x26translate(view,h,ex,ey);switch(title.orient){case \x22left\x22:ty+\x3d\nlegendTitleOffset(legend,h,title,anchor,1,1);break;case \x22right\x22:tx+\x3dlegendTitleOffset(legend,h,title,\x22end\x22,0,0)+tpad;ty+\x3dlegendTitleOffset(legend,h,title,anchor,1,1);break;case \x22bottom\x22:tx+\x3dlegendTitleOffset(legend,h,title,anchor,0,0);ty+\x3dlegendTitleOffset(legend,h,title,\x22end\x22,-1,0,1)+tpad;break;default:tx+\x3dlegendTitleOffset(legend,h,title,anchor,0,0)}(tx||ty)\x26\x26translate(view,title,tx,ty);0\x3e(tx\x3dMath.round(title.bounds.x1-pad))\x26\x26(translate(view,h,-tx,0),translate(view,title,-tx,0))}else(ex||ey)\x26\x26translate(view,\nh,ex,ey);bounds\x3dlegendBounds(legend,bounds);view\x3d2*legend.padding;h\x3d2*legend.padding;bounds.empty()||(view\x3dMath.ceil(bounds.width()+view),h\x3dMath.ceil(bounds.height()+h));\x22symbol\x22\x3d\x3d\x3ddatum.type\x26\x26legendEntryLayout(legend.items[0].items[0].items[0].items);\x22none\x22!\x3d\x3dorient\x26\x26(legend.x\x3dx\x3d0,legend.y\x3dy\x3d0);legend.width\x3dview;legend.height\x3dh;vegaScenegraph.boundStroke(bounds.set(x,y,x+view,y+h),legend);legend.mark.bounds.clear().union(bounds);return legend}function legendBounds(item,b){item.items.forEach(function(_){return b.union(_.bounds)});\nb.x1\x3ditem.padding;b.y1\x3ditem.padding;return b}function legendTitleOffset(item,entry,title,anchor,y,lr,noBar){var vgrad\x3dtitle.datum.vgrad;item\x3d(\x22symbol\x22\x3d\x3d\x3ditem.datum.type||!lr\x26\x26vgrad||noBar?entry:entry.items[0]).bounds[y?\x22y2\x22:\x22x2\x22]-item.padding;entry\x3dvgrad\x26\x26lr?item:0;lr\x3dvgrad\x26\x26lr?0:item;title\x3d0\x3e\x3dy?0:vegaScenegraph.multiLineOffset(title);return Math.round(\x22start\x22\x3d\x3d\x3danchor?entry:\x22end\x22\x3d\x3d\x3danchor?lr-title:.5*(item-title))}function translate(view,item,dx,dy){item.x+\x3ddx;item.y+\x3ddy;item.bounds.translate(dx,\ndy);item.mark.bounds.translate(dx,dy);view.dirty(item)}function legendEntryLayout(entries){var widths\x3dentries.reduce(function(w,g){w[g.column]\x3dMath.max(g.bounds.x2-g.x,w[g.column]||0);return w},{});entries.forEach(function(g){g.width\x3dwidths[g.column];g.height\x3dg.bounds.y2-g.y})}function titleLayout(view,mark,width,height,viewBounds){var group\x3dmark.items[0],orient\x3dgroup.orient,anchor\x3dgroup.anchor,offset\x3dgroup.offset,padding\x3dgroup.padding,title\x3dgroup.items[0].items[0],subtitle\x3dgroup.items[1]\x26\x26group.items[1].items[0],\nend\x3d\x22left\x22\x3d\x3d\x3dorient||\x22right\x22\x3d\x3d\x3dorient?height:width,start\x3d0,sy\x3dwidth\x3d0;\x22group\x22!\x3d\x3dgroup.frame?\x22left\x22\x3d\x3d\x3dorient?(start\x3dviewBounds.y2,end\x3dviewBounds.y1):\x22right\x22\x3d\x3d\x3dorient?(start\x3dviewBounds.y1,end\x3dviewBounds.y2):(start\x3dviewBounds.x1,end\x3dviewBounds.x2):\x22left\x22\x3d\x3d\x3dorient\x26\x26(start\x3dheight,end\x3d0);height\x3d\x22start\x22\x3d\x3d\x3danchor?start:\x22end\x22\x3d\x3d\x3danchor?end:(start+end)/2;if(subtitle\x26\x26subtitle.text){switch(orient){case \x22top\x22:case \x22bottom\x22:sy\x3dtitle.bounds.height()+padding;break;case \x22left\x22:width\x3dtitle.bounds.width()+padding;break;\ncase \x22right\x22:width\x3d-title.bounds.width()-padding}tempBounds.clear().union(subtitle.bounds);tempBounds.translate(width-(subtitle.x||0),sy-(subtitle.y||0));set(subtitle,\x22x\x22,width)|set(subtitle,\x22y\x22,sy)\x26\x26(view.dirty(subtitle),subtitle.bounds.clear().union(tempBounds),subtitle.mark.bounds.clear().union(tempBounds),view.dirty(subtitle));tempBounds.clear().union(subtitle.bounds)}else tempBounds.clear();tempBounds.union(title.bounds);switch(orient){case \x22top\x22:orient\x3dheight;viewBounds\x3dviewBounds.y1-tempBounds.height()-\noffset;break;case \x22left\x22:orient\x3dviewBounds.x1-tempBounds.width()-offset;viewBounds\x3dheight;break;case \x22right\x22:orient\x3dviewBounds.x2+tempBounds.width()+offset;viewBounds\x3dheight;break;case \x22bottom\x22:orient\x3dheight;viewBounds\x3dviewBounds.y2+offset;break;default:orient\x3dgroup.x,viewBounds\x3dgroup.y}set(group,\x22x\x22,orient)|set(group,\x22y\x22,viewBounds)\x26\x26(tempBounds.translate(orient,viewBounds),view.dirty(group),group.bounds.clear().union(tempBounds),mark.bounds.clear().union(tempBounds),view.dirty(group));return group.bounds}\nfunction ViewLayout(params){vegaDataflow.Transform.call(this,null,params)}function shouldReflow(group){return group\x26\x26\x22legend-entry\x22!\x3d\x3dgroup.mark.role}function layoutGroup(view,group,_){var items\x3dgroup.items,width\x3dMath.max(0,group.width||0),height\x3dMath.max(0,group.height||0),viewBounds\x3d(new vegaScenegraph.Bounds).set(0,0,width,height),xBounds\x3dviewBounds.clone(),yBounds\x3dviewBounds.clone(),legends\x3d[],orient,n;var i\x3d0;for(n\x3ditems.length;i\x3cn;++i){var mark\x3ditems[i];switch(mark.role){case \x22axis\x22:var b$jscomp$0\x3d\nisYAxis(mark)?xBounds:yBounds;b$jscomp$0.union(axisLayout(view,mark,width,height));break;case \x22title\x22:var title\x3dmark;break;case \x22legend\x22:legends.push(legendLayout(view,mark));break;case \x22frame\x22:case \x22scope\x22:case \x22row-header\x22:case \x22row-footer\x22:case \x22row-title\x22:case \x22column-header\x22:case \x22column-footer\x22:case \x22column-title\x22:xBounds.union(mark.bounds);yBounds.union(mark.bounds);break;default:viewBounds.union(mark.bounds)}}if(legends.length){var l\x3d{};legends.forEach(function(item){orient\x3ditem.orient||\x22right\x22;\n\x22none\x22!\x3d\x3dorient\x26\x26(l[orient]||(l[orient]\x3d[])).push(item)});for(var orient$623 in l)items\x3dl[orient$623],gridLayout(view,items,legendParams(items,orient$623,_.legends,xBounds,yBounds,width,height));legends.forEach(function(item){var b\x3ditem.bounds;b.equals(item._bounds)||(item.bounds\x3ditem._bounds,view.dirty(item),item.bounds\x3db,view.dirty(item));if(_.autosize\x26\x26\x22fit\x22\x3d\x3d\x3d_.autosize.type)switch(item.orient){case \x22left\x22:case \x22right\x22:viewBounds.add(b.x1,0).add(b.x2,0);break;case \x22top\x22:case \x22bottom\x22:viewBounds.add(0,\nb.y1).add(0,b.y2)}else viewBounds.union(b)})}viewBounds.union(xBounds).union(yBounds);title\x26\x26viewBounds.union(titleLayout(view,title,width,height,viewBounds));group.clip\x26\x26viewBounds.set(0,0,group.width||0,group.height||0);viewSizeLayout(view,group,viewBounds,_)}function viewSizeLayout(view,group,viewBounds,_){_\x3d_.autosize||{};var type\x3d_.type;if(!(1\x3eview._autosize)\x26\x26type){var viewWidth\x3dview._width,viewHeight\x3dview._height,width\x3dMath.max(0,group.width||0),left\x3dMath.max(0,Math.ceil(-viewBounds.x1)),right\x3d\nMath.max(0,Math.ceil(viewBounds.x2-width));group\x3dMath.max(0,group.height||0);var top\x3dMath.max(0,Math.ceil(-viewBounds.y1));viewBounds\x3dMath.max(0,Math.ceil(viewBounds.y2-group));if(\x22padding\x22\x3d\x3d\x3d_.contains){var padding\x3dview.padding();viewWidth-\x3dpadding.left+padding.right;viewHeight-\x3dpadding.top+padding.bottom}\x22none\x22\x3d\x3d\x3dtype?(top\x3dleft\x3d0,width\x3dviewWidth,group\x3dviewHeight):\x22fit\x22\x3d\x3d\x3dtype?(width\x3dMath.max(0,viewWidth-left-right),group\x3dMath.max(0,viewHeight-top-viewBounds)):\x22fit-x\x22\x3d\x3d\x3dtype?(width\x3dMath.max(0,viewWidth-\nleft-right),viewHeight\x3dgroup+top+viewBounds):\x22fit-y\x22\x3d\x3d\x3dtype?(viewWidth\x3dwidth+left+right,group\x3dMath.max(0,viewHeight-top-viewBounds)):\x22pad\x22\x3d\x3d\x3dtype\x26\x26(viewWidth\x3dwidth+left+right,viewHeight\x3dgroup+top+viewBounds);view._resizeView(viewWidth,viewHeight,width,group,[left,top],_.resize)}}vegaUtil.inherits(Bound,vegaDataflow.Transform).transform\x3dfunction(_,pulse){var view\x3dpulse.dataflow,mark\x3d_.mark,type\x3dmark.marktype,entry\x3dvegaScenegraph.Marks[type],bound\x3dentry.bound,markBounds\x3dmark.bounds;if(entry.nested)mark.items.length\x26\x26\nview.dirty(mark.items[0]),markBounds\x3dboundItem(mark,bound),mark.items.forEach(function(item){item.bounds.clear().union(markBounds)});else if(\x22group\x22\x3d\x3d\x3dtype||_.modified())switch(pulse.visit(pulse.MOD,function(item){return view.dirty(item)}),markBounds.clear(),mark.items.forEach(function(item){return markBounds.union(boundItem(item,bound))}),mark.role){case \x22axis\x22:case \x22legend\x22:case \x22title\x22:pulse.reflow()}else{var rebound\x3dpulse.changed(pulse.REM);pulse.visit(pulse.ADD,function(item){markBounds.union(boundItem(item,\nbound))});pulse.visit(pulse.MOD,function(item){rebound\x3drebound||markBounds.alignsWith(item.bounds);view.dirty(item);markBounds.union(boundItem(item,bound))});rebound\x26\x26(markBounds.clear(),mark.items.forEach(function(item){return markBounds.union(item.bounds)}))}vegaScenegraph.boundClip(mark);return pulse.modifies(\x22bounds\x22)};Identifier.Definition\x3d{type:\x22Identifier\x22,metadata:{modifies:!0},params:[{name:\x22as\x22,type:\x22string\x22,required:!0}]};vegaUtil.inherits(Identifier,vegaDataflow.Transform).transform\x3dfunction(_,\npulse){var counter\x3dgetCounter(pulse.dataflow),id\x3dcounter.value,as\x3d_.as;pulse.visit(pulse.ADD,function(t){t[as]||(t[as]\x3d++id)});counter.set(this.value\x3did);return pulse};vegaUtil.inherits(Mark,vegaDataflow.Transform).transform\x3dfunction(_,pulse){var mark\x3dthis.value;mark||(mark\x3dpulse.dataflow.scenegraph().mark(_.markdef,lookup(_),_.index),mark.group.context\x3d_.context,_.context.group||(_.context.group\x3dmark.group),mark.source\x3dthis.source,mark.clip\x3d_.clip,mark.interactive\x3d_.interactive,this.value\x3dmark);\nvar Init\x3d\x22group\x22\x3d\x3d\x3dmark.marktype?vegaScenegraph.GroupItem:vegaScenegraph.Item;pulse.visit(pulse.ADD,function(item){return Init.call(item,mark)});if(_.modified(\x22clip\x22)||_.modified(\x22interactive\x22))mark.clip\x3d_.clip,mark.interactive\x3d!!_.interactive,mark.zdirty\x3d!0,pulse.reflow();mark.items\x3dpulse.source;return pulse};var methods\x3d{parity:function(items){return items.filter(function(item,i){return i%2?item.opacity\x3d0:1})},greedy:function(items,sep){var a;return items.filter(function(b,i){if(i\x26\x26intersect(a.bounds,\nb.bounds,sep))return b.opacity\x3d0;a\x3db;return 1})}};vegaUtil.inherits(Overlap,vegaDataflow.Transform).transform\x3dfunction(_,pulse){var reduce\x3dmethods[_.method]||methods.parity,source\x3dpulse.materialize(pulse.SOURCE).source,sep\x3d_.separation||0;if(source\x26\x26source.length){if(!_.method)return _.modified(\x22method\x22)\x26\x26(reset(source),pulse\x3dpulse.reflow(_.modified()).modifies(\x22opacity\x22)),pulse;source\x3dsource.filter(hasBounds);if(source.length){_.sort\x26\x26(source\x3dsource.slice().sort(_.sort));var items\x3dreset(source);\npulse\x3dpulse.reflow(_.modified()).modifies(\x22opacity\x22);if(3\x3c\x3ditems.length\x26\x26hasOverlap(items,sep)){do items\x3dreduce(items,sep);while(3\x3c\x3ditems.length\x26\x26hasOverlap(items,sep));3\x3eitems.length\x26\x26!vegaUtil.peek(source).opacity\x26\x26(1\x3citems.length\x26\x26(vegaUtil.peek(items).opacity\x3d0),vegaUtil.peek(source).opacity\x3d1)}if(_.boundScale\x26\x260\x3c\x3d_.boundTolerance){var test\x3dboundTest(_.boundScale,_.boundOrient,+_.boundTolerance);source.forEach(function(item){test(item)||(item.opacity\x3d0)})}var bounds\x3ditems[0].mark.bounds.clear();\nsource.forEach(function(item){item.opacity\x26\x26bounds.union(item.bounds)});return pulse}}};vegaUtil.inherits(Render,vegaDataflow.Transform).transform\x3dfunction(_,pulse){var view\x3dpulse.dataflow;pulse.visit(pulse.ALL,function(item){return view.dirty(item)});pulse.fields\x26\x26pulse.fields.zindex\x26\x26(_\x3dpulse.source\x26\x26pulse.source[0])\x26\x26(_.mark.zdirty\x3d!0)};var tempBounds\x3dnew vegaScenegraph.Bounds,min\x3dfunction(a,b){return Math.floor(Math.min(a,b))},max$jscomp$0\x3dfunction(a,b){return Math.ceil(Math.max(a,b))};vegaUtil.inherits(ViewLayout,\nvegaDataflow.Transform).transform\x3dfunction(_,pulse){var view\x3dpulse.dataflow;_.mark.items.forEach(function(group){if(_.layout){for(var opt\x3d_.layout,groups\x3dgroup.items,n\x3dgroups.length,i\x3d0,mark,items,JSCompiler_object_inline_marks_8383\x3d[],JSCompiler_object_inline_rowheaders_8384\x3d[],JSCompiler_object_inline_rowfooters_8385\x3d[],JSCompiler_object_inline_colheaders_8386\x3d[],JSCompiler_object_inline_colfooters_8387\x3d[],JSCompiler_object_inline_rowtitle_8388\x3dnull,JSCompiler_object_inline_coltitle_8389\x3dnull;i\x3c\nn;++i)if(mark\x3dgroups[i],items\x3dmark.items,\x22group\x22\x3d\x3d\x3dmark.marktype)switch(mark.role){case \x22axis\x22:case \x22legend\x22:case \x22title\x22:break;case \x22row-header\x22:JSCompiler_object_inline_rowheaders_8384.push.apply(JSCompiler_object_inline_rowheaders_8384,$jscomp.arrayFromIterable(items));break;case \x22row-footer\x22:JSCompiler_object_inline_rowfooters_8385.push.apply(JSCompiler_object_inline_rowfooters_8385,$jscomp.arrayFromIterable(items));break;case \x22column-header\x22:JSCompiler_object_inline_colheaders_8386.push.apply(JSCompiler_object_inline_colheaders_8386,\n$jscomp.arrayFromIterable(items));break;case \x22column-footer\x22:JSCompiler_object_inline_colfooters_8387.push.apply(JSCompiler_object_inline_colfooters_8387,$jscomp.arrayFromIterable(items));break;case \x22row-title\x22:JSCompiler_object_inline_rowtitle_8388\x3ditems[0];break;case \x22column-title\x22:JSCompiler_object_inline_coltitle_8389\x3ditems[0];break;default:JSCompiler_object_inline_marks_8383.push.apply(JSCompiler_object_inline_marks_8383,$jscomp.arrayFromIterable(items))}mark\x3d\x22flush\x22\x3d\x3d\x3dopt.bounds?boundFlush:\nboundFull;groups\x3dopt.offset;items\x3dopt.columns||JSCompiler_object_inline_marks_8383.length;var nrows\x3d0\x3e\x3ditems?1:Math.ceil(JSCompiler_object_inline_marks_8383.length/items),cells\x3dnrows*items;n\x3dgridLayout(view,JSCompiler_object_inline_marks_8383,opt);n.empty()\x26\x26n.set(0,0,0,0);if(JSCompiler_object_inline_rowheaders_8384){i\x3dget(opt.headerBand,\x22row\x22,null);var x\x3dlayoutHeaders(view,JSCompiler_object_inline_rowheaders_8384,JSCompiler_object_inline_marks_8383,items,nrows,-get(groups,\x22rowHeader\x22),min,0,mark,\n\x22x1\x22,0,items,1,i)}if(JSCompiler_object_inline_colheaders_8386){i\x3dget(opt.headerBand,\x22column\x22,null);var y\x3dlayoutHeaders(view,JSCompiler_object_inline_colheaders_8386,JSCompiler_object_inline_marks_8383,items,items,-get(groups,\x22columnHeader\x22),min,1,mark,\x22y1\x22,0,1,items,i)}if(JSCompiler_object_inline_rowfooters_8385){i\x3dget(opt.footerBand,\x22row\x22,null);var x2\x3dlayoutHeaders(view,JSCompiler_object_inline_rowfooters_8385,JSCompiler_object_inline_marks_8383,items,nrows,get(groups,\x22rowFooter\x22),max$jscomp$0,0,\nmark,\x22x2\x22,items-1,items,1,i)}if(JSCompiler_object_inline_colfooters_8387){i\x3dget(opt.footerBand,\x22column\x22,null);var y2\x3dlayoutHeaders(view,JSCompiler_object_inline_colfooters_8387,JSCompiler_object_inline_marks_8383,items,items,get(groups,\x22columnFooter\x22),max$jscomp$0,1,mark,\x22y2\x22,cells-items,1,items,i)}JSCompiler_object_inline_rowtitle_8388\x26\x26(JSCompiler_object_inline_rowheaders_8384\x3dget(opt.titleAnchor,\x22row\x22),JSCompiler_object_inline_marks_8383\x3dget(groups,\x22rowTitle\x22),JSCompiler_object_inline_marks_8383\x3d\n\x22end\x22\x3d\x3d\x3dJSCompiler_object_inline_rowheaders_8384?x2+JSCompiler_object_inline_marks_8383:x-JSCompiler_object_inline_marks_8383,i\x3dget(opt.titleBand,\x22row\x22,.5),layoutTitle(view,JSCompiler_object_inline_rowtitle_8388,JSCompiler_object_inline_marks_8383,0,n,i));JSCompiler_object_inline_coltitle_8389\x26\x26(JSCompiler_object_inline_rowheaders_8384\x3dget(opt.titleAnchor,\x22column\x22),JSCompiler_object_inline_marks_8383\x3dget(groups,\x22columnTitle\x22),JSCompiler_object_inline_marks_8383\x3d\x22end\x22\x3d\x3d\x3dJSCompiler_object_inline_rowheaders_8384?\ny2+JSCompiler_object_inline_marks_8383:y-JSCompiler_object_inline_marks_8383,i\x3dget(opt.titleBand,\x22column\x22,.5),layoutTitle(view,JSCompiler_object_inline_coltitle_8389,JSCompiler_object_inline_marks_8383,1,n,i))}layoutGroup(view,group,_)});return shouldReflow(_.mark.group)?pulse.reflow():pulse};exports.bound\x3dBound;exports.identifier\x3dIdentifier;exports.mark\x3dMark;exports.overlap\x3dOverlap;exports.render\x3dRender;exports.viewlayout\x3dViewLayout;Object.defineProperty(exports,\x22__esModule\x22,{value:!0})})}");
SHADOW_ENV.evalLoad("module$node_modules$vega_encode$build$vega_encode.js", true , "shadow$provide.module$node_modules$vega_encode$build$vega_encode\x3dfunction(global$jscomp$0,require,module,exports$jscomp$0){(function(global,factory){\x22object\x22\x3d\x3d\x3dtypeof exports$jscomp$0\x26\x26\x22undefined\x22!\x3d\x3dtypeof module?factory(exports$jscomp$0,require(\x22module$node_modules$vega_dataflow$build$vega_dataflow\x22),require(\x22module$node_modules$vega_scale$build$vega_scale\x22),require(\x22module$node_modules$vega_util$build$vega_util\x22),require(\x22module$node_modules$d3_array$dist$d3_array\x22),require(\x22module$node_modules$d3_interpolate$dist$d3_interpolate\x22)):\n\x22function\x22\x3d\x3d\x3dtypeof define\x26\x26define.amd?define(\x22exports vega-dataflow vega-scale vega-util d3-array d3-interpolate\x22.split(\x22 \x22),factory):(global\x3dglobal||self,factory((global.vega\x3dglobal.vega||{},global.vega.transforms\x3d{}),global.vega,global.vega,global.vega,global.d3,global.d3))})(this,function(exports,vegaDataflow,vegaScale,vegaUtil,d3Array,d3Interpolate){function AxisTicks(params){vegaDataflow.Transform.call(this,null,params)}function DataJoin(params){vegaDataflow.Transform.call(this,null,params)}\nfunction defaultItemCreate(){return vegaDataflow.ingest({})}function newMap(key){var map\x3dvegaUtil.fastmap().test(function(t){return t.exit});map.lookup\x3dfunction(t){return map.get(key(t))};return map}function Encode(params){vegaDataflow.Transform.call(this,null,params)}function LegendEntries(params){vegaDataflow.Transform.call(this,[],params)}function sourceX(t){return t.source.x}function sourceY(t){return t.source.y}function targetX(t){return t.target.x}function targetY(t){return t.target.y}function LinkPath(params){vegaDataflow.Transform.call(this,\n{},params)}function line(sx,sy,tx,ty){return\x22M\x22+sx+\x22,\x22+sy+\x22L\x22+tx+\x22,\x22+ty}function arc(sx,sy,tx,ty){var dx\x3dtx-sx,dy\x3dty-sy,rr\x3dMath.sqrt(dx*dx+dy*dy)/2;return\x22M\x22+sx+\x22,\x22+sy+\x22A\x22+rr+\x22,\x22+rr+\x22 \x22+180*Math.atan2(dy,dx)/Math.PI+\x22 0 1 \x22+tx+\x22,\x22+ty}function curve(sx,sy,tx,ty){var dx\x3dtx-sx,dy\x3dty-sy,ix\x3d.2*(dx+dy);dx\x3d.2*(dy-dx);return\x22M\x22+sx+\x22,\x22+sy+\x22C\x22+(sx+ix)+\x22,\x22+(sy+dx)+\x22 \x22+(tx+dx)+\x22,\x22+(ty-ix)+\x22 \x22+tx+\x22,\x22+ty}function Pie(params){vegaDataflow.Transform.call(this,null,params)}function includePad(type){return vegaScale.isContinuous(type)\x26\x26\ntype!\x3d\x3dvegaScale.Sequential}function Scale(params){vegaDataflow.Transform.call(this,null,params);this.modified(!0)}function domainCheck(type,domain,df){vegaScale.isLogarithmic(type)\x26\x26Math.abs(domain.reduce(function(s,v){return s+(0\x3ev?-1:0\x3cv?1:0)},0))!\x3d\x3ddomain.length\x26\x26df.warn(\x22Log scale domain includes zero: \x22+vegaUtil.stringValue(domain));return domain}function adjustScheme(scheme,extent,reverse){return vegaUtil.isFunction(scheme)\x26\x26(extent||reverse)?vegaScale.interpolateRange(scheme,flip(extent||\n[0,1],reverse)):scheme}function flip(array,reverse){return reverse?array.slice().reverse():array}function SortItems(params){vegaDataflow.Transform.call(this,null,params)}function Stack(params){vegaDataflow.Transform.call(this,null,params)}function stackCenter(group,max,field,y0,y1){max\x3d(max-group.sum)/2;for(var m\x3dgroup.length,j\x3d0,t;j\x3cm;++j)t\x3dgroup[j],t[y0]\x3dmax,t[y1]\x3dmax+\x3dMath.abs(field(t))}function stackNormalize(group,max,field,y0,y1){max\x3d1/group.sum;for(var last\x3d0,m\x3dgroup.length,j\x3d0,v\x3d0,t;j\x3cm;++j)t\x3d\ngroup[j],t[y0]\x3dlast,t[y1]\x3dlast\x3dmax*(v+\x3dMath.abs(field(t)))}function stackZero(group,max,field,y0,y1){for(var lastNeg\x3dmax\x3d0,m\x3dgroup.length,j\x3d0,v,t;j\x3cm;++j)t\x3dgroup[j],v\x3d+field(t),0\x3ev?(t[y0]\x3dlastNeg,t[y1]\x3dlastNeg+\x3dv):(t[y0]\x3dmax,t[y1]\x3dmax+\x3dv)}function partition(data,groupby,sort,field){var groups\x3d[],get\x3dfunction(f){return f(t)},n;if(null\x3d\x3dgroupby)groups.push(data.slice());else{var map\x3d{};var i\x3d0;for(n\x3ddata.length;i\x3cn;++i){var t\x3ddata[i];var k\x3dgroupby.map(get);var g\x3dmap[k];g||(map[k]\x3dg\x3d[],groups.push(g));\ng.push(t)}}get\x3dk\x3d0;for(data\x3dgroups.length;k\x3cdata;++k){g\x3dgroups[k];groupby\x3di\x3d0;for(n\x3dg.length;i\x3cn;++i)groupby+\x3dMath.abs(field(g[i]));g.sum\x3dgroupby;groupby\x3eget\x26\x26(get\x3dgroupby);sort\x26\x26g.sort(sort)}groups.max\x3dget;return groups}vegaUtil.inherits(AxisTicks,vegaDataflow.Transform).transform\x3dfunction(_,pulse){if(this.value\x26\x26!_.modified())return pulse.StopPropagation;var locale\x3dpulse.dataflow.locale();pulse\x3dpulse.fork(pulse.NO_SOURCE|pulse.NO_FIELDS);var ticks\x3dthis.value,scale\x3d_.scale,count\x3dvegaScale.tickCount(scale,\nnull\x3d\x3d_.count?_.values?_.values.length:10:_.count,_.minstep),format\x3d_.format||vegaScale.tickFormat(locale,scale,count,_.formatSpecifier,_.formatType,!!_.values),values\x3d_.values?vegaScale.validTicks(scale,_.values,count):vegaScale.tickValues(scale,count);ticks\x26\x26(pulse.rem\x3dticks);ticks\x3dvalues.map(function(value,i){return vegaDataflow.ingest({index:i/(values.length-1||1),value:value,label:format(value)})});_.extra\x26\x26ticks.length\x26\x26ticks.push(vegaDataflow.ingest({index:-1,extra:{value:ticks[0].value},label:\x22\x22}));\npulse.source\x3dticks;this.value\x3dpulse.add\x3dticks;return pulse};vegaUtil.inherits(DataJoin,vegaDataflow.Transform).transform\x3dfunction(_,pulse){var df\x3dpulse.dataflow,out\x3dpulse.fork(pulse.NO_SOURCE|pulse.NO_FIELDS),item\x3d_.item||defaultItemCreate,key\x3d_.key||vegaDataflow.tupleid,map\x3dthis.value;vegaUtil.isArray(out.encode)\x26\x26(out.encode\x3dnull);map\x26\x26(_.modified(\x22key\x22)||pulse.modified(key))\x26\x26vegaUtil.error(\x22DataJoin does not support modified key function or fields.\x22);map||(pulse\x3dpulse.addAll(),this.value\x3dmap\x3d\nnewMap(key));pulse.visit(pulse.ADD,function(t){var k\x3dkey(t),x\x3dmap.get(k);x?x.exit?(map.empty--,out.add.push(x)):out.mod.push(x):(x\x3ditem(t),map.set(k,x),out.add.push(x));x.datum\x3dt;x.exit\x3d!1});pulse.visit(pulse.MOD,function(t){var k\x3dkey(t);if(k\x3dmap.get(k))k.datum\x3dt,out.mod.push(k)});pulse.visit(pulse.REM,function(t){var k\x3dkey(t);k\x3dmap.get(k);t!\x3d\x3dk.datum||k.exit||(out.rem.push(k),k.exit\x3d!0,++map.empty)});pulse.changed(pulse.ADD_MOD)\x26\x26out.modifies(\x22datum\x22);(pulse.clean()||_.clean\x26\x26map.empty\x3edf.cleanThreshold)\x26\x26\ndf.runAfter(map.clean);return out};vegaUtil.inherits(Encode,vegaDataflow.Transform).transform\x3dfunction(_,pulse){var out\x3dpulse.fork(pulse.ADD_REM),fmod\x3d_.mod||!1,encoders\x3d_.encoders,encode\x3dpulse.encode;if(vegaUtil.isArray(encode))if(out.changed()||encode.every(function(e){return encoders[e]}))encode\x3dencode[0],out.encode\x3dnull;else return pulse.StopPropagation;var reenter\x3d\x22enter\x22\x3d\x3d\x3dencode,update\x3dencoders.update||vegaUtil.falsy,enter\x3dencoders.enter||vegaUtil.falsy,exit\x3dencoders.exit||vegaUtil.falsy,set\x3d\n(encode\x26\x26!reenter?encoders[encode]:update)||vegaUtil.falsy;pulse.changed(pulse.ADD)\x26\x26(pulse.visit(pulse.ADD,function(t){enter(t,_);update(t,_)}),out.modifies(enter.output),out.modifies(update.output),set!\x3d\x3dvegaUtil.falsy\x26\x26set!\x3d\x3dupdate\x26\x26(pulse.visit(pulse.ADD,function(t){set(t,_)}),out.modifies(set.output)));pulse.changed(pulse.REM)\x26\x26exit!\x3d\x3dvegaUtil.falsy\x26\x26(pulse.visit(pulse.REM,function(t){exit(t,_)}),out.modifies(exit.output));if(reenter||set!\x3d\x3dvegaUtil.falsy)encode\x3dpulse.MOD|(_.modified()?pulse.REFLOW:\n0),reenter?(pulse.visit(encode,function(t){var mod\x3denter(t,_)||fmod;(set(t,_)||mod)\x26\x26out.mod.push(t)}),out.mod.length\x26\x26out.modifies(enter.output)):pulse.visit(encode,function(t){(set(t,_)||fmod)\x26\x26out.mod.push(t)}),out.mod.length\x26\x26out.modifies(set.output);return out.changed()?out:pulse.StopPropagation};vegaUtil.inherits(LegendEntries,vegaDataflow.Transform).transform\x3dfunction(_,pulse){if(null!\x3dthis.value\x26\x26!_.modified())return pulse.StopPropagation;var locale\x3dpulse.dataflow.locale(),out\x3dpulse.fork(pulse.NO_SOURCE|\npulse.NO_FIELDS),items\x3dthis.value,type\x3d_.type||vegaScale.SymbolLegend,scale\x3d_.scale,limit\x3d+_.limit,count\x3dvegaScale.tickCount(scale,null\x3d\x3d_.count?5:_.count,_.minstep),lskip\x3d!!_.values||type\x3d\x3d\x3dvegaScale.SymbolLegend,format\x3d_.format||vegaScale.labelFormat(locale,scale,count,type,_.formatSpecifier,_.formatType,lskip),values\x3d_.values||vegaScale.labelValues(scale,count),size;items\x26\x26(out.rem\x3ditems);if(type\x3d\x3d\x3dvegaScale.SymbolLegend){if(limit\x26\x26values.length\x3elimit){pulse.dataflow.warn(\x22Symbol legend count exceeds limit, filtering items.\x22);\nitems\x3dvalues.slice(0,limit-1);var ellipsis\x3d!0}else items\x3dvalues;if(vegaUtil.isFunction(size\x3d_.size)){_.values||0!\x3d\x3dscale(items[0])||(items\x3ditems.slice(1));var offset\x3ditems.reduce(function(max,value){return Math.max(max,size(value,_))},0)}else size\x3dvegaUtil.constant(offset\x3dsize||8);items\x3ditems.map(function(value,index){return vegaDataflow.ingest({index:index,label:format(value,index,items),value:value,offset:offset,size:size(value,_)})});ellipsis\x26\x26(ellipsis\x3dvalues[items.length],items.push(vegaDataflow.ingest({index:items.length,\nlabel:\x22\u2026\x22+(values.length-items.length)+\x22 entries\x22,value:ellipsis,offset:offset,size:size(ellipsis,_)})))}else if(type\x3d\x3d\x3dvegaScale.GradientLegend){pulse\x3dscale.domain();var fraction\x3dvegaScale.scaleFraction(scale,pulse[0],vegaUtil.peek(pulse));3\x3evalues.length\x26\x26!_.values\x26\x26pulse[0]!\x3d\x3dvegaUtil.peek(pulse)\x26\x26(values\x3d[pulse[0],vegaUtil.peek(pulse)]);items\x3dvalues.map(function(value,index){return vegaDataflow.ingest({index:index,label:format(value,index,values),value:value,perc:fraction(value)})})}else size\x3d\nvalues.length-1,fraction\x3dvegaScale.labelFraction(scale),items\x3dvalues.map(function(value,index){return vegaDataflow.ingest({index:index,label:format(value,index,values),value:value,perc:index?fraction(value):0,perc2:index\x3d\x3d\x3dsize?1:fraction(values[index+1])})});out.source\x3ditems;this.value\x3dout.add\x3ditems;return out};var Paths\x3dvegaUtil.fastmap({line:line,\x22line-radial\x22:function(sa,sr,ta,tr){return line(sr*Math.cos(sa),sr*Math.sin(sa),tr*Math.cos(ta),tr*Math.sin(ta))},arc:arc,\x22arc-radial\x22:function(sa,sr,\nta,tr){return arc(sr*Math.cos(sa),sr*Math.sin(sa),tr*Math.cos(ta),tr*Math.sin(ta))},curve:curve,\x22curve-radial\x22:function(sa,sr,ta,tr){return curve(sr*Math.cos(sa),sr*Math.sin(sa),tr*Math.cos(ta),tr*Math.sin(ta))},\x22orthogonal-horizontal\x22:function(sx,sy,tx,ty){return\x22M\x22+sx+\x22,\x22+sy+\x22V\x22+ty+\x22H\x22+tx},\x22orthogonal-vertical\x22:function(sx,sy,tx,ty){return\x22M\x22+sx+\x22,\x22+sy+\x22H\x22+tx+\x22V\x22+ty},\x22orthogonal-radial\x22:function(sa,sr,ta,tr){var tc\x3dMath.cos(ta),ts\x3dMath.sin(ta);return\x22M\x22+sr*Math.cos(sa)+\x22,\x22+sr*Math.sin(sa)+\x22A\x22+sr+\n\x22,\x22+sr+\x22 0 0,\x22+((Math.abs(ta-sa)\x3eMath.PI?ta\x3c\x3dsa:ta\x3esa)?1:0)+\x22 \x22+sr*tc+\x22,\x22+sr*ts+\x22L\x22+tr*tc+\x22,\x22+tr*ts},\x22diagonal-horizontal\x22:function(sx,sy,tx,ty){var m\x3d(sx+tx)/2;return\x22M\x22+sx+\x22,\x22+sy+\x22C\x22+m+\x22,\x22+sy+\x22 \x22+m+\x22,\x22+ty+\x22 \x22+tx+\x22,\x22+ty},\x22diagonal-vertical\x22:function(sx,sy,tx,ty){var m\x3d(sy+ty)/2;return\x22M\x22+sx+\x22,\x22+sy+\x22C\x22+sx+\x22,\x22+m+\x22 \x22+tx+\x22,\x22+m+\x22 \x22+tx+\x22,\x22+ty},\x22diagonal-radial\x22:function(sa,sr,ta,tr){var sc\x3dMath.cos(sa);sa\x3dMath.sin(sa);var tc\x3dMath.cos(ta);ta\x3dMath.sin(ta);var mr\x3d(sr+tr)/2;return\x22M\x22+sr*sc+\x22,\x22+sr*sa+\x22C\x22+mr*\nsc+\x22,\x22+mr*sa+\x22 \x22+mr*tc+\x22,\x22+mr*ta+\x22 \x22+tr*tc+\x22,\x22+tr*ta}});LinkPath.Definition\x3d{type:\x22LinkPath\x22,metadata:{modifies:!0},params:[{name:\x22sourceX\x22,type:\x22field\x22,\x22default\x22:\x22source.x\x22},{name:\x22sourceY\x22,type:\x22field\x22,\x22default\x22:\x22source.y\x22},{name:\x22targetX\x22,type:\x22field\x22,\x22default\x22:\x22target.x\x22},{name:\x22targetY\x22,type:\x22field\x22,\x22default\x22:\x22target.y\x22},{name:\x22orient\x22,type:\x22enum\x22,\x22default\x22:\x22vertical\x22,values:[\x22horizontal\x22,\x22vertical\x22,\x22radial\x22]},{name:\x22shape\x22,type:\x22enum\x22,\x22default\x22:\x22line\x22,values:[\x22line\x22,\x22arc\x22,\x22curve\x22,\x22diagonal\x22,\n\x22orthogonal\x22]},{name:\x22require\x22,type:\x22signal\x22},{name:\x22as\x22,type:\x22string\x22,\x22default\x22:\x22path\x22}]};vegaUtil.inherits(LinkPath,vegaDataflow.Transform).transform\x3dfunction(_,pulse){var sx\x3d_.sourceX||sourceX,sy\x3d_.sourceY||sourceY,tx\x3d_.targetX||targetX,ty\x3d_.targetY||targetY,as\x3d_.as||\x22path\x22,shape\x3d_.shape||\x22line\x22,path\x3dPaths.get(shape+\x22-\x22+(_.orient||\x22vertical\x22))||Paths.get(shape);path||vegaUtil.error(\x22LinkPath unsupported type: \x22+_.shape+(_.orient?\x22-\x22+_.orient:\x22\x22));pulse.visit(pulse.SOURCE,function(t){t[as]\x3dpath(sx(t),\nsy(t),tx(t),ty(t))});return pulse.reflow(_.modified()).modifies(as)};Pie.Definition\x3d{type:\x22Pie\x22,metadata:{modifies:!0},params:[{name:\x22field\x22,type:\x22field\x22},{name:\x22startAngle\x22,type:\x22number\x22,\x22default\x22:0},{name:\x22endAngle\x22,type:\x22number\x22,\x22default\x22:6.283185307179586},{name:\x22sort\x22,type:\x22boolean\x22,\x22default\x22:!1},{name:\x22as\x22,type:\x22string\x22,array:!0,length:2,\x22default\x22:[\x22startAngle\x22,\x22endAngle\x22]}]};vegaUtil.inherits(Pie,vegaDataflow.Transform).transform\x3dfunction(_,pulse){var as\x3d_.as||[\x22startAngle\x22,\x22endAngle\x22],startAngle\x3d\nas[0],endAngle\x3das[1],start\x3d_.startAngle||0,stop\x3dnull!\x3d_.endAngle?_.endAngle:2*Math.PI,data\x3dpulse.source,values\x3ddata.map(_.field||vegaUtil.one),n\x3dvalues.length,a$jscomp$0\x3dstart;start\x3d(stop-start)/d3Array.sum(values);stop\x3dd3Array.range(n);var i;_.sort\x26\x26stop.sort(function(a,b){return values[a]-values[b]});for(i\x3d0;i\x3cn;++i){var v\x3dvalues[stop[i]];var t\x3ddata[stop[i]];t[startAngle]\x3da$jscomp$0;t[endAngle]\x3da$jscomp$0+\x3dv*start}this.value\x3dvalues;return pulse.reflow(_.modified()).modifies(as)};var SKIP\x3dvegaUtil.toSet(\x22set modified clear type scheme schemeExtent schemeCount domain domainMin domainMid domainMax domainRaw domainImplicit nice zero bins range rangeStep round reverse interpolate interpolateGamma\x22.split(\x22 \x22));\nvegaUtil.inherits(Scale,vegaDataflow.Transform).transform\x3dfunction(_,pulse){var df\x3dpulse.dataflow,scale\x3dthis.value;var key\x3d_.type;var d\x3d\x22\x22;if(key\x3d\x3d\x3dvegaScale.Sequential)key\x3dvegaScale.Sequential+\x22-\x22+vegaScale.Linear;else{var t\x3d_.type;vegaScale.isContinuous(t)\x26\x26t!\x3d\x3dvegaScale.Time\x26\x26t!\x3d\x3dvegaScale.UTC\x26\x26(_.scheme||_.range\x26\x26_.range.length\x26\x26_.range.every(vegaUtil.isString))\x26\x26(d\x3d_.rawDomain?_.rawDomain.length:_.domain?_.domain.length+ +(null!\x3d_.domainMid):0,d\x3d2\x3d\x3d\x3dd?vegaScale.Sequential+\x22-\x22:3\x3d\x3d\x3dd?vegaScale.Diverging+\n\x22-\x22:\x22\x22);key\x3d(d+key||vegaScale.Linear).toLowerCase()}scale\x26\x26key\x3d\x3d\x3dscale.type||(this.value\x3dscale\x3dvegaScale.scale(key)());for(key in _)SKIP[key]||\x22padding\x22\x3d\x3d\x3dkey\x26\x26includePad(scale.type)||(vegaUtil.isFunction(scale[key])?scale[key](_[key]):df.warn(\x22Unsupported scale property: \x22+key));d\x3dkey\x3dscale;(t\x3d_.domainRaw)?(scale.domain(domainCheck(scale.type,t,df)),t\x3dt.length):t\x3d-1;if(-1\x3ct)df\x3dt;else{var domain\x3d_.domain;t\x3dscale.type;var JSCompiler_temp;!(JSCompiler_temp\x3d_.zero)\x26\x26(JSCompiler_temp\x3dvoid 0\x3d\x3d\x3d_.zero)\x26\x26\n(JSCompiler_temp\x3dscale.type,JSCompiler_temp\x3d!scale.bins\x26\x26(JSCompiler_temp\x3d\x3d\x3dvegaScale.Linear||JSCompiler_temp\x3d\x3d\x3dvegaScale.Pow||JSCompiler_temp\x3d\x3d\x3dvegaScale.Sqrt));if(domain){if(includePad(t)\x26\x26_.padding\x26\x26domain[0]!\x3d\x3dvegaUtil.peek(domain)){var range\x3d_.range,pad\x3d_.padding;var n\x3d_.exponent;var constant\x3d_.constant;range\x3dMath.abs(vegaUtil.peek(range)-range[0]);pad\x3drange/(range-2*pad);n\x3dt\x3d\x3d\x3dvegaScale.Log?vegaUtil.zoomLog(domain,null,pad):t\x3d\x3d\x3dvegaScale.Sqrt?vegaUtil.zoomPow(domain,null,pad,.5):t\x3d\x3d\x3dvegaScale.Pow?\nvegaUtil.zoomPow(domain,null,pad,n||1):t\x3d\x3d\x3dvegaScale.Symlog?vegaUtil.zoomSymlog(domain,null,pad,constant||1):vegaUtil.zoomLinear(domain,null,pad);domain\x3ddomain.slice();domain[0]\x3dn[0];domain[domain.length-1]\x3dn[1]}if(JSCompiler_temp||null!\x3d_.domainMin||null!\x3d_.domainMax||null!\x3d_.domainMid)n\x3d(domain\x3ddomain.slice()).length-1||1,JSCompiler_temp\x26\x26(0\x3cdomain[0]\x26\x26(domain[0]\x3d0),0\x3edomain[n]\x26\x26(domain[n]\x3d0)),null!\x3d_.domainMin\x26\x26(domain[0]\x3d_.domainMin),null!\x3d_.domainMax\x26\x26(domain[n]\x3d_.domainMax),null!\x3d_.domainMid\x26\x26\n(JSCompiler_temp\x3d_.domainMid,constant\x3dJSCompiler_temp\x3edomain[n]?n+1:JSCompiler_temp\x3cdomain[0]?0:n,constant!\x3d\x3dn\x26\x26df.warn(\x22Scale domainMid exceeds domain min or max.\x22,JSCompiler_temp),domain.splice(constant,0,JSCompiler_temp));scale.domain(domainCheck(t,domain,df));t\x3d\x3d\x3dvegaScale.Ordinal\x26\x26scale.unknown(_.domainImplicit?vegaScale.scaleImplicit:void 0);_.nice\x26\x26scale.nice\x26\x26scale.nice(!0!\x3d\x3d_.nice\x26\x26vegaScale.tickCount(scale,_.nice)||null);df\x3ddomain.length}else df\x3d0}(t\x3d_.bins)\x26\x26!vegaUtil.isArray(t)\x26\x26(JSCompiler_temp\x3d\nd.domain(),scale\x3dJSCompiler_temp[0],JSCompiler_temp\x3dvegaUtil.peek(JSCompiler_temp),domain\x3dnull\x3d\x3dt.start?scale:t.start,n\x3dnull\x3d\x3dt.stop?JSCompiler_temp:t.stop,(t\x3dt.step)||vegaUtil.error(\x22Scale bins parameter missing step property.\x22),domain\x3cscale\x26\x26(domain\x3dt*Math.ceil(scale/t)),n\x3eJSCompiler_temp\x26\x26(n\x3dt*Math.floor(JSCompiler_temp/t)),t\x3dd3Array.range(domain,n+t/2,t));t?d.bins\x3dt:d.bins\x26\x26delete d.bins;d.type\x3d\x3d\x3dvegaScale.BinOrdinal\x26\x26(t?_.domain||_.domainRaw||(d.domain(t),df\x3dt.length):d.bins\x3dd.domain());scale\x3d\ndf;a:{d\x3dkey.type;df\x3d_.round||!1;t\x3d_.range;if(null!\x3d_.rangeStep)d!\x3d\x3dvegaScale.Band\x26\x26d!\x3d\x3dvegaScale.Point\x26\x26vegaUtil.error(\x22Only band and point scales support rangeStep.\x22),t\x3d[0,_.rangeStep*vegaScale.bandSpace(scale,d\x3d\x3d\x3dvegaScale.Point?1:(null!\x3d_.paddingInner?_.paddingInner:_.padding)||0,(null!\x3d_.paddingOuter?_.paddingOuter:_.padding)||0)];else if(_.scheme\x26\x26(t\x3d_.schemeExtent,vegaUtil.isArray(_.scheme)?JSCompiler_temp\x3dvegaScale.interpolateColors(_.scheme,_.interpolate,_.interpolateGamma):(JSCompiler_temp\x3d\n_.scheme.toLowerCase(),(JSCompiler_temp\x3dvegaScale.scheme(JSCompiler_temp))||vegaUtil.error(\x22Unrecognized scheme name: \x22+_.scheme)),scale\x3dd\x3d\x3d\x3dvegaScale.Threshold?scale+1:d\x3d\x3d\x3dvegaScale.BinOrdinal?scale-1:d\x3d\x3d\x3dvegaScale.Quantile||d\x3d\x3d\x3dvegaScale.Quantize?+_.schemeCount||5:scale,t\x3dvegaScale.isInterpolating(d)?adjustScheme(JSCompiler_temp,t,_.reverse):vegaUtil.isFunction(JSCompiler_temp)?vegaScale.quantizeInterpolator(adjustScheme(JSCompiler_temp,t),scale):d\x3d\x3d\x3dvegaScale.Ordinal?JSCompiler_temp:JSCompiler_temp.slice(0,\nscale),vegaUtil.isFunction(t)))if(key.interpolator){key.interpolator(t);break a}else vegaUtil.error(\x22Scale type \x22+d+\x22 does not support interpolating color schemes.\x22);t\x26\x26vegaScale.isInterpolating(d)?key.interpolator(vegaScale.interpolateColors(flip(t,_.reverse),_.interpolate,_.interpolateGamma)):(t\x26\x26_.interpolate\x26\x26key.interpolate?key.interpolate(vegaScale.interpolate(_.interpolate,_.interpolateGamma)):vegaUtil.isFunction(key.round)?key.round(df):vegaUtil.isFunction(key.rangeRound)\x26\x26key.interpolate(df?\nd3Interpolate.interpolateRound:d3Interpolate.interpolate),t\x26\x26key.range(flip(t,_.reverse)))}return pulse.fork(pulse.NO_SOURCE|pulse.NO_FIELDS)};vegaUtil.inherits(SortItems,vegaDataflow.Transform).transform\x3dfunction(_,pulse){var mod\x3d_.modified(\x22sort\x22)||pulse.changed(pulse.ADD)||pulse.modified(_.sort.fields)||pulse.modified(\x22datum\x22);mod\x26\x26pulse.source.sort(vegaDataflow.stableCompare(_.sort));this.modified(mod);return pulse};var DefOutput\x3d[\x22y0\x22,\x22y1\x22];Stack.Definition\x3d{type:\x22Stack\x22,metadata:{modifies:!0},\nparams:[{name:\x22field\x22,type:\x22field\x22},{name:\x22groupby\x22,type:\x22field\x22,array:!0},{name:\x22sort\x22,type:\x22compare\x22},{name:\x22offset\x22,type:\x22enum\x22,\x22default\x22:\x22zero\x22,values:[\x22zero\x22,\x22center\x22,\x22normalize\x22]},{name:\x22as\x22,type:\x22string\x22,array:!0,length:2,\x22default\x22:DefOutput}]};vegaUtil.inherits(Stack,vegaDataflow.Transform).transform\x3dfunction(_,pulse){var as\x3d_.as||DefOutput,y0\x3das[0],y1\x3das[1],sort\x3dvegaDataflow.stableCompare(_.sort),field\x3d_.field||vegaUtil.one,stack\x3d\x22center\x22\x3d\x3d\x3d_.offset?stackCenter:\x22normalize\x22\x3d\x3d\x3d_.offset?stackNormalize:\nstackZero,max;sort\x3dpartition(pulse.source,_.groupby,sort,field);var i\x3d0;var n\x3dsort.length;for(max\x3dsort.max;i\x3cn;++i)stack(sort[i],max,field,y0,y1);return pulse.reflow(_.modified()).modifies(as)};exports.axisticks\x3dAxisTicks;exports.datajoin\x3dDataJoin;exports.encode\x3dEncode;exports.legendentries\x3dLegendEntries;exports.linkpath\x3dLinkPath;exports.pie\x3dPie;exports.scale\x3dScale;exports.sortitems\x3dSortItems;exports.stack\x3dStack;Object.defineProperty(exports,\x22__esModule\x22,{value:!0})})}");
SHADOW_ENV.evalLoad("module$node_modules$d3_geo$dist$d3_geo.js", true , "shadow$provide.module$node_modules$d3_geo$dist$d3_geo\x3dfunction(global$jscomp$0,require,module,exports$jscomp$0){(function(global,factory){\x22object\x22\x3d\x3d\x3dtypeof exports$jscomp$0\x26\x26\x22undefined\x22!\x3d\x3dtypeof module?factory(exports$jscomp$0,require(\x22module$node_modules$d3_array$dist$d3_array\x22)):\x22function\x22\x3d\x3d\x3dtypeof define\x26\x26define.amd?define([\x22exports\x22,\x22d3-array\x22],factory):(global\x3dglobal||self,factory(global.d3\x3dglobal.d3||{},global.d3))})(this,function(exports,d3Array){function Adder(){this.reset()}function add(adder,\na,b){var x\x3dadder.s\x3da+b,bv\x3dx-a;adder.t\x3da-(x-bv)+(b-bv)}function acos(x){return 1\x3cx?0:-1\x3ex?pi:Math.acos(x)}function asin(x){return 1\x3cx?halfPi:-1\x3ex?-halfPi:Math.asin(x)}function haversin(x){return(x\x3dsin(x/2))*x}function noop(){}function streamGeometry(geometry,stream){if(geometry\x26\x26streamGeometryType.hasOwnProperty(geometry.type))streamGeometryType[geometry.type](geometry,stream)}function streamLine(coordinates,stream,closed){var i\x3d-1;closed\x3dcoordinates.length-closed;for(stream.lineStart();++i\x3cclosed;){var coordinate\x3d\ncoordinates[i];stream.point(coordinate[0],coordinate[1],coordinate[2])}stream.lineEnd()}function streamPolygon(coordinates,stream){var i\x3d-1,n\x3dcoordinates.length;for(stream.polygonStart();++i\x3cn;)streamLine(coordinates[i],stream,1);stream.polygonEnd()}function geoStream(object,stream){if(object\x26\x26streamObjectType.hasOwnProperty(object.type))streamObjectType[object.type](object,stream);else streamGeometry(object,stream)}function areaRingStart(){areaStream.point\x3dareaPointFirst}function areaRingEnd(){areaPoint(lambda00,\nphi00)}function areaPointFirst(lambda,phi){areaStream.point\x3dareaPoint;lambda00\x3dlambda;phi00\x3dphi;lambda*\x3dradians;phi*\x3dradians;lambda0\x3dlambda;cosPhi0\x3dcos(phi\x3dphi/2+quarterPi);sinPhi0\x3dsin(phi)}function areaPoint(lambda,phi){lambda*\x3dradians;phi*\x3dradians;phi\x3dphi/2+quarterPi;var dLambda\x3dlambda-lambda0,sdLambda\x3d0\x3c\x3ddLambda?1:-1,adLambda\x3dsdLambda*dLambda;dLambda\x3dcos(phi);phi\x3dsin(phi);var k\x3dsinPhi0*phi,u\x3dcosPhi0*dLambda+k*cos(adLambda);sdLambda\x3dk*sdLambda*sin(adLambda);areaRingSum.add(atan2(sdLambda,u));lambda0\x3d\nlambda;cosPhi0\x3ddLambda;sinPhi0\x3dphi}function spherical$jscomp$0(cartesian){return[atan2(cartesian[1],cartesian[0]),asin(cartesian[2])]}function cartesian$jscomp$0(spherical){var lambda\x3dspherical[0];spherical\x3dspherical[1];var cosPhi\x3dcos(spherical);return[cosPhi*cos(lambda),cosPhi*sin(lambda),sin(spherical)]}function cartesianDot(a,b){return a[0]*b[0]+a[1]*b[1]+a[2]*b[2]}function cartesianCross(a,b){return[a[1]*b[2]-a[2]*b[1],a[2]*b[0]-a[0]*b[2],a[0]*b[1]-a[1]*b[0]]}function cartesianAddInPlace(a,b){a[0]+\x3d\nb[0];a[1]+\x3db[1];a[2]+\x3db[2]}function cartesianScale(vector,k){return[vector[0]*k,vector[1]*k,vector[2]*k]}function cartesianNormalizeInPlace(d){var l\x3dsqrt(d[0]*d[0]+d[1]*d[1]+d[2]*d[2]);d[0]/\x3dl;d[1]/\x3dl;d[2]/\x3dl}function boundsPoint(lambda,phi){ranges.push(range$jscomp$0\x3d[lambda0$1\x3dlambda,lambda1\x3dlambda]);phi\x3cphi0\x26\x26(phi0\x3dphi);phi\x3ephi1$jscomp$0\x26\x26(phi1$jscomp$0\x3dphi)}function linePoint(lambda,phi){var p\x3dcartesian$jscomp$0([lambda*radians,phi*radians]);if(p0$jscomp$0){var normal\x3dcartesianCross(p0$jscomp$0,\np);normal\x3dcartesianCross([normal[1],-normal[0],0],normal);cartesianNormalizeInPlace(normal);normal\x3dspherical$jscomp$0(normal);var delta\x3dlambda-lambda2$jscomp$0,sign\x3d0\x3cdelta?1:-1,lambdai\x3dnormal[0]*degrees*sign;delta\x3d180\x3cabs(delta);delta^(sign*lambda2$jscomp$0\x3clambdai\x26\x26lambdai\x3csign*lambda)?(normal\x3dnormal[1]*degrees,normal\x3ephi1$jscomp$0\x26\x26(phi1$jscomp$0\x3dnormal)):(lambdai\x3d(lambdai+360)%360-180,delta^(sign*lambda2$jscomp$0\x3clambdai\x26\x26lambdai\x3csign*lambda))?(normal\x3d-normal[1]*degrees,normal\x3cphi0\x26\x26(phi0\x3dnormal)):\n(phi\x3cphi0\x26\x26(phi0\x3dphi),phi\x3ephi1$jscomp$0\x26\x26(phi1$jscomp$0\x3dphi));delta?lambda\x3clambda2$jscomp$0?angle$jscomp$0(lambda0$1,lambda)\x3eangle$jscomp$0(lambda0$1,lambda1)\x26\x26(lambda1\x3dlambda):angle$jscomp$0(lambda,lambda1)\x3eangle$jscomp$0(lambda0$1,lambda1)\x26\x26(lambda0$1\x3dlambda):lambda1\x3e\x3dlambda0$1?(lambda\x3clambda0$1\x26\x26(lambda0$1\x3dlambda),lambda\x3elambda1\x26\x26(lambda1\x3dlambda)):lambda\x3elambda2$jscomp$0?angle$jscomp$0(lambda0$1,lambda)\x3eangle$jscomp$0(lambda0$1,lambda1)\x26\x26(lambda1\x3dlambda):angle$jscomp$0(lambda,lambda1)\x3eangle$jscomp$0(lambda0$1,\nlambda1)\x26\x26(lambda0$1\x3dlambda)}else ranges.push(range$jscomp$0\x3d[lambda0$1\x3dlambda,lambda1\x3dlambda]);phi\x3cphi0\x26\x26(phi0\x3dphi);phi\x3ephi1$jscomp$0\x26\x26(phi1$jscomp$0\x3dphi);p0$jscomp$0\x3dp;lambda2$jscomp$0\x3dlambda}function boundsLineStart(){boundsStream.point\x3dlinePoint}function boundsLineEnd(){range$jscomp$0[0]\x3dlambda0$1;range$jscomp$0[1]\x3dlambda1;boundsStream.point\x3dboundsPoint;p0$jscomp$0\x3dnull}function boundsRingPoint(lambda,phi){if(p0$jscomp$0){var delta\x3dlambda-lambda2$jscomp$0;deltaSum.add(180\x3cabs(delta)?delta+(0\x3c\ndelta?360:-360):delta)}else lambda00$1\x3dlambda,phi00$1\x3dphi;areaStream.point(lambda,phi);linePoint(lambda,phi)}function boundsRingStart(){areaStream.lineStart()}function boundsRingEnd(){boundsRingPoint(lambda00$1,phi00$1);areaStream.lineEnd();1E-6\x3cabs(deltaSum)\x26\x26(lambda0$1\x3d-(lambda1\x3d180));range$jscomp$0[0]\x3dlambda0$1;range$jscomp$0[1]\x3dlambda1;p0$jscomp$0\x3dnull}function angle$jscomp$0(lambda0,lambda1){return 0\x3e(lambda1-\x3dlambda0)?lambda1+360:lambda1}function rangeCompare(a,b){return a[0]-b[0]}function rangeContains(range,\nx){return range[0]\x3c\x3drange[1]?range[0]\x3c\x3dx\x26\x26x\x3c\x3drange[1]:x\x3crange[0]||range[1]\x3cx}function centroidPoint(lambda,phi){lambda*\x3dradians;phi*\x3dradians;var cosPhi\x3dcos(phi);centroidPointCartesian(cosPhi*cos(lambda),cosPhi*sin(lambda),sin(phi))}function centroidPointCartesian(x,y,z){++W0;X0+\x3d(x-X0)/W0;Y0+\x3d(y-Y0)/W0;Z0+\x3d(z-Z0)/W0}function centroidLineStart(){centroidStream.point\x3dcentroidLinePointFirst}function centroidLinePointFirst(lambda,phi){lambda*\x3dradians;phi*\x3dradians;var cosPhi\x3dcos(phi);x0$jscomp$0\x3dcosPhi*\ncos(lambda);y0$jscomp$0\x3dcosPhi*sin(lambda);z0\x3dsin(phi);centroidStream.point\x3dcentroidLinePoint;centroidPointCartesian(x0$jscomp$0,y0$jscomp$0,z0)}function centroidLinePoint(lambda,phi){lambda*\x3dradians;phi*\x3dradians;var cosPhi\x3dcos(phi),x\x3dcosPhi*cos(lambda);lambda\x3dcosPhi*sin(lambda);phi\x3dsin(phi);var w\x3datan2(sqrt((w\x3dy0$jscomp$0*phi-z0*lambda)*w+(w\x3dz0*x-x0$jscomp$0*phi)*w+(w\x3dx0$jscomp$0*lambda-y0$jscomp$0*x)*w),x0$jscomp$0*x+y0$jscomp$0*lambda+z0*phi);W1+\x3dw;X1+\x3dw*(x0$jscomp$0+(x0$jscomp$0\x3dx));Y1+\x3dw*(y0$jscomp$0+\n(y0$jscomp$0\x3dlambda));Z1+\x3dw*(z0+(z0\x3dphi));centroidPointCartesian(x0$jscomp$0,y0$jscomp$0,z0)}function centroidLineEnd(){centroidStream.point\x3dcentroidPoint}function centroidRingStart(){centroidStream.point\x3dcentroidRingPointFirst}function centroidRingEnd(){centroidRingPoint(lambda00$2,phi00$2);centroidStream.point\x3dcentroidPoint}function centroidRingPointFirst(lambda,phi){lambda00$2\x3dlambda;phi00$2\x3dphi;lambda*\x3dradians;phi*\x3dradians;centroidStream.point\x3dcentroidRingPoint;var cosPhi\x3dcos(phi);x0$jscomp$0\x3d\ncosPhi*cos(lambda);y0$jscomp$0\x3dcosPhi*sin(lambda);z0\x3dsin(phi);centroidPointCartesian(x0$jscomp$0,y0$jscomp$0,z0)}function centroidRingPoint(lambda,phi){lambda*\x3dradians;phi*\x3dradians;var cosPhi\x3dcos(phi),x\x3dcosPhi*cos(lambda);lambda\x3dcosPhi*sin(lambda);phi\x3dsin(phi);cosPhi\x3dy0$jscomp$0*phi-z0*lambda;var cy\x3dz0*x-x0$jscomp$0*phi,cz\x3dx0$jscomp$0*lambda-y0$jscomp$0*x,m\x3dsqrt(cosPhi*cosPhi+cy*cy+cz*cz),w\x3dasin(m);m\x3dm\x26\x26-w/m;X2+\x3dm*cosPhi;Y2+\x3dm*cy;Z2+\x3dm*cz;W1+\x3dw;X1+\x3dw*(x0$jscomp$0+(x0$jscomp$0\x3dx));Y1+\x3dw*(y0$jscomp$0+\n(y0$jscomp$0\x3dlambda));Z1+\x3dw*(z0+(z0\x3dphi));centroidPointCartesian(x0$jscomp$0,y0$jscomp$0,z0)}function constant(x){return function(){return x}}function compose(a,b){function compose(x,y){return x\x3da(x,y),b(x[0],x[1])}a.invert\x26\x26b.invert\x26\x26(compose.invert\x3dfunction(x,y){return x\x3db.invert(x,y),x\x26\x26a.invert(x[0],x[1])});return compose}function rotationIdentity(lambda,phi){return[abs(lambda)\x3epi?lambda+Math.round(-lambda/tau)*tau:lambda,phi]}function rotateRadians(deltaLambda,deltaPhi,deltaGamma){return(deltaLambda%\x3d\ntau)?deltaPhi||deltaGamma?compose(rotationLambda(deltaLambda),rotationPhiGamma(deltaPhi,deltaGamma)):rotationLambda(deltaLambda):deltaPhi||deltaGamma?rotationPhiGamma(deltaPhi,deltaGamma):rotationIdentity}function forwardRotationLambda(deltaLambda){return function(lambda,phi){return lambda+\x3ddeltaLambda,[lambda\x3epi?lambda-tau:lambda\x3c-pi?lambda+tau:lambda,phi]}}function rotationLambda(deltaLambda){var rotation\x3dforwardRotationLambda(deltaLambda);rotation.invert\x3dforwardRotationLambda(-deltaLambda);return rotation}\nfunction rotationPhiGamma(deltaPhi,deltaGamma){function rotation(lambda,phi){var cosPhi\x3dcos(phi),x\x3dcos(lambda)*cosPhi;lambda\x3dsin(lambda)*cosPhi;phi\x3dsin(phi);cosPhi\x3dphi*cosDeltaPhi+x*sinDeltaPhi;return[atan2(lambda*cosDeltaGamma-cosPhi*sinDeltaGamma,x*cosDeltaPhi-phi*sinDeltaPhi),asin(cosPhi*cosDeltaGamma+lambda*sinDeltaGamma)]}var cosDeltaPhi\x3dcos(deltaPhi),sinDeltaPhi\x3dsin(deltaPhi),cosDeltaGamma\x3dcos(deltaGamma),sinDeltaGamma\x3dsin(deltaGamma);rotation.invert\x3dfunction(lambda,phi){var cosPhi\x3dcos(phi),\nx\x3dcos(lambda)*cosPhi;lambda\x3dsin(lambda)*cosPhi;phi\x3dsin(phi);cosPhi\x3dphi*cosDeltaGamma-lambda*sinDeltaGamma;return[atan2(lambda*cosDeltaGamma+phi*sinDeltaGamma,x*cosDeltaPhi+cosPhi*sinDeltaPhi),asin(cosPhi*cosDeltaPhi-x*sinDeltaPhi)]};return rotation}function rotation$jscomp$0(rotate){function forward(coordinates){coordinates\x3drotate(coordinates[0]*radians,coordinates[1]*radians);return coordinates[0]*\x3ddegrees,coordinates[1]*\x3ddegrees,coordinates}rotate\x3drotateRadians(rotate[0]*radians,rotate[1]*radians,\n2\x3crotate.length?rotate[2]*radians:0);forward.invert\x3dfunction(coordinates){coordinates\x3drotate.invert(coordinates[0]*radians,coordinates[1]*radians);return coordinates[0]*\x3ddegrees,coordinates[1]*\x3ddegrees,coordinates};return forward}function circleStream(stream,radius,delta,direction,t0,t1){if(delta){var cosRadius\x3dcos(radius),sinRadius\x3dsin(radius);delta*\x3ddirection;if(null\x3d\x3dt0)t0\x3dradius+direction*tau,t1\x3dradius-delta/2;else if(t0\x3dcircleRadius(cosRadius,t0),t1\x3dcircleRadius(cosRadius,t1),0\x3cdirection?t0\x3c\nt1:t0\x3et1)t0+\x3ddirection*tau;for(;0\x3cdirection?t0\x3et1:t0\x3ct1;t0-\x3ddelta)radius\x3dspherical$jscomp$0([cosRadius,-sinRadius*cos(t0),-sinRadius*sin(t0)]),stream.point(radius[0],radius[1])}}function circleRadius(cosRadius,point){point\x3dcartesian$jscomp$0(point);point[0]-\x3dcosRadius;cartesianNormalizeInPlace(point);cosRadius\x3dacos(-point[1]);return((0\x3e-point[2]?-cosRadius:cosRadius)+tau-1E-6)%tau}function clipBuffer(){var lines\x3d[],line;return{point:function(x,y,m){line.push([x,y,m])},lineStart:function(){lines.push(line\x3d\n[])},lineEnd:noop,rejoin:function(){1\x3clines.length\x26\x26lines.push(lines.pop().concat(lines.shift()))},result:function(){var result\x3dlines;lines\x3d[];line\x3dnull;return result}}}function pointEqual(a,b){return 1E-6\x3eabs(a[0]-b[0])\x26\x261E-6\x3eabs(a[1]-b[1])}function Intersection(point,points,other,entry){this.x\x3dpoint;this.z\x3dpoints;this.o\x3dother;this.e\x3dentry;this.v\x3d!1;this.n\x3dthis.p\x3dnull}function clipRejoin(segments,compareIntersection,startInside,interpolate,stream){var subject\x3d[],clip\x3d[];segments.forEach(function(segment){if(!(0\x3e\x3d\n(n\x3dsegment.length-1))){var n,p0\x3dsegment[0],p1\x3dsegment[n];if(pointEqual(p0,p1)){if(!p0[2]\x26\x26!p1[2]){stream.lineStart();for(i\x3d0;i\x3cn;++i)stream.point((p0\x3dsegment[i])[0],p0[1]);stream.lineEnd();return}p1[0]+\x3d2E-6}subject.push(n\x3dnew Intersection(p0,segment,null,!0));clip.push(n.o\x3dnew Intersection(p0,null,n,!1));subject.push(n\x3dnew Intersection(p1,segment,null,!1));clip.push(n.o\x3dnew Intersection(p1,null,n,!0))}});if(subject.length){clip.sort(compareIntersection);link(subject);link(clip);var i\x3d0;for(segments\x3d\nclip.length;i\x3csegments;++i)clip[i].e\x3dstartInside\x3d!startInside;startInside\x3dsubject[0];for(var point;;){for(var current\x3dstartInside,isSubject\x3d!0;current.v;)if((current\x3dcurrent.n)\x3d\x3d\x3dstartInside)return;compareIntersection\x3dcurrent.z;stream.lineStart();do{current.v\x3dcurrent.o.v\x3d!0;if(current.e){if(isSubject)for(i\x3d0,segments\x3dcompareIntersection.length;i\x3csegments;++i)stream.point((point\x3dcompareIntersection[i])[0],point[1]);else interpolate(current.x,current.n.x,1,stream);current\x3dcurrent.n}else{if(isSubject)for(compareIntersection\x3d\ncurrent.p.z,i\x3dcompareIntersection.length-1;0\x3c\x3di;--i)stream.point((point\x3dcompareIntersection[i])[0],point[1]);else interpolate(current.x,current.p.x,-1,stream);current\x3dcurrent.p}current\x3dcurrent.o;compareIntersection\x3dcurrent.z;isSubject\x3d!isSubject}while(!current.v);stream.lineEnd()}}}function link(array){if(n\x3darray.length){for(var n,i\x3d0,a\x3darray[0],b;++i\x3cn;)a.n\x3db\x3darray[i],b.p\x3da,a\x3db;a.n\x3db\x3darray[0];b.p\x3da}}function longitude(point){return abs(point[0])\x3c\x3dpi?point[0]:sign$jscomp$0(point[0])*((abs(point[0])+\npi)%tau-pi)}function polygonContains(polygon,point){var lambda\x3dlongitude(point);point\x3dpoint[1];var sinPhi\x3dsin(point),normal\x3d[sin(lambda),-cos(lambda),0],angle\x3d0,winding\x3d0;sum.reset();1\x3d\x3d\x3dsinPhi?point\x3dhalfPi+1E-6:-1\x3d\x3d\x3dsinPhi\x26\x26(point\x3d-halfPi-1E-6);sinPhi\x3d0;for(var n\x3dpolygon.length;sinPhi\x3cn;++sinPhi)if(m\x3d(ring\x3dpolygon[sinPhi]).length){var ring,m,point0\x3dring[m-1],lambda0\x3dlongitude(point0),phi0\x3dpoint0[1]/2+quarterPi,sinPhi0\x3dsin(phi0),cosPhi0\x3dcos(phi0);for(phi0\x3d0;phi0\x3cm;++phi0,lambda0\x3dlambda1,sinPhi0\x3dsinPhi1,\ncosPhi0\x3dcosPhi1,point0\x3dpoint1){var point1\x3dring[phi0],lambda1\x3dlongitude(point1);cosPhi1\x3dpoint1[1]/2+quarterPi;var sinPhi1\x3dsin(cosPhi1),cosPhi1\x3dcos(cosPhi1),delta\x3dlambda1-lambda0,sign\x3d0\x3c\x3ddelta?1:-1,absDelta\x3dsign*delta,antimeridian\x3dabsDelta\x3epi;sinPhi0*\x3dsinPhi1;sum.add(atan2(sinPhi0*sign*sin(absDelta),cosPhi0*cosPhi1+sinPhi0*cos(absDelta)));angle+\x3dantimeridian?delta+sign*tau:delta;antimeridian^lambda0\x3e\x3dlambda^lambda1\x3e\x3dlambda\x26\x26(point0\x3dcartesianCross(cartesian$jscomp$0(point0),cartesian$jscomp$0(point1)),\ncartesianNormalizeInPlace(point0),lambda0\x3dcartesianCross(normal,point0),cartesianNormalizeInPlace(lambda0),lambda0\x3d(antimeridian^0\x3c\x3ddelta?-1:1)*asin(lambda0[2]),point\x3elambda0||point\x3d\x3d\x3dlambda0\x26\x26(point0[0]||point0[1]))\x26\x26(winding+\x3dantimeridian^0\x3c\x3ddelta?1:-1)}}return(-1E-6\x3eangle||1E-6\x3eangle\x26\x26-1E-6\x3esum)^winding\x261}function clip$jscomp$0(pointVisible,clipLine,interpolate,start){return function(sink){function point$jscomp$0(lambda,phi){pointVisible(lambda,phi)\x26\x26sink.point(lambda,phi)}function pointLine(lambda,\nphi){line.point(lambda,phi)}function lineStart(){clip.point\x3dpointLine;line.lineStart()}function lineEnd(){clip.point\x3dpoint$jscomp$0;line.lineEnd()}function pointRing(lambda,phi){ring.push([lambda,phi]);ringSink.point(lambda,phi)}function ringStart(){ringSink.lineStart();ring\x3d[]}function ringEnd(){pointRing(ring[0][0],ring[0][1]);ringSink.lineEnd();var clean\x3dringSink.clean(),ringSegments\x3dringBuffer.result(),n\x3dringSegments.length,point;ring.pop();polygon.push(ring);ring\x3dnull;if(n)if(clean\x261){if(n\x3dringSegments[0],\n0\x3c(ringSegments\x3dn.length-1)){polygonStarted||(sink.polygonStart(),polygonStarted\x3d!0);sink.lineStart();for(clean\x3d0;clean\x3cringSegments;++clean)sink.point((point\x3dn[clean])[0],point[1]);sink.lineEnd()}}else 1\x3cn\x26\x26clean\x262\x26\x26ringSegments.push(ringSegments.pop().concat(ringSegments.shift())),segments.push(ringSegments.filter(validSegment))}var line\x3dclipLine(sink),ringBuffer\x3dclipBuffer(),ringSink\x3dclipLine(ringBuffer),polygonStarted\x3d!1,polygon,segments,ring,clip\x3d{point:point$jscomp$0,lineStart:lineStart,lineEnd:lineEnd,\npolygonStart:function(){clip.point\x3dpointRing;clip.lineStart\x3dringStart;clip.lineEnd\x3dringEnd;segments\x3d[];polygon\x3d[]},polygonEnd:function(){clip.point\x3dpoint$jscomp$0;clip.lineStart\x3dlineStart;clip.lineEnd\x3dlineEnd;segments\x3dd3Array.merge(segments);var startInside\x3dpolygonContains(polygon,start);segments.length?(polygonStarted||(sink.polygonStart(),polygonStarted\x3d!0),clipRejoin(segments,compareIntersection,startInside,interpolate,sink)):startInside\x26\x26(polygonStarted||(sink.polygonStart(),polygonStarted\x3d!0),\nsink.lineStart(),interpolate(null,null,1,sink),sink.lineEnd());polygonStarted\x26\x26(sink.polygonEnd(),polygonStarted\x3d!1);segments\x3dpolygon\x3dnull},sphere:function(){sink.polygonStart();sink.lineStart();interpolate(null,null,1,sink);sink.lineEnd();sink.polygonEnd()}};return clip}}function validSegment(segment){return 1\x3csegment.length}function compareIntersection(a,b){return(0\x3e(a\x3da.x)[0]?a[1]-halfPi-1E-6:halfPi-a[1])-(0\x3e(b\x3db.x)[0]?b[1]-halfPi-1E-6:halfPi-b[1])}function clipCircle(radius){function visible(lambda,\nphi){return cos(lambda)*cos(phi)\x3ecr}function intersect(a,b,two){var pa\x3dcartesian$jscomp$0(a),pb\x3dcartesian$jscomp$0(b),n1\x3d[1,0,0];pb\x3dcartesianCross(pa,pb);var n2n2\x3dcartesianDot(pb,pb);pa\x3dpb[0];var determinant\x3dn2n2-pa*pa;if(!determinant)return!two\x26\x26a;n2n2\x3dcr*n2n2/determinant;determinant\x3d-cr*pa/determinant;pa\x3dcartesianCross(n1,pb);n1\x3dcartesianScale(n1,n2n2);pb\x3dcartesianScale(pb,determinant);cartesianAddInPlace(n1,pb);pb\x3dcartesianDot(n1,pa);n2n2\x3dcartesianDot(pa,pa);determinant\x3dpb*pb-n2n2*(cartesianDot(n1,\nn1)-1);if(!(0\x3edeterminant)){var t\x3dsqrt(determinant);determinant\x3dcartesianScale(pa,(-pb-t)/n2n2);cartesianAddInPlace(determinant,n1);determinant\x3dspherical$jscomp$0(determinant);if(!two)return determinant;two\x3da[0];var lambda1\x3db[0];a\x3da[1];b\x3db[1];if(lambda1\x3ctwo){var z\x3dtwo;two\x3dlambda1;lambda1\x3dz}var delta\x3dlambda1-two,polar\x3d1E-6\x3eabs(delta-pi);!polar\x26\x26b\x3ca\x26\x26(z\x3da,a\x3db,b\x3dz);if(polar||1E-6\x3edelta?polar?0\x3ca+b^determinant[1]\x3c(1E-6\x3eabs(determinant[0]-two)?a:b):a\x3c\x3ddeterminant[1]\x26\x26determinant[1]\x3c\x3db:delta\x3epi^(two\x3c\x3ddeterminant[0]\x26\x26\ndeterminant[0]\x3c\x3dlambda1))return b\x3dcartesianScale(pa,(-pb+t)/n2n2),cartesianAddInPlace(b,n1),[determinant,spherical$jscomp$0(b)]}}function code$jscomp$0(lambda,phi){var r\x3dsmallRadius?radius:pi-radius,code\x3d0;lambda\x3c-r?code|\x3d1:lambda\x3er\x26\x26(code|\x3d2);phi\x3c-r?code|\x3d4:phi\x3er\x26\x26(code|\x3d8);return code}var cr\x3dcos(radius),delta$jscomp$0\x3d6*radians,smallRadius\x3d0\x3ccr,notHemisphere\x3d1E-6\x3cabs(cr);return clip$jscomp$0(visible,function(stream){var point0,c0,v0,v00,clean;return{lineStart:function(){v00\x3dv0\x3d!1;clean\x3d1},point:function(lambda,\nphi){var point1\x3d[lambda,phi],v\x3dvisible(lambda,phi);phi\x3dsmallRadius?v?0:code$jscomp$0(lambda,phi):v?code$jscomp$0(lambda+(0\x3elambda?pi:-pi),phi):0;!point0\x26\x26(v00\x3dv0\x3dv)\x26\x26stream.lineStart();v!\x3d\x3dv0\x26\x26(lambda\x3dintersect(point0,point1),!lambda||pointEqual(point0,lambda)||pointEqual(point1,lambda))\x26\x26(point1[2]\x3d1);if(v!\x3d\x3dv0)clean\x3d0,v?(stream.lineStart(),lambda\x3dintersect(point1,point0),stream.point(lambda[0],lambda[1])):(lambda\x3dintersect(point0,point1),stream.point(lambda[0],lambda[1],2),stream.lineEnd()),point0\x3d\nlambda;else if(notHemisphere\x26\x26point0\x26\x26smallRadius^v){var t;phi\x26c0||!(t\x3dintersect(point1,point0,!0))||(clean\x3d0,smallRadius?(stream.lineStart(),stream.point(t[0][0],t[0][1]),stream.point(t[1][0],t[1][1]),stream.lineEnd()):(stream.point(t[1][0],t[1][1]),stream.lineEnd(),stream.lineStart(),stream.point(t[0][0],t[0][1],3)))}!v||point0\x26\x26pointEqual(point0,point1)||stream.point(point1[0],point1[1]);point0\x3dpoint1;v0\x3dv;c0\x3dphi},lineEnd:function(){v0\x26\x26stream.lineEnd();point0\x3dnull},clean:function(){return clean|\n(v00\x26\x26v0)\x3c\x3c1}}},function(from,to,direction,stream){circleStream(stream,radius,delta$jscomp$0,direction,from,to)},smallRadius?[0,-radius]:[-pi,radius-pi])}function clipLine(a,b,x0,y0,x1,y1){var ax\x3da[0],ay\x3da[1],t0\x3d0,t1\x3d1,dx\x3db[0]-ax,dy\x3db[1]-ay;x0-\x3dax;if(dx||!(0\x3cx0)){x0/\x3ddx;if(0\x3edx){if(x0\x3ct0)return;x0\x3ct1\x26\x26(t1\x3dx0)}else if(0\x3cdx){if(x0\x3et1)return;x0\x3et0\x26\x26(t0\x3dx0)}x0\x3dx1-ax;if(dx||!(0\x3ex0)){x0/\x3ddx;if(0\x3edx){if(x0\x3et1)return;x0\x3et0\x26\x26(t0\x3dx0)}else if(0\x3cdx){if(x0\x3ct0)return;x0\x3ct1\x26\x26(t1\x3dx0)}x0\x3dy0-ay;if(dy||!(0\x3cx0)){x0/\x3d\ndy;if(0\x3edy){if(x0\x3ct0)return;x0\x3ct1\x26\x26(t1\x3dx0)}else if(0\x3cdy){if(x0\x3et1)return;x0\x3et0\x26\x26(t0\x3dx0)}x0\x3dy1-ay;if(dy||!(0\x3ex0)){x0/\x3ddy;if(0\x3edy){if(x0\x3et1)return;x0\x3et0\x26\x26(t0\x3dx0)}else if(0\x3cdy){if(x0\x3ct0)return;x0\x3ct1\x26\x26(t1\x3dx0)}0\x3ct0\x26\x26(a[0]\x3dax+t0*dx,a[1]\x3day+t0*dy);1\x3et1\x26\x26(b[0]\x3dax+t1*dx,b[1]\x3day+t1*dy);return!0}}}}}function clipRectangle(x0,y0,x1,y1){function interpolate(from,to,direction,stream){var a\x3d0,a1\x3d0;if(null\x3d\x3dfrom||(a\x3dcorner(from,direction))!\x3d\x3d(a1\x3dcorner(to,direction))||0\x3ecomparePoint(from,to)^0\x3cdirection){do stream.point(0\x3d\x3d\x3d\na||3\x3d\x3d\x3da?x0:x1,1\x3ca?y1:y0);while((a\x3d(a+direction+4)%4)!\x3d\x3da1)}else stream.point(to[0],to[1])}function corner(p,direction){return 1E-6\x3eabs(p[0]-x0)?0\x3cdirection?0:3:1E-6\x3eabs(p[0]-x1)?0\x3cdirection?2:1:1E-6\x3eabs(p[1]-y0)?0\x3cdirection?1:0:0\x3cdirection?3:2}function compareIntersection(a,b){return comparePoint(a.x,b.x)}function comparePoint(a,b){var ca\x3dcorner(a,1),cb\x3dcorner(b,1);return ca!\x3d\x3dcb?ca-cb:0\x3d\x3d\x3dca?b[1]-a[1]:1\x3d\x3d\x3dca?a[0]-b[0]:2\x3d\x3d\x3dca?a[1]-b[1]:b[0]-a[0]}return function(stream){function point$jscomp$0(x,\ny){x0\x3c\x3dx\x26\x26x\x3c\x3dx1\x26\x26y0\x3c\x3dy\x26\x26y\x3c\x3dy1\x26\x26activeStream.point(x,y)}function linePoint(x,y){var v\x3dx0\x3c\x3dx\x26\x26x\x3c\x3dx1\x26\x26y0\x3c\x3dy\x26\x26y\x3c\x3dy1;polygon\x26\x26ring$jscomp$0.push([x,y]);if(first)x__\x3dx,y__\x3dy,v__\x3dv,first\x3d!1,v\x26\x26(activeStream.lineStart(),activeStream.point(x,y));else if(v\x26\x26v_)activeStream.point(x,y);else{var a\x3d[x_\x3dMath.max(-1E9,Math.min(1E9,x_)),y_\x3dMath.max(-1E9,Math.min(1E9,y_))],b\x3d[x\x3dMath.max(-1E9,Math.min(1E9,x)),y\x3dMath.max(-1E9,Math.min(1E9,y))];clipLine(a,b,x0,y0,x1,y1)?(v_||(activeStream.lineStart(),activeStream.point(a[0],\na[1])),activeStream.point(b[0],b[1]),v||activeStream.lineEnd(),clean\x3d!1):v\x26\x26(activeStream.lineStart(),activeStream.point(x,y),clean\x3d!1)}x_\x3dx;y_\x3dy;v_\x3dv}var activeStream\x3dstream,bufferStream\x3dclipBuffer(),segments,polygon,ring$jscomp$0,x__,y__,v__,x_,y_,v_,first,clean,clipStream\x3d{point:point$jscomp$0,lineStart:function(){clipStream.point\x3dlinePoint;polygon\x26\x26polygon.push(ring$jscomp$0\x3d[]);first\x3d!0;v_\x3d!1;x_\x3dy_\x3dNaN},lineEnd:function(){segments\x26\x26(linePoint(x__,y__),v__\x26\x26v_\x26\x26bufferStream.rejoin(),segments.push(bufferStream.result()));\nclipStream.point\x3dpoint$jscomp$0;v_\x26\x26activeStream.lineEnd()},polygonStart:function(){activeStream\x3dbufferStream;segments\x3d[];polygon\x3d[];clean\x3d!0},polygonEnd:function(){for(var startInside,i\x3dstartInside\x3d0,n\x3dpolygon.length;i\x3cn;++i){var ring\x3dpolygon[i],j\x3d1,m\x3dring.length,point\x3dring[0],b0\x3dpoint[0];for(point\x3dpoint[1];j\x3cm;++j){var a0\x3db0;var a1\x3dpoint;point\x3dring[j];b0\x3dpoint[0];point\x3dpoint[1];a1\x3c\x3dy1?point\x3ey1\x26\x26(b0-a0)*(y1-a1)\x3e(point-a1)*(x0-a0)\x26\x26++startInside:point\x3c\x3dy1\x26\x26(b0-a0)*(y1-a1)\x3c(point-a1)*(x0-a0)\x26\x26--startInside}}i\x3d\nclean\x26\x26startInside;n\x3d(segments\x3dd3Array.merge(segments)).length;if(i||n)stream.polygonStart(),i\x26\x26(stream.lineStart(),interpolate(null,null,1,stream),stream.lineEnd()),n\x26\x26clipRejoin(segments,compareIntersection,startInside,interpolate,stream),stream.polygonEnd();activeStream\x3dstream;segments\x3dpolygon\x3dring$jscomp$0\x3dnull}};return clipStream}}function lengthLineEnd(){lengthStream.point\x3dlengthStream.lineEnd\x3dnoop}function lengthPointFirst(lambda,phi){lambda*\x3dradians;phi*\x3dradians;lambda0$2\x3dlambda;sinPhi0$1\x3d\nsin(phi);cosPhi0$1\x3dcos(phi);lengthStream.point\x3dlengthPoint}function lengthPoint(lambda,phi){lambda*\x3dradians;phi*\x3dradians;var sinPhi\x3dsin(phi);phi\x3dcos(phi);var delta\x3dabs(lambda-lambda0$2),cosDelta\x3dcos(delta);delta\x3dsin(delta);delta*\x3dphi;var y\x3dcosPhi0$1*sinPhi-sinPhi0$1*phi*cosDelta;cosDelta\x3dsinPhi0$1*sinPhi+cosPhi0$1*phi*cosDelta;lengthSum.add(atan2(sqrt(delta*delta+y*y),cosDelta));lambda0$2\x3dlambda;sinPhi0$1\x3dsinPhi;cosPhi0$1\x3dphi}function length$jscomp$0(object){lengthSum.reset();geoStream(object,lengthStream);\nreturn+lengthSum}function distance(a,b){coordinates$jscomp$0[0]\x3da;coordinates$jscomp$0[1]\x3db;return length$jscomp$0(object$jscomp$0)}function containsGeometry(geometry,point){return geometry\x26\x26containsGeometryType.hasOwnProperty(geometry.type)?containsGeometryType[geometry.type](geometry,point):!1}function containsLine(coordinates,point){for(var ao,bo,ab,i\x3d0,n\x3dcoordinates.length;i\x3cn;i++){bo\x3ddistance(coordinates[i],point);if(0\x3d\x3d\x3dbo||0\x3ci\x26\x26(ab\x3ddistance(coordinates[i],coordinates[i-1]),0\x3cab\x26\x26ao\x3c\x3dab\x26\x26bo\x3c\x3d\nab\x26\x26(ao+bo-ab)*(1-Math.pow((ao-bo)/ab,2))\x3c1E-12*ab))return!0;ao\x3dbo}return!1}function containsPolygon(coordinates,point){return!!polygonContains(coordinates.map(ringRadians),pointRadians(point))}function ringRadians(ring){return ring\x3dring.map(pointRadians),ring.pop(),ring}function pointRadians(point){return[point[0]*radians,point[1]*radians]}function graticuleX(y0,y1,dy){var y$jscomp$0\x3dd3Array.range(y0,y1-1E-6,dy).concat(y1);return function(x){return y$jscomp$0.map(function(y){return[x,y]})}}function graticuleY(x0,\nx1,dx){var x$jscomp$0\x3dd3Array.range(x0,x1-1E-6,dx).concat(x1);return function(y){return x$jscomp$0.map(function(x){return[x,y]})}}function graticule$jscomp$0(){function graticule(){return{type:\x22MultiLineString\x22,coordinates:lines()}}function lines(){return d3Array.range(ceil(X0/DX)*DX,X1,DX).map(X).concat(d3Array.range(ceil(Y0/DY)*DY,Y1,DY).map(Y)).concat(d3Array.range(ceil(x0/dx)*dx,x1,dx).filter(function(x){return 1E-6\x3cabs(x%DX)}).map(x$jscomp$0)).concat(d3Array.range(ceil(y0/dy)*dy,y1,dy).filter(function(y){return 1E-6\x3c\nabs(y%DY)}).map(y$jscomp$0))}var x1,x0,X1,X0,y1,y0,Y1,Y0,dx\x3d10,dy\x3ddx,DX\x3d90,DY\x3d360,x$jscomp$0,y$jscomp$0,X,Y,precision\x3d2.5;graticule.lines\x3dfunction(){return lines().map(function(coordinates){return{type:\x22LineString\x22,coordinates:coordinates}})};graticule.outline\x3dfunction(){return{type:\x22Polygon\x22,coordinates:[X(X0).concat(Y(Y1).slice(1),X(X1).reverse().slice(1),Y(Y0).reverse().slice(1))]}};graticule.extent\x3dfunction(_){return arguments.length?graticule.extentMajor(_).extentMinor(_):graticule.extentMinor()};\ngraticule.extentMajor\x3dfunction(_){if(!arguments.length)return[[X0,Y0],[X1,Y1]];X0\x3d+_[0][0];X1\x3d+_[1][0];Y0\x3d+_[0][1];Y1\x3d+_[1][1];X0\x3eX1\x26\x26(_\x3dX0,X0\x3dX1,X1\x3d_);Y0\x3eY1\x26\x26(_\x3dY0,Y0\x3dY1,Y1\x3d_);return graticule.precision(precision)};graticule.extentMinor\x3dfunction(_){if(!arguments.length)return[[x0,y0],[x1,y1]];x0\x3d+_[0][0];x1\x3d+_[1][0];y0\x3d+_[0][1];y1\x3d+_[1][1];x0\x3ex1\x26\x26(_\x3dx0,x0\x3dx1,x1\x3d_);y0\x3ey1\x26\x26(_\x3dy0,y0\x3dy1,y1\x3d_);return graticule.precision(precision)};graticule.step\x3dfunction(_){return arguments.length?graticule.stepMajor(_).stepMinor(_):\ngraticule.stepMinor()};graticule.stepMajor\x3dfunction(_){if(!arguments.length)return[DX,DY];DX\x3d+_[0];DY\x3d+_[1];return graticule};graticule.stepMinor\x3dfunction(_){if(!arguments.length)return[dx,dy];dx\x3d+_[0];dy\x3d+_[1];return graticule};graticule.precision\x3dfunction(_){if(!arguments.length)return precision;precision\x3d+_;x$jscomp$0\x3dgraticuleX(y0,y1,90);y$jscomp$0\x3dgraticuleY(x0,x1,precision);X\x3dgraticuleX(Y0,Y1,90);Y\x3dgraticuleY(X0,X1,precision);return graticule};return graticule.extentMajor([[-180,-89.999999],\n[180,89.999999]]).extentMinor([[-180,-80.000001],[180,80.000001]])}function identity(x){return x}function areaRingStart$1(){areaStream$1.point\x3dareaPointFirst$1}function areaPointFirst$1(x,y){areaStream$1.point\x3dareaPoint$1;x00$jscomp$0\x3dx0$1\x3dx;y00$jscomp$0\x3dy0$1\x3dy}function areaPoint$1(x,y){areaRingSum$1.add(y0$1*x-x0$1*y);x0$1\x3dx;y0$1\x3dy}function areaRingEnd$1(){areaPoint$1(x00$jscomp$0,y00$jscomp$0)}function centroidPoint$1(x,y){X0$1+\x3dx;Y0$1+\x3dy;++Z0$1}function centroidLineStart$1(){centroidStream$1.point\x3d\ncentroidPointFirstLine}function centroidPointFirstLine(x,y){centroidStream$1.point\x3dcentroidPointLine;centroidPoint$1(x0$3\x3dx,y0$3\x3dy)}function centroidPointLine(x,y){var dx\x3dx-x0$3,dy\x3dy-y0$3;dx\x3dsqrt(dx*dx+dy*dy);X1$1+\x3ddx*(x0$3+x)/2;Y1$1+\x3ddx*(y0$3+y)/2;Z1$1+\x3ddx;centroidPoint$1(x0$3\x3dx,y0$3\x3dy)}function centroidLineEnd$1(){centroidStream$1.point\x3dcentroidPoint$1}function centroidRingStart$1(){centroidStream$1.point\x3dcentroidPointFirstRing}function centroidRingEnd$1(){centroidPointRing(x00$1,y00$1)}function centroidPointFirstRing(x,\ny){centroidStream$1.point\x3dcentroidPointRing;centroidPoint$1(x00$1\x3dx0$3\x3dx,y00$1\x3dy0$3\x3dy)}function centroidPointRing(x,y){var dx\x3dx-x0$3,dy\x3dy-y0$3;dx\x3dsqrt(dx*dx+dy*dy);X1$1+\x3ddx*(x0$3+x)/2;Y1$1+\x3ddx*(y0$3+y)/2;Z1$1+\x3ddx;dx\x3dy0$3*x-x0$3*y;X2$1+\x3ddx*(x0$3+x);Y2$1+\x3ddx*(y0$3+y);Z2$1+\x3d3*dx;centroidPoint$1(x0$3\x3dx,y0$3\x3dy)}function PathContext(context){this._context\x3dcontext}function lengthPointFirst$1(x,y){lengthStream$1.point\x3dlengthPoint$1;x00$2\x3dx0$4\x3dx;y00$2\x3dy0$4\x3dy}function lengthPoint$1(x,y){x0$4-\x3dx;y0$4-\x3dy;lengthSum$1.add(sqrt(x0$4*\nx0$4+y0$4*y0$4));x0$4\x3dx;y0$4\x3dy}function PathString(){this._string\x3d[]}function circle$1(radius){return\x22m0,\x22+radius+\x22a\x22+radius+\x22,\x22+radius+\x22 0 1,1 0,\x22+-2*radius+\x22a\x22+radius+\x22,\x22+radius+\x22 0 1,1 0,\x22+2*radius+\x22z\x22}function transformer(methods){return function(stream){var s\x3dnew TransformStream,key;for(key in methods)s[key]\x3dmethods[key];s.stream\x3dstream;return s}}function TransformStream(){}function fit(projection,fitBounds,object){var clip\x3dprojection.clipExtent\x26\x26projection.clipExtent();projection.scale(150).translate([0,\n0]);null!\x3dclip\x26\x26projection.clipExtent(null);geoStream(object,projection.stream(boundsStream$1));fitBounds(boundsStream$1.result());null!\x3dclip\x26\x26projection.clipExtent(clip);return projection}function fitExtent(projection,extent,object){return fit(projection,function(b){var w\x3dextent[1][0]-extent[0][0],h\x3dextent[1][1]-extent[0][1],k\x3dMath.min(w/(b[1][0]-b[0][0]),h/(b[1][1]-b[0][1]));w\x3d+extent[0][0]+(w-k*(b[1][0]+b[0][0]))/2;b\x3d+extent[0][1]+(h-k*(b[1][1]+b[0][1]))/2;projection.scale(150*k).translate([w,\nb])},object)}function fitWidth(projection,width,object){return fit(projection,function(b){var w\x3d+width,k\x3dw/(b[1][0]-b[0][0]);w\x3d(w-k*(b[1][0]+b[0][0]))/2;b\x3d-k*b[0][1];projection.scale(150*k).translate([w,b])},object)}function fitHeight(projection,height,object){return fit(projection,function(b){var h\x3d+height,k\x3dh/(b[1][1]-b[0][1]),x\x3d-k*b[0][0];b\x3d(h-k*(b[1][1]+b[0][1]))/2;projection.scale(150*k).translate([x,b])},object)}function resampleNone(project){return transformer({point:function(x,y){x\x3dproject(x,\ny);this.stream.point(x[0],x[1])}})}function resample$1(project,delta2){function resampleLineTo(x0,y0,lambda0,a0,b0,c0,x1,y1,lambda1,a1,b1,c1,depth,stream){var dx\x3dx1-x0,dy\x3dy1-y0,d2\x3ddx*dx+dy*dy;if(d2\x3e4*delta2\x26\x26depth--){var a\x3da0+a1,b\x3db0+b1,c\x3dc0+c1,m\x3dsqrt(a*a+b*b+c*c),phi2\x3dasin(c/\x3dm),lambda2\x3d1E-6\x3eabs(abs(c)-1)||1E-6\x3eabs(lambda0-lambda1)?(lambda0+lambda1)/2:atan2(b,a),p\x3dproject(lambda2,phi2);phi2\x3dp[0];p\x3dp[1];var dx2\x3dphi2-x0,dy2\x3dp-y0,dz\x3ddy*dx2-dx*dy2;if(dz*dz/d2\x3edelta2||.3\x3cabs((dx*dx2+dy*dy2)/d2-.5)||a0*\na1+b0*b1+c0*c1\x3ccosMinDistance)resampleLineTo(x0,y0,lambda0,a0,b0,c0,phi2,p,lambda2,a/\x3dm,b/\x3dm,c,depth,stream),stream.point(phi2,p),resampleLineTo(phi2,p,lambda2,a,b,c,x1,y1,lambda1,a1,b1,c1,depth,stream)}}return function(stream){function point(x,y){x\x3dproject(x,y);stream.point(x[0],x[1])}function lineStart(){x0\x3dNaN;resampleStream.point\x3dlinePoint;stream.lineStart()}function linePoint(lambda,phi){var c\x3dcartesian$jscomp$0([lambda,phi]);phi\x3dproject(lambda,phi);resampleLineTo(x0,y0,lambda0,a0,b0,c0,x0\x3dphi[0],\ny0\x3dphi[1],lambda0\x3dlambda,a0\x3dc[0],b0\x3dc[1],c0\x3dc[2],16,stream);stream.point(x0,y0)}function lineEnd(){resampleStream.point\x3dpoint;stream.lineEnd()}function ringStart(){lineStart();resampleStream.point\x3dringPoint;resampleStream.lineEnd\x3dringEnd}function ringPoint(lambda,phi){linePoint(lambda00\x3dlambda,phi);x00\x3dx0;y00\x3dy0;a00\x3da0;b00\x3db0;c00\x3dc0;resampleStream.point\x3dlinePoint}function ringEnd(){resampleLineTo(x0,y0,lambda0,a0,b0,c0,x00,y00,lambda00,a00,b00,c00,16,stream);resampleStream.lineEnd\x3dlineEnd;lineEnd()}\nvar lambda00,x00,y00,a00,b00,c00,lambda0,x0,y0,a0,b0,c0,resampleStream\x3d{point:point,lineStart:lineStart,lineEnd:lineEnd,polygonStart:function(){stream.polygonStart();resampleStream.lineStart\x3dringStart},polygonEnd:function(){stream.polygonEnd();resampleStream.lineStart\x3dlineStart}};return resampleStream}}function transformRotate(rotate){return transformer({point:function(x,y){x\x3drotate(x,y);return this.stream.point(x[0],x[1])}})}function scaleTranslate(k,dx,dy,sx,sy){function transform(x,y){x*\x3dsx;y*\x3d\nsy;return[dx+k*x,dy-k*y]}transform.invert\x3dfunction(x,y){return[(x-dx)/k*sx,(dy-y)/k*sy]};return transform}function scaleTranslateRotate(k,dx,dy,sx,sy,alpha){function transform(x,y){x*\x3dsx;y*\x3dsy;return[a*x-b*y+dx,dy-b*x-a*y]}var cosAlpha\x3dcos(alpha);alpha\x3dsin(alpha);var a\x3dcosAlpha*k,b\x3dalpha*k,ai\x3dcosAlpha/k,bi\x3dalpha/k,ci\x3d(alpha*dy-cosAlpha*dx)/k,fi\x3d(alpha*dx+cosAlpha*dy)/k;transform.invert\x3dfunction(x,y){return[sx*(ai*x-bi*y+ci),sy*(fi-bi*x-ai*y)]};return transform}function projection$jscomp$0(project){return projectionMutator(function(){return project})()}\nfunction projectionMutator(projectAt){function projection(point){return projectRotateTransform(point[0]*radians,point[1]*radians)}function invert(point){return(point\x3dprojectRotateTransform.invert(point[0],point[1]))\x26\x26[point[0]*degrees,point[1]*degrees]}function recenter(){var center\x3dscaleTranslateRotate(k,0,0,sx,sy,alpha).apply(null,project(lambda,phi));center\x3d(alpha?scaleTranslateRotate:scaleTranslate)(k,x-center[0],y-center[1],sx,sy,alpha);rotate\x3drotateRadians(deltaLambda,deltaPhi,deltaGamma);projectTransform\x3d\ncompose(project,center);projectRotateTransform\x3dcompose(rotate,projectTransform);center\x3dprojectTransform;projectResample\x3d+delta2$jscomp$0?resample$1(center,delta2$jscomp$0):resampleNone(center);return reset()}function reset(){cache\x3dcacheStream\x3dnull;return projection}var project,k\x3d150,x\x3d480,y\x3d250,lambda\x3d0,phi\x3d0,deltaLambda\x3d0,deltaPhi\x3d0,deltaGamma\x3d0,rotate,alpha\x3d0,sx\x3d1,sy\x3d1,theta\x3dnull,preclip\x3dclipAntimeridian,x0\x3dnull,y0,x1,y1,postclip\x3didentity,delta2$jscomp$0\x3d.5,projectResample,projectTransform,projectRotateTransform,\ncache,cacheStream;projection.stream\x3dfunction(stream){return cache\x26\x26cacheStream\x3d\x3d\x3dstream?cache:cache\x3dtransformRadians(transformRotate(rotate)(preclip(projectResample(postclip(cacheStream\x3dstream)))))};projection.preclip\x3dfunction(_){return arguments.length?(preclip\x3d_,theta\x3dvoid 0,reset()):preclip};projection.postclip\x3dfunction(_){return arguments.length?(postclip\x3d_,x0\x3dy0\x3dx1\x3dy1\x3dnull,reset()):postclip};projection.clipAngle\x3dfunction(_){return arguments.length?(preclip\x3d+_?clipCircle(theta\x3d_*radians):(theta\x3d\nnull,clipAntimeridian),reset()):theta*degrees};projection.clipExtent\x3dfunction(_){return arguments.length?(postclip\x3dnull\x3d\x3d_?(x0\x3dy0\x3dx1\x3dy1\x3dnull,identity):clipRectangle(x0\x3d+_[0][0],y0\x3d+_[0][1],x1\x3d+_[1][0],y1\x3d+_[1][1]),reset()):null\x3d\x3dx0?null:[[x0,y0],[x1,y1]]};projection.scale\x3dfunction(_){return arguments.length?(k\x3d+_,recenter()):k};projection.translate\x3dfunction(_){return arguments.length?(x\x3d+_[0],y\x3d+_[1],recenter()):[x,y]};projection.center\x3dfunction(_){return arguments.length?(lambda\x3d_[0]%360*radians,\nphi\x3d_[1]%360*radians,recenter()):[lambda*degrees,phi*degrees]};projection.rotate\x3dfunction(_){return arguments.length?(deltaLambda\x3d_[0]%360*radians,deltaPhi\x3d_[1]%360*radians,deltaGamma\x3d2\x3c_.length?_[2]%360*radians:0,recenter()):[deltaLambda*degrees,deltaPhi*degrees,deltaGamma*degrees]};projection.angle\x3dfunction(_){return arguments.length?(alpha\x3d_%360*radians,recenter()):alpha*degrees};projection.reflectX\x3dfunction(_){return arguments.length?(sx\x3d_?-1:1,recenter()):0\x3esx};projection.reflectY\x3dfunction(_){return arguments.length?\n(sy\x3d_?-1:1,recenter()):0\x3esy};projection.precision\x3dfunction(_){if(arguments.length){var JSCompiler_temp\x3dprojectTransform;var delta2\x3ddelta2$jscomp$0\x3d_*_;JSCompiler_temp\x3d(projectResample\x3d+delta2?resample$1(JSCompiler_temp,delta2):resampleNone(JSCompiler_temp),reset())}else JSCompiler_temp\x3dsqrt(delta2$jscomp$0);return JSCompiler_temp};projection.fitExtent\x3dfunction(extent,object){return fitExtent(projection,extent,object)};projection.fitSize\x3dfunction(size,object){return fitExtent(projection,[[0,0],size],\nobject)};projection.fitWidth\x3dfunction(width,object){return fitWidth(projection,width,object)};projection.fitHeight\x3dfunction(height,object){return fitHeight(projection,height,object)};return function(){project\x3dprojectAt.apply(this,arguments);projection.invert\x3dproject.invert\x26\x26invert;return recenter()}}function conicProjection(projectAt){var phi0\x3d0,phi1\x3dpi/3,m\x3dprojectionMutator(projectAt);projectAt\x3dm(phi0,phi1);projectAt.parallels\x3dfunction(_){return arguments.length?m(phi0\x3d_[0]*radians,phi1\x3d_[1]*radians):\n[phi0*degrees,phi1*degrees]};return projectAt}function cylindricalEqualAreaRaw(phi0){function forward(lambda,phi){return[lambda*cosPhi0,sin(phi)/cosPhi0]}var cosPhi0\x3dcos(phi0);forward.invert\x3dfunction(x,y){return[x/cosPhi0,asin(y*cosPhi0)]};return forward}function conicEqualAreaRaw(y0,y1){function project(x,y){y\x3dsqrt(c-2*n*sin(y))/n;return[y*sin(x*\x3dn),r0-y*cos(x)]}var sy0\x3dsin(y0),n\x3d(sy0+sin(y1))/2;if(1E-6\x3eabs(n))return cylindricalEqualAreaRaw(y0);var c\x3d1+sy0*(2*n-sy0),r0\x3dsqrt(c)/n;project.invert\x3dfunction(x,\ny){y\x3dr0-y;var l\x3datan2(x,abs(y))*sign$jscomp$0(y);0\x3ey*n\x26\x26(l-\x3dpi*sign$jscomp$0(x)*sign$jscomp$0(y));return[l/n,asin((c-(x*x+y*y)*n*n)/(2*n))]};return project}function conicEqualArea(){return conicProjection(conicEqualAreaRaw).scale(155.424).center([0,33.6442])}function albers(){return conicEqualArea().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function multiplex(streams){var n\x3dstreams.length;return{point:function(x,y){for(var i\x3d-1;++i\x3cn;)streams[i].point(x,\ny)},sphere:function(){for(var i\x3d-1;++i\x3cn;)streams[i].sphere()},lineStart:function(){for(var i\x3d-1;++i\x3cn;)streams[i].lineStart()},lineEnd:function(){for(var i\x3d-1;++i\x3cn;)streams[i].lineEnd()},polygonStart:function(){for(var i\x3d-1;++i\x3cn;)streams[i].polygonStart()},polygonEnd:function(){for(var i\x3d-1;++i\x3cn;)streams[i].polygonEnd()}}}function azimuthalRaw(scale){return function(x,y){var cx\x3dcos(x),cy\x3dcos(y);cx\x3dscale(cx*cy);return[cx*cy*sin(x),cx*sin(y)]}}function azimuthalInvert(angle){return function(x,y){var z\x3d\nsqrt(x*x+y*y),c\x3dangle(z),sc\x3dsin(c);c\x3dcos(c);return[atan2(x*sc,z*c),asin(z\x26\x26y*sc/z)]}}function mercatorRaw(lambda,phi){return[lambda,log(tan((halfPi+phi)/2))]}function mercatorProjection(project){function reclip(){var k\x3dpi*scale(),t\x3dm(rotation$jscomp$0(m.rotate()).invert([0,0]));return clipExtent(null\x3d\x3dx0?[[t[0]-k,t[1]-k],[t[0]+k,t[1]+k]]:project\x3d\x3d\x3dmercatorRaw?[[Math.max(t[0]-k,x0),y0],[Math.min(t[0]+k,x1),y1]]:[[x0,Math.max(t[1]-k,y0)],[x1,Math.min(t[1]+k,y1)]])}var m\x3dprojection$jscomp$0(project),\ncenter\x3dm.center,scale\x3dm.scale,translate\x3dm.translate,clipExtent\x3dm.clipExtent,x0\x3dnull,y0,x1,y1;m.scale\x3dfunction(_){return arguments.length?(scale(_),reclip()):scale()};m.translate\x3dfunction(_){return arguments.length?(translate(_),reclip()):translate()};m.center\x3dfunction(_){return arguments.length?(center(_),reclip()):center()};m.clipExtent\x3dfunction(_){return arguments.length?(null\x3d\x3d_?x0\x3dy0\x3dx1\x3dy1\x3dnull:(x0\x3d+_[0][0],y0\x3d+_[0][1],x1\x3d+_[1][0],y1\x3d+_[1][1]),reclip()):null\x3d\x3dx0?null:[[x0,y0],[x1,y1]]};return reclip()}\nfunction conicConformalRaw(y0,y1){function project(x,y){0\x3cf?y\x3c-halfPi+1E-6\x26\x26(y\x3d-halfPi+1E-6):y\x3ehalfPi-1E-6\x26\x26(y\x3dhalfPi-1E-6);y\x3df/pow(tan((halfPi+y)/2),n);return[y*sin(n*x),f-y*cos(n*x)]}var cy0\x3dcos(y0),n\x3dy0\x3d\x3d\x3dy1?sin(y0):log(cy0/cos(y1))/log(tan((halfPi+y1)/2)/tan((halfPi+y0)/2)),f\x3dcy0*pow(tan((halfPi+y0)/2),n)/n;if(!n)return mercatorRaw;project.invert\x3dfunction(x,y){y\x3df-y;var r\x3dsign$jscomp$0(n)*sqrt(x*x+y*y),l\x3datan2(x,abs(y))*sign$jscomp$0(y);0\x3ey*n\x26\x26(l-\x3dpi*sign$jscomp$0(x)*sign$jscomp$0(y));return[l/\nn,2*atan(pow(f/r,1/n))-halfPi]};return project}function equirectangularRaw(lambda,phi){return[lambda,phi]}function conicEquidistantRaw(y0,y1){function project(x,y){y\x3dg-y;x*\x3dn;return[y*sin(x),g-y*cos(x)]}var cy0\x3dcos(y0),n\x3dy0\x3d\x3d\x3dy1?sin(y0):(cy0-cos(y1))/(y1-y0),g\x3dcy0/n+y0;if(1E-6\x3eabs(n))return equirectangularRaw;project.invert\x3dfunction(x,y){y\x3dg-y;var l\x3datan2(x,abs(y))*sign$jscomp$0(y);0\x3ey*n\x26\x26(l-\x3dpi*sign$jscomp$0(x)*sign$jscomp$0(y));return[l/n,g-sign$jscomp$0(n)*sqrt(x*x+y*y)]};return project}function equalEarthRaw(lambda,\nphi){phi\x3dasin(M*sin(phi));var l2\x3dphi*phi,l6\x3dl2*l2*l2;return[lambda*cos(phi)/(M*(1.340264+3*-.081106*l2+l6*(7*8.93E-4+.034164*l2))),phi*(1.340264+-.081106*l2+l6*(8.93E-4+.003796*l2))]}function gnomonicRaw(x,y){var cy\x3dcos(y),k\x3dcos(x)*cy;return[cy*sin(x)/k,sin(y)/k]}function naturalEarth1Raw(lambda,phi){var phi2\x3dphi*phi,phi4\x3dphi2*phi2;return[lambda*(.8707-.131979*phi2+phi4*(-.013791+phi4*(.003971*phi2-.001529*phi4))),phi*(1.007226+phi2*(.015085+phi4*(-.044475+.028874*phi2-.005916*phi4)))]}function orthographicRaw(x,\ny){return[cos(y)*sin(x),sin(y)]}function stereographicRaw(x,y){var cy\x3dcos(y),k\x3d1+cos(x)*cy;return[cy*sin(x)/k,sin(y)/k]}function transverseMercatorRaw(lambda,phi){return[log(tan((halfPi+phi)/2)),-lambda]}Adder.prototype\x3d{constructor:Adder,reset:function(){this.s\x3dthis.t\x3d0},add:function(y){add(temp,y,this.t);add(this,temp.s,this.s);this.s?this.t+\x3dtemp.t:this.s\x3dtemp.t},valueOf:function(){return this.s}};var temp\x3dnew Adder,pi\x3dMath.PI,halfPi\x3dpi/2,quarterPi\x3dpi/4,tau\x3d2*pi,degrees\x3d180/pi,radians\x3dpi/180,abs\x3d\nMath.abs,atan\x3dMath.atan,atan2\x3dMath.atan2,cos\x3dMath.cos,ceil\x3dMath.ceil,exp\x3dMath.exp,log\x3dMath.log,pow\x3dMath.pow,sin\x3dMath.sin,sign$jscomp$0\x3dMath.sign||function(x){return 0\x3cx?1:0\x3ex?-1:0},sqrt\x3dMath.sqrt,tan\x3dMath.tan,streamObjectType\x3d{Feature:function(object,stream){streamGeometry(object.geometry,stream)},FeatureCollection:function(object,stream){object\x3dobject.features;for(var i\x3d-1,n\x3dobject.length;++i\x3cn;)streamGeometry(object[i].geometry,stream)}},streamGeometryType\x3d{Sphere:function(object,stream){stream.sphere()},\nPoint:function(object,stream){object\x3dobject.coordinates;stream.point(object[0],object[1],object[2])},MultiPoint:function(object,stream){for(var coordinates\x3dobject.coordinates,i\x3d-1,n\x3dcoordinates.length;++i\x3cn;)object\x3dcoordinates[i],stream.point(object[0],object[1],object[2])},LineString:function(object,stream){streamLine(object.coordinates,stream,0)},MultiLineString:function(object,stream){object\x3dobject.coordinates;for(var i\x3d-1,n\x3dobject.length;++i\x3cn;)streamLine(object[i],stream,0)},Polygon:function(object,\nstream){streamPolygon(object.coordinates,stream)},MultiPolygon:function(object,stream){object\x3dobject.coordinates;for(var i\x3d-1,n\x3dobject.length;++i\x3cn;)streamPolygon(object[i],stream)},GeometryCollection:function(object,stream){object\x3dobject.geometries;for(var i\x3d-1,n\x3dobject.length;++i\x3cn;)streamGeometry(object[i],stream)}},areaRingSum\x3dnew Adder,areaSum\x3dnew Adder,lambda00,phi00,lambda0,cosPhi0,sinPhi0,areaStream\x3d{point:noop,lineStart:noop,lineEnd:noop,polygonStart:function(){areaRingSum.reset();areaStream.lineStart\x3d\nareaRingStart;areaStream.lineEnd\x3dareaRingEnd},polygonEnd:function(){var areaRing\x3d+areaRingSum;areaSum.add(0\x3eareaRing?tau+areaRing:areaRing);this.lineStart\x3dthis.lineEnd\x3dthis.point\x3dnoop},sphere:function(){areaSum.add(tau)}},lambda0$1,phi0,lambda1,phi1$jscomp$0,lambda2$jscomp$0,lambda00$1,phi00$1,p0$jscomp$0,deltaSum\x3dnew Adder,ranges,range$jscomp$0,boundsStream\x3d{point:boundsPoint,lineStart:boundsLineStart,lineEnd:boundsLineEnd,polygonStart:function(){boundsStream.point\x3dboundsRingPoint;boundsStream.lineStart\x3d\nboundsRingStart;boundsStream.lineEnd\x3dboundsRingEnd;deltaSum.reset();areaStream.polygonStart()},polygonEnd:function(){areaStream.polygonEnd();boundsStream.point\x3dboundsPoint;boundsStream.lineStart\x3dboundsLineStart;boundsStream.lineEnd\x3dboundsLineEnd;0\x3eareaRingSum?(lambda0$1\x3d-(lambda1\x3d180),phi0\x3d-(phi1$jscomp$0\x3d90)):1E-6\x3cdeltaSum?phi1$jscomp$0\x3d90:-1E-6\x3edeltaSum\x26\x26(phi0\x3d-90);range$jscomp$0[0]\x3dlambda0$1;range$jscomp$0[1]\x3dlambda1},sphere:function(){lambda0$1\x3d-(lambda1\x3d180);phi0\x3d-(phi1$jscomp$0\x3d90)}},W0,W1,\nX0,Y0,Z0,X1,Y1,Z1,X2,Y2,Z2,lambda00$2,phi00$2,x0$jscomp$0,y0$jscomp$0,z0,centroidStream\x3d{sphere:noop,point:centroidPoint,lineStart:centroidLineStart,lineEnd:centroidLineEnd,polygonStart:function(){centroidStream.lineStart\x3dcentroidRingStart;centroidStream.lineEnd\x3dcentroidRingEnd},polygonEnd:function(){centroidStream.lineStart\x3dcentroidLineStart;centroidStream.lineEnd\x3dcentroidLineEnd}};rotationIdentity.invert\x3drotationIdentity;var sum\x3dnew Adder,clipAntimeridian\x3dclip$jscomp$0(function(){return!0},function(stream){var lambda0\x3d\nNaN,phi0$jscomp$0\x3dNaN,sign0\x3dNaN,clean;return{lineStart:function(){stream.lineStart();clean\x3d1},point:function(lambda1$jscomp$0,phi1){var sign1\x3d0\x3clambda1$jscomp$0?pi:-pi,delta\x3dabs(lambda1$jscomp$0-lambda0);if(1E-6\x3eabs(delta-pi))stream.point(lambda0,phi0$jscomp$0\x3d0\x3c(phi0$jscomp$0+phi1)/2?halfPi:-halfPi),stream.point(sign0,phi0$jscomp$0),stream.lineEnd(),stream.lineStart(),stream.point(sign1,phi0$jscomp$0),stream.point(lambda1$jscomp$0,phi0$jscomp$0),clean\x3d0;else if(sign0!\x3d\x3dsign1\x26\x26delta\x3e\x3dpi){1E-6\x3eabs(lambda0-\nsign0)\x26\x26(lambda0-\x3d1E-6*sign0);1E-6\x3eabs(lambda1$jscomp$0-sign1)\x26\x26(lambda1$jscomp$0-\x3d1E-6*sign1);delta\x3dlambda0;var phi0\x3dphi0$jscomp$0,lambda1\x3dlambda1$jscomp$0,cosPhi0,cosPhi1,sinLambda0Lambda1\x3dsin(delta-lambda1);phi0$jscomp$0\x3d1E-6\x3cabs(sinLambda0Lambda1)?atan((sin(phi0)*(cosPhi1\x3dcos(phi1))*sin(lambda1)-sin(phi1)*(cosPhi0\x3dcos(phi0))*sin(delta))/(cosPhi0*cosPhi1*sinLambda0Lambda1)):(phi0+phi1)/2;stream.point(sign0,phi0$jscomp$0);stream.lineEnd();stream.lineStart();stream.point(sign1,phi0$jscomp$0);clean\x3d\n0}stream.point(lambda0\x3dlambda1$jscomp$0,phi0$jscomp$0\x3dphi1);sign0\x3dsign1},lineEnd:function(){stream.lineEnd();lambda0\x3dphi0$jscomp$0\x3dNaN},clean:function(){return 2-clean}}},function(from,to,direction,stream){null\x3d\x3dfrom?(direction*\x3dhalfPi,stream.point(-pi,direction),stream.point(0,direction),stream.point(pi,direction),stream.point(pi,0),stream.point(pi,-direction),stream.point(0,-direction),stream.point(-pi,-direction),stream.point(-pi,0),stream.point(-pi,direction)):1E-6\x3cabs(from[0]-to[0])?(from\x3dfrom[0]\x3c\nto[0]?pi:-pi,direction\x3ddirection*from/2,stream.point(-from,direction),stream.point(0,direction),stream.point(from,direction)):stream.point(to[0],to[1])},[-pi,-halfPi]),lengthSum\x3dnew Adder,lambda0$2,sinPhi0$1,cosPhi0$1,lengthStream\x3d{sphere:noop,point:noop,lineStart:function(){lengthStream.point\x3dlengthPointFirst;lengthStream.lineEnd\x3dlengthLineEnd},lineEnd:noop,polygonStart:noop,polygonEnd:noop},coordinates$jscomp$0\x3d[null,null],object$jscomp$0\x3d{type:\x22LineString\x22,coordinates:coordinates$jscomp$0},containsObjectType\x3d\n{Feature:function(object,point){return containsGeometry(object.geometry,point)},FeatureCollection:function(object,point){object\x3dobject.features;for(var i\x3d-1,n\x3dobject.length;++i\x3cn;)if(containsGeometry(object[i].geometry,point))return!0;return!1}},containsGeometryType\x3d{Sphere:function(){return!0},Point:function(object,point){return 0\x3d\x3d\x3ddistance(object.coordinates,point)},MultiPoint:function(object,point){object\x3dobject.coordinates;for(var i\x3d-1,n\x3dobject.length;++i\x3cn;)if(0\x3d\x3d\x3ddistance(object[i],point))return!0;\nreturn!1},LineString:function(object,point){return containsLine(object.coordinates,point)},MultiLineString:function(object,point){object\x3dobject.coordinates;for(var i\x3d-1,n\x3dobject.length;++i\x3cn;)if(containsLine(object[i],point))return!0;return!1},Polygon:function(object,point){return containsPolygon(object.coordinates,point)},MultiPolygon:function(object,point){object\x3dobject.coordinates;for(var i\x3d-1,n\x3dobject.length;++i\x3cn;)if(containsPolygon(object[i],point))return!0;return!1},GeometryCollection:function(object,\npoint){object\x3dobject.geometries;for(var i\x3d-1,n\x3dobject.length;++i\x3cn;)if(containsGeometry(object[i],point))return!0;return!1}},areaSum$1\x3dnew Adder,areaRingSum$1\x3dnew Adder,x00$jscomp$0,y00$jscomp$0,x0$1,y0$1,areaStream$1\x3d{point:noop,lineStart:noop,lineEnd:noop,polygonStart:function(){areaStream$1.lineStart\x3dareaRingStart$1;areaStream$1.lineEnd\x3dareaRingEnd$1},polygonEnd:function(){areaStream$1.lineStart\x3dareaStream$1.lineEnd\x3dareaStream$1.point\x3dnoop;areaSum$1.add(abs(areaRingSum$1));areaRingSum$1.reset()},\nresult:function(){var area\x3dareaSum$1/2;areaSum$1.reset();return area}},x0$2\x3dInfinity,y0$2\x3dx0$2,x1$jscomp$0\x3d-x0$2,y1$jscomp$0\x3dx1$jscomp$0,boundsStream$1\x3d{point:function(x,y){x\x3cx0$2\x26\x26(x0$2\x3dx);x\x3ex1$jscomp$0\x26\x26(x1$jscomp$0\x3dx);y\x3cy0$2\x26\x26(y0$2\x3dy);y\x3ey1$jscomp$0\x26\x26(y1$jscomp$0\x3dy)},lineStart:noop,lineEnd:noop,polygonStart:noop,polygonEnd:noop,result:function(){var bounds\x3d[[x0$2,y0$2],[x1$jscomp$0,y1$jscomp$0]];x1$jscomp$0\x3dy1$jscomp$0\x3d-(y0$2\x3dx0$2\x3dInfinity);return bounds}},X0$1\x3d0,Y0$1\x3d0,Z0$1\x3d0,X1$1\x3d0,Y1$1\x3d0,Z1$1\x3d\n0,X2$1\x3d0,Y2$1\x3d0,Z2$1\x3d0,x00$1,y00$1,x0$3,y0$3,centroidStream$1\x3d{point:centroidPoint$1,lineStart:centroidLineStart$1,lineEnd:centroidLineEnd$1,polygonStart:function(){centroidStream$1.lineStart\x3dcentroidRingStart$1;centroidStream$1.lineEnd\x3dcentroidRingEnd$1},polygonEnd:function(){centroidStream$1.point\x3dcentroidPoint$1;centroidStream$1.lineStart\x3dcentroidLineStart$1;centroidStream$1.lineEnd\x3dcentroidLineEnd$1},result:function(){var centroid\x3dZ2$1?[X2$1/Z2$1,Y2$1/Z2$1]:Z1$1?[X1$1/Z1$1,Y1$1/Z1$1]:Z0$1?[X0$1/\nZ0$1,Y0$1/Z0$1]:[NaN,NaN];X0$1\x3dY0$1\x3dZ0$1\x3dX1$1\x3dY1$1\x3dZ1$1\x3dX2$1\x3dY2$1\x3dZ2$1\x3d0;return centroid}};PathContext.prototype\x3d{_radius:4.5,pointRadius:function(_){return this._radius\x3d_,this},polygonStart:function(){this._line\x3d0},polygonEnd:function(){this._line\x3dNaN},lineStart:function(){this._point\x3d0},lineEnd:function(){0\x3d\x3d\x3dthis._line\x26\x26this._context.closePath();this._point\x3dNaN},point:function(x,y){switch(this._point){case 0:this._context.moveTo(x,y);this._point\x3d1;break;case 1:this._context.lineTo(x,y);break;default:this._context.moveTo(x+\nthis._radius,y),this._context.arc(x,y,this._radius,0,tau)}},result:noop};var lengthSum$1\x3dnew Adder,lengthRing,x00$2,y00$2,x0$4,y0$4,lengthStream$1\x3d{point:noop,lineStart:function(){lengthStream$1.point\x3dlengthPointFirst$1},lineEnd:function(){lengthRing\x26\x26lengthPoint$1(x00$2,y00$2);lengthStream$1.point\x3dnoop},polygonStart:function(){lengthRing\x3d!0},polygonEnd:function(){lengthRing\x3dnull},result:function(){var length\x3d+lengthSum$1;lengthSum$1.reset();return length}};PathString.prototype\x3d{_radius:4.5,_circle:circle$1(4.5),\npointRadius:function(_){(_\x3d+_)!\x3d\x3dthis._radius\x26\x26(this._radius\x3d_,this._circle\x3dnull);return this},polygonStart:function(){this._line\x3d0},polygonEnd:function(){this._line\x3dNaN},lineStart:function(){this._point\x3d0},lineEnd:function(){0\x3d\x3d\x3dthis._line\x26\x26this._string.push(\x22Z\x22);this._point\x3dNaN},point:function(x,y){switch(this._point){case 0:this._string.push(\x22M\x22,x,\x22,\x22,y);this._point\x3d1;break;case 1:this._string.push(\x22L\x22,x,\x22,\x22,y);break;default:null\x3d\x3dthis._circle\x26\x26(this._circle\x3dcircle$1(this._radius)),this._string.push(\x22M\x22,\nx,\x22,\x22,y,this._circle)}},result:function(){if(this._string.length){var result\x3dthis._string.join(\x22\x22);this._string\x3d[];return result}return null}};TransformStream.prototype\x3d{constructor:TransformStream,point:function(x,y){this.stream.point(x,y)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};var cosMinDistance\x3dcos(30*radians),\ntransformRadians\x3dtransformer({point:function(x,y){this.stream.point(x*radians,y*radians)}}),azimuthalEqualAreaRaw\x3dazimuthalRaw(function(cxcy){return sqrt(2/(1+cxcy))});azimuthalEqualAreaRaw.invert\x3dazimuthalInvert(function(z){return 2*asin(z/2)});var azimuthalEquidistantRaw\x3dazimuthalRaw(function(c){return(c\x3dacos(c))\x26\x26c/sin(c)});azimuthalEquidistantRaw.invert\x3dazimuthalInvert(function(z){return z});mercatorRaw.invert\x3dfunction(x,y){return[x,2*atan(exp(y))-halfPi]};equirectangularRaw.invert\x3dequirectangularRaw;\nvar M\x3dsqrt(3)/2;equalEarthRaw.invert\x3dfunction(x,y){for(var l\x3dy,l2\x3dl*l,l6\x3dl2*l2*l2,i\x3d0,delta;12\x3ei\x26\x26!(delta\x3dl*(1.340264+-.081106*l2+l6*(8.93E-4+.003796*l2))-y,l2\x3d1.340264+3*-.081106*l2+l6*(7*8.93E-4+.034164*l2),l-\x3ddelta/\x3dl2,l2\x3dl*l,l6\x3dl2*l2*l2,1E-12\x3eabs(delta));++i);return[M*x*(1.340264+3*-.081106*l2+l6*(7*8.93E-4+.034164*l2))/cos(l),asin(sin(l)/M)]};gnomonicRaw.invert\x3dazimuthalInvert(atan);naturalEarth1Raw.invert\x3dfunction(x,y){var phi\x3dy,i\x3d25;do{var phi2\x3dphi*phi;var delta\x3dphi2*phi2;phi-\x3ddelta\x3d(phi*(1.007226+\nphi2*(.015085+delta*(-.044475+.028874*phi2-.005916*delta)))-y)/(1.007226+phi2*(.045255+delta*(-.311325+.259866*phi2-.005916*11*delta)))}while(1E-6\x3cabs(delta)\x26\x260\x3c--i);return[x/(.8707+(phi2\x3dphi*phi)*(-.131979+phi2*(-.013791+phi2*phi2*phi2*(.003971-.001529*phi2)))),phi]};orthographicRaw.invert\x3dazimuthalInvert(asin);stereographicRaw.invert\x3dazimuthalInvert(function(z){return 2*atan(z)});transverseMercatorRaw.invert\x3dfunction(x,y){return[-y,2*atan(exp(x))-halfPi]};exports.geoAlbers\x3dalbers;exports.geoAlbersUsa\x3d\nfunction(){function albersUsa(coordinates){var x\x3dcoordinates[0];coordinates\x3dcoordinates[1];return point\x3dnull,(lower48Point.point(x,coordinates),point)||(alaskaPoint.point(x,coordinates),point)||(hawaiiPoint.point(x,coordinates),point)}function reset(){cache\x3dcacheStream\x3dnull;return albersUsa}var cache,cacheStream,lower48\x3dalbers(),lower48Point,alaska\x3dconicEqualArea().rotate([154,0]).center([-2,58.5]).parallels([55,65]),alaskaPoint,hawaii\x3dconicEqualArea().rotate([157,0]).center([-3,19.9]).parallels([8,\n18]),hawaiiPoint,point,pointStream\x3d{point:function(x,y){point\x3d[x,y]}};albersUsa.invert\x3dfunction(coordinates){var k\x3dlower48.scale(),t\x3dlower48.translate(),x\x3d(coordinates[0]-t[0])/k;k\x3d(coordinates[1]-t[1])/k;return(.12\x3c\x3dk\x26\x26.234\x3ek\x26\x26-.425\x3c\x3dx\x26\x26-.214\x3ex?alaska:.166\x3c\x3dk\x26\x26.234\x3ek\x26\x26-.214\x3c\x3dx\x26\x26-.115\x3ex?hawaii:lower48).invert(coordinates)};albersUsa.stream\x3dfunction(stream){return cache\x26\x26cacheStream\x3d\x3d\x3dstream?cache:cache\x3dmultiplex([lower48.stream(cacheStream\x3dstream),alaska.stream(stream),hawaii.stream(stream)])};albersUsa.precision\x3d\nfunction(_){if(!arguments.length)return lower48.precision();lower48.precision(_);alaska.precision(_);hawaii.precision(_);return reset()};albersUsa.scale\x3dfunction(_){if(!arguments.length)return lower48.scale();lower48.scale(_);alaska.scale(.35*_);hawaii.scale(_);return albersUsa.translate(lower48.translate())};albersUsa.translate\x3dfunction(_){if(!arguments.length)return lower48.translate();var k\x3dlower48.scale(),x\x3d+_[0],y\x3d+_[1];lower48Point\x3dlower48.translate(_).clipExtent([[x-.455*k,y-.238*k],[x+.455*\nk,y+.238*k]]).stream(pointStream);alaskaPoint\x3dalaska.translate([x-.307*k,y+.201*k]).clipExtent([[x-.425*k+1E-6,y+.12*k+1E-6],[x-.214*k-1E-6,y+.234*k-1E-6]]).stream(pointStream);hawaiiPoint\x3dhawaii.translate([x-.205*k,y+.212*k]).clipExtent([[x-.214*k+1E-6,y+.166*k+1E-6],[x-.115*k-1E-6,y+.234*k-1E-6]]).stream(pointStream);return reset()};albersUsa.fitExtent\x3dfunction(extent,object){return fitExtent(albersUsa,extent,object)};albersUsa.fitSize\x3dfunction(size,object){return fitExtent(albersUsa,[[0,0],size],\nobject)};albersUsa.fitWidth\x3dfunction(width,object){return fitWidth(albersUsa,width,object)};albersUsa.fitHeight\x3dfunction(height,object){return fitHeight(albersUsa,height,object)};return albersUsa.scale(1070)};exports.geoArea\x3dfunction(object){areaSum.reset();geoStream(object,areaStream);return 2*areaSum};exports.geoAzimuthalEqualArea\x3dfunction(){return projection$jscomp$0(azimuthalEqualAreaRaw).scale(124.75).clipAngle(179.999)};exports.geoAzimuthalEqualAreaRaw\x3dazimuthalEqualAreaRaw;exports.geoAzimuthalEquidistant\x3d\nfunction(){return projection$jscomp$0(azimuthalEquidistantRaw).scale(79.4188).clipAngle(179.999)};exports.geoAzimuthalEquidistantRaw\x3dazimuthalEquidistantRaw;exports.geoBounds\x3dfunction(feature){var n,merged,delta;phi1$jscomp$0\x3dlambda1\x3d-(lambda0$1\x3dphi0\x3dInfinity);ranges\x3d[];geoStream(feature,boundsStream);if(n\x3dranges.length){ranges.sort(rangeCompare);feature\x3d1;var a\x3dranges[0];for(merged\x3d[a];feature\x3cn;++feature){var b\x3dranges[feature];rangeContains(a,b[0])||rangeContains(a,b[1])?(angle$jscomp$0(a[0],b[1])\x3e\nangle$jscomp$0(a[0],a[1])\x26\x26(a[1]\x3db[1]),angle$jscomp$0(b[0],a[1])\x3eangle$jscomp$0(a[0],a[1])\x26\x26(a[0]\x3db[0])):merged.push(a\x3db)}var deltaMax\x3d-Infinity;n\x3dmerged.length-1;feature\x3d0;for(a\x3dmerged[n];feature\x3c\x3dn;a\x3db,++feature)b\x3dmerged[feature],(delta\x3dangle$jscomp$0(a[1],b[0]))\x3edeltaMax\x26\x26(deltaMax\x3ddelta,lambda0$1\x3db[0],lambda1\x3da[1])}ranges\x3drange$jscomp$0\x3dnull;return Infinity\x3d\x3d\x3dlambda0$1||Infinity\x3d\x3d\x3dphi0?[[NaN,NaN],[NaN,NaN]]:[[lambda0$1,phi0],[lambda1,phi1$jscomp$0]]};exports.geoCentroid\x3dfunction(object){W0\x3dW1\x3d\nX0\x3dY0\x3dZ0\x3dX1\x3dY1\x3dZ1\x3dX2\x3dY2\x3dZ2\x3d0;geoStream(object,centroidStream);object\x3dX2;var y\x3dY2,z\x3dZ2,m\x3dobject*object+y*y+z*z;return 1E-12\x3em\x26\x26(object\x3dX1,y\x3dY1,z\x3dZ1,1E-6\x3eW1\x26\x26(object\x3dX0,y\x3dY0,z\x3dZ0),m\x3dobject*object+y*y+z*z,1E-12\x3em)?[NaN,NaN]:[atan2(y,object)*degrees,asin(z/sqrt(m))*degrees]};exports.geoCircle\x3dfunction(){function circle(){var c\x3dcenter.apply(this,arguments),r\x3dradius.apply(this,arguments)*radians,p\x3dprecision.apply(this,arguments)*radians;ring\x3d[];rotate\x3drotateRadians(-c[0]*radians,-c[1]*radians,0).invert;\ncircleStream(stream,r,p,1);c\x3d{type:\x22Polygon\x22,coordinates:[ring]};ring\x3drotate\x3dnull;return c}var center\x3dconstant([0,0]),radius\x3dconstant(90),precision\x3dconstant(6),ring,rotate,stream\x3d{point:function(x,y){ring.push(x\x3drotate(x,y));x[0]*\x3ddegrees;x[1]*\x3ddegrees}};circle.center\x3dfunction(_){return arguments.length?(center\x3d\x22function\x22\x3d\x3d\x3dtypeof _?_:constant([+_[0],+_[1]]),circle):center};circle.radius\x3dfunction(_){return arguments.length?(radius\x3d\x22function\x22\x3d\x3d\x3dtypeof _?_:constant(+_),circle):radius};circle.precision\x3d\nfunction(_){return arguments.length?(precision\x3d\x22function\x22\x3d\x3d\x3dtypeof _?_:constant(+_),circle):precision};return circle};exports.geoClipAntimeridian\x3dclipAntimeridian;exports.geoClipCircle\x3dclipCircle;exports.geoClipExtent\x3dfunction(){var x0\x3d0,y0\x3d0,x1\x3d960,y1\x3d500,cache,cacheStream,clip;return clip\x3d{stream:function(stream){return cache\x26\x26cacheStream\x3d\x3d\x3dstream?cache:cache\x3dclipRectangle(x0,y0,x1,y1)(cacheStream\x3dstream)},extent:function(_){return arguments.length?(x0\x3d+_[0][0],y0\x3d+_[0][1],x1\x3d+_[1][0],y1\x3d+_[1][1],\ncache\x3dcacheStream\x3dnull,clip):[[x0,y0],[x1,y1]]}}};exports.geoClipRectangle\x3dclipRectangle;exports.geoConicConformal\x3dfunction(){return conicProjection(conicConformalRaw).scale(109.5).parallels([30,30])};exports.geoConicConformalRaw\x3dconicConformalRaw;exports.geoConicEqualArea\x3dconicEqualArea;exports.geoConicEqualAreaRaw\x3dconicEqualAreaRaw;exports.geoConicEquidistant\x3dfunction(){return conicProjection(conicEquidistantRaw).scale(131.154).center([0,13.9389])};exports.geoConicEquidistantRaw\x3dconicEquidistantRaw;\nexports.geoContains\x3dfunction(object,point){return(object\x26\x26containsObjectType.hasOwnProperty(object.type)?containsObjectType[object.type]:containsGeometry)(object,point)};exports.geoDistance\x3ddistance;exports.geoEqualEarth\x3dfunction(){return projection$jscomp$0(equalEarthRaw).scale(177.158)};exports.geoEqualEarthRaw\x3dequalEarthRaw;exports.geoEquirectangular\x3dfunction(){return projection$jscomp$0(equirectangularRaw).scale(152.63)};exports.geoEquirectangularRaw\x3dequirectangularRaw;exports.geoGnomonic\x3dfunction(){return projection$jscomp$0(gnomonicRaw).scale(144.049).clipAngle(60)};\nexports.geoGnomonicRaw\x3dgnomonicRaw;exports.geoGraticule\x3dgraticule$jscomp$0;exports.geoGraticule10\x3dfunction(){return graticule$jscomp$0()()};exports.geoIdentity\x3dfunction(){function reset(){kx\x3dk*sx;ky\x3dk*sy;cache\x3dcacheStream\x3dnull;return projection}function projection(p){var x\x3dp[0]*kx;p\x3dp[1]*ky;if(alpha){var t\x3dp*ca-x*sa;x\x3dx*ca+p*sa;p\x3dt}return[x+tx,p+ty]}var k\x3d1,tx\x3d0,ty\x3d0,sx\x3d1,sy\x3d1,alpha\x3d0,ca,sa,x0\x3dnull,y0,x1,y1,kx\x3d1,ky\x3d1,transform\x3dtransformer({point:function(x,y){x\x3dprojection([x,y]);this.stream.point(x[0],\nx[1])}}),postclip\x3didentity,cache,cacheStream;projection.invert\x3dfunction(p){var x\x3dp[0]-tx;p\x3dp[1]-ty;if(alpha){var t\x3dp*ca+x*sa;x\x3dx*ca-p*sa;p\x3dt}return[x/kx,p/ky]};projection.stream\x3dfunction(stream){return cache\x26\x26cacheStream\x3d\x3d\x3dstream?cache:cache\x3dtransform(postclip(cacheStream\x3dstream))};projection.postclip\x3dfunction(_){return arguments.length?(postclip\x3d_,x0\x3dy0\x3dx1\x3dy1\x3dnull,reset()):postclip};projection.clipExtent\x3dfunction(_){return arguments.length?(postclip\x3dnull\x3d\x3d_?(x0\x3dy0\x3dx1\x3dy1\x3dnull,identity):clipRectangle(x0\x3d\n+_[0][0],y0\x3d+_[0][1],x1\x3d+_[1][0],y1\x3d+_[1][1]),reset()):null\x3d\x3dx0?null:[[x0,y0],[x1,y1]]};projection.scale\x3dfunction(_){return arguments.length?(k\x3d+_,reset()):k};projection.translate\x3dfunction(_){return arguments.length?(tx\x3d+_[0],ty\x3d+_[1],reset()):[tx,ty]};projection.angle\x3dfunction(_){return arguments.length?(alpha\x3d_%360*radians,sa\x3dsin(alpha),ca\x3dcos(alpha),reset()):alpha*degrees};projection.reflectX\x3dfunction(_){return arguments.length?(sx\x3d_?-1:1,reset()):0\x3esx};projection.reflectY\x3dfunction(_){return arguments.length?\n(sy\x3d_?-1:1,reset()):0\x3esy};projection.fitExtent\x3dfunction(extent,object){return fitExtent(projection,extent,object)};projection.fitSize\x3dfunction(size,object){return fitExtent(projection,[[0,0],size],object)};projection.fitWidth\x3dfunction(width,object){return fitWidth(projection,width,object)};projection.fitHeight\x3dfunction(height,object){return fitHeight(projection,height,object)};return projection};exports.geoInterpolate\x3dfunction(a,b){var x0\x3da[0]*radians,y0\x3da[1]*radians;a\x3db[0]*radians;b\x3db[1]*radians;\nvar cy0\x3dcos(y0),sy0\x3dsin(y0),cy1\x3dcos(b),sy1\x3dsin(b),kx0\x3dcy0*cos(x0),ky0\x3dcy0*sin(x0),kx1\x3dcy1*cos(a),ky1\x3dcy1*sin(a),d\x3d2*asin(sqrt(haversin(b-y0)+cy0*cy1*haversin(a-x0))),k\x3dsin(d);a\x3dd?function(t){var B\x3dsin(t*\x3dd)/k,A\x3dsin(d-t)/k;t\x3dA*kx0+B*kx1;var y\x3dA*ky0+B*ky1;B\x3dA*sy0+B*sy1;return[atan2(y,t)*degrees,atan2(B,sqrt(t*t+y*y))*degrees]}:function(){return[x0*degrees,y0*degrees]};a.distance\x3dd;return a};exports.geoLength\x3dlength$jscomp$0;exports.geoMercator\x3dfunction(){return mercatorProjection(mercatorRaw).scale(961/\ntau)};exports.geoMercatorRaw\x3dmercatorRaw;exports.geoNaturalEarth1\x3dfunction(){return projection$jscomp$0(naturalEarth1Raw).scale(175.295)};exports.geoNaturalEarth1Raw\x3dnaturalEarth1Raw;exports.geoOrthographic\x3dfunction(){return projection$jscomp$0(orthographicRaw).scale(249.5).clipAngle(90.000001)};exports.geoOrthographicRaw\x3dorthographicRaw;exports.geoPath\x3dfunction(projection,context){function path(object){object\x26\x26(\x22function\x22\x3d\x3d\x3dtypeof pointRadius\x26\x26contextStream.pointRadius(+pointRadius.apply(this,arguments)),\ngeoStream(object,projectionStream(contextStream)));return contextStream.result()}var pointRadius\x3d4.5,projectionStream,contextStream;path.area\x3dfunction(object){geoStream(object,projectionStream(areaStream$1));return areaStream$1.result()};path.measure\x3dfunction(object){geoStream(object,projectionStream(lengthStream$1));return lengthStream$1.result()};path.bounds\x3dfunction(object){geoStream(object,projectionStream(boundsStream$1));return boundsStream$1.result()};path.centroid\x3dfunction(object){geoStream(object,\nprojectionStream(centroidStream$1));return centroidStream$1.result()};path.projection\x3dfunction(_){return arguments.length?(projectionStream\x3dnull\x3d\x3d_?(projection\x3dnull,identity):(projection\x3d_).stream,path):projection};path.context\x3dfunction(_){if(!arguments.length)return context;contextStream\x3dnull\x3d\x3d_?(context\x3dnull,new PathString):new PathContext(context\x3d_);\x22function\x22!\x3d\x3dtypeof pointRadius\x26\x26contextStream.pointRadius(pointRadius);return path};path.pointRadius\x3dfunction(_){if(!arguments.length)return pointRadius;\npointRadius\x3d\x22function\x22\x3d\x3d\x3dtypeof _?_:(contextStream.pointRadius(+_),+_);return path};return path.projection(projection).context(context)};exports.geoProjection\x3dprojection$jscomp$0;exports.geoProjectionMutator\x3dprojectionMutator;exports.geoRotation\x3drotation$jscomp$0;exports.geoStereographic\x3dfunction(){return projection$jscomp$0(stereographicRaw).scale(250).clipAngle(142)};exports.geoStereographicRaw\x3dstereographicRaw;exports.geoStream\x3dgeoStream;exports.geoTransform\x3dfunction(methods){return{stream:transformer(methods)}};\nexports.geoTransverseMercator\x3dfunction(){var m\x3dmercatorProjection(transverseMercatorRaw),center\x3dm.center,rotate\x3dm.rotate;m.center\x3dfunction(_){return arguments.length?center([-_[1],_[0]]):(_\x3dcenter(),[_[1],-_[0]])};m.rotate\x3dfunction(_){return arguments.length?rotate([_[0],_[1],2\x3c_.length?_[2]+90:90]):(_\x3drotate(),[_[0],_[1],_[2]-90])};return rotate([0,0,90]).scale(159.155)};exports.geoTransverseMercatorRaw\x3dtransverseMercatorRaw;Object.defineProperty(exports,\x22__esModule\x22,{value:!0})})}");
SHADOW_ENV.evalLoad("module$node_modules$d3_geo_projection$dist$d3_geo_projection.js", true , "shadow$provide.module$node_modules$d3_geo_projection$dist$d3_geo_projection\x3dfunction(global$jscomp$0,require,module,exports$jscomp$0){(function(global,factory){\x22object\x22\x3d\x3d\x3dtypeof exports$jscomp$0\x26\x26\x22undefined\x22!\x3d\x3dtypeof module?factory(exports$jscomp$0,require(\x22module$node_modules$d3_geo$dist$d3_geo\x22),require(\x22module$node_modules$d3_array$dist$d3_array\x22)):\x22function\x22\x3d\x3d\x3dtypeof define\x26\x26define.amd?define([\x22exports\x22,\x22d3-geo\x22,\x22d3-array\x22],factory):factory(global.d3\x3dglobal.d3||{},global.d3,global.d3)})(this,\nfunction(exports,d3Geo,d3Array){function asin(x){return 1\x3cx?halfPi:-1\x3ex?-halfPi:Math.asin(x)}function acos(x){return 1\x3cx?0:-1\x3ex?pi$jscomp$0:Math.acos(x)}function sqrt(x){return 0\x3cx?Math.sqrt(x):0}function sinh(x){return(exp(x)-exp(-x))/2}function cosh(x){return(exp(x)+exp(-x))/2}function airyRaw(beta){function forward(x,y){var cosx\x3dcos(x),cosy\x3dcos(y);y\x3dsin(y);cosx*\x3dcosy;cosx\x3d-((1-cosx?log((1+cosx)/2)/(1-cosx):-.5)+b/(1+cosx));return[cosx*cosy*sin(x),cosx*y]}var tanBeta_2\x3dtan(beta/2),b\x3d2*log(cos(beta/\n2))/(tanBeta_2*tanBeta_2);forward.invert\x3dfunction(x,y){var r\x3dsqrt(x*x+y*y),z\x3d-beta/2,i\x3d50;if(!r)return[0,0];do{var z_2\x3dz/2;var delta\x3dcos(z_2);z_2\x3dsin(z_2);var tanz_2\x3dz_2/delta,lnsecz_2\x3d-log(abs(delta));z-\x3ddelta\x3d(2/tanz_2*lnsecz_2-b*tanz_2-r)/(-lnsecz_2/(z_2*z_2)+1-b/(2*delta*delta))*(0\x3edelta?.7:1)}while(1E-6\x3cabs(delta)\x26\x260\x3c--i);i\x3dsin(z);return[atan2(x*i,r*cos(z)),asin(y*i/r)]};return forward}function aitoffRaw(x,y){var cosy\x3dcos(y);var sincia\x3d(sincia\x3dacos(cosy*cos(x/\x3d2)))?sincia/Math.sin(sincia):1;\nreturn[2*cosy*sin(x)*sincia,sin(y)*sincia]}function armadilloRaw(phi0){function forward(lambda,phi){var cosPhi\x3dcos(phi),cosLambda\x3dcos(lambda/\x3d2);return[(1+cosPhi)*sin(lambda),(sPhi0*phi\x3e-atan2(cosLambda,tanPhi0)-.001?0:10*-sPhi0)+k+sin(phi)*cosPhi0-(1+cosPhi)*sinPhi0*cosLambda]}var sinPhi0\x3dsin(phi0),cosPhi0\x3dcos(phi0),sPhi0\x3d0\x3c\x3dphi0?1:-1,tanPhi0\x3dtan(sPhi0*phi0),k\x3d(1+sinPhi0-cosPhi0)/2;forward.invert\x3dfunction(x,y){var lambda\x3d0,phi\x3d0,i\x3d50;do{var cosLambda\x3dcos(lambda),sinLambda\x3dsin(lambda),cosPhi\x3dcos(phi),\nsinPhi\x3dsin(phi),A\x3d1+cosPhi,fx\x3dA*sinLambda-x,fy\x3dk+sinPhi*cosPhi0-A*sinPhi0*cosLambda-y,dxdLambda\x3dA*cosLambda/2,dxdPhi\x3d-sinLambda*sinPhi;sinLambda\x3dsinPhi0*A*sinLambda/2;cosPhi\x3dcosPhi0*cosPhi+sinPhi0*cosLambda*sinPhi;cosLambda\x3ddxdPhi*sinLambda-cosPhi*dxdLambda;dxdPhi\x3d(fy*dxdPhi-fx*cosPhi)/cosLambda/2;fx\x3d(fx*sinLambda-fy*dxdLambda)/cosLambda;2\x3cabs(fx)\x26\x26(fx/\x3d2);lambda-\x3ddxdPhi;phi-\x3dfx}while((1E-6\x3cabs(dxdPhi)||1E-6\x3cabs(fx))\x26\x260\x3c--i);return sPhi0*phi\x3e-atan2(cos(lambda),tanPhi0)-.001?[2*lambda,phi]:null};return forward}\nfunction augustRaw(lambda,phi){phi\x3dtan(phi/2);var k\x3dsqrt(1-phi*phi),c\x3d1+k*cos(lambda/\x3d2);lambda\x3dsin(lambda)*k/c;phi/\x3dc;c\x3dlambda*lambda;k\x3dphi*phi;return[4/3*lambda*(3+c-3*k),4/3*phi*(3+3*c-k)]}function bakerRaw(lambda,phi){var phi0\x3dabs(phi);return phi0\x3cquarterPi?[lambda,log(tan(quarterPi+phi/2))]:[lambda*cos(phi0)*(2*sqrt2-1/sin(phi0)),sign(phi)*(2*sqrt2*(phi0-quarterPi)-log(tan(phi0/2)))]}function berghausRaw(lobes){function forward(lambda,phi){phi\x3dd3Geo.geoAzimuthalEquidistantRaw(lambda,phi);if(abs(lambda)\x3e\nhalfPi){lambda\x3datan2(phi[1],phi[0]);var r\x3dsqrt(phi[0]*phi[0]+phi[1]*phi[1]),theta0\x3dk*round((lambda-halfPi)/k)+halfPi,alpha\x3datan2(sin(lambda-\x3dtheta0),2-cos(lambda));lambda\x3dtheta0+asin(pi$jscomp$0/r*sin(alpha))-alpha;phi[0]\x3dr*cos(lambda);phi[1]\x3dr*sin(lambda)}return phi}var k\x3d2*pi$jscomp$0/lobes;forward.invert\x3dfunction(x,y){var r\x3dsqrt(x*x+y*y);if(r\x3ehalfPi){var theta\x3datan2(y,x);x\x3dk*round((theta-halfPi)/k)+halfPi;y\x3dtheta\x3ex?-1:1;theta\x3dr*cos(x-theta);theta\x3d1/tan(y*acos((theta-pi$jscomp$0)/sqrt(pi$jscomp$0*\n(pi$jscomp$0-2*theta)+r*r)));theta\x3dx+2*atan((theta+y*sqrt(theta*theta-3))/3);x\x3dr*cos(theta);y\x3dr*sin(theta)}return d3Geo.geoAzimuthalEquidistantRaw.invert(x,y)};return forward}function hammerRaw(A,B){function forward(lambda,phi){lambda\x3dd3Geo.geoAzimuthalEqualAreaRaw(lambda/B,phi);lambda[0]*\x3dA;return lambda}2\x3earguments.length\x26\x26(B\x3dA);if(1\x3d\x3d\x3dB)return d3Geo.geoAzimuthalEqualAreaRaw;if(Infinity\x3d\x3d\x3dB)return hammerQuarticAuthalicRaw;forward.invert\x3dfunction(x,y){x\x3dd3Geo.geoAzimuthalEqualAreaRaw.invert(x/A,\ny);x[0]*\x3dB;return x};return forward}function hammerQuarticAuthalicRaw(lambda,phi){return[lambda*cos(phi)/cos(phi/\x3d2),2*sin(phi)]}function solve(f,y,x){var steps\x3d100;x\x3dvoid 0\x3d\x3d\x3dx?0:+x;y\x3d+y;do{var delta\x3df(x);var f1\x3df(x+1E-6);delta\x3d\x3d\x3df1\x26\x26(f1\x3ddelta+1E-6);x-\x3ddelta\x3d-1E-6*(delta-y)/(delta-f1)}while(0\x3csteps--\x26\x261E-6\x3cabs(delta));return 0\x3esteps?NaN:x}function solve2d(f,MAX_ITERATIONS,eps){void 0\x3d\x3d\x3dMAX_ITERATIONS\x26\x26(MAX_ITERATIONS\x3d40);void 0\x3d\x3d\x3deps\x26\x26(eps\x3d1E-12);return function(x,y,a,b){a\x3dvoid 0\x3d\x3d\x3da?0:+a;b\x3dvoid 0\x3d\x3d\x3d\nb?0:+b;for(var i\x3d0;i\x3cMAX_ITERATIONS;i++){var p\x3df(a,b),tx\x3dp[0]-x,ty\x3dp[1]-y;if(abs(tx)\x3ceps\x26\x26abs(ty)\x3ceps)break;var h\x3dtx*tx+ty*ty;if(h\x3eerr2)a-\x3dda/\x3d2,b-\x3ddb/\x3d2;else{var err2\x3dh;h\x3d(0\x3ca?-1:1)*eps;var eb\x3d(0\x3cb?-1:1)*eps;var da\x3df(a+h,b);var pb\x3df(a,b+eb);var db\x3d(da[0]-p[0])/h;h\x3d(da[1]-p[1])/h;da\x3d(pb[0]-p[0])/eb;p\x3d(pb[1]-p[1])/eb;eb\x3dp*db-h*da;eb\x3d(.5\x3eabs(eb)?.5:1)/eb;da\x3d(ty*da-tx*p)*eb;db\x3d(tx*h-ty*db)*eb;a+\x3dda;b+\x3ddb;if(abs(da)\x3ceps\x26\x26abs(db)\x3ceps)break}}return[a,b]}}function bertin1953Raw(){function forward(lambda,\nphi){if(-1.4\x3elambda+phi){var u\x3d(lambda-phi+1.6)*(lambda+phi+1.4)/8;lambda+\x3du;phi-\x3d.8*u*sin(phi+pi$jscomp$0/2)}u\x3dhammer$$1(lambda,phi);lambda\x3d(1-cos(lambda*phi))/12;0\x3eu[1]\x26\x26(u[0]*\x3d1+lambda);0\x3cu[1]\x26\x26(u[1]*\x3d1+lambda/1.5*u[0]*u[0]);return u}var hammer$$1\x3dhammerRaw(1.68,2);forward.invert\x3dsolve2d(forward);return forward}function mollweideBromleyTheta(cp,phi){cp*\x3dsin(phi);var i\x3d30,delta;do phi-\x3ddelta\x3d(phi+sin(phi)-cp)/(1+cos(phi));while(1E-6\x3cabs(delta)\x26\x260\x3c--i);return phi/2}function mollweideBromleyRaw(cx,\ncy,cp){function forward(lambda,phi){return[cx*lambda*cos(phi\x3dmollweideBromleyTheta(cp,phi)),cy*sin(phi)]}forward.invert\x3dfunction(x,y){return y\x3dasin(y/cy),[x/(cx*cos(y)),asin((2*y+sin(2*y))/cp)]};return forward}function boggsRaw(lambda,phi){var theta\x3dmollweideBromleyTheta(pi$jscomp$0,phi);return[2.00276*lambda/(1/cos(phi)+1.11072/cos(theta)),(phi+sqrt2*sin(theta))/2.00276]}function parallel1(projectAt){var phi0\x3d0,m\x3dd3Geo.geoProjectionMutator(projectAt);projectAt\x3dm(phi0);projectAt.parallel\x3dfunction(_){return arguments.length?\nm(phi0\x3d_*radians):phi0*degrees};return projectAt}function sinusoidalRaw(lambda,phi){return[lambda*cos(phi),phi]}function bonneRaw(phi0){function forward(lambda,phi){var rho\x3dcotPhi0+phi0-phi;lambda\x3drho?lambda*cos(phi)/rho:rho;return[rho*sin(lambda),cotPhi0-rho*cos(lambda)]}if(!phi0)return sinusoidalRaw;var cotPhi0\x3d1/tan(phi0);forward.invert\x3dfunction(x,y){var rho\x3dsqrt(x*x+(y\x3dcotPhi0-y)*y),phi\x3dcotPhi0+phi0-rho;return[rho/cos(phi)*atan2(x,y),phi]};return forward}function bottomleyRaw(sinPsi){function forward(lambda,\nphi){lambda\x3d(phi\x3dhalfPi-phi)?lambda*sinPsi*sin(phi)/phi:phi;return[phi*sin(lambda)/sinPsi,halfPi-phi*cos(lambda)]}forward.invert\x3dfunction(x,y){x*\x3dsinPsi;var y1\x3dhalfPi-y;y\x3dsqrt(x*x+y1*y1);x\x3datan2(x,y1);return[(y?y/sin(y):1)*x/sinPsi,halfPi-y]};return forward}function distance$jscomp$0(dPhi,c1,s1,c2,s2,dLambda){var cosdLambda\x3dcos(dLambda);if(1\x3cabs(dPhi)||1\x3cabs(dLambda))dPhi\x3dacos(s1*s2+c1*c2*cosdLambda);else{dPhi\x3dsin(dPhi/2);var sindLambda\x3dsin(dLambda/2);dPhi\x3d2*asin(sqrt(dPhi*dPhi+c1*c2*sindLambda*sindLambda))}return 1E-6\x3c\nabs(dPhi)?[dPhi,atan2(c2*sin(dLambda),c1*s2-s1*c2*cosdLambda)]:[0,0]}function angle(b,c,a){return acos((b*b+c*c-a*a)/(2*b*c))}function chamberlinRaw(p0,p1,p2){var points\x3d[[p0[0],p0[1],sin(p0[1]),cos(p0[1])],[p1[0],p1[1],sin(p1[1]),cos(p1[1])],[p2[0],p2[1],sin(p2[1]),cos(p2[1])]];p0\x3dpoints[2];for(p2\x3d0;3\x3ep2;++p2,p0\x3dp1)p1\x3dpoints[p2],p0.v\x3ddistance$jscomp$0(p1[1]-p0[1],p0[3],p0[2],p1[3],p1[2],p1[0]-p0[0]),p0.point\x3d[0,0];p0\x3dangle(points[0].v[0],points[2].v[0],points[1].v[0]);var beta1\x3dangle(points[0].v[0],\npoints[1].v[0],points[2].v[0]),beta2\x3dpi$jscomp$0-p0;points[2].point[1]\x3d0;points[0].point[0]\x3d-(points[1].point[0]\x3dpoints[0].v[0]/2);var mean\x3d[points[2].point[0]\x3dpoints[0].point[0]+points[2].v[0]*cos(p0),2*(points[0].point[1]\x3dpoints[1].point[1]\x3dpoints[2].v[0]*sin(p0))];return function(lambda,phi){var sinPhi\x3dsin(phi),cosPhi\x3dcos(phi),v\x3dArray(3),i;for(i\x3d0;3\x3ei;++i){var p\x3dpoints[i];v[i]\x3ddistance$jscomp$0(phi-p[1],p[3],p[2],cosPhi,sinPhi,lambda-p[0]);if(!v[i][0])return p.point;var JSCompiler_temp_const\x3dv[i];\np\x3dv[i][1]-p.v[1];p-\x3d2*pi$jscomp$0*floor((p+pi$jscomp$0)/(2*pi$jscomp$0));JSCompiler_temp_const[1]\x3dp}lambda\x3dmean.slice();for(i\x3d0;3\x3ei;++i)phi\x3dangle(points[i].v[0],v[i][0],v[2\x3d\x3di?0:i+1][0]),0\x3ev[i][1]\x26\x26(phi\x3d-phi),i?1\x3d\x3di?(phi\x3dbeta1-phi,lambda[0]-\x3dv[i][0]*cos(phi),lambda[1]-\x3dv[i][0]*sin(phi)):(phi\x3dbeta2-phi,lambda[0]+\x3dv[i][0]*cos(phi),lambda[1]+\x3dv[i][0]*sin(phi)):(lambda[0]+\x3dv[i][0]*cos(phi),lambda[1]-\x3dv[i][0]*sin(phi));lambda[0]/\x3d3;lambda[1]/\x3d3;return lambda}}function pointRadians(p){return p[0]*\x3dradians,\np[1]*\x3dradians,p}function chamberlin(p0,p1,p2){var c\x3dd3Geo.geoCentroid({type:\x22MultiPoint\x22,coordinates:[p0,p1,p2]});c\x3d[-c[0],-c[1]];var r\x3dd3Geo.geoRotation(c);p0\x3dchamberlinRaw(pointRadians(r(p0)),pointRadians(r(p1)),pointRadians(r(p2)));p0.invert\x3dsolve2d(p0);p0\x3dd3Geo.geoProjection(p0).rotate(c);var center\x3dp0.center;delete p0.rotate;p0.center\x3dfunction(_){return arguments.length?center(r(_)):r.invert(center())};return p0.clipAngle(90)}function collignonRaw(lambda,phi){phi\x3dsqrt(1-sin(phi));return[2/sqrtPi*\nlambda*phi,sqrtPi*(1-phi)]}function craigRaw(phi0){function forward(lambda,phi){return[lambda,(lambda?lambda/sin(lambda):1)*(sin(phi)*cos(lambda)-tanPhi0*cos(phi))]}var tanPhi0\x3dtan(phi0);forward.invert\x3dtanPhi0?function(x,y){x\x26\x26(y*\x3dsin(x)/x);var cosLambda\x3dcos(x);return[x,2*atan2(sqrt(cosLambda*cosLambda+tanPhi0*tanPhi0-y*y)-cosLambda,tanPhi0-y)]}:function(x,y){return[x,asin(x?y*tan(x)/x:y)]};return forward}function crasterRaw(lambda,phi){return[sqrt3*lambda*(2*cos(2*phi/3)-1)/sqrtPi,sqrt3*sqrtPi*sin(phi/\n3)]}function cylindricalEqualAreaRaw(phi0){function forward(lambda,phi){return[lambda*cosPhi0,sin(phi)/cosPhi0]}var cosPhi0\x3dcos(phi0);forward.invert\x3dfunction(x,y){return[x/cosPhi0,asin(y*cosPhi0)]};return forward}function cylindricalStereographicRaw(phi0){function forward(lambda,phi){return[lambda*cosPhi0,(1+cosPhi0)*tan(phi/2)]}var cosPhi0\x3dcos(phi0);forward.invert\x3dfunction(x,y){return[x/cosPhi0,2*atan(y/(1+cosPhi0))]};return forward}function eckert1Raw(lambda,phi){var alpha\x3dsqrt(8/(3*pi$jscomp$0));\nreturn[alpha*lambda*(1-abs(phi)/pi$jscomp$0),alpha*phi]}function eckert2Raw(lambda,phi){var alpha\x3dsqrt(4-3*sin(abs(phi)));return[2/sqrt(6*pi$jscomp$0)*lambda*alpha,sign(phi)*sqrt(2*pi$jscomp$0/3)*(2-alpha)]}function eckert3Raw(lambda,phi){var k\x3dsqrt(pi$jscomp$0*(4+pi$jscomp$0));return[2/k*lambda*(1+sqrt(1-4*phi*phi/(pi$jscomp$0*pi$jscomp$0))),4/k*phi]}function eckert4Raw(lambda,phi){var k\x3d(2+halfPi)*sin(phi);phi/\x3d2;for(var i\x3d0,delta\x3dInfinity;10\x3ei\x26\x261E-6\x3cabs(delta);i++)delta\x3dcos(phi),phi-\x3ddelta\x3d(phi+\nsin(phi)*(delta+2)-k)/(2*delta*(1+delta));return[2/sqrt(pi$jscomp$0*(4+pi$jscomp$0))*lambda*(1+cos(phi)),2*sqrt(pi$jscomp$0/(4+pi$jscomp$0))*sin(phi)]}function eckert5Raw(lambda,phi){return[lambda*(1+cos(phi))/sqrt(2+pi$jscomp$0),2*phi/sqrt(2+pi$jscomp$0)]}function eckert6Raw(lambda,phi){for(var k\x3d(1+halfPi)*sin(phi),i\x3d0,delta\x3dInfinity;10\x3ei\x26\x261E-6\x3cabs(delta);i++)phi-\x3ddelta\x3d(phi+sin(phi)-k)/(1+cos(phi));k\x3dsqrt(2+pi$jscomp$0);return[lambda*(1+cos(phi))/k,2*phi/k]}function eisenlohrRaw(lambda,phi){var s0\x3d\nsin(lambda/\x3d2);lambda\x3dcos(lambda);var k\x3dsqrt(cos(phi)),c1\x3dcos(phi/\x3d2);phi\x3dsin(phi)/(c1+sqrt2*lambda*k);var c\x3dsqrt(2/(1+phi*phi));s0\x3dsqrt((sqrt2*c1+(lambda+s0)*k)/(sqrt2*c1+(lambda-s0)*k));return[eisenlohrK*(c*(s0-1/s0)-2*log(s0)),eisenlohrK*(c*phi*(s0+1/s0)-2*atan(phi))]}function faheyRaw(lambda,phi){phi\x3dtan(phi/2);return[lambda*faheyK*sqrt(1-phi*phi),(1+faheyK)*phi]}function foucautRaw(lambda,phi){var k\x3dphi/2,cosk\x3dcos(k);return[2*lambda/sqrtPi*cos(phi)*cosk*cosk,sqrtPi*tan(k)]}function foucautSinusoidalRaw(alpha){function raw(lambda,\nphi){var cosphi\x3dcos(phi),sinphi\x3dsin(phi);return[cosphi/(beta+alpha*cosphi)*lambda,beta*phi+alpha*sinphi]}function forward(lambda,phi){lambda\x3draw(lambda,phi);return[lambda[0]*ratio,lambda[1]/ratio]}function forwardMeridian(phi){return forward(0,phi)[1]}var beta\x3d1-alpha,equatorial\x3draw(pi$jscomp$0,0)[0]-raw(-pi$jscomp$0,0)[0],polar\x3draw(0,halfPi)[1]-raw(0,-halfPi)[1],ratio\x3dsqrt(2*polar/equatorial);forward.invert\x3dfunction(x,y){y\x3dsolve(forwardMeridian,y);return[x/ratio*(alpha+beta/cos(y)),y]};return forward}\nfunction gilbertInvert(point){return[2*point[0],2*atan(sin(point[1]*radians))*degrees]}function gingeryRaw(rho,n){function forward(lambda,phi){lambda\x3dd3Geo.geoAzimuthalEquidistantRaw(lambda,phi);phi\x3dlambda[0];var y\x3dlambda[1],r2\x3dphi*phi+y*y;if(r2\x3erho2){var r\x3dsqrt(r2);phi\x3datan2(y,phi);r2\x3dk*round(phi/k);y\x3dphi-r2;var rhoCosAlpha\x3drho*cos(y),k_\x3d(rho*sin(y)-y*sin(rhoCosAlpha))/(halfPi-rhoCosAlpha),s_\x3dgingeryLength(y,k_),e\x3d(pi$jscomp$0-rho)/gingeryIntegrate(s_,rhoCosAlpha,pi$jscomp$0);phi\x3dr;var i\x3d50,delta;\ndo phi-\x3ddelta\x3d(rho+gingeryIntegrate(s_,rhoCosAlpha,phi)*e-r)/(s_(phi)*e);while(1E-6\x3cabs(delta)\x26\x260\x3c--i);y*\x3dsin(phi);phi\x3chalfPi\x26\x26(y-\x3dk_*(phi-halfPi));r\x3dsin(r2);r2\x3dcos(r2);lambda[0]\x3dphi*r2-y*r;lambda[1]\x3dphi*r+y*r2}return lambda}var k\x3d2*pi$jscomp$0/n,rho2\x3drho*rho;forward.invert\x3dfunction(x,y){var r2\x3dx*x+y*y;if(r2\x3erho2){var r\x3dsqrt(r2);y\x3datan2(y,x);r2\x3dk*round(y/k);y-\x3dr2;x\x3dr*cos(y);y\x3dr*sin(y);r\x3dx-halfPi;for(var sinx\x3dsin(x),alpha\x3dy/sinx,delta\x3dx\x3chalfPi?Infinity:0,i\x3d10;;){var rhosinAlpha\x3drho*sin(alpha),rhoCosAlpha\x3d\nrho*cos(alpha),sinRhoCosAlpha\x3dsin(rhoCosAlpha),halfPi_RhoCosAlpha\x3dhalfPi-rhoCosAlpha,k_\x3d(rhosinAlpha-alpha*sinRhoCosAlpha)/halfPi_RhoCosAlpha,s_\x3dgingeryLength(alpha,k_);if(1E-12\x3eabs(delta)||!--i)break;alpha-\x3ddelta\x3d(alpha*sinx-k_*r-y)/(sinx-2*r*(halfPi_RhoCosAlpha*(rhoCosAlpha+alpha*rhosinAlpha*cos(rhoCosAlpha)-sinRhoCosAlpha)-rhosinAlpha*(rhosinAlpha-alpha*sinRhoCosAlpha))/(halfPi_RhoCosAlpha*halfPi_RhoCosAlpha))}r\x3drho+gingeryIntegrate(s_,rhoCosAlpha,x)*(pi$jscomp$0-rho)/gingeryIntegrate(s_,rhoCosAlpha,\npi$jscomp$0);y\x3dr2+alpha;x\x3dr*cos(y);y\x3dr*sin(y)}return d3Geo.geoAzimuthalEquidistantRaw.invert(x,y)};return forward}function gingeryLength(alpha,k){return function(x){var y_\x3dalpha*cos(x);x\x3chalfPi\x26\x26(y_-\x3dk);return sqrt(1+y_*y_)}}function gingeryIntegrate(f,a,b){var h\x3d(b-a)/50;b\x3df(a)+f(b);for(var i\x3d1;50\x3ei;++i)b+\x3d2*f(a+\x3dh);return.5*b*h}function ginzburgPolyconicRaw(a,b,c,d,e,f,g,h){function forward(lambda,phi){if(!phi)return[a*lambda/pi$jscomp$0,0];var phi2\x3dphi*phi,xB\x3da+phi2*(b+phi2*(c+phi2*d)),yB\x3dphi*\n(e-1+phi2*(f-h+phi2*g));yB\x3d(xB*xB+yB*yB)/(2*yB);lambda\x3dlambda*asin(xB/yB)/pi$jscomp$0;return[yB*sin(lambda),phi*(1+phi2*h)+yB*(1-cos(lambda))]}8\x3earguments.length\x26\x26(h\x3d0);forward.invert\x3dfunction(x,y){var lambda\x3dpi$jscomp$0*x/a,phi\x3dy,i\x3d50;do{var phi2\x3dphi*phi,xB\x3da+phi2*(b+phi2*(c+phi2*d)),yB\x3dphi*(e-1+phi2*(f-h+phi2*g)),p\x3dxB*xB+yB*yB,q\x3d2*yB;var deltaLambda\x3dp/q;var m2\x3ddeltaLambda*deltaLambda;var deltaPhi\x3dasin(xB/deltaLambda)/pi$jscomp$0;var alpha\x3dlambda*deltaPhi,xB2\x3dxB*xB,dxBdPhi\x3d(2*b+phi2*(4*c+6*phi2*\nd))*phi,dyBdPhi\x3de+phi2*(3*f+5*phi2*g);yB\x3d(2*(xB*dxBdPhi+yB*(dyBdPhi-1))*q-2*p*(dyBdPhi-1))/(q*q);p\x3dcos(alpha);dyBdPhi\x3dsin(alpha);q\x3ddeltaLambda*p;alpha\x3ddeltaLambda*dyBdPhi;m2\x3dlambda/pi$jscomp$0*(1/sqrt(1-xB2/m2))*(dxBdPhi*deltaLambda-xB*yB)/m2;xB\x3dalpha-x;phi2\x3dphi*(1+phi2*h)+deltaLambda-q-y;deltaLambda\x3dyB*dyBdPhi+q*m2;xB2\x3dq*deltaPhi;yB\x3d1+yB-(yB*p-alpha*m2);deltaPhi*\x3dalpha;p\x3ddeltaLambda*deltaPhi-yB*xB2;if(!p)break;lambda-\x3ddeltaLambda\x3d(phi2*deltaLambda-xB*yB)/p;phi-\x3ddeltaPhi\x3d(xB*deltaPhi-phi2*xB2)/p}while((1E-6\x3c\nabs(deltaLambda)||1E-6\x3cabs(deltaPhi))\x26\x260\x3c--i);return[lambda,phi]};return forward}function ginzburg8Raw(lambda,phi){var lambda2\x3dlambda*lambda,phi2\x3dphi*phi;return[lambda*(1-.162388*phi2)*(.87-9.52426E-4*lambda2*lambda2),phi*(1+phi2/12)]}function squareRaw(project){function projectSquare(lambda,phi){var s\x3d0\x3clambda?-.5:.5;lambda\x3dproject(lambda+s*pi$jscomp$0,phi);lambda[0]-\x3ds*dx;return lambda}var dx\x3dproject(halfPi,0)[0]-project(-halfPi,0)[0];project.invert\x26\x26(projectSquare.invert\x3dfunction(x,y){var s\x3d0\x3c\nx?-.5:.5;x\x3dproject.invert(x+s*dx,y);s\x3dx[0]-s*pi$jscomp$0;s\x3c-pi$jscomp$0?s+\x3d2*pi$jscomp$0:s\x3epi$jscomp$0\x26\x26(s-\x3d2*pi$jscomp$0);x[0]\x3ds;return x});return projectSquare}function gringortenRaw(lambda,phi){var sLambda\x3dsign(lambda),sPhi\x3dsign(phi),cosPhi\x3dcos(phi),x\x3dcos(lambda)*cosPhi;lambda\x3dsin(lambda)*cosPhi;phi\x3dsin(sPhi*phi);lambda\x3dabs(atan2(lambda,phi));phi\x3dasin(x);1E-6\x3cabs(lambda-halfPi)\x26\x26(lambda%\x3dhalfPi);x\x3dgringortenHexadecant(lambda\x3epi$jscomp$0/4?halfPi-lambda:lambda,phi);lambda\x3epi$jscomp$0/4\x26\x26(phi\x3dx[0],\nx[0]\x3d-x[1],x[1]\x3d-phi);return x[0]*\x3dsLambda,x[1]*\x3d-sPhi,x}function gringortenHexadecant(lambda,phi){if(phi\x3d\x3d\x3dhalfPi)return[0,0];var sinPhi\x3dsin(phi),r\x3dsinPhi*sinPhi,r2\x3dr*r,j\x3d1+r2,k\x3d1+3*r2,q\x3d1-r2,z\x3dasin(1/sqrt(j)),v\x3dq+r*j*z,p2\x3d(1-sinPhi)/v,p\x3dsqrt(p2),a2\x3dp2*j,a\x3dsqrt(a2),h\x3dp*q;if(0\x3d\x3d\x3dlambda)return[0,-(h+r*a)];var cosPhi\x3dcos(phi),secPhi\x3d1/cosPhi,drdPhi\x3d2*sinPhi*cosPhi;z\x3d(-v*cosPhi-(1-sinPhi)*(-3*r+z*k)*drdPhi)/(v*v);sinPhi\x3d-secPhi*drdPhi;j\x3d-secPhi*(r*j*z+p2*k*drdPhi);q\x3d-2*secPhi*(.5*z/p*q-2*r*p*drdPhi);\np\x3d4*lambda/pi$jscomp$0;if(lambda\x3e.222*pi$jscomp$0||phi\x3cpi$jscomp$0/4\x26\x26lambda\x3e.175*pi$jscomp$0){phi\x3d(h+r*sqrt(a2*(1+r2)-h*h))/(1+r2);if(lambda\x3epi$jscomp$0/4)return[phi,phi];r2\x3dphi;secPhi\x3d.5*phi;phi\x3d.5*(secPhi+r2);lambda\x3d50;do{drdPhi\x3dsqrt(a2-phi*phi);drdPhi\x3dphi*(q+sinPhi*drdPhi)+j*asin(phi/a)-p;if(!drdPhi)break;0\x3edrdPhi?secPhi\x3dphi:r2\x3dphi;phi\x3d.5*(secPhi+r2)}while(1E-6\x3cabs(r2-secPhi)\x26\x260\x3c--lambda)}else{phi\x3d1E-6;lambda\x3d25;do drdPhi\x3dphi*phi,r2\x3dsqrt(a2-drdPhi),k\x3dq+sinPhi*r2,secPhi\x3dphi*k+j*asin(phi/a)-p,drdPhi\x3d\nk+(j-sinPhi*drdPhi)/r2,phi-\x3dr2\x3dr2?secPhi/drdPhi:0;while(1E-6\x3cabs(r2)\x26\x260\x3c--lambda)}return[phi,-h-r*sqrt(a2-phi*phi)]}function ellipticJ(u,m){if(1E-6\x3em){var t\x3dsin(u);var b\x3dcos(u);var ai\x3dm*(u-t*b)/4;return[t-ai*b,b+ai*t,1-m*t*t/2,u-ai]}if(.999999\x3c\x3dm){ai\x3d(1-m)/4;b\x3dcosh(u);t\x3dexp(2*u);t\x3d(t-1)/(t+1);m\x3d1/b;var twon\x3db*sinh(u);return[t+ai*(twon-u)/(b*b),m-ai*t*m*(twon-u),m+ai*t*m*(twon+u),2*atan(exp(u))-halfPi+ai*(twon-u)/b]}var a\x3d[1,0,0,0,0,0,0,0,0],c\x3d[sqrt(m),0,0,0,0,0,0,0,0],i\x3d0;b\x3dsqrt(1-m);for(twon\x3d1;1E-6\x3c\nabs(c[i]/a[i])\x26\x268\x3ei;)ai\x3da[i++],c[i]\x3d(ai-b)/2,a[i]\x3d(ai+b)/2,b\x3dsqrt(ai*b),twon*\x3d2;m\x3dtwon*a[i]*u;do t\x3dc[i]*sin(b\x3dm)/a[i],m\x3d(asin(t)+m)/2;while(--i);return[sin(m),t\x3dcos(m),t/cos(m-b),m]}function ellipticF(phi,m){if(!m)return phi;if(1\x3d\x3d\x3dm)return log(tan(phi/2+quarterPi));var a\x3d1,b\x3dsqrt(1-m),c\x3dsqrt(m);for(m\x3d0;1E-6\x3cabs(c);m++)phi%pi$jscomp$0?(c\x3datan(b*tan(phi)/a),0\x3ec\x26\x26(c+\x3dpi$jscomp$0),phi+\x3dc+~~(phi/pi$jscomp$0)*pi$jscomp$0):phi+\x3dphi,c\x3d(a+b)/2,b\x3dsqrt(a*b),c\x3d((a\x3dc)-b)/2;return phi/(pow(2,m)*a)}function guyouRaw(lambda,\nphi){var k_\x3d(sqrt2-1)/(sqrt2+1),k\x3dsqrt(1-k_*k_),K\x3dellipticF(halfPi,k*k),psi\x3dlog(tan(pi$jscomp$0/4+abs(phi)/2));psi\x3dexp(-1*psi)/sqrt(k_);k_\x3dpsi*cos(-1*lambda);var y\x3dpsi*sin(-1*lambda);lambda\x3dk_*k_;psi\x3dy+1;y\x3d1-lambda-y*y;lambda\x3d[.5*((0\x3c\x3dk_?halfPi:-halfPi)-atan2(y,2*k_)),-.25*log(y*y+4*lambda)+.5*log(psi*psi+lambda)];k_\x3dlambda[0];lambda\x3dlambda[1];k*\x3dk;psi\x3dabs(k_);y\x3dabs(lambda);y\x3dsinh(y);if(psi){var cscPhi\x3d1/sin(psi);psi\x3d1/(tan(psi)*tan(psi));y\x3d-(psi+k*y*y*cscPhi*cscPhi-1+k);y\x3d(-y+sqrt(y*y-4*(k-1)*psi))/\n2;k\x3d[ellipticF(atan(1/sqrt(y)),k)*sign(k_),ellipticF(atan(sqrt((y/psi-1)/k)),1-k)*sign(lambda)]}else k\x3d[0,ellipticF(atan(y),1-k)*sign(lambda)];return[-k[1],(0\x3c\x3dphi?1:-1)*(.5*K-k[0])]}function hammerRetroazimuthalRaw(phi0){function forward(lambda,phi){var p\x3drotate(lambda,phi);lambda\x3dp[0];phi\x3dp[1];p\x3dsin(phi);phi\x3dcos(phi);var cosLambda\x3dcos(lambda),z\x3dacos(sinPhi0*p+cosPhi0*phi*cosLambda),sinz\x3dsin(z);z\x3d1E-6\x3cabs(sinz)?z/sinz:1;return[z*cosPhi0*sin(lambda),(abs(lambda)\x3ehalfPi?z:-z)*(sinPhi0*phi-cosPhi0*\np*cosLambda)]}var sinPhi0\x3dsin(phi0),cosPhi0\x3dcos(phi0),rotate\x3dhammerRetroazimuthalRotation(phi0);rotate.invert\x3dhammerRetroazimuthalRotation(-phi0);forward.invert\x3dfunction(x,y){var rho\x3dsqrt(x*x+y*y),sinz\x3d-sin(rho),cosz\x3dcos(rho),a\x3drho*cosz,b\x3d-y*sinz,c\x3drho*sinPhi0,d\x3dsqrt(a*a+b*b-c*c);a\x3datan2(a*c+b*d,b*c-a*d);x\x3d(rho\x3ehalfPi?-1:1)*atan2(x*sinz,rho*cos(a)*cosz+y*sin(a)*sinz);return rotate.invert(x,a)};return forward}function hammerRetroazimuthalRotation(phi0){var sinPhi0\x3dsin(phi0),cosPhi0\x3dcos(phi0);return function(lambda,\nphi){var cosPhi\x3dcos(phi),x\x3dcos(lambda)*cosPhi;lambda\x3dsin(lambda)*cosPhi;phi\x3dsin(phi);return[atan2(lambda,x*cosPhi0-phi*sinPhi0),asin(phi*cosPhi0+x*sinPhi0)]}}function healpixRaw(H){function forward(lambda,phi){var phi2\x3dabs(phi);if(phi2\x3ephi0){var i\x3dmin(H-1,max(0,floor((lambda+pi$jscomp$0)/k)));lambda+\x3dpi$jscomp$0*(H-1)/H-i*k;lambda\x3dcollignonRaw(lambda,phi2);lambda[0]\x3dlambda[0]*tau/dx-tau*(H-1)/(2*H)+i*tau/H;lambda[1]\x3dy0+4*(lambda[1]-y1)*dy1/tau;0\x3ephi\x26\x26(lambda[1]\x3d-lambda[1])}else lambda\x3dhealpixLambert(lambda,\nphi);lambda[0]*\x3dw;lambda[1]/\x3dh;return lambda}var phi0\x3dhealpixParallel*radians,dx\x3dcollignonRaw(pi$jscomp$0,phi0)[0]-collignonRaw(-pi$jscomp$0,phi0)[0],y0\x3dhealpixLambert(0,phi0)[1],y1\x3dcollignonRaw(0,phi0)[1],dy1\x3dsqrtPi-y1,k\x3dtau/H,w\x3d4/tau,h\x3dy0+dy1*dy1*4/tau;forward.invert\x3dfunction(x,y){x/\x3dw;y*\x3dh;var y2\x3dabs(y);if(y2\x3ey0){var i\x3dmin(H-1,max(0,floor((x+pi$jscomp$0)/k)));x\x3d(x+pi$jscomp$0*(H-1)/H-i*k)*dx/tau;x\x3dcollignonRaw.invert(x,.25*(y2-y0)*tau/dy1+y1);x[0]-\x3dpi$jscomp$0*(H-1)/H-i*k;0\x3ey\x26\x26(x[1]\x3d-x[1]);return x}return healpixLambert.invert(x,\ny)};return forward}function sphereTop(x,i){return[x,i\x261?89.999999:healpixParallel]}function sphereBottom(x,i){return[x,i\x261?-89.999999:-healpixParallel]}function sphereNudge(d){return[.999999*d[0],d[1]]}function sphere$jscomp$0(step){var c\x3d[].concat(d3Array.range(-180,180+step/2,step).map(sphereTop),d3Array.range(180,-180-step/2,-step).map(sphereBottom));return{type:\x22Polygon\x22,coordinates:[180\x3d\x3d\x3dstep?c.map(sphereNudge):c]}}function hillRaw(K){function forward(lambda,phi){var t\x3d1-sin(phi);if(t\x26\x262\x3et){var theta\x3d\nhalfPi-phi,i\x3d25;do{var delta\x3dsin(theta);var cosTheta\x3dcos(theta);phi\x3dBt+atan2(delta,L-cosTheta);cosTheta\x3d1+L2-2*L*cosTheta;theta-\x3ddelta\x3d(theta-K2*Bt-L*delta+cosTheta*phi-.5*t*B)/(2*L*delta*phi)}while(1E-12\x3cabs(delta)\x26\x260\x3c--i);t\x3dA*sqrt(cosTheta);lambda\x3dlambda*phi/pi$jscomp$0}else t\x3dA*(K+t),lambda\x3dlambda*Bt/pi$jscomp$0;return[t*sin(lambda),rho0-t*cos(lambda)]}var L\x3d1+K,sinBt\x3dsin(1/L),Bt\x3dasin(sinBt),A\x3d2*sqrt(pi$jscomp$0/(B\x3dpi$jscomp$0+4*Bt*L)),B,rho0\x3d.5*A*(L+sqrt(K*(2+K))),K2\x3dK*K,L2\x3dL*L;forward.invert\x3d\nfunction(x,y){var rho2\x3dx*x+(y-\x3drho0)*y;y\x3d(1+L2-rho2/(A*A))/(2*L);var theta\x3dacos(y),sinTheta\x3dsin(theta),Bt_Bt1\x3dBt+atan2(sinTheta,L-y);return[asin(x/sqrt(rho2))*pi$jscomp$0/Bt_Bt1,asin(1-2*(theta-K2*Bt-L*sinTheta+(1+L2-2*L*y)*Bt_Bt1)/B)]};return forward}function sinuMollweideRaw(lambda,phi){return-.7109889596207567\x3cphi?(lambda\x3dmollweideRaw(lambda,phi),lambda[1]+\x3d.0528035274542,lambda):sinusoidalRaw(lambda,phi)}function homolosineRaw(lambda,phi){return.7109889596207567\x3cabs(phi)?(lambda\x3dmollweideRaw(lambda,\nphi),lambda[1]-\x3d0\x3cphi?.0528035274542:-.0528035274542,lambda):sinusoidalRaw(lambda,phi)}function hufnagelRaw(a,b,psiMax,ratio){function radius(psi){return sqrt(1+a*cos(2*psi)+b*cos(4*psi))}function mapping(t){t*\x3dpsiMax;return(2*t+(1+a-b/2)*sin(2*t)+(a+b)/2*sin(4*t)+b/2*sin(6*t))/psiMax}function inversemapping(psi){return radius(psi)*sin(psi)}var k\x3dsqrt(4*pi$jscomp$0/(2*psiMax+(1+a-b/2)*sin(2*psiMax)+(a+b)/2*sin(4*psiMax)+b/2*sin(6*psiMax))),c\x3dsqrt(ratio*sin(psiMax)*sqrt((1+a*cos(2*psiMax)+b*cos(4*\npsiMax))/(1+a+b))),M\x3dpsiMax*mapping(1),forward\x3dfunction(lambda,phi){var psi\x3dpsiMax*solve(mapping,M*sin(phi)/psiMax,phi/pi$jscomp$0);isNaN(psi)\x26\x26(psi\x3dpsiMax*sign(phi));phi\x3dk*radius(psi);return[phi*c*lambda/pi$jscomp$0*cos(psi),phi/c*sin(psi)]};forward.invert\x3dfunction(x,y){y\x3dsolve(inversemapping,y*c/k);return[x*pi$jscomp$0/(cos(y)*k*c*radius(y)),asin(psiMax*mapping(y/psiMax)/M)]};0\x3d\x3d\x3dpsiMax\x26\x26(k\x3dsqrt(ratio/pi$jscomp$0),forward\x3dfunction(lambda,phi){return[lambda*k,sin(phi)/k]},forward.invert\x3dfunction(x,\ny){return[x/k,asin(y*k)]});return forward}function adsimp(f,a,b,fa,fm,fb,V0,tol,maxdepth,depth,state){if(state.nanEncountered)return NaN;var h\x3db-a;var f1\x3df(a+.25*h);var f2\x3df(b-.25*h);if(isNaN(f1))state.nanEncountered\x3d!0;else if(isNaN(f2))state.nanEncountered\x3d!0;else{var sl\x3dh*(fa+4*f1+fm)/12;var sr\x3dh*(fm+4*f2+fb)/12;var s2\x3dsl+sr;V0\x3d(s2-V0)/15;if(depth\x3emaxdepth)return state.maxDepthCount++,s2+V0;if(Math.abs(V0)\x3ctol)return s2+V0;h\x3da+.5*h;a\x3dadsimp(f,a,h,fa,f1,fm,sl,.5*tol,maxdepth,depth+1,state);if(isNaN(a))return state.nanEncountered\x3d\n!0,NaN;f\x3dadsimp(f,h,b,fm,f2,fb,sr,.5*tol,maxdepth,depth+1,state);return isNaN(f)?(state.nanEncountered\x3d!0,NaN):a+f}}function integrate(f,a,b,tol,maxdepth){void 0\x3d\x3d\x3dtol\x26\x26(tol\x3d1E-8);void 0\x3d\x3d\x3dmaxdepth\x26\x26(maxdepth\x3d20);var fa\x3df(a),fm\x3df(.5*(a+b)),fb\x3df(b);return adsimp(f,a,b,fa,fm,fb,(fa+4*fm+fb)*(b-a)/6,tol,maxdepth,1,{maxDepthCount:0,nanEncountered:!1})}function hyperellipticalRaw(alpha,k,gamma){function elliptic(f){return alpha+(1-alpha)*pow(1-pow(f,k),1/k)}function Y(sinphi){var rmin\x3d0,rmax\x3d1E3,r\x3d500;\ndo approx[r]\x3esinphi?rmax\x3dr:rmin\x3dr,r\x3drmin+rmax\x3e\x3e1;while(r\x3ermin);(rmin\x3dapprox[r+1]-approx[r])\x26\x26(rmin\x3d(sinphi-approx[r+1])/rmin);return(r+1+rmin)/1E3}for(var G\x3d1/integrate(elliptic,0,1,1E-4),m\x3d1.00000001*G,approx\x3d[],i\x3d0;1E3\x3e\x3di;i++)approx.push(integrate(elliptic,0,i/1E3,1E-4)*m);var ratio\x3d2*Y(1)/pi$jscomp$0*G/gamma;gamma\x3dfunction(lambda,phi){var y\x3dY(abs(sin(phi)));lambda*\x3delliptic(y);y/\x3dratio;return[lambda,0\x3c\x3dphi?y:-y]};gamma.invert\x3dfunction(x,y){var phi;y*\x3dratio;1\x3eabs(y)\x26\x26(phi\x3dsign(y)*asin(integrate(elliptic,\n0,abs(y),1E-4)*G));return[x/elliptic(abs(y)),phi]};return gamma}function interpolateLine(coordinates,m){for(var i\x3d-1,n\x3dcoordinates.length,p0\x3dcoordinates[0],p1,dx,dy,resampled\x3d[];++i\x3cn;){p1\x3dcoordinates[i];dx\x3d(p1[0]-p0[0])/m;dy\x3d(p1[1]-p0[1])/m;for(var j\x3d0;j\x3cm;++j)resampled.push([p0[0]+j*dx,p0[1]+j*dy]);p0\x3dp1}resampled.push(p1);return resampled}function interpolateSphere(lobes){var coordinates\x3d[],i,n\x3dlobes[0].length;for(i\x3d0;i\x3cn;++i){var lobe\x3dlobes[0][i];var lambda0\x3dlobe[0][0];var phi0\x3dlobe[0][1];var phi1\x3d\nlobe[1][1];var lambda2\x3dlobe[2][0];lobe\x3dlobe[2][1];coordinates.push(interpolateLine([[lambda0+1E-6,phi0+1E-6],[lambda0+1E-6,phi1-1E-6],[lambda2-1E-6,phi1-1E-6],[lambda2-1E-6,lobe+1E-6]],30))}for(i\x3dlobes[1].length-1;0\x3c\x3di;--i)lobe\x3dlobes[1][i],lambda0\x3dlobe[0][0],phi0\x3dlobe[0][1],phi1\x3dlobe[1][1],lambda2\x3dlobe[2][0],lobe\x3dlobe[2][1],coordinates.push(interpolateLine([[lambda2-1E-6,lobe-1E-6],[lambda2-1E-6,phi1+1E-6],[lambda0+1E-6,phi1+1E-6],[lambda0+1E-6,phi0-1E-6]],30));return{type:\x22Polygon\x22,coordinates:[d3Array.merge(coordinates)]}}\nfunction interrupt(project,lobes,inverse){function forward(lambda,phi){for(var sign$$1\x3d0\x3ephi?-1:1,lobe\x3dlobes[+(0\x3ephi)],i\x3d0,n\x3dlobe.length-1;i\x3cn\x26\x26lambda\x3elobe[i][2][0];++i);lambda\x3dproject(lambda-lobe[i][1][0],phi);lambda[0]+\x3dproject(lobe[i][1][0],sign$$1*phi\x3esign$$1*lobe[i][0][1]?lobe[i][0][1]:phi)[0];return lambda}var sphere,bounds;inverse?forward.invert\x3dinverse(forward):project.invert\x26\x26(forward.invert\x3dfunction(x,y){for(var bound\x3dbounds[+(0\x3ey)],lobe\x3dlobes[+(0\x3ey)],i\x3d0,n\x3dbound.length;i\x3cn;++i){var b\x3dbound[i];\nif(b[0][0]\x3c\x3dx\x26\x26x\x3cb[1][0]\x26\x26b[0][1]\x3c\x3dy\x26\x26y\x3cb[1][1])return bound\x3dproject.invert(x-project(lobe[i][1][0],0)[0],y),bound[0]+\x3dlobe[i][1][0],lobe\x3dforward(bound[0],bound[1]),x\x3d[x,y],1E-6\x3eabs(lobe[0]-x[0])\x26\x261E-6\x3eabs(lobe[1]-x[1])?bound:null}});var p\x3dd3Geo.geoProjection(forward),stream_\x3dp.stream;p.stream\x3dfunction(stream){var rotate\x3dp.rotate(),rotateStream\x3dstream_(stream),sphereStream\x3d(p.rotate([0,0]),stream_(stream));p.rotate(rotate);rotateStream.sphere\x3dfunction(){d3Geo.geoStream(sphere,sphereStream)};return rotateStream};\np.lobes\x3dfunction(_){if(!arguments.length)return lobes.map(function(lobe){return lobe.map(function(l){return[[l[0][0]*degrees,l[0][1]*degrees],[l[1][0]*degrees,l[1][1]*degrees],[l[2][0]*degrees,l[2][1]*degrees]]})});sphere\x3dinterpolateSphere(_);lobes\x3d_.map(function(lobe){return lobe.map(function(l){return[[l[0][0]*radians,l[0][1]*radians],[l[1][0]*radians,l[1][1]*radians],[l[2][0]*radians,l[2][1]*radians]]})});bounds\x3dlobes.map(function(lobe){return lobe.map(function(l){var x0\x3dproject(l[0][0],l[0][1])[0],\nx1\x3dproject(l[2][0],l[2][1])[0],y0\x3dproject(l[1][0],l[0][1])[1];l\x3dproject(l[1][0],l[1][1])[1];if(y0\x3el){var t\x3dy0;y0\x3dl;l\x3dt}return[[x0,y0],[x1,l]]})});return p};null!\x3dlobes\x26\x26p.lobes(lobes);return p}function kavrayskiy7Raw(lambda,phi){return[3/tau*lambda*sqrt(pi$jscomp$0*pi$jscomp$0/3-phi*phi),phi]}function lagrangeRaw(n){function forward(lambda,phi){if(1E-6\x3eabs(abs(phi)-halfPi))return[0,0\x3ephi?-2:2];phi\x3dsin(phi);phi\x3dpow((1+phi)/(1-phi),n/2);var c\x3d.5*(phi+1/phi)+cos(lambda*\x3dn);return[2*sin(lambda)/c,(phi-\n1/phi)/c]}forward.invert\x3dfunction(x,y){var y0\x3dabs(y);if(1E-6\x3eabs(y0-2))return x?null:[0,sign(y)*halfPi];if(2\x3cy0)return null;x/\x3d2;y/\x3d2;y0\x3dx*x;var y2\x3dy*y;y\x3d2*y/(1+y0+y2);y\x3dpow((1+y)/(1-y),1/n);return[atan2(2*x,1-y0-y2)/n,asin((y-1)/(y+1))]};return forward}function larriveeRaw(lambda,phi){return[lambda*(1+sqrt(cos(phi)))/2,phi/(cos(phi/2)*cos(lambda/6))]}function laskowskiRaw(lambda,phi){var lambda2\x3dlambda*lambda,phi2\x3dphi*phi;return[lambda*(.975534+phi2*(-.119161+-.0143059*lambda2+-.0547009*phi2)),phi*\n(1.00384+lambda2*(.0802894+-.02855*phi2+1.99025E-4*lambda2)+phi2*(.0998909+-.0491032*phi2))]}function littrowRaw(lambda,phi){return[sin(lambda)/cos(phi),tan(phi)*cos(lambda)]}function loximuthalRaw(phi0){function forward(lambda,phi){var y\x3dphi-phi0,x\x3d1E-6\x3eabs(y)?lambda*cosPhi0:1E-6\x3eabs(x\x3dquarterPi+phi/2)||1E-6\x3eabs(abs(x)-halfPi)?0:lambda*y/log(tan(x)/tanPhi0);return[x,y]}var cosPhi0\x3dcos(phi0),tanPhi0\x3dtan(quarterPi+phi0/2);forward.invert\x3dfunction(x,y){var lambda,phi\x3dy+phi0;return[1E-6\x3eabs(y)?x/cosPhi0:\n1E-6\x3eabs(lambda\x3dquarterPi+phi/2)||1E-6\x3eabs(abs(lambda)-halfPi)?0:x*log(tan(lambda)/tanPhi0)/y,phi]};return forward}function millerRaw(lambda,phi){return[lambda,1.25*log(tan(quarterPi+.4*phi))]}function modifiedStereographicRaw(C){function forward(lambda,phi){var cosPhi\x3dcos(phi),k\x3d2/(1+cosPhi*cos(lambda));lambda\x3dk*cosPhi*sin(lambda);phi\x3dk*sin(phi);k\x3dm;cosPhi\x3dC[k];for(var ar\x3dcosPhi[0],ai\x3dcosPhi[1],t;0\x3c\x3d--k;)cosPhi\x3dC[k],ar\x3dcosPhi[0]+lambda*(t\x3dar)-phi*ai,ai\x3dcosPhi[1]+lambda*ai+phi*t;ar\x3dlambda*(t\x3dar)-\nphi*ai;return[ar,lambda*ai+phi*t]}var m\x3dC.length-1;forward.invert\x3dfunction(x,y){var i\x3d20,zr\x3dx,zi\x3dy;do{for(var j\x3dm,w\x3dC[j],ar\x3dw[0],ai\x3dw[1],br\x3d0,bi\x3d0,t;0\x3c\x3d--j;)w\x3dC[j],br\x3dar+zr*(t\x3dbr)-zi*bi,bi\x3dai+zr*bi+zi*t,ar\x3dw[0]+zr*(t\x3dar)-zi*ai,ai\x3dw[1]+zr*ai+zi*t;br\x3dar+zr*(t\x3dbr)-zi*bi;bi\x3dai+zr*bi+zi*t;ar\x3dzr*(t\x3dar)-zi*ai-x;ai\x3dzr*ai+zi*t-y;w\x3dbr*br+bi*bi;zr-\x3dj\x3d(ar*br+ai*bi)/w;zi-\x3dar\x3d(ai*br-ar*bi)/w}while(1E-12\x3cabs(j)+abs(ar)\x26\x260\x3c--i);if(i)return x\x3dsqrt(zr*zr+zi*zi),y\x3d2*atan(.5*x),i\x3dsin(y),[atan2(zr*i,x*cos(y)),x?asin(zi*\ni/x):0]};return forward}function modifiedStereographic(coefficients,rotate){coefficients\x3dd3Geo.geoProjection(modifiedStereographicRaw(coefficients)).rotate(rotate).clipAngle(90);var r\x3dd3Geo.geoRotation(rotate),center\x3dcoefficients.center;delete coefficients.rotate;coefficients.center\x3dfunction(_){return arguments.length?center(r(_)):r.invert(center())};return coefficients}function mtFlatPolarParabolicRaw(lambda,phi){phi\x3dasin(7*sin(phi)/(3*sqrt6));return[sqrt6*lambda*(2*cos(2*phi/3)-1)/sqrt7,9*sin(phi/\n3)/sqrt7]}function mtFlatPolarQuarticRaw(lambda,phi){for(var k\x3d(1+sqrt1_2)*sin(phi),i\x3d0,delta;25\x3ei\x26\x26!(phi-\x3ddelta\x3d(sin(phi/2)+sin(phi)-k)/(.5*cos(phi/2)+cos(phi)),1E-6\x3eabs(delta));i++);return[lambda*(1+2*cos(phi)/cos(phi/2))/(3*sqrt2),2*sqrt(3)*sin(phi/2)/sqrt(2+sqrt2)]}function mtFlatPolarSinusoidalRaw(lambda,phi){var A\x3dsqrt(6/(4+pi$jscomp$0)),k\x3d(1+pi$jscomp$0/4)*sin(phi);phi/\x3d2;for(var i\x3d0,delta;25\x3ei\x26\x26!(phi-\x3ddelta\x3d(phi/2+sin(phi)-k)/(.5+cos(phi)),1E-6\x3eabs(delta));i++);return[A*(.5+cos(phi))*lambda/\n1.5,A*phi]}function naturalEarth2Raw(lambda,phi){var phi2\x3dphi*phi,phi4\x3dphi2*phi2,phi6\x3dphi2*phi4;return[lambda*(.84719-.13063*phi2+phi6*phi6*(-.04515+.05494*phi2-.02326*phi4+.00331*phi6)),phi*(1.01183+phi4*phi4*(-.02625+.01926*phi2-.00396*phi4))]}function nellHammerRaw(lambda,phi){return[lambda*(1+cos(phi))/2,2*(phi-tan(phi/2))]}function nicolosiRaw(lambda,phi){var sinPhi\x3dsin(phi),q\x3dcos(phi),s\x3dsign(lambda);if(0\x3d\x3d\x3dlambda||abs(phi)\x3d\x3d\x3dhalfPi)return[0,phi];if(0\x3d\x3d\x3dphi)return[lambda,0];if(abs(lambda)\x3d\x3d\x3d\nhalfPi)return[lambda*q,halfPi*sinPhi];lambda\x3dpi$jscomp$0/(2*lambda)-2*lambda/pi$jscomp$0;var c\x3d2*phi/pi$jscomp$0,d\x3d(1-c*c)/(sinPhi-c),b2\x3dlambda*lambda,d2\x3dd*d;c\x3d1+b2/d2;var d2b2\x3d1+d2/b2,M\x3d(lambda*sinPhi/d-lambda/2)/c,N\x3d(d2*sinPhi/b2+d/2)/d2b2;sinPhi\x3dN*N-(d2*sinPhi*sinPhi/b2+d*sinPhi-1)/d2b2;return[halfPi*(M+sqrt(M*M+q*q/c)*s),halfPi*(N+sqrt(0\x3esinPhi?0:sinPhi)*sign(-phi*lambda)*s)]}function pattersonRaw(lambda,phi){var phi2\x3dphi*phi;return[lambda,phi*(1.0148+phi2*phi2*(.23185+phi2*(-.14499+.02406*phi2)))]}\nfunction polyconicRaw(lambda,phi){if(1E-6\x3eabs(phi))return[lambda,0];var tanPhi\x3dtan(phi);lambda*\x3dsin(phi);return[sin(lambda)/tanPhi,phi+(1-cos(lambda))/tanPhi]}function matrix(a,b){var u\x3dsubtract(a[1],a[0]),v\x3dsubtract(b[1],b[0]),phi\x3datan2(u[0]*v[1]-u[1]*v[0],u[0]*v[0]+u[1]*v[1]);u\x3dsqrt(u[0]*u[0]+u[1]*u[1])/sqrt(v[0]*v[0]+v[1]*v[1]);return multiply([1,0,a[0][0],0,1,a[0][1]],multiply([u,0,0,0,u,0],multiply([cos(phi),sin(phi),0,-sin(phi),cos(phi),0],[1,0,-b[0][0],0,1,-b[0][1]])))}function multiply(a,\nb){return[a[0]*b[0]+a[1]*b[3],a[0]*b[1]+a[1]*b[4],a[0]*b[2]+a[1]*b[5]+a[2],a[3]*b[0]+a[4]*b[3],a[3]*b[1]+a[4]*b[4],a[3]*b[2]+a[4]*b[5]+a[5]]}function subtract(a,b){return[a[0]-b[0],a[1]-b[1]]}function polyhedral(root,face,r){function recurse(node,parent){node.edges\x3dfaceEdges(node.face);if(parent.face){var shared\x3dnode.shared\x3dsharedEdge(node.face,parent.face),m\x3dmatrix(shared.map(parent.project),shared.map(node.project));node.transform\x3dparent.transform?multiply(parent.transform,m):m;m\x3dparent.edges;for(var i\x3d\n0,n\x3dm.length;i\x3cn;++i)pointEqual$1(shared[0],m[i][1])\x26\x26pointEqual$1(shared[1],m[i][0])\x26\x26(m[i]\x3dnode),pointEqual$1(shared[0],m[i][0])\x26\x26pointEqual$1(shared[1],m[i][1])\x26\x26(m[i]\x3dnode);m\x3dnode.edges;i\x3d0;for(n\x3dm.length;i\x3cn;++i)pointEqual$1(shared[0],m[i][0])\x26\x26pointEqual$1(shared[1],m[i][1])\x26\x26(m[i]\x3dparent),pointEqual$1(shared[0],m[i][1])\x26\x26pointEqual$1(shared[1],m[i][0])\x26\x26(m[i]\x3dparent)}else node.transform\x3dparent.transform;node.children\x26\x26node.children.forEach(function(child){recurse(child,node)});return node}\nfunction forward(lambda,phi){var node\x3dface(lambda,phi);lambda\x3dnode.project([lambda*degrees,phi*degrees]);if(node\x3dnode.transform)return[node[0]*lambda[0]+node[1]*lambda[1]+node[2],-(node[3]*lambda[0]+node[4]*lambda[1]+node[5])];lambda[1]\x3d-lambda[1];return lambda}function faceInvert(node,coordinates){var invert\x3dnode.project.invert,t\x3dnode.transform,point\x3dcoordinates;if(t){var k\x3d1/(t[0]*t[4]-t[1]*t[3]);t\x3d[k*t[4],-k*t[1],k*(t[1]*t[5]-t[2]*t[4]),-k*t[3],k*t[0],k*(t[2]*t[3]-t[0]*t[5])];point\x3d[t[0]*point[0]+\nt[1]*point[1]+t[2],t[3]*point[0]+t[4]*point[1]+t[5]]}if(t\x3dinvert)invert\x3dp\x3dinvert(point),invert\x3dface(invert[0]*radians,invert[1]*radians),t\x3dnode\x3d\x3d\x3dinvert;if(t)return p;var p;node\x3dnode.children;invert\x3d0;for(point\x3dnode\x26\x26node.length;invert\x3cpoint;++invert)if(p\x3dfaceInvert(node[invert],coordinates))return p}recurse(root,{transform:null});hasInverse(root)\x26\x26(forward.invert\x3dfunction(x,y){return(x\x3dfaceInvert(root,[x,-y]))\x26\x26(x[0]*\x3dradians,x[1]*\x3dradians,x)});var proj\x3dd3Geo.geoProjection(forward),stream_\x3dproj.stream;\nproj.stream\x3dfunction(stream){var rotate\x3dproj.rotate(),rotateStream\x3dstream_(stream),sphereStream\x3d(proj.rotate([0,0]),stream_(stream));proj.rotate(rotate);rotateStream.sphere\x3dfunction(){sphereStream.polygonStart();sphereStream.lineStart();outline(sphereStream,root);sphereStream.lineEnd();sphereStream.polygonEnd()};return rotateStream};return proj.angle(null\x3d\x3dr?-30:r*degrees)}function outline(stream,node,parent){var point,edges\x3dnode.edges,n\x3dedges.length;var edge\x3d{type:\x22MultiPoint\x22,coordinates:node.face};\nvar notPoles\x3dnode.face.filter(function(d){return 90!\x3d\x3dabs(d[1])}),b\x3dd3Geo.geoBounds({type:\x22MultiPoint\x22,coordinates:notPoles});notPoles\x3d!1;var j\x3d-1,dx\x3db[1][0]-b[0][0];b\x3d180\x3d\x3d\x3ddx||360\x3d\x3d\x3ddx?[(b[0][0]+b[1][0])/2,(b[0][1]+b[1][1])/2]:d3Geo.geoCentroid(edge);if(parent)for(;++j\x3cn\x26\x26edges[j]!\x3d\x3dparent;);++j;for(dx\x3d0;dx\x3cn;++dx)edge\x3dedges[(dx+j)%n],Array.isArray(edge)?(notPoles||(stream.point((point\x3dd3Geo.geoInterpolate(edge[0],b)(1E-6))[0],point[1]),notPoles\x3d!0),stream.point((point\x3dd3Geo.geoInterpolate(edge[1],\nb)(1E-6))[0],point[1])):(notPoles\x3d!1,edge!\x3d\x3dparent\x26\x26outline(stream,edge,node))}function pointEqual$1(a,b){return a\x26\x26b\x26\x26a[0]\x3d\x3d\x3db[0]\x26\x26a[1]\x3d\x3d\x3db[1]}function sharedEdge(a,b){for(var x,y,n\x3da.length,found\x3dnull,i\x3d0;i\x3cn;++i){x\x3da[i];for(var j\x3db.length;0\x3c\x3d--j;)if(y\x3db[j],x[0]\x3d\x3d\x3dy[0]\x26\x26x[1]\x3d\x3d\x3dy[1]){if(found)return[found,x];found\x3dx}}}function faceEdges(face){for(var n\x3dface.length,edges\x3d[],a\x3dface[n-1],i\x3d0;i\x3cn;++i)edges.push([a,a\x3dface[i]]);return edges}function hasInverse(node){return node.project.invert||node.children\x26\x26\nnode.children.some(hasInverse)}function collignonK(a,b){a\x3dcollignonRaw(a,b);return[a[0]*kx,a[1]]}function dot(a,b){for(var i\x3d0,n\x3da.length,s\x3d0;i\x3cn;++i)s+\x3da[i]*b[i];return s}function cross(a,b){return[a[1]*b[2]-a[2]*b[1],a[2]*b[0]-a[0]*b[2],a[0]*b[1]-a[1]*b[0]]}function spherical(cartesian){return[atan2(cartesian[1],cartesian[0])*degrees,asin(max(-1,min(1,cartesian[2])))*degrees]}function cartesian$jscomp$0(coordinates){var lambda\x3dcoordinates[0]*radians;coordinates\x3dcoordinates[1]*radians;var cosphi\x3d\ncos(coordinates);return[cosphi*cos(lambda),cosphi*sin(lambda),sin(coordinates)]}function noop(){}function projectFeatureCollection(o,stream){return{type:\x22FeatureCollection\x22,features:o.features.map(function(f){return projectFeature(f,stream)})}}function projectFeature(o,stream){return{type:\x22Feature\x22,id:o.id,properties:o.properties,geometry:projectGeometry(o.geometry,stream)}}function projectGeometryCollection(o$jscomp$0,stream){return{type:\x22GeometryCollection\x22,geometries:o$jscomp$0.geometries.map(function(o){return projectGeometry(o,\nstream)})}}function projectGeometry(o,stream){if(!o)return null;if(\x22GeometryCollection\x22\x3d\x3d\x3do.type)return projectGeometryCollection(o,stream);switch(o.type){case \x22Point\x22:var sink\x3dsinkPoint;break;case \x22MultiPoint\x22:sink\x3dsinkPoint;break;case \x22LineString\x22:sink\x3dsinkLine;break;case \x22MultiLineString\x22:sink\x3dsinkLine;break;case \x22Polygon\x22:sink\x3dsinkPolygon;break;case \x22MultiPolygon\x22:sink\x3dsinkPolygon;break;case \x22Sphere\x22:sink\x3dsinkPolygon;break;default:return null}d3Geo.geoStream(o,stream(sink));return sink.result()}\nfunction quincuncial(project){function projectQuincuncial(lambda,phi){var t\x3dabs(lambda)\x3chalfPi;phi\x3dproject(t?lambda:0\x3clambda?lambda-pi$jscomp$0:lambda+pi$jscomp$0,phi);lambda\x3d(phi[0]-phi[1])*sqrt1_2;phi\x3d(phi[0]+phi[1])*sqrt1_2;if(t)return[lambda,phi];t\x3ddx*sqrt1_2;var s\x3d0\x3clambda^0\x3cphi?-1:1;return[s*lambda-sign(phi)*t,s*phi-sign(lambda)*t]}var dx\x3dproject(halfPi,0)[0]-project(-halfPi,0)[0];project.invert\x26\x26(projectQuincuncial.invert\x3dfunction(x0,y0){var x\x3d(x0+y0)*sqrt1_2,y\x3d(y0-x0)*sqrt1_2,t\x3dabs(x)\x3c.5*\ndx\x26\x26abs(y)\x3c.5*dx;if(!t){var d\x3ddx*sqrt1_2,s\x3d0\x3cx^0\x3cy?-1:1;x0\x3d-s*x0+(0\x3cy?1:-1)*d;y0\x3d-s*y0+(0\x3cx?1:-1)*d;x\x3d(-x0-y0)*sqrt1_2;y\x3d(x0-y0)*sqrt1_2}y0\x3dproject.invert(x,y);t||(y0[0]+\x3d0\x3cx?pi$jscomp$0:-pi$jscomp$0);return y0});return d3Geo.geoProjection(projectQuincuncial).rotate([-90,-90,45]).clipAngle(179.999)}function peirce(){return quincuncial(guyouRaw).scale(111.48)}function rectangularPolyconicRaw(phi0){function forward(lambda,phi){lambda\x3dsinPhi0?tan(lambda*sinPhi0/2)/sinPhi0:lambda/2;if(!phi)return[2*lambda,\n-phi0];lambda\x3d2*atan(lambda*sin(phi));var cotPhi\x3d1/tan(phi);return[sin(lambda)*cotPhi,phi+(1-cos(lambda))*cotPhi-phi0]}var sinPhi0\x3dsin(phi0);forward.invert\x3dfunction(x,y){if(1E-6\x3eabs(y+\x3dphi0))return[sinPhi0?2*atan(sinPhi0*x/2)/sinPhi0:x,0];var k\x3dx*x+y*y,phi\x3d0,i\x3d10;do{var delta\x3dtan(phi);var secPhi\x3d1/cos(phi),j\x3dk-2*y*phi+phi*phi;phi-\x3ddelta\x3d(delta*j+2*(phi-y))/(2+j*secPhi*secPhi+2*(phi-y)*delta)}while(1E-6\x3cabs(delta)\x26\x260\x3c--i);x*\x3ddelta\x3dtan(phi);y\x3dtan(abs(y)\x3cabs(phi+1/delta)?.5*asin(x):.5*acos(x)+pi$jscomp$0/\n4)/sin(phi);return[sinPhi0?2*atan(sinPhi0*y)/sinPhi0:2*y,phi]};return forward}function robinsonRaw(lambda,phi){var i\x3dmin(18,36*abs(phi)/pi$jscomp$0),i0\x3dfloor(i);i-\x3di0;var ax\x3d(k\x3dK$1[i0])[0],ay\x3dk[1],bx\x3d(k\x3dK$1[++i0])[0],by\x3dk[1];i0\x3d(k\x3dK$1[min(19,++i0)])[0];k\x3dk[1];var k;return[lambda*(bx+i*(i0-ax)/2+i*i*(i0-2*bx+ax)/2),(0\x3cphi?halfPi:-halfPi)*(by+i*(k-ay)/2+i*i*(k-2*by+ay)/2)]}function satelliteVerticalRaw(P){function forward(lambda,phi){var cosPhi\x3dcos(phi),k\x3d(P-1)/(P-cosPhi*cos(lambda));return[k*cosPhi*\nsin(lambda),k*sin(phi)]}forward.invert\x3dfunction(x,y){var rho2\x3dx*x+y*y,rho\x3dsqrt(rho2);rho2\x3d(P-sqrt(1-rho2*(P+1)/(P-1)))/((P-1)/rho+rho/(P-1));return[atan2(x*rho2,rho*sqrt(1-rho2*rho2)),rho?asin(y*rho2/rho):0]};return forward}function satelliteRaw(P,omega){function forward(lambda,phi){lambda\x3dvertical(lambda,phi);phi\x3dlambda[1];var A\x3dphi*sinOmega/(P-1)+cosOmega;return[lambda[0]*cosOmega/A,phi/A]}var vertical\x3dsatelliteVerticalRaw(P);if(!omega)return vertical;var cosOmega\x3dcos(omega),sinOmega\x3dsin(omega);\nforward.invert\x3dfunction(x,y){var k\x3d(P-1)/(P-1-y*sinOmega);return vertical.invert(k*x,k*y*cosOmega)};return forward}function nonempty(coordinates){return 0\x3ccoordinates.length}function normalizePoint(y){return-90\x3d\x3d\x3dy||90\x3d\x3d\x3dy?[0,y]:[-180,Math.floor(1E4*y)/1E4]}function clampPoint(p){var x\x3dp[0],y\x3dp[1],clamped\x3d!1;-179.9999\x3e\x3dx?(x\x3d-180,clamped\x3d!0):179.9999\x3c\x3dx\x26\x26(x\x3d180,clamped\x3d!0);-89.9999\x3e\x3dy?(y\x3d-90,clamped\x3d!0):89.9999\x3c\x3dy\x26\x26(y\x3d90,clamped\x3d!0);return clamped?[x,y]:p}function clampPoints(points){return points.map(clampPoint)}\nfunction extractFragments(rings,polygon,fragments){for(var j\x3d0,m\x3drings.length;j\x3cm;++j){var ring\x3drings[j].slice();fragments.push({index:-1,polygon:polygon,ring:ring});for(var i\x3d0,n\x3dring.length;i\x3cn;++i){var point\x3dring[i],x\x3dpoint[0],y\x3dpoint[1];if(-179.9999\x3e\x3dx||179.9999\x3c\x3dx||-89.9999\x3e\x3dy||89.9999\x3c\x3dy){ring[i]\x3dclampPoint(point);for(point\x3di+1;point\x3cn;++point){var pointk\x3dring[point];x\x3dpointk[0];pointk\x3dpointk[1];if(-179.9999\x3cx\x26\x26179.9999\x3ex\x26\x26-89.9999\x3cpointk\x26\x2689.9999\x3epointk)break}if(point!\x3d\x3di+1){i?(i\x3d{index:-1,\npolygon:polygon,ring:ring.slice(0,i+1)},i.ring[i.ring.length-1]\x3dnormalizePoint(y),fragments[fragments.length-1]\x3di):fragments.pop();if(point\x3e\x3dn)break;fragments.push({index:-1,polygon:polygon,ring:ring\x3dring.slice(point-1)});ring[0]\x3dnormalizePoint(ring[0][1]);i\x3d-1;n\x3dring.length}}}}}function stitchFragments(fragments){var i,n\x3dfragments.length,fragmentByStart\x3d{},fragmentByEnd\x3d{};for(i\x3d0;i\x3cn;++i){var fragment\x3dfragments[i];var start\x3dfragment.ring[0];var end\x3dfragment.ring[fragment.ring.length-1];start[0]\x3d\x3d\x3d\nend[0]\x26\x26start[1]\x3d\x3d\x3dend[1]?(fragment.polygon.push(fragment.ring),fragments[i]\x3dnull):(fragment.index\x3di,fragmentByStart[start]\x3dfragmentByEnd[end]\x3dfragment)}for(i\x3d0;i\x3cn;++i)if(fragment\x3dfragments[i]){start\x3dfragment.ring[0];end\x3dfragment.ring[fragment.ring.length-1];var startFragment\x3dfragmentByEnd[start];var endFragment\x3dfragmentByStart[end];delete fragmentByStart[start];delete fragmentByEnd[end];start[0]\x3d\x3d\x3dend[0]\x26\x26start[1]\x3d\x3d\x3dend[1]?fragment.polygon.push(fragment.ring):startFragment?(delete fragmentByEnd[start],\ndelete fragmentByStart[startFragment.ring[0]],startFragment.ring.pop(),fragments[startFragment.index]\x3dnull,fragment\x3d{index:-1,polygon:startFragment.polygon,ring:startFragment.ring.concat(fragment.ring)},startFragment\x3d\x3d\x3dendFragment?fragment.polygon.push(fragment.ring):(fragment.index\x3dn++,fragments.push(fragmentByStart[fragment.ring[0]]\x3dfragmentByEnd[fragment.ring[fragment.ring.length-1]]\x3dfragment))):endFragment?(delete fragmentByStart[end],delete fragmentByEnd[endFragment.ring[endFragment.ring.length-\n1]],fragment.ring.pop(),fragment\x3d{index:n++,polygon:endFragment.polygon,ring:fragment.ring.concat(endFragment.ring)},fragments[endFragment.index]\x3dnull,fragments.push(fragmentByStart[fragment.ring[0]]\x3dfragmentByEnd[fragment.ring[fragment.ring.length-1]]\x3dfragment)):(fragment.ring.push(fragment.ring[0]),fragment.polygon.push(fragment.ring))}}function stitchFeature(input){var output\x3d{type:\x22Feature\x22,geometry:stitchGeometry(input.geometry)};null!\x3dinput.id\x26\x26(output.id\x3dinput.id);null!\x3dinput.bbox\x26\x26(output.bbox\x3d\ninput.bbox);null!\x3dinput.properties\x26\x26(output.properties\x3dinput.properties);return output}function stitchGeometry(input){if(null\x3d\x3dinput)return input;switch(input.type){case \x22GeometryCollection\x22:var output\x3d{type:\x22GeometryCollection\x22,geometries:input.geometries.map(stitchGeometry)};break;case \x22Point\x22:output\x3d{type:\x22Point\x22,coordinates:clampPoint(input.coordinates)};break;case \x22MultiPoint\x22:case \x22LineString\x22:output\x3d{type:input.type,coordinates:clampPoints(input.coordinates)};break;case \x22MultiLineString\x22:output\x3d\n{type:\x22MultiLineString\x22,coordinates:input.coordinates.map(clampPoints)};break;case \x22Polygon\x22:var i\x3d[];extractFragments(input.coordinates,i,output\x3d[]);stitchFragments(output);output\x3d{type:\x22Polygon\x22,coordinates:i};break;case \x22MultiPolygon\x22:output\x3d[];i\x3d-1;var n\x3dinput.coordinates.length;for(var polygons\x3dArray(n);++i\x3cn;)extractFragments(input.coordinates[i],polygons[i]\x3d[],output);stitchFragments(output);output\x3d{type:\x22MultiPolygon\x22,coordinates:polygons.filter(nonempty)};break;default:return input}null!\x3d\ninput.bbox\x26\x26(output.bbox\x3dinput.bbox);return output}function timesRaw(lambda,phi){phi\x3dtan(phi/2);var s\x3dsin(quarterPi*phi);return[lambda*(.74482-.34588*s*s),1.70711*phi]}function twoPoint(raw,p0,p1){var i\x3dd3Geo.geoInterpolate(p0,p1);p1\x3di(.5);p0\x3dd3Geo.geoRotation([-p1[0],-p1[1]])(p0);i\x3di.distance/2;var y\x3d-asin(sin(p0[1]*radians)/sin(i));p1\x3d[-p1[0],-p1[1],-(0\x3cp0[0]?pi$jscomp$0-y:y)*degrees];raw\x3dd3Geo.geoProjection(raw(i)).rotate(p1);var r\x3dd3Geo.geoRotation(p1),center\x3draw.center;delete raw.rotate;raw.center\x3d\nfunction(_){return arguments.length?center(r(_)):r.invert(center())};return raw.clipAngle(90)}function twoPointAzimuthalRaw(d){function forward(lambda,phi){lambda\x3dd3Geo.geoGnomonicRaw(lambda,phi);lambda[0]*\x3dcosd;return lambda}var cosd\x3dcos(d);forward.invert\x3dfunction(x,y){return d3Geo.geoGnomonicRaw.invert(x/cosd,y)};return forward}function twoPointAzimuthal(p0,p1){return twoPoint(twoPointAzimuthalRaw,p0,p1)}function twoPointEquidistantRaw(z0){function forward(lambda,phi){var za\x3dacos(cos(phi)*cos(lambda-\nlambdaa));lambda\x3dacos(cos(phi)*cos(lambda-lambdab));za*\x3dza;lambda*\x3dlambda;return[(za-lambda)/(2*z0),(0\x3ephi?-1:1)*sqrt(4*z02*lambda-(z02-za+lambda)*(z02-za+lambda))/(2*z0)]}if(!(z0*\x3d2))return d3Geo.geoAzimuthalEquidistantRaw;var lambdaa\x3d-z0/2,lambdab\x3d-lambdaa,z02\x3dz0*z0,tanLambda0\x3dtan(lambdab),S\x3d.5/sin(lambdab);forward.invert\x3dfunction(x,y){var y2\x3dy*y,cosza\x3dcos(sqrt(y2+(t\x3dx+lambdaa)*t));x\x3dcos(sqrt(y2+(t\x3dx+lambdab)*t));var t,d;return[atan2(d\x3dcosza-x,t\x3d(cosza+x)*tanLambda0),(0\x3ey?-1:1)*acos(sqrt(t*t+d*\nd)*S)]};return forward}function twoPointEquidistant(p0,p1){return twoPoint(twoPointEquidistantRaw,p0,p1)}function vanDerGrintenRaw(lambda,phi){if(1E-6\x3eabs(phi))return[lambda,0];var sinTheta\x3dabs(phi/halfPi),theta\x3dasin(sinTheta);if(1E-6\x3eabs(lambda)||1E-6\x3eabs(abs(phi)-halfPi))return[0,sign(phi)*pi$jscomp$0*tan(theta/2)];var cosTheta\x3dcos(theta);theta\x3dabs(pi$jscomp$0/lambda-lambda/pi$jscomp$0)/2;var A2\x3dtheta*theta;cosTheta/\x3dsinTheta+cosTheta-1;sinTheta\x3dcosTheta*(2/sinTheta-1);var P2\x3dsinTheta*sinTheta,\nP2_A2\x3dP2+A2,G_P2\x3dcosTheta-P2,Q\x3dA2+cosTheta;return[sign(lambda)*pi$jscomp$0*(theta*G_P2+sqrt(A2*G_P2*G_P2-P2_A2*(cosTheta*cosTheta-P2)))/P2_A2,sign(phi)*pi$jscomp$0*(sinTheta*Q-theta*sqrt((A2+1)*P2_A2-Q*Q))/P2_A2]}function vanDerGrinten2Raw(lambda,phi){if(1E-6\x3eabs(phi))return[lambda,0];var sinTheta\x3dabs(phi/halfPi),theta\x3dasin(sinTheta);if(1E-6\x3eabs(lambda)||1E-6\x3eabs(abs(phi)-halfPi))return[0,sign(phi)*pi$jscomp$0*tan(theta/2)];var cosTheta\x3dcos(theta);theta\x3dabs(pi$jscomp$0/lambda-lambda/pi$jscomp$0)/\n2;var A2\x3dtheta*theta;sinTheta\x3dcosTheta*(sqrt(1+A2)-theta*cosTheta)/(1+A2*sinTheta*sinTheta);return[sign(lambda)*pi$jscomp$0*sinTheta,sign(phi)*pi$jscomp$0*sqrt(1-sinTheta*(2*theta+sinTheta))]}function vanDerGrinten3Raw(lambda,phi){if(1E-6\x3eabs(phi))return[lambda,0];var sinTheta\x3dphi/halfPi,theta\x3dasin(sinTheta);if(1E-6\x3eabs(lambda)||1E-6\x3eabs(abs(phi)-halfPi))return[0,pi$jscomp$0*tan(theta/2)];phi\x3d(pi$jscomp$0/lambda-lambda/pi$jscomp$0)/2;sinTheta/\x3d1+cos(theta);return[pi$jscomp$0*(sign(lambda)*sqrt(phi*\nphi+1-sinTheta*sinTheta)-phi),pi$jscomp$0*sinTheta]}function vanDerGrinten4Raw(lambda,phi){if(!phi)return[lambda,0];var phi0\x3dabs(phi);if(!lambda||phi0\x3d\x3d\x3dhalfPi)return[0,phi];var B\x3dphi0/halfPi;phi0\x3dB*B;var C\x3d(8*B-phi0*(phi0+2)-5)/(2*phi0*(B-1)),C2\x3dC*C,BC\x3dB*C,B_C2\x3dphi0+C2+2*BC;B+\x3d3*C;C\x3dlambda/halfPi;C+\x3d1/C;C\x3dsign(abs(lambda)-halfPi)*sqrt(C*C-4);var D2\x3dC*C;phi0\x3d(C*(B_C2+C2-1)+2*sqrt(B_C2*(phi0+C2*D2-1)+(1-phi0)*(phi0*(B*B+4*C2)+12*BC*C2+4*C2*C2)))/(4*B_C2+D2);return[sign(lambda)*halfPi*phi0,sign(phi)*\nhalfPi*sqrt(1+C*abs(phi0)-phi0*phi0)]}function wagnerFormula(cx,cy,m1,m2,n){function forward(lambda,phi){phi\x3dm1*sin(m2*phi);var c0\x3dsqrt(1-phi*phi),c1\x3dsqrt(2/(1+c0*cos(lambda*\x3dn)));return[cx*c0*c1*sin(lambda),cy*phi*c1]}forward.invert\x3dfunction(x,y){var t1\x3dx/cx,t2\x3dy/cy;t1\x3dsqrt(t1*t1+t2*t2);t2\x3d2*asin(t1/2);return[atan2(x*tan(t2),cx*t1)/n,t1\x26\x26asin(y*sin(t2)/(cy*m1*t1))/m2]};return forward}function wagnerRaw(poleline,parallels,inflation,ratio){var phi1\x3dpi$jscomp$0/3;poleline\x3dmax(poleline,1E-6);parallels\x3d\nmax(parallels,1E-6);poleline\x3dmin(poleline,halfPi);parallels\x3dmin(parallels,pi$jscomp$0-1E-6);inflation\x3dmax(inflation,0);inflation\x3dmin(inflation,99.999999);ratio\x3dmax(ratio,1E-6);var vratio\x3dratio/100;inflation\x3dacos((inflation/100+1)*cos(phi1))/phi1;phi1\x3dsin(poleline)/sin(inflation*halfPi);ratio\x3dparallels/pi$jscomp$0;parallels\x3dsqrt(vratio*sin(poleline/2)/sin(parallels/2));poleline\x3dparallels/sqrt(ratio*phi1*inflation);parallels\x3d1/(parallels*sqrt(ratio*phi1*inflation));return wagnerFormula(poleline,parallels,\nphi1,inflation,ratio)}function wagner(){var poleline\x3d65*radians,parallels\x3d60*radians,inflation\x3d20,ratio\x3d200,mutate\x3dd3Geo.geoProjectionMutator(wagnerRaw),projection\x3dmutate(poleline,parallels,inflation,ratio);projection.poleline\x3dfunction(_){return arguments.length?mutate(poleline\x3d+_*radians,parallels,inflation,ratio):poleline*degrees};projection.parallels\x3dfunction(_){return arguments.length?mutate(poleline,parallels\x3d+_*radians,inflation,ratio):parallels*degrees};projection.inflation\x3dfunction(_){return arguments.length?\nmutate(poleline,parallels,inflation\x3d+_,ratio):inflation};projection.ratio\x3dfunction(_){return arguments.length?mutate(poleline,parallels,inflation,ratio\x3d+_):ratio};return projection.scale(163.775)}function wagner6Raw(lambda,phi){return[lambda*sqrt(1-3*phi*phi/(pi$jscomp$0*pi$jscomp$0)),phi]}function wiechelRaw(lambda,phi){var cosPhi\x3dcos(phi),sinPhi\x3dcos(lambda)*cosPhi,sin1_Phi\x3d1-sinPhi;phi\x3dcos(lambda\x3datan2(sin(lambda)*cosPhi,-sin(phi)));lambda\x3dsin(lambda);cosPhi\x3dsqrt(1-sinPhi*sinPhi);return[lambda*\ncosPhi-phi*sin1_Phi,-phi*cosPhi-lambda*sin1_Phi]}function winkel3Raw(lambda,phi){var coordinates\x3daitoffRaw(lambda,phi);return[(coordinates[0]+lambda/halfPi)/2,(coordinates[1]+phi)/2]}var abs\x3dMath.abs,atan\x3dMath.atan,atan2\x3dMath.atan2,cos\x3dMath.cos,exp\x3dMath.exp,floor\x3dMath.floor,log\x3dMath.log,max\x3dMath.max,min\x3dMath.min,pow\x3dMath.pow,round\x3dMath.round,sign\x3dMath.sign||function(x){return 0\x3cx?1:0\x3ex?-1:0},sin\x3dMath.sin,tan\x3dMath.tan,pi$jscomp$0\x3dMath.PI,halfPi\x3dpi$jscomp$0/2,quarterPi\x3dpi$jscomp$0/4,sqrt1_2\x3dMath.SQRT1_2,\nsqrt2\x3dsqrt(2),sqrtPi\x3dsqrt(pi$jscomp$0),tau\x3d2*pi$jscomp$0,degrees\x3d180/pi$jscomp$0,radians\x3dpi$jscomp$0/180;aitoffRaw.invert\x3dfunction(x,y){if(!(x*x+4*y*y\x3epi$jscomp$0*pi$jscomp$0+1E-6)){var x1\x3dx,y1\x3dy,i\x3d25;do{var sinx\x3dsin(x1),sinx_2\x3dsin(x1/2),cosx_2\x3dcos(x1/2),siny\x3dsin(y1),cosy\x3dcos(y1),sin_2y\x3dsin(2*y1),sin2y\x3dsiny*siny,cos2y\x3dcosy*cosy,sin2x_2\x3dsinx_2*sinx_2,c\x3d1-cos2y*cosx_2*cosx_2,e\x3dc?acos(cosy*cosx_2)*sqrt(f\x3d1/c):f\x3d0,f;c\x3d2*e*cosy*sinx_2-x;var fy\x3de*siny-y,dxdx\x3df*(cos2y*sin2x_2+e*cosy*cosx_2*sin2y),dxdy\x3df*\n(.5*sinx*sin_2y-2*e*siny*sinx_2);sinx\x3d.25*f*(sin_2y*sinx_2-e*siny*cos2y*sinx);cosy\x3df*(sin2y*cosx_2+e*sin2x_2*cosy);cosx_2\x3ddxdy*sinx-cosy*dxdx;if(!cosx_2)break;dxdy\x3d(fy*dxdy-c*cosy)/cosx_2;c\x3d(c*sinx-fy*dxdx)/cosx_2;x1-\x3ddxdy;y1-\x3dc}while((1E-6\x3cabs(dxdy)||1E-6\x3cabs(c))\x26\x260\x3c--i);return[x1,y1]}};augustRaw.invert\x3dfunction(x,y){x*\x3d.375;y*\x3d.375;if(!x\x26\x261\x3cabs(y))return null;var s\x3d1+x*x+y*y,sin3Eta\x3dsqrt((s-sqrt(s*s-4*y*y))/2);s\x3dasin(sin3Eta)/3;sin3Eta?(sin3Eta\x3dabs(y/sin3Eta),sin3Eta\x3dlog(sin3Eta+sqrt(sin3Eta*sin3Eta-\n1))/3):(sin3Eta\x3dabs(x),sin3Eta\x3dlog(sin3Eta+sqrt(sin3Eta*sin3Eta+1))/3);var cosEta\x3dcos(s),coshXi\x3dcosh(sin3Eta),d\x3dcoshXi*coshXi-cosEta*cosEta;return[2*sign(x)*atan2(sinh(sin3Eta)*cosEta,.25-d),2*sign(y)*atan2(coshXi*sin(s),.25+d)]};var sqrt8\x3dsqrt(8),phi0$jscomp$0\x3dlog(1+sqrt2);bakerRaw.invert\x3dfunction(x,y){if((y0\x3dabs(y))\x3cphi0$jscomp$0)return[x,2*atan(exp(y))-halfPi];var phi\x3dquarterPi,i\x3d25,y0;do{var delta\x3dcos(phi/2);var tanPhi_2\x3dtan(phi/2);phi-\x3ddelta\x3d(sqrt8*(phi-quarterPi)-log(tanPhi_2)-y0)/(sqrt8-delta*\ndelta/(2*tanPhi_2))}while(1E-12\x3cabs(delta)\x26\x260\x3c--i);return[x/(cos(phi)*(sqrt8-1/sin(phi))),sign(y)*phi]};hammerQuarticAuthalicRaw.invert\x3dfunction(x,y){y\x3d2*asin(y/2);return[x*cos(y/2)/cos(y),y]};var mollweideRaw\x3dmollweideBromleyRaw(sqrt2/halfPi,sqrt2,pi$jscomp$0);boggsRaw.invert\x3dfunction(x,y){var ky\x3d2.00276*y;y\x3d0\x3ey?-quarterPi:quarterPi;var i\x3d25;do{var delta\x3dky-sqrt2*sin(y);y-\x3ddelta\x3d(sin(2*y)+2*y-pi$jscomp$0*sin(delta))/(2*cos(2*y)+2+pi$jscomp$0*cos(delta)*sqrt2*cos(y))}while(1E-6\x3cabs(delta)\x26\x260\x3c--i);\ndelta\x3dky-sqrt2*sin(y);return[x*(1/cos(delta)+1.11072/cos(y))/2.00276,delta]};sinusoidalRaw.invert\x3dfunction(x,y){return[x/cos(y),y]};var bromleyRaw\x3dmollweideBromleyRaw(1,4/pi$jscomp$0,pi$jscomp$0);collignonRaw.invert\x3dfunction(x,y){var lambda\x3d(lambda\x3dy/sqrtPi-1)*lambda;return[0\x3clambda?x*sqrt(pi$jscomp$0/lambda)/2:0,asin(1-lambda)]};var sqrt3\x3dsqrt(3);crasterRaw.invert\x3dfunction(x,y){y\x3d3*asin(y/(sqrt3*sqrtPi));return[sqrtPi*x/(sqrt3*(2*cos(2*y/3)-1)),y]};eckert1Raw.invert\x3dfunction(x,y){var alpha\x3dsqrt(8/\n(3*pi$jscomp$0));y/\x3dalpha;return[x/(alpha*(1-abs(y)/pi$jscomp$0)),y]};eckert2Raw.invert\x3dfunction(x,y){var alpha\x3d2-abs(y)/sqrt(2*pi$jscomp$0/3);return[x*sqrt(6*pi$jscomp$0)/(2*alpha),sign(y)*asin((4-alpha*alpha)/3)]};eckert3Raw.invert\x3dfunction(x,y){var k\x3dsqrt(pi$jscomp$0*(4+pi$jscomp$0))/2;return[x*k/(1+sqrt(1-y*y*(4+pi$jscomp$0)/(4*pi$jscomp$0))),y*k/2]};eckert4Raw.invert\x3dfunction(x,y){y\x3dy*sqrt((4+pi$jscomp$0)/pi$jscomp$0)/2;var k\x3dasin(y),c\x3dcos(k);return[x/(2/sqrt(pi$jscomp$0*(4+pi$jscomp$0))*(1+\nc)),asin((k+y*(c+2))/(2+halfPi))]};eckert5Raw.invert\x3dfunction(x,y){var k\x3dsqrt(2+pi$jscomp$0);y\x3dy*k/2;return[k*x/(1+cos(y)),y]};eckert6Raw.invert\x3dfunction(x,y){var j\x3d1+halfPi,k\x3dsqrt(j/2);return[2*x*k/(1+cos(y*\x3dk)),asin((y+sin(y))/j)]};var eisenlohrK\x3d3+2*sqrt2;eisenlohrRaw.invert\x3dfunction(x,y){if(!(p\x3daugustRaw.invert(x/1.2,1.065*y)))return null;var lambda\x3dp[0];p\x3dp[1];var i\x3d20,p;x/\x3deisenlohrK;y/\x3deisenlohrK;do{var _0\x3dlambda/2,_1\x3dp/2,s0\x3dsin(_0),c0\x3dcos(_0),s1\x3dsin(_1),c1\x3dcos(_1),cos1\x3dcos(p),k\x3dsqrt(cos1),\nt\x3ds1/(c1+sqrt2*c0*k),t2\x3dt*t,c\x3dsqrt(2/(1+t2)),v2\x3d(sqrt2*c1+(c0+s0)*k)/(sqrt2*c1+(c0-s0)*k),v\x3dsqrt(v2),vm1v\x3dv-1/v,vp1v\x3dv+1/v;_1\x3dc*vm1v-2*log(v)-x;_0\x3dc*t*vp1v-2*atan(t)-y;var deltatDeltaLambda\x3ds1\x26\x26sqrt1_2*k*s0*t2/s1,deltatDeltaPhi\x3d(sqrt2*c0*c1+k)/(2*(c1+sqrt2*c0*k)*(c1+sqrt2*c0*k)*k),deltacDeltat\x3d-.5*t*c*c*c,deltacDeltaLambda\x3ddeltacDeltat*deltatDeltaLambda;deltacDeltat*\x3ddeltatDeltaPhi;var A\x3d(A\x3d2*c1+sqrt2*k*(c0-s0))*A*v;c0\x3d(sqrt2*c0*c1*k+cos1)/A;s1\x3d-(sqrt2*s0*s1)/(k*A);s0\x3dvm1v*deltacDeltaLambda-2*c0/\nv+c*(c0+c0/v2);v\x3dvm1v*deltacDeltat-2*s1/v+c*(s1+s1/v2);deltatDeltaLambda\x3dt*vp1v*deltacDeltaLambda-2*deltatDeltaLambda/(1+t2)+c*vp1v*deltatDeltaLambda+c*t*(c0-c0/v2);t2\x3dt*vp1v*deltacDeltat-2*deltatDeltaPhi/(1+t2)+c*vp1v*deltatDeltaPhi+c*t*(s1-s1/v2);t\x3dv*deltatDeltaLambda-t2*s0;if(!t)break;t2\x3d(_0*v-_1*t2)/t;_1\x3d(_1*deltatDeltaLambda-_0*s0)/t;lambda-\x3dt2;p\x3dmax(-halfPi,min(halfPi,p-_1))}while((1E-6\x3cabs(t2)||1E-6\x3cabs(_1))\x26\x260\x3c--i);return 1E-6\x3eabs(abs(p)-halfPi)?[0,p]:i\x26\x26[lambda,p]};var faheyK\x3dcos(35*radians);\nfaheyRaw.invert\x3dfunction(x,y){y/\x3d1+faheyK;return[x\x26\x26x/(faheyK*sqrt(1-y*y)),2*atan(y)]};foucautRaw.invert\x3dfunction(x,y){var k\x3datan(y/sqrtPi);y\x3dcos(k);k*\x3d2;return[x*sqrtPi/2/(cos(k)*y*y),k]};var ginzburg4Raw\x3dginzburgPolyconicRaw(2.8284,-1.6988,.75432,-.18071,1.76003,-.38914,.042555),ginzburg5Raw\x3dginzburgPolyconicRaw(2.583819,-.835827,.170354,-.038094,1.543313,-.411435,.082742),ginzburg6Raw\x3dginzburgPolyconicRaw(5/6*pi$jscomp$0,-.62636,-.0344,0,1.3493,-.05524,0,.045);ginzburg8Raw.invert\x3dfunction(x,y){var lambda\x3d\nx,phi\x3dy,i\x3d50,delta;do{var phi2\x3dphi*phi;phi-\x3ddelta\x3d(phi*(1+phi2/12)-y)/(1+phi2/4)}while(1E-6\x3cabs(delta)\x26\x260\x3c--i);i\x3d50;x/\x3d1-.162388*phi2;do{var lambda4\x3d(lambda4\x3dlambda*lambda)*lambda4;lambda-\x3ddelta\x3d(lambda*(.87-9.52426E-4*lambda4)-x)/(.87-.00476213*lambda4)}while(1E-6\x3cabs(delta)\x26\x260\x3c--i);return[lambda,phi]};var ginzburg9Raw\x3dginzburgPolyconicRaw(2.6516,-.76534,.19123,-.047094,1.36289,-.13965,.031762);gringortenRaw.invert\x3dfunction(x,y$jscomp$0){1\x3cabs(x)\x26\x26(x\x3d2*sign(x)-x);1\x3cabs(y$jscomp$0)\x26\x26(y$jscomp$0\x3d2*\nsign(y$jscomp$0)-y$jscomp$0);var sx\x3dsign(x),sy\x3dsign(y$jscomp$0),x0\x3d-sx*x,y0\x3d-sy*y$jscomp$0;y$jscomp$0\x3d1\x3ey0/x0;x\x3dy$jscomp$0?y0:x0;var y\x3dy$jscomp$0?x0:y0,x0$jscomp$0\x3d0,x1\x3d1;x0\x3d.5;for(var i\x3d50;;){y0\x3dx0*x0;var sinPhi\x3dsqrt(x0),z\x3dasin(1/sqrt(1+y0)),v\x3d1-y0+x0*(1+y0)*z,p2\x3d(1-sinPhi)/v,p\x3dsqrt(p2),a2\x3dp2*(1+y0),h\x3dp*(1-y0),g\x3dsqrt(a2-x*x);h\x3dy+h+x0*g;if(1E-12\x3eabs(x1-x0$jscomp$0)||0\x3d\x3d\x3d--i||0\x3d\x3d\x3dh)break;0\x3ch?x0$jscomp$0\x3dx0:x1\x3dx0;x0\x3d.5*(x0$jscomp$0+x1)}i?(y\x3dasin(sinPhi),i\x3dcos(y),x0$jscomp$0\x3d1/i,x1\x3d2*sinPhi*i,sinPhi\x3d\n(-v*i-(1-sinPhi)*(-3*x0+z*(1+3*y0))*x1)/(v*v),x0\x3d[pi$jscomp$0/4*(x*(-2*x0$jscomp$0*(.5*sinPhi/p*(1-y0)-2*x0*p*x1)+-x0$jscomp$0*x1*g)+-x0$jscomp$0*(x0*(1+y0)*sinPhi+p2*(1+3*y0)*x1)*asin(x/sqrt(a2))),y]):x0\x3dnull;x\x3dx0[0];x0\x3dx0[1];y0\x3dcos(x0);y$jscomp$0\x26\x26(x\x3d-halfPi-x);return[sx*(atan2(sin(x)*y0,-sin(x0))+pi$jscomp$0),sy*asin(cos(x)*y0)]};guyouRaw.invert\x3dfunction(x,y){var k_\x3d(sqrt2-1)/(sqrt2+1),k\x3dsqrt(1-k_*k_);y\x3d.5*ellipticF(halfPi,k*k)-y;x\x3d-x;k*\x3dk;if(y)if(y\x3dellipticJ(y,k),x){x\x3dellipticJ(x,1-k);var c\x3dx[1]*\nx[1]+k*y[0]*y[0]*x[0]*x[0];y\x3d[[y[0]*x[2]/c,y[1]*y[2]*x[0]*x[1]/c],[y[1]*x[1]/c,-y[0]*y[2]*x[0]*x[2]/c],[y[2]*x[1]*x[2]/c,-k*y[0]*y[1]*x[0]/c]]}else y\x3d[[y[0],0],[y[1],0],[y[2],0]];else x\x3dellipticJ(x,1-k),y\x3d[[0,x[0]/x[1]],[1/x[1],0],[x[2]/x[1],0]];k\x3dy[0];y\x3dy[1];x\x3dy[0]*y[0]+y[1]*y[1];k\x3d[(k[0]*y[0]+k[1]*y[1])/x,(k[1]*y[0]-k[0]*y[1])/x];return[atan2(k[1],k[0])/-1,2*atan(exp(-.5*log(k_*k[0]*k[0]+k_*k[1]*k[1])))-halfPi]};var healpixParallel\x3dasin(1-1/3)*degrees,healpixLambert\x3dcylindricalEqualAreaRaw(0);sinuMollweideRaw.invert\x3d\nfunction(x,y){return-.7109889596207567\x3cy?mollweideRaw.invert(x,y-.0528035274542):sinusoidalRaw.invert(x,y)};homolosineRaw.invert\x3dfunction(x,y){return.7109889596207567\x3cabs(y)?mollweideRaw.invert(x,y+(0\x3cy?.0528035274542:-.0528035274542)):sinusoidalRaw.invert(x,y)};var lobes\x3d[[[[-180,0],[-100,90],[-40,0]],[[-40,0],[30,90],[180,0]]],[[[-180,0],[-160,-90],[-100,0]],[[-100,0],[-60,-90],[-20,0]],[[-20,0],[20,-90],[80,0]],[[80,0],[140,-90],[180,0]]]],lobes$1\x3d[[[[-180,0],[-100,90],[-40,0]],[[-40,0],[30,90],\n[180,0]]],[[[-180,0],[-160,-90],[-100,0]],[[-100,0],[-60,-90],[-20,0]],[[-20,0],[20,-90],[80,0]],[[80,0],[140,-90],[180,0]]]],lobes$2\x3d[[[[-180,0],[-100,90],[-40,0]],[[-40,0],[30,90],[180,0]]],[[[-180,0],[-160,-90],[-100,0]],[[-100,0],[-60,-90],[-20,0]],[[-20,0],[20,-90],[80,0]],[[80,0],[140,-90],[180,0]]]],lobes$3\x3d[[[[-180,0],[-90,90],[0,0]],[[0,0],[90,90],[180,0]]],[[[-180,0],[-90,-90],[0,0]],[[0,0],[90,-90],[180,0]]]],lobes$4\x3d[[[[-180,35],[-30,90],[0,35]],[[0,35],[30,90],[180,35]]],[[[-180,-10],\n[-102,-90],[-65,-10]],[[-65,-10],[5,-90],[77,-10]],[[77,-10],[103,-90],[180,-10]]]],lobes$5\x3d[[[[-180,0],[-110,90],[-40,0]],[[-40,0],[0,90],[40,0]],[[40,0],[110,90],[180,0]]],[[[-180,0],[-110,-90],[-40,0]],[[-40,0],[0,-90],[40,0]],[[40,0],[110,-90],[180,0]]]];kavrayskiy7Raw.invert\x3dfunction(x,y){return[tau/3*x/sqrt(pi$jscomp$0*pi$jscomp$0/3-y*y),y]};var pi_sqrt2\x3dpi$jscomp$0/sqrt2;larriveeRaw.invert\x3dfunction(x,y){var x0\x3dabs(x),y0\x3dabs(y),lambda\x3d1E-6,phi\x3dhalfPi;y0\x3cpi_sqrt2?phi*\x3dy0/pi_sqrt2:lambda+\x3d6*acos(pi_sqrt2/\ny0);for(var i\x3d0;25\x3ei;i++){var sinPhi\x3dsin(phi),sqrtcosPhi\x3dsqrt(cos(phi)),sinPhi_2\x3dsin(phi/2),cosPhi_2\x3dcos(phi/2),sinLambda_6\x3dsin(lambda/6),cosLambda_6\x3dcos(lambda/6),f0\x3d.5*lambda*(1+sqrtcosPhi)-x0,f1\x3dphi/(cosPhi_2*cosLambda_6)-y0;sinPhi\x3dsqrtcosPhi?-.25*lambda*sinPhi/sqrtcosPhi:0;sqrtcosPhi\x3d.5*(1+sqrtcosPhi);sinPhi_2\x3d(1+.5*phi*sinPhi_2/cosPhi_2)/(cosPhi_2*cosLambda_6);sinLambda_6\x3dphi/cosPhi_2*(sinLambda_6/6)/(cosLambda_6*cosLambda_6);cosPhi_2\x3dsinPhi*sinLambda_6-sinPhi_2*sqrtcosPhi;sinLambda_6\x3d(f0*sinLambda_6-\nf1*sqrtcosPhi)/cosPhi_2;f0\x3d(f1*sinPhi-f0*sinPhi_2)/cosPhi_2;phi-\x3dsinLambda_6;lambda-\x3df0;if(1E-6\x3eabs(sinLambda_6)\x26\x261E-6\x3eabs(f0))break}return[0\x3ex?-lambda:lambda,0\x3ey?-phi:phi]};laskowskiRaw.invert\x3dfunction(x,y){var lambda\x3dsign(x)*pi$jscomp$0,phi\x3dy/2,i\x3d50;do{var lambda2\x3dlambda*lambda,phi2\x3dphi*phi,lambdaPhi\x3dlambda*phi,fx\x3dlambda*(.975534+phi2*(-.119161+-.0143059*lambda2+-.0547009*phi2))-x,fy\x3dphi*(1.00384+lambda2*(.0802894+-.02855*phi2+1.99025E-4*lambda2)+phi2*(.0998909+-.0491032*phi2))-y,deltaxDeltaLambda\x3d\n.975534-phi2*(.119161+.0429177*lambda2+.0547009*phi2),deltaxDeltaPhi\x3d-lambdaPhi*(.238322+.2188036*phi2+.0286118*lambda2);lambdaPhi*\x3d.1605788+7.961E-4*lambda2+-.0571*phi2;phi2\x3d1.00384+lambda2*(.0802894+1.99025E-4*lambda2)+phi2*(3*(.0998909-.02855*lambda2)-.245516*phi2);lambda2\x3ddeltaxDeltaPhi*lambdaPhi-phi2*deltaxDeltaLambda;deltaxDeltaPhi\x3d(fy*deltaxDeltaPhi-fx*phi2)/lambda2;fx\x3d(fx*lambdaPhi-fy*deltaxDeltaLambda)/lambda2;lambda-\x3ddeltaxDeltaPhi;phi-\x3dfx}while((1E-6\x3cabs(deltaxDeltaPhi)||1E-6\x3cabs(fx))\x26\x26\n0\x3c--i);return i\x26\x26[lambda,phi]};littrowRaw.invert\x3dfunction(x,y){var x2\x3dx*x,y2_1\x3dy*y+1,x2_y2_1\x3dx2+y2_1;x2\x3dx?sqrt1_2*sqrt((x2_y2_1-sqrt(x2_y2_1*x2_y2_1-4*x2))/x2):1/sqrt(y2_1);return[asin(x*x2),sign(y)*acos(x2)]};millerRaw.invert\x3dfunction(x,y){return[x,2.5*atan(exp(.8*y))-.625*pi$jscomp$0]};var alaska\x3d[[.9972523,0],[.0052513,-.0041175],[.0074606,.0048125],[-.0153783,-.1968253],[.0636871,-.1408027],[.3660976,-.2937382]],gs48\x3d[[.98879,0],[0,0],[-.050909,0],[0,0],[.075528,0]],gs50\x3d[[.984299,0],[.0211642,\n.0037608],[-.1036018,-.0575102],[-.0329095,-.0320119],[.0499471,.1223335],[.026046,.0899805],[7.388E-4,-.1435792],[.0075848,-.1334108],[-.0216473,.0776645],[-.0225161,.0853673]],miller$1\x3d[[.9245,0],[0,0],[.01943,0]],lee\x3d[[.721316,0],[0,0],[-.00881625,-.00617325]],sqrt6\x3dsqrt(6),sqrt7\x3dsqrt(7);mtFlatPolarParabolicRaw.invert\x3dfunction(x,y){y\x3d3*asin(y*sqrt7/9);return[x*sqrt7/(sqrt6*(2*cos(2*y/3)-1)),asin(3*sin(y)*sqrt6/7)]};mtFlatPolarQuarticRaw.invert\x3dfunction(x,y){y\x3dy*sqrt(2+sqrt2)/(2*sqrt(3));var theta\x3d\n2*asin(y);return[3*sqrt2*x/(1+2*cos(theta)/cos(theta/2)),asin((y+sin(theta))/(1+sqrt1_2))]};mtFlatPolarSinusoidalRaw.invert\x3dfunction(x,y){var A\x3dsqrt(6/(4+pi$jscomp$0));y/\x3dA;1E-6\x3eabs(abs(y)-halfPi)\x26\x26(y\x3d0\x3ey?-halfPi:halfPi);return[1.5*x/(A*(.5+cos(y))),asin((y/2+sin(y))/(1+pi$jscomp$0/4))]};naturalEarth2Raw.invert\x3dfunction(x,y){var phi\x3dy,i\x3d25;do{var delta\x3dphi*phi;var phi4\x3ddelta*delta;phi-\x3ddelta\x3d(phi*(1.01183+phi4*phi4*(-.02625+.01926*delta-.00396*phi4))-y)/(1.01183+phi4*phi4*(-.23625+.21186*delta+-.05148*\nphi4))}while(1E-12\x3cabs(delta)\x26\x260\x3c--i);delta\x3dphi*phi;phi4\x3ddelta*delta;y\x3ddelta*phi4;return[x/(.84719-.13063*delta+y*y*(-.04515+.05494*delta-.02326*phi4+.00331*y)),phi]};nellHammerRaw.invert\x3dfunction(x,y){for(var p\x3dy/2,i\x3d0,delta\x3dInfinity;10\x3ei\x26\x261E-6\x3cabs(delta);++i)delta\x3dcos(y/2),y-\x3ddelta\x3d(y-tan(y/2)-p)/(1-.5/(delta*delta));return[2*x/(1+cos(y)),y]};var lobes$6\x3d[[[[-180,0],[-90,90],[0,0]],[[0,0],[90,90],[180,0]]],[[[-180,0],[-90,-90],[0,0]],[[0,0],[90,-90],[180,0]]]];nicolosiRaw.invert\x3dfunction(x,y){x/\x3d\nhalfPi;y/\x3dhalfPi;var x2\x3dx*x,x2y2\x3dx2+y*y,pi2\x3dpi$jscomp$0*pi$jscomp$0;return[x?(x2y2-1+sqrt((1-x2y2)*(1-x2y2)+4*x2))/(2*x)*halfPi:0,solve(function(phi){return x2y2*(pi$jscomp$0*sin(phi)-2*phi)*pi$jscomp$0+4*phi*phi*(y-sin(phi))+2*pi$jscomp$0*phi-pi2*y},0)]};var pattersonC2\x3d5*.23185;pattersonRaw.invert\x3dfunction(x,y){1.790857183\x3cy?y\x3d1.790857183:-1.790857183\x3ey\x26\x26(y\x3d-1.790857183);var yc\x3dy;do{var delta\x3dyc*yc;yc-\x3ddelta\x3d(yc*(1.0148+delta*delta*(.23185+delta*(-.14499+.02406*delta)))-y)/(1.0148+delta*delta*(pattersonC2+\ndelta*(-1.01493+.21654*delta)))}while(1E-6\x3cabs(delta));return[x,yc]};polyconicRaw.invert\x3dfunction(x,y){if(1E-6\x3eabs(y))return[x,0];var k\x3dx*x+y*y,phi\x3d.5*y,i\x3d10;do{var delta\x3dtan(phi);var secPhi\x3d1/cos(phi),j\x3dk-2*y*phi+phi*phi;phi-\x3ddelta\x3d(delta*j+2*(phi-y))/(2+j*secPhi*secPhi+2*(phi-y)*delta)}while(1E-6\x3cabs(delta)\x26\x260\x3c--i);delta\x3dtan(phi);return[(abs(y)\x3cabs(phi+1/delta)?asin(x*delta):sign(y)*sign(x)*(acos(abs(x*delta))+halfPi))/sin(phi),phi]};var octahedron\x3d[[0,90],[-90,0],[0,0],[90,0],[180,0],[0,-90]],\noctahedron$1\x3d[[0,2,1],[0,3,2],[5,1,2],[5,2,3],[0,1,4],[0,4,3],[5,4,1],[5,3,4]].map(function(face){return face.map(function(i){return octahedron[i]})}),kx\x3d2/sqrt(3);collignonK.invert\x3dfunction(x,y){return collignonRaw.invert(x/kx,y)};var points$jscomp$0\x3d[],lines\x3d[],sinkPoint\x3d{point:function(x,y){points$jscomp$0.push([x,y])},result:function(){var result\x3dpoints$jscomp$0.length?2\x3epoints$jscomp$0.length?{type:\x22Point\x22,coordinates:points$jscomp$0[0]}:{type:\x22MultiPoint\x22,coordinates:points$jscomp$0}:null;points$jscomp$0\x3d\n[];return result}},sinkLine\x3d{lineStart:noop,point:function(x,y){points$jscomp$0.push([x,y])},lineEnd:function(){points$jscomp$0.length\x26\x26(lines.push(points$jscomp$0),points$jscomp$0\x3d[])},result:function(){var result\x3dlines.length?2\x3elines.length?{type:\x22LineString\x22,coordinates:lines[0]}:{type:\x22MultiLineString\x22,coordinates:lines}:null;lines\x3d[];return result}},sinkPolygon\x3d{polygonStart:noop,lineStart:noop,point:function(x,y){points$jscomp$0.push([x,y])},lineEnd:function(){var n\x3dpoints$jscomp$0.length;if(n){do points$jscomp$0.push(points$jscomp$0[0].slice());\nwhile(4\x3e++n);lines.push(points$jscomp$0);points$jscomp$0\x3d[]}},polygonEnd:noop,result:function(){if(!lines.length)return null;var polygons\x3d[],holes\x3d[];lines.forEach(function(ring){if(4\x3e(n\x3dring.length))var JSCompiler_inline_result\x3d!1;else{JSCompiler_inline_result\x3d0;for(var n,area\x3dring[n-1][1]*ring[0][0]-ring[n-1][0]*ring[0][1];++JSCompiler_inline_result\x3cn;)area+\x3dring[JSCompiler_inline_result-1][1]*ring[JSCompiler_inline_result][0]-ring[JSCompiler_inline_result-1][0]*ring[JSCompiler_inline_result][1];\nJSCompiler_inline_result\x3d0\x3e\x3darea}JSCompiler_inline_result?polygons.push([ring]):holes.push(ring)});holes.forEach(function(hole){var point\x3dhole[0];polygons.some(function(polygon){for(var ring\x3dpolygon[0],x\x3dpoint[0],y\x3dpoint[1],contains\x3d!1,i\x3d0,n\x3dring.length,j\x3dn-1;i\x3cn;j\x3di++){var pi\x3dring[i],xi\x3dpi[0];pi\x3dpi[1];var pj\x3dring[j];j\x3dpj[0];pj\x3dpj[1];pi\x3ey^pj\x3ey\x26\x26x\x3c(j-xi)*(y-pi)/(pj-pi)+xi\x26\x26(contains\x3d!contains)}if(contains)return polygon.push(hole),!0})||polygons.push([hole])});lines\x3d[];return polygons.length?1\x3cpolygons.length?\n{type:\x22MultiPolygon\x22,coordinates:polygons}:{type:\x22Polygon\x22,coordinates:polygons[0]}:null}},K$1\x3d[[.9986,-.062],[1,0],[.9986,.062],[.9954,.124],[.99,.186],[.9822,.248],[.973,.31],[.96,.372],[.9427,.434],[.9216,.4958],[.8962,.5571],[.8679,.6176],[.835,.6769],[.7986,.7346],[.7597,.7903],[.7186,.8435],[.6732,.8936],[.6213,.9394],[.5722,.9761],[.5322,1]];K$1.forEach(function(d){d[1]*\x3d1.0144});robinsonRaw.invert\x3dfunction(x,y){var yy\x3dy/halfPi,phi\x3d90*yy,i\x3dmin(18,abs(phi/5)),i0\x3dmax(0,floor(i));do{var ay\x3dK$1[i0][1],\nby\x3dK$1[i0+1][1],cy\x3dK$1[min(19,i0+2)][1],u\x3dcy-ay;ay\x3dcy-2*by+ay;by\x3d2*(abs(yy)-by)/u;u\x3day/u;u\x3dby*(1-u*by*(1-2*u*by));if(0\x3c\x3du||1\x3d\x3d\x3di0){phi\x3d(0\x3c\x3dy?5:-5)*(u+i);yy\x3d50;do i\x3dmin(18,abs(phi)/5),i0\x3dfloor(i),u\x3di-i0,ay\x3dK$1[i0][1],by\x3dK$1[i0+1][1],cy\x3dK$1[min(19,i0+2)][1],phi-\x3d(i\x3d(0\x3c\x3dy?halfPi:-halfPi)*(by+u*(cy-ay)/2+u*u*(cy-2*by+ay)/2)-y)*degrees;while(1E-12\x3cabs(i)\x26\x260\x3c--yy);break}}while(0\x3c\x3d--i0);y\x3dK$1[i0][0];i\x3dK$1[i0+1][0];i0\x3dK$1[min(19,i0+2)][0];return[x/(i+u*(i0-y)/2+u*u*(i0-2*i+y)/2),phi*radians]};timesRaw.invert\x3d\nfunction(x,y){y/\x3d1.70711;var s\x3dsin(quarterPi*y);return[x/(.74482-.34588*s*s),2*atan(y)]};vanDerGrintenRaw.invert\x3dfunction(x,y){if(1E-6\x3eabs(y))return[x,0];if(1E-6\x3eabs(x))return[0,halfPi*sin(2*atan(y/pi$jscomp$0))];var x2\x3d(x/\x3dpi$jscomp$0)*x,y2\x3d(y/\x3dpi$jscomp$0)*y,x2_y2\x3dx2+y2,z\x3dx2_y2*x2_y2,c1\x3d-abs(y)*(1+x2_y2),c2\x3dc1-2*y2+x2,c3\x3d-2*c1+1+2*y2+z,d\x3dy2/c3+(2*c2*c2*c2/(c3*c3*c3)-9*c1*c2/(c3*c3))/27,a1\x3d(c1-c2*c2/(3*c3))/c3;c1\x3d2*sqrt(-a1/3);d\x3dacos(3*d/(a1*c1))/3;return[pi$jscomp$0*(x2_y2-1+sqrt(1+2*(x2-y2)+z))/\n(2*x),sign(y)*pi$jscomp$0*(-c1*cos(d+pi$jscomp$0/3)-c2/(3*c3))]};vanDerGrinten2Raw.invert\x3dfunction(x,y){if(!x)return[0,halfPi*sin(2*atan(y/pi$jscomp$0))];var x1\x3dabs(x/pi$jscomp$0),A\x3d(1-x1*x1-(y/\x3dpi$jscomp$0)*y)/(2*x1),B\x3dsqrt(A*A+1);return[sign(x)*pi$jscomp$0*(B-A),sign(y)*halfPi*sin(2*atan2(sqrt((1-2*A*x1)*(A+B)-x1),sqrt(B+A+x1)))]};vanDerGrinten3Raw.invert\x3dfunction(x,y){if(!y)return[x,0];y/\x3dpi$jscomp$0;var A\x3d(pi$jscomp$0*pi$jscomp$0*(1-y*y)-x*x)/(2*pi$jscomp$0*x);return[x?pi$jscomp$0*(sign(x)*sqrt(A*\nA+1)-A):0,halfPi*sin(2*atan(y))]};vanDerGrinten4Raw.invert\x3dfunction(x,y){if(!x||!y)return[x,y];y/\x3dpi$jscomp$0;var x1\x3dsign(x)*x/halfPi,D\x3d(x1*x1-1+4*y*y)/abs(x1),D2\x3dD*D;y*\x3d2;var i\x3d50;do{var B2\x3dy*y;var delta\x3d(8*y-B2*(B2+2)-5)/(2*B2*(y-1));var C_\x3d(3*y-B2*y-10)/(2*B2*y),C2\x3ddelta*delta,BC\x3dy*delta,B_C\x3dy+delta,B_C2\x3dB_C*B_C,B_3C\x3dy+3*delta,F_\x3d-2*B_C*(4*BC*C2+(1-4*B2+3*B2*B2)*(1+C_)+C2*(-6+14*B2-D2+(-8+8*B2-2*D2)*C_)+BC*(-8+12*B2+(-10+10*B2-D2)*C_));B2\x3dsqrt(B_C2*(B2+C2*D2-1)+(1-B2)*(B2*(B_3C*B_3C+4*C2)+C2*(12*\nBC+4*C2)));y-\x3ddelta\x3d(D*(B_C2+C2-1)+2*B2-x1*(4*B_C2+D2))/(D*(2*delta*C_+2*B_C*(1+C_))+F_/B2-8*B_C*(D*(-1+C2+B_C2)+2*B2)*(1+C_)/(D2+4*B_C2))}while(1E-6\x3cdelta\x26\x260\x3c--i);return[sign(x)*(sqrt(D*D+4)+D)*pi$jscomp$0/4,halfPi*y]};var A$jscomp$0\x3d4*pi$jscomp$0+3*sqrt(3),B$jscomp$0\x3d2*sqrt(2*pi$jscomp$0*sqrt(3)/A$jscomp$0),wagner4Raw\x3dmollweideBromleyRaw(B$jscomp$0*sqrt(3)/pi$jscomp$0,B$jscomp$0,A$jscomp$0/6);wagner6Raw.invert\x3dfunction(x,y){return[x/sqrt(1-3*y*y/(pi$jscomp$0*pi$jscomp$0)),y]};wiechelRaw.invert\x3d\nfunction(x,y){var w\x3d(x*x+y*y)/-2,k\x3dsqrt(-w*(2+w)),b\x3dy*w+x*k;x\x3dx*w-y*k;y\x3dsqrt(x*x+b*b);return[atan2(k*b,y*(1+w)),y?-asin(k*x/y):0]};winkel3Raw.invert\x3dfunction(x,y){var lambda\x3dx,phi\x3dy,i\x3d25;do{var cosphi\x3dcos(phi),sinphi\x3dsin(phi),sin_2phi\x3dsin(2*phi),sin2phi\x3dsinphi*sinphi,cos2phi\x3dcosphi*cosphi,sinlambda\x3dsin(lambda),coslambda_2\x3dcos(lambda/2),sinlambda_2\x3dsin(lambda/2),sin2lambda_2\x3dsinlambda_2*sinlambda_2,C\x3d1-cos2phi*coslambda_2*coslambda_2,E\x3dC?acos(cosphi*coslambda_2)*sqrt(F\x3d1/C):F\x3d0,F;C\x3d.5*(2*E*cosphi*\nsinlambda_2+lambda/halfPi)-x;var fy\x3d.5*(E*sinphi+phi)-y,dxdlambda\x3d.5*F*(cos2phi*sin2lambda_2+E*cosphi*coslambda_2*sin2phi)+.5/halfPi,dxdphi\x3dF*(sinlambda*sin_2phi/4-E*sinphi*sinlambda_2);sinphi\x3d.125*F*(sin_2phi*sinlambda_2-E*sinphi*cos2phi*sinlambda);sin2phi\x3d.5*F*(sin2phi*coslambda_2+E*sin2lambda_2*cosphi)+.5;cosphi\x3ddxdphi*sinphi-sin2phi*dxdlambda;dxdphi\x3d(fy*dxdphi-C*sin2phi)/cosphi;C\x3d(C*sinphi-fy*dxdlambda)/cosphi;lambda-\x3ddxdphi;phi-\x3dC}while((1E-6\x3cabs(dxdphi)||1E-6\x3cabs(C))\x26\x260\x3c--i);return[lambda,phi]};\nexports.geoNaturalEarth\x3dd3Geo.geoNaturalEarth1;exports.geoNaturalEarthRaw\x3dd3Geo.geoNaturalEarth1Raw;exports.geoAiry\x3dfunction(){var beta\x3dhalfPi,m\x3dd3Geo.geoProjectionMutator(airyRaw),p\x3dm(beta);p.radius\x3dfunction(_){return arguments.length?m(beta\x3d_*radians):beta*degrees};return p.scale(179.976).clipAngle(147)};exports.geoAiryRaw\x3dairyRaw;exports.geoAitoff\x3dfunction(){return d3Geo.geoProjection(aitoffRaw).scale(152.63)};exports.geoAitoffRaw\x3daitoffRaw;exports.geoArmadillo\x3dfunction(){var phi0\x3d20*radians,sPhi0\x3d\n0\x3c\x3dphi0?1:-1,tanPhi0\x3dtan(sPhi0*phi0),m\x3dd3Geo.geoProjectionMutator(armadilloRaw),p\x3dm(phi0),stream_\x3dp.stream;p.parallel\x3dfunction(_){if(!arguments.length)return phi0*degrees;tanPhi0\x3dtan((sPhi0\x3d0\x3c\x3d(phi0\x3d_*radians)?1:-1)*phi0);return m(phi0)};p.stream\x3dfunction(stream){var rotate\x3dp.rotate(),rotateStream\x3dstream_(stream),sphereStream\x3d(p.rotate([0,0]),stream_(stream)),precision\x3dp.precision();p.rotate(rotate);rotateStream.sphere\x3dfunction(){sphereStream.polygonStart();sphereStream.lineStart();for(var lambda\x3d\n-180*sPhi0;180\x3esPhi0*lambda;lambda+\x3d90*sPhi0)sphereStream.point(lambda,90*sPhi0);if(phi0)for(;-180\x3c\x3dsPhi0*(lambda-\x3d3*sPhi0*precision);)sphereStream.point(lambda,sPhi0*-atan2(cos(lambda*radians/2),tanPhi0)*degrees);sphereStream.lineEnd();sphereStream.polygonEnd()};return rotateStream};return p.scale(218.695).center([0,28.0974])};exports.geoArmadilloRaw\x3darmadilloRaw;exports.geoAugust\x3dfunction(){return d3Geo.geoProjection(augustRaw).scale(66.1603)};exports.geoAugustRaw\x3daugustRaw;exports.geoBaker\x3dfunction(){return d3Geo.geoProjection(bakerRaw).scale(112.314)};\nexports.geoBakerRaw\x3dbakerRaw;exports.geoBerghaus\x3dfunction(){var lobes\x3d5,m\x3dd3Geo.geoProjectionMutator(berghausRaw),p\x3dm(lobes),projectionStream\x3dp.stream,cr\x3d-cos(.01*radians),sr\x3dsin(.01*radians);p.lobes\x3dfunction(_){return arguments.length?m(lobes\x3d+_):lobes};p.stream\x3dfunction(stream){var rotate\x3dp.rotate(),rotateStream\x3dprojectionStream(stream),sphereStream\x3d(p.rotate([0,0]),projectionStream(stream));p.rotate(rotate);rotateStream.sphere\x3dfunction(){sphereStream.polygonStart();sphereStream.lineStart();for(var i\x3d\n0,delta\x3d360/lobes,delta0\x3d2*pi$jscomp$0/lobes,phi\x3d90-180/lobes,phi0\x3dhalfPi;i\x3clobes;++i,phi-\x3ddelta,phi0-\x3ddelta0)sphereStream.point(atan2(sr*cos(phi0),cr)*degrees,asin(sr*sin(phi0))*degrees),-90\x3ephi?(sphereStream.point(-90,-180-phi-.01),sphereStream.point(-90,-180-phi+.01)):(sphereStream.point(90,phi+.01),sphereStream.point(90,phi-.01));sphereStream.lineEnd();sphereStream.polygonEnd()};return rotateStream};return p.scale(87.8076).center([0,17.1875]).clipAngle(179.999)};exports.geoBerghausRaw\x3dberghausRaw;\nexports.geoBertin1953\x3dfunction(){return d3Geo.geoProjection(bertin1953Raw()).rotate([-16.5,-42]).scale(176.57).center([7.93,.09])};exports.geoBertin1953Raw\x3dbertin1953Raw;exports.geoBoggs\x3dfunction(){return d3Geo.geoProjection(boggsRaw).scale(160.857)};exports.geoBoggsRaw\x3dboggsRaw;exports.geoBonne\x3dfunction(){return parallel1(bonneRaw).scale(123.082).center([0,26.1441]).parallel(45)};exports.geoBonneRaw\x3dbonneRaw;exports.geoBottomley\x3dfunction(){var sinPsi\x3d.5,m\x3dd3Geo.geoProjectionMutator(bottomleyRaw),\np\x3dm(sinPsi);p.fraction\x3dfunction(_){return arguments.length?m(sinPsi\x3d+_):sinPsi};return p.scale(158.837)};exports.geoBottomleyRaw\x3dbottomleyRaw;exports.geoBromley\x3dfunction(){return d3Geo.geoProjection(bromleyRaw).scale(152.63)};exports.geoBromleyRaw\x3dbromleyRaw;exports.geoChamberlin\x3dchamberlin;exports.geoChamberlinRaw\x3dchamberlinRaw;exports.geoChamberlinAfrica\x3dfunction(){return chamberlin([0,22],[45,22],[22.5,-22]).scale(380).center([22.5,2])};exports.geoCollignon\x3dfunction(){return d3Geo.geoProjection(collignonRaw).scale(95.6464).center([0,\n30])};exports.geoCollignonRaw\x3dcollignonRaw;exports.geoCraig\x3dfunction(){return parallel1(craigRaw).scale(249.828).clipAngle(90)};exports.geoCraigRaw\x3dcraigRaw;exports.geoCraster\x3dfunction(){return d3Geo.geoProjection(crasterRaw).scale(156.19)};exports.geoCrasterRaw\x3dcrasterRaw;exports.geoCylindricalEqualArea\x3dfunction(){return parallel1(cylindricalEqualAreaRaw).parallel(38.58).scale(195.044)};exports.geoCylindricalEqualAreaRaw\x3dcylindricalEqualAreaRaw;exports.geoCylindricalStereographic\x3dfunction(){return parallel1(cylindricalStereographicRaw).scale(124.75)};\nexports.geoCylindricalStereographicRaw\x3dcylindricalStereographicRaw;exports.geoEckert1\x3dfunction(){return d3Geo.geoProjection(eckert1Raw).scale(165.664)};exports.geoEckert1Raw\x3deckert1Raw;exports.geoEckert2\x3dfunction(){return d3Geo.geoProjection(eckert2Raw).scale(165.664)};exports.geoEckert2Raw\x3deckert2Raw;exports.geoEckert3\x3dfunction(){return d3Geo.geoProjection(eckert3Raw).scale(180.739)};exports.geoEckert3Raw\x3deckert3Raw;exports.geoEckert4\x3dfunction(){return d3Geo.geoProjection(eckert4Raw).scale(180.739)};\nexports.geoEckert4Raw\x3deckert4Raw;exports.geoEckert5\x3dfunction(){return d3Geo.geoProjection(eckert5Raw).scale(173.044)};exports.geoEckert5Raw\x3deckert5Raw;exports.geoEckert6\x3dfunction(){return d3Geo.geoProjection(eckert6Raw).scale(173.044)};exports.geoEckert6Raw\x3deckert6Raw;exports.geoEisenlohr\x3dfunction(){return d3Geo.geoProjection(eisenlohrRaw).scale(62.5271)};exports.geoEisenlohrRaw\x3deisenlohrRaw;exports.geoFahey\x3dfunction(){return d3Geo.geoProjection(faheyRaw).scale(137.152)};exports.geoFaheyRaw\x3dfaheyRaw;\nexports.geoFoucaut\x3dfunction(){return d3Geo.geoProjection(foucautRaw).scale(135.264)};exports.geoFoucautRaw\x3dfoucautRaw;exports.geoFoucautSinusoidal\x3dfunction(){var alpha\x3d.5,m\x3dd3Geo.geoProjectionMutator(foucautSinusoidalRaw),p\x3dm(alpha);p.alpha\x3dfunction(_){return arguments.length?m(alpha\x3d+_):alpha};return p.scale(168.725)};exports.geoFoucautSinusoidalRaw\x3dfoucautSinusoidalRaw;exports.geoGilbert\x3dfunction(projectionType){function gilbert(point){return projection([point[0]/2,asin(tan(point[1]/2*radians))*\ndegrees])}function property(name){gilbert[name]\x3dfunction(){return arguments.length?(projection[name].apply(projection,arguments),gilbert):projection[name]()}}null\x3d\x3dprojectionType\x26\x26(projectionType\x3dd3Geo.geoOrthographic);var projection\x3dprojectionType(),equirectangular\x3dd3Geo.geoEquirectangular().scale(degrees).precision(0).clipAngle(null).translate([0,0]);projection.invert\x26\x26(gilbert.invert\x3dfunction(point){return gilbertInvert(projection.invert(point))});gilbert.stream\x3dfunction(stream){var s1\x3dprojection.stream(stream);\nstream\x3dequirectangular.stream({point:function(lambda,phi){s1.point(lambda/2,asin(tan(-phi/2*radians))*degrees)},lineStart:function(){s1.lineStart()},lineEnd:function(){s1.lineEnd()},polygonStart:function(){s1.polygonStart()},polygonEnd:function(){s1.polygonEnd()}});stream.sphere\x3ds1.sphere;return stream};gilbert.rotate\x3dfunction(_){return arguments.length?(equirectangular.rotate(_),gilbert):equirectangular.rotate()};gilbert.center\x3dfunction(_){return arguments.length?(projection.center([_[0]/2,asin(tan(_[1]/\n2*radians))*degrees]),gilbert):gilbertInvert(projection.center())};property(\x22angle\x22);property(\x22clipAngle\x22);property(\x22clipExtent\x22);property(\x22fitExtent\x22);property(\x22fitHeight\x22);property(\x22fitSize\x22);property(\x22fitWidth\x22);property(\x22scale\x22);property(\x22translate\x22);property(\x22precision\x22);return gilbert.scale(249.5)};exports.geoGingery\x3dfunction(){var n\x3d6,rho\x3d30*radians,cRho\x3dcos(rho),sRho\x3dsin(rho),m\x3dd3Geo.geoProjectionMutator(gingeryRaw),p\x3dm(rho,n),stream_\x3dp.stream,cr\x3d-cos(.01*radians),sr\x3dsin(.01*radians);p.radius\x3d\nfunction(_){if(!arguments.length)return rho*degrees;cRho\x3dcos(rho\x3d_*radians);sRho\x3dsin(rho);return m(rho,n)};p.lobes\x3dfunction(_){return arguments.length?m(rho,n\x3d+_):n};p.stream\x3dfunction(stream){var rotate\x3dp.rotate(),rotateStream\x3dstream_(stream),sphereStream\x3d(p.rotate([0,0]),stream_(stream));p.rotate(rotate);rotateStream.sphere\x3dfunction(){sphereStream.polygonStart();sphereStream.lineStart();for(var i\x3d0,delta\x3d2*pi$jscomp$0/n,phi\x3d0;i\x3cn;++i,phi-\x3ddelta)sphereStream.point(atan2(sr*cos(phi),cr)*degrees,asin(sr*\nsin(phi))*degrees),sphereStream.point(atan2(sRho*cos(phi-delta/2),cRho)*degrees,asin(sRho*sin(phi-delta/2))*degrees);sphereStream.lineEnd();sphereStream.polygonEnd()};return rotateStream};return p.rotate([90,-40]).scale(91.7095).clipAngle(179.999)};exports.geoGingeryRaw\x3dgingeryRaw;exports.geoGinzburg4\x3dfunction(){return d3Geo.geoProjection(ginzburg4Raw).scale(149.995)};exports.geoGinzburg4Raw\x3dginzburg4Raw;exports.geoGinzburg5\x3dfunction(){return d3Geo.geoProjection(ginzburg5Raw).scale(153.93)};exports.geoGinzburg5Raw\x3d\nginzburg5Raw;exports.geoGinzburg6\x3dfunction(){return d3Geo.geoProjection(ginzburg6Raw).scale(130.945)};exports.geoGinzburg6Raw\x3dginzburg6Raw;exports.geoGinzburg8\x3dfunction(){return d3Geo.geoProjection(ginzburg8Raw).scale(131.747)};exports.geoGinzburg8Raw\x3dginzburg8Raw;exports.geoGinzburg9\x3dfunction(){return d3Geo.geoProjection(ginzburg9Raw).scale(131.087)};exports.geoGinzburg9Raw\x3dginzburg9Raw;exports.geoGringorten\x3dfunction(){return d3Geo.geoProjection(squareRaw(gringortenRaw)).scale(239.75)};exports.geoGringortenRaw\x3d\ngringortenRaw;exports.geoGuyou\x3dfunction(){return d3Geo.geoProjection(squareRaw(guyouRaw)).scale(151.496)};exports.geoGuyouRaw\x3dguyouRaw;exports.geoHammer\x3dfunction(){var B\x3d2,m\x3dd3Geo.geoProjectionMutator(hammerRaw),p\x3dm(B);p.coefficient\x3dfunction(_){return arguments.length?m(B\x3d+_):B};return p.scale(169.529)};exports.geoHammerRaw\x3dhammerRaw;exports.geoHammerRetroazimuthal\x3dfunction(){var phi0\x3d0,m\x3dd3Geo.geoProjectionMutator(hammerRetroazimuthalRaw),p$jscomp$0\x3dm(phi0),rotate_\x3dp$jscomp$0.rotate,stream_\x3dp$jscomp$0.stream,\ncircle\x3dd3Geo.geoCircle();p$jscomp$0.parallel\x3dfunction(_){if(!arguments.length)return phi0*degrees;var r\x3dp$jscomp$0.rotate();return m(phi0\x3d_*radians).rotate(r)};p$jscomp$0.rotate\x3dfunction(_){if(!arguments.length)return _\x3drotate_.call(p$jscomp$0),_[1]+\x3dphi0*degrees,_;rotate_.call(p$jscomp$0,[_[0],_[1]-phi0*degrees]);circle.center([-_[0],-_[1]]);return p$jscomp$0};p$jscomp$0.stream\x3dfunction(stream){stream\x3dstream_(stream);stream.sphere\x3dfunction(){stream.polygonStart();var ring\x3dcircle.radius(89.99)().coordinates[0],\nn\x3dring.length-1,i\x3d-1,p;for(stream.lineStart();++i\x3cn;)stream.point((p\x3dring[i])[0],p[1]);stream.lineEnd();ring\x3dcircle.radius(90.01)().coordinates[0];for(stream.lineStart();0\x3c\x3d--i;)stream.point((p\x3dring[i])[0],p[1]);stream.lineEnd();stream.polygonEnd()};return stream};return p$jscomp$0.scale(79.4187).parallel(45).clipAngle(179.999)};exports.geoHammerRetroazimuthalRaw\x3dhammerRetroazimuthalRaw;exports.geoHealpix\x3dfunction(){var H\x3d4,m\x3dd3Geo.geoProjectionMutator(healpixRaw),p\x3dm(H),stream_\x3dp.stream;p.lobes\x3d\nfunction(_){return arguments.length?m(H\x3d+_):H};p.stream\x3dfunction(stream){var rotate\x3dp.rotate(),rotateStream\x3dstream_(stream),sphereStream\x3d(p.rotate([0,0]),stream_(stream));p.rotate(rotate);rotateStream.sphere\x3dfunction(){d3Geo.geoStream(sphere$jscomp$0(180/H),sphereStream)};return rotateStream};return p.scale(239.75)};exports.geoHealpixRaw\x3dhealpixRaw;exports.geoHill\x3dfunction(){var K\x3d1,m\x3dd3Geo.geoProjectionMutator(hillRaw),p\x3dm(K);p.ratio\x3dfunction(_){return arguments.length?m(K\x3d+_):K};return p.scale(167.774).center([0,\n18.67])};exports.geoHillRaw\x3dhillRaw;exports.geoHomolosine\x3dfunction(){return d3Geo.geoProjection(homolosineRaw).scale(152.63)};exports.geoHomolosineRaw\x3dhomolosineRaw;exports.geoHufnagel\x3dfunction(){var a\x3d1,b\x3d0,psiMax\x3d45*radians,ratio\x3d2,mutate\x3dd3Geo.geoProjectionMutator(hufnagelRaw),projection\x3dmutate(a,b,psiMax,ratio);projection.a\x3dfunction(_){return arguments.length?mutate(a\x3d+_,b,psiMax,ratio):a};projection.b\x3dfunction(_){return arguments.length?mutate(a,b\x3d+_,psiMax,ratio):b};projection.psiMax\x3dfunction(_){return arguments.length?\nmutate(a,b,psiMax\x3d+_*radians,ratio):psiMax*degrees};projection.ratio\x3dfunction(_){return arguments.length?mutate(a,b,psiMax,ratio\x3d+_):ratio};return projection.scale(180.739)};exports.geoHufnagelRaw\x3dhufnagelRaw;exports.geoHyperelliptical\x3dfunction(){var alpha\x3d0,k\x3d2.5,gamma\x3d1.183136,m\x3dd3Geo.geoProjectionMutator(hyperellipticalRaw),p\x3dm(alpha,k,gamma);p.alpha\x3dfunction(_){return arguments.length?m(alpha\x3d+_,k,gamma):alpha};p.k\x3dfunction(_){return arguments.length?m(alpha,k\x3d+_,gamma):k};p.gamma\x3dfunction(_){return arguments.length?\nm(alpha,k,gamma\x3d+_):gamma};return p.scale(152.63)};exports.geoHyperellipticalRaw\x3dhyperellipticalRaw;exports.geoInterrupt\x3dinterrupt;exports.geoInterruptedBoggs\x3dfunction(){return interrupt(boggsRaw,lobes).scale(160.857)};exports.geoInterruptedHomolosine\x3dfunction(){return interrupt(homolosineRaw,lobes$1).scale(152.63)};exports.geoInterruptedMollweide\x3dfunction(){return interrupt(mollweideRaw,lobes$2).scale(169.529)};exports.geoInterruptedMollweideHemispheres\x3dfunction(){return interrupt(mollweideRaw,lobes$3).scale(169.529).rotate([20,\n0])};exports.geoInterruptedSinuMollweide\x3dfunction(){return interrupt(sinuMollweideRaw,lobes$4,solve2d).rotate([-20,-55]).scale(164.263).center([0,-5.4036])};exports.geoInterruptedSinusoidal\x3dfunction(){return interrupt(sinusoidalRaw,lobes$5).scale(152.63).rotate([-20,0])};exports.geoKavrayskiy7\x3dfunction(){return d3Geo.geoProjection(kavrayskiy7Raw).scale(158.837)};exports.geoKavrayskiy7Raw\x3dkavrayskiy7Raw;exports.geoLagrange\x3dfunction(){var n\x3d.5,m\x3dd3Geo.geoProjectionMutator(lagrangeRaw),p\x3dm(n);p.spacing\x3d\nfunction(_){return arguments.length?m(n\x3d+_):n};return p.scale(124.75)};exports.geoLagrangeRaw\x3dlagrangeRaw;exports.geoLarrivee\x3dfunction(){return d3Geo.geoProjection(larriveeRaw).scale(97.2672)};exports.geoLarriveeRaw\x3dlarriveeRaw;exports.geoLaskowski\x3dfunction(){return d3Geo.geoProjection(laskowskiRaw).scale(139.98)};exports.geoLaskowskiRaw\x3dlaskowskiRaw;exports.geoLittrow\x3dfunction(){return d3Geo.geoProjection(littrowRaw).scale(144.049).clipAngle(89.999)};exports.geoLittrowRaw\x3dlittrowRaw;exports.geoLoximuthal\x3d\nfunction(){return parallel1(loximuthalRaw).parallel(40).scale(158.837)};exports.geoLoximuthalRaw\x3dloximuthalRaw;exports.geoMiller\x3dfunction(){return d3Geo.geoProjection(millerRaw).scale(108.318)};exports.geoMillerRaw\x3dmillerRaw;exports.geoModifiedStereographic\x3dmodifiedStereographic;exports.geoModifiedStereographicRaw\x3dmodifiedStereographicRaw;exports.geoModifiedStereographicAlaska\x3dfunction(){return modifiedStereographic(alaska,[152,-64]).scale(1400).center([-160.908,62.4864]).clipAngle(30).angle(7.8)};\nexports.geoModifiedStereographicGs48\x3dfunction(){return modifiedStereographic(gs48,[95,-38]).scale(1E3).clipAngle(55).center([-96.5563,38.8675])};exports.geoModifiedStereographicGs50\x3dfunction(){return modifiedStereographic(gs50,[120,-45]).scale(359.513).clipAngle(55).center([-117.474,53.0628])};exports.geoModifiedStereographicMiller\x3dfunction(){return modifiedStereographic(miller$1,[-20,-18]).scale(209.091).center([20,16.7214]).clipAngle(82)};exports.geoModifiedStereographicLee\x3dfunction(){return modifiedStereographic(lee,\n[165,10]).scale(250).clipAngle(130).center([-165,-10])};exports.geoMollweide\x3dfunction(){return d3Geo.geoProjection(mollweideRaw).scale(169.529)};exports.geoMollweideRaw\x3dmollweideRaw;exports.geoMtFlatPolarParabolic\x3dfunction(){return d3Geo.geoProjection(mtFlatPolarParabolicRaw).scale(164.859)};exports.geoMtFlatPolarParabolicRaw\x3dmtFlatPolarParabolicRaw;exports.geoMtFlatPolarQuartic\x3dfunction(){return d3Geo.geoProjection(mtFlatPolarQuarticRaw).scale(188.209)};exports.geoMtFlatPolarQuarticRaw\x3dmtFlatPolarQuarticRaw;\nexports.geoMtFlatPolarSinusoidal\x3dfunction(){return d3Geo.geoProjection(mtFlatPolarSinusoidalRaw).scale(166.518)};exports.geoMtFlatPolarSinusoidalRaw\x3dmtFlatPolarSinusoidalRaw;exports.geoNaturalEarth2\x3dfunction(){return d3Geo.geoProjection(naturalEarth2Raw).scale(175.295)};exports.geoNaturalEarth2Raw\x3dnaturalEarth2Raw;exports.geoNellHammer\x3dfunction(){return d3Geo.geoProjection(nellHammerRaw).scale(152.63)};exports.geoNellHammerRaw\x3dnellHammerRaw;exports.geoInterruptedQuarticAuthalic\x3dfunction(){return interrupt(hammerRaw(Infinity),\nlobes$6).rotate([20,0]).scale(152.63)};exports.geoNicolosi\x3dfunction(){return d3Geo.geoProjection(nicolosiRaw).scale(127.267)};exports.geoNicolosiRaw\x3dnicolosiRaw;exports.geoPatterson\x3dfunction(){return d3Geo.geoProjection(pattersonRaw).scale(139.319)};exports.geoPattersonRaw\x3dpattersonRaw;exports.geoPolyconic\x3dfunction(){return d3Geo.geoProjection(polyconicRaw).scale(103.74)};exports.geoPolyconicRaw\x3dpolyconicRaw;exports.geoPolyhedral\x3dpolyhedral;exports.geoPolyhedralButterfly\x3dfunction(faceProjection){faceProjection\x3d\nfaceProjection||function(face){face\x3dd3Geo.geoCentroid({type:\x22MultiPoint\x22,coordinates:face});return d3Geo.geoGnomonic().scale(1).translate([0,0]).rotate([-face[0],-face[1]])};var faces\x3doctahedron$1.map(function(face){return{face:face,project:faceProjection(face)}});[-1,0,0,1,0,1,4,5].forEach(function(d,i){(d\x3dfaces[d])\x26\x26(d.children||(d.children\x3d[])).push(faces[i])});return polyhedral(faces[0],function(lambda,phi){return faces[lambda\x3c-pi$jscomp$0/2?0\x3ephi?6:4:0\x3elambda?0\x3ephi?2:0:lambda\x3cpi$jscomp$0/2?0\x3e\nphi?3:1:0\x3ephi?7:5]}).angle(-30).scale(101.858).center([0,45])};exports.geoPolyhedralCollignon\x3dfunction(faceProjection){faceProjection\x3dfaceProjection||function(face){face\x3dd3Geo.geoCentroid({type:\x22MultiPoint\x22,coordinates:face});return d3Geo.geoProjection(collignonK).translate([0,0]).scale(1).rotate(0\x3cface[1]?[-face[0],0]:[180-face[0],180])};var faces\x3doctahedron$1.map(function(face){return{face:face,project:faceProjection(face)}});[-1,0,0,1,0,1,4,5].forEach(function(d,i){(d\x3dfaces[d])\x26\x26(d.children||(d.children\x3d\n[])).push(faces[i])});return polyhedral(faces[0],function(lambda,phi){return faces[lambda\x3c-pi$jscomp$0/2?0\x3ephi?6:4:0\x3elambda?0\x3ephi?2:0:lambda\x3cpi$jscomp$0/2?0\x3ephi?3:1:0\x3ephi?7:5]}).angle(-30).scale(121.906).center([0,48.5904])};exports.geoPolyhedralWaterman\x3dfunction(faceProjection){faceProjection\x3dfaceProjection||function(face){face\x3d6\x3d\x3d\x3dface.length?d3Geo.geoCentroid({type:\x22MultiPoint\x22,coordinates:face}):face[0];return d3Geo.geoGnomonic().scale(1).translate([0,0]).rotate([-face[0],-face[1]])};var w5\x3doctahedron$1.map(function(face){face\x3d\nface.map(cartesian$jscomp$0);for(var n\x3dface.length,a\x3dface[n-1],b,hexagon\x3d[],i\x3d0;i\x3cn;++i)b\x3dface[i],hexagon.push(spherical([.9486832980505138*a[0]+.31622776601683794*b[0],.9486832980505138*a[1]+.31622776601683794*b[1],.9486832980505138*a[2]+.31622776601683794*b[2]]),spherical([.9486832980505138*b[0]+.31622776601683794*a[0],.9486832980505138*b[1]+.31622776601683794*a[1],.9486832980505138*b[2]+.31622776601683794*a[2]])),a\x3db;return hexagon}),cornerNormals\x3d[],parents\x3d[-1,0,0,1,0,1,4,5];w5.forEach(function(hexagon,\nj){for(var face\x3doctahedron$1[j],n\x3dface.length,normals\x3dcornerNormals[j]\x3d[],i\x3d0;i\x3cn;++i)w5.push([face[i],hexagon[(2*i+2)%(2*n)],hexagon[(2*i+1)%(2*n)]]),parents.push(j),normals.push(cross(cartesian$jscomp$0(hexagon[(2*i+2)%(2*n)]),cartesian$jscomp$0(hexagon[(2*i+1)%(2*n)])))});var faces\x3dw5.map(function(face){return{project:faceProjection(face),face:face}});parents.forEach(function(d,i){(d\x3dfaces[d])\x26\x26(d.children||(d.children\x3d[])).push(faces[i])});return polyhedral(faces[0],function(lambda,phi){var cosphi\x3d\ncos(phi);cosphi\x3d[cosphi*cos(lambda),cosphi*sin(lambda),sin(phi)];lambda\x3dlambda\x3c-pi$jscomp$0/2?0\x3ephi?6:4:0\x3elambda?0\x3ephi?2:0:lambda\x3cpi$jscomp$0/2?0\x3ephi?3:1:0\x3ephi?7:5;phi\x3dcornerNormals[lambda];return faces[0\x3edot(phi[0],cosphi)?8+3*lambda:0\x3edot(phi[1],cosphi)?3*lambda+9:0\x3edot(phi[2],cosphi)?3*lambda+10:lambda]}).angle(-30).scale(110.625).center([0,45])};exports.geoProject\x3dfunction(object,projection){projection\x3dprojection.stream;if(!projection)throw Error(\x22invalid projection\x22);switch(object\x26\x26object.type){case \x22Feature\x22:var project\x3d\nprojectFeature;break;case \x22FeatureCollection\x22:project\x3dprojectFeatureCollection;break;default:project\x3dprojectGeometry}return project(object,projection)};exports.geoGringortenQuincuncial\x3dfunction(){return quincuncial(gringortenRaw).scale(176.423)};exports.geoPeirceQuincuncial\x3dpeirce;exports.geoPierceQuincuncial\x3dpeirce;exports.geoQuantize\x3dfunction(input$jscomp$0,digits){function quantizePoint(input){var n\x3dinput.length,i\x3d2,output\x3dArray(n);output[0]\x3d+input[0].toFixed(digits);for(output[1]\x3d+input[1].toFixed(digits);i\x3c\nn;)output[i]\x3dinput[i],++i;return output}function quantizePointsNoDuplicates(input){for(var point0\x3dquantizePoint(input[0]),output\x3d[point0],i\x3d1;i\x3cinput.length;i++){var point\x3dquantizePoint(input[i]);if(2\x3cpoint.length||point[0]!\x3dpoint0[0]||point[1]!\x3dpoint0[1])output.push(point),point0\x3dpoint}1\x3d\x3d\x3doutput.length\x26\x261\x3cinput.length\x26\x26output.push(quantizePoint(input[input.length-1]));return output}function quantizePolygon(input){return input.map(quantizePointsNoDuplicates)}function quantizeGeometry(input){if(null\x3d\x3d\ninput)return input;switch(input.type){case \x22GeometryCollection\x22:var output\x3d{type:\x22GeometryCollection\x22,geometries:input.geometries.map(quantizeGeometry)};break;case \x22Point\x22:output\x3d{type:\x22Point\x22,coordinates:quantizePoint(input.coordinates)};break;case \x22MultiPoint\x22:output\x3d{type:input.type,coordinates:input.coordinates.map(quantizePoint)};break;case \x22LineString\x22:output\x3d{type:input.type,coordinates:quantizePointsNoDuplicates(input.coordinates)};break;case \x22MultiLineString\x22:case \x22Polygon\x22:output\x3d{type:input.type,\ncoordinates:quantizePolygon(input.coordinates)};break;case \x22MultiPolygon\x22:output\x3d{type:\x22MultiPolygon\x22,coordinates:input.coordinates.map(quantizePolygon)};break;default:return input}null!\x3dinput.bbox\x26\x26(output.bbox\x3dinput.bbox);return output}function quantizeFeature(input){var output\x3d{type:\x22Feature\x22,properties:input.properties,geometry:quantizeGeometry(input.geometry)};null!\x3dinput.id\x26\x26(output.id\x3dinput.id);null!\x3dinput.bbox\x26\x26(output.bbox\x3dinput.bbox);return output}if(!(0\x3c\x3d(digits\x3d+digits)\x26\x2620\x3e\x3ddigits))throw Error(\x22invalid digits\x22);\nif(null!\x3dinput$jscomp$0)switch(input$jscomp$0.type){case \x22Feature\x22:return quantizeFeature(input$jscomp$0);case \x22FeatureCollection\x22:var output$jscomp$0\x3d{type:\x22FeatureCollection\x22,features:input$jscomp$0.features.map(quantizeFeature)};null!\x3dinput$jscomp$0.bbox\x26\x26(output$jscomp$0.bbox\x3dinput$jscomp$0.bbox);return output$jscomp$0;default:return quantizeGeometry(input$jscomp$0)}return input$jscomp$0};exports.geoQuincuncial\x3dquincuncial;exports.geoRectangularPolyconic\x3dfunction(){return parallel1(rectangularPolyconicRaw).scale(131.215)};\nexports.geoRectangularPolyconicRaw\x3drectangularPolyconicRaw;exports.geoRobinson\x3dfunction(){return d3Geo.geoProjection(robinsonRaw).scale(152.63)};exports.geoRobinsonRaw\x3drobinsonRaw;exports.geoSatellite\x3dfunction(){var distance\x3d2,omega\x3d0,m\x3dd3Geo.geoProjectionMutator(satelliteRaw),p\x3dm(distance,omega);p.distance\x3dfunction(_){return arguments.length?m(distance\x3d+_,omega):distance};p.tilt\x3dfunction(_){return arguments.length?m(distance,omega\x3d_*radians):omega*degrees};return p.scale(432.147).clipAngle(acos(1/\ndistance)*degrees-1E-6)};exports.geoSatelliteRaw\x3dsatelliteRaw;exports.geoSinuMollweide\x3dfunction(){return d3Geo.geoProjection(sinuMollweideRaw).rotate([-20,-55]).scale(164.263).center([0,-5.4036])};exports.geoSinuMollweideRaw\x3dsinuMollweideRaw;exports.geoSinusoidal\x3dfunction(){return d3Geo.geoProjection(sinusoidalRaw).scale(152.63)};exports.geoSinusoidalRaw\x3dsinusoidalRaw;exports.geoStitch\x3dfunction(input){if(null\x3d\x3dinput)return input;switch(input.type){case \x22Feature\x22:return stitchFeature(input);case \x22FeatureCollection\x22:var output\x3d\n{type:\x22FeatureCollection\x22,features:input.features.map(stitchFeature)};null!\x3dinput.bbox\x26\x26(output.bbox\x3dinput.bbox);return output;default:return stitchGeometry(input)}};exports.geoTimes\x3dfunction(){return d3Geo.geoProjection(timesRaw).scale(146.153)};exports.geoTimesRaw\x3dtimesRaw;exports.geoTwoPointAzimuthal\x3dtwoPointAzimuthal;exports.geoTwoPointAzimuthalRaw\x3dtwoPointAzimuthalRaw;exports.geoTwoPointAzimuthalUsa\x3dfunction(){return twoPointAzimuthal([-158,21.5],[-77,39]).clipAngle(60).scale(400)};exports.geoTwoPointEquidistant\x3d\ntwoPointEquidistant;exports.geoTwoPointEquidistantRaw\x3dtwoPointEquidistantRaw;exports.geoTwoPointEquidistantUsa\x3dfunction(){return twoPointEquidistant([-158,21.5],[-77,39]).clipAngle(130).scale(122.571)};exports.geoVanDerGrinten\x3dfunction(){return d3Geo.geoProjection(vanDerGrintenRaw).scale(79.4183)};exports.geoVanDerGrintenRaw\x3dvanDerGrintenRaw;exports.geoVanDerGrinten2\x3dfunction(){return d3Geo.geoProjection(vanDerGrinten2Raw).scale(79.4183)};exports.geoVanDerGrinten2Raw\x3dvanDerGrinten2Raw;exports.geoVanDerGrinten3\x3d\nfunction(){return d3Geo.geoProjection(vanDerGrinten3Raw).scale(79.4183)};exports.geoVanDerGrinten3Raw\x3dvanDerGrinten3Raw;exports.geoVanDerGrinten4\x3dfunction(){return d3Geo.geoProjection(vanDerGrinten4Raw).scale(127.16)};exports.geoVanDerGrinten4Raw\x3dvanDerGrinten4Raw;exports.geoWagner\x3dwagner;exports.geoWagner7\x3dfunction(){return wagner().poleline(65).parallels(60).inflation(0).ratio(200).scale(172.633)};exports.geoWagnerRaw\x3dwagnerRaw;exports.geoWagner4\x3dfunction(){return d3Geo.geoProjection(wagner4Raw).scale(176.84)};\nexports.geoWagner4Raw\x3dwagner4Raw;exports.geoWagner6\x3dfunction(){return d3Geo.geoProjection(wagner6Raw).scale(152.63)};exports.geoWagner6Raw\x3dwagner6Raw;exports.geoWiechel\x3dfunction(){return d3Geo.geoProjection(wiechelRaw).rotate([0,-90,45]).scale(124.75).clipAngle(179.999)};exports.geoWiechelRaw\x3dwiechelRaw;exports.geoWinkel3\x3dfunction(){return d3Geo.geoProjection(winkel3Raw).scale(158.837)};exports.geoWinkel3Raw\x3dwinkel3Raw;Object.defineProperty(exports,\x22__esModule\x22,{value:!0})})}");
SHADOW_ENV.evalLoad("module$node_modules$vega_projection$build$vega_projection.js", true , "shadow$provide.module$node_modules$vega_projection$build$vega_projection\x3dfunction(global$jscomp$0,require,module,exports$jscomp$0){(function(global,factory){\x22object\x22\x3d\x3d\x3dtypeof exports$jscomp$0\x26\x26\x22undefined\x22!\x3d\x3dtypeof module?factory(exports$jscomp$0,require(\x22module$node_modules$d3_geo$dist$d3_geo\x22),require(\x22module$node_modules$d3_geo_projection$dist$d3_geo_projection\x22)):\x22function\x22\x3d\x3d\x3dtypeof define\x26\x26define.amd?define([\x22exports\x22,\x22d3-geo\x22,\x22d3-geo-projection\x22],factory):(global\x3dglobal||self,factory(global.vega\x3d\n{},global.d3,global.d3))})(this,function(exports,d3Geo,d3GeoProjection){function create(type,constructor){return function projection(){var p\x3dconstructor();p.type\x3dtype;p.path\x3dd3Geo.geoPath().projection(p);p.copy\x3dp.copy||function(){var c\x3dprojection();projectionProperties.forEach(function(prop){if(p[prop])c[prop](p[prop]())});c.path.pointRadius(p.path.pointRadius());return c};return p}}function projection$jscomp$0(type,proj){if(!type||\x22string\x22!\x3d\x3dtypeof type)throw Error(\x22Projection type must be a name string.\x22);\ntype\x3dtype.toLowerCase();return 1\x3carguments.length?(projections[type]\x3dcreate(type,proj),this):projections[type]||null}var defaultPath\x3dd3Geo.geoPath(),projectionProperties\x3d\x22clipAngle clipExtent scale translate center rotate parallels precision reflectX reflectY coefficient distance fraction lobes parallel radius ratio spacing tilt\x22.split(\x22 \x22),projections\x3d{albers:d3Geo.geoAlbers,albersusa:d3Geo.geoAlbersUsa,azimuthalequalarea:d3Geo.geoAzimuthalEqualArea,azimuthalequidistant:d3Geo.geoAzimuthalEquidistant,\nconicconformal:d3Geo.geoConicConformal,conicequalarea:d3Geo.geoConicEqualArea,conicequidistant:d3Geo.geoConicEquidistant,equalEarth:d3Geo.geoEqualEarth,equirectangular:d3Geo.geoEquirectangular,gnomonic:d3Geo.geoGnomonic,identity:d3Geo.geoIdentity,mercator:d3Geo.geoMercator,mollweide:d3GeoProjection.geoMollweide,naturalEarth1:d3Geo.geoNaturalEarth1,orthographic:d3Geo.geoOrthographic,stereographic:d3Geo.geoStereographic,transversemercator:d3Geo.geoTransverseMercator},key;for(key in projections)projection$jscomp$0(key,\nprojections[key]);exports.getProjectionPath\x3dfunction(proj){return proj\x26\x26proj.path||defaultPath};exports.projection\x3dprojection$jscomp$0;exports.projectionProperties\x3dprojectionProperties;Object.defineProperty(exports,\x22__esModule\x22,{value:!0})})}");
SHADOW_ENV.evalLoad("module$node_modules$vega_geo$build$vega_geo.js", true , "shadow$provide.module$node_modules$vega_geo$build$vega_geo\x3dfunction(global$jscomp$0,require,module,exports$jscomp$0){(function(global,factory){\x22object\x22\x3d\x3d\x3dtypeof exports$jscomp$0\x26\x26\x22undefined\x22!\x3d\x3dtypeof module?factory(exports$jscomp$0,require(\x22module$node_modules$vega_dataflow$build$vega_dataflow\x22),require(\x22module$node_modules$vega_util$build$vega_util\x22),require(\x22module$node_modules$d3_array$dist$d3_array\x22),require(\x22module$node_modules$vega_statistics$build$vega_statistics\x22),require(\x22module$node_modules$vega_projection$build$vega_projection\x22),\nrequire(\x22module$node_modules$d3_geo$dist$d3_geo\x22),require(\x22module$node_modules$d3_color$dist$d3_color\x22),require(\x22module$node_modules$vega_canvas$build$vega_canvas\x22)):\x22function\x22\x3d\x3d\x3dtypeof define\x26\x26define.amd?define(\x22exports vega-dataflow vega-util d3-array vega-statistics vega-projection d3-geo d3-color vega-canvas\x22.split(\x22 \x22),factory):(global\x3dglobal||self,factory((global.vega\x3dglobal.vega||{},global.vega.transforms\x3d{}),global.vega,global.vega,global.d3,global.vega,global.vega,global.d3,global.d3,global.vega))})(this,\nfunction(exports,vegaDataflow,vegaUtil,d3Array,vegaStatistics,vegaProjection,d3Geo,d3Color,vegaCanvas){function noop(){}function contours$jscomp$0(){function contours(values,tz){return tz.map(function(value){return contour(values,value)})}function contour(values,value){var polygons\x3d[],holes\x3d[];isorings(values,value,function(ring){smooth(ring,values,value);for(var i\x3d0,n\x3dring.length,area\x3dring[n-1][1]*ring[0][0]-ring[n-1][0]*ring[0][1];++i\x3cn;)area+\x3dring[i-1][1]*ring[i][0]-ring[i-1][0]*ring[i][1];0\x3carea?\npolygons.push([ring]):holes.push(ring)});holes.forEach(function(hole$jscomp$0){for(var i\x3d0,n\x3dpolygons.length,polygon;i\x3cn;++i){a:{var JSCompiler_inline_result\x3d(polygon\x3dpolygons[i])[0];for(var hole\x3dhole$jscomp$0,i$jscomp$0\x3d-1,n$jscomp$0\x3dhole.length;++i$jscomp$0\x3cn$jscomp$0;){b:{var c\x3dJSCompiler_inline_result;for(var point\x3dhole[i$jscomp$0],x\x3dpoint[0],y\x3dpoint[1],contains\x3d-1,i$jscomp$1\x3d0,n$jscomp$1\x3dc.length,j\x3dn$jscomp$1-1;i$jscomp$1\x3cn$jscomp$1;j\x3di$jscomp$1++){var pi\x3dc[i$jscomp$1],xi\x3dpi[0],yi\x3dpi[1],pj\x3dc[j];\nj\x3dpj[0];var yj\x3dpj[1],i$jscomp$2,a\x3dpi;pi\x3dpj;pj\x3dpoint;if(i$jscomp$2\x3d(pi[0]-a[0])*(pj[1]-a[1])\x3d\x3d\x3d(pj[0]-a[0])*(pi[1]-a[1]))a\x3da[i$jscomp$2\x3d+(a[0]\x3d\x3d\x3dpi[0])],pj\x3dpj[i$jscomp$2],pi\x3dpi[i$jscomp$2],i$jscomp$2\x3da\x3c\x3dpj\x26\x26pj\x3c\x3dpi||pi\x3c\x3dpj\x26\x26pj\x3c\x3da;if(i$jscomp$2){c\x3d0;break b}yi\x3ey!\x3d\x3dyj\x3ey\x26\x26x\x3c(j-xi)*(y-yi)/(yj-yi)+xi\x26\x26(contains\x3d-contains)}c\x3dcontains}if(c){JSCompiler_inline_result\x3dc;break a}}JSCompiler_inline_result\x3d0}if(-1!\x3d\x3dJSCompiler_inline_result){polygon.push(hole$jscomp$0);break}}});return{type:\x22MultiPolygon\x22,value:value,\ncoordinates:polygons}}function isorings(values,value,callback){function stitch(line){var start\x3d[line[0][0]+x,line[0][1]+y];line\x3d[line[1][0]+x,line[1][1]+y];var startIndex\x3d2*start[0]+start[1]*(dx+1)*4,endIndex\x3d2*line[0]+line[1]*(dx+1)*4,f,g;(f\x3dfragmentByEnd[startIndex])?(g\x3dfragmentByStart[endIndex])?(delete fragmentByEnd[f.end],delete fragmentByStart[g.start],f\x3d\x3d\x3dg?(f.ring.push(line),callback(f.ring)):fragmentByStart[f.start]\x3dfragmentByEnd[g.end]\x3d{start:f.start,end:g.end,ring:f.ring.concat(g.ring)}):\n(delete fragmentByEnd[f.end],f.ring.push(line),fragmentByEnd[f.end\x3dendIndex]\x3df):(f\x3dfragmentByStart[endIndex])?(g\x3dfragmentByEnd[startIndex])?(delete fragmentByStart[f.start],delete fragmentByEnd[g.end],f\x3d\x3d\x3dg?(f.ring.push(line),callback(f.ring)):fragmentByStart[g.start]\x3dfragmentByEnd[f.end]\x3d{start:g.start,end:f.end,ring:g.ring.concat(f.ring)}):(delete fragmentByStart[f.start],f.ring.unshift(start),fragmentByStart[f.start\x3dstartIndex]\x3df):fragmentByStart[startIndex]\x3dfragmentByEnd[endIndex]\x3d{start:startIndex,\nend:endIndex,ring:[start,line]}}var fragmentByStart\x3d[],fragmentByEnd\x3d[],y;var x\x3dy\x3d-1;var t1\x3dvalues[0]\x3e\x3dvalue;for(cases[t1\x3c\x3c1].forEach(stitch);++x\x3cdx-1;){var t0\x3dt1;t1\x3dvalues[x+1]\x3e\x3dvalue;cases[t0|t1\x3c\x3c1].forEach(stitch)}for(cases[t1\x3c\x3c0].forEach(stitch);++y\x3cdy-1;){x\x3d-1;t1\x3dvalues[y*dx+dx]\x3e\x3dvalue;var t2\x3dvalues[y*dx]\x3e\x3dvalue;for(cases[t1\x3c\x3c1|t2\x3c\x3c2].forEach(stitch);++x\x3cdx-1;){t0\x3dt1;t1\x3dvalues[y*dx+dx+x+1]\x3e\x3dvalue;var t3\x3dt2;t2\x3dvalues[y*dx+x+1]\x3e\x3dvalue;cases[t0|t1\x3c\x3c1|t2\x3c\x3c2|t3\x3c\x3c3].forEach(stitch)}cases[t1|t2\x3c\x3c3].forEach(stitch)}x\x3d\n-1;t2\x3dvalues[y*dx]\x3e\x3dvalue;for(cases[t2\x3c\x3c2].forEach(stitch);++x\x3cdx-1;)t3\x3dt2,t2\x3dvalues[y*dx+x+1]\x3e\x3dvalue,cases[t2\x3c\x3c2|t3\x3c\x3c3].forEach(stitch);cases[t2\x3c\x3c3].forEach(stitch)}function smoothLinear(ring,values,value){ring.forEach(function(point){var x\x3dpoint[0],y\x3dpoint[1],xt\x3dx|0,yt\x3dy|0,v1\x3dvalues[yt*dx+xt];if(0\x3cx\x26\x26x\x3cdx\x26\x26xt\x3d\x3d\x3dx){var v0\x3dvalues[yt*dx+xt-1];point[0]\x3dx+(value-v0)/(v1-v0)-.5}0\x3cy\x26\x26y\x3cdy\x26\x26yt\x3d\x3d\x3dy\x26\x26(v0\x3dvalues[(yt-1)*dx+xt],point[1]\x3dy+(value-v0)/(v1-v0)-.5)})}var dx\x3d1,dy\x3d1,smooth\x3dsmoothLinear;contours.contour\x3d\ncontour;contours.size\x3dfunction(_){if(!arguments.length)return[dx,dy];var _0\x3dMath.floor(_[0]),_1\x3dMath.floor(_[1]);0\x3c\x3d_0\x26\x260\x3c\x3d_1||vegaUtil.error(\x22invalid size\x22);return dx\x3d_0,dy\x3d_1,contours};contours.smooth\x3dfunction(_){return arguments.length?(smooth\x3d_?smoothLinear:noop,contours):smooth\x3d\x3d\x3dsmoothLinear};return contours}function quantize(k,nice,zero){return function(values){var ex\x3dvegaUtil.extent(values);values\x3dzero?Math.min(ex[0],0):ex[0];ex\x3dex[1];var span\x3dex-values;values\x3dnice?d3Array.tickStep(values,\nex,k):span/(k+1);return d3Array.range(values,ex,values)}}function Isocontour(params){vegaDataflow.Transform.call(this,null,params)}function levels(values,f,_){var q\x3dquantize(_.levels||10,_.nice,!1!\x3d\x3d_.zero);return\x22shared\x22!\x3d\x3d_.resolve?q:q(values.map(function(t){return d3Array.max(f(t).values)}))}function transformPaths(paths,grid,datum,_){var s\x3d_.scale||grid.scale,t\x3d_.translate||grid.translate;vegaUtil.isFunction(s)\x26\x26(s\x3ds(datum,_));vegaUtil.isFunction(t)\x26\x26(t\x3dt(datum,_));if(1!\x3d\x3ds\x26\x26null!\x3ds||t)datum\x3d\n(vegaUtil.isNumber(s)?s:s[0])||1,s\x3d(vegaUtil.isNumber(s)?s:s[1])||1,paths.forEach(transform(grid,datum,s,t\x26\x26t[0]||0,t\x26\x26t[1]||0))}function transform(grid,sx,sy,tx,ty){function transformPolygon(coordinates){coordinates.forEach(transformRing)}function transformRing(coordinates){flip\x26\x26coordinates.reverse();coordinates.forEach(transformPoint)}function transformPoint(coordinates){coordinates[0]\x3d(coordinates[0]-x1)*sx+tx;coordinates[1]\x3d(coordinates[1]-y1)*sy+ty}var x1\x3dgrid.x1||0,y1\x3dgrid.y1||0,flip\x3d0\x3esx*\nsy;return function(geometry){geometry.coordinates.forEach(transformPolygon);return geometry}}function radius(bw,data,f){bw\x3d0\x3c\x3dbw?bw:vegaStatistics.bandwidthNRD(data,f);return Math.round((Math.sqrt(4*bw*bw+1)-1)/2)}function number(_){return vegaUtil.isFunction(_)?_:vegaUtil.constant(+_)}function density2D(){function density(data,counts){var rx\x3dradius(bandwidth[0],data,x)\x3e\x3ek,ry\x3dradius(bandwidth[1],data,y)\x3e\x3ek,ox\x3drx?rx+2:0,oy\x3dry?ry+2:0,n\x3d2*ox+(dx\x3e\x3ek),m\x3d2*oy+(dy\x3e\x3ek),values0\x3dnew Float32Array(n*m),values1\x3d\nnew Float32Array(n*m),values\x3dvalues0;data.forEach(function(d){var xi\x3dox+(+x(d)\x3e\x3ek),yi\x3doy+(+y(d)\x3e\x3ek);0\x3c\x3dxi\x26\x26xi\x3cn\x26\x260\x3c\x3dyi\x26\x26yi\x3cm\x26\x26(values0[xi+yi*n]+\x3d+weight(d))});0\x3crx\x26\x260\x3cry?(blurX(n,m,values0,values1,rx),blurY(n,m,values1,values0,ry),blurX(n,m,values0,values1,rx),blurY(n,m,values1,values0,ry),blurX(n,m,values0,values1,rx),blurY(n,m,values1,values0,ry)):0\x3crx?(blurX(n,m,values0,values1,rx),blurX(n,m,values1,values0,rx),blurX(n,m,values0,values1,rx),values\x3dvalues1):0\x3cry\x26\x26(blurY(n,m,values0,values1,ry),\nblurY(n,m,values1,values0,ry),blurY(n,m,values0,values1,ry),values\x3dvalues1);data\x3dcounts?Math.pow(2,-2*k):1/d3Array.sum(values);counts\x3d0;for(rx\x3dn*m;counts\x3crx;++counts)values[counts]*\x3ddata;return{values:values,scale:1\x3c\x3ck,width:n,height:m,x1:ox,y1:oy,x2:ox+(dx\x3e\x3ek),y2:oy+(dy\x3e\x3ek)}}var x\x3dfunction(d){return d[0]},y\x3dfunction(d){return d[1]},weight\x3dvegaUtil.one,bandwidth\x3d[-1,-1],dx\x3d960,dy\x3d500,k\x3d2;density.x\x3dfunction(_){return arguments.length?(x\x3dnumber(_),density):x};density.y\x3dfunction(_){return arguments.length?\n(y\x3dnumber(_),density):y};density.weight\x3dfunction(_){return arguments.length?(weight\x3dnumber(_),density):weight};density.size\x3dfunction(_){if(!arguments.length)return[dx,dy];var _0\x3d+_[0],_1\x3d+_[1];0\x3c\x3d_0\x26\x260\x3c\x3d_1||vegaUtil.error(\x22invalid size\x22);return dx\x3d_0,dy\x3d_1,density};density.cellSize\x3dfunction(_){if(!arguments.length)return 1\x3c\x3ck;1\x3c\x3d(_\x3d+_)||vegaUtil.error(\x22invalid cell size\x22);k\x3dMath.floor(Math.log(_)/Math.LN2);return density};density.bandwidth\x3dfunction(_){if(!arguments.length)return bandwidth;_\x3dvegaUtil.array(_);\n1\x3d\x3d\x3d_.length\x26\x26(_\x3d[+_[0],+_[0]]);2!\x3d\x3d_.length\x26\x26vegaUtil.error(\x22invalid bandwidth\x22);return bandwidth\x3d_,density};return density}function blurX(n,m,source,target,r){for(var w\x3d(r\x3c\x3c1)+1,j\x3d0;j\x3cm;++j)for(var i\x3d0,sr\x3d0;i\x3cn+r;++i)i\x3cn\x26\x26(sr+\x3dsource[i+j*n]),i\x3e\x3dr\x26\x26(i\x3e\x3dw\x26\x26(sr-\x3dsource[i-w+j*n]),target[i-r+j*n]\x3dsr/Math.min(i+1,n-1+w-i,w))}function blurY(n,m,source,target,r){for(var w\x3d(r\x3c\x3c1)+1,i\x3d0;i\x3cn;++i)for(var j\x3d0,sr\x3d0;j\x3cm+r;++j)j\x3cm\x26\x26(sr+\x3dsource[i+j*n]),j\x3e\x3dr\x26\x26(j\x3e\x3dw\x26\x26(sr-\x3dsource[i+(j-w)*n]),target[i+(j-r)*n]\x3dsr/Math.min(j+\n1,m-1+w-j,w))}function KDE2D(params){vegaDataflow.Transform.call(this,null,params)}function params$jscomp$0(obj,_){PARAMS.forEach(function(param){return null!\x3d_[param]?obj[param](_[param]):0});return obj}function partition(data,groupby){var groups\x3d[],get\x3dfunction(f){return f(t)},n;if(null\x3d\x3dgroupby)groups.push(data);else{var map\x3d{};var i\x3d0;for(n\x3ddata.length;i\x3cn;++i){var t\x3ddata[i];var k\x3dgroupby.map(get);var g\x3dmap[k];g||(map[k]\x3dg\x3d[],g.dims\x3dk,groups.push(g));g.push(t)}}return groups}function Contour(params){vegaDataflow.Transform.call(this,\nnull,params)}function GeoJSON(params){vegaDataflow.Transform.call(this,null,params)}function GeoPath(params){vegaDataflow.Transform.call(this,null,params)}function initPath(path,pointRadius){var prev\x3dpath.pointRadius();path.context(null);null!\x3dpointRadius\x26\x26path.pointRadius(pointRadius);return prev}function GeoPoint(params){vegaDataflow.Transform.call(this,null,params)}function GeoShape(params){vegaDataflow.Transform.call(this,null,params)}function shapeGenerator(path,field,pointRadius){var shape\x3d\nnull\x3d\x3dpointRadius?function(_){return path(field(_))}:function(_){var prev\x3dpath.pointRadius();_\x3dpath.pointRadius(pointRadius)(field(_));path.pointRadius(prev);return _};shape.context\x3dfunction(_){path.context(_);return shape};return shape}function Graticule(params){vegaDataflow.Transform.call(this,[],params);this.generator\x3dd3Geo.geoGraticule()}function Heatmap(params){vegaDataflow.Transform.call(this,null,params)}function color_(color,_){if(vegaUtil.isFunction(color)){var f\x3dfunction(obj){return d3Color.rgb(color(obj,\n_))};f.dep\x3ddependency(color)}else f\x3dvegaUtil.constant(d3Color.rgb(color||\x22#888\x22));return f}function opacity_(opacity,_){if(vegaUtil.isFunction(opacity)){var f\x3dfunction(obj){return opacity(obj,_)};f.dep\x3ddependency(opacity)}else opacity?f\x3dvegaUtil.constant(opacity):(f\x3dfunction(obj){return obj.$value/obj.$max||0},f.dep\x3d!0);return f}function dependency(f){if(!vegaUtil.isFunction(f))return!1;f\x3dvegaUtil.toSet(vegaUtil.accessorFields(f));return f.$x||f.$y||f.$value||f.$max}function toCanvas(grid,obj,color,\nopacity){var n\x3dgrid.width,m\x3dgrid.height,x1\x3dgrid.x1||0,y1\x3dgrid.y1||0,x2\x3dgrid.x2||n;m\x3dgrid.y2||m;var val\x3dgrid.values;grid\x3dval?function(i){return val[i]}:vegaUtil.zero;for(var can\x3dvegaCanvas.canvas(x2-x1,m-y1),ctx\x3dcan.getContext(\x222d\x22),img\x3dctx.getImageData(0,0,x2-x1,m-y1),pix\x3dimg.data,j\x3dy1,k\x3d0;j\x3cm;++j){obj.$y\x3dj-y1;for(var i$jscomp$0\x3dx1,r\x3dj*n;i$jscomp$0\x3cx2;++i$jscomp$0,k+\x3d4){obj.$x\x3di$jscomp$0-x1;obj.$value\x3dgrid(i$jscomp$0+r);var v\x3dcolor(obj);pix[k+0]\x3dv.r;pix[k+1]\x3dv.g;pix[k+2]\x3dv.b;pix[k+3]\x3d~~(255*opacity(obj))}}ctx.putImageData(img,\n0,0);return can}function Projection(params){vegaDataflow.Transform.call(this,null,params);this.modified(!0)}function fit(proj,_){var data\x3dcollectGeoJSON(_.fit);_.extent?proj.fitExtent(_.extent,data):_.size?proj.fitSize(_.size,data):0}function create(type){var constructor\x3dvegaProjection.projection((type||\x22mercator\x22).toLowerCase());constructor||vegaUtil.error(\x22Unrecognized projection type: \x22+type);return constructor()}function collectGeoJSON(data){data\x3dvegaUtil.array(data);return 1\x3d\x3d\x3ddata.length?data[0]:\n{type:\x22FeatureCollection\x22,features:data.reduce(function(a,f){return a.concat(featurize(f))},[])}}function featurize(f){return\x22FeatureCollection\x22\x3d\x3d\x3df.type?f.features:vegaUtil.array(f).filter(function(d){return null!\x3dd}).map(function(d){return\x22Feature\x22\x3d\x3d\x3dd.type?d:{type:\x22Feature\x22,geometry:d}})}var cases\x3d[[],[[[1,1.5],[.5,1]]],[[[1.5,1],[1,1.5]]],[[[1.5,1],[.5,1]]],[[[1,.5],[1.5,1]]],[[[1,1.5],[.5,1]],[[1,.5],[1.5,1]]],[[[1,.5],[1,1.5]]],[[[1,.5],[.5,1]]],[[[.5,1],[1,.5]]],[[[1,1.5],[1,.5]]],[[[.5,1],\n[1,.5]],[[1.5,1],[1,1.5]]],[[[1.5,1],[1,.5]]],[[[.5,1],[1.5,1]]],[[[1,1.5],[1.5,1]]],[[[.5,1],[1,1.5]]],[]];Isocontour.Definition\x3d{type:\x22Isocontour\x22,metadata:{generates:!0},params:[{name:\x22field\x22,type:\x22field\x22},{name:\x22thresholds\x22,type:\x22number\x22,array:!0},{name:\x22levels\x22,type:\x22number\x22},{name:\x22nice\x22,type:\x22boolean\x22,\x22default\x22:!1},{name:\x22resolve\x22,type:\x22enum\x22,values:[\x22shared\x22,\x22independent\x22],\x22default\x22:\x22independent\x22},{name:\x22zero\x22,type:\x22boolean\x22,\x22default\x22:!0},{name:\x22smooth\x22,type:\x22boolean\x22,\x22default\x22:!0},{name:\x22scale\x22,\ntype:\x22number\x22,expr:!0},{name:\x22translate\x22,type:\x22number\x22,array:!0,expr:!0},{name:\x22as\x22,type:\x22string\x22,\x22null\x22:!0,\x22default\x22:\x22contour\x22}]};vegaUtil.inherits(Isocontour,vegaDataflow.Transform).transform\x3dfunction(_,pulse){if(this.value\x26\x26!pulse.changed()\x26\x26!_.modified())return pulse.StopPropagation;var out\x3dpulse.fork(pulse.NO_SOURCE|pulse.NO_FIELDS);pulse\x3dpulse.materialize(pulse.SOURCE).source;var field\x3d_.field||vegaUtil.identity,contour\x3dcontours$jscomp$0().smooth(!1!\x3d\x3d_.smooth),tz\x3d_.thresholds||levels(pulse,\nfield,_),as\x3dnull\x3d\x3d\x3d_.as?null:_.as||\x22contour\x22,values\x3d[];pulse.forEach(function(t){var grid\x3dfield(t),paths\x3dcontour.size([grid.width,grid.height])(grid.values,vegaUtil.isArray(tz)?tz:tz(grid.values));transformPaths(paths,grid,t,_);paths.forEach(function(p){var $jscomp$compprop50\x3d{};values.push(vegaDataflow.rederive(t,vegaDataflow.ingest(null!\x3das?($jscomp$compprop50[as]\x3dp,$jscomp$compprop50):p)))})});this.value\x26\x26(out.rem\x3dthis.value);this.value\x3dout.source\x3dout.add\x3dvalues;return out};KDE2D.Definition\x3d{type:\x22KDE2D\x22,\nmetadata:{generates:!0},params:[{name:\x22size\x22,type:\x22number\x22,array:!0,length:2,required:!0},{name:\x22x\x22,type:\x22field\x22,required:!0},{name:\x22y\x22,type:\x22field\x22,required:!0},{name:\x22weight\x22,type:\x22field\x22},{name:\x22groupby\x22,type:\x22field\x22,array:!0},{name:\x22cellSize\x22,type:\x22number\x22},{name:\x22bandwidth\x22,type:\x22number\x22,array:!0,length:2},{name:\x22counts\x22,type:\x22boolean\x22,\x22default\x22:!1},{name:\x22as\x22,type:\x22string\x22,\x22default\x22:\x22grid\x22}]};var PARAMS\x3d\x22x y weight size cellSize bandwidth\x22.split(\x22 \x22);vegaUtil.inherits(KDE2D,vegaDataflow.Transform).transform\x3d\nfunction(_,pulse){function set(t,vals){for(var i\x3d0;i\x3cnames.length;++i)t[names[i]]\x3dvals[i];return t}if(this.value\x26\x26!pulse.changed()\x26\x26!_.modified())return pulse.StopPropagation;var out\x3dpulse.fork(pulse.NO_SOURCE|pulse.NO_FIELDS);pulse\x3dpulse.materialize(pulse.SOURCE).source;pulse\x3dpartition(pulse,_.groupby);var names\x3d(_.groupby||[]).map(vegaUtil.accessorName),kde\x3dparams$jscomp$0(density2D(),_),as\x3d_.as||\x22grid\x22,values\x3d[];values\x3dpulse.map(function(g){var $jscomp$compprop51\x3d{};return vegaDataflow.ingest(set(($jscomp$compprop51[as]\x3d\nkde(g,_.counts),$jscomp$compprop51),g.dims))});this.value\x26\x26(out.rem\x3dthis.value);this.value\x3dout.source\x3dout.add\x3dvalues;return out};Contour.Definition\x3d{type:\x22Contour\x22,metadata:{generates:!0},params:[{name:\x22size\x22,type:\x22number\x22,array:!0,length:2,required:!0},{name:\x22values\x22,type:\x22number\x22,array:!0},{name:\x22x\x22,type:\x22field\x22},{name:\x22y\x22,type:\x22field\x22},{name:\x22weight\x22,type:\x22field\x22},{name:\x22cellSize\x22,type:\x22number\x22},{name:\x22bandwidth\x22,type:\x22number\x22},{name:\x22count\x22,type:\x22number\x22},{name:\x22nice\x22,type:\x22boolean\x22,\x22default\x22:!1},\n{name:\x22thresholds\x22,type:\x22number\x22,array:!0},{name:\x22smooth\x22,type:\x22boolean\x22,\x22default\x22:!0}]};vegaUtil.inherits(Contour,vegaDataflow.Transform).transform\x3dfunction(_,pulse){if(this.value\x26\x26!pulse.changed()\x26\x26!_.modified())return pulse.StopPropagation;var out\x3dpulse.fork(pulse.NO_SOURCE|pulse.NO_FIELDS),contour\x3dcontours$jscomp$0().smooth(!1!\x3d\x3d_.smooth),values\x3d_.values,thresh\x3d_.thresholds||quantize(_.count||10,_.nice,!!values),size\x3d_.size;if(!values){values\x3dpulse.materialize(pulse.SOURCE).source;_\x3dparams$jscomp$0(density2D(),\n_)(values,!0);var post\x3dtransform(_,_.scale||1,_.scale||1,0,0);size\x3d[_.width,_.height];values\x3d_.values}thresh\x3dvegaUtil.isArray(thresh)?thresh:thresh(values);values\x3dcontour.size(size)(values,thresh);post\x26\x26values.forEach(post);this.value\x26\x26(out.rem\x3dthis.value);this.value\x3dout.source\x3dout.add\x3d(values||[]).map(vegaDataflow.ingest);return out};GeoJSON.Definition\x3d{type:\x22GeoJSON\x22,metadata:{},params:[{name:\x22fields\x22,type:\x22field\x22,array:!0,length:2},{name:\x22geojson\x22,type:\x22field\x22}]};vegaUtil.inherits(GeoJSON,vegaDataflow.Transform).transform\x3d\nfunction(_,pulse){var features\x3dthis._features,points\x3dthis._points,fields\x3d_.fields,lon\x3dfields\x26\x26fields[0],lat\x3dfields\x26\x26fields[1],geojson\x3d_.geojson||!fields\x26\x26vegaUtil.identity;fields\x3dpulse.ADD;_\x3d_.modified()||pulse.changed(pulse.REM)||pulse.modified(vegaUtil.accessorFields(geojson))||lon\x26\x26pulse.modified(vegaUtil.accessorFields(lon))||lat\x26\x26pulse.modified(vegaUtil.accessorFields(lat));if(!this.value||_)fields\x3dpulse.SOURCE,this._features\x3dfeatures\x3d[],this._points\x3dpoints\x3d[];geojson\x26\x26pulse.visit(fields,function(t){features.push(geojson(t))});\nlon\x26\x26lat\x26\x26(pulse.visit(fields,function(t){var x\x3dlon(t);t\x3dlat(t);null!\x3dx\x26\x26null!\x3dt\x26\x26(x\x3d+x)\x3d\x3d\x3dx\x26\x26(t\x3d+t)\x3d\x3d\x3dt\x26\x26points.push([x,t])}),features\x3dfeatures.concat({type:\x22Feature\x22,geometry:{type:\x22MultiPoint\x22,coordinates:points}}));this.value\x3d{type:\x22FeatureCollection\x22,features:features}};GeoPath.Definition\x3d{type:\x22GeoPath\x22,metadata:{modifies:!0},params:[{name:\x22projection\x22,type:\x22projection\x22},{name:\x22field\x22,type:\x22field\x22},{name:\x22pointRadius\x22,type:\x22number\x22,expr:!0},{name:\x22as\x22,type:\x22string\x22,\x22default\x22:\x22path\x22}]};vegaUtil.inherits(GeoPath,\nvegaDataflow.Transform).transform\x3dfunction(_,pulse){var out\x3dpulse.fork(pulse.ALL),path\x3dthis.value,field\x3d_.field||vegaUtil.identity,as\x3d_.as||\x22path\x22,flag\x3dout.SOURCE;!path||_.modified()?(this.value\x3dpath\x3dvegaProjection.getProjectionPath(_.projection),out.materialize().reflow()):flag\x3dfield\x3d\x3d\x3dvegaUtil.identity||pulse.modified(field.fields)?out.ADD_MOD:out.ADD;_\x3dinitPath(path,_.pointRadius);out.visit(flag,function(t){t[as]\x3dpath(field(t))});path.pointRadius(_);return out.modifies(as)};GeoPoint.Definition\x3d\n{type:\x22GeoPoint\x22,metadata:{modifies:!0},params:[{name:\x22projection\x22,type:\x22projection\x22,required:!0},{name:\x22fields\x22,type:\x22field\x22,array:!0,required:!0,length:2},{name:\x22as\x22,type:\x22string\x22,array:!0,length:2,\x22default\x22:[\x22x\x22,\x22y\x22]}]};vegaUtil.inherits(GeoPoint,vegaDataflow.Transform).transform\x3dfunction(_,pulse){function set(t){var xy\x3dproj([lon(t),lat(t)]);xy?(t[x]\x3dxy[0],t[y]\x3dxy[1]):(t[x]\x3dvoid 0,t[y]\x3dvoid 0)}var proj\x3d_.projection,lon\x3d_.fields[0],lat\x3d_.fields[1],as\x3d_.as||[\x22x\x22,\x22y\x22],x\x3das[0],y\x3das[1];_.modified()?\npulse\x3dpulse.materialize().reflow(!0).visit(pulse.SOURCE,set):(_\x3dpulse.modified(lon.fields)||pulse.modified(lat.fields),pulse.visit(_?pulse.ADD_MOD:pulse.ADD,set));return pulse.modifies(as)};GeoShape.Definition\x3d{type:\x22GeoShape\x22,metadata:{modifies:!0,nomod:!0},params:[{name:\x22projection\x22,type:\x22projection\x22},{name:\x22field\x22,type:\x22field\x22,\x22default\x22:\x22datum\x22},{name:\x22pointRadius\x22,type:\x22number\x22,expr:!0},{name:\x22as\x22,type:\x22string\x22,\x22default\x22:\x22shape\x22}]};vegaUtil.inherits(GeoShape,vegaDataflow.Transform).transform\x3d\nfunction(_,pulse){pulse\x3dpulse.fork(pulse.ALL);var shape\x3dthis.value,as\x3d_.as||\x22shape\x22,flag\x3dpulse.ADD;if(!shape||_.modified())this.value\x3dshape\x3dshapeGenerator(vegaProjection.getProjectionPath(_.projection),_.field||vegaUtil.field(\x22datum\x22),_.pointRadius),pulse.materialize().reflow(),flag\x3dpulse.SOURCE;pulse.visit(flag,function(t){t[as]\x3dshape});return pulse.modifies(as)};Graticule.Definition\x3d{type:\x22Graticule\x22,metadata:{changes:!0,generates:!0},params:[{name:\x22extent\x22,type:\x22array\x22,array:!0,length:2,content:{type:\x22number\x22,\narray:!0,length:2}},{name:\x22extentMajor\x22,type:\x22array\x22,array:!0,length:2,content:{type:\x22number\x22,array:!0,length:2}},{name:\x22extentMinor\x22,type:\x22array\x22,array:!0,length:2,content:{type:\x22number\x22,array:!0,length:2}},{name:\x22step\x22,type:\x22number\x22,array:!0,length:2},{name:\x22stepMajor\x22,type:\x22number\x22,array:!0,length:2,\x22default\x22:[90,360]},{name:\x22stepMinor\x22,type:\x22number\x22,array:!0,length:2,\x22default\x22:[10,10]},{name:\x22precision\x22,type:\x22number\x22,\x22default\x22:2.5}]};vegaUtil.inherits(Graticule,vegaDataflow.Transform).transform\x3d\nfunction(_,pulse){var src\x3dthis.value,gen\x3dthis.generator;if(!src.length||_.modified())for(var prop in _)if(vegaUtil.isFunction(gen[prop]))gen[prop](_[prop]);_\x3dgen();src.length?pulse.mod.push(vegaDataflow.replace(src[0],_)):pulse.add.push(vegaDataflow.ingest(_));src[0]\x3d_;return pulse};Heatmap.Definition\x3d{type:\x22heatmap\x22,metadata:{modifies:!0},params:[{name:\x22field\x22,type:\x22field\x22},{name:\x22color\x22,type:\x22string\x22,expr:!0},{name:\x22opacity\x22,type:\x22number\x22,expr:!0},{name:\x22resolve\x22,type:\x22enum\x22,values:[\x22shared\x22,\x22independent\x22],\n\x22default\x22:\x22independent\x22},{name:\x22as\x22,type:\x22string\x22,\x22default\x22:\x22image\x22}]};vegaUtil.inherits(Heatmap,vegaDataflow.Transform).transform\x3dfunction(_,pulse){if(!pulse.changed()\x26\x26!_.modified())return pulse.StopPropagation;var source\x3dpulse.materialize(pulse.SOURCE).source,shared\x3d\x22shared\x22\x3d\x3d\x3d_.resolve,field\x3d_.field||vegaUtil.identity,opacity\x3dopacity_(_.opacity,_),color\x3dcolor_(_.color,_),as\x3d_.as||\x22image\x22,obj\x3d{$x:0,$y:0,$value:0,$max:shared?d3Array.max(source.map(function(t){return d3Array.max(field(t).values)})):\n0};source.forEach(function(t){var v\x3dfield(t),o\x3dvegaUtil.extend({},t,obj);shared||(o.$max\x3dd3Array.max(v.values||[]));t[as]\x3dtoCanvas(v,o,color.dep?color:vegaUtil.constant(color(o)),opacity.dep?opacity:vegaUtil.constant(opacity(o)))});return pulse.reflow(!0).modifies(as)};vegaUtil.inherits(Projection,vegaDataflow.Transform).transform\x3dfunction(_,pulse){var proj$jscomp$0\x3dthis.value;!proj$jscomp$0||_.modified(\x22type\x22)?(this.value\x3dproj$jscomp$0\x3dcreate(_.type),vegaProjection.projectionProperties.forEach(function(prop){if(null!\x3d\n_[prop]){var proj\x3dproj$jscomp$0,value\x3d_[prop];if(vegaUtil.isFunction(proj[prop]))proj[prop](value)}})):vegaProjection.projectionProperties.forEach(function(prop){if(_.modified(prop)){var proj\x3dproj$jscomp$0,value\x3d_[prop];if(vegaUtil.isFunction(proj[prop]))proj[prop](value)}});null!\x3d_.pointRadius\x26\x26proj$jscomp$0.path.pointRadius(_.pointRadius);_.fit\x26\x26fit(proj$jscomp$0,_);return pulse.fork(pulse.NO_SOURCE|pulse.NO_FIELDS)};exports.contour\x3dContour;exports.geojson\x3dGeoJSON;exports.geopath\x3dGeoPath;exports.geopoint\x3d\nGeoPoint;exports.geoshape\x3dGeoShape;exports.graticule\x3dGraticule;exports.heatmap\x3dHeatmap;exports.isocontour\x3dIsocontour;exports.kde2d\x3dKDE2D;exports.projection\x3dProjection;Object.defineProperty(exports,\x22__esModule\x22,{value:!0})})}");
SHADOW_ENV.evalLoad("module$node_modules$d3_quadtree$dist$d3_quadtree.js", true , "shadow$provide.module$node_modules$d3_quadtree$dist$d3_quadtree\x3dfunction(global$jscomp$0,require,module,exports$jscomp$0){(function(global,factory){\x22object\x22\x3d\x3d\x3dtypeof exports$jscomp$0\x26\x26\x22undefined\x22!\x3d\x3dtypeof module?factory(exports$jscomp$0):\x22function\x22\x3d\x3d\x3dtypeof define\x26\x26define.amd?define([\x22exports\x22],factory):(global\x3dglobal||self,factory(global.d3\x3dglobal.d3||{}))})(this,function(exports){function add(tree,x,y,d){if(isNaN(x)||isNaN(y))return tree;var parent,node\x3dtree._root;d\x3d{data:d};var x0\x3dtree._x0,y0\x3d\ntree._y0,x1\x3dtree._x1,y1\x3dtree._y1,xm,ym,right,bottom;if(!node)return tree._root\x3dd,tree;for(;node.length;)if((right\x3dx\x3e\x3d(xm\x3d(x0+x1)/2))?x0\x3dxm:x1\x3dxm,(bottom\x3dy\x3e\x3d(ym\x3d(y0+y1)/2))?y0\x3dym:y1\x3dym,parent\x3dnode,!(node\x3dnode[right|\x3dbottom\x3c\x3c1]))return parent[right]\x3dd,tree;var xp\x3d+tree._x.call(null,node.data);var yp\x3d+tree._y.call(null,node.data);if(x\x3d\x3d\x3dxp\x26\x26y\x3d\x3d\x3dyp)return d.next\x3dnode,parent?parent[right]\x3dd:tree._root\x3dd,tree;do parent\x3dparent?parent[right]\x3dArray(4):tree._root\x3dArray(4),(right\x3dx\x3e\x3d(xm\x3d(x0+x1)/2))?x0\x3dxm:x1\x3d\nxm,(bottom\x3dy\x3e\x3d(ym\x3d(y0+y1)/2))?y0\x3dym:y1\x3dym;while((right|\x3dbottom\x3c\x3c1)\x3d\x3d\x3d(bottom\x3d(yp\x3e\x3dym)\x3c\x3c1|xp\x3e\x3dxm));return parent[bottom]\x3dnode,parent[right]\x3dd,tree}function Quad(node,x0,y0,x1,y1){this.node\x3dnode;this.x0\x3dx0;this.y0\x3dy0;this.x1\x3dx1;this.y1\x3dy1}function defaultX(d){return d[0]}function defaultY(d){return d[1]}function quadtree(nodes,x,y){x\x3dnew Quadtree(null\x3d\x3dx?defaultX:x,null\x3d\x3dy?defaultY:y,NaN,NaN,NaN,NaN);return null\x3d\x3dnodes?x:x.addAll(nodes)}function Quadtree(x,y,x0,y0,x1,y1){this._x\x3dx;this._y\x3dy;this._x0\x3d\nx0;this._y0\x3dy0;this._x1\x3dx1;this._y1\x3dy1;this._root\x3dvoid 0}function leaf_copy(leaf){for(var copy\x3d{data:leaf.data},next\x3dcopy;leaf\x3dleaf.next;)next\x3dnext.next\x3d{data:leaf.data};return copy}var treeProto\x3dquadtree.prototype\x3dQuadtree.prototype;treeProto.copy\x3dfunction(){var copy\x3dnew Quadtree(this._x,this._y,this._x0,this._y0,this._x1,this._y1),node\x3dthis._root,nodes,child;if(!node)return copy;if(!node.length)return copy._root\x3dleaf_copy(node),copy;for(nodes\x3d[{source:node,target:copy._root\x3dArray(4)}];node\x3dnodes.pop();)for(var i\x3d\n0;4\x3ei;++i)if(child\x3dnode.source[i])child.length?nodes.push({source:child,target:node.target[i]\x3dArray(4)}):node.target[i]\x3dleaf_copy(child);return copy};treeProto.add\x3dfunction(d){var x\x3d+this._x.call(null,d),y\x3d+this._y.call(null,d);return add(this.cover(x,y),x,y,d)};treeProto.addAll\x3dfunction(data){var d,i,n\x3ddata.length,x,y,xz\x3dArray(n),yz\x3dArray(n),x0\x3dInfinity,y0\x3dInfinity,x1\x3d-Infinity,y1\x3d-Infinity;for(i\x3d0;i\x3cn;++i)isNaN(x\x3d+this._x.call(null,d\x3ddata[i]))||isNaN(y\x3d+this._y.call(null,d))||(xz[i]\x3dx,yz[i]\x3dy,x\x3c\nx0\x26\x26(x0\x3dx),x\x3ex1\x26\x26(x1\x3dx),y\x3cy0\x26\x26(y0\x3dy),y\x3ey1\x26\x26(y1\x3dy));if(x0\x3ex1||y0\x3ey1)return this;this.cover(x0,y0).cover(x1,y1);for(i\x3d0;i\x3cn;++i)add(this,xz[i],yz[i],data[i]);return this};treeProto.cover\x3dfunction(x,y){if(isNaN(x\x3d+x)||isNaN(y\x3d+y))return this;var x0\x3dthis._x0,y0\x3dthis._y0,x1\x3dthis._x1,y1\x3dthis._y1;if(isNaN(x0))x1\x3d(x0\x3dMath.floor(x))+1,y1\x3d(y0\x3dMath.floor(y))+1;else{for(var z\x3dx1-x0,node\x3dthis._root,parent,i;x0\x3ex||x\x3e\x3dx1||y0\x3ey||y\x3e\x3dy1;)switch(i\x3d(y\x3cy0)\x3c\x3c1|x\x3cx0,parent\x3dArray(4),parent[i]\x3dnode,node\x3dparent,z*\x3d2,i){case 0:x1\x3d\nx0+z;y1\x3dy0+z;break;case 1:x0\x3dx1-z;y1\x3dy0+z;break;case 2:x1\x3dx0+z;y0\x3dy1-z;break;case 3:x0\x3dx1-z,y0\x3dy1-z}this._root\x26\x26this._root.length\x26\x26(this._root\x3dnode)}this._x0\x3dx0;this._y0\x3dy0;this._x1\x3dx1;this._y1\x3dy1;return this};treeProto.data\x3dfunction(){var data\x3d[];this.visit(function(node){if(!node.length){do data.push(node.data);while(node\x3dnode.next)}});return data};treeProto.extent\x3dfunction(_){return arguments.length?this.cover(+_[0][0],+_[0][1]).cover(+_[1][0],+_[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],\n[this._x1,this._y1]]};treeProto.find\x3dfunction(x,y,radius){var x0\x3dthis._x0,y0\x3dthis._y0,x1,y1,x2,y2,x3\x3dthis._x1,y3\x3dthis._y1,quads\x3d[],node\x3dthis._root,q;node\x26\x26quads.push(new Quad(node,x0,y0,x3,y3));null\x3d\x3dradius?radius\x3dInfinity:(x0\x3dx-radius,y0\x3dy-radius,x3\x3dx+radius,y3\x3dy+radius,radius*\x3dradius);for(;q\x3dquads.pop();)if(!(!(node\x3dq.node)||(x1\x3dq.x0)\x3ex3||(y1\x3dq.y0)\x3ey3||(x2\x3dq.x1)\x3cx0||(y2\x3dq.y1)\x3cy0))if(node.length){q\x3d(x1+x2)/2;var ym\x3d(y1+y2)/2;quads.push(new Quad(node[3],q,ym,x2,y2),new Quad(node[2],x1,ym,q,y2),new Quad(node[1],\nq,y1,x2,ym),new Quad(node[0],x1,y1,q,ym));if(node\x3d(y\x3e\x3dym)\x3c\x3c1|x\x3e\x3dq)q\x3dquads[quads.length-1],quads[quads.length-1]\x3dquads[quads.length-1-node],quads[quads.length-1-node]\x3dq}else if(q\x3dx-+this._x.call(null,node.data),ym\x3dy-+this._y.call(null,node.data),q\x3dq*q+ym*ym,q\x3cradius){var data\x3dMath.sqrt(radius\x3dq);x0\x3dx-data;y0\x3dy-data;x3\x3dx+data;y3\x3dy+data;data\x3dnode.data}return data};treeProto.remove\x3dfunction(d){if(isNaN(x\x3d+this._x.call(null,d))||isNaN(y\x3d+this._y.call(null,d)))return this;var parent,node\x3dthis._root,previous,\nx0\x3dthis._x0,y0\x3dthis._y0,x1\x3dthis._x1,y1\x3dthis._y1,x,y,xm,ym,right,bottom;if(!node)return this;if(node.length)for(;;){(right\x3dx\x3e\x3d(xm\x3d(x0+x1)/2))?x0\x3dxm:x1\x3dxm;(bottom\x3dy\x3e\x3d(ym\x3d(y0+y1)/2))?y0\x3dym:y1\x3dym;if(!(parent\x3dnode,node\x3dnode[right|\x3dbottom\x3c\x3c1]))return this;if(!node.length)break;if(parent[right+1\x263]||parent[right+2\x263]||parent[right+3\x263]){var retainer\x3dparent;var j\x3dright}}for(;node.data!\x3d\x3dd;)if(!(previous\x3dnode,node\x3dnode.next))return this;(d\x3dnode.next)\x26\x26delete node.next;if(previous)return d?previous.next\x3dd:\ndelete previous.next,this;if(!parent)return this._root\x3dd,this;d?parent[right]\x3dd:delete parent[right];(node\x3dparent[0]||parent[1]||parent[2]||parent[3])\x26\x26node\x3d\x3d\x3d(parent[3]||parent[2]||parent[1]||parent[0])\x26\x26!node.length\x26\x26(retainer?retainer[j]\x3dnode:this._root\x3dnode);return this};treeProto.removeAll\x3dfunction(data){for(var i\x3d0,n\x3ddata.length;i\x3cn;++i)this.remove(data[i]);return this};treeProto.root\x3dfunction(){return this._root};treeProto.size\x3dfunction(){var size\x3d0;this.visit(function(node){if(!node.length){do++size;\nwhile(node\x3dnode.next)}});return size};treeProto.visit\x3dfunction(callback){var quads\x3d[],q,node\x3dthis._root,child,x0,y0,x1;for(node\x26\x26quads.push(new Quad(node,this._x0,this._y0,this._x1,this._y1));q\x3dquads.pop();)if(!callback(node\x3dq.node,x0\x3dq.x0,y0\x3dq.y0,x1\x3dq.x1,q\x3dq.y1)\x26\x26node.length){var xm\x3d(x0+x1)/2,ym\x3d(y0+q)/2;(child\x3dnode[3])\x26\x26quads.push(new Quad(child,xm,ym,x1,q));(child\x3dnode[2])\x26\x26quads.push(new Quad(child,x0,ym,xm,q));(child\x3dnode[1])\x26\x26quads.push(new Quad(child,xm,y0,x1,ym));(child\x3dnode[0])\x26\x26quads.push(new Quad(child,\nx0,y0,xm,ym))}return this};treeProto.visitAfter\x3dfunction(callback){var quads\x3d[],next\x3d[],q;for(this._root\x26\x26quads.push(new Quad(this._root,this._x0,this._y0,this._x1,this._y1));q\x3dquads.pop();){var node\x3dq.node;if(node.length){var child,x0\x3dq.x0,y0\x3dq.y0,x1\x3dq.x1,y1\x3dq.y1,xm\x3d(x0+x1)/2,ym\x3d(y0+y1)/2;(child\x3dnode[0])\x26\x26quads.push(new Quad(child,x0,y0,xm,ym));(child\x3dnode[1])\x26\x26quads.push(new Quad(child,xm,y0,x1,ym));(child\x3dnode[2])\x26\x26quads.push(new Quad(child,x0,ym,xm,y1));(child\x3dnode[3])\x26\x26quads.push(new Quad(child,\nxm,ym,x1,y1))}next.push(q)}for(;q\x3dnext.pop();)callback(q.node,q.x0,q.y0,q.x1,q.y1);return this};treeProto.x\x3dfunction(_){return arguments.length?(this._x\x3d_,this):this._x};treeProto.y\x3dfunction(_){return arguments.length?(this._y\x3d_,this):this._y};exports.quadtree\x3dquadtree;Object.defineProperty(exports,\x22__esModule\x22,{value:!0})})}");
SHADOW_ENV.evalLoad("module$node_modules$d3_dispatch$dist$d3_dispatch.js", true , "shadow$provide.module$node_modules$d3_dispatch$dist$d3_dispatch\x3dfunction(global$jscomp$0,require,module,exports$jscomp$0){(function(global,factory){\x22object\x22\x3d\x3d\x3dtypeof exports$jscomp$0\x26\x26\x22undefined\x22!\x3d\x3dtypeof module?factory(exports$jscomp$0):\x22function\x22\x3d\x3d\x3dtypeof define\x26\x26define.amd?define([\x22exports\x22],factory):(global\x3dglobal||self,factory(global.d3\x3dglobal.d3||{}))})(this,function(exports){function dispatch(){for(var i\x3d0,n\x3darguments.length,_\x3d{},t;i\x3cn;++i){if(!(t\x3darguments[i]+\x22\x22)||t in _||/[\\s.]/.test(t))throw Error(\x22illegal type: \x22+\nt);_[t]\x3d[]}return new Dispatch(_)}function Dispatch(_){this._\x3d_}function parseTypenames(typenames,types){return typenames.trim().split(/^|\\s+/).map(function(t){var name\x3d\x22\x22,i\x3dt.indexOf(\x22.\x22);0\x3c\x3di\x26\x26(name\x3dt.slice(i+1),t\x3dt.slice(0,i));if(t\x26\x26!types.hasOwnProperty(t))throw Error(\x22unknown type: \x22+t);return{type:t,name:name}})}function set(type,name,callback){for(var i\x3d0,n\x3dtype.length;i\x3cn;++i)if(type[i].name\x3d\x3d\x3dname){type[i]\x3dnoop;type\x3dtype.slice(0,i).concat(type.slice(i+1));break}null!\x3dcallback\x26\x26type.push({name:name,\nvalue:callback});return type}var noop\x3d{value:function(){}};Dispatch.prototype\x3ddispatch.prototype\x3d{constructor:Dispatch,on:function(typename,callback){var _\x3dthis._,T\x3dparseTypenames(typename+\x22\x22,_),t,i\x3d-1,n\x3dT.length;if(2\x3earguments.length)for(;++i\x3cn;){var JSCompiler_temp;if(JSCompiler_temp\x3dt\x3d(typename\x3dT[i]).type){a:{JSCompiler_temp\x3d_[t];for(var i$jscomp$0\x3d0,n$jscomp$0\x3dJSCompiler_temp.length;i$jscomp$0\x3cn$jscomp$0;++i$jscomp$0)if((t\x3dJSCompiler_temp[i$jscomp$0]).name\x3d\x3d\x3dtypename.name){t\x3dt.value;break a}t\x3d\nvoid 0}JSCompiler_temp\x3dt}if(JSCompiler_temp)return t}else{if(null!\x3dcallback\x26\x26\x22function\x22!\x3d\x3dtypeof callback)throw Error(\x22invalid callback: \x22+callback);for(;++i\x3cn;)if(t\x3d(typename\x3dT[i]).type)_[t]\x3dset(_[t],typename.name,callback);else if(null\x3d\x3dcallback)for(t in _)_[t]\x3dset(_[t],typename.name,null);return this}},copy:function(){var copy\x3d{},_\x3dthis._,t;for(t in _)copy[t]\x3d_[t].slice();return new Dispatch(copy)},call:function(type,that){if(0\x3c(n\x3darguments.length-2))for(var args\x3dArray(n),i\x3d0,n,t;i\x3cn;++i)args[i]\x3d\narguments[i+2];if(!this._.hasOwnProperty(type))throw Error(\x22unknown type: \x22+type);t\x3dthis._[type];i\x3d0;for(n\x3dt.length;i\x3cn;++i)t[i].value.apply(that,args)},apply:function(type,that,args){if(!this._.hasOwnProperty(type))throw Error(\x22unknown type: \x22+type);type\x3dthis._[type];for(var i\x3d0,n\x3dtype.length;i\x3cn;++i)type[i].value.apply(that,args)}};exports.dispatch\x3ddispatch;Object.defineProperty(exports,\x22__esModule\x22,{value:!0})})}");
SHADOW_ENV.evalLoad("module$node_modules$d3_timer$dist$d3_timer.js", true , "shadow$provide.module$node_modules$d3_timer$dist$d3_timer\x3dfunction(global$jscomp$0,require,module,exports$jscomp$0){(function(global,factory){\x22object\x22\x3d\x3d\x3dtypeof exports$jscomp$0\x26\x26\x22undefined\x22!\x3d\x3dtypeof module?factory(exports$jscomp$0):\x22function\x22\x3d\x3d\x3dtypeof define\x26\x26define.amd?define([\x22exports\x22],factory):(global\x3dglobal||self,factory(global.d3\x3dglobal.d3||{}))})(this,function(exports){function now$jscomp$0(){return clockNow||(setFrame(clearNow),clockNow\x3dclock.now()+clockSkew)}function clearNow(){clockNow\x3d\n0}function Timer(){this._call\x3dthis._time\x3dthis._next\x3dnull}function timer(callback,delay,time){var t\x3dnew Timer;t.restart(callback,delay,time);return t}function timerFlush(){now$jscomp$0();++frame;for(var t\x3dtaskHead,e;t;)0\x3c\x3d(e\x3dclockNow-t._time)\x26\x26t._call.call(null,e),t\x3dt._next;--frame}function wake(){clockNow\x3d(clockLast\x3dclock.now())+clockSkew;frame\x3dtimeout\x3d0;try{timerFlush()}finally{frame\x3d0;for(var t0,t1\x3dtaskHead,t2,time\x3dInfinity;t1;)t1._call?(time\x3et1._time\x26\x26(time\x3dt1._time),t0\x3dt1,t1\x3dt1._next):(t2\x3dt1._next,\nt1._next\x3dnull,t1\x3dt0?t0._next\x3dt2:taskHead\x3dt2);taskTail\x3dt0;sleep(time);clockNow\x3d0}}function poke(){var now\x3dclock.now(),delay\x3dnow-clockLast;1E3\x3cdelay\x26\x26(clockSkew-\x3ddelay,clockLast\x3dnow)}function sleep(time){frame||(timeout\x26\x26(timeout\x3dclearTimeout(timeout)),24\x3ctime-clockNow?(Infinity\x3etime\x26\x26(timeout\x3dsetTimeout(wake,time-clock.now()-clockSkew)),interval\x26\x26(interval\x3dclearInterval(interval))):(interval||(clockLast\x3dclock.now(),interval\x3dsetInterval(poke,1E3)),frame\x3d1,setFrame(wake)))}var frame\x3d0,timeout\x3d0,interval\x3d\n0,taskHead,taskTail,clockLast\x3d0,clockNow\x3d0,clockSkew\x3d0,clock\x3d\x22object\x22\x3d\x3d\x3dtypeof performance\x26\x26performance.now?performance:Date,setFrame\x3d\x22object\x22\x3d\x3d\x3dtypeof window\x26\x26window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(f){setTimeout(f,17)};Timer.prototype\x3dtimer.prototype\x3d{constructor:Timer,restart:function(callback,delay,time){if(\x22function\x22!\x3d\x3dtypeof callback)throw new TypeError(\x22callback is not a function\x22);time\x3d(null\x3d\x3dtime?now$jscomp$0():+time)+(null\x3d\x3ddelay?0:+delay);this._next||\ntaskTail\x3d\x3d\x3dthis||(taskTail?taskTail._next\x3dthis:taskHead\x3dthis,taskTail\x3dthis);this._call\x3dcallback;this._time\x3dtime;sleep()},stop:function(){this._call\x26\x26(this._call\x3dnull,this._time\x3dInfinity,sleep())}};exports.interval\x3dfunction(callback,delay,time){var t\x3dnew Timer,total\x3ddelay;if(null\x3d\x3ddelay)return t.restart(callback,delay,time),t;delay\x3d+delay;time\x3dnull\x3d\x3dtime?now$jscomp$0():+time;t.restart(function tick(elapsed){elapsed+\x3dtotal;t.restart(tick,total+\x3ddelay,time);callback(elapsed)},delay,time);return t};exports.now\x3d\nnow$jscomp$0;exports.timeout\x3dfunction(callback,delay,time){var t\x3dnew Timer;delay\x3dnull\x3d\x3ddelay?0:+delay;t.restart(function(elapsed){t.stop();callback(elapsed+delay)},delay,time);return t};exports.timer\x3dtimer;exports.timerFlush\x3dtimerFlush;Object.defineProperty(exports,\x22__esModule\x22,{value:!0})})}");
SHADOW_ENV.evalLoad("module$node_modules$d3_force$dist$d3_force.js", true , "shadow$provide.module$node_modules$d3_force$dist$d3_force\x3dfunction(global$jscomp$0,require,module,exports$jscomp$0){(function(global,factory){\x22object\x22\x3d\x3d\x3dtypeof exports$jscomp$0\x26\x26\x22undefined\x22!\x3d\x3dtypeof module?factory(exports$jscomp$0,require(\x22module$node_modules$d3_quadtree$dist$d3_quadtree\x22),require(\x22module$node_modules$d3_dispatch$dist$d3_dispatch\x22),require(\x22module$node_modules$d3_timer$dist$d3_timer\x22)):\x22function\x22\x3d\x3d\x3dtypeof define\x26\x26define.amd?define([\x22exports\x22,\x22d3-quadtree\x22,\x22d3-dispatch\x22,\x22d3-timer\x22],\nfactory):factory(global.d3\x3dglobal.d3||{},global.d3,global.d3,global.d3)})(this,function(exports,d3Quadtree,d3Dispatch,d3Timer){function constant(x){return function(){return x}}function jiggle(){return 1E-6*(Math.random()-.5)}function x$jscomp$0(d){return d.x+d.vx}function y$jscomp$0(d){return d.y+d.vy}function index(d){return d.index}function find(nodeById,nodeId){nodeById\x3dnodeById.get(nodeId);if(!nodeById)throw Error(\x22missing: \x22+nodeId);return nodeById}function x$1(d){return d.x}function y$1(d){return d.y}\nvar initialAngle\x3dMath.PI*(3-Math.sqrt(5));exports.forceCenter\x3dfunction(x,y){function force(){var i,n\x3dnodes.length,sx\x3d0,sy\x3d0;for(i\x3d0;i\x3cn;++i){var node\x3dnodes[i];sx+\x3dnode.x;sy+\x3dnode.y}sx\x3dsx/n-x;sy\x3dsy/n-y;for(i\x3d0;i\x3cn;++i)node\x3dnodes[i],node.x-\x3dsx,node.y-\x3dsy}var nodes;null\x3d\x3dx\x26\x26(x\x3d0);null\x3d\x3dy\x26\x26(y\x3d0);force.initialize\x3dfunction(_){nodes\x3d_};force.x\x3dfunction(_){return arguments.length?(x\x3d+_,force):x};force.y\x3dfunction(_){return arguments.length?(y\x3d+_,force):y};return force};exports.forceCollide\x3dfunction(radius){function force(){function apply(quad,\nx0,y0,x1,y1){var data\x3dquad.data;quad\x3dquad.r;var r\x3dri+quad;if(data)data.index\x3enode.index\x26\x26(x0\x3dxi-data.x-data.vx,y0\x3dyi-data.y-data.vy,x1\x3dx0*x0+y0*y0,x1\x3cr*r\x26\x26(0\x3d\x3d\x3dx0\x26\x26(x0\x3djiggle(),x1+\x3dx0*x0),0\x3d\x3d\x3dy0\x26\x26(y0\x3djiggle(),x1+\x3dy0*y0),x1\x3d(r-(x1\x3dMath.sqrt(x1)))/x1*strength,node.vx+\x3d(x0*\x3dx1)*(r\x3d(quad*\x3dquad)/(ri2+quad)),node.vy+\x3d(y0*\x3dx1)*r,data.vx-\x3dx0*(r\x3d1-r),data.vy-\x3dy0*r));else return x0\x3exi+r||x1\x3cxi-r||y0\x3eyi+r||y1\x3cyi-r}for(var i,n\x3dnodes.length,tree,node,xi,yi,ri,ri2,k\x3d0;k\x3citerations;++k)for(tree\x3dd3Quadtree.quadtree(nodes,\nx$jscomp$0,y$jscomp$0).visitAfter(prepare),i\x3d0;i\x3cn;++i)node\x3dnodes[i],ri\x3dradii[node.index],ri2\x3dri*ri,xi\x3dnode.x+node.vx,yi\x3dnode.y+node.vy,tree.visit(apply)}function prepare(quad){if(quad.data)return quad.r\x3dradii[quad.data.index];for(var i\x3dquad.r\x3d0;4\x3ei;++i)quad[i]\x26\x26quad[i].r\x3equad.r\x26\x26(quad.r\x3dquad[i].r)}function initialize(){if(nodes){var i,n\x3dnodes.length;radii\x3dArray(n);for(i\x3d0;i\x3cn;++i){var node\x3dnodes[i];radii[node.index]\x3d+radius(node,i,nodes)}}}var nodes,radii,strength\x3d1,iterations\x3d1;\x22function\x22!\x3d\x3dtypeof radius\x26\x26\n(radius\x3dconstant(null\x3d\x3dradius?1:+radius));force.initialize\x3dfunction(_){nodes\x3d_;initialize()};force.iterations\x3dfunction(_){return arguments.length?(iterations\x3d+_,force):iterations};force.strength\x3dfunction(_){return arguments.length?(strength\x3d+_,force):strength};force.radius\x3dfunction(_){return arguments.length?(radius\x3d\x22function\x22\x3d\x3d\x3dtypeof _?_:constant(+_),initialize(),force):radius};return force};exports.forceLink\x3dfunction(links){function force(alpha){for(var k\x3d0,n\x3dlinks.length;k\x3citerations;++k)for(var i\x3d\n0,link,source,x,y,l;i\x3cn;++i)link\x3dlinks[i],source\x3dlink.source,link\x3dlink.target,x\x3dlink.x+link.vx-source.x-source.vx||jiggle(),y\x3dlink.y+link.vy-source.y-source.vy||jiggle(),l\x3dMath.sqrt(x*x+y*y),l\x3d(l-distances[i])/l*alpha*strengths[i],x*\x3dl,y*\x3dl,link.vx-\x3dx*(l\x3dbias[i]),link.vy-\x3dy*l,source.vx+\x3dx*(l\x3d1-l),source.vy+\x3dy*l}function initialize(){if(nodes){var n\x3dnodes.length,m\x3dlinks.length,nodeById\x3dnew Map(nodes.map(function(d,i){return[id(d,i,nodes),d]}));var i$jscomp$0\x3d0;for(count\x3dArray(n);i$jscomp$0\x3cm;++i$jscomp$0)n\x3d\nlinks[i$jscomp$0],n.index\x3di$jscomp$0,\x22object\x22!\x3d\x3dtypeof n.source\x26\x26(n.source\x3dfind(nodeById,n.source)),\x22object\x22!\x3d\x3dtypeof n.target\x26\x26(n.target\x3dfind(nodeById,n.target)),count[n.source.index]\x3d(count[n.source.index]||0)+1,count[n.target.index]\x3d(count[n.target.index]||0)+1;i$jscomp$0\x3d0;for(bias\x3dArray(m);i$jscomp$0\x3cm;++i$jscomp$0)n\x3dlinks[i$jscomp$0],bias[i$jscomp$0]\x3dcount[n.source.index]/(count[n.source.index]+count[n.target.index]);strengths\x3dArray(m);initializeStrength();distances\x3dArray(m);initializeDistance()}}\nfunction initializeStrength(){if(nodes)for(var i\x3d0,n\x3dlinks.length;i\x3cn;++i)strengths[i]\x3d+strength(links[i],i,links)}function initializeDistance(){if(nodes)for(var i\x3d0,n\x3dlinks.length;i\x3cn;++i)distances[i]\x3d+distance(links[i],i,links)}var id\x3dindex,strength\x3dfunction(link){return 1/Math.min(count[link.source.index],count[link.target.index])},strengths,distance\x3dconstant(30),distances,nodes,count,bias,iterations\x3d1;null\x3d\x3dlinks\x26\x26(links\x3d[]);force.initialize\x3dfunction(_){nodes\x3d_;initialize()};force.links\x3dfunction(_){return arguments.length?\n(links\x3d_,initialize(),force):links};force.id\x3dfunction(_){return arguments.length?(id\x3d_,force):id};force.iterations\x3dfunction(_){return arguments.length?(iterations\x3d+_,force):iterations};force.strength\x3dfunction(_){return arguments.length?(strength\x3d\x22function\x22\x3d\x3d\x3dtypeof _?_:constant(+_),initializeStrength(),force):strength};force.distance\x3dfunction(_){return arguments.length?(distance\x3d\x22function\x22\x3d\x3d\x3dtypeof _?_:constant(+_),initializeDistance(),force):distance};return force};exports.forceManyBody\x3dfunction(){function force(_){var n\x3d\nnodes.length,tree\x3dd3Quadtree.quadtree(nodes,x$1,y$1).visitAfter(accumulate);alpha\x3d_;for(_\x3d0;_\x3cn;++_)node$jscomp$0\x3dnodes[_],tree.visit(apply)}function initialize(){if(nodes){var i,n\x3dnodes.length;strengths\x3dArray(n);for(i\x3d0;i\x3cn;++i){var node\x3dnodes[i];strengths[node.index]\x3d+strength$jscomp$0(node,i,nodes)}}}function accumulate(quad){var strength\x3d0,q,c,weight\x3d0,x,y,i;if(quad.length){for(x\x3dy\x3di\x3d0;4\x3ei;++i)(q\x3dquad[i])\x26\x26(c\x3dMath.abs(q.value))\x26\x26(strength+\x3dq.value,weight+\x3dc,x+\x3dc*q.x,y+\x3dc*q.y);quad.x\x3dx/weight;\nquad.y\x3dy/weight}else{q\x3dquad;q.x\x3dq.data.x;q.y\x3dq.data.y;do strength+\x3dstrengths[q.data.index];while(q\x3dq.next)}quad.value\x3dstrength}function apply(quad,x1,_,x2){if(!quad.value)return!0;_\x3dquad.x-node$jscomp$0.x;var y\x3dquad.y-node$jscomp$0.y;x1\x3dx2-x1;x2\x3d_*_+y*y;if(x1*x1/theta2\x3cx2)return x2\x3cdistanceMax2\x26\x26(0\x3d\x3d\x3d_\x26\x26(_\x3djiggle(),x2+\x3d_*_),0\x3d\x3d\x3dy\x26\x26(y\x3djiggle(),x2+\x3dy*y),x2\x3cdistanceMin2\x26\x26(x2\x3dMath.sqrt(distanceMin2*x2)),node$jscomp$0.vx+\x3d_*quad.value*alpha/x2,node$jscomp$0.vy+\x3dy*quad.value*alpha/x2),!0;if(!(quad.length||\nx2\x3e\x3ddistanceMax2)){if(quad.data!\x3d\x3dnode$jscomp$0||quad.next)0\x3d\x3d\x3d_\x26\x26(_\x3djiggle(),x2+\x3d_*_),0\x3d\x3d\x3dy\x26\x26(y\x3djiggle(),x2+\x3dy*y),x2\x3cdistanceMin2\x26\x26(x2\x3dMath.sqrt(distanceMin2*x2));do quad.data!\x3d\x3dnode$jscomp$0\x26\x26(x1\x3dstrengths[quad.data.index]*alpha/x2,node$jscomp$0.vx+\x3d_*x1,node$jscomp$0.vy+\x3dy*x1);while(quad\x3dquad.next)}}var nodes,node$jscomp$0,alpha,strength$jscomp$0\x3dconstant(-30),strengths,distanceMin2\x3d1,distanceMax2\x3dInfinity,theta2\x3d.81;force.initialize\x3dfunction(_){nodes\x3d_;initialize()};force.strength\x3dfunction(_){return arguments.length?\n(strength$jscomp$0\x3d\x22function\x22\x3d\x3d\x3dtypeof _?_:constant(+_),initialize(),force):strength$jscomp$0};force.distanceMin\x3dfunction(_){return arguments.length?(distanceMin2\x3d_*_,force):Math.sqrt(distanceMin2)};force.distanceMax\x3dfunction(_){return arguments.length?(distanceMax2\x3d_*_,force):Math.sqrt(distanceMax2)};force.theta\x3dfunction(_){return arguments.length?(theta2\x3d_*_,force):Math.sqrt(theta2)};return force};exports.forceRadial\x3dfunction(radius,x,y){function force(alpha){for(var i\x3d0,n\x3dnodes.length;i\x3cn;++i){var node\x3d\nnodes[i],dx\x3dnode.x-x||1E-6,dy\x3dnode.y-y||1E-6,r\x3dMath.sqrt(dx*dx+dy*dy);r\x3d(radiuses[i]-r)*strengths[i]*alpha/r;node.vx+\x3ddx*r;node.vy+\x3ddy*r}}function initialize(){if(nodes){var i,n\x3dnodes.length;strengths\x3dArray(n);radiuses\x3dArray(n);for(i\x3d0;i\x3cn;++i)radiuses[i]\x3d+radius(nodes[i],i,nodes),strengths[i]\x3disNaN(radiuses[i])?0:+strength(nodes[i],i,nodes)}}var nodes,strength\x3dconstant(.1),strengths,radiuses;\x22function\x22!\x3d\x3dtypeof radius\x26\x26(radius\x3dconstant(+radius));null\x3d\x3dx\x26\x26(x\x3d0);null\x3d\x3dy\x26\x26(y\x3d0);force.initialize\x3dfunction(_){nodes\x3d\n_;initialize()};force.strength\x3dfunction(_){return arguments.length?(strength\x3d\x22function\x22\x3d\x3d\x3dtypeof _?_:constant(+_),initialize(),force):strength};force.radius\x3dfunction(_){return arguments.length?(radius\x3d\x22function\x22\x3d\x3d\x3dtypeof _?_:constant(+_),initialize(),force):radius};force.x\x3dfunction(_){return arguments.length?(x\x3d+_,force):x};force.y\x3dfunction(_){return arguments.length?(y\x3d+_,force):y};return force};exports.forceSimulation\x3dfunction(nodes){function step(){tick();event.call(\x22tick\x22,simulation);alpha\x3calphaMin\x26\x26\n(stepper.stop(),event.call(\x22end\x22,simulation))}function tick(iterations){var i,n\x3dnodes.length;void 0\x3d\x3d\x3diterations\x26\x26(iterations\x3d1);for(var k\x3d0;k\x3citerations;++k)for(alpha+\x3d(alphaTarget-alpha)*alphaDecay,forces.forEach(function(force){force(alpha)}),i\x3d0;i\x3cn;++i){var node\x3dnodes[i];null\x3d\x3dnode.fx?node.x+\x3dnode.vx*\x3dvelocityDecay:(node.x\x3dnode.fx,node.vx\x3d0);null\x3d\x3dnode.fy?node.y+\x3dnode.vy*\x3dvelocityDecay:(node.y\x3dnode.fy,node.vy\x3d0)}return simulation}function initializeNodes(){for(var i\x3d0,n\x3dnodes.length,node;i\x3cn;++i){node\x3d\nnodes[i];node.index\x3di;null!\x3dnode.fx\x26\x26(node.x\x3dnode.fx);null!\x3dnode.fy\x26\x26(node.y\x3dnode.fy);if(isNaN(node.x)||isNaN(node.y)){var radius\x3d10*Math.sqrt(i),angle\x3di*initialAngle;node.x\x3dradius*Math.cos(angle);node.y\x3dradius*Math.sin(angle)}if(isNaN(node.vx)||isNaN(node.vy))node.vx\x3dnode.vy\x3d0}}function initializeForce(force){force.initialize\x26\x26force.initialize(nodes);return force}var simulation,alpha\x3d1,alphaMin\x3d.001,alphaDecay\x3d1-Math.pow(alphaMin,1/300),alphaTarget\x3d0,velocityDecay\x3d.6,forces\x3dnew Map,stepper\x3dd3Timer.timer(step),\nevent\x3dd3Dispatch.dispatch(\x22tick\x22,\x22end\x22);null\x3d\x3dnodes\x26\x26(nodes\x3d[]);initializeNodes();return simulation\x3d{tick:tick,restart:function(){return stepper.restart(step),simulation},stop:function(){return stepper.stop(),simulation},nodes:function(_){return arguments.length?(nodes\x3d_,initializeNodes(),forces.forEach(initializeForce),simulation):nodes},alpha:function(_){return arguments.length?(alpha\x3d+_,simulation):alpha},alphaMin:function(_){return arguments.length?(alphaMin\x3d+_,simulation):alphaMin},alphaDecay:function(_){return arguments.length?\n(alphaDecay\x3d+_,simulation):+alphaDecay},alphaTarget:function(_){return arguments.length?(alphaTarget\x3d+_,simulation):alphaTarget},velocityDecay:function(_){return arguments.length?(velocityDecay\x3d1-_,simulation):1-velocityDecay},force:function(name,_){return 1\x3carguments.length?(null\x3d\x3d_?forces.delete(name):forces.set(name,initializeForce(_)),simulation):forces.get(name)},find:function(x,y,radius){var i,n\x3dnodes.length;radius\x3dnull\x3d\x3dradius?Infinity:radius*radius;for(i\x3d0;i\x3cn;++i){var node\x3dnodes[i];var dx\x3d\nx-node.x;var dy\x3dy-node.y;dx\x3ddx*dx+dy*dy;if(dx\x3cradius){var closest\x3dnode;radius\x3ddx}}return closest},on:function(name,_){return 1\x3carguments.length?(event.on(name,_),simulation):event.on(name)}}};exports.forceX\x3dfunction(x){function force(alpha){for(var i\x3d0,n\x3dnodes.length,node;i\x3cn;++i)node\x3dnodes[i],node.vx+\x3d(xz[i]-node.x)*strengths[i]*alpha}function initialize(){if(nodes){var i,n\x3dnodes.length;strengths\x3dArray(n);xz\x3dArray(n);for(i\x3d0;i\x3cn;++i)strengths[i]\x3disNaN(xz[i]\x3d+x(nodes[i],i,nodes))?0:+strength(nodes[i],\ni,nodes)}}var strength\x3dconstant(.1),nodes,strengths,xz;\x22function\x22!\x3d\x3dtypeof x\x26\x26(x\x3dconstant(null\x3d\x3dx?0:+x));force.initialize\x3dfunction(_){nodes\x3d_;initialize()};force.strength\x3dfunction(_){return arguments.length?(strength\x3d\x22function\x22\x3d\x3d\x3dtypeof _?_:constant(+_),initialize(),force):strength};force.x\x3dfunction(_){return arguments.length?(x\x3d\x22function\x22\x3d\x3d\x3dtypeof _?_:constant(+_),initialize(),force):x};return force};exports.forceY\x3dfunction(y){function force(alpha){for(var i\x3d0,n\x3dnodes.length,node;i\x3cn;++i)node\x3dnodes[i],\nnode.vy+\x3d(yz[i]-node.y)*strengths[i]*alpha}function initialize(){if(nodes){var i,n\x3dnodes.length;strengths\x3dArray(n);yz\x3dArray(n);for(i\x3d0;i\x3cn;++i)strengths[i]\x3disNaN(yz[i]\x3d+y(nodes[i],i,nodes))?0:+strength(nodes[i],i,nodes)}}var strength\x3dconstant(.1),nodes,strengths,yz;\x22function\x22!\x3d\x3dtypeof y\x26\x26(y\x3dconstant(null\x3d\x3dy?0:+y));force.initialize\x3dfunction(_){nodes\x3d_;initialize()};force.strength\x3dfunction(_){return arguments.length?(strength\x3d\x22function\x22\x3d\x3d\x3dtypeof _?_:constant(+_),initialize(),force):strength};force.y\x3d\nfunction(_){return arguments.length?(y\x3d\x22function\x22\x3d\x3d\x3dtypeof _?_:constant(+_),initialize(),force):y};return force};Object.defineProperty(exports,\x22__esModule\x22,{value:!0})})}");
SHADOW_ENV.evalLoad("module$node_modules$vega_force$build$vega_force.js", true , "shadow$provide.module$node_modules$vega_force$build$vega_force\x3dfunction(global$jscomp$0,require,module,exports$jscomp$0){(function(global,factory){\x22object\x22\x3d\x3d\x3dtypeof exports$jscomp$0\x26\x26\x22undefined\x22!\x3d\x3dtypeof module?factory(exports$jscomp$0,require(\x22module$node_modules$vega_dataflow$build$vega_dataflow\x22),require(\x22module$node_modules$vega_util$build$vega_util\x22),require(\x22module$node_modules$d3_force$dist$d3_force\x22)):\x22function\x22\x3d\x3d\x3dtypeof define\x26\x26define.amd?define([\x22exports\x22,\x22vega-dataflow\x22,\x22vega-util\x22,\x22d3-force\x22],\nfactory):(global\x3dglobal||self,factory((global.vega\x3dglobal.vega||{},global.vega.transforms\x3d{}),global.vega,global.vega,global.d3))})(this,function(exports,vegaDataflow,vegaUtil,d3Force){function Force(params){vegaDataflow.Transform.call(this,null,params)}function rerun(df,op){return function(){df.touch(op).run()}}function simulation(nodes,_){nodes\x3dd3Force.forceSimulation(nodes);var stopped\x3d!1,stop\x3dnodes.stop,restart\x3dnodes.restart;nodes.stopped\x3dfunction(){return stopped};nodes.restart\x3dfunction(){stopped\x3d\n!1;return restart()};nodes.stop\x3dfunction(){stopped\x3d!0;return stop()};return setup(nodes,_,!0).on(\x22end\x22,function(){stopped\x3d!0})}function setup(sim,_$jscomp$0,init,pulse$jscomp$0){var f\x3dvegaUtil.array(_$jscomp$0.forces),n;var i\x3d0;for(n\x3dForceParams.length;i\x3cn;++i){var p\x3dForceParams[i];if(\x22forces\x22!\x3d\x3dp\x26\x26_$jscomp$0.modified(p))sim[p](_$jscomp$0[p])}i\x3d0;for(n\x3df.length;i\x3cn;++i){var name\x3d\x22forces\x22+i;if(init||_$jscomp$0.modified(\x22forces\x22,i)){p\x3dvoid 0;var _\x3df[i];vegaUtil.hasOwnProperty(ForceMap,_.force)||vegaUtil.error(\x22Unrecognized force: \x22+\n_.force);var f$jscomp$0\x3dForceMap[_.force]();for(p in _)vegaUtil.isFunction(f$jscomp$0[p])\x26\x26setForceParam(f$jscomp$0[p],_[p],_);p\x3df$jscomp$0}else{if(p\x3dpulse$jscomp$0)a:{f$jscomp$0\x3dp\x3dvoid 0;_\x3df[i];var pulse\x3dpulse$jscomp$0;for(f$jscomp$0 in _)if(vegaUtil.isFunction(p\x3d_[f$jscomp$0])\x26\x26pulse.modified(vegaUtil.accessorFields(p))){p\x3d1;break a}p\x3d0}p\x3dp?sim.force(name):null}p\x26\x26sim.force(name,p)}for(n\x3dsim.numForces||0;i\x3cn;++i)sim.force(\x22forces\x22+i,null);sim.numForces\x3df.length;return sim}function setForceParam(f,\nv,_){f(vegaUtil.isFunction(v)?function(d){return v(d,_)}:v)}var ForceMap\x3d{center:d3Force.forceCenter,collide:d3Force.forceCollide,nbody:d3Force.forceManyBody,link:d3Force.forceLink,x:d3Force.forceX,y:d3Force.forceY},ForceParams\x3d[\x22alpha\x22,\x22alphaMin\x22,\x22alphaTarget\x22,\x22velocityDecay\x22,\x22forces\x22],ForceConfig\x3d[\x22static\x22,\x22iterations\x22],ForceOutput\x3d[\x22x\x22,\x22y\x22,\x22vx\x22,\x22vy\x22];Force.Definition\x3d{type:\x22Force\x22,metadata:{modifies:!0},params:[{name:\x22static\x22,type:\x22boolean\x22,\x22default\x22:!1},{name:\x22restart\x22,type:\x22boolean\x22,\x22default\x22:!1},\n{name:\x22iterations\x22,type:\x22number\x22,\x22default\x22:300},{name:\x22alpha\x22,type:\x22number\x22,\x22default\x22:1},{name:\x22alphaMin\x22,type:\x22number\x22,\x22default\x22:.001},{name:\x22alphaTarget\x22,type:\x22number\x22,\x22default\x22:0},{name:\x22velocityDecay\x22,type:\x22number\x22,\x22default\x22:.4},{name:\x22forces\x22,type:\x22param\x22,array:!0,params:[{key:{force:\x22center\x22},params:[{name:\x22x\x22,type:\x22number\x22,\x22default\x22:0},{name:\x22y\x22,type:\x22number\x22,\x22default\x22:0}]},{key:{force:\x22collide\x22},params:[{name:\x22radius\x22,type:\x22number\x22,expr:!0},{name:\x22strength\x22,type:\x22number\x22,\x22default\x22:.7},{name:\x22iterations\x22,\ntype:\x22number\x22,\x22default\x22:1}]},{key:{force:\x22nbody\x22},params:[{name:\x22strength\x22,type:\x22number\x22,\x22default\x22:-30},{name:\x22theta\x22,type:\x22number\x22,\x22default\x22:.9},{name:\x22distanceMin\x22,type:\x22number\x22,\x22default\x22:1},{name:\x22distanceMax\x22,type:\x22number\x22}]},{key:{force:\x22link\x22},params:[{name:\x22links\x22,type:\x22data\x22},{name:\x22id\x22,type:\x22field\x22},{name:\x22distance\x22,type:\x22number\x22,\x22default\x22:30,expr:!0},{name:\x22strength\x22,type:\x22number\x22,expr:!0},{name:\x22iterations\x22,type:\x22number\x22,\x22default\x22:1}]},{key:{force:\x22x\x22},params:[{name:\x22strength\x22,type:\x22number\x22,\n\x22default\x22:.1},{name:\x22x\x22,type:\x22field\x22}]},{key:{force:\x22y\x22},params:[{name:\x22strength\x22,type:\x22number\x22,\x22default\x22:.1},{name:\x22y\x22,type:\x22field\x22}]}]},{name:\x22as\x22,type:\x22string\x22,array:!0,modify:!1,\x22default\x22:ForceOutput}]};var prototype\x3dvegaUtil.inherits(Force,vegaDataflow.Transform);prototype.transform\x3dfunction(_,pulse){var sim\x3dthis.value,change\x3dpulse.changed(pulse.ADD_REM),params\x3d_.modified(ForceParams),iters\x3d_.iterations||300;sim?(change\x26\x26(pulse.modifies(\x22index\x22),sim.nodes(pulse.source)),(params||pulse.changed(pulse.MOD))\x26\x26\nsetup(sim,_,0,pulse)):(this.value\x3dsim\x3dsimulation(pulse.source,_),sim.on(\x22tick\x22,rerun(pulse.dataflow,this)),_.static||(change\x3d!0,sim.tick()),pulse.modifies(\x22index\x22));if(params||change||_.modified(ForceConfig)||pulse.changed()\x26\x26_.restart)if(sim.alpha(Math.max(sim.alpha(),_.alpha||1)).alphaDecay(1-Math.pow(sim.alphaMin(),1/iters)),_.static)for(sim.stop();0\x3c\x3d--iters;)sim.tick();else if(sim.stopped()\x26\x26sim.restart(),!change)return pulse.StopPropagation;return this.finish(_,pulse)};prototype.finish\x3dfunction(_,\npulse){for(var dataflow\x3dpulse.dataflow,args\x3dthis._argops,j\x3d0,m\x3dargs.length,arg;j\x3cm;++j)if(arg\x3dargs[j],\x22forces\x22\x3d\x3d\x3darg.name\x26\x26\x22link\x22\x3d\x3d\x3darg.op._argval.force){arg\x3darg.op._argops;for(var i\x3d0,n\x3darg.length,op;i\x3cn;++i)if(\x22links\x22\x3d\x3d\x3darg[i].name\x26\x26(op\x3darg[i].op.source)){dataflow.pulse(op,dataflow.changeset().reflow());break}}return pulse.reflow(_.modified()).modifies(ForceOutput)};exports.force\x3dForce;Object.defineProperty(exports,\x22__esModule\x22,{value:!0})})}");
SHADOW_ENV.evalLoad("module$node_modules$d3_hierarchy$dist$d3_hierarchy.js", true , "shadow$provide.module$node_modules$d3_hierarchy$dist$d3_hierarchy\x3dfunction(global$jscomp$0,require,module,exports$jscomp$0){(function(global,factory){\x22object\x22\x3d\x3d\x3dtypeof exports$jscomp$0\x26\x26\x22undefined\x22!\x3d\x3dtypeof module?factory(exports$jscomp$0):\x22function\x22\x3d\x3d\x3dtypeof define\x26\x26define.amd?define([\x22exports\x22],factory):(global\x3dglobal||self,factory(global.d3\x3dglobal.d3||{}))})(this,function(exports){function defaultSeparation(a,b){return a.parent\x3d\x3d\x3db.parent?1:2}function meanXReduce(x,c){return x+c.x}function maxYReduce(y,\nc){return Math.max(y,c.y)}function leafLeft(node){for(var children;children\x3dnode.children;)node\x3dchildren[0];return node}function leafRight(node){for(var children;children\x3dnode.children;)node\x3dchildren[children.length-1];return node}function count(node){var sum\x3d0,children\x3dnode.children,i\x3dchildren\x26\x26children.length;if(i)for(;0\x3c\x3d--i;)sum+\x3dchildren[i].value;else sum\x3d1;node.value\x3dsum}function hierarchy(data,children){var root\x3dnew Node(data);data\x3d+data.value\x26\x26(root.value\x3ddata.value);var node,nodes\x3d[root],\nchild,childs,i,n;for(null\x3d\x3dchildren\x26\x26(children\x3ddefaultChildren);node\x3dnodes.pop();)if(data\x26\x26(node.value\x3d+node.data.value),(childs\x3dchildren(node.data))\x26\x26(n\x3dchilds.length))for(node.children\x3dArray(n),i\x3dn-1;0\x3c\x3di;--i)nodes.push(child\x3dnode.children[i]\x3dnew Node(childs[i])),child.parent\x3dnode,child.depth\x3dnode.depth+1;return root.eachBefore(computeHeight)}function defaultChildren(d){return d.children}function copyData(node){node.data\x3dnode.data.data}function computeHeight(node){var height\x3d0;do node.height\x3dheight;\nwhile((node\x3dnode.parent)\x26\x26node.height\x3c++height)}function Node(data){this.data\x3ddata;this.depth\x3dthis.height\x3d0;this.parent\x3dnull}function enclose(circles){var i\x3d0;circles\x3dslice.call(circles);for(var m\x3dcircles.length,t,i$jscomp$0;m;)i$jscomp$0\x3dMath.random()*m--|0,t\x3dcircles[m],circles[m]\x3dcircles[i$jscomp$0],circles[i$jscomp$0]\x3dt;m\x3dcircles.length;t\x3d[];for(var e;i\x3cm;)if(i$jscomp$0\x3dcircles[i],e\x26\x26enclosesWeak(e,i$jscomp$0))++i;else{a:if(i\x3dt,enclosesWeakAll(i$jscomp$0,i))i\x3d[i$jscomp$0];else{for(t\x3d0;t\x3ci.length;++t)if(enclosesNot(i$jscomp$0,\ni[t])\x26\x26enclosesWeakAll(encloseBasis2(i[t],i$jscomp$0),i)){i\x3d[i[t],i$jscomp$0];break a}for(t\x3d0;t\x3ci.length-1;++t)for(e\x3dt+1;e\x3ci.length;++e)if(enclosesNot(encloseBasis2(i[t],i[e]),i$jscomp$0)\x26\x26enclosesNot(encloseBasis2(i[t],i$jscomp$0),i[e])\x26\x26enclosesNot(encloseBasis2(i[e],i$jscomp$0),i[t])\x26\x26enclosesWeakAll(encloseBasis3(i[t],i[e],i$jscomp$0),i)){i\x3d[i[t],i[e],i$jscomp$0];break a}throw Error();}a:{i\x3dt\x3di;switch(i.length){case 1:i\x3di[0];i\x3d{x:i.x,y:i.y,r:i.r};break a;case 2:i\x3dencloseBasis2(i[0],i[1]);break a;\ncase 3:i\x3dencloseBasis3(i[0],i[1],i[2]);break a}i\x3dvoid 0}e\x3di;i\x3d0}return e}function enclosesNot(a,b){var dr\x3da.r-b.r,dx\x3db.x-a.x;a\x3db.y-a.y;return 0\x3edr||dr*dr\x3cdx*dx+a*a}function enclosesWeak(a,b){var dr\x3da.r-b.r+1E-6,dx\x3db.x-a.x;a\x3db.y-a.y;return 0\x3cdr\x26\x26dr*dr\x3edx*dx+a*a}function enclosesWeakAll(a,B){for(var i\x3d0;i\x3cB.length;++i)if(!enclosesWeak(a,B[i]))return!1;return!0}function encloseBasis2(a,b){var x1\x3da.x,y1\x3da.y;a\x3da.r;var x2\x3db.x,y2\x3db.y;b\x3db.r;var x21\x3dx2-x1,y21\x3dy2-y1,r21\x3db-a,l\x3dMath.sqrt(x21*x21+y21*y21);return{x:(x1+\nx2+x21/l*r21)/2,y:(y1+y2+y21/l*r21)/2,r:(l+a+b)/2}}function encloseBasis3(a,b,c){var x1\x3da.x,y1\x3da.y;a\x3da.r;var x2\x3db.x,y2\x3db.y,r2\x3db.r,x3\x3dc.x,y3\x3dc.y,r3\x3dc.r;c\x3dx1-x2;b\x3dx1-x3;var b2\x3dy1-y2,b3\x3dy1-y3,c2\x3dr2-a,c3\x3dr3-a,d1\x3dx1*x1+y1*y1-a*a;y2\x3dd1-x2*x2-y2*y2+r2*r2;y3\x3dd1-x3*x3-y3*y3+r3*r3;x3\x3db*b2-c*b3;x2\x3d(b2*y3-b3*y2)/(2*x3)-x1;b2\x3d(b3*c2-b2*c3)/x3;b3\x3d(b*y2-c*y3)/(2*x3)-y1;c\x3d(c*c3-b*c2)/x3;b\x3db2*b2+c*c-1;c2\x3d2*(a+x2*b2+b3*c);a\x3dx2*x2+b3*b3-a*a;a\x3d-(b?(c2+Math.sqrt(c2*c2-4*b*a))/(2*b):a/c2);return{x:x1+x2+b2*a,y:y1+b3+c*\na,r:a}}function place(b,a,c){var dx\x3db.x-a.x,dy\x3db.y-a.y,d2\x3ddx*dx+dy*dy;if(d2){var a2\x3da.r+c.r;a2*\x3da2;var b2\x3db.r+c.r;b2*\x3db2;if(a2\x3eb2){var x\x3d(d2+b2-a2)/(2*d2);a2\x3dMath.sqrt(Math.max(0,b2/d2-x*x));c.x\x3db.x-x*dx-a2*dy;c.y\x3db.y-x*dy+a2*dx}else x\x3d(d2+a2-b2)/(2*d2),a2\x3dMath.sqrt(Math.max(0,a2/d2-x*x)),c.x\x3da.x+x*dx-a2*dy,c.y\x3da.y+x*dy+a2*dx}else c.x\x3da.x+c.r,c.y\x3da.y}function intersects(a,b){var dr\x3da.r+b.r-1E-6,dx\x3db.x-a.x;a\x3db.y-a.y;return 0\x3cdr\x26\x26dr*dr\x3edx*dx+a*a}function score(node){var a\x3dnode._,b\x3dnode.next._,ab\x3da.r+\nb.r;node\x3d(a.x*b.r+b.x*a.r)/ab;a\x3d(a.y*b.r+b.y*a.r)/ab;return node*node+a*a}function Node$1(circle){this._\x3dcircle;this.previous\x3dthis.next\x3dnull}function packEnclose(circles){if(!(n\x3dcircles.length))return 0;var c,n;var a\x3dcircles[0];a.x\x3d0;a.y\x3d0;if(!(1\x3cn))return a.r;var b\x3dcircles[1];a.x\x3d-b.r;b.x\x3da.r;b.y\x3d0;if(!(2\x3cn))return a.r+b.r;place(b,a,c\x3dcircles[2]);a\x3dnew Node$1(a);b\x3dnew Node$1(b);c\x3dnew Node$1(c);a.next\x3dc.previous\x3db;b.next\x3da.previous\x3dc;c.next\x3db.previous\x3da;var i\x3d3;a:for(;i\x3cn;++i){place(a._,b._,c\x3dcircles[i]);\nc\x3dnew Node$1(c);var aa\x3db.next;var ca\x3da.previous;var sj\x3db._.r;var sk\x3da._.r;do if(sj\x3c\x3dsk){if(intersects(aa._,c._)){b\x3daa;a.next\x3db;b.previous\x3da;--i;continue a}sj+\x3daa._.r;aa\x3daa.next}else{if(intersects(ca._,c._)){a\x3dca;a.next\x3db;b.previous\x3da;--i;continue a}sk+\x3dca._.r;ca\x3dca.previous}while(aa!\x3d\x3dca.next);c.previous\x3da;c.next\x3db;a.next\x3db.previous\x3db\x3dc;for(aa\x3dscore(a);(c\x3dc.next)!\x3d\x3db;)(ca\x3dscore(c))\x3caa\x26\x26(a\x3dc,aa\x3dca);b\x3da.next}a\x3d[b._];for(c\x3db;(c\x3dc.next)!\x3d\x3db;)a.push(c._);c\x3denclose(a);for(i\x3d0;i\x3cn;++i)a\x3dcircles[i],a.x-\x3d\nc.x,a.y-\x3dc.y;return c.r}function required(f){if(\x22function\x22!\x3d\x3dtypeof f)throw Error();return f}function constantZero(){return 0}function constant(x){return function(){return x}}function defaultRadius(d){return Math.sqrt(d.value)}function radiusLeaf(radius){return function(node){node.children||(node.r\x3dMath.max(0,+radius(node)||0))}}function packChildren(padding,k){return function(node){if(children\x3dnode.children){var children,i,n\x3dchildren.length,r\x3dpadding(node)*k||0;if(r)for(i\x3d0;i\x3cn;++i)children[i].r+\x3d\nr;var e\x3dpackEnclose(children);if(r)for(i\x3d0;i\x3cn;++i)children[i].r-\x3dr;node.r\x3de+r}}}function translateChild(k){return function(node){var parent\x3dnode.parent;node.r*\x3dk;parent\x26\x26(node.x\x3dparent.x+k*node.x,node.y\x3dparent.y+k*node.y)}}function roundNode(node){node.x0\x3dMath.round(node.x0);node.y0\x3dMath.round(node.y0);node.x1\x3dMath.round(node.x1);node.y1\x3dMath.round(node.y1)}function treemapDice(parent,x0,y0,x1,y1){var nodes\x3dparent.children,i\x3d-1,n\x3dnodes.length;for(x1\x3dparent.value\x26\x26(x1-x0)/parent.value;++i\x3cn;)parent\x3d\nnodes[i],parent.y0\x3dy0,parent.y1\x3dy1,parent.x0\x3dx0,parent.x1\x3dx0+\x3dparent.value*x1}function defaultId(d){return d.id}function defaultParentId(d){return d.parentId}function defaultSeparation$1(a,b){return a.parent\x3d\x3d\x3db.parent?1:2}function nextLeft(v){var children\x3dv.children;return children?children[0]:v.t}function nextRight(v){var children\x3dv.children;return children?children[children.length-1]:v.t}function TreeNode(node,i){this._\x3dnode;this.A\x3dthis.children\x3dthis.parent\x3dnull;this.a\x3dthis;this.s\x3dthis.c\x3dthis.m\x3d\nthis.z\x3d0;this.t\x3dnull;this.i\x3di}function treeRoot(root){root\x3dnew TreeNode(root,0);for(var node,nodes\x3d[root],child,children,i;node\x3dnodes.pop();)if(children\x3dnode._.children)for(node.children\x3dArray(child\x3dchildren.length),i\x3dchild-1;0\x3c\x3di;--i)nodes.push(child\x3dnode.children[i]\x3dnew TreeNode(children[i],i)),child.parent\x3dnode;(root.parent\x3dnew TreeNode(null,0)).children\x3d[root];return root}function treemapSlice(parent,x0,y0,x1,y1){var nodes\x3dparent.children,i\x3d-1,n\x3dnodes.length;for(y1\x3dparent.value\x26\x26(y1-y0)/parent.value;++i\x3c\nn;)parent\x3dnodes[i],parent.x0\x3dx0,parent.x1\x3dx1,parent.y0\x3dy0,parent.y1\x3dy0+\x3dparent.value*y1}function squarifyRatio(ratio,parent,x0,y0,x1,y1){for(var rows\x3d[],nodes\x3dparent.children,row,nodeValue,i1\x3drow\x3d0,n\x3dnodes.length,dy,value\x3dparent.value,sumValue,minValue,maxValue,newRatio,minRatio,alpha;row\x3cn;){parent\x3dx1-x0;dy\x3dy1-y0;do sumValue\x3dnodes[i1++].value;while(!sumValue\x26\x26i1\x3cn);minValue\x3dmaxValue\x3dsumValue;alpha\x3dMath.max(dy/parent,parent/dy)/(value*ratio);newRatio\x3dsumValue*sumValue*alpha;for(minRatio\x3dMath.max(maxValue/\nnewRatio,newRatio/minValue);i1\x3cn;++i1){sumValue+\x3dnodeValue\x3dnodes[i1].value;nodeValue\x3cminValue\x26\x26(minValue\x3dnodeValue);nodeValue\x3emaxValue\x26\x26(maxValue\x3dnodeValue);newRatio\x3dsumValue*sumValue*alpha;newRatio\x3dMath.max(maxValue/newRatio,newRatio/minValue);if(newRatio\x3eminRatio){sumValue-\x3dnodeValue;break}minRatio\x3dnewRatio}rows.push(row\x3d{value:sumValue,dice:parent\x3cdy,children:nodes.slice(row,i1)});row.dice?treemapDice(row,x0,y0,x1,value?y0+\x3ddy*sumValue/value:y1):treemapSlice(row,x0,y0,value?x0+\x3dparent*sumValue/\nvalue:x1,y1);value-\x3dsumValue;row\x3di1}return rows}Node.prototype\x3dhierarchy.prototype\x3d{constructor:Node,count:function(){return this.eachAfter(count)},each:function(callback){var node,next\x3d[this],n;do{var current\x3dnext.reverse();for(next\x3d[];node\x3dcurrent.pop();)if(callback(node),node\x3dnode.children){var i\x3d0;for(n\x3dnode.length;i\x3cn;++i)next.push(node[i])}}while(next.length);return this},eachAfter:function(callback){for(var node,nodes\x3d[this],next\x3d[],i,n;node\x3dnodes.pop();)if(next.push(node),node\x3dnode.children)for(i\x3d\n0,n\x3dnode.length;i\x3cn;++i)nodes.push(node[i]);for(;node\x3dnext.pop();)callback(node);return this},eachBefore:function(callback){for(var node,nodes\x3d[this],i;node\x3dnodes.pop();)if(callback(node),node\x3dnode.children)for(i\x3dnode.length-1;0\x3c\x3di;--i)nodes.push(node[i]);return this},sum:function(value){return this.eachAfter(function(node){for(var sum\x3d+value(node.data)||0,children\x3dnode.children,i\x3dchildren\x26\x26children.length;0\x3c\x3d--i;)sum+\x3dchildren[i].value;node.value\x3dsum})},sort:function(compare){return this.eachBefore(function(node){node.children\x26\x26\nnode.children.sort(compare)})},path:function(end){var start\x3dthis;var ancestor\x3dstart;var b\x3dend;if(ancestor!\x3d\x3db){var aNodes\x3dancestor.ancestors(),bNodes\x3db.ancestors(),c\x3dnull;ancestor\x3daNodes.pop();for(b\x3dbNodes.pop();ancestor\x3d\x3d\x3db;)c\x3dancestor,ancestor\x3daNodes.pop(),b\x3dbNodes.pop();ancestor\x3dc}for(b\x3d[start];start!\x3d\x3dancestor;)start\x3dstart.parent,b.push(start);for(start\x3db.length;end!\x3d\x3dancestor;)b.splice(start,0,end),end\x3dend.parent;return b},ancestors:function(){for(var node\x3dthis,nodes\x3d[node];node\x3dnode.parent;)nodes.push(node);\nreturn nodes},descendants:function(){var nodes\x3d[];this.each(function(node){nodes.push(node)});return nodes},leaves:function(){var leaves\x3d[];this.eachBefore(function(node){node.children||leaves.push(node)});return leaves},links:function(){var root\x3dthis,links\x3d[];root.each(function(node){node!\x3d\x3droot\x26\x26links.push({source:node.parent,target:node})});return links},copy:function(){return hierarchy(this).eachBefore(copyData)}};var slice\x3dArray.prototype.slice,preroot\x3d{depth:-1},ambiguous\x3d{};TreeNode.prototype\x3d\nObject.create(Node.prototype);var phi\x3d(1+Math.sqrt(5))/2,squarify\x3dfunction custom(ratio){function squarify(parent,x0,y0,x1,y1){squarifyRatio(ratio,parent,x0,y0,x1,y1)}squarify.ratio\x3dfunction(x){return custom(1\x3c(x\x3d+x)?x:1)};return squarify}(phi);phi\x3dfunction custom(ratio){function resquarify(parent,x0,y0,x1,y1){if((rows\x3dparent._squarify)\x26\x26rows.ratio\x3d\x3d\x3dratio)for(var rows,nodes,i,j\x3d-1,n,m\x3drows.length,value\x3dparent.value;++j\x3cm;){parent\x3drows[j];nodes\x3dparent.children;i\x3dparent.value\x3d0;for(n\x3dnodes.length;i\x3c\nn;++i)parent.value+\x3dnodes[i].value;parent.dice?treemapDice(parent,x0,y0,x1,y0+\x3d(y1-y0)*parent.value/value):treemapSlice(parent,x0,y0,x0+\x3d(x1-x0)*parent.value/value,y1);value-\x3dparent.value}else parent._squarify\x3drows\x3dsquarifyRatio(ratio,parent,x0,y0,x1,y1),rows.ratio\x3dratio}resquarify.ratio\x3dfunction(x){return custom(1\x3c(x\x3d+x)?x:1)};return resquarify}(phi);exports.cluster\x3dfunction(){function cluster(root){var previousNode,x\x3d0;root.eachAfter(function(node){var children\x3dnode.children;if(children){var JSCompiler_inline_result\x3d\nchildren.reduce(meanXReduce,0)/children.length;node.x\x3dJSCompiler_inline_result;node.y\x3d1+children.reduce(maxYReduce,0)}else node.x\x3dpreviousNode?x+\x3dseparation(node,previousNode):0,node.y\x3d0,previousNode\x3dnode});var left\x3dleafLeft(root),right\x3dleafRight(root),x0\x3dleft.x-separation(left,right)/2,x1\x3dright.x+separation(right,left)/2;return root.eachAfter(nodeSize?function(node){node.x\x3d(node.x-root.x)*dx;node.y\x3d(root.y-node.y)*dy}:function(node){node.x\x3d(node.x-x0)/(x1-x0)*dx;node.y\x3d(1-(root.y?node.y/root.y:1))*\ndy})}var separation\x3ddefaultSeparation,dx\x3d1,dy\x3d1,nodeSize\x3d!1;cluster.separation\x3dfunction(x){return arguments.length?(separation\x3dx,cluster):separation};cluster.size\x3dfunction(x){return arguments.length?(nodeSize\x3d!1,dx\x3d+x[0],dy\x3d+x[1],cluster):nodeSize?null:[dx,dy]};cluster.nodeSize\x3dfunction(x){return arguments.length?(nodeSize\x3d!0,dx\x3d+x[0],dy\x3d+x[1],cluster):nodeSize?[dx,dy]:null};return cluster};exports.hierarchy\x3dhierarchy;exports.pack\x3dfunction(){function pack(root){root.x\x3ddx/2;root.y\x3ddy/2;radius?root.eachBefore(radiusLeaf(radius)).eachAfter(packChildren(padding,\n.5)).eachBefore(translateChild(1)):root.eachBefore(radiusLeaf(defaultRadius)).eachAfter(packChildren(constantZero,1)).eachAfter(packChildren(padding,root.r/Math.min(dx,dy))).eachBefore(translateChild(Math.min(dx,dy)/(2*root.r)));return root}var radius\x3dnull,dx\x3d1,dy\x3d1,padding\x3dconstantZero;pack.radius\x3dfunction(x){return arguments.length?(radius\x3dnull\x3d\x3dx?null:required(x),pack):radius};pack.size\x3dfunction(x){return arguments.length?(dx\x3d+x[0],dy\x3d+x[1],pack):[dx,dy]};pack.padding\x3dfunction(x){return arguments.length?\n(padding\x3d\x22function\x22\x3d\x3d\x3dtypeof x?x:constant(+x),pack):padding};return pack};exports.packEnclose\x3denclose;exports.packSiblings\x3dfunction(circles){packEnclose(circles);return circles};exports.partition\x3dfunction(){function partition(root){var n\x3droot.height+1;root.x0\x3droot.y0\x3dpadding;root.x1\x3ddx;root.y1\x3ddy$jscomp$0/n;root.eachBefore(positionNode(dy$jscomp$0,n));round\x26\x26root.eachBefore(roundNode);return root}function positionNode(dy,n){return function(node){node.children\x26\x26treemapDice(node,node.x0,dy*(node.depth+\n1)/n,node.x1,dy*(node.depth+2)/n);var x0\x3dnode.x0,y0\x3dnode.y0,x1\x3dnode.x1-padding,y1\x3dnode.y1-padding;x1\x3cx0\x26\x26(x0\x3dx1\x3d(x0+x1)/2);y1\x3cy0\x26\x26(y0\x3dy1\x3d(y0+y1)/2);node.x0\x3dx0;node.y0\x3dy0;node.x1\x3dx1;node.y1\x3dy1}}var dx\x3d1,dy$jscomp$0\x3d1,padding\x3d0,round\x3d!1;partition.round\x3dfunction(x){return arguments.length?(round\x3d!!x,partition):round};partition.size\x3dfunction(x){return arguments.length?(dx\x3d+x[0],dy$jscomp$0\x3d+x[1],partition):[dx,dy$jscomp$0]};partition.padding\x3dfunction(x){return arguments.length?(padding\x3d+x,partition):\npadding};return partition};exports.stratify\x3dfunction(){function stratify(data){var i,n\x3ddata.length,nodes\x3dArray(n),nodeId,nodeByKey\x3d{};for(i\x3d0;i\x3cn;++i){var d\x3ddata[i];var node$jscomp$0\x3dnodes[i]\x3dnew Node(d);null!\x3d(nodeId\x3did(d,i,data))\x26\x26(nodeId+\x3d\x22\x22)\x26\x26(d\x3d\x22$\x22+(node$jscomp$0.id\x3dnodeId),nodeByKey[d]\x3dd in nodeByKey?ambiguous:node$jscomp$0)}for(i\x3d0;i\x3cn;++i)if(node$jscomp$0\x3dnodes[i],nodeId\x3dparentId(data[i],i,data),null!\x3dnodeId\x26\x26(nodeId+\x3d\x22\x22)){d\x3dnodeByKey[\x22$\x22+nodeId];if(!d)throw Error(\x22missing: \x22+nodeId);if(d\x3d\x3d\x3d\nambiguous)throw Error(\x22ambiguous: \x22+nodeId);d.children?d.children.push(node$jscomp$0):d.children\x3d[node$jscomp$0];node$jscomp$0.parent\x3dd}else{if(root)throw Error(\x22multiple roots\x22);var root\x3dnode$jscomp$0}if(!root)throw Error(\x22no root\x22);root.parent\x3dpreroot;root.eachBefore(function(node){node.depth\x3dnode.parent.depth+1;--n}).eachBefore(computeHeight);root.parent\x3dnull;if(0\x3cn)throw Error(\x22cycle\x22);return root}var id\x3ddefaultId,parentId\x3ddefaultParentId;stratify.id\x3dfunction(x){return arguments.length?(id\x3drequired(x),\nstratify):id};stratify.parentId\x3dfunction(x){return arguments.length?(parentId\x3drequired(x),stratify):parentId};return stratify};exports.tree\x3dfunction(){function tree(root){var t\x3dtreeRoot(root);t.eachAfter(firstWalk);t.parent.m\x3d-t.z;t.eachBefore(secondWalk);if(nodeSize)root.eachBefore(sizeNode);else{var left\x3droot,right\x3droot,bottom\x3droot;root.eachBefore(function(node){node.x\x3cleft.x\x26\x26(left\x3dnode);node.x\x3eright.x\x26\x26(right\x3dnode);node.depth\x3ebottom.depth\x26\x26(bottom\x3dnode)});t\x3dleft\x3d\x3d\x3dright?1:separation(left,right)/\n2;var tx\x3dt-left.x,kx\x3ddx/(right.x+t+tx),ky\x3ddy/(bottom.depth||1);root.eachBefore(function(node){node.x\x3d(node.x+tx)*kx;node.y\x3dnode.depth*ky})}return root}function firstWalk(v){var children\x3dv.children,siblings\x3dv.parent.children,w\x3dv.i?siblings[v.i-1]:null;if(children){for(var shift\x3d0,change\x3d0,children$jscomp$0\x3dv.children,i\x3dchildren$jscomp$0.length,w$jscomp$0;0\x3c\x3d--i;)w$jscomp$0\x3dchildren$jscomp$0[i],w$jscomp$0.z+\x3dshift,w$jscomp$0.m+\x3dshift,shift+\x3dw$jscomp$0.s+(change+\x3dw$jscomp$0.c);children\x3d(children[0].z+\nchildren[children.length-1].z)/2;w?(v.z\x3dw.z+separation(v._,w._),v.m\x3dv.z-children):v.z\x3dchildren}else w\x26\x26(v.z\x3dw.z+separation(v._,w._));children\x3dv.parent;siblings\x3dv.parent.A||siblings[0];if(w){change\x3dshift\x3dv;children$jscomp$0\x3dshift.parent.children[0];i\x3dshift.m;w$jscomp$0\x3dchange.m;for(var sim\x3dw.m,som\x3dchildren$jscomp$0.m,shift$jscomp$0;w\x3dnextRight(w),shift\x3dnextLeft(shift),w\x26\x26shift;){children$jscomp$0\x3dnextLeft(children$jscomp$0);change\x3dnextRight(change);change.a\x3dv;shift$jscomp$0\x3dw.z+sim-shift.z-i+separation(w._,\nshift._);if(0\x3cshift$jscomp$0){var wm\x3dw.a.parent\x3d\x3d\x3dv.parent?w.a:siblings,wp\x3dv,shift$jscomp$1\x3dshift$jscomp$0,change$jscomp$0\x3dshift$jscomp$1/(wp.i-wm.i);wp.c-\x3dchange$jscomp$0;wp.s+\x3dshift$jscomp$1;wm.c+\x3dchange$jscomp$0;wp.z+\x3dshift$jscomp$1;wp.m+\x3dshift$jscomp$1;i+\x3dshift$jscomp$0;w$jscomp$0+\x3dshift$jscomp$0}sim+\x3dw.m;i+\x3dshift.m;som+\x3dchildren$jscomp$0.m;w$jscomp$0+\x3dchange.m}w\x26\x26!nextRight(change)\x26\x26(change.t\x3dw,change.m+\x3dsim-w$jscomp$0);shift\x26\x26!nextLeft(children$jscomp$0)\x26\x26(children$jscomp$0.t\x3dshift,children$jscomp$0.m+\x3d\ni-som,siblings\x3dv)}children.A\x3dsiblings}function secondWalk(v){v._.x\x3dv.z+v.parent.m;v.m+\x3dv.parent.m}function sizeNode(node){node.x*\x3ddx;node.y\x3dnode.depth*dy}var separation\x3ddefaultSeparation$1,dx\x3d1,dy\x3d1,nodeSize\x3dnull;tree.separation\x3dfunction(x){return arguments.length?(separation\x3dx,tree):separation};tree.size\x3dfunction(x){return arguments.length?(nodeSize\x3d!1,dx\x3d+x[0],dy\x3d+x[1],tree):nodeSize?null:[dx,dy]};tree.nodeSize\x3dfunction(x){return arguments.length?(nodeSize\x3d!0,dx\x3d+x[0],dy\x3d+x[1],tree):nodeSize?[dx,\ndy]:null};return tree};exports.treemap\x3dfunction(){function treemap(root){root.x0\x3droot.y0\x3d0;root.x1\x3ddx;root.y1\x3ddy;root.eachBefore(positionNode);paddingStack\x3d[0];round\x26\x26root.eachBefore(roundNode);return root}function positionNode(node){var p\x3dpaddingStack[node.depth],x0\x3dnode.x0+p,y0\x3dnode.y0+p,x1\x3dnode.x1-p,y1\x3dnode.y1-p;x1\x3cx0\x26\x26(x0\x3dx1\x3d(x0+x1)/2);y1\x3cy0\x26\x26(y0\x3dy1\x3d(y0+y1)/2);node.x0\x3dx0;node.y0\x3dy0;node.x1\x3dx1;node.y1\x3dy1;node.children\x26\x26(p\x3dpaddingStack[node.depth+1]\x3dpaddingInner(node)/2,x0+\x3dpaddingLeft(node)-p,\ny0+\x3dpaddingTop(node)-p,x1-\x3dpaddingRight(node)-p,y1-\x3dpaddingBottom(node)-p,x1\x3cx0\x26\x26(x0\x3dx1\x3d(x0+x1)/2),y1\x3cy0\x26\x26(y0\x3dy1\x3d(y0+y1)/2),tile(node,x0,y0,x1,y1))}var tile\x3dsquarify,round\x3d!1,dx\x3d1,dy\x3d1,paddingStack\x3d[0],paddingInner\x3dconstantZero,paddingTop\x3dconstantZero,paddingRight\x3dconstantZero,paddingBottom\x3dconstantZero,paddingLeft\x3dconstantZero;treemap.round\x3dfunction(x){return arguments.length?(round\x3d!!x,treemap):round};treemap.size\x3dfunction(x){return arguments.length?(dx\x3d+x[0],dy\x3d+x[1],treemap):[dx,dy]};treemap.tile\x3d\nfunction(x){return arguments.length?(tile\x3drequired(x),treemap):tile};treemap.padding\x3dfunction(x){return arguments.length?treemap.paddingInner(x).paddingOuter(x):treemap.paddingInner()};treemap.paddingInner\x3dfunction(x){return arguments.length?(paddingInner\x3d\x22function\x22\x3d\x3d\x3dtypeof x?x:constant(+x),treemap):paddingInner};treemap.paddingOuter\x3dfunction(x){return arguments.length?treemap.paddingTop(x).paddingRight(x).paddingBottom(x).paddingLeft(x):treemap.paddingTop()};treemap.paddingTop\x3dfunction(x){return arguments.length?\n(paddingTop\x3d\x22function\x22\x3d\x3d\x3dtypeof x?x:constant(+x),treemap):paddingTop};treemap.paddingRight\x3dfunction(x){return arguments.length?(paddingRight\x3d\x22function\x22\x3d\x3d\x3dtypeof x?x:constant(+x),treemap):paddingRight};treemap.paddingBottom\x3dfunction(x){return arguments.length?(paddingBottom\x3d\x22function\x22\x3d\x3d\x3dtypeof x?x:constant(+x),treemap):paddingBottom};treemap.paddingLeft\x3dfunction(x){return arguments.length?(paddingLeft\x3d\x22function\x22\x3d\x3d\x3dtypeof x?x:constant(+x),treemap):paddingLeft};return treemap};exports.treemapBinary\x3d\nfunction(parent,x0$jscomp$0,y0$jscomp$0,x1$jscomp$0,y1$jscomp$0){function partition(i,j,value,x0,y0,x1,y1){if(i\x3e\x3dj-1)i\x3dnodes[i],i.x0\x3dx0,i.y0\x3dy0,i.x1\x3dx1,i.y1\x3dy1;else{for(var valueOffset\x3dsums[i],valueTarget\x3dvalue/2+valueOffset,k\x3di+1,hi\x3dj-1;k\x3chi;){var mid\x3dk+hi\x3e\x3e\x3e1;sums[mid]\x3cvalueTarget?k\x3dmid+1:hi\x3dmid}valueTarget-sums[k-1]\x3csums[k]-valueTarget\x26\x26i+1\x3ck\x26\x26--k;valueOffset\x3dsums[k]-valueOffset;valueTarget\x3dvalue-valueOffset;x1-x0\x3ey1-y0?(value\x3d(x0*valueTarget+x1*valueOffset)/value,partition(i,k,valueOffset,x0,\ny0,value,y1),partition(k,j,valueTarget,value,y0,x1,y1)):(value\x3d(y0*valueTarget+y1*valueOffset)/value,partition(i,k,valueOffset,x0,y0,x1,value),partition(k,j,valueTarget,x0,value,x1,y1))}}var nodes\x3dparent.children,i$jscomp$0,n\x3dnodes.length,sum,sums\x3dArray(n+1);for(sums[0]\x3dsum\x3di$jscomp$0\x3d0;i$jscomp$0\x3cn;++i$jscomp$0)sums[i$jscomp$0+1]\x3dsum+\x3dnodes[i$jscomp$0].value;partition(0,n,parent.value,x0$jscomp$0,y0$jscomp$0,x1$jscomp$0,y1$jscomp$0)};exports.treemapDice\x3dtreemapDice;exports.treemapResquarify\x3dphi;\nexports.treemapSlice\x3dtreemapSlice;exports.treemapSliceDice\x3dfunction(parent,x0,y0,x1,y1){(parent.depth\x261?treemapSlice:treemapDice)(parent,x0,y0,x1,y1)};exports.treemapSquarify\x3dsquarify;Object.defineProperty(exports,\x22__esModule\x22,{value:!0})})}");
SHADOW_ENV.evalLoad("module$node_modules$vega_hierarchy$build$vega_hierarchy.js", true , "shadow$provide.module$node_modules$vega_hierarchy$build$vega_hierarchy\x3dfunction(global$jscomp$0,require,module,exports$jscomp$0){(function(global,factory){\x22object\x22\x3d\x3d\x3dtypeof exports$jscomp$0\x26\x26\x22undefined\x22!\x3d\x3dtypeof module?factory(exports$jscomp$0,require(\x22module$node_modules$vega_dataflow$build$vega_dataflow\x22),require(\x22module$node_modules$vega_util$build$vega_util\x22),require(\x22module$node_modules$d3_hierarchy$dist$d3_hierarchy\x22)):\x22function\x22\x3d\x3d\x3dtypeof define\x26\x26define.amd?define([\x22exports\x22,\x22vega-dataflow\x22,\n\x22vega-util\x22,\x22d3-hierarchy\x22],factory):(global\x3dglobal||self,factory((global.vega\x3dglobal.vega||{},global.vega.transforms\x3d{}),global.vega,global.vega,global.d3))})(this,function(exports,vegaDataflow,vegaUtil,d3Hierarchy){function lookup(tree,key,filter){var map\x3d{};tree.each(function(node){var t\x3dnode.data;filter(t)\x26\x26(map[key(t)]\x3dnode)});tree.lookup\x3dmap;return tree}function Nest(params){vegaDataflow.Transform.call(this,null,params)}function children(n){return n.values}function nest$jscomp$0(){function apply(array,\ndepth){if(depth\x3e\x3dkeys.length)return array;for(var i\x3d-1,n\x3darray.length,key\x3dkeys[depth++],keyValue,value,valuesByKey\x3d{},values,result\x3d{};++i\x3cn;)keyValue\x3dkey(value\x3darray[i])+\x22\x22,(values\x3dvaluesByKey[keyValue])?values.push(value):valuesByKey[keyValue]\x3d[value];for(keyValue in valuesByKey)result[keyValue]\x3dapply(valuesByKey[keyValue],depth);return result}function entries(map,depth){if(++depth\x3ekeys.length)return map;var array\x3d[],k;for(k in map)array.push({key:k,values:entries(map[k],depth)});return array}var keys\x3d\n[],nest;return nest\x3d{entries:function(array){return entries(apply(array,0),0)},key:function(d){keys.push(d);return nest}}}function HierarchyLayout(params){vegaDataflow.Transform.call(this,null,params)}function setParams(layout,params,_){for(var p,i\x3d0,n\x3dparams.length;i\x3cn;++i)if(p\x3dparams[i],p in _)layout[p](_[p])}function defaultSeparation(a,b){return a.parent\x3d\x3d\x3db.parent?1:2}function Pack(params){HierarchyLayout.call(this,params)}function Partition(params){HierarchyLayout.call(this,params)}function Stratify(params){vegaDataflow.Transform.call(this,\nnull,params)}function Tree(params){HierarchyLayout.call(this,params)}function TreeLinks(params){vegaDataflow.Transform.call(this,[],params)}function Treemap(params){HierarchyLayout.call(this,params)}Nest.Definition\x3d{type:\x22Nest\x22,metadata:{treesource:!0,changes:!0},params:[{name:\x22keys\x22,type:\x22field\x22,array:!0},{name:\x22generate\x22,type:\x22boolean\x22}]};vegaUtil.inherits(Nest,vegaDataflow.Transform).transform\x3dfunction(_,pulse){pulse.source||vegaUtil.error(\x22Nest transform requires an upstream data source.\x22);var gen\x3d\n_.generate,mod\x3d_.modified(),out\x3dpulse.clone(),tree\x3dthis.value;if(!tree||mod||pulse.changed())tree\x26\x26tree.each(function(node){node.children\x26\x26vegaDataflow.isTuple(node.data)\x26\x26out.rem.push(node.data)}),this.value\x3dtree\x3dd3Hierarchy.hierarchy({values:vegaUtil.array(_.keys).reduce(function(n,k){n.key(k);return n},nest$jscomp$0()).entries(out.source)},children),gen\x26\x26tree.each(function(node){node.children\x26\x26(node\x3dvegaDataflow.ingest(node.data),out.add.push(node),out.source.push(node))}),lookup(tree,vegaDataflow.tupleid,\nvegaDataflow.tupleid);out.source.root\x3dtree;return out};vegaUtil.inherits(HierarchyLayout,vegaDataflow.Transform).transform\x3dfunction(_,pulse){pulse.source\x26\x26pulse.source.root||vegaUtil.error(this.constructor.name+\x22 transform requires a backing tree data source.\x22);var layout\x3dthis.layout(_.method),fields\x3dthis.fields,root\x3dpulse.source.root,as\x3d_.as||fields;_.field?root.sum(_.field):root.count();_.sort\x26\x26root.sort(vegaDataflow.stableCompare(_.sort,function(d){return d.data}));setParams(layout,this.params,\n_);layout.separation\x26\x26layout.separation(!1!\x3d\x3d_.separation?defaultSeparation:vegaUtil.one);try{this.value\x3dlayout(root)}catch(err){vegaUtil.error(err)}root.each(function(node){for(var t\x3dnode.data,i\x3d0,n\x3dfields.length-1;i\x3cn;++i)t[as[i]]\x3dnode[fields[i]];t[as[n]]\x3dnode.children?node.children.length:0});return pulse.reflow(_.modified()).modifies(as).modifies(\x22leaf\x22)};var Output\x3d[\x22x\x22,\x22y\x22,\x22r\x22,\x22depth\x22,\x22children\x22];Pack.Definition\x3d{type:\x22Pack\x22,metadata:{tree:!0,modifies:!0},params:[{name:\x22field\x22,type:\x22field\x22},\n{name:\x22sort\x22,type:\x22compare\x22},{name:\x22padding\x22,type:\x22number\x22,\x22default\x22:0},{name:\x22radius\x22,type:\x22field\x22,\x22default\x22:null},{name:\x22size\x22,type:\x22number\x22,array:!0,length:2},{name:\x22as\x22,type:\x22string\x22,array:!0,length:Output.length,\x22default\x22:Output}]};var prototype$2\x3dvegaUtil.inherits(Pack,HierarchyLayout);prototype$2.layout\x3dd3Hierarchy.pack;prototype$2.params\x3d[\x22radius\x22,\x22size\x22,\x22padding\x22];prototype$2.fields\x3dOutput;Output\x3d\x22x0 y0 x1 y1 depth children\x22.split(\x22 \x22);Partition.Definition\x3d{type:\x22Partition\x22,metadata:{tree:!0,\nmodifies:!0},params:[{name:\x22field\x22,type:\x22field\x22},{name:\x22sort\x22,type:\x22compare\x22},{name:\x22padding\x22,type:\x22number\x22,\x22default\x22:0},{name:\x22round\x22,type:\x22boolean\x22,\x22default\x22:!1},{name:\x22size\x22,type:\x22number\x22,array:!0,length:2},{name:\x22as\x22,type:\x22string\x22,array:!0,length:Output.length,\x22default\x22:Output}]};prototype$2\x3dvegaUtil.inherits(Partition,HierarchyLayout);prototype$2.layout\x3dd3Hierarchy.partition;prototype$2.params\x3d[\x22size\x22,\x22round\x22,\x22padding\x22];prototype$2.fields\x3dOutput;Stratify.Definition\x3d{type:\x22Stratify\x22,metadata:{treesource:!0},\nparams:[{name:\x22key\x22,type:\x22field\x22,required:!0},{name:\x22parentKey\x22,type:\x22field\x22,required:!0}]};vegaUtil.inherits(Stratify,vegaDataflow.Transform).transform\x3dfunction(_,pulse){pulse.source||vegaUtil.error(\x22Stratify transform requires an upstream data source.\x22);var tree\x3dthis.value,mod\x3d_.modified(),out\x3dpulse.fork(pulse.ALL).materialize(pulse.SOURCE);pulse\x3d!this.value||mod||pulse.changed(pulse.ADD_REM)||pulse.modified(_.key.fields)||pulse.modified(_.parentKey.fields);out.source\x3dout.source.slice();pulse\x26\x26\n(tree\x3dout.source.length?lookup(d3Hierarchy.stratify().id(_.key).parentId(_.parentKey)(out.source),_.key,vegaUtil.truthy):lookup(d3Hierarchy.stratify()([{}]),_.key,_.key));out.source.root\x3dthis.value\x3dtree;return out};var Layouts\x3d{tidy:d3Hierarchy.tree,cluster:d3Hierarchy.cluster};Output\x3d[\x22x\x22,\x22y\x22,\x22depth\x22,\x22children\x22];Tree.Definition\x3d{type:\x22Tree\x22,metadata:{tree:!0,modifies:!0},params:[{name:\x22field\x22,type:\x22field\x22},{name:\x22sort\x22,type:\x22compare\x22},{name:\x22method\x22,type:\x22enum\x22,\x22default\x22:\x22tidy\x22,values:[\x22tidy\x22,\x22cluster\x22]},\n{name:\x22size\x22,type:\x22number\x22,array:!0,length:2},{name:\x22nodeSize\x22,type:\x22number\x22,array:!0,length:2},{name:\x22separation\x22,type:\x22boolean\x22,\x22default\x22:!0},{name:\x22as\x22,type:\x22string\x22,array:!0,length:Output.length,\x22default\x22:Output}]};prototype$2\x3dvegaUtil.inherits(Tree,HierarchyLayout);prototype$2.layout\x3dfunction(method){method\x3dmethod||\x22tidy\x22;if(vegaUtil.hasOwnProperty(Layouts,method))return Layouts[method]();vegaUtil.error(\x22Unrecognized Tree layout method: \x22+method)};prototype$2.params\x3d[\x22size\x22,\x22nodeSize\x22];prototype$2.fields\x3d\nOutput;TreeLinks.Definition\x3d{type:\x22TreeLinks\x22,metadata:{tree:!0,generates:!0,changes:!0},params:[]};vegaUtil.inherits(TreeLinks,vegaDataflow.Transform).transform\x3dfunction(_,pulse){_\x3dthis.value;var tree\x3dpulse.source\x26\x26pulse.source.root,out\x3dpulse.fork(pulse.NO_SOURCE),lut\x3d{};tree||vegaUtil.error(\x22TreeLinks transform requires a tree data source.\x22);pulse.changed(pulse.ADD_REM)?(out.rem\x3d_,pulse.visit(pulse.SOURCE,function(t){lut[vegaDataflow.tupleid(t)]\x3d1}),tree.each(function(node){var t\x3dnode.data;(node\x3d\nnode.parent\x26\x26node.parent.data)\x26\x26lut[vegaDataflow.tupleid(t)]\x26\x26lut[vegaDataflow.tupleid(node)]\x26\x26out.add.push(vegaDataflow.ingest({source:node,target:t}))}),this.value\x3dout.add):pulse.changed(pulse.MOD)\x26\x26(pulse.visit(pulse.MOD,function(t){lut[vegaDataflow.tupleid(t)]\x3d1}),_.forEach(function(link){(lut[vegaDataflow.tupleid(link.source)]||lut[vegaDataflow.tupleid(link.target)])\x26\x26out.mod.push(link)}));return out};var Tiles\x3d{binary:d3Hierarchy.treemapBinary,dice:d3Hierarchy.treemapDice,slice:d3Hierarchy.treemapSlice,\nslicedice:d3Hierarchy.treemapSliceDice,squarify:d3Hierarchy.treemapSquarify,resquarify:d3Hierarchy.treemapResquarify};Output\x3d\x22x0 y0 x1 y1 depth children\x22.split(\x22 \x22);Treemap.Definition\x3d{type:\x22Treemap\x22,metadata:{tree:!0,modifies:!0},params:[{name:\x22field\x22,type:\x22field\x22},{name:\x22sort\x22,type:\x22compare\x22},{name:\x22method\x22,type:\x22enum\x22,\x22default\x22:\x22squarify\x22,values:\x22squarify resquarify binary dice slice slicedice\x22.split(\x22 \x22)},{name:\x22padding\x22,type:\x22number\x22,\x22default\x22:0},{name:\x22paddingInner\x22,type:\x22number\x22,\x22default\x22:0},\n{name:\x22paddingOuter\x22,type:\x22number\x22,\x22default\x22:0},{name:\x22paddingTop\x22,type:\x22number\x22,\x22default\x22:0},{name:\x22paddingRight\x22,type:\x22number\x22,\x22default\x22:0},{name:\x22paddingBottom\x22,type:\x22number\x22,\x22default\x22:0},{name:\x22paddingLeft\x22,type:\x22number\x22,\x22default\x22:0},{name:\x22ratio\x22,type:\x22number\x22,\x22default\x22:1.618033988749895},{name:\x22round\x22,type:\x22boolean\x22,\x22default\x22:!1},{name:\x22size\x22,type:\x22number\x22,array:!0,length:2},{name:\x22as\x22,type:\x22string\x22,array:!0,length:Output.length,\x22default\x22:Output}]};prototype$2\x3dvegaUtil.inherits(Treemap,HierarchyLayout);\nprototype$2.layout\x3dfunction(){var x\x3dd3Hierarchy.treemap();x.ratio\x3dfunction(_){var t\x3dx.tile();t.ratio\x26\x26x.tile(t.ratio(_))};x.method\x3dfunction(_){vegaUtil.hasOwnProperty(Tiles,_)?x.tile(Tiles[_]):vegaUtil.error(\x22Unrecognized Treemap layout method: \x22+_)};return x};prototype$2.params\x3d\x22method ratio size round padding paddingInner paddingOuter paddingTop paddingRight paddingBottom paddingLeft\x22.split(\x22 \x22);prototype$2.fields\x3dOutput;exports.nest\x3dNest;exports.pack\x3dPack;exports.partition\x3dPartition;exports.stratify\x3d\nStratify;exports.tree\x3dTree;exports.treelinks\x3dTreeLinks;exports.treemap\x3dTreemap;Object.defineProperty(exports,\x22__esModule\x22,{value:!0})})}");
SHADOW_ENV.evalLoad("module$node_modules$vega_regression$build$vega_regression.js", true , "shadow$provide.module$node_modules$vega_regression$build$vega_regression\x3dfunction(global$jscomp$0,require,module,exports$jscomp$0){(function(global,factory){\x22object\x22\x3d\x3d\x3dtypeof exports$jscomp$0\x26\x26\x22undefined\x22!\x3d\x3dtypeof module?factory(exports$jscomp$0,require(\x22module$node_modules$vega_statistics$build$vega_statistics\x22),require(\x22module$node_modules$vega_dataflow$build$vega_dataflow\x22),require(\x22module$node_modules$vega_util$build$vega_util\x22)):\x22function\x22\x3d\x3d\x3dtypeof define\x26\x26define.amd?define([\x22exports\x22,\x22vega-statistics\x22,\n\x22vega-dataflow\x22,\x22vega-util\x22],factory):(global\x3dglobal||self,factory((global.vega\x3dglobal.vega||{},global.vega.transforms\x3d{}),global.vega,global.vega,global.vega))})(this,function(exports,vegaStatistics,vegaDataflow,vegaUtil){function partition(data,groupby){var groups\x3d[],get\x3dfunction(f){return f(t)},n;if(null\x3d\x3dgroupby)groups.push(data);else{var map\x3d{};var i\x3d0;for(n\x3ddata.length;i\x3cn;++i){var t\x3ddata[i];var k\x3dgroupby.map(get);var g\x3dmap[k];g||(map[k]\x3dg\x3d[],g.dims\x3dk,groups.push(g));g.push(t)}}return groups}\nfunction Loess(params){vegaDataflow.Transform.call(this,null,params)}function Regression(params){vegaDataflow.Transform.call(this,null,params)}Loess.Definition\x3d{type:\x22Loess\x22,metadata:{generates:!0},params:[{name:\x22x\x22,type:\x22field\x22,required:!0},{name:\x22y\x22,type:\x22field\x22,required:!0},{name:\x22groupby\x22,type:\x22field\x22,array:!0},{name:\x22bandwidth\x22,type:\x22number\x22,\x22default\x22:.3},{name:\x22as\x22,type:\x22string\x22,array:!0}]};vegaUtil.inherits(Loess,vegaDataflow.Transform).transform\x3dfunction(_,pulse){var out\x3dpulse.fork(pulse.NO_SOURCE|\npulse.NO_FIELDS);if(!this.value||pulse.changed()||_.modified()){pulse\x3dpulse.materialize(pulse.SOURCE).source;pulse\x3dpartition(pulse,_.groupby);var names\x3d(_.groupby||[]).map(vegaUtil.accessorName),m\x3dnames.length,as\x3d_.as||[vegaUtil.accessorName(_.x),vegaUtil.accessorName(_.y)],values\x3d[];pulse.forEach(function(g){vegaStatistics.regressionLoess(g,_.x,_.y,_.bandwidth||.3).forEach(function(p){for(var t\x3d{},i\x3d0;i\x3cm;++i)t[names[i]]\x3dg.dims[i];t[as[0]]\x3dp[0];t[as[1]]\x3dp[1];values.push(vegaDataflow.ingest(t))})});\nthis.value\x26\x26(out.rem\x3dthis.value);this.value\x3dout.add\x3dout.source\x3dvalues}return out};var Methods\x3d{linear:vegaStatistics.regressionLinear,log:vegaStatistics.regressionLog,exp:vegaStatistics.regressionExp,pow:vegaStatistics.regressionPow,quad:vegaStatistics.regressionQuad,poly:vegaStatistics.regressionPoly};Regression.Definition\x3d{type:\x22Regression\x22,metadata:{generates:!0},params:[{name:\x22x\x22,type:\x22field\x22,required:!0},{name:\x22y\x22,type:\x22field\x22,required:!0},{name:\x22groupby\x22,type:\x22field\x22,array:!0},{name:\x22method\x22,\ntype:\x22string\x22,\x22default\x22:\x22linear\x22,values:Object.keys(Methods)},{name:\x22order\x22,type:\x22number\x22,\x22default\x22:3},{name:\x22extent\x22,type:\x22number\x22,array:!0,length:2},{name:\x22params\x22,type:\x22boolean\x22,\x22default\x22:!1},{name:\x22as\x22,type:\x22string\x22,array:!0}]};vegaUtil.inherits(Regression,vegaDataflow.Transform).transform\x3dfunction(_,pulse){var out\x3dpulse.fork(pulse.NO_SOURCE|pulse.NO_FIELDS);if(!this.value||pulse.changed()||_.modified()){var source\x3dpulse.materialize(pulse.SOURCE).source;source\x3dpartition(source,_.groupby);var names\x3d\n(_.groupby||[]).map(vegaUtil.accessorName),method\x3d_.method||\x22linear\x22,order\x3d_.order||3,dof\x3d\x22poly\x22\x3d\x3d\x3dmethod?order:\x22quad\x22\x3d\x3d\x3dmethod?2:1,as\x3d_.as||[vegaUtil.accessorName(_.x),vegaUtil.accessorName(_.y)],fit\x3dMethods[method],values\x3d[],domain\x3d_.extent;vegaUtil.hasOwnProperty(Methods,method)||vegaUtil.error(\x22Invalid regression method: \x22+method);null!\x3ddomain\x26\x26\x22log\x22\x3d\x3d\x3dmethod\x26\x260\x3e\x3ddomain[0]\x26\x26(pulse.dataflow.warn(\x22Ignoring extent with values \\x3c\\x3d 0 for log regression.\x22),domain\x3dnull);source.forEach(function(g){if(g.length\x3c\x3d\ndof)pulse.dataflow.warn(\x22Skipping regression with more parameters than data points.\x22);else{var model\x3dfit(g,_.x,_.y,order);if(_.params)values.push(vegaDataflow.ingest({keys:g.dims,coef:model.coef,rSquared:model.rSquared}));else{var dom\x3ddomain||vegaUtil.extent(g,_.x),add\x3dfunction(p){for(var t\x3d{},i\x3d0;i\x3cnames.length;++i)t[names[i]]\x3dg.dims[i];t[as[0]]\x3dp[0];t[as[1]]\x3dp[1];values.push(vegaDataflow.ingest(t))};\x22linear\x22\x3d\x3d\x3dmethod?dom.forEach(function(x){return add([x,model.predict(x)])}):vegaStatistics.sampleCurve(model.predict,\ndom,25,200).forEach(add)}}});this.value\x26\x26(out.rem\x3dthis.value);this.value\x3dout.add\x3dout.source\x3dvalues}return out};exports.loess\x3dLoess;exports.regression\x3dRegression;Object.defineProperty(exports,\x22__esModule\x22,{value:!0})})}");
SHADOW_ENV.evalLoad("module$node_modules$d3_delaunay$dist$d3_delaunay.js", true , "shadow$provide.module$node_modules$d3_delaunay$dist$d3_delaunay\x3dfunction(global$jscomp$0,require,module,exports$jscomp$0){(function(global,factory){\x22object\x22\x3d\x3d\x3dtypeof exports$jscomp$0\x26\x26\x22undefined\x22!\x3d\x3dtypeof module?factory(exports$jscomp$0):\x22function\x22\x3d\x3d\x3dtypeof define\x26\x26define.amd?define([\x22exports\x22],factory):(global\x3dglobal||self,factory(global.d3\x3dglobal.d3||{}))})(this,function(exports){function pseudoAngle(dx,dy){dx/\x3dMath.abs(dx)+Math.abs(dy);return(0\x3cdy?3-dx:1+dx)/4}function dist(ax,ay,bx,by){ax-\x3dbx;\nay-\x3dby;return ax*ax+ay*ay}function orientIfSure(px,py,rx,ry,qx,qy){ry\x3d(ry-py)*(qx-px);px\x3d(rx-px)*(qy-py);return Math.abs(ry-px)\x3e\x3d3.3306690738754716E-16*Math.abs(ry+px)?ry-px:0}function orient(rx,ry,qx,qy,px,py){return 0\x3e(orientIfSure(px,py,rx,ry,qx,qy)||orientIfSure(rx,ry,qx,qy,px,py)||orientIfSure(qx,qy,px,py,rx,ry))}function quicksort(ids,dists,left,right){if(20\x3e\x3dright-left)for(var i\x3dleft+1;i\x3c\x3dright;i++){for(var temp\x3dids[i],tempDist\x3ddists[temp],j\x3di-1;j\x3e\x3dleft\x26\x26dists[ids[j]]\x3etempDist;)ids[j+1]\x3dids[j--];\nids[j+1]\x3dtemp}else{i\x3dleft+1;temp\x3dright;swap(ids,left+right\x3e\x3e1,i);dists[ids[left]]\x3edists[ids[right]]\x26\x26swap(ids,left,right);dists[ids[i]]\x3edists[ids[right]]\x26\x26swap(ids,i,right);dists[ids[left]]\x3edists[ids[i]]\x26\x26swap(ids,left,i);tempDist\x3dids[i];for(j\x3ddists[tempDist];;){do i++;while(dists[ids[i]]\x3cj);do temp--;while(dists[ids[temp]]\x3ej);if(temp\x3ci)break;swap(ids,i,temp)}ids[left+1]\x3dids[temp];ids[temp]\x3dtempDist;right-i+1\x3e\x3dtemp-left?(quicksort(ids,dists,i,right),quicksort(ids,dists,left,temp-1)):(quicksort(ids,\ndists,left,temp-1),quicksort(ids,dists,i,right))}}function swap(arr,i,j){var tmp\x3darr[i];arr[i]\x3darr[j];arr[j]\x3dtmp}function defaultGetX(p){return p[0]}function defaultGetY(p){return p[1]}function pointX(p){return p[0]}function pointY(p){return p[1]}function collinear$jscomp$0(d){var triangles\x3dd.triangles;d\x3dd.coords;for(var i\x3d0;i\x3ctriangles.length;i+\x3d3){var a\x3d2*triangles[i],b\x3d2*triangles[i+1],c\x3d2*triangles[i+2];if(1E-10\x3c(d[c]-d[a])*(d[b+1]-d[a+1])-(d[b]-d[a])*(d[c+1]-d[a+1]))return!1}return!0}function jitter(x,\ny,r){return[x+Math.sin(x+y)*r,y+Math.cos(x-y)*r]}function flatIterable(points,fx,fy,that){var i,$jscomp$iter$318,$jscomp$key$p,p;return $jscomp.generator.createGenerator(flatIterable,function($jscomp$generator$context){switch($jscomp$generator$context.nextAddress){case 1:i\x3d0,$jscomp$iter$318\x3d$jscomp.makeIterator(points),$jscomp$key$p\x3d$jscomp$iter$318.next();case 2:if($jscomp$key$p.done){$jscomp$generator$context.jumpTo(0);break}p\x3d$jscomp$key$p.value;return $jscomp$generator$context.yield(fx.call(that,\np,i,points),5);case 5:return $jscomp$generator$context.yield(fy.call(that,p,i,points),6);case 6:++i,$jscomp$key$p\x3d$jscomp$iter$318.next(),$jscomp$generator$context.jumpTo(2)}})}var EPSILON\x3dMath.pow(2,-52),EDGE_STACK\x3dnew Uint32Array(512),Delaunator\x3dfunction(coords){var n\x3dcoords.length\x3e\x3e1;if(0\x3cn\x26\x26\x22number\x22!\x3d\x3dtypeof coords[0])throw Error(\x22Expected coords to contain numbers.\x22);this.coords\x3dcoords;coords\x3dMath.max(2*n-5,0);this._triangles\x3dnew Uint32Array(3*coords);this._halfedges\x3dnew Int32Array(3*coords);\nthis._hashSize\x3dMath.ceil(Math.sqrt(n));this._hullPrev\x3dnew Uint32Array(n);this._hullNext\x3dnew Uint32Array(n);this._hullTri\x3dnew Uint32Array(n);this._hullHash\x3d(new Int32Array(this._hashSize)).fill(-1);this._ids\x3dnew Uint32Array(n);this._dists\x3dnew Float64Array(n);this.update()};Delaunator.from\x3dfunction(points,getX,getY){getX\x3dvoid 0\x3d\x3d\x3dgetX?defaultGetX:getX;getY\x3dvoid 0\x3d\x3d\x3dgetY?defaultGetY:getY;for(var n\x3dpoints.length,coords\x3dnew Float64Array(2*n),i\x3d0;i\x3cn;i++){var p\x3dpoints[i];coords[2*i]\x3dgetX(p);coords[2*i+\n1]\x3dgetY(p)}return new Delaunator(coords)};Delaunator.prototype.update\x3dfunction(){for(var JSCompiler_object_inline_x_6659,JSCompiler_object_inline_y_6660,coords\x3dthis.coords,hullPrev\x3dthis._hullPrev,hullNext\x3dthis._hullNext,hullTri\x3dthis._hullTri,hullHash\x3dthis._hullHash,n\x3dcoords.length\x3e\x3e1,minX\x3dInfinity,minY\x3dInfinity,maxX\x3d-Infinity,maxY\x3d-Infinity,i\x3d0;i\x3cn;i++){var x\x3dcoords[2*i];JSCompiler_object_inline_x_6659\x3dcoords[2*i+1];x\x3cminX\x26\x26(minX\x3dx);JSCompiler_object_inline_x_6659\x3cminY\x26\x26(minY\x3dJSCompiler_object_inline_x_6659);\nx\x3emaxX\x26\x26(maxX\x3dx);JSCompiler_object_inline_x_6659\x3emaxY\x26\x26(maxY\x3dJSCompiler_object_inline_x_6659);this._ids[i]\x3di}maxX\x3d(minX+maxX)/2;minY\x3d(minY+maxY)/2;minX\x3dInfinity;for(maxY\x3d0;maxY\x3cn;maxY++)if(i\x3ddist(maxX,minY,coords[2*maxY],coords[2*maxY+1]),i\x3cminX){var i0\x3dmaxY;minX\x3di}minY\x3dcoords[2*i0];maxY\x3dcoords[2*i0+1];minX\x3dInfinity;for(maxX\x3d0;maxX\x3cn;maxX++)if(maxX!\x3d\x3di0\x26\x26(i\x3ddist(minY,maxY,coords[2*maxX],coords[2*maxX+1]),i\x3cminX\x26\x260\x3ci)){var i1\x3dmaxX;minX\x3di}minX\x3dcoords[2*i1];maxX\x3dcoords[2*i1+1];JSCompiler_object_inline_x_6659\x3d\nInfinity;for(i\x3d0;i\x3cn;i++)if(i!\x3d\x3di0\x26\x26i!\x3d\x3di1){x\x3dminX-minY;var dy\x3dmaxX-maxY;JSCompiler_object_inline_y_6660\x3dcoords[2*i]-minY;var ey\x3dcoords[2*i+1]-maxY,bl\x3dx*x+dy*dy,cl\x3dJSCompiler_object_inline_y_6660*JSCompiler_object_inline_y_6660+ey*ey,d\x3d.5/(x*ey-dy*JSCompiler_object_inline_y_6660);dy\x3d(ey*bl-dy*cl)*d;x\x3d(x*cl-JSCompiler_object_inline_y_6660*bl)*d;x\x3ddy*dy+x*x;if(x\x3cJSCompiler_object_inline_x_6659){var i2\x3di;JSCompiler_object_inline_x_6659\x3dx}}i\x3dcoords[2*i2];x\x3dcoords[2*i2+1];if(Infinity\x3d\x3d\x3dJSCompiler_object_inline_x_6659){for(hullNext\x3d\n0;hullNext\x3cn;hullNext++)this._dists[hullNext]\x3dcoords[2*hullNext]-coords[0]||coords[2*hullNext+1]-coords[1];quicksort(this._ids,this._dists,0,n-1);hullNext\x3dnew Uint32Array(n);hullPrev\x3dcoords\x3d0;for(hullTri\x3d-Infinity;hullPrev\x3cn;hullPrev++)hullHash\x3dthis._ids[hullPrev],this._dists[hullHash]\x3ehullTri\x26\x26(hullNext[coords++]\x3dhullHash,hullTri\x3dthis._dists[hullHash]);this.hull\x3dhullNext.subarray(0,coords);this.triangles\x3dnew Uint32Array(0);this.halfedges\x3dnew Uint32Array(0)}else{orient(minY,maxY,minX,maxX,i,x)\x26\x26(JSCompiler_object_inline_x_6659\x3d\ni1,JSCompiler_object_inline_y_6660\x3dminX,bl\x3dmaxX,i1\x3di2,minX\x3di,maxX\x3dx,i2\x3dJSCompiler_object_inline_x_6659,i\x3dJSCompiler_object_inline_y_6660,x\x3dbl);JSCompiler_object_inline_y_6660\x3dminX-minY;JSCompiler_object_inline_x_6659\x3dmaxX-maxY;bl\x3di-minY;ey\x3dx-maxY;cl\x3dJSCompiler_object_inline_y_6660*JSCompiler_object_inline_y_6660+JSCompiler_object_inline_x_6659*JSCompiler_object_inline_x_6659;d\x3dbl*bl+ey*ey;dy\x3d.5/(JSCompiler_object_inline_y_6660*ey-JSCompiler_object_inline_x_6659*bl);JSCompiler_object_inline_x_6659\x3d\nminY+(ey*cl-JSCompiler_object_inline_x_6659*d)*dy;JSCompiler_object_inline_y_6660\x3dmaxY+(JSCompiler_object_inline_y_6660*d-bl*cl)*dy;this._cx\x3dJSCompiler_object_inline_x_6659;this._cy\x3dJSCompiler_object_inline_y_6660;for(bl\x3d0;bl\x3cn;bl++)this._dists[bl]\x3ddist(coords[2*bl],coords[2*bl+1],JSCompiler_object_inline_x_6659,JSCompiler_object_inline_y_6660);quicksort(this._ids,this._dists,0,n-1);this._hullStart\x3di0;n\x3d3;hullNext[i0]\x3dhullPrev[i2]\x3di1;hullNext[i1]\x3dhullPrev[i0]\x3di2;hullNext[i2]\x3dhullPrev[i1]\x3di0;hullTri[i0]\x3d\n0;hullTri[i1]\x3d1;hullTri[i2]\x3d2;hullHash.fill(-1);hullHash[this._hashKey(minY,maxY)]\x3di0;hullHash[this._hashKey(minX,maxX)]\x3di1;hullHash[this._hashKey(i,x)]\x3di2;this.trianglesLen\x3d0;this._addTriangle(i0,i1,i2,-1,-1,-1);minY\x3d0;for(minX\x3dmaxY\x3dvoid 0;minY\x3cthis._ids.length;minY++)if(maxX\x3dthis._ids[minY],i\x3dcoords[2*maxX],x\x3dcoords[2*maxX+1],!(0\x3cminY\x26\x26Math.abs(i-maxY)\x3c\x3dEPSILON\x26\x26Math.abs(x-minX)\x3c\x3dEPSILON)\x26\x26(maxY\x3di,minX\x3dx,maxX!\x3d\x3di0\x26\x26maxX!\x3d\x3di1\x26\x26maxX!\x3d\x3di2)){JSCompiler_object_inline_y_6660\x3dJSCompiler_object_inline_x_6659\x3d\n0;for(bl\x3dthis._hashKey(i,x);JSCompiler_object_inline_y_6660\x3cthis._hashSize\x26\x26(JSCompiler_object_inline_x_6659\x3dhullHash[(bl+JSCompiler_object_inline_y_6660)%this._hashSize],-1\x3d\x3d\x3dJSCompiler_object_inline_x_6659||JSCompiler_object_inline_x_6659\x3d\x3d\x3dhullNext[JSCompiler_object_inline_x_6659]);JSCompiler_object_inline_y_6660++);JSCompiler_object_inline_y_6660\x3dJSCompiler_object_inline_x_6659\x3dhullPrev[JSCompiler_object_inline_x_6659];for(bl\x3dvoid 0;bl\x3dhullNext[JSCompiler_object_inline_y_6660],!orient(i,x,coords[2*\nJSCompiler_object_inline_y_6660],coords[2*JSCompiler_object_inline_y_6660+1],coords[2*bl],coords[2*bl+1]);)if(JSCompiler_object_inline_y_6660\x3dbl,JSCompiler_object_inline_y_6660\x3d\x3d\x3dJSCompiler_object_inline_x_6659){JSCompiler_object_inline_y_6660\x3d-1;break}if(-1!\x3d\x3dJSCompiler_object_inline_y_6660){cl\x3dthis._addTriangle(JSCompiler_object_inline_y_6660,maxX,hullNext[JSCompiler_object_inline_y_6660],-1,-1,hullTri[JSCompiler_object_inline_y_6660]);hullTri[maxX]\x3dthis._legalize(cl+2);hullTri[JSCompiler_object_inline_y_6660]\x3d\ncl;n++;for(d\x3dhullNext[JSCompiler_object_inline_y_6660];bl\x3dhullNext[d],orient(i,x,coords[2*d],coords[2*d+1],coords[2*bl],coords[2*bl+1]);)cl\x3dthis._addTriangle(d,maxX,bl,hullTri[maxX],-1,hullTri[d]),hullTri[maxX]\x3dthis._legalize(cl+2),hullNext[d]\x3dd,n--,d\x3dbl;if(JSCompiler_object_inline_y_6660\x3d\x3d\x3dJSCompiler_object_inline_x_6659)for(;bl\x3dhullPrev[JSCompiler_object_inline_y_6660],orient(i,x,coords[2*bl],coords[2*bl+1],coords[2*JSCompiler_object_inline_y_6660],coords[2*JSCompiler_object_inline_y_6660+1]);)cl\x3d\nthis._addTriangle(bl,maxX,JSCompiler_object_inline_y_6660,-1,hullTri[JSCompiler_object_inline_y_6660],hullTri[bl]),this._legalize(cl+2),hullTri[bl]\x3dcl,hullNext[JSCompiler_object_inline_y_6660]\x3dJSCompiler_object_inline_y_6660,n--,JSCompiler_object_inline_y_6660\x3dbl;this._hullStart\x3dhullPrev[maxX]\x3dJSCompiler_object_inline_y_6660;hullNext[JSCompiler_object_inline_y_6660]\x3dhullPrev[d]\x3dmaxX;hullNext[maxX]\x3dd;hullHash[this._hashKey(i,x)]\x3dmaxX;hullHash[this._hashKey(coords[2*JSCompiler_object_inline_y_6660],\ncoords[2*JSCompiler_object_inline_y_6660+1])]\x3dJSCompiler_object_inline_y_6660}}this.hull\x3dnew Uint32Array(n);coords\x3d0;for(hullPrev\x3dthis._hullStart;coords\x3cn;coords++)this.hull[coords]\x3dhullPrev,hullPrev\x3dhullNext[hullPrev];this.triangles\x3dthis._triangles.subarray(0,this.trianglesLen);this.halfedges\x3dthis._halfedges.subarray(0,this.trianglesLen)}};Delaunator.prototype._hashKey\x3dfunction(x,y){return Math.floor(pseudoAngle(x-this._cx,y-this._cy)*this._hashSize)%this._hashSize};Delaunator.prototype._legalize\x3d\nfunction(a){for(var triangles\x3dthis._triangles,halfedges\x3dthis._halfedges,coords\x3dthis.coords,i\x3d0,ar;;){var b\x3dhalfedges[a],a0\x3da-a%3;ar\x3da0+(a+2)%3;if(-1\x3d\x3d\x3db){if(0\x3d\x3d\x3di)break;a\x3dEDGE_STACK[--i]}else{var b0\x3db-b%3,bl\x3db0+(b+2)%3,p0\x3dtriangles[ar],pr\x3dtriangles[a],pl\x3dtriangles[a0+(a+1)%3];a0\x3dtriangles[bl];var px\x3dcoords[2*a0],py\x3dcoords[2*a0+1],dx\x3dcoords[2*p0]-px,dy\x3dcoords[2*p0+1]-py,ex\x3dcoords[2*pr]-px;pr\x3dcoords[2*pr+1]-py;px\x3dcoords[2*pl]-px;pl\x3dcoords[2*pl+1]-py;py\x3dex*ex+pr*pr;var cp\x3dpx*px+pl*pl;if(0\x3edx*(pr*cp-\npy*pl)-dy*(ex*cp-py*px)+(dx*dx+dy*dy)*(ex*pl-pr*px)){triangles[a]\x3da0;triangles[b]\x3dp0;p0\x3dhalfedges[bl];if(-1\x3d\x3d\x3dp0){a0\x3dthis._hullStart;do{if(this._hullTri[a0]\x3d\x3d\x3dbl){this._hullTri[a0]\x3da;break}a0\x3dthis._hullPrev[a0]}while(a0!\x3d\x3dthis._hullStart)}this._link(a,p0);this._link(b,halfedges[ar]);this._link(ar,bl);ar\x3db0+(b+1)%3;i\x3cEDGE_STACK.length\x26\x26(EDGE_STACK[i++]\x3dar)}else{if(0\x3d\x3d\x3di)break;a\x3dEDGE_STACK[--i]}}}return ar};Delaunator.prototype._link\x3dfunction(a,b){this._halfedges[a]\x3db;-1!\x3d\x3db\x26\x26(this._halfedges[b]\x3da)};\nDelaunator.prototype._addTriangle\x3dfunction(i0,i1,i2,a,b,c){var t\x3dthis.trianglesLen;this._triangles[t]\x3di0;this._triangles[t+1]\x3di1;this._triangles[t+2]\x3di2;this._link(t,a);this._link(t+1,b);this._link(t+2,c);this.trianglesLen+\x3d3;return t};var Path\x3dfunction(){this._x0\x3dthis._y0\x3dthis._x1\x3dthis._y1\x3dnull;this._\x3d\x22\x22};Path.prototype.moveTo\x3dfunction(x,y){this._+\x3d\x22M\x22+(this._x0\x3dthis._x1\x3d+x)+\x22,\x22+(this._y0\x3dthis._y1\x3d+y)};Path.prototype.closePath\x3dfunction(){null!\x3d\x3dthis._x1\x26\x26(this._x1\x3dthis._x0,this._y1\x3dthis._y0,this._+\x3d\n\x22Z\x22)};Path.prototype.lineTo\x3dfunction(x,y){this._+\x3d\x22L\x22+(this._x1\x3d+x)+\x22,\x22+(this._y1\x3d+y)};Path.prototype.arc\x3dfunction(x,y,r){x\x3d+x;y\x3d+y;r\x3d+r;var x0\x3dx+r,y0\x3dy;if(0\x3er)throw Error(\x22negative radius\x22);if(null\x3d\x3d\x3dthis._x1)this._+\x3d\x22M\x22+x0+\x22,\x22+y0;else if(1E-6\x3cMath.abs(this._x1-x0)||1E-6\x3cMath.abs(this._y1-y0))this._+\x3d\x22L\x22+x0+\x22,\x22+y0;r\x26\x26(this._+\x3d\x22A\x22+r+\x22,\x22+r+\x22,0,1,1,\x22+(x-r)+\x22,\x22+y+\x22A\x22+r+\x22,\x22+r+\x22,0,1,1,\x22+(this._x1\x3dx0)+\x22,\x22+(this._y1\x3dy0))};Path.prototype.rect\x3dfunction(x,y,w,h){this._+\x3d\x22M\x22+(this._x0\x3dthis._x1\x3d+x)+\x22,\x22+(this._y0\x3d\nthis._y1\x3d+y)+\x22h\x22+ +w+\x22v\x22+ +h+\x22h\x22+-w+\x22Z\x22};Path.prototype.value\x3dfunction(){return this._||null};var Polygon\x3dfunction(){this._\x3d[]};Polygon.prototype.moveTo\x3dfunction(x,y){this._.push([x,y])};Polygon.prototype.closePath\x3dfunction(){this._.push(this._[0].slice())};Polygon.prototype.lineTo\x3dfunction(x,y){this._.push([x,y])};Polygon.prototype.value\x3dfunction(){return this._.length?this._:null};var Voronoi\x3dfunction(delaunay,$jscomp$destructuring$var438){var $jscomp$destructuring$var439\x3d$jscomp.makeIterator(void 0\x3d\x3d\x3d\n$jscomp$destructuring$var438?[0,0,960,500]:$jscomp$destructuring$var438);$jscomp$destructuring$var438\x3d$jscomp$destructuring$var439.next().value;var ymin\x3d$jscomp$destructuring$var439.next().value,xmax\x3d$jscomp$destructuring$var439.next().value;$jscomp$destructuring$var439\x3d$jscomp$destructuring$var439.next().value;if(!((xmax\x3d+xmax)\x3e\x3d($jscomp$destructuring$var438\x3d+$jscomp$destructuring$var438)\x26\x26($jscomp$destructuring$var439\x3d+$jscomp$destructuring$var439)\x3e\x3d(ymin\x3d+ymin)))throw Error(\x22invalid bounds\x22);this.delaunay\x3d\ndelaunay;this._circumcenters\x3dnew Float64Array(2*delaunay.points.length);this.vectors\x3dnew Float64Array(2*delaunay.points.length);this.xmax\x3dxmax;this.xmin\x3d$jscomp$destructuring$var438;this.ymax\x3d$jscomp$destructuring$var439;this.ymin\x3dymin;this._init()};Voronoi.prototype.update\x3dfunction(){this.delaunay.update();this._init();return this};Voronoi.prototype._init\x3dfunction(){var $jscomp$destructuring$var441\x3dthis.delaunay,points\x3d$jscomp$destructuring$var441.points,hull\x3d$jscomp$destructuring$var441.hull,triangles\x3d\n$jscomp$destructuring$var441.triangles;$jscomp$destructuring$var441\x3dthis.vectors;for(var circumcenters\x3dthis.circumcenters\x3dthis._circumcenters.subarray(0,triangles.length/3*2),i\x3d0,j\x3d0,n\x3dtriangles.length,x,y;i\x3cn;i+\x3d3,j+\x3d2){y\x3d2*triangles[i];var t2\x3d2*triangles[i+1],t3\x3d2*triangles[i+2];x\x3dpoints[y];y\x3dpoints[y+1];var x3\x3dpoints[t3],y3\x3dpoints[t3+1];t3\x3dpoints[t2]-x;var dy\x3dpoints[t2+1]-y;t2\x3dx3-x;var ey\x3dy3-y,bl\x3dt3*t3+dy*dy,cl\x3dt2*t2+ey*ey,ab\x3d2*(t3*ey-dy*t2);ab?1E-8\x3eMath.abs(ab)?(x\x3d(x+x3)/2,y\x3d(y+y3)/2):(x3\x3d1/ab,\nx+\x3d(ey*bl-dy*cl)*x3,y+\x3d(t3*cl-t2*bl)*x3):(x\x3d(x+x3)/2-1E8*ey,y\x3d(y+y3)/2+1E8*t2);circumcenters[j]\x3dx;circumcenters[j+1]\x3dy}triangles\x3dhull[hull.length-1];i\x3d4*triangles;n\x3dpoints[2*triangles];y\x3dpoints[2*triangles+1];$jscomp$destructuring$var441.fill(0);for(t3\x3d0;t3\x3chull.length;++t3)triangles\x3dhull[t3],circumcenters\x3di,j\x3dn,x\x3dy,i\x3d4*triangles,n\x3dpoints[2*triangles],y\x3dpoints[2*triangles+1],$jscomp$destructuring$var441[circumcenters+2]\x3d$jscomp$destructuring$var441[i]\x3dx-y,$jscomp$destructuring$var441[circumcenters+\n3]\x3d$jscomp$destructuring$var441[i+1]\x3dn-j};Voronoi.prototype.render\x3dfunction(context){var buffer\x3dnull\x3d\x3dcontext?context\x3dnew Path:void 0,$jscomp$destructuring$var443\x3dthis.delaunay,halfedges\x3d$jscomp$destructuring$var443.halfedges,inedges\x3d$jscomp$destructuring$var443.inedges;$jscomp$destructuring$var443\x3d$jscomp$destructuring$var443.hull;var circumcenters\x3dthis.circumcenters,vectors\x3dthis.vectors;if(1\x3e\x3d$jscomp$destructuring$var443.length)return null;for(var i\x3d0,n\x3dhalfedges.length;i\x3cn;++i){var j\x3dhalfedges[i];\nif(!(j\x3ci)){var ti\x3d2*Math.floor(i/3);j\x3d2*Math.floor(j/3);this._renderSegment(circumcenters[ti],circumcenters[ti+1],circumcenters[j],circumcenters[j+1],context)}}halfedges\x3d$jscomp$destructuring$var443[$jscomp$destructuring$var443.length-1];for(i\x3d0;i\x3c$jscomp$destructuring$var443.length;++i)j\x3dhalfedges,halfedges\x3d$jscomp$destructuring$var443[i],ti\x3d2*Math.floor(inedges[halfedges]/3),n\x3dcircumcenters[ti],ti\x3dcircumcenters[ti+1],j*\x3d4,(j\x3dthis._project(n,ti,vectors[j+2],vectors[j+3]))\x26\x26this._renderSegment(n,\nti,j[0],j[1],context);return buffer\x26\x26buffer.value()};Voronoi.prototype.renderBounds\x3dfunction(context){var buffer\x3dnull\x3d\x3dcontext?context\x3dnew Path:void 0;context.rect(this.xmin,this.ymin,this.xmax-this.xmin,this.ymax-this.ymin);return buffer\x26\x26buffer.value()};Voronoi.prototype.renderCell\x3dfunction(i,context){var buffer\x3dnull\x3d\x3dcontext?context\x3dnew Path:void 0;i\x3dthis._clip(i);if(null!\x3d\x3di\x26\x26i.length){context.moveTo(i[0],i[1]);for(var n\x3di.length;i[0]\x3d\x3d\x3di[n-2]\x26\x26i[1]\x3d\x3d\x3di[n-1]\x26\x261\x3cn;)n-\x3d2;for(var i$649\x3d2;i$649\x3cn;i$649+\x3d\n2)i[i$649]\x3d\x3d\x3di[i$649-2]\x26\x26i[i$649+1]\x3d\x3d\x3di[i$649-1]||context.lineTo(i[i$649],i[i$649+1]);context.closePath();return buffer\x26\x26buffer.value()}};Voronoi.prototype.cellPolygons\x3dfunction $jscomp$generator$function(){var $jscomp$generator$this\x3dthis,$jscomp$destructuring$var444,$jscomp$destructuring$var445,points,i,n,cell;return $jscomp.generator.createGenerator($jscomp$generator$function,function($jscomp$generator$context){switch($jscomp$generator$context.nextAddress){case 1:$jscomp$destructuring$var444\x3d$jscomp$generator$this,\n$jscomp$destructuring$var445\x3d$jscomp$destructuring$var444.delaunay,points\x3d$jscomp$destructuring$var445.points,i\x3d0,n\x3dpoints.length/2;case 2:if(!(i\x3cn)){$jscomp$generator$context.jumpTo(0);break}cell\x3d$jscomp$generator$this.cellPolygon(i);if(!cell){$jscomp$generator$context.jumpTo(3);break}cell.index\x3di;return $jscomp$generator$context.yield(cell,6);case 6:case 3:++i,$jscomp$generator$context.jumpTo(2)}})};Voronoi.prototype.cellPolygon\x3dfunction(i){var polygon\x3dnew Polygon;this.renderCell(i,polygon);return polygon.value()};\nVoronoi.prototype._renderSegment\x3dfunction(x0,y0,x1,y1,context){var c0\x3dthis._regioncode(x0,y0),c1\x3dthis._regioncode(x1,y1);if(0\x3d\x3d\x3dc0\x26\x260\x3d\x3d\x3dc1)context.moveTo(x0,y0),context.lineTo(x1,y1);else if(x0\x3dthis._clipSegment(x0,y0,x1,y1,c0,c1))context.moveTo(x0[0],x0[1]),context.lineTo(x0[2],x0[3])};Voronoi.prototype.contains\x3dfunction(i,x,y){return(x\x3d+x,x!\x3d\x3dx)||(y\x3d+y,y!\x3d\x3dy)?!1:this.delaunay._step(i,x,y)\x3d\x3d\x3di};Voronoi.prototype.neighbors\x3dfunction $jscomp$generator$function(i){var $jscomp$generator$this\x3dthis,ci,\n$jscomp$iter$317,$jscomp$key$j,j,cj,ai,li,aj,lj;return $jscomp.generator.createGenerator($jscomp$generator$function,function($jscomp$generator$context){switch($jscomp$generator$context.nextAddress){case 1:ci\x3d$jscomp$generator$this._clip(i);if(!ci){$jscomp$generator$context.jumpTo(0);break}$jscomp$iter$317\x3d$jscomp.makeIterator($jscomp$generator$this.delaunay.neighbors(i));$jscomp$key$j\x3d$jscomp$iter$317.next();case 3:if($jscomp$key$j.done){$jscomp$generator$context.jumpTo(0);break}j\x3d$jscomp$key$j.value;\ncj\x3d$jscomp$generator$this._clip(j);if(!cj){$jscomp$generator$context.jumpTo(4);break}ai\x3d0;li\x3dci.length;case 9:if(!(ai\x3cli)){$jscomp$generator$context.jumpTo(4);break}aj\x3d0;lj\x3dcj.length;case 10:if(!(aj\x3clj)){ai+\x3d2;$jscomp$generator$context.jumpTo(9);break}if(ci[ai]!\x3dcj[aj]||ci[ai+1]!\x3dcj[aj+1]||ci[(ai+2)%li]!\x3dcj[(aj+lj-2)%lj]||ci[(ai+3)%li]!\x3dcj[(aj+lj-1)%lj]){$jscomp$generator$context.jumpTo(11);break}return $jscomp$generator$context.yield(j,14);case 14:$jscomp$generator$context.jumpTo(4);break;case 11:aj+\x3d\n2;$jscomp$generator$context.jumpTo(10);break;case 4:$jscomp$key$j\x3d$jscomp$iter$317.next(),$jscomp$generator$context.jumpTo(3)}})};Voronoi.prototype._cell\x3dfunction(i){var circumcenters\x3dthis.circumcenters,$jscomp$destructuring$var447\x3dthis.delaunay,halfedges\x3d$jscomp$destructuring$var447.halfedges,triangles\x3d$jscomp$destructuring$var447.triangles;$jscomp$destructuring$var447\x3d$jscomp$destructuring$var447.inedges[i];if(-1\x3d\x3d\x3d$jscomp$destructuring$var447)return null;var points\x3d[],e\x3d$jscomp$destructuring$var447;\ndo{var t\x3dMath.floor(e/3);points.push(circumcenters[2*t],circumcenters[2*t+1]);e\x3d2\x3d\x3d\x3de%3?e-2:e+1;if(triangles[e]!\x3d\x3di)break;e\x3dhalfedges[e]}while(e!\x3d\x3d$jscomp$destructuring$var447\x26\x26-1!\x3d\x3de);return points};Voronoi.prototype._clip\x3dfunction(i){if(0\x3d\x3d\x3di\x26\x261\x3d\x3d\x3dthis.delaunay.hull.length)return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];var points\x3dthis._cell(i);if(null\x3d\x3d\x3dpoints)return null;var V\x3dthis.vectors,v\x3d4*i;return V[v]||V[v+1]?this._clipInfinite(i,points,V[v],V[v+1],\nV[v+2],V[v+3]):this._clipFinite(i,points)};Voronoi.prototype._clipFinite\x3dfunction(i,points){for(var n\x3dpoints.length,P\x3dnull,x0,y0,x1\x3dpoints[n-2],y1\x3dpoints[n-1],c0,c1\x3dthis._regioncode(x1,y1),e0,e1,j\x3d0;j\x3cn;j+\x3d2)if(x0\x3dx1,y0\x3dy1,x1\x3dpoints[j],y1\x3dpoints[j+1],c0\x3dc1,c1\x3dthis._regioncode(x1,y1),0\x3d\x3d\x3dc0\x26\x260\x3d\x3d\x3dc1)e1\x3d0,P?P.push(x1,y1):P\x3d[x1,y1];else{if(0\x3d\x3d\x3dc0){if(null\x3d\x3d\x3d(x0\x3dthis._clipSegment(x0,y0,x1,y1,c0,c1)))continue;y0\x3d$jscomp.makeIterator(x0);y0.next();y0.next();x0\x3dy0.next().value;c0\x3dy0.next().value}else{if(null\x3d\x3d\x3d\n(x0\x3dthis._clipSegment(x1,y1,x0,y0,c1,c0)))continue;e0\x3d$jscomp.makeIterator(x0);x0\x3de0.next().value;c0\x3de0.next().value;y0\x3de0.next().value;var sy0\x3de0.next().value;e0\x3de1;e1\x3dthis._edgecode(y0,sy0);e0\x26\x26e1\x26\x26this._edge(i,e0,e1,P,P.length);P?P.push(y0,sy0):P\x3d[y0,sy0]}e0\x3de1;e1\x3dthis._edgecode(x0,c0);e0\x26\x26e1\x26\x26this._edge(i,e0,e1,P,P.length);P?P.push(x0,c0):P\x3d[x0,c0]}if(P)e0\x3de1,e1\x3dthis._edgecode(P[0],P[1]),e0\x26\x26e1\x26\x26this._edge(i,e0,e1,P,P.length);else if(this.contains(i,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/\n2))return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];return P};Voronoi.prototype._clipSegment\x3dfunction(x0,y0,x1,y1,c0,c1){for(;;){if(0\x3d\x3d\x3dc0\x26\x260\x3d\x3d\x3dc1)return[x0,y0,x1,y1];if(c0\x26c1)return null;var x\x3dc0||c1;if(x\x268){x\x3dx0+(x1-x0)*(this.ymax-y0)/(y1-y0);var y\x3dthis.ymax}else x\x264?(x\x3dx0+(x1-x0)*(this.ymin-y0)/(y1-y0),y\x3dthis.ymin):x\x262?(y\x3dy0+(y1-y0)*(this.xmax-x0)/(x1-x0),x\x3dthis.xmax):(y\x3dy0+(y1-y0)*(this.xmin-x0)/(x1-x0),x\x3dthis.xmin);c0?(x0\x3dx,y0\x3dy,c0\x3dthis._regioncode(x0,y0)):\n(x1\x3dx,y1\x3dy,c1\x3dthis._regioncode(x1,y1))}};Voronoi.prototype._clipInfinite\x3dfunction(i,points,vx0,vy0,vxn,vyn){points\x3dArray.from(points);var p;(p\x3dthis._project(points[0],points[1],vx0,vy0))\x26\x26points.unshift(p[0],p[1]);(p\x3dthis._project(points[points.length-2],points[points.length-1],vxn,vyn))\x26\x26points.push(p[0],p[1]);if(points\x3dthis._clipFinite(i,points))for(vx0\x3d0,vy0\x3dpoints.length,vyn\x3dthis._edgecode(points[vy0-2],points[vy0-1]);vx0\x3cvy0;vx0+\x3d2)vxn\x3dvyn,vyn\x3dthis._edgecode(points[vx0],points[vx0+1]),vxn\x26\x26vyn\x26\x26\n(vx0\x3dthis._edge(i,vxn,vyn,points,vx0),vy0\x3dpoints.length);else this.contains(i,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2)\x26\x26(points\x3d[this.xmin,this.ymin,this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax]);return points};Voronoi.prototype._edge\x3dfunction(i,e0,e1,P,j){for(;e0!\x3d\x3de1;){var x\x3dvoid 0,y\x3dvoid 0;switch(e0){case 5:e0\x3d4;continue;case 4:e0\x3d6;x\x3dthis.xmax;y\x3dthis.ymin;break;case 6:e0\x3d2;continue;case 2:e0\x3d10;x\x3dthis.xmax;y\x3dthis.ymax;break;case 10:e0\x3d8;continue;case 8:e0\x3d9;x\x3dthis.xmin;\ny\x3dthis.ymax;break;case 9:e0\x3d1;continue;case 1:e0\x3d5,x\x3dthis.xmin,y\x3dthis.ymin}P[j]\x3d\x3d\x3dx\x26\x26P[j+1]\x3d\x3d\x3dy||!this.contains(i,x,y)||(P.splice(j,0,x,y),j+\x3d2)}if(4\x3cP.length)for(i\x3d0;i\x3cP.length;i+\x3d2)if(e0\x3d(i+2)%P.length,e1\x3d(i+4)%P.length,P[i]\x3d\x3d\x3dP[e0]\x26\x26P[e0]\x3d\x3d\x3dP[e1]||P[i+1]\x3d\x3d\x3dP[e0+1]\x26\x26P[e0+1]\x3d\x3d\x3dP[e1+1])P.splice(e0,2),i-\x3d2;return j};Voronoi.prototype._project\x3dfunction(x0,y0,vx,vy){var t\x3dInfinity,c;if(0\x3evy){if(y0\x3c\x3dthis.ymin)return null;if((c\x3d(this.ymin-y0)/vy)\x3ct){var y\x3dthis.ymin;var x\x3dx0+(t\x3dc)*vx}}else if(0\x3cvy){if(y0\x3e\x3d\nthis.ymax)return null;(c\x3d(this.ymax-y0)/vy)\x3ct\x26\x26(y\x3dthis.ymax,x\x3dx0+(t\x3dc)*vx)}if(0\x3cvx){if(x0\x3e\x3dthis.xmax)return null;(c\x3d(this.xmax-x0)/vx)\x3ct\x26\x26(x\x3dthis.xmax,y\x3dy0+c*vy)}else if(0\x3evx){if(x0\x3c\x3dthis.xmin)return null;(c\x3d(this.xmin-x0)/vx)\x3ct\x26\x26(x\x3dthis.xmin,y\x3dy0+c*vy)}return[x,y]};Voronoi.prototype._edgecode\x3dfunction(x,y){return(x\x3d\x3d\x3dthis.xmin?1:x\x3d\x3d\x3dthis.xmax?2:0)|(y\x3d\x3d\x3dthis.ymin?4:y\x3d\x3d\x3dthis.ymax?8:0)};Voronoi.prototype._regioncode\x3dfunction(x,y){return(x\x3cthis.xmin?1:x\x3ethis.xmax?2:0)|(y\x3cthis.ymin?4:y\x3ethis.ymax?8:0)};\nvar tau\x3d2*Math.PI,pow\x3dMath.pow,Delaunay\x3dfunction(points){this._delaunator\x3dnew Delaunator(points);this.inedges\x3dnew Int32Array(points.length/2);this._hullIndex\x3dnew Int32Array(points.length/2);this.points\x3dthis._delaunator.coords;this._init()};Delaunay.from\x3dfunction(points,fx,fy,that){fx\x3dvoid 0\x3d\x3d\x3dfx?pointX:fx;fy\x3dvoid 0\x3d\x3d\x3dfy?pointY:fy;if(\x22length\x22in points){for(var n\x3dpoints.length,array\x3dnew Float64Array(2*n),i\x3d0;i\x3cn;++i){var p\x3dpoints[i];array[2*i]\x3dfx.call(that,p,i,points);array[2*i+1]\x3dfy.call(that,p,i,\npoints)}points\x3darray}else points\x3dFloat64Array.from(flatIterable(points,fx,fy,that));return new Delaunay(points)};Delaunay.prototype.update\x3dfunction(){this._delaunator.update();this._init();return this};Delaunay.prototype._init\x3dfunction(){var d\x3dthis._delaunator,points\x3dthis.points;if(d.hull\x26\x262\x3cd.hull.length\x26\x26collinear$jscomp$0(d)){this.collinear\x3dInt32Array.from({length:points.length/2},function(_,i){return i}).sort(function(i,j){return points[2*i]-points[2*j]||points[2*i+1]-points[2*j+1]});d\x3dthis.collinear[0];\nvar f\x3dthis.collinear[this.collinear.length-1];d\x3d[points[2*d],points[2*d+1],points[2*f],points[2*f+1]];d\x3d1E-8*Math.hypot(d[3]-d[1],d[2]-d[0]);f\x3d0;for(var n\x3dpoints.length/2;f\x3cn;++f){var p\x3djitter(points[2*f],points[2*f+1],d);points[2*f]\x3dp[0];points[2*f+1]\x3dp[1]}this._delaunator\x3dnew Delaunator(points)}else delete this.collinear;p\x3dthis.halfedges\x3dthis._delaunator.halfedges;d\x3dthis.hull\x3dthis._delaunator.hull;var triangles\x3dthis.triangles\x3dthis._delaunator.triangles;f\x3dthis.inedges.fill(-1);n\x3dthis._hullIndex.fill(-1);\nfor(var e$652\x3d0,n$653\x3dp.length;e$652\x3cn$653;++e$652){var p$654\x3dtriangles[2\x3d\x3d\x3de$652%3?e$652-2:e$652+1];if(-1\x3d\x3d\x3dp[e$652]||-1\x3d\x3d\x3df[p$654])f[p$654]\x3de$652}p\x3d0;for(triangles\x3dd.length;p\x3ctriangles;++p)n[d[p]]\x3dp;2\x3e\x3dd.length\x26\x260\x3cd.length\x26\x26(this.triangles\x3d(new Int32Array(3)).fill(-1),this.halfedges\x3d(new Int32Array(3)).fill(-1),this.triangles[0]\x3dd[0],this.triangles[1]\x3dd[1],this.triangles[2]\x3dd[1],f[d[0]]\x3d1,2\x3d\x3d\x3dd.length\x26\x26(f[d[1]]\x3d0))};Delaunay.prototype.voronoi\x3dfunction(bounds){return new Voronoi(this,bounds)};Delaunay.prototype.neighbors\x3d\nfunction $jscomp$generator$function(i){var $jscomp$generator$this\x3dthis,$jscomp$destructuring$var452,inedges,hull,_hullIndex,halfedges,triangles,collinear,l,e0,e,p0,p;return $jscomp.generator.createGenerator($jscomp$generator$function,function($jscomp$generator$context){switch($jscomp$generator$context.nextAddress){case 1:$jscomp$destructuring$var452\x3d$jscomp$generator$this;inedges\x3d$jscomp$destructuring$var452.inedges;hull\x3d$jscomp$destructuring$var452.hull;_hullIndex\x3d$jscomp$destructuring$var452._hullIndex;\nhalfedges\x3d$jscomp$destructuring$var452.halfedges;triangles\x3d$jscomp$destructuring$var452.triangles;collinear\x3d$jscomp$destructuring$var452.collinear;if(!collinear){$jscomp$generator$context.jumpTo(2);break}l\x3dcollinear.indexOf(i);if(!(0\x3cl)){$jscomp$generator$context.jumpTo(3);break}return $jscomp$generator$context.yield(collinear[l-1],3);case 3:if(!(l\x3ccollinear.length-1)){$jscomp$generator$context.jumpTo(5);break}return $jscomp$generator$context.yield(collinear[l+1],5);case 5:return $jscomp$generator$context.return();\ncase 2:e0\x3dinedges[i];if(-1\x3d\x3d\x3de0)return $jscomp$generator$context.return();e\x3de0;p0\x3d-1;case 7:return $jscomp$generator$context.yield(p0\x3dtriangles[e],10);case 10:e\x3d2\x3d\x3d\x3de%3?e-2:e+1;if(triangles[e]!\x3d\x3di)return $jscomp$generator$context.return();e\x3dhalfedges[e];if(-1!\x3d\x3de){$jscomp$generator$context.jumpTo(9);break}p\x3dhull[(_hullIndex[i]+1)%hull.length];if(p\x3d\x3d\x3dp0){$jscomp$generator$context.jumpTo(12);break}return $jscomp$generator$context.yield(p,12);case 12:return $jscomp$generator$context.return();case 9:e!\x3d\x3d\ne0?$jscomp$generator$context.jumpTo(7):$jscomp$generator$context.jumpToEnd()}})};Delaunay.prototype.find\x3dfunction(x,y,i){i\x3dvoid 0\x3d\x3d\x3di?0:i;if((x\x3d+x,x!\x3d\x3dx)||(y\x3d+y,y!\x3d\x3dy))return-1;for(var i0\x3di,c;0\x3c\x3d(c\x3dthis._step(i,x,y))\x26\x26c!\x3d\x3di\x26\x26c!\x3d\x3di0;)i\x3dc;return c};Delaunay.prototype._step\x3dfunction(i,x,y){var inedges\x3dthis.inedges,hull\x3dthis.hull,_hullIndex\x3dthis._hullIndex,halfedges\x3dthis.halfedges,triangles\x3dthis.triangles,points\x3dthis.points;if(-1\x3d\x3d\x3dinedges[i]||!points.length)return(i+1)%(points.length\x3e\x3e1);var c\x3di,dc\x3d\npow(x-points[2*i],2)+pow(y-points[2*i+1],2),e\x3dinedges\x3dinedges[i];do{var t\x3dtriangles[e],dt\x3dpow(x-points[2*t],2)+pow(y-points[2*t+1],2);dt\x3cdc\x26\x26(dc\x3ddt,c\x3dt);e\x3d2\x3d\x3d\x3de%3?e-2:e+1;if(triangles[e]!\x3d\x3di)break;e\x3dhalfedges[e];if(-1\x3d\x3d\x3de){e\x3dhull[(_hullIndex[i]+1)%hull.length];if(e!\x3d\x3dt\x26\x26pow(x-points[2*e],2)+pow(y-points[2*e+1],2)\x3cdc)return e;break}}while(e!\x3d\x3dinedges);return c};Delaunay.prototype.render\x3dfunction(context){for(var buffer\x3dnull\x3d\x3dcontext?context\x3dnew Path:void 0,points\x3dthis.points,halfedges\x3dthis.halfedges,\ntriangles\x3dthis.triangles,i\x3d0,n\x3dhalfedges.length;i\x3cn;++i){var j\x3dhalfedges[i];if(!(j\x3ci)){var ti\x3d2*triangles[i];j\x3d2*triangles[j];context.moveTo(points[ti],points[ti+1]);context.lineTo(points[j],points[j+1])}}this.renderHull(context);return buffer\x26\x26buffer.value()};Delaunay.prototype.renderPoints\x3dfunction(context,r){r\x3dvoid 0\x3d\x3d\x3dr?2:r;for(var buffer\x3dnull\x3d\x3dcontext?context\x3dnew Path:void 0,points\x3dthis.points,i\x3d0,n\x3dpoints.length;i\x3cn;i+\x3d2){var x\x3dpoints[i],y\x3dpoints[i+1];context.moveTo(x+r,y);context.arc(x,y,r,\n0,tau)}return buffer\x26\x26buffer.value()};Delaunay.prototype.renderHull\x3dfunction(context){var buffer\x3dnull\x3d\x3dcontext?context\x3dnew Path:void 0,hull\x3dthis.hull,points\x3dthis.points,h\x3d2*hull[0],n\x3dhull.length;context.moveTo(points[h],points[h+1]);for(h\x3d1;h\x3cn;++h){var h$657\x3d2*hull[h];context.lineTo(points[h$657],points[h$657+1])}context.closePath();return buffer\x26\x26buffer.value()};Delaunay.prototype.hullPolygon\x3dfunction(){var polygon\x3dnew Polygon;this.renderHull(polygon);return polygon.value()};Delaunay.prototype.renderTriangle\x3d\nfunction(i,context){var buffer\x3dnull\x3d\x3dcontext?context\x3dnew Path:void 0,points\x3dthis.points,triangles\x3dthis.triangles,t0\x3d2*triangles[i*\x3d3],t1\x3d2*triangles[i+1];i\x3d2*triangles[i+2];context.moveTo(points[t0],points[t0+1]);context.lineTo(points[t1],points[t1+1]);context.lineTo(points[i],points[i+1]);context.closePath();return buffer\x26\x26buffer.value()};Delaunay.prototype.trianglePolygons\x3dfunction $jscomp$generator$function(){var $jscomp$generator$this\x3dthis,$jscomp$destructuring$var458,triangles,i,n;return $jscomp.generator.createGenerator($jscomp$generator$function,\nfunction($jscomp$generator$context){1\x3d\x3d$jscomp$generator$context.nextAddress\x26\x26($jscomp$destructuring$var458\x3d$jscomp$generator$this,triangles\x3d$jscomp$destructuring$var458.triangles,i\x3d0,n\x3dtriangles.length/3);if(3!\x3d$jscomp$generator$context.nextAddress)return i\x3cn?$jscomp$generator$context.yield($jscomp$generator$this.trianglePolygon(i),3):$jscomp$generator$context.jumpTo(0);++i;return $jscomp$generator$context.jumpTo(2)})};Delaunay.prototype.trianglePolygon\x3dfunction(i){var polygon\x3dnew Polygon;this.renderTriangle(i,\npolygon);return polygon.value()};exports.Delaunay\x3dDelaunay;exports.Voronoi\x3dVoronoi;Object.defineProperty(exports,\x22__esModule\x22,{value:!0})})}");
SHADOW_ENV.evalLoad("module$node_modules$vega_voronoi$build$vega_voronoi.js", true , "shadow$provide.module$node_modules$vega_voronoi$build$vega_voronoi\x3dfunction(global$jscomp$0,require,module,exports$jscomp$0){(function(global,factory){\x22object\x22\x3d\x3d\x3dtypeof exports$jscomp$0\x26\x26\x22undefined\x22!\x3d\x3dtypeof module?factory(exports$jscomp$0,require(\x22module$node_modules$vega_dataflow$build$vega_dataflow\x22),require(\x22module$node_modules$vega_util$build$vega_util\x22),require(\x22module$node_modules$d3_delaunay$dist$d3_delaunay\x22)):\x22function\x22\x3d\x3d\x3dtypeof define\x26\x26define.amd?define([\x22exports\x22,\x22vega-dataflow\x22,\x22vega-util\x22,\n\x22d3-delaunay\x22],factory):(global\x3dglobal||self,factory((global.vega\x3dglobal.vega||{},global.vega.transforms\x3d{}),global.vega,global.vega,global.d3))})(this,function(exports,vegaDataflow,vegaUtil,d3Delaunay){function Voronoi(params){vegaDataflow.Transform.call(this,null,params)}Voronoi.Definition\x3d{type:\x22Voronoi\x22,metadata:{modifies:!0},params:[{name:\x22x\x22,type:\x22field\x22,required:!0},{name:\x22y\x22,type:\x22field\x22,required:!0},{name:\x22size\x22,type:\x22number\x22,array:!0,length:2},{name:\x22extent\x22,type:\x22array\x22,array:!0,length:2,\n\x22default\x22:[[-1E5,-1E5],[1E5,1E5]],content:{type:\x22number\x22,array:!0,length:2}},{name:\x22as\x22,type:\x22string\x22,\x22default\x22:\x22path\x22}]};var defaultExtent\x3d[-1E5,-1E5,1E5,1E5];vegaUtil.inherits(Voronoi,vegaDataflow.Transform).transform\x3dfunction(_,pulse){var as\x3d_.as||\x22path\x22,data\x3dpulse.source;if(!data||!data.length)return pulse;var s\x3d_.size;s\x3ds?[0,0,s[0],s[1]]:(s\x3d_.extent)?[s[0][0],s[0][1],s[1][0],s[1][1]]:defaultExtent;s\x3dthis.value\x3dd3Delaunay.Delaunay.from(data,_.x,_.y).voronoi(s);for(var i\x3d0,n\x3ddata.length;i\x3cn;++i){var polygon\x3d\ns.cellPolygon(i),JSCompiler_temp_const\x3ddata[i];if(polygon){for(var x\x3dpolygon[0][0],y\x3dpolygon[0][1],n$jscomp$0\x3dpolygon.length-1;polygon[n$jscomp$0][0]\x3d\x3d\x3dx\x26\x26polygon[n$jscomp$0][1]\x3d\x3d\x3dy;--n$jscomp$0);polygon\x3d\x22M\x22+polygon.slice(0,n$jscomp$0+1).join(\x22L\x22)+\x22Z\x22}else polygon\x3dnull;JSCompiler_temp_const[as]\x3dpolygon}return pulse.reflow(_.modified()).modifies(as)};exports.voronoi\x3dVoronoi;Object.defineProperty(exports,\x22__esModule\x22,{value:!0})})}");
SHADOW_ENV.evalLoad("module$node_modules$vega_wordcloud$build$vega_wordcloud.js", true , "shadow$provide.module$node_modules$vega_wordcloud$build$vega_wordcloud\x3dfunction(global$jscomp$0,require,module,exports$jscomp$0){(function(global,factory){\x22object\x22\x3d\x3d\x3dtypeof exports$jscomp$0\x26\x26\x22undefined\x22!\x3d\x3dtypeof module?factory(exports$jscomp$0,require(\x22module$node_modules$vega_canvas$build$vega_canvas\x22),require(\x22module$node_modules$vega_dataflow$build$vega_dataflow\x22),require(\x22module$node_modules$vega_util$build$vega_util\x22),require(\x22module$node_modules$vega_scale$build$vega_scale\x22),require(\x22module$node_modules$vega_statistics$build$vega_statistics\x22)):\n\x22function\x22\x3d\x3d\x3dtypeof define\x26\x26define.amd?define(\x22exports vega-canvas vega-dataflow vega-util vega-scale vega-statistics\x22.split(\x22 \x22),factory):(global\x3dglobal||self,factory((global.vega\x3dglobal.vega||{},global.vega.transforms\x3d{}),global.vega,global.vega,global.vega,global.vega,global.vega))})(this,function(exports,vegaCanvas,vegaDataflow,vegaUtil,vegaScale,vegaStatistics){function cloud(){function getContext(canvas){canvas.width\x3dcanvas.height\x3d1;var ratio\x3dMath.sqrt(canvas.getContext(\x222d\x22).getImageData(0,\n0,1,1).data.length\x3e\x3e2);canvas.width\x3d2048/ratio;canvas.height\x3d2048/ratio;canvas\x3dcanvas.getContext(\x222d\x22);canvas.fillStyle\x3dcanvas.strokeStyle\x3d\x22red\x22;canvas.textAlign\x3d\x22center\x22;return{context:canvas,ratio:ratio}}function place(board,tag,bounds){for(var startX\x3dtag.x,startY\x3dtag.y,maxDelta\x3dMath.sqrt(size[0]*size[0]+size[1]*size[1]),s\x3dspiral(size),dt\x3d.5\x3erandom()?1:-1,t\x3d-dt,dxdy,dx;dxdy\x3ds(t+\x3ddt);){dx\x3d~~dxdy[0];dxdy\x3d~~dxdy[1];if(Math.min(Math.abs(dx),Math.abs(dxdy))\x3e\x3dmaxDelta)break;tag.x\x3dstartX+dx;tag.y\x3dstartY+\ndxdy;if(!(0\x3etag.x+tag.x0||0\x3etag.y+tag.y0||tag.x+tag.x1\x3esize[0]||tag.y+tag.y1\x3esize[1])){if(!(dx\x3d!bounds)){a:{dx\x3dsize[0];dx\x3e\x3e\x3d5;dxdy\x3dtag.sprite;var w\x3dtag.width\x3e\x3e5;var last\x3dtag.x-(w\x3c\x3c4);for(var sx\x3dlast\x26127,msx\x3d32-sx,h\x3dtag.y1-tag.y0,x\x3d(tag.y+tag.y0)*dx+(last\x3e\x3e5),j\x3d0;j\x3ch;j++){for(var i\x3dlast\x3d0;i\x3c\x3dw;i++)if((last\x3c\x3cmsx|(i\x3cw?(last\x3ddxdy[j*w+i])\x3e\x3e\x3esx:0))\x26board[x+i]){dx\x3d!0;break a}x+\x3ddx}dx\x3d!1}dx\x3d!dx}if(dx\x26\x26(!bounds||tag.x+tag.x1\x3ebounds[0].x\x26\x26tag.x+tag.x0\x3cbounds[1].x\x26\x26tag.y+tag.y1\x3ebounds[0].y\x26\x26tag.y+tag.y0\x3cbounds[1].y)){bounds\x3d\ntag.sprite;startX\x3dtag.width\x3e\x3e5;startY\x3dsize[0]\x3e\x3e5;t\x3dtag.x-(startX\x3c\x3c4);maxDelta\x3dt\x26127;s\x3d32-maxDelta;dt\x3dtag.y1-tag.y0;t\x3d(tag.y+tag.y0)*startY+(t\x3e\x3e5);for(dxdy\x3d0;dxdy\x3cdt;dxdy++){for(w\x3ddx\x3d0;w\x3c\x3dstartX;w++)board[t+w]\x3dboard[t+w]|dx\x3c\x3cs|(w\x3cstartX?(dx\x3dbounds[dxdy*startX+w])\x3e\x3e\x3emaxDelta:0);t+\x3dstartY}tag.sprite\x3dnull;return!0}}}return!1}var size\x3d[256,256],text,font,fontSize,fontStyle,fontWeight,rotate,padding,spiral\x3darchimedeanSpiral,words\x3d[],random\x3dMath.random,cloud\x3d{layout:function(){for(var contextAndRatio\x3dgetContext(vegaCanvas.canvas()),\nboard\x3dzeroArray((size[0]\x3e\x3e5)*size[1]),bounds\x3dnull,n\x3dwords.length,i\x3d-1,tags\x3d[],data\x3dwords.map(function(d){return{text:text(d),font:font(d),style:fontStyle(d),weight:fontWeight(d),rotate:rotate(d),size:~~(fontSize(d)+1E-14),padding:padding(d),xoff:0,yoff:0,x1:0,y1:0,x0:0,y0:0,hasText:!1,sprite:null,datum:d}}).sort(function(a,b){return b.size-a.size});++i\x3cn;){var d$jscomp$0\x3ddata[i];d$jscomp$0.x\x3dsize[0]*(random()+.5)\x3e\x3e1;d$jscomp$0.y\x3dsize[1]*(random()+.5)\x3e\x3e1;cloudSprite(contextAndRatio,d$jscomp$0,data,\ni);d$jscomp$0.hasText\x26\x26place(board,d$jscomp$0,bounds)\x26\x26(tags.push(d$jscomp$0),bounds?cloudBounds(bounds,d$jscomp$0):bounds\x3d[{x:d$jscomp$0.x+d$jscomp$0.x0,y:d$jscomp$0.y+d$jscomp$0.y0},{x:d$jscomp$0.x+d$jscomp$0.x1,y:d$jscomp$0.y+d$jscomp$0.y1}],d$jscomp$0.x-\x3dsize[0]\x3e\x3e1,d$jscomp$0.y-\x3dsize[1]\x3e\x3e1)}return tags},words:function(_){return arguments.length?(words\x3d_,cloud):words},size:function(_){return arguments.length?(size\x3d[+_[0],+_[1]],cloud):size},font:function(_){return arguments.length?(font\x3dfunctor(_),\ncloud):font},fontStyle:function(_){return arguments.length?(fontStyle\x3dfunctor(_),cloud):fontStyle},fontWeight:function(_){return arguments.length?(fontWeight\x3dfunctor(_),cloud):fontWeight},rotate:function(_){return arguments.length?(rotate\x3dfunctor(_),cloud):rotate},text:function(_){return arguments.length?(text\x3dfunctor(_),cloud):text},spiral:function(_){return arguments.length?(spiral\x3dspirals[_]||_,cloud):spiral},fontSize:function(_){return arguments.length?(fontSize\x3dfunctor(_),cloud):fontSize},padding:function(_){return arguments.length?\n(padding\x3dfunctor(_),cloud):padding},random:function(_){return arguments.length?(random\x3d_,cloud):random}};return cloud}function cloudSprite(contextAndRatio,d,data,di){if(!d.sprite){var c\x3dcontextAndRatio.context,ratio\x3dcontextAndRatio.ratio;c.clearRect(0,0,2048/ratio,2048/ratio);var y\x3dcontextAndRatio\x3d0,maxh\x3d0,n\x3ddata.length;for(--di;++di\x3cn;){d\x3ddata[di];c.save();c.font\x3dd.style+\x22 \x22+d.weight+\x22 \x22+~~((d.size+1)/ratio)+\x22px \x22+d.font;var w\x3dc.measureText(d.text+\x22m\x22).width*ratio;var h\x3dd.size\x3c\x3c1;if(d.rotate){var sr\x3d\nMath.sin(d.rotate*cloudRadians),cr\x3dMath.cos(d.rotate*cloudRadians),wcr\x3dw*cr,wsr\x3dw*sr;cr*\x3dh;w\x3dh*sr;w\x3dMath.max(Math.abs(wcr+w),Math.abs(wcr-w))+31\x3e\x3e5\x3c\x3c5;h\x3d~~Math.max(Math.abs(wsr+cr),Math.abs(wsr-cr))}else w\x3dw+31\x3e\x3e5\x3c\x3c5;h\x3emaxh\x26\x26(maxh\x3dh);2048\x3c\x3dcontextAndRatio+w\x26\x26(contextAndRatio\x3d0,y+\x3dmaxh,maxh\x3d0);if(2048\x3c\x3dy+h)break;c.translate((contextAndRatio+(w\x3e\x3e1))/ratio,(y+(h\x3e\x3e1))/ratio);d.rotate\x26\x26c.rotate(d.rotate*cloudRadians);c.fillText(d.text,0,0);d.padding\x26\x26(c.lineWidth\x3d2*d.padding,c.strokeText(d.text,0,0));\nc.restore();d.width\x3dw;d.height\x3dh;d.xoff\x3dcontextAndRatio;d.yoff\x3dy;d.x1\x3dw\x3e\x3e1;d.y1\x3dh\x3e\x3e1;d.x0\x3d-d.x1;d.y0\x3d-d.y1;d.hasText\x3d!0;contextAndRatio+\x3dw}n\x3dc.getImageData(0,0,2048/ratio,2048/ratio).data;for(wcr\x3d[];0\x3c\x3d--di;)if(d\x3ddata[di],d.hasText){w\x3dd.width;c\x3dw\x3e\x3e5;h\x3dd.y1-d.y0;for(ratio\x3d0;ratio\x3ch*c;ratio++)wcr[ratio]\x3d0;contextAndRatio\x3dd.xoff;if(null\x3d\x3dcontextAndRatio)break;y\x3dd.yoff;wsr\x3d0;sr\x3d-1;for(maxh\x3d0;maxh\x3ch;maxh++){for(ratio\x3d0;ratio\x3cw;ratio++)cr\x3dn[2048*(y+maxh)+(contextAndRatio+ratio)\x3c\x3c2]?1\x3c\x3c31-ratio%32:0,wcr[c*\nmaxh+(ratio\x3e\x3e5)]|\x3dcr,wsr|\x3dcr;wsr?sr\x3dmaxh:(d.y0++,h--,maxh--,y++)}d.y1\x3dd.y0+sr;d.sprite\x3dwcr.slice(0,(d.y1-d.y0)*c)}}}function cloudBounds(bounds,d){var b0\x3dbounds[0];bounds\x3dbounds[1];d.x+d.x0\x3cb0.x\x26\x26(b0.x\x3dd.x+d.x0);d.y+d.y0\x3cb0.y\x26\x26(b0.y\x3dd.y+d.y0);d.x+d.x1\x3ebounds.x\x26\x26(bounds.x\x3dd.x+d.x1);d.y+d.y1\x3ebounds.y\x26\x26(bounds.y\x3dd.y+d.y1)}function archimedeanSpiral(size){var e\x3dsize[0]/size[1];return function(t){return[e*(t*\x3d.1)*Math.cos(t),t*Math.sin(t)]}}function zeroArray(n){for(var a\x3d[],i\x3d-1;++i\x3cn;)a[i]\x3d0;return a}\nfunction functor(d){return\x22function\x22\x3d\x3d\x3dtypeof d?d:function(){return d}}function Wordcloud(params){vegaDataflow.Transform.call(this,cloud(),params)}var cloudRadians\x3dMath.PI/180,spirals\x3d{archimedean:archimedeanSpiral,rectangular:function(size){var dx\x3d4*size[0]/size[1],x\x3d0,y\x3d0;return function(t){var sign\x3d0\x3et?-1:1;switch(Math.sqrt(1+4*sign*t)-sign\x263){case 0:x+\x3ddx;break;case 1:y+\x3d4;break;case 2:x-\x3ddx;break;default:y-\x3d4}return[x,y]}}},Output\x3d\x22x y font fontSize fontStyle fontWeight angle\x22.split(\x22 \x22),Params\x3d\n\x22text font rotate fontSize fontStyle fontWeight\x22.split(\x22 \x22);Wordcloud.Definition\x3d{type:\x22Wordcloud\x22,metadata:{modifies:!0},params:[{name:\x22size\x22,type:\x22number\x22,array:!0,length:2},{name:\x22font\x22,type:\x22string\x22,expr:!0,\x22default\x22:\x22sans-serif\x22},{name:\x22fontStyle\x22,type:\x22string\x22,expr:!0,\x22default\x22:\x22normal\x22},{name:\x22fontWeight\x22,type:\x22string\x22,expr:!0,\x22default\x22:\x22normal\x22},{name:\x22fontSize\x22,type:\x22number\x22,expr:!0,\x22default\x22:14},{name:\x22fontSizeRange\x22,type:\x22number\x22,array:\x22nullable\x22,\x22default\x22:[10,50]},{name:\x22rotate\x22,type:\x22number\x22,\nexpr:!0,\x22default\x22:0},{name:\x22text\x22,type:\x22field\x22},{name:\x22spiral\x22,type:\x22string\x22,values:[\x22archimedean\x22,\x22rectangular\x22]},{name:\x22padding\x22,type:\x22number\x22,expr:!0},{name:\x22as\x22,type:\x22string\x22,array:!0,length:7,\x22default\x22:Output}]};vegaUtil.inherits(Wordcloud,vegaDataflow.Transform).transform\x3dfunction(_,pulse){function modp(param){param\x3d_[param];return vegaUtil.isFunction(param)\x26\x26pulse.modified(param.fields)}!_.size||_.size[0]\x26\x26_.size[1]||vegaUtil.error(\x22Wordcloud size dimensions must be non-zero.\x22);var mod\x3d_.modified();\nif(mod||pulse.changed(pulse.ADD_REM)||Params.some(modp)){var data\x3dpulse.materialize(pulse.SOURCE).source,layout\x3dthis.value,as\x3d_.as||Output,fontSize\x3d_.fontSize||14,range;vegaUtil.isFunction(fontSize)?range\x3d_.fontSizeRange:fontSize\x3dvegaUtil.constant(fontSize);if(range){var fsize\x3dfontSize,sizeScale\x3dvegaScale.scale(\x22sqrt\x22)().domain(vegaUtil.extent(data,fsize)).range(range);fontSize\x3dfunction(x){return sizeScale(fsize(x))}}data.forEach(function(t){t[as[0]]\x3dNaN;t[as[1]]\x3dNaN;t[as[3]]\x3d0});data\x3dlayout.words(data).text(_.text).size(_.size||\n[500,500]).padding(_.padding||1).spiral(_.spiral||\x22archimedean\x22).rotate(_.rotate||0).font(_.font||\x22sans-serif\x22).fontStyle(_.fontStyle||\x22normal\x22).fontWeight(_.fontWeight||\x22normal\x22).fontSize(fontSize).random(vegaStatistics.random).layout();fontSize\x3dlayout.size();layout\x3dfontSize[0]\x3e\x3e1;fontSize\x3dfontSize[1]\x3e\x3e1;range\x3d0;for(var n\x3ddata.length,w,t$jscomp$0;range\x3cn;++range)w\x3ddata[range],t$jscomp$0\x3dw.datum,t$jscomp$0[as[0]]\x3dw.x+layout,t$jscomp$0[as[1]]\x3dw.y+fontSize,t$jscomp$0[as[2]]\x3dw.font,t$jscomp$0[as[3]]\x3d\nw.size,t$jscomp$0[as[4]]\x3dw.style,t$jscomp$0[as[5]]\x3dw.weight,t$jscomp$0[as[6]]\x3dw.rotate;return pulse.reflow(mod).modifies(as)}};exports.wordcloud\x3dWordcloud;Object.defineProperty(exports,\x22__esModule\x22,{value:!0})})}");
SHADOW_ENV.evalLoad("module$node_modules$vega_crossfilter$build$vega_crossfilter.js", true , "shadow$provide.module$node_modules$vega_crossfilter$build$vega_crossfilter\x3dfunction(global$jscomp$0,require,module,exports$jscomp$0){(function(global,factory){\x22object\x22\x3d\x3d\x3dtypeof exports$jscomp$0\x26\x26\x22undefined\x22!\x3d\x3dtypeof module?factory(exports$jscomp$0,require(\x22module$node_modules$d3_array$dist$d3_array\x22),require(\x22module$node_modules$vega_dataflow$build$vega_dataflow\x22),require(\x22module$node_modules$vega_util$build$vega_util\x22)):\x22function\x22\x3d\x3d\x3dtypeof define\x26\x26define.amd?define([\x22exports\x22,\x22d3-array\x22,\x22vega-dataflow\x22,\n\x22vega-util\x22],factory):(global\x3dglobal||self,factory((global.vega\x3dglobal.vega||{},global.vega.transforms\x3d{}),global.d3,global.vega,global.vega))})(this,function(exports,d3Array,vegaDataflow,vegaUtil){function array8(n){return new Uint8Array(n)}function array16(n){return new Uint16Array(n)}function array32(n){return new Uint32Array(n)}function Bitmaps(){var width\x3d8,data\x3d[],seen\x3darray32(0),curr\x3darray$jscomp$0(0,width),prev\x3darray$jscomp$0(0,width);return{data:function(){return data},seen:function(){var JSCompiler_inline_result\x3d\nseen;var length\x3ddata.length;JSCompiler_inline_result.length\x3e\x3dlength||(length\x3dnew JSCompiler_inline_result.constructor(length),length.set(JSCompiler_inline_result),JSCompiler_inline_result\x3dlength);return seen\x3dJSCompiler_inline_result},add:function(array){for(var i\x3d0,j\x3ddata.length,n\x3darray.length,t;i\x3cn;++i)t\x3darray[i],t._index\x3dj++,data.push(t)},remove:function(num,map){var n\x3ddata.length;num\x3dArray(n-num);var reindex\x3ddata,i,j;for(i\x3d0;!map[i]\x26\x26i\x3cn;++i)num[i]\x3ddata[i],reindex[i]\x3di;for(j\x3di;i\x3cn;++i){var t\x3ddata[i];\nmap[i]?reindex[i]\x3d-1:(reindex[i]\x3dj,curr[j]\x3dcurr[i],prev[j]\x3dprev[i],num[j]\x3dt,t._index\x3dj++);curr[i]\x3d0}data\x3dnum;return reindex},size:function(){return data.length},curr:function(){return curr},prev:function(){return prev},reset:function(k){prev[k]\x3dcurr[k]},all:function(){return 257\x3ewidth?255:65537\x3ewidth?65535:4294967295},set:function(k,one){curr[k]|\x3done},clear:function(k,one){curr[k]\x26\x3d~one},resize:function(n,m){if(n\x3ecurr.length||m\x3ewidth)width\x3dMath.max(m,width),curr\x3darray$jscomp$0(n,width,curr),prev\x3d\narray$jscomp$0(n,width)}}}function array$jscomp$0(n,m,array){n\x3d(257\x3em?array8:65537\x3em?array16:array32)(n);array\x26\x26n.set(array);return n}function Dimension(index,i$jscomp$0,query){var bit\x3d1\x3c\x3ci$jscomp$0;return{one:bit,zero:~bit,range:query.slice(),bisect:index.bisect,index:index.index,size:index.size,onAdd:function(added,curr){var range\x3dthis.bisect(this.range,added.value);added\x3dadded.index;var lo\x3drange[0];range\x3drange[1];var n1\x3dadded.length,i;for(i\x3d0;i\x3clo;++i)curr[added[i]]|\x3dbit;for(i\x3drange;i\x3cn1;++i)curr[added[i]]|\x3d\nbit;return this}}}function SortedIndex(){var index$jscomp$0\x3darray32(0),value$jscomp$0\x3d[],size\x3d0;return{insert:function(key,data,base){if(!data.length)return[];var n0\x3dsize,n1\x3ddata.length,addv\x3dArray(n1),addi\x3darray32(n1),i;for(i\x3d0;i\x3cn1;++i)addv[i]\x3dkey(data[i]),addi[i]\x3di;addv\x3dsort(addv,addi);if(n0){key\x3dvalue$jscomp$0;data\x3dindex$jscomp$0;value$jscomp$0\x3dArray(n0+n1);index$jscomp$0\x3darray32(n0+n1);i\x3daddv;var value\x3dvalue$jscomp$0,index\x3dindex$jscomp$0,i0\x3d0,i1\x3d0,i$jscomp$0;for(i$jscomp$0\x3d0;i0\x3cn0\x26\x26i1\x3cn1;++i$jscomp$0)key[i0]\x3c\ni[i1]?(value[i$jscomp$0]\x3dkey[i0],index[i$jscomp$0]\x3ddata[i0++]):(value[i$jscomp$0]\x3di[i1],index[i$jscomp$0]\x3daddi[i1++]+base);for(;i0\x3cn0;++i0,++i$jscomp$0)value[i$jscomp$0]\x3dkey[i0],index[i$jscomp$0]\x3ddata[i0];for(;i1\x3cn1;++i1,++i$jscomp$0)value[i$jscomp$0]\x3di[i1],index[i$jscomp$0]\x3daddi[i1]+base}else{if(0\x3cbase)for(i\x3d0;i\x3cn1;++i)addi[i]+\x3dbase;value$jscomp$0\x3daddv;index$jscomp$0\x3daddi}size\x3dn0+n1;return{index:addi,value:addv}},remove:function(num,map){var n\x3dsize,idx,i,j;for(i\x3d0;!map[index$jscomp$0[i]]\x26\x26i\x3cn;++i);\nfor(j\x3di;i\x3cn;++i)map[idx\x3dindex$jscomp$0[i]]||(index$jscomp$0[j]\x3didx,value$jscomp$0[j]\x3dvalue$jscomp$0[i],++j);size\x3dn-num},bisect:function(range,array){if(array)var n\x3darray.length;else array\x3dvalue$jscomp$0,n\x3dsize;return[d3Array.bisectLeft(array,range[0],0,n),d3Array.bisectRight(array,range[1],0,n)]},reindex:function(map){for(var i\x3d0,n\x3dsize;i\x3cn;++i)index$jscomp$0[i]\x3dmap[index$jscomp$0[i]]},index:function(){return index$jscomp$0},size:function(){return size}}}function sort(values,index){values.sort.call(index,\nfunction(a,b){a\x3dvalues[a];b\x3dvalues[b];return a\x3cb?-1:a\x3eb?1:0});return d3Array.permute(values,index)}function CrossFilter(params){vegaDataflow.Transform.call(this,Bitmaps(),params);this._dims\x3dthis._indices\x3dnull}function ResolveFilter(params){vegaDataflow.Transform.call(this,null,params)}CrossFilter.Definition\x3d{type:\x22CrossFilter\x22,metadata:{},params:[{name:\x22fields\x22,type:\x22field\x22,array:!0,required:!0},{name:\x22query\x22,type:\x22array\x22,array:!0,required:!0,content:{type:\x22number\x22,array:!0,length:2}}]};var prototype\x3d\nvegaUtil.inherits(CrossFilter,vegaDataflow.Transform);prototype.transform\x3dfunction(_,pulse){return this._dims?_.modified(\x22fields\x22)||_.fields.some(function(f){return pulse.modified(f.fields)})?this.reinit(_,pulse):this.eval(_,pulse):this.init(_,pulse)};prototype.init\x3dfunction(_,pulse){for(var fields\x3d_.fields,query\x3d_.query,indices\x3dthis._indices\x3d{},dims\x3dthis._dims\x3d[],m\x3dquery.length,i\x3d0,key;i\x3cm;++i)key\x3dfields[i].fname,key\x3dindices[key]||(indices[key]\x3dSortedIndex()),dims.push(Dimension(key,i,query[i]));\nreturn this.eval(_,pulse)};prototype.reinit\x3dfunction(_,pulse){var output\x3dpulse.materialize().fork(),fields\x3d_.fields,query\x3d_.query,indices\x3dthis._indices,dims\x3dthis._dims,bits\x3dthis.value,curr\x3dbits.curr(),prev\x3dbits.prev(),all\x3dbits.all(),out\x3doutput.rem\x3doutput.add,mod\x3doutput.mod,m\x3dquery.length,adds\x3d{},index,key,remMap;prev.set(curr);pulse.rem.length\x26\x26(remMap\x3dthis.remove(_,pulse,output));pulse.add.length\x26\x26bits.add(pulse.add);if(pulse.mod.length){var modMap\x3d{};var add\x3dpulse.mod;var i\x3d0;for(key\x3dadd.length;i\x3c\nkey;++i)modMap[add[i]._index]\x3d1}for(i\x3d0;i\x3cm;++i){var f\x3dfields[i];if(!dims[i]||_.modified(\x22fields\x22,i)||pulse.modified(f.fields))key\x3df.fname,(add\x3dadds[key])||(indices[key]\x3dindex\x3dSortedIndex(),adds[key]\x3dadd\x3dindex.insert(f,pulse.source,0)),dims[i]\x3dDimension(index,i,query[i]).onAdd(add,curr)}i\x3d0;for(key\x3dbits.data().length;i\x3ckey;++i)remMap[i]||(prev[i]!\x3d\x3dcurr[i]?out.push(i):modMap[i]\x26\x26curr[i]!\x3d\x3dall\x26\x26mod.push(i));bits.mask\x3d(1\x3c\x3cm)-1;return output};prototype.eval\x3dfunction(_,pulse){var output\x3dpulse.materialize().fork(),\nm\x3dthis._dims.length,mask\x3d0;pulse.rem.length\x26\x26(this.remove(_,pulse,output),mask|\x3d(1\x3c\x3cm)-1);_.modified(\x22query\x22)\x26\x26!_.modified(\x22fields\x22)\x26\x26(mask|\x3dthis.update(_,pulse,output));pulse.add.length\x26\x26(this.insert(_,pulse,output),mask|\x3d(1\x3c\x3cm)-1);pulse.mod.length\x26\x26(this.modify(pulse,output),mask|\x3d(1\x3c\x3cm)-1);this.value.mask\x3dmask;return output};prototype.insert\x3dfunction(_,pulse,output){pulse\x3dpulse.add;var bits\x3dthis.value,dims\x3dthis._dims,indices\x3dthis._indices;_\x3d_.fields;var adds\x3d{};output\x3doutput.add;var k\x3dbits.size(),\nn\x3dk+pulse.length,m\x3ddims.length;bits.resize(n,m);bits.add(pulse);var curr\x3dbits.curr(),prev\x3dbits.prev(),all\x3dbits.all();for(bits\x3d0;bits\x3cm;++bits){var key\x3d_[bits].fname;key\x3dadds[key]||(adds[key]\x3dindices[key].insert(_[bits],pulse,k));dims[bits].onAdd(key,curr)}for(;k\x3cn;++k)prev[k]\x3dall,curr[k]!\x3d\x3dall\x26\x26output.push(k)};prototype.modify\x3dfunction(pulse,output){output\x3doutput.mod;var bits\x3dthis.value,curr\x3dbits.curr();bits\x3dbits.all();pulse\x3dpulse.mod;var n;var i\x3d0;for(n\x3dpulse.length;i\x3cn;++i){var k\x3dpulse[i]._index;\ncurr[k]!\x3d\x3dbits\x26\x26output.push(k)}};prototype.remove\x3dfunction(_,pulse,output){_\x3dthis._indices;var bits\x3dthis.value,curr\x3dbits.curr(),prev\x3dbits.prev();bits\x3dbits.all();var map\x3d{};output\x3doutput.rem;var tuples\x3dpulse.rem,n,f;var i\x3d0;for(n\x3dtuples.length;i\x3cn;++i){var k\x3dtuples[i]._index;map[k]\x3d1;prev[k]\x3df\x3dcurr[k];curr[k]\x3dbits;f!\x3d\x3dbits\x26\x26output.push(k)}for(k in _)_[k].remove(n,map);this.reindex(pulse,n,map);return map};prototype.reindex\x3dfunction(pulse,num,map){var indices\x3dthis._indices,bits\x3dthis.value;pulse.runAfter(function(){var indexMap\x3d\nbits.remove(num,map),key;for(key in indices)indices[key].reindex(indexMap)})};prototype.update\x3dfunction(_,pulse,output){var dims\x3dthis._dims,query\x3d_.query;pulse\x3dpulse.stamp;var m\x3ddims.length,mask\x3d0,q;for(q\x3doutput.filters\x3d0;q\x3cm;++q)if(_.modified(\x22query\x22,q)){var i\x3dq;++mask}if(1\x3d\x3d\x3dmask)mask\x3ddims[i].one,this.incrementOne(dims[i],query[i],output.add,output.rem);else for(mask\x3dq\x3d0;q\x3cm;++q)_.modified(\x22query\x22,q)\x26\x26(mask|\x3ddims[q].one,this.incrementAll(dims[q],query[q],pulse,output.add),output.rem\x3doutput.add);\nreturn mask};prototype.incrementAll\x3dfunction(dim,query,stamp,out){var bits\x3dthis.value,seen\x3dbits.seen(),curr\x3dbits.curr();bits\x3dbits.prev();var index\x3ddim.index(),old\x3ddim.bisect(dim.range),range\x3ddim.bisect(query),lo1\x3drange[0];range\x3drange[1];var lo0\x3dold[0];old\x3dold[1];var one\x3ddim.one,j;if(lo1\x3clo0){var i\x3dlo1;for(j\x3dMath.min(lo0,range);i\x3cj;++i){var k\x3dindex[i];seen[k]!\x3d\x3dstamp\x26\x26(bits[k]\x3dcurr[k],seen[k]\x3dstamp,out.push(k));curr[k]^\x3done}}else if(lo1\x3elo0)for(i\x3dlo0,j\x3dMath.min(lo1,old);i\x3cj;++i)k\x3dindex[i],seen[k]!\x3d\x3d\nstamp\x26\x26(bits[k]\x3dcurr[k],seen[k]\x3dstamp,out.push(k)),curr[k]^\x3done;if(range\x3eold)for(i\x3dMath.max(lo1,old),j\x3drange;i\x3cj;++i)k\x3dindex[i],seen[k]!\x3d\x3dstamp\x26\x26(bits[k]\x3dcurr[k],seen[k]\x3dstamp,out.push(k)),curr[k]^\x3done;else if(range\x3cold)for(i\x3dMath.max(lo0,range),j\x3dold;i\x3cj;++i)k\x3dindex[i],seen[k]!\x3d\x3dstamp\x26\x26(bits[k]\x3dcurr[k],seen[k]\x3dstamp,out.push(k)),curr[k]^\x3done;dim.range\x3dquery.slice()};prototype.incrementOne\x3dfunction(dim,query,add,rem){var curr\x3dthis.value.curr(),index\x3ddim.index(),old\x3ddim.bisect(dim.range),range\x3ddim.bisect(query),\nlo1\x3drange[0];range\x3drange[1];var lo0\x3dold[0];old\x3dold[1];var one\x3ddim.one,j;if(lo1\x3clo0){var i\x3dlo1;for(j\x3dMath.min(lo0,range);i\x3cj;++i){var k\x3dindex[i];curr[k]^\x3done;add.push(k)}}else if(lo1\x3elo0)for(i\x3dlo0,j\x3dMath.min(lo1,old);i\x3cj;++i)k\x3dindex[i],curr[k]^\x3done,rem.push(k);if(range\x3eold)for(i\x3dMath.max(lo1,old),j\x3drange;i\x3cj;++i)k\x3dindex[i],curr[k]^\x3done,add.push(k);else if(range\x3cold)for(i\x3dMath.max(lo0,range),j\x3dold;i\x3cj;++i)k\x3dindex[i],curr[k]^\x3done,rem.push(k);dim.range\x3dquery.slice()};ResolveFilter.Definition\x3d{type:\x22ResolveFilter\x22,\nmetadata:{},params:[{name:\x22ignore\x22,type:\x22number\x22,required:!0,description:\x22A bit mask indicating which filters to ignore.\x22},{name:\x22filter\x22,type:\x22object\x22,required:!0,description:\x22Per-tuple filter bitmaps from a CrossFilter transform.\x22}]};vegaUtil.inherits(ResolveFilter,vegaDataflow.Transform).transform\x3dfunction(_,pulse){var ignore\x3d~(_.ignore||0);_\x3d_.filter;var mask\x3d_.mask;if(0\x3d\x3d\x3d(mask\x26ignore))return pulse.StopPropagation;pulse\x3dpulse.fork(pulse.ALL);var data\x3d_.data(),curr\x3d_.curr(),prev\x3d_.prev(),pass\x3d\nfunction(k){return curr[k]\x26ignore?null:data[k]};pulse.filter(pulse.MOD,pass);mask\x26mask-1?(pulse.filter(pulse.ADD,function(k){var c\x3dcurr[k]\x26ignore;return!c\x26\x26c^prev[k]\x26ignore?data[k]:null}),pulse.filter(pulse.REM,function(k){var c\x3dcurr[k]\x26ignore;return!c||c^c^prev[k]\x26ignore?null:data[k]})):(pulse.filter(pulse.ADD,pass),pulse.filter(pulse.REM,function(k){return(curr[k]\x26ignore)\x3d\x3d\x3dmask?data[k]:null}));return pulse.filter(pulse.SOURCE,function(t){return pass(t._index)})};exports.crossfilter\x3dCrossFilter;\nexports.resolvefilter\x3dResolveFilter;Object.defineProperty(exports,\x22__esModule\x22,{value:!0})})}");
SHADOW_ENV.evalLoad("module$node_modules$vega_expression$build$vega_expression.js", true , "shadow$provide.module$node_modules$vega_expression$build$vega_expression\x3dfunction(global$jscomp$0,require,module,exports$jscomp$0){(function(global,factory){\x22object\x22\x3d\x3d\x3dtypeof exports$jscomp$0\x26\x26\x22undefined\x22!\x3d\x3dtypeof module?factory(exports$jscomp$0,require(\x22module$node_modules$vega_util$build$vega_util\x22)):\x22function\x22\x3d\x3d\x3dtypeof define\x26\x26define.amd?define([\x22exports\x22,\x22vega-util\x22],factory):(global\x3dglobal||self,factory(global.vega\x3d{},global.vega))})(this,function(exports,vegaUtil){function ASTNode(type){this.type\x3d\ntype}function children(node){switch(node.type){case \x22ArrayExpression\x22:return node.elements;case \x22BinaryExpression\x22:case \x22LogicalExpression\x22:return[node.left,node.right];case \x22CallExpression\x22:var args\x3dnode.arguments.slice();args.unshift(node.callee);return args;case \x22ConditionalExpression\x22:return[node.test,node.consequent,node.alternate];case \x22MemberExpression\x22:return[node.object,node.property];case \x22ObjectExpression\x22:return node.properties;case \x22Property\x22:return[node.key,node.value];case \x22UnaryExpression\x22:return[node.argument];\ndefault:return[]}}function assert(condition,message){if(!condition)throw Error(\x22ASSERT: \x22+message);}function isDecimalDigit(ch){return 48\x3c\x3dch\x26\x2657\x3e\x3dch}function isHexDigit(ch){return 0\x3c\x3d\x220123456789abcdefABCDEF\x22.indexOf(ch)}function isOctalDigit(ch){return 0\x3c\x3d\x2201234567\x22.indexOf(ch)}function isLineTerminator(ch){return 10\x3d\x3d\x3dch||13\x3d\x3d\x3dch||8232\x3d\x3d\x3dch||8233\x3d\x3d\x3dch}function isIdentifierStart(ch){return 36\x3d\x3d\x3dch||95\x3d\x3d\x3dch||65\x3c\x3dch\x26\x2690\x3e\x3dch||97\x3c\x3dch\x26\x26122\x3e\x3dch||92\x3d\x3d\x3dch||128\x3c\x3dch\x26\x26RegexNonAsciiIdentifierStart.test(String.fromCharCode(ch))}\nfunction isIdentifierPart(ch){return 36\x3d\x3d\x3dch||95\x3d\x3d\x3dch||65\x3c\x3dch\x26\x2690\x3e\x3dch||97\x3c\x3dch\x26\x26122\x3e\x3dch||48\x3c\x3dch\x26\x2657\x3e\x3dch||92\x3d\x3d\x3dch||128\x3c\x3dch\x26\x26RegexNonAsciiIdentifierPart.test(String.fromCharCode(ch))}function skipComment(){for(var ch;index$jscomp$0\x3clength;)if(ch\x3dsource.charCodeAt(index$jscomp$0),32\x3d\x3d\x3dch||9\x3d\x3d\x3dch||11\x3d\x3d\x3dch||12\x3d\x3d\x3dch||160\x3d\x3d\x3dch||5760\x3c\x3dch\x26\x260\x3c\x3d[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].indexOf(ch)||isLineTerminator(ch))++index$jscomp$0;else break}function scanHexEscape(prefix){var code\x3d\n0;var len\x3d\x22u\x22\x3d\x3d\x3dprefix?4:2;for(prefix\x3d0;prefix\x3clen;++prefix)if(index$jscomp$0\x3clength\x26\x26isHexDigit(source[index$jscomp$0])){var ch\x3dsource[index$jscomp$0++];code\x3d16*code+\x220123456789abcdef\x22.indexOf(ch.toLowerCase())}else throwError({},\x22Unexpected token %0\x22,\x22ILLEGAL\x22);return String.fromCharCode(code)}function getEscapedIdentifier(){var ch\x3dsource.charCodeAt(index$jscomp$0++);var id\x3dString.fromCharCode(ch);92\x3d\x3d\x3dch\x26\x26(117!\x3d\x3dsource.charCodeAt(index$jscomp$0)\x26\x26throwError({},\x22Unexpected token %0\x22,\x22ILLEGAL\x22),\n++index$jscomp$0,(ch\x3dscanHexEscape(\x22u\x22))\x26\x26\x22\\\\\x22!\x3d\x3dch\x26\x26isIdentifierStart(ch.charCodeAt(0))||throwError({},\x22Unexpected token %0\x22,\x22ILLEGAL\x22),id\x3dch);for(;index$jscomp$0\x3clength;){ch\x3dsource.charCodeAt(index$jscomp$0);if(!isIdentifierPart(ch))break;++index$jscomp$0;id+\x3dString.fromCharCode(ch);92\x3d\x3d\x3dch\x26\x26(id\x3did.substr(0,id.length-1),117!\x3d\x3dsource.charCodeAt(index$jscomp$0)\x26\x26throwError({},\x22Unexpected token %0\x22,\x22ILLEGAL\x22),++index$jscomp$0,(ch\x3dscanHexEscape(\x22u\x22))\x26\x26\x22\\\\\x22!\x3d\x3dch\x26\x26isIdentifierPart(ch.charCodeAt(0))||\nthrowError({},\x22Unexpected token %0\x22,\x22ILLEGAL\x22),id+\x3dch)}return id}function scanPunctuator(){var start\x3dindex$jscomp$0,code\x3dsource.charCodeAt(index$jscomp$0),ch1\x3dsource[index$jscomp$0];switch(code){case 46:case 40:case 41:case 59:case 44:case 123:case 125:case 91:case 93:case 58:case 63:case 126:return++index$jscomp$0,{type:7,value:String.fromCharCode(code),start:start,end:index$jscomp$0};default:var code2\x3dsource.charCodeAt(index$jscomp$0+1);if(61\x3d\x3d\x3dcode2)switch(code){case 43:case 45:case 47:case 60:case 62:case 94:case 124:case 37:case 38:case 42:return index$jscomp$0+\x3d\n2,{type:7,value:String.fromCharCode(code)+String.fromCharCode(code2),start:start,end:index$jscomp$0};case 33:case 61:return index$jscomp$0+\x3d2,61\x3d\x3d\x3dsource.charCodeAt(index$jscomp$0)\x26\x26++index$jscomp$0,{type:7,value:source.slice(start,index$jscomp$0),start:start,end:index$jscomp$0}}}code\x3dsource.substr(index$jscomp$0,4);if(\x22\\x3e\\x3e\\x3e\\x3d\x22\x3d\x3d\x3dcode)return index$jscomp$0+\x3d4,{type:7,value:code,start:start,end:index$jscomp$0};code\x3dcode.substr(0,3);if(\x22\\x3e\\x3e\\x3e\x22\x3d\x3d\x3dcode||\x22\\x3c\\x3c\\x3d\x22\x3d\x3d\x3dcode||\x22\\x3e\\x3e\\x3d\x22\x3d\x3d\x3d\ncode)return index$jscomp$0+\x3d3,{type:7,value:code,start:start,end:index$jscomp$0};code\x3dcode.substr(0,2);if(ch1\x3d\x3d\x3dcode[1]\x26\x260\x3c\x3d\x22+-\\x3c\\x3e\\x26|\x22.indexOf(ch1)||\x22\\x3d\\x3e\x22\x3d\x3d\x3dcode)return index$jscomp$0+\x3d2,{type:7,value:code,start:start,end:index$jscomp$0};if(0\x3c\x3d\x22\\x3c\\x3e\\x3d!+-*%\\x26|^/\x22.indexOf(ch1))return++index$jscomp$0,{type:7,value:ch1,start:start,end:index$jscomp$0};throwError({},\x22Unexpected token %0\x22,\x22ILLEGAL\x22)}function scanNumericLiteral(){var ch\x3dsource[index$jscomp$0];assert(isDecimalDigit(ch.charCodeAt(0))||\n\x22.\x22\x3d\x3d\x3dch,\x22Numeric literal must start with a decimal digit or a decimal point\x22);var start\x3dindex$jscomp$0;var number\x3d\x22\x22;if(\x22.\x22!\x3d\x3dch){number\x3dsource[index$jscomp$0++];ch\x3dsource[index$jscomp$0];if(\x220\x22\x3d\x3d\x3dnumber){if(\x22x\x22\x3d\x3d\x3dch||\x22X\x22\x3d\x3d\x3dch){++index$jscomp$0;for(number\x3d\x22\x22;index$jscomp$0\x3clength\x26\x26isHexDigit(source[index$jscomp$0]);)number+\x3dsource[index$jscomp$0++];0\x3d\x3d\x3dnumber.length\x26\x26throwError({},\x22Unexpected token %0\x22,\x22ILLEGAL\x22);isIdentifierStart(source.charCodeAt(index$jscomp$0))\x26\x26throwError({},\x22Unexpected token %0\x22,\n\x22ILLEGAL\x22);return{type:6,value:parseInt(\x220x\x22+number,16),start:start,end:index$jscomp$0}}if(isOctalDigit(ch)){for(number\x3d\x220\x22+source[index$jscomp$0++];index$jscomp$0\x3clength\x26\x26isOctalDigit(source[index$jscomp$0]);)number+\x3dsource[index$jscomp$0++];(isIdentifierStart(source.charCodeAt(index$jscomp$0))||isDecimalDigit(source.charCodeAt(index$jscomp$0)))\x26\x26throwError({},\x22Unexpected token %0\x22,\x22ILLEGAL\x22);return{type:6,value:parseInt(number,8),octal:!0,start:start,end:index$jscomp$0}}ch\x26\x26isDecimalDigit(ch.charCodeAt(0))\x26\x26\nthrowError({},\x22Unexpected token %0\x22,\x22ILLEGAL\x22)}for(;isDecimalDigit(source.charCodeAt(index$jscomp$0));)number+\x3dsource[index$jscomp$0++];ch\x3dsource[index$jscomp$0]}if(\x22.\x22\x3d\x3d\x3dch){for(number+\x3dsource[index$jscomp$0++];isDecimalDigit(source.charCodeAt(index$jscomp$0));)number+\x3dsource[index$jscomp$0++];ch\x3dsource[index$jscomp$0]}if(\x22e\x22\x3d\x3d\x3dch||\x22E\x22\x3d\x3d\x3dch){number+\x3dsource[index$jscomp$0++];ch\x3dsource[index$jscomp$0];if(\x22+\x22\x3d\x3d\x3dch||\x22-\x22\x3d\x3d\x3dch)number+\x3dsource[index$jscomp$0++];if(isDecimalDigit(source.charCodeAt(index$jscomp$0)))for(;isDecimalDigit(source.charCodeAt(index$jscomp$0));)number+\x3d\nsource[index$jscomp$0++];else throwError({},\x22Unexpected token %0\x22,\x22ILLEGAL\x22)}isIdentifierStart(source.charCodeAt(index$jscomp$0))\x26\x26throwError({},\x22Unexpected token %0\x22,\x22ILLEGAL\x22);return{type:6,value:parseFloat(number),start:start,end:index$jscomp$0}}function testRegExp(pattern,flags){var tmp\x3dpattern;0\x3c\x3dflags.indexOf(\x22u\x22)\x26\x26(tmp\x3dtmp.replace(/\\\\u\\{([0-9a-fA-F]+)\\}/g,function($0,$1){if(1114111\x3e\x3dparseInt($1,16))return\x22x\x22;throwError({},\x22Invalid regular expression\x22)}).replace(/[\\uD800-\\uDBFF][\\uDC00-\\uDFFF]/g,\n\x22x\x22));try{new RegExp(tmp)}catch(e){throwError({},\x22Invalid regular expression\x22)}try{return new RegExp(pattern,flags)}catch(exception){return null}}function advance(){skipComment();if(index$jscomp$0\x3e\x3dlength)return{type:2,start:index$jscomp$0,end:index$jscomp$0};var ch\x3dsource.charCodeAt(index$jscomp$0);if(isIdentifierStart(ch)){ch\x3dindex$jscomp$0;if(92\x3d\x3d\x3dsource.charCodeAt(index$jscomp$0))var id\x3dgetEscapedIdentifier();else a:{for(id\x3dindex$jscomp$0++;index$jscomp$0\x3clength;){var ch$jscomp$0\x3dsource.charCodeAt(index$jscomp$0);\nif(92\x3d\x3d\x3dch$jscomp$0){index$jscomp$0\x3did;id\x3dgetEscapedIdentifier();break a}if(isIdentifierPart(ch$jscomp$0))++index$jscomp$0;else break}id\x3dsource.slice(id,index$jscomp$0)}return{type:1\x3d\x3d\x3did.length?3:keywords.hasOwnProperty(id)?4:\x22null\x22\x3d\x3d\x3did?5:\x22true\x22\x3d\x3d\x3did||\x22false\x22\x3d\x3d\x3did?1:3,value:id,start:ch,end:index$jscomp$0}}if(40\x3d\x3d\x3dch||41\x3d\x3d\x3dch||59\x3d\x3d\x3dch)return scanPunctuator();if(39\x3d\x3d\x3dch||34\x3d\x3d\x3dch){var str\x3d\x22\x22;ch$jscomp$0\x3d!1;ch\x3dsource[index$jscomp$0];assert(\x22\x27\x22\x3d\x3d\x3dch||\x27\x22\x27\x3d\x3d\x3dch,\x22String literal must starts with a quote\x22);\nid\x3dindex$jscomp$0;for(++index$jscomp$0;index$jscomp$0\x3clength;){var ch$jscomp$1\x3dsource[index$jscomp$0++];if(ch$jscomp$1\x3d\x3d\x3dch){ch\x3d\x22\x22;break}else if(\x22\\\\\x22\x3d\x3d\x3dch$jscomp$1)if((ch$jscomp$1\x3dsource[index$jscomp$0++])\x26\x26isLineTerminator(ch$jscomp$1.charCodeAt(0)))\x22\\r\x22\x3d\x3d\x3dch$jscomp$1\x26\x26\x22\\n\x22\x3d\x3d\x3dsource[index$jscomp$0]\x26\x26++index$jscomp$0;else switch(ch$jscomp$1){case \x22u\x22:case \x22x\x22:if(\x22{\x22\x3d\x3d\x3dsource[index$jscomp$0]){++index$jscomp$0;var code\x3dsource[index$jscomp$0];ch$jscomp$1\x3d0;for(\x22}\x22\x3d\x3d\x3dcode\x26\x26throwError({},\x22Unexpected token %0\x22,\n\x22ILLEGAL\x22);index$jscomp$0\x3clength;){code\x3dsource[index$jscomp$0++];if(!isHexDigit(code))break;ch$jscomp$1\x3d16*ch$jscomp$1+\x220123456789abcdef\x22.indexOf(code.toLowerCase())}(1114111\x3cch$jscomp$1||\x22}\x22!\x3d\x3dcode)\x26\x26throwError({},\x22Unexpected token %0\x22,\x22ILLEGAL\x22);ch$jscomp$1\x3d65535\x3e\x3dch$jscomp$1?String.fromCharCode(ch$jscomp$1):String.fromCharCode((ch$jscomp$1-65536\x3e\x3e10)+55296,(ch$jscomp$1-65536\x261023)+56320);str+\x3dch$jscomp$1}else str+\x3dscanHexEscape(ch$jscomp$1);break;case \x22n\x22:str+\x3d\x22\\n\x22;break;case \x22r\x22:str+\x3d\x22\\r\x22;break;\ncase \x22t\x22:str+\x3d\x22\\t\x22;break;case \x22b\x22:str+\x3d\x22\\b\x22;break;case \x22f\x22:str+\x3d\x22\\f\x22;break;case \x22v\x22:str+\x3d\x22\\x0B\x22;break;default:isOctalDigit(ch$jscomp$1)?(code\x3d\x2201234567\x22.indexOf(ch$jscomp$1),0!\x3d\x3dcode\x26\x26(ch$jscomp$0\x3d!0),index$jscomp$0\x3clength\x26\x26isOctalDigit(source[index$jscomp$0])\x26\x26(ch$jscomp$0\x3d!0,code\x3d8*code+\x2201234567\x22.indexOf(source[index$jscomp$0++]),0\x3c\x3d\x220123\x22.indexOf(ch$jscomp$1)\x26\x26index$jscomp$0\x3clength\x26\x26isOctalDigit(source[index$jscomp$0])\x26\x26(code\x3d8*code+\x2201234567\x22.indexOf(source[index$jscomp$0++]))),str+\x3dString.fromCharCode(code)):\nstr+\x3dch$jscomp$1}else if(isLineTerminator(ch$jscomp$1.charCodeAt(0)))break;else str+\x3dch$jscomp$1}\x22\x22!\x3d\x3dch\x26\x26throwError({},\x22Unexpected token %0\x22,\x22ILLEGAL\x22);return{type:8,value:str,octal:ch$jscomp$0,start:id,end:index$jscomp$0}}return 46\x3d\x3d\x3dch?isDecimalDigit(source.charCodeAt(index$jscomp$0+1))?scanNumericLiteral():scanPunctuator():isDecimalDigit(ch)?scanNumericLiteral():scanPunctuator()}function lex(){var token\x3dlookahead;index$jscomp$0\x3dtoken.end;lookahead\x3dadvance();index$jscomp$0\x3dtoken.end;return token}\nfunction peek(){var pos\x3dindex$jscomp$0;lookahead\x3dadvance();index$jscomp$0\x3dpos}function finishBinaryExpression(operator,left,right){var node\x3dnew ASTNode(\x22||\x22\x3d\x3d\x3doperator||\x22\\x26\\x26\x22\x3d\x3d\x3doperator?\x22LogicalExpression\x22:\x22BinaryExpression\x22);node.operator\x3doperator;node.left\x3dleft;node.right\x3dright;return node}function finishIdentifier(name){var node\x3dnew ASTNode(\x22Identifier\x22);node.name\x3dname;return node}function finishLiteral(token){var node\x3dnew ASTNode(\x22Literal\x22);node.value\x3dtoken.value;node.raw\x3dsource.slice(token.start,\ntoken.end);token.regex\x26\x26(\x22//\x22\x3d\x3d\x3dnode.raw\x26\x26(node.raw\x3d\x22/(?:)/\x22),node.regex\x3dtoken.regex);return node}function finishMemberExpression(accessor,object,property){var node\x3dnew ASTNode(\x22MemberExpression\x22);node.computed\x3d\x22[\x22\x3d\x3d\x3daccessor;node.object\x3dobject;node.property\x3dproperty;node.computed||(property.member\x3d!0);return node}function finishProperty(kind,key,value){var node\x3dnew ASTNode(\x22Property\x22);node.key\x3dkey;node.value\x3dvalue;node.kind\x3dkind;return node}function throwError(token,messageFormat){var args\x3dArray.prototype.slice.call(arguments,\n2),msg\x3dmessageFormat.replace(/%(\\d)/g,function(whole,index){assert(index\x3cargs.length,\x22Message reference must be in range\x22);return args[index]});var error\x3dError(msg);error.index\x3dindex$jscomp$0;error.description\x3dmsg;throw error;}function throwUnexpected(token){2\x3d\x3d\x3dtoken.type\x26\x26throwError(token,\x22Unexpected end of input\x22);6\x3d\x3d\x3dtoken.type\x26\x26throwError(token,\x22Unexpected number\x22);8\x3d\x3d\x3dtoken.type\x26\x26throwError(token,\x22Unexpected string\x22);3\x3d\x3d\x3dtoken.type\x26\x26throwError(token,\x22Unexpected identifier\x22);4\x3d\x3d\x3dtoken.type\x26\x26\nthrowError(token,\x22Unexpected reserved word\x22);throwError(token,\x22Unexpected token %0\x22,token.value)}function expect(value){var token\x3dlex();7\x3d\x3d\x3dtoken.type\x26\x26token.value\x3d\x3d\x3dvalue||throwUnexpected(token)}function match(value){return 7\x3d\x3d\x3dlookahead.type\x26\x26lookahead.value\x3d\x3d\x3dvalue}function parseObjectPropertyKey(){index$jscomp$0\x3dlookahead.start;var token\x3dlex();return 8\x3d\x3d\x3dtoken.type||6\x3d\x3d\x3dtoken.type?(token.octal\x26\x26throwError(token,\x22Octal literals are not allowed in strict mode.\x22),finishLiteral(token)):finishIdentifier(token.value)}\nfunction parsePrimaryExpression(){if(match(\x22(\x22)){expect(\x22(\x22);var type\x3dparseExpression();expect(\x22)\x22);return type}if(match(\x22[\x22)){type\x3d[];index$jscomp$0\x3dlookahead.start;for(expect(\x22[\x22);!match(\x22]\x22);)match(\x22,\x22)?(lex(),type.push(null)):(type.push(parseConditionalExpression()),match(\x22]\x22)||expect(\x22,\x22));lex();var JSCompiler_object_inline_value_8119\x3dnew ASTNode(\x22ArrayExpression\x22);JSCompiler_object_inline_value_8119.elements\x3dtype;return JSCompiler_object_inline_value_8119}if(match(\x22{\x22)){type\x3d[];JSCompiler_object_inline_value_8119\x3d\n{};var JSCompiler_object_inline_literal_8120\x3dString;index$jscomp$0\x3dlookahead.start;for(expect(\x22{\x22);!match(\x22}\x22);){index$jscomp$0\x3dlookahead.start;var JSCompiler_object_inline_value_8121\x3dlookahead;if(3\x3d\x3d\x3dJSCompiler_object_inline_value_8121.type){var JSCompiler_object_inline_literal_8122\x3dparseObjectPropertyKey();expect(\x22:\x22);JSCompiler_object_inline_value_8121\x3dparseConditionalExpression();JSCompiler_object_inline_value_8121\x3dfinishProperty(\x22init\x22,JSCompiler_object_inline_literal_8122,JSCompiler_object_inline_value_8121)}else 2\x3d\x3d\x3d\nJSCompiler_object_inline_value_8121.type||7\x3d\x3d\x3dJSCompiler_object_inline_value_8121.type?(throwUnexpected(JSCompiler_object_inline_value_8121),JSCompiler_object_inline_value_8121\x3dvoid 0):(JSCompiler_object_inline_literal_8122\x3dparseObjectPropertyKey(),expect(\x22:\x22),JSCompiler_object_inline_value_8121\x3dparseConditionalExpression(),JSCompiler_object_inline_value_8121\x3dfinishProperty(\x22init\x22,JSCompiler_object_inline_literal_8122,JSCompiler_object_inline_value_8121));JSCompiler_object_inline_literal_8122\x3d\x22Identifier\x22\x3d\x3d\x3d\nJSCompiler_object_inline_value_8121.key.type?JSCompiler_object_inline_value_8121.key.name:JSCompiler_object_inline_literal_8120(JSCompiler_object_inline_value_8121.key.value);JSCompiler_object_inline_literal_8122\x3d\x22$\x22+JSCompiler_object_inline_literal_8122;Object.prototype.hasOwnProperty.call(JSCompiler_object_inline_value_8119,JSCompiler_object_inline_literal_8122)?throwError({},\x22Duplicate data property in object literal not allowed in strict mode\x22):JSCompiler_object_inline_value_8119[JSCompiler_object_inline_literal_8122]\x3d\n!0;type.push(JSCompiler_object_inline_value_8121);match(\x22}\x22)||expect(\x22,\x22)}expect(\x22}\x22);JSCompiler_object_inline_value_8119\x3dnew ASTNode(\x22ObjectExpression\x22);JSCompiler_object_inline_value_8119.properties\x3dtype;return JSCompiler_object_inline_value_8119}type\x3dlookahead.type;index$jscomp$0\x3dlookahead.start;if(3\x3d\x3d\x3dtype||legalKeywords[lookahead.value])JSCompiler_object_inline_value_8119\x3dfinishIdentifier(lex().value);else if(8\x3d\x3d\x3dtype||6\x3d\x3d\x3dtype)lookahead.octal\x26\x26throwError(lookahead,\x22Octal literals are not allowed in strict mode.\x22),\nJSCompiler_object_inline_value_8119\x3dfinishLiteral(lex());else{if(4\x3d\x3d\x3dtype)throw Error(\x22Disabled.\x22);if(1\x3d\x3d\x3dtype)type\x3dlex(),type.value\x3d\x22true\x22\x3d\x3d\x3dtype.value,JSCompiler_object_inline_value_8119\x3dfinishLiteral(type);else if(5\x3d\x3d\x3dtype)type\x3dlex(),type.value\x3dnull,JSCompiler_object_inline_value_8119\x3dfinishLiteral(type);else if(match(\x22/\x22)||match(\x22/\\x3d\x22)){var value;lookahead\x3dnull;skipComment();type\x3dindex$jscomp$0;JSCompiler_object_inline_value_8119\x3dsource[index$jscomp$0];assert(\x22/\x22\x3d\x3d\x3dJSCompiler_object_inline_value_8119,\n\x22Regular expression literal must start with a slash\x22);JSCompiler_object_inline_literal_8120\x3dsource[index$jscomp$0++];for(JSCompiler_object_inline_literal_8122\x3dJSCompiler_object_inline_value_8121\x3d!1;index$jscomp$0\x3clength;)if(JSCompiler_object_inline_value_8119\x3dsource[index$jscomp$0++],JSCompiler_object_inline_literal_8120+\x3dJSCompiler_object_inline_value_8119,\x22\\\\\x22\x3d\x3d\x3dJSCompiler_object_inline_value_8119)JSCompiler_object_inline_value_8119\x3dsource[index$jscomp$0++],isLineTerminator(JSCompiler_object_inline_value_8119.charCodeAt(0))\x26\x26\nthrowError({},\x22Invalid regular expression: missing /\x22),JSCompiler_object_inline_literal_8120+\x3dJSCompiler_object_inline_value_8119;else if(isLineTerminator(JSCompiler_object_inline_value_8119.charCodeAt(0)))throwError({},\x22Invalid regular expression: missing /\x22);else if(JSCompiler_object_inline_value_8121)\x22]\x22\x3d\x3d\x3dJSCompiler_object_inline_value_8119\x26\x26(JSCompiler_object_inline_value_8121\x3d!1);else if(\x22/\x22\x3d\x3d\x3dJSCompiler_object_inline_value_8119){JSCompiler_object_inline_literal_8122\x3d!0;break}else\x22[\x22\x3d\x3d\x3dJSCompiler_object_inline_value_8119\x26\x26\n(JSCompiler_object_inline_value_8121\x3d!0);JSCompiler_object_inline_literal_8122||throwError({},\x22Invalid regular expression: missing /\x22);JSCompiler_object_inline_value_8119\x3dJSCompiler_object_inline_literal_8120.substr(1,JSCompiler_object_inline_literal_8120.length-2);for(value\x3dJSCompiler_object_inline_literal_8122\x3d\x22\x22;index$jscomp$0\x3clength;){JSCompiler_object_inline_value_8121\x3dsource[index$jscomp$0];if(!isIdentifierPart(JSCompiler_object_inline_value_8121.charCodeAt(0)))break;++index$jscomp$0;\x22\\\\\x22\x3d\x3d\x3d\nJSCompiler_object_inline_value_8121\x26\x26index$jscomp$0\x3clength?throwError({},\x22Unexpected token %0\x22,\x22ILLEGAL\x22):(value+\x3dJSCompiler_object_inline_value_8121,JSCompiler_object_inline_literal_8122+\x3dJSCompiler_object_inline_value_8121)}0\x3c\x3dvalue.search(/[^gimuy]/g)\x26\x26throwError({},\x22Invalid regular expression\x22,value);JSCompiler_object_inline_value_8121\x3dvalue;value\x3dtestRegExp(JSCompiler_object_inline_value_8119,JSCompiler_object_inline_value_8121);JSCompiler_object_inline_value_8119\x3dfinishLiteral({literal:JSCompiler_object_inline_literal_8120+\nJSCompiler_object_inline_literal_8122,value:value,regex:{pattern:JSCompiler_object_inline_value_8119,flags:JSCompiler_object_inline_value_8121},start:type,end:index$jscomp$0});peek()}else throwUnexpected(lex())}return JSCompiler_object_inline_value_8119}function parsePostfixExpression(){var expr;for(expr\x3dparsePrimaryExpression();;)if(match(\x22.\x22)){expect(\x22.\x22);index$jscomp$0\x3dlookahead.start;var args\x3dlex();3\x3d\x3d\x3dargs.type||4\x3d\x3d\x3dargs.type||1\x3d\x3d\x3dargs.type||5\x3d\x3d\x3dargs.type||throwUnexpected(args);args\x3dfinishIdentifier(args.value);\nexpr\x3dfinishMemberExpression(\x22.\x22,expr,args)}else if(match(\x22(\x22)){args\x3d[];expect(\x22(\x22);if(!match(\x22)\x22))for(;index$jscomp$0\x3clength;){args.push(parseConditionalExpression());if(match(\x22)\x22))break;expect(\x22,\x22)}expect(\x22)\x22);var node\x3dnew ASTNode(\x22CallExpression\x22);node.callee\x3dexpr;node.arguments\x3dargs;expr\x3dnode}else if(match(\x22[\x22))expect(\x22[\x22),args\x3dparseExpression(),expect(\x22]\x22),expr\x3dfinishMemberExpression(\x22[\x22,expr,args);else break;if(7\x3d\x3d\x3dlookahead.type\x26\x26(match(\x22++\x22)||match(\x22--\x22)))throw Error(\x22Disabled.\x22);return expr}\nfunction parseUnaryExpression(){if(7!\x3d\x3dlookahead.type\x26\x264!\x3d\x3dlookahead.type)var expr\x3dparsePostfixExpression();else{if(match(\x22++\x22)||match(\x22--\x22))throw Error(\x22Disabled.\x22);if(match(\x22+\x22)||match(\x22-\x22)||match(\x22~\x22)||match(\x22!\x22)){var token\x3dlex();expr\x3dparseUnaryExpression();token\x3dtoken.value;var node\x3dnew ASTNode(\x22UnaryExpression\x22);node.operator\x3dtoken;node.argument\x3dexpr;node.prefix\x3d!0;expr\x3dnode}else{if(4\x3d\x3d\x3dlookahead.type\x26\x26\x22delete\x22\x3d\x3d\x3dlookahead.value||4\x3d\x3d\x3dlookahead.type\x26\x26\x22void\x22\x3d\x3d\x3dlookahead.value||4\x3d\x3d\x3dlookahead.type\x26\x26\n\x22typeof\x22\x3d\x3d\x3dlookahead.value)throw Error(\x22Disabled.\x22);expr\x3dparsePostfixExpression()}}return expr}function binaryPrecedence(token){var prec\x3d0;if(7!\x3d\x3dtoken.type\x26\x264!\x3d\x3dtoken.type)return 0;switch(token.value){case \x22||\x22:prec\x3d1;break;case \x22\\x26\\x26\x22:prec\x3d2;break;case \x22|\x22:prec\x3d3;break;case \x22^\x22:prec\x3d4;break;case \x22\\x26\x22:prec\x3d5;break;case \x22\\x3d\\x3d\x22:case \x22!\\x3d\x22:case \x22\\x3d\\x3d\\x3d\x22:case \x22!\\x3d\\x3d\x22:prec\x3d6;break;case \x22\\x3c\x22:case \x22\\x3e\x22:case \x22\\x3c\\x3d\x22:case \x22\\x3e\\x3d\x22:case \x22instanceof\x22:case \x22in\x22:prec\x3d7;break;case \x22\\x3c\\x3c\x22:case \x22\\x3e\\x3e\x22:case \x22\\x3e\\x3e\\x3e\x22:prec\x3d\n8;break;case \x22+\x22:case \x22-\x22:prec\x3d9;break;case \x22*\x22:case \x22/\x22:case \x22%\x22:prec\x3d11}return prec}function parseConditionalExpression(){var consequent\x3dlookahead;var expr\x3dparseUnaryExpression();var token\x3dlookahead;var alternate\x3dbinaryPrecedence(token);if(0\x3d\x3d\x3dalternate)var expr$jscomp$0\x3dexpr;else{token.prec\x3dalternate;lex();consequent\x3d[consequent,lookahead];var right\x3dparseUnaryExpression();for(expr$jscomp$0\x3d[expr,token,right];0\x3c(alternate\x3dbinaryPrecedence(lookahead));){for(;2\x3cexpr$jscomp$0.length\x26\x26alternate\x3c\x3dexpr$jscomp$0[expr$jscomp$0.length-\n2].prec;)right\x3dexpr$jscomp$0.pop(),token\x3dexpr$jscomp$0.pop().value,expr\x3dexpr$jscomp$0.pop(),consequent.pop(),expr\x3dfinishBinaryExpression(token,expr,right),expr$jscomp$0.push(expr);token\x3dlex();token.prec\x3dalternate;expr$jscomp$0.push(token);consequent.push(lookahead);expr\x3dparseUnaryExpression();expr$jscomp$0.push(expr)}alternate\x3dexpr$jscomp$0.length-1;expr\x3dexpr$jscomp$0[alternate];for(consequent.pop();1\x3calternate;)consequent.pop(),expr\x3dfinishBinaryExpression(expr$jscomp$0[alternate-1].value,expr$jscomp$0[alternate-\n2],expr),alternate-\x3d2;expr$jscomp$0\x3dexpr}match(\x22?\x22)\x26\x26(lex(),consequent\x3dparseConditionalExpression(),expect(\x22:\x22),alternate\x3dparseConditionalExpression(),expr\x3dnew ASTNode(\x22ConditionalExpression\x22),expr.test\x3dexpr$jscomp$0,expr.consequent\x3dconsequent,expr.alternate\x3dalternate,expr$jscomp$0\x3dexpr);return expr$jscomp$0}function parseExpression(){var expr\x3dparseConditionalExpression();if(match(\x22,\x22))throw Error(\x22Disabled.\x22);return expr}function Functions(codegen){function fn(name,cast,type){return function(args){var obj\x3d\ncodegen(args[0]);cast\x26\x26(obj\x3dcast+\x22(\x22+obj+\x22)\x22,0\x3d\x3d\x3dcast.lastIndexOf(\x22new \x22,0)\x26\x26(obj\x3d\x22(\x22+obj+\x22)\x22));return obj+\x22.\x22+name+(0\x3etype?\x22\x22:0\x3d\x3d\x3dtype?\x22()\x22:\x22(\x22+args.slice(1).map(codegen).join(\x22,\x22)+\x22)\x22)}}return{isNaN:\x22Number.isNaN\x22,isFinite:\x22Number.isFinite\x22,abs:\x22Math.abs\x22,acos:\x22Math.acos\x22,asin:\x22Math.asin\x22,atan:\x22Math.atan\x22,atan2:\x22Math.atan2\x22,ceil:\x22Math.ceil\x22,cos:\x22Math.cos\x22,exp:\x22Math.exp\x22,floor:\x22Math.floor\x22,log:\x22Math.log\x22,max:\x22Math.max\x22,min:\x22Math.min\x22,pow:\x22Math.pow\x22,random:\x22Math.random\x22,round:\x22Math.round\x22,sin:\x22Math.sin\x22,\nsqrt:\x22Math.sqrt\x22,tan:\x22Math.tan\x22,clamp:function(args){3\x3eargs.length\x26\x26vegaUtil.error(\x22Missing arguments to clamp function.\x22);3\x3cargs.length\x26\x26vegaUtil.error(\x22Too many arguments to clamp function.\x22);args\x3dargs.map(codegen);return\x22Math.max(\x22+args[1]+\x22, Math.min(\x22+args[2]+\x22,\x22+args[0]+\x22))\x22},now:\x22Date.now\x22,utc:\x22Date.UTC\x22,datetime:\x22new Date\x22,date:fn(\x22getDate\x22,\x22new Date\x22,0),day:fn(\x22getDay\x22,\x22new Date\x22,0),year:fn(\x22getFullYear\x22,\x22new Date\x22,0),month:fn(\x22getMonth\x22,\x22new Date\x22,0),hours:fn(\x22getHours\x22,\x22new Date\x22,0),minutes:fn(\x22getMinutes\x22,\n\x22new Date\x22,0),seconds:fn(\x22getSeconds\x22,\x22new Date\x22,0),milliseconds:fn(\x22getMilliseconds\x22,\x22new Date\x22,0),time:fn(\x22getTime\x22,\x22new Date\x22,0),timezoneoffset:fn(\x22getTimezoneOffset\x22,\x22new Date\x22,0),utcdate:fn(\x22getUTCDate\x22,\x22new Date\x22,0),utcday:fn(\x22getUTCDay\x22,\x22new Date\x22,0),utcyear:fn(\x22getUTCFullYear\x22,\x22new Date\x22,0),utcmonth:fn(\x22getUTCMonth\x22,\x22new Date\x22,0),utchours:fn(\x22getUTCHours\x22,\x22new Date\x22,0),utcminutes:fn(\x22getUTCMinutes\x22,\x22new Date\x22,0),utcseconds:fn(\x22getUTCSeconds\x22,\x22new Date\x22,0),utcmilliseconds:fn(\x22getUTCMilliseconds\x22,\n\x22new Date\x22,0),length:fn(\x22length\x22,null,-1),join:fn(\x22join\x22,null),indexof:fn(\x22indexOf\x22,null),lastindexof:fn(\x22lastIndexOf\x22,null),slice:fn(\x22slice\x22,null),reverse:function(args){return\x22(\x22+codegen(args[0])+\x22).slice().reverse()\x22},parseFloat:\x22parseFloat\x22,parseInt:\x22parseInt\x22,upper:fn(\x22toUpperCase\x22,\x22String\x22,0),lower:fn(\x22toLowerCase\x22,\x22String\x22,0),substring:fn(\x22substring\x22,\x22String\x22),split:fn(\x22split\x22,\x22String\x22),replace:fn(\x22replace\x22,\x22String\x22),trim:fn(\x22trim\x22,\x22String\x22,0),regexp:\x22RegExp\x22,test:fn(\x22test\x22,\x22RegExp\x22),if:function(args){3\x3e\nargs.length\x26\x26vegaUtil.error(\x22Missing arguments to if function.\x22);3\x3cargs.length\x26\x26vegaUtil.error(\x22Too many arguments to if function.\x22);args\x3dargs.map(codegen);return\x22(\x22+args[0]+\x22?\x22+args[1]+\x22:\x22+args[2]+\x22)\x22}}}ASTNode.prototype.visit\x3dfunction(visitor){var n;if(visitor(this))return 1;var c\x3dchildren(this);var i\x3d0;for(n\x3dc.length;i\x3cn;++i)if(c[i].visit(visitor))return 1};var source,index$jscomp$0,length,lookahead,RegexNonAsciiIdentifierStart\x3d/[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0370-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0620-\\u064A\\u066E\\u066F\\u0671-\\u06D3\\u06D5\\u06E5\\u06E6\\u06EE\\u06EF\\u06FA-\\u06FC\\u06FF\\u0710\\u0712-\\u072F\\u074D-\\u07A5\\u07B1\\u07CA-\\u07EA\\u07F4\\u07F5\\u07FA\\u0800-\\u0815\\u081A\\u0824\\u0828\\u0840-\\u0858\\u08A0-\\u08B2\\u0904-\\u0939\\u093D\\u0950\\u0958-\\u0961\\u0971-\\u0980\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BD\\u09CE\\u09DC\\u09DD\\u09DF-\\u09E1\\u09F0\\u09F1\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A59-\\u0A5C\\u0A5E\\u0A72-\\u0A74\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABD\\u0AD0\\u0AE0\\u0AE1\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3D\\u0B5C\\u0B5D\\u0B5F-\\u0B61\\u0B71\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BD0\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D\\u0C58\\u0C59\\u0C60\\u0C61\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBD\\u0CDE\\u0CE0\\u0CE1\\u0CF1\\u0CF2\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D\\u0D4E\\u0D60\\u0D61\\u0D7A-\\u0D7F\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0E01-\\u0E30\\u0E32\\u0E33\\u0E40-\\u0E46\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB0\\u0EB2\\u0EB3\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EDC-\\u0EDF\\u0F00\\u0F40-\\u0F47\\u0F49-\\u0F6C\\u0F88-\\u0F8C\\u1000-\\u102A\\u103F\\u1050-\\u1055\\u105A-\\u105D\\u1061\\u1065\\u1066\\u106E-\\u1070\\u1075-\\u1081\\u108E\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1711\\u1720-\\u1731\\u1740-\\u1751\\u1760-\\u176C\\u176E-\\u1770\\u1780-\\u17B3\\u17D7\\u17DC\\u1820-\\u1877\\u1880-\\u18A8\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1950-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19C1-\\u19C7\\u1A00-\\u1A16\\u1A20-\\u1A54\\u1AA7\\u1B05-\\u1B33\\u1B45-\\u1B4B\\u1B83-\\u1BA0\\u1BAE\\u1BAF\\u1BBA-\\u1BE5\\u1C00-\\u1C23\\u1C4D-\\u1C4F\\u1C5A-\\u1C7D\\u1CE9-\\u1CEC\\u1CEE-\\u1CF1\\u1CF5\\u1CF6\\u1D00-\\u1DBF\\u1E00-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u2071\\u207F\\u2090-\\u209C\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CEE\\u2CF2\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D80-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2E2F\\u3005-\\u3007\\u3021-\\u3029\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA61F\\uA62A\\uA62B\\uA640-\\uA66E\\uA67F-\\uA69D\\uA6A0-\\uA6EF\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA801\\uA803-\\uA805\\uA807-\\uA80A\\uA80C-\\uA822\\uA840-\\uA873\\uA882-\\uA8B3\\uA8F2-\\uA8F7\\uA8FB\\uA90A-\\uA925\\uA930-\\uA946\\uA960-\\uA97C\\uA984-\\uA9B2\\uA9CF\\uA9E0-\\uA9E4\\uA9E6-\\uA9EF\\uA9FA-\\uA9FE\\uAA00-\\uAA28\\uAA40-\\uAA42\\uAA44-\\uAA4B\\uAA60-\\uAA76\\uAA7A\\uAA7E-\\uAAAF\\uAAB1\\uAAB5\\uAAB6\\uAAB9-\\uAABD\\uAAC0\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEA\\uAAF2-\\uAAF4\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABE2\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D\\uFB1F-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF21-\\uFF3A\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]/,\nRegexNonAsciiIdentifierPart\x3d/[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0300-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u0483-\\u0487\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u0591-\\u05BD\\u05BF\\u05C1\\u05C2\\u05C4\\u05C5\\u05C7\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0610-\\u061A\\u0620-\\u0669\\u066E-\\u06D3\\u06D5-\\u06DC\\u06DF-\\u06E8\\u06EA-\\u06FC\\u06FF\\u0710-\\u074A\\u074D-\\u07B1\\u07C0-\\u07F5\\u07FA\\u0800-\\u082D\\u0840-\\u085B\\u08A0-\\u08B2\\u08E4-\\u0963\\u0966-\\u096F\\u0971-\\u0983\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BC-\\u09C4\\u09C7\\u09C8\\u09CB-\\u09CE\\u09D7\\u09DC\\u09DD\\u09DF-\\u09E3\\u09E6-\\u09F1\\u0A01-\\u0A03\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A3C\\u0A3E-\\u0A42\\u0A47\\u0A48\\u0A4B-\\u0A4D\\u0A51\\u0A59-\\u0A5C\\u0A5E\\u0A66-\\u0A75\\u0A81-\\u0A83\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABC-\\u0AC5\\u0AC7-\\u0AC9\\u0ACB-\\u0ACD\\u0AD0\\u0AE0-\\u0AE3\\u0AE6-\\u0AEF\\u0B01-\\u0B03\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3C-\\u0B44\\u0B47\\u0B48\\u0B4B-\\u0B4D\\u0B56\\u0B57\\u0B5C\\u0B5D\\u0B5F-\\u0B63\\u0B66-\\u0B6F\\u0B71\\u0B82\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BBE-\\u0BC2\\u0BC6-\\u0BC8\\u0BCA-\\u0BCD\\u0BD0\\u0BD7\\u0BE6-\\u0BEF\\u0C00-\\u0C03\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D-\\u0C44\\u0C46-\\u0C48\\u0C4A-\\u0C4D\\u0C55\\u0C56\\u0C58\\u0C59\\u0C60-\\u0C63\\u0C66-\\u0C6F\\u0C81-\\u0C83\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBC-\\u0CC4\\u0CC6-\\u0CC8\\u0CCA-\\u0CCD\\u0CD5\\u0CD6\\u0CDE\\u0CE0-\\u0CE3\\u0CE6-\\u0CEF\\u0CF1\\u0CF2\\u0D01-\\u0D03\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D-\\u0D44\\u0D46-\\u0D48\\u0D4A-\\u0D4E\\u0D57\\u0D60-\\u0D63\\u0D66-\\u0D6F\\u0D7A-\\u0D7F\\u0D82\\u0D83\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0DCA\\u0DCF-\\u0DD4\\u0DD6\\u0DD8-\\u0DDF\\u0DE6-\\u0DEF\\u0DF2\\u0DF3\\u0E01-\\u0E3A\\u0E40-\\u0E4E\\u0E50-\\u0E59\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB9\\u0EBB-\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EC8-\\u0ECD\\u0ED0-\\u0ED9\\u0EDC-\\u0EDF\\u0F00\\u0F18\\u0F19\\u0F20-\\u0F29\\u0F35\\u0F37\\u0F39\\u0F3E-\\u0F47\\u0F49-\\u0F6C\\u0F71-\\u0F84\\u0F86-\\u0F97\\u0F99-\\u0FBC\\u0FC6\\u1000-\\u1049\\u1050-\\u109D\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u135D-\\u135F\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1714\\u1720-\\u1734\\u1740-\\u1753\\u1760-\\u176C\\u176E-\\u1770\\u1772\\u1773\\u1780-\\u17D3\\u17D7\\u17DC\\u17DD\\u17E0-\\u17E9\\u180B-\\u180D\\u1810-\\u1819\\u1820-\\u1877\\u1880-\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1920-\\u192B\\u1930-\\u193B\\u1946-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19B0-\\u19C9\\u19D0-\\u19D9\\u1A00-\\u1A1B\\u1A20-\\u1A5E\\u1A60-\\u1A7C\\u1A7F-\\u1A89\\u1A90-\\u1A99\\u1AA7\\u1AB0-\\u1ABD\\u1B00-\\u1B4B\\u1B50-\\u1B59\\u1B6B-\\u1B73\\u1B80-\\u1BF3\\u1C00-\\u1C37\\u1C40-\\u1C49\\u1C4D-\\u1C7D\\u1CD0-\\u1CD2\\u1CD4-\\u1CF6\\u1CF8\\u1CF9\\u1D00-\\u1DF5\\u1DFC-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u200C\\u200D\\u203F\\u2040\\u2054\\u2071\\u207F\\u2090-\\u209C\\u20D0-\\u20DC\\u20E1\\u20E5-\\u20F0\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D7F-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2DE0-\\u2DFF\\u2E2F\\u3005-\\u3007\\u3021-\\u302F\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u3099\\u309A\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA62B\\uA640-\\uA66F\\uA674-\\uA67D\\uA67F-\\uA69D\\uA69F-\\uA6F1\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA827\\uA840-\\uA873\\uA880-\\uA8C4\\uA8D0-\\uA8D9\\uA8E0-\\uA8F7\\uA8FB\\uA900-\\uA92D\\uA930-\\uA953\\uA960-\\uA97C\\uA980-\\uA9C0\\uA9CF-\\uA9D9\\uA9E0-\\uA9FE\\uAA00-\\uAA36\\uAA40-\\uAA4D\\uAA50-\\uAA59\\uAA60-\\uAA76\\uAA7A-\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEF\\uAAF2-\\uAAF6\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABEA\\uABEC\\uABED\\uABF0-\\uABF9\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE00-\\uFE0F\\uFE20-\\uFE2D\\uFE33\\uFE34\\uFE4D-\\uFE4F\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF10-\\uFF19\\uFF21-\\uFF3A\\uFF3F\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]/,\nkeywords\x3d{\x22if\x22:1,\x22in\x22:1,\x22do\x22:1,\x22var\x22:1,\x22for\x22:1,\x22new\x22:1,\x22try\x22:1,let:1,\x22this\x22:1,\x22else\x22:1,\x22case\x22:1,\x22void\x22:1,\x22with\x22:1,\x22enum\x22:1,\x22while\x22:1,\x22break\x22:1,\x22catch\x22:1,\x22throw\x22:1,\x22const\x22:1,yield:1,\x22class\x22:1,\x22super\x22:1,\x22return\x22:1,\x22typeof\x22:1,\x22delete\x22:1,\x22switch\x22:1,\x22export\x22:1,\x22import\x22:1,\x22public\x22:1,\x22static\x22:1,\x22default\x22:1,\x22finally\x22:1,\x22extends\x22:1,\x22package\x22:1,\x22private\x22:1,\x22function\x22:1,\x22continue\x22:1,\x22debugger\x22:1,\x22interface\x22:1,\x22protected\x22:1,\x22instanceof\x22:1,\x22implements\x22:1},legalKeywords\x3d{\x22if\x22:1},Constants\x3d{NaN:\x22NaN\x22,E:\x22Math.E\x22,\nLN2:\x22Math.LN2\x22,LN10:\x22Math.LN10\x22,LOG2E:\x22Math.LOG2E\x22,LOG10E:\x22Math.LOG10E\x22,PI:\x22Math.PI\x22,SQRT1_2:\x22Math.SQRT1_2\x22,SQRT2:\x22Math.SQRT2\x22,MIN_VALUE:\x22Number.MIN_VALUE\x22,MAX_VALUE:\x22Number.MAX_VALUE\x22};exports.ASTNode\x3dASTNode;exports.ArrayExpression\x3d\x22ArrayExpression\x22;exports.BinaryExpression\x3d\x22BinaryExpression\x22;exports.CallExpression\x3d\x22CallExpression\x22;exports.ConditionalExpression\x3d\x22ConditionalExpression\x22;exports.Identifier\x3d\x22Identifier\x22;exports.Literal\x3d\x22Literal\x22;exports.LogicalExpression\x3d\x22LogicalExpression\x22;exports.MemberExpression\x3d\n\x22MemberExpression\x22;exports.ObjectExpression\x3d\x22ObjectExpression\x22;exports.Property\x3d\x22Property\x22;exports.RawCode\x3d\x22RawCode\x22;exports.UnaryExpression\x3d\x22UnaryExpression\x22;exports.codegen\x3dfunction(opt){function visit(ast){if(vegaUtil.isString(ast))return ast;var generator\x3dGenerators[ast.type];null\x3d\x3dgenerator\x26\x26vegaUtil.error(\x22Unsupported type: \x22+ast.type);return generator(ast)}function codegen(ast){ast\x3d{code:visit(ast),globals:Object.keys(globals),fields:Object.keys(fields)};globals\x3d{};fields\x3d{};return ast}opt\x3d\nopt||{};var whitelist\x3dopt.whitelist?vegaUtil.toSet(opt.whitelist):{},blacklist\x3dopt.blacklist?vegaUtil.toSet(opt.blacklist):{},constants\x3dopt.constants||Constants,functions\x3d(opt.functions||Functions)(visit),globalvar\x3dopt.globalvar,fieldvar\x3dopt.fieldvar,globals\x3d{},fields\x3d{},memberDepth\x3d0,outputGlobal\x3dvegaUtil.isFunction(globalvar)?globalvar:function(id){return globalvar+\x27[\x22\x27+id+\x27\x22]\x27},Generators\x3d{Literal:function(n){return n.raw},Identifier:function(n){n\x3dn.name;if(0\x3cmemberDepth)return n;if(vegaUtil.hasOwnProperty(blacklist,\nn))return vegaUtil.error(\x22Illegal identifier: \x22+n);if(vegaUtil.hasOwnProperty(constants,n))return constants[n];if(vegaUtil.hasOwnProperty(whitelist,n))return n;globals[n]\x3d1;return outputGlobal(n)},MemberExpression:function(n){var d\x3d!n.computed,o\x3dvisit(n.object);d\x26\x26(memberDepth+\x3d1);n\x3dvisit(n.property);if(o\x3d\x3d\x3dfieldvar){var JSCompiler_temp_const\x3dfields;var JSCompiler_inline_result\x3d(JSCompiler_inline_result\x3dn\x26\x26n.length-1)\x26\x26(\x27\x22\x27\x3d\x3d\x3dn[0]\x26\x26\x27\x22\x27\x3d\x3d\x3dn[JSCompiler_inline_result]||\x22\x27\x22\x3d\x3d\x3dn[0]\x26\x26\x22\x27\x22\x3d\x3d\x3dn[JSCompiler_inline_result])?\nn.slice(1,-1):n;JSCompiler_temp_const[JSCompiler_inline_result]\x3d1}d\x26\x26--memberDepth;return o+(d?\x22.\x22+n:\x22[\x22+n+\x22]\x22)},CallExpression:function(n){\x22Identifier\x22!\x3d\x3dn.callee.type\x26\x26vegaUtil.error(\x22Illegal callee type: \x22+n.callee.type);var callee\x3dn.callee.name;n\x3dn.arguments;var fn\x3dvegaUtil.hasOwnProperty(functions,callee)\x26\x26functions[callee];fn||vegaUtil.error(\x22Unrecognized function: \x22+callee);return vegaUtil.isFunction(fn)?fn(n):fn+\x22(\x22+n.map(visit).join(\x22,\x22)+\x22)\x22},ArrayExpression:function(n){return\x22[\x22+n.elements.map(visit).join(\x22,\x22)+\n\x22]\x22},BinaryExpression:function(n){return\x22(\x22+visit(n.left)+n.operator+visit(n.right)+\x22)\x22},UnaryExpression:function(n){return\x22(\x22+n.operator+visit(n.argument)+\x22)\x22},ConditionalExpression:function(n){return\x22(\x22+visit(n.test)+\x22?\x22+visit(n.consequent)+\x22:\x22+visit(n.alternate)+\x22)\x22},LogicalExpression:function(n){return\x22(\x22+visit(n.left)+n.operator+visit(n.right)+\x22)\x22},ObjectExpression:function(n){return\x22{\x22+n.properties.map(visit).join(\x22,\x22)+\x22}\x22},Property:function(n){memberDepth+\x3d1;var k\x3dvisit(n.key);--memberDepth;\nreturn k+\x22:\x22+visit(n.value)}};codegen.functions\x3dfunctions;codegen.constants\x3dconstants;return codegen};exports.constants\x3dConstants;exports.functions\x3dFunctions;exports.parse\x3dfunction(code){source\x3dcode;index$jscomp$0\x3d0;length\x3dsource.length;lookahead\x3dnull;peek();code\x3dparseExpression();if(2!\x3d\x3dlookahead.type)throw Error(\x22Unexpect token after expression.\x22);return code};Object.defineProperty(exports,\x22__esModule\x22,{value:!0})})}");
SHADOW_ENV.evalLoad("module$node_modules$vega_selections$build$vega_selections.js", true , "shadow$provide.module$node_modules$vega_selections$build$vega_selections\x3dfunction(global$jscomp$0,require,module,exports$jscomp$0){(function(global,factory){\x22object\x22\x3d\x3d\x3dtypeof exports$jscomp$0\x26\x26\x22undefined\x22!\x3d\x3dtypeof module?factory(exports$jscomp$0,require(\x22module$node_modules$vega_util$build$vega_util\x22),require(\x22module$node_modules$vega_expression$build$vega_expression\x22)):\x22function\x22\x3d\x3d\x3dtypeof define\x26\x26define.amd?define([\x22exports\x22,\x22vega-util\x22,\x22vega-expression\x22],factory):(global\x3dglobal||self,factory(global.vega\x3d\n{},global.vega,global.vega))})(this,function(exports,vegaUtil,vegaExpression){function testPoint(datum,entry){var fields\x3dentry.fields;entry\x3dentry.values;for(var n\x3dfields.length,i\x3d0,dval,f;i\x3cn;++i)if(f\x3dfields[i],f.getter\x3dvegaUtil.field.getter||vegaUtil.field(f.field),dval\x3df.getter(datum),vegaUtil.isDate(dval)\x26\x26(dval\x3dvegaUtil.toNumber(dval)),vegaUtil.isDate(entry[i])\x26\x26(entry[i]\x3dvegaUtil.toNumber(entry[i])),vegaUtil.isDate(entry[i][0])\x26\x26(entry[i]\x3dentry[i].map(vegaUtil.toNumber)),\x22E\x22\x3d\x3d\x3df.type){if(vegaUtil.isArray(entry[i])?\n0\x3eentry[i].indexOf(dval):dval!\x3d\x3dentry[i])return!1}else if(\x22R\x22\x3d\x3d\x3df.type){if(!vegaUtil.inrange(dval,entry[i]))return!1}else if(\x22R-RE\x22\x3d\x3d\x3df.type){if(!vegaUtil.inrange(dval,entry[i],!0,!1))return!1}else if(\x22R-E\x22\x3d\x3d\x3df.type){if(!vegaUtil.inrange(dval,entry[i],!1,!1))return!1}else if(\x22R-LE\x22\x3d\x3d\x3df.type\x26\x26!vegaUtil.inrange(dval,entry[i],!1,!0))return!1;return!0}var ops\x3d{E_union:function(base,value){if(!base.length)return value;for(var i\x3d0,n\x3dvalue.length;i\x3cn;++i)0\x3ebase.indexOf(value[i])\x26\x26base.push(value[i]);return base},\nE_intersect:function(base,value){return base.length?base.filter(function(v){return 0\x3c\x3dvalue.indexOf(v)}):value},R_union:function(base,value){var lo\x3dvegaUtil.toNumber(value[0]),hi\x3dvegaUtil.toNumber(value[1]);lo\x3ehi\x26\x26(lo\x3dvalue[1],hi\x3dvalue[0]);if(!base.length)return[lo,hi];base[0]\x3elo\x26\x26(base[0]\x3dlo);base[1]\x3chi\x26\x26(base[1]\x3dhi);return base},R_intersect:function(base,value){var lo\x3dvegaUtil.toNumber(value[0]),hi\x3dvegaUtil.toNumber(value[1]);lo\x3ehi\x26\x26(lo\x3dvalue[1],hi\x3dvalue[0]);if(!base.length)return[lo,hi];if(hi\x3c\nbase[0]||base[1]\x3clo)return[];base[0]\x3clo\x26\x26(base[0]\x3dlo);base[1]\x3ehi\x26\x26(base[1]\x3dhi);return base}};exports.selectionResolve\x3dfunction(name,op,isMulti){name\x3d(name\x3dthis.context.data[name])?name.values.value:[];for(var resolved\x3d{},multiRes\x3d{},types\x3d{},entry,fields,unit$jscomp$0,field$jscomp$0,res,resUnit,n\x3dname.length,i\x3d0,j$jscomp$0,m;i\x3cn;++i){entry\x3dname[i];unit$jscomp$0\x3dentry.unit;fields\x3dentry.fields;entry\x3dentry.values;j$jscomp$0\x3d0;for(m\x3dfields.length;j$jscomp$0\x3cm;++j$jscomp$0)field$jscomp$0\x3dfields[j$jscomp$0],\nres\x3dresolved[field$jscomp$0.field]||(resolved[field$jscomp$0.field]\x3d{}),resUnit\x3dres[unit$jscomp$0]||(res[unit$jscomp$0]\x3d[]),types[field$jscomp$0.field]\x3dfield$jscomp$0\x3dfield$jscomp$0.type.charAt(0),field$jscomp$0\x3dops[field$jscomp$0+\x22_union\x22],res[unit$jscomp$0]\x3dfield$jscomp$0(resUnit,vegaUtil.array(entry[j$jscomp$0]));isMulti\x26\x26(resUnit\x3dmultiRes[unit$jscomp$0]||(multiRes[unit$jscomp$0]\x3d[]),resUnit.push(vegaUtil.array(entry).reduce(function(obj,curr,j){return obj[fields[j].field]\x3dcurr,obj},{})))}op\x3dop||\n\x22union\x22;Object.keys(resolved).forEach(function(field){resolved[field]\x3dObject.keys(resolved[field]).map(function(unit){return resolved[field][unit]}).reduce(function(acc,curr){return void 0\x3d\x3d\x3dacc?curr:ops[types[field]+\x22_\x22+op](acc,curr)})});name\x3dObject.keys(multiRes);isMulti\x26\x26name.length\x26\x26(isMulti\x3d{},unit$jscomp$0\x3d{},resolved.vlMulti\x3d\x22union\x22\x3d\x3d\x3dop?(isMulti.or\x3dname.reduce(function(acc,k){return acc.push.apply(acc,multiRes[k]),acc},[]),isMulti):(unit$jscomp$0.and\x3dname.map(function(k){var $jscomp$compprop53\x3d\n{};return $jscomp$compprop53.or\x3dmultiRes[k],$jscomp$compprop53}),unit$jscomp$0));return resolved};exports.selectionTest\x3dfunction(name,datum,op){var data\x3dthis.context.data[name];name\x3ddata?data.values.value:[];data\x3ddata?data[\x22index:unit\x22]\x26\x26data[\x22index:unit\x22].value:void 0;op\x3d\x22intersect\x22\x3d\x3d\x3dop;for(var n\x3dname.length,i\x3d0,entry,miss,count,unit;i\x3cn;++i)if(entry\x3dname[i],data\x26\x26op){if(miss\x3dmiss||{},count\x3dmiss[unit\x3dentry.unit]||0,-1!\x3d\x3dcount){entry\x3dtestPoint(datum,entry);miss[unit]\x3dentry?-1:++count;if(entry\x26\x261\x3d\x3d\x3d\ndata.size)return!0;if(!entry\x26\x26count\x3d\x3d\x3ddata.get(unit).count)return!1}}else if(entry\x3dtestPoint(datum,entry),op^entry)return entry;return n\x26\x26op};exports.selectionVisitor\x3dfunction(name,args,scope,params){args[0].type!\x3d\x3dvegaExpression.Literal\x26\x26vegaUtil.error(\x22First argument to selection functions must be a string literal.\x22);name\x3dargs[0].value;args\x3d2\x3c\x3dargs.length\x26\x26vegaUtil.peek(args).value;var dataName\x3d\x22:\x22+name;\x22intersect\x22!\x3d\x3dargs||vegaUtil.hasOwnProperty(params,\x22@unit\x22)||(params[\x22@unit\x22]\x3dscope.getData(name).indataRef(scope,\n\x22unit\x22));vegaUtil.hasOwnProperty(params,dataName)||(params[dataName]\x3dscope.getData(name).tuplesRef())};Object.defineProperty(exports,\x22__esModule\x22,{value:!0})})}");
SHADOW_ENV.evalLoad("module$node_modules$vega_functions$build$vega_functions.js", true , "shadow$provide.module$node_modules$vega_functions$build$vega_functions\x3dfunction(global$jscomp$0,require,module,exports$jscomp$0){(function(global,factory){\x22object\x22\x3d\x3d\x3dtypeof exports$jscomp$0\x26\x26\x22undefined\x22!\x3d\x3dtypeof module?factory(exports$jscomp$0,require(\x22module$node_modules$vega_util$build$vega_util\x22),require(\x22module$node_modules$vega_expression$build$vega_expression\x22),require(\x22module$node_modules$d3_geo$dist$d3_geo\x22),require(\x22module$node_modules$d3_color$dist$d3_color\x22),require(\x22module$node_modules$vega_dataflow$build$vega_dataflow\x22),\nrequire(\x22module$node_modules$vega_scale$build$vega_scale\x22),require(\x22module$node_modules$vega_scenegraph$build$vega_scenegraph\x22),require(\x22module$node_modules$vega_selections$build$vega_selections\x22),require(\x22module$node_modules$vega_statistics$build$vega_statistics\x22),require(\x22module$node_modules$vega_time$build$vega_time\x22),require(\x22module$node_modules$d3_array$dist$d3_array\x22)):\x22function\x22\x3d\x3d\x3dtypeof define\x26\x26define.amd?define(\x22exports vega-util vega-expression d3-geo d3-color vega-dataflow vega-scale vega-scenegraph vega-selections vega-statistics vega-time d3-array\x22.split(\x22 \x22),\nfactory):(global\x3dglobal||self,factory(global.vega\x3d{},global.vega,global.vega,global.d3,global.d3,global.vega,global.vega,global.vega,global.vega,global.vega,global.vega,global.d3))})(this,function(exports,vegaUtil,vegaExpression,d3Geo,d3Color,vegaDataflow,vegaScale,vegaScenegraph,vegaSelections,vegaStatistics,vegaTime,d3Array){function data$jscomp$0(name){return(name\x3dthis.context.data[name])?name.values.value:[]}function indata(name,field,value){return(value\x3d(name\x3dthis.context.data[name][\x22index:\x22+\nfield])?name.value.get(value):void 0)?value.count:value}function setdata(name,tuples){var df\x3dthis.context.dataflow;df.pulse(this.context.data[name].input,df.changeset().remove(vegaUtil.truthy).insert(tuples));return 1}function encode(item,name,retval){if(item){var df\x3dthis.context.dataflow;df.pulse(item.mark.source,df.changeset().encode(item,name))}return void 0!\x3d\x3dretval?retval:item}function time(month,day,specifier){if(!Number.isInteger(month)||!Number.isInteger(day))return\x22\x22;dateObj.setYear(2E3);\ndateObj.setMonth(month);dateObj.setDate(day);return timeFormat.call(this,dateObj,specifier)}function monthFormat(month){return time.call(this,month,1,\x22%B\x22)}function monthAbbrevFormat(month){return time.call(this,month,1,\x22%b\x22)}function dayFormat(day){return time.call(this,0,2+day,\x22%A\x22)}function dayAbbrevFormat(day){return time.call(this,0,2+day,\x22%a\x22)}function dataVisitor(name,args,scope,params){args[0].type!\x3d\x3dvegaExpression.Literal\x26\x26vegaUtil.error(\x22First argument to data functions must be a string literal.\x22);\nname\x3dargs[0].value;args\x3d\x22:\x22+name;if(!vegaUtil.hasOwnProperty(args,params))try{params[args]\x3dscope.getData(name).tuplesRef()}catch(err){}}function indataVisitor(name,args,scope,params){args[0].type!\x3d\x3dvegaExpression.Literal\x26\x26vegaUtil.error(\x22First argument to indata must be a string literal.\x22);args[1].type!\x3d\x3dvegaExpression.Literal\x26\x26vegaUtil.error(\x22Second argument to indata must be a string literal.\x22);name\x3dargs[0].value;args\x3dargs[1].value;var indexName\x3d\x22@\x22+args;vegaUtil.hasOwnProperty(indexName,params)||\n(params[indexName]\x3dscope.getData(name).indataRef(scope,args))}function scaleVisitor(name,args,scope,params){if(args[0].type\x3d\x3d\x3dvegaExpression.Literal)addScaleDependency(scope,params,args[0].value);else for(name in scope.scales)addScaleDependency(scope,params,name)}function addScaleDependency(scope,params,name){var scaleName\x3d\x22%\x22+name;if(!vegaUtil.hasOwnProperty(params,scaleName))try{params[scaleName]\x3dscope.scaleRef(name)}catch(err){}}function getScale(name,ctx){var s;return vegaUtil.isFunction(name)?\nname:vegaUtil.isString(name)?(s\x3dctx.scales[name])\x26\x26s.value:void 0}function internalScaleFunctions(codegen,fnctx,visitors){fnctx.__bandwidth\x3dfunction(s){return s\x26\x26s.bandwidth?s.bandwidth():0};visitors._bandwidth\x3dscaleVisitor;visitors._range\x3dscaleVisitor;visitors._scale\x3dscaleVisitor;var ref\x3dfunction(arg){return\x22_[\x22+(arg.type\x3d\x3d\x3dvegaExpression.Literal?vegaUtil.stringValue(\x22%\x22+arg.value):vegaUtil.stringValue(\x22%\x22)+\x22+\x22+codegen(arg))+\x22]\x22};return{_bandwidth:function(args){return\x22this.__bandwidth(\x22+ref(args[0])+\n\x22)\x22},_range:function(args){return ref(args[0])+\x22.range()\x22},_scale:function(args){return ref(args[0])+\x22(\x22+codegen(args[1])+\x22)\x22}}}function geoMethod(methodName,globalMethod){return function(projection,geojson,group){return projection?(projection\x3dgetScale(projection,(group||this).context))\x26\x26projection.path[methodName](geojson):globalMethod(geojson)}}function inScope(item){var group\x3dthis.context.group,value\x3d!1;if(group)for(;item;){if(item\x3d\x3d\x3dgroup){value\x3d!0;break}item\x3ditem.mark.group}return value}function log(df,\nmethod,args){try{df[method].apply(df,[\x22EXPRESSION\x22].concat([].slice.call(args)))}catch(err){df.warn(err)}return args[args.length-1]}function warn(){return log(this.context.dataflow,\x22warn\x22,arguments)}function info(){return log(this.context.dataflow,\x22info\x22,arguments)}function debug(){return log(this.context.dataflow,\x22debug\x22,arguments)}function channel_luminance_value(channelValue){channelValue/\x3d255;return.03928\x3e\x3dchannelValue?channelValue/12.92:Math.pow((channelValue+.055)/1.055,2.4)}function luminance(color){var c\x3d\nd3Color.rgb(color);color\x3dchannel_luminance_value(c.r);var g\x3dchannel_luminance_value(c.g);c\x3dchannel_luminance_value(c.b);return.2126*color+.7152*g+.0722*c}function contrast(color1,color2){color1\x3dluminance(color1);color2\x3dluminance(color2);return(Math.max(color1,color2)+.05)/(Math.min(color1,color2)+.05)}function merge(){var args\x3d[].slice.call(arguments);args.unshift({});return vegaUtil.extend.apply(null,args)}function equal(a,b){if(a\x3d\x3d\x3db||a!\x3d\x3da\x26\x26b!\x3d\x3db)a\x3d!0;else if(vegaUtil.isArray(a))if(vegaUtil.isArray(b)\x26\x26\na.length\x3d\x3d\x3db.length)a:{for(var i\x3d0,n\x3da.length;i\x3cn;++i)if(!equal(a[i],b[i])){a\x3d!1;break a}a\x3d!0}else a\x3d!1;else a\x3dvegaUtil.isObject(a)\x26\x26vegaUtil.isObject(b)?equalObject(a,b):!1;return a}function equalObject(a,b){for(var key in a)if(!equal(a[key],b[key]))return!1;return!0}function removePredicate(props){return function(_){return equalObject(props,_)}}function modify$jscomp$0(name,insert,remove,toggle,modify,values){var df\x3dthis.context.dataflow,data\x3dthis.context.data[name],input\x3ddata.input,changes\x3ddata.changes;\nname\x3ddf.stamp();var key;if(!1\x3d\x3d\x3ddf._trigger||!(input.value.length||insert||toggle))return 0;if(!changes||changes.stamp\x3cname)data.changes\x3dchanges\x3ddf.changeset(),changes.stamp\x3dname,df.runAfter(function(){data.modified\x3d!0;df.pulse(input,changes).run()},!0,1);remove\x26\x26(remove\x3d!0\x3d\x3d\x3dremove?vegaUtil.truthy:vegaUtil.isArray(remove)||vegaDataflow.isTuple(remove)?remove:removePredicate(remove),changes.remove(remove));insert\x26\x26changes.insert(insert);toggle\x26\x26(remove\x3dremovePredicate(toggle),input.value.some(remove)?\nchanges.remove(remove):changes.insert(toggle));if(modify)for(key in values)changes.modify(modify,key,values[key]);return 1}function pinchDistance(event){var t\x3devent.touches;event\x3dt[0].clientX-t[1].clientX;t\x3dt[0].clientY-t[1].clientY;return Math.sqrt(event*event+t*t)}function pinchAngle(event){event\x3devent.touches;return Math.atan2(event[0].clientY-event[1].clientY,event[0].clientX-event[1].clientX)}function bandspace(count,paddingInner,paddingOuter){return vegaScale.bandSpace(count||0,paddingInner||\n0,paddingOuter||0)}function bandwidth(name,group){return(name\x3dgetScale(name,(group||this).context))\x26\x26name.bandwidth?name.bandwidth():0}function copy(name,group){return(name\x3dgetScale(name,(group||this).context))?name.copy():void 0}function domain(name,group){return(name\x3dgetScale(name,(group||this).context))?name.domain():[]}function invert(name,range,group){return(name\x3dgetScale(name,(group||this).context))?vegaUtil.isArray(range)?(name.invertRange||name.invert)(range):(name.invert||name.invertExtent)(range):\nvoid 0}function range$jscomp$0(name,group){return(name\x3dgetScale(name,(group||this).context))\x26\x26name.range?name.range():[]}function scale$jscomp$0(name,value,group){return(name\x3dgetScale(name,(group||this).context))?name(value):void 0}function scaleGradient(scale,p0,p1,count,group){scale\x3dgetScale(scale,(group||this).context);var gradient\x3dvegaScenegraph.Gradient(p0,p1);p0\x3dscale.domain();p1\x3dp0[0];group\x3dvegaUtil.peek(p0);var fraction\x3dvegaUtil.identity;group-p1?fraction\x3dvegaScale.scaleFraction(scale,p1,\ngroup):scale\x3d(scale.interpolator?vegaScale.scale(\x22sequential\x22)().interpolator(scale.interpolator()):vegaScale.scale(\x22linear\x22)().interpolate(scale.interpolate()).range(scale.range())).domain([p1\x3d0,group\x3d1]);scale.ticks\x26\x26(p0\x3dscale.ticks(+count||15),p1!\x3d\x3dp0[0]\x26\x26p0.unshift(p1),group!\x3d\x3dvegaUtil.peek(p0)\x26\x26p0.push(group));p0.forEach(function(_){return gradient.stop(fraction(_),scale(_))});return gradient}function geoShape(projection,geojson,group){var p\x3dgetScale(projection,(group||this).context);return function(context){return p?\np.path.context(context)(geojson):\x22\x22}}function pathShape(path){var p\x3dnull;return function(context){return context?vegaScenegraph.pathRender(context,p\x3dp||vegaScenegraph.pathParse(path)):path}}function treeNodes(name,context){name\x3ddata$jscomp$0.call(context,name);return name.root\x26\x26name.root.lookup||{}}function treePath(name,source,target){name\x3dtreeNodes(name,this);source\x3dname[source];target\x3dname[target];return source\x26\x26target?source.path(target).map(datum):void 0}function treeAncestors(name,node){return(name\x3d\ntreeNodes(name,this)[node])?name.ancestors().map(datum):void 0}function screen(){var w\x3d\x22undefined\x22!\x3d\x3dtypeof window\x26\x26window||null;return w?w.screen:{}}function windowSize(){var w\x3d\x22undefined\x22!\x3d\x3dtypeof window\x26\x26window||null;return w?[w.innerWidth,w.innerHeight]:[void 0,void 0]}function containerSize(){var view\x3dthis.context.dataflow;return(view\x3dview.container\x26\x26view.container())?[view.clientWidth,view.clientHeight]:[void 0,void 0]}function filter(opt){var p\x3dnull;if(opt){var types\x3dvegaUtil.array(opt.marktype),\nnames\x3dvegaUtil.array(opt.markname);p\x3dfunction(_){return(!types.length||types.some(function(t){return _.marktype\x3d\x3d\x3dt}))\x26\x26(!names.length||names.some(function(s){return _.name\x3d\x3d\x3ds}))}}return p}function expressionFunction(name,fn,visitor){if(1\x3d\x3d\x3darguments.length)return functionContext[name];functionContext[name]\x3dfn;visitor\x26\x26(astVisitors[name]\x3dvisitor);codeGenerator\x26\x26(codeGenerator.functions[name]\x3d\x22this.\x22+name);return this}var wrap\x3dfunction(method){return function(value,spec){return this.context.dataflow.locale()[method](spec)(value)}},\nformat\x3dwrap(\x22format\x22),timeFormat\x3dwrap(\x22timeFormat\x22),utcFormat\x3dwrap(\x22utcFormat\x22),timeParse\x3dwrap(\x22timeParse\x22);wrap\x3dwrap(\x22utcParse\x22);var dateObj\x3dnew Date(2E3,0,1),geoArea\x3dgeoMethod(\x22area\x22,d3Geo.geoArea),geoBounds\x3dgeoMethod(\x22bounds\x22,d3Geo.geoBounds);d3Geo\x3dgeoMethod(\x22centroid\x22,d3Geo.geoCentroid);var datum\x3dfunction(d){return d.data},functionContext\x3d{random:function(){return vegaStatistics.random()},cumulativeNormal:vegaStatistics.cumulativeNormal,cumulativeLogNormal:vegaStatistics.cumulativeLogNormal,cumulativeUniform:vegaStatistics.cumulativeUniform,\ndensityNormal:vegaStatistics.densityNormal,densityLogNormal:vegaStatistics.densityLogNormal,densityUniform:vegaStatistics.densityUniform,quantileNormal:vegaStatistics.quantileNormal,quantileLogNormal:vegaStatistics.quantileLogNormal,quantileUniform:vegaStatistics.quantileUniform,sampleNormal:vegaStatistics.sampleNormal,sampleLogNormal:vegaStatistics.sampleLogNormal,sampleUniform:vegaStatistics.sampleUniform,isArray:vegaUtil.isArray,isBoolean:vegaUtil.isBoolean,isDate:vegaUtil.isDate,isDefined:function(_){return void 0!\x3d\x3d\n_},isNumber:vegaUtil.isNumber,isObject:vegaUtil.isObject,isRegExp:vegaUtil.isRegExp,isString:vegaUtil.isString,isTuple:vegaDataflow.isTuple,isValid:function(_){return null!\x3d_\x26\x26_\x3d\x3d\x3d_},toBoolean:vegaUtil.toBoolean,toDate:vegaUtil.toDate,toNumber:vegaUtil.toNumber,toString:vegaUtil.toString,flush:vegaUtil.flush,lerp:vegaUtil.lerp,merge:merge,pad:vegaUtil.pad,peek:vegaUtil.peek,span:vegaUtil.span,inrange:vegaUtil.inrange,truncate:vegaUtil.truncate,rgb:d3Color.rgb,lab:d3Color.lab,hcl:d3Color.hcl,hsl:d3Color.hsl,\nluminance:luminance,contrast:contrast,sequence:d3Array.range,format:format,utcFormat:utcFormat,utcParse:wrap,utcOffset:vegaTime.utcOffset,utcSequence:vegaTime.utcSequence,timeFormat:timeFormat,timeParse:timeParse,timeOffset:vegaTime.timeOffset,timeSequence:vegaTime.timeSequence,timeUnitSpecifier:vegaTime.timeUnitSpecifier,monthFormat:monthFormat,monthAbbrevFormat:monthAbbrevFormat,dayFormat:dayFormat,dayAbbrevFormat:dayAbbrevFormat,quarter:vegaUtil.quarter,utcquarter:vegaUtil.utcquarter,week:vegaTime.week,\nutcweek:vegaTime.utcweek,dayofyear:vegaTime.dayofyear,utcdayofyear:vegaTime.utcdayofyear,warn:warn,info:info,debug:debug,extent:vegaUtil.extent,inScope:inScope,intersect:function(b,opt,group){if(!b)return[];var $jscomp$destructuring$var459\x3d$jscomp.makeIterator(b);b\x3d$jscomp$destructuring$var459.next().value;$jscomp$destructuring$var459\x3d$jscomp$destructuring$var459.next().value;b\x3d(new vegaScenegraph.Bounds).set(b[0],b[1],$jscomp$destructuring$var459[0],$jscomp$destructuring$var459[1]);group\x3dgroup||\nthis.context.dataflow.scenegraph().root;return vegaScenegraph.intersect(group,b,filter(opt))},clampRange:vegaUtil.clampRange,pinchDistance:pinchDistance,pinchAngle:pinchAngle,screen:screen,containerSize:containerSize,windowSize:windowSize,bandspace:bandspace,setdata:setdata,pathShape:pathShape,panLinear:vegaUtil.panLinear,panLog:vegaUtil.panLog,panPow:vegaUtil.panPow,panSymlog:vegaUtil.panSymlog,zoomLinear:vegaUtil.zoomLinear,zoomLog:vegaUtil.zoomLog,zoomPow:vegaUtil.zoomPow,zoomSymlog:vegaUtil.zoomSymlog,\nencode:encode,modify:modify$jscomp$0},eventFunctions\x3d\x22view item group xy x y\x22.split(\x22 \x22),astVisitors\x3d{};expressionFunction(\x22bandwidth\x22,bandwidth,scaleVisitor);expressionFunction(\x22copy\x22,copy,scaleVisitor);expressionFunction(\x22domain\x22,domain,scaleVisitor);expressionFunction(\x22range\x22,range$jscomp$0,scaleVisitor);expressionFunction(\x22invert\x22,invert,scaleVisitor);expressionFunction(\x22scale\x22,scale$jscomp$0,scaleVisitor);expressionFunction(\x22gradient\x22,scaleGradient,scaleVisitor);expressionFunction(\x22geoArea\x22,\ngeoArea,scaleVisitor);expressionFunction(\x22geoBounds\x22,geoBounds,scaleVisitor);expressionFunction(\x22geoCentroid\x22,d3Geo,scaleVisitor);expressionFunction(\x22geoShape\x22,geoShape,scaleVisitor);expressionFunction(\x22indata\x22,indata,indataVisitor);expressionFunction(\x22data\x22,data$jscomp$0,dataVisitor);expressionFunction(\x22treePath\x22,treePath,dataVisitor);expressionFunction(\x22treeAncestors\x22,treeAncestors,dataVisitor);expressionFunction(\x22vlSelectionTest\x22,vegaSelections.selectionTest,vegaSelections.selectionVisitor);expressionFunction(\x22vlSelectionResolve\x22,\nvegaSelections.selectionResolve,vegaSelections.selectionVisitor);var codegenParams\x3d{blacklist:[\x22_\x22],whitelist:[\x22datum\x22,\x22event\x22,\x22item\x22],fieldvar:\x22datum\x22,globalvar:function(id){return\x22_[\x22+vegaUtil.stringValue(\x22$\x22+id)+\x22]\x22},functions:function(codegen){var fn\x3dvegaExpression.functions(codegen);eventFunctions.forEach(function(name){return fn[name]\x3d\x22event.vega.\x22+name});for(var name$jscomp$0 in functionContext)fn[name$jscomp$0]\x3d\x22this.\x22+name$jscomp$0;vegaUtil.extend(fn,internalScaleFunctions(codegen,functionContext,\nastVisitors));return fn},constants:vegaExpression.constants,visitors:astVisitors},codeGenerator\x3dvegaExpression.codegen(codegenParams);exports.DataPrefix\x3d\x22:\x22;exports.IndexPrefix\x3d\x22@\x22;exports.ScalePrefix\x3d\x22%\x22;exports.SignalPrefix\x3d\x22$\x22;exports.bandspace\x3dbandspace;exports.bandwidth\x3dbandwidth;exports.codeGenerator\x3dcodeGenerator;exports.codegenParams\x3dcodegenParams;exports.containerSize\x3dcontainerSize;exports.contrast\x3dcontrast;exports.copy\x3dcopy;exports.data\x3ddata$jscomp$0;exports.dataVisitor\x3ddataVisitor;exports.dayAbbrevFormat\x3d\ndayAbbrevFormat;exports.dayFormat\x3ddayFormat;exports.debug\x3ddebug;exports.domain\x3ddomain;exports.encode\x3dencode;exports.expressionFunction\x3dexpressionFunction;exports.format\x3dformat;exports.functionContext\x3dfunctionContext;exports.geoArea\x3dgeoArea;exports.geoBounds\x3dgeoBounds;exports.geoCentroid\x3dd3Geo;exports.geoShape\x3dgeoShape;exports.inScope\x3dinScope;exports.indata\x3dindata;exports.indataVisitor\x3dindataVisitor;exports.info\x3dinfo;exports.invert\x3dinvert;exports.luminance\x3dluminance;exports.merge\x3dmerge;exports.modify\x3d\nmodify$jscomp$0;exports.monthAbbrevFormat\x3dmonthAbbrevFormat;exports.monthFormat\x3dmonthFormat;exports.parseExpression\x3dfunction(expr,scope){var params\x3d{};try{expr\x3dvegaUtil.isString(expr)?expr:vegaUtil.stringValue(expr)+\x22\x22;var ast\x3dvegaExpression.parse(expr)}catch(err){vegaUtil.error(\x22Expression parse error: \x22+expr)}ast.visit(function(node){if(node.type\x3d\x3d\x3dvegaExpression.CallExpression){var name\x3dnode.callee.name,visit\x3dcodegenParams.visitors[name];visit\x26\x26visit(name,node.arguments,scope,params)}});expr\x3dcodeGenerator(ast);\nexpr.globals.forEach(function(name){var signalName\x3d\x22$\x22+name;!vegaUtil.hasOwnProperty(params,signalName)\x26\x26scope.getSignal(name)\x26\x26(params[signalName]\x3dscope.signalRef(name))});return{$expr:vegaUtil.extend({code:expr.code},scope.options.ast?{ast:ast}:null),$fields:expr.fields,$params:params}};exports.pathShape\x3dpathShape;exports.pinchAngle\x3dpinchAngle;exports.pinchDistance\x3dpinchDistance;exports.range\x3drange$jscomp$0;exports.scale\x3dscale$jscomp$0;exports.scaleGradient\x3dscaleGradient;exports.scaleVisitor\x3dscaleVisitor;\nexports.screen\x3dscreen;exports.setdata\x3dsetdata;exports.timeFormat\x3dtimeFormat;exports.timeParse\x3dtimeParse;exports.treeAncestors\x3dtreeAncestors;exports.treePath\x3dtreePath;exports.utcFormat\x3dutcFormat;exports.utcParse\x3dwrap;exports.warn\x3dwarn;exports.windowSize\x3dwindowSize;Object.defineProperty(exports,\x22__esModule\x22,{value:!0})})}");
SHADOW_ENV.evalLoad("module$node_modules$vega_runtime$build$vega_runtime.js", true , "shadow$provide.module$node_modules$vega_runtime$build$vega_runtime\x3dfunction(global$jscomp$0,require,module,exports$jscomp$0){(function(global,factory){\x22object\x22\x3d\x3d\x3dtypeof exports$jscomp$0\x26\x26\x22undefined\x22!\x3d\x3dtypeof module?factory(exports$jscomp$0,require(\x22module$node_modules$vega_util$build$vega_util\x22),require(\x22module$node_modules$vega_dataflow$build$vega_dataflow\x22)):\x22function\x22\x3d\x3d\x3dtypeof define\x26\x26define.amd?define([\x22exports\x22,\x22vega-util\x22,\x22vega-dataflow\x22],factory):(global\x3dglobal||self,factory(global.vega\x3d{},\nglobal.vega,global.vega))})(this,function(exports,vegaUtil,vegaDataflow){function expression(ctx,args,code){\x22;\x22!\x3d\x3dcode[code.length-1]\x26\x26(code\x3d\x22return(\x22+code+\x22);\x22);args\x3dFunction.apply(null,args.concat(code));return ctx\x26\x26ctx.functions?args.bind(ctx.functions):args}function parseParameter(spec,ctx,params){if(!spec||!vegaUtil.isObject(spec))return spec;for(var i\x3d0,n\x3dPARSERS.length,p;i\x3cn;++i)if(p\x3dPARSERS[i],vegaUtil.hasOwnProperty(spec,p.key))return p.parse(spec,ctx,params);return spec}function Context(df,\ntransforms,functions,expr){this.dataflow\x3ddf;this.transforms\x3dtransforms;this.events\x3ddf.events.bind(df);this.expr\x3dexpr||expressionCodegen;this.signals\x3d{};this.scales\x3d{};this.nodes\x3d{};this.data\x3d{};this.fn\x3d{};functions\x26\x26(this.functions\x3dObject.create(functions),this.functions.context\x3dthis)}function Subcontext(ctx){this.dataflow\x3dctx.dataflow;this.transforms\x3dctx.transforms;this.events\x3dctx.events;this.expr\x3dctx.expr;this.signals\x3dObject.create(ctx.signals);this.scales\x3dObject.create(ctx.scales);this.nodes\x3dObject.create(ctx.nodes);\nthis.data\x3dObject.create(ctx.data);this.fn\x3dObject.create(ctx.fn);ctx.functions\x26\x26(this.functions\x3dObject.create(ctx.functions),this.functions.context\x3dthis)}var Skip\x3dvegaUtil.toSet([\x22rule\x22]),Swap\x3dvegaUtil.toSet([\x22group\x22,\x22image\x22,\x22rect\x22]),expressionCodegen\x3d{operator:function(ctx,expr){return expression(ctx,[\x22_\x22],expr.code)},parameter:function(ctx,expr){return expression(ctx,[\x22datum\x22,\x22_\x22],expr.code)},event:function(ctx,expr){return expression(ctx,[\x22event\x22],expr.code)},handler:function(ctx,expr){return expression(ctx,\n[\x22_\x22,\x22event\x22],\x22var datum\\x3devent.item\\x26\\x26event.item.datum;return \x22+expr.code+\x22;\x22)},encode:function(ctx,encode){var marktype\x3dencode.marktype;encode\x3dencode.channels;var code\x3d\x22var o\\x3ditem,datum\\x3do.datum,m\\x3d0,$;\x22;for(name in encode){var o\x3d\x22o[\x22+vegaUtil.stringValue(name)+\x22]\x22;code+\x3d\x22$\\x3d\x22+encode[name].code+\x22;if(\x22+o+\x22!\\x3d\\x3d$)\x22+o+\x22\\x3d$,m\\x3d1;\x22}var name\x3d\x22\x22;Skip[marktype]||(encode.x2\x26\x26(encode.x?(Swap[marktype]\x26\x26(name+\x3d\x22if(o.x\\x3eo.x2)$\\x3do.x,o.x\\x3do.x2,o.x2\\x3d$;\x22),name+\x3d\x22o.width\\x3do.x2-o.x;\x22):\nname+\x3d\x22o.x\\x3do.x2-(o.width||0);\x22),encode.xc\x26\x26(name+\x3d\x22o.x\\x3do.xc-(o.width||0)/2;\x22),encode.y2\x26\x26(encode.y?(Swap[marktype]\x26\x26(name+\x3d\x22if(o.y\\x3eo.y2)$\\x3do.y,o.y\\x3do.y2,o.y2\\x3d$;\x22),name+\x3d\x22o.height\\x3do.y2-o.y;\x22):name+\x3d\x22o.y\\x3do.y2-(o.height||0);\x22),encode.yc\x26\x26(name+\x3d\x22o.y\\x3do.yc-(o.height||0)/2;\x22));code+\x3dname;return expression(ctx,[\x22item\x22,\x22_\x22],code+\x22return m;\x22)},codegen:{get:function(path){path\x3d\x22[\x22+path.map(vegaUtil.stringValue).join(\x22][\x22)+\x22]\x22;var get\x3dFunction(\x22_\x22,\x22return _\x22+path+\x22;\x22);get.path\x3dpath;\nreturn get},comparator:function(fields,orders){var t;fields\x3dFunction(\x22a\x22,\x22b\x22,\x22var u, v; return \x22+fields.map(function(f,i){var o\x3dorders[i];if(f.path){var u\x3d\x22a\x22+f.path;f\x3d\x22b\x22+f.path}else(t\x3dt||{})[\x22f\x22+i]\x3df,u\x3d\x22this.f\x22+i+\x22(a)\x22,f\x3d\x22this.f\x22+i+\x22(b)\x22;i\x3d-o;return\x22((u \\x3d \x22+u+\x22) \\x3c (v \\x3d \x22+f+\x22) || u \\x3d\\x3d null) \\x26\\x26 v !\\x3d null ? \x22+i+\x22\\n  : (u \\x3e v || v \\x3d\\x3d null) \\x26\\x26 u !\\x3d null ? \x22+o+\x22\\n  : ((v \\x3d v instanceof Date ? +v : v), (u \\x3d u instanceof Date ? +u : u)) !\\x3d\\x3d u \\x26\\x26 v \\x3d\\x3d\\x3d v ? \x22+\ni+\x22\\n  : v !\\x3d\\x3d v \\x26\\x26 u \\x3d\\x3d\\x3d u ? \x22+o+\x22 : \x22}).join(\x22\x22)+\x220;\x22);return t?fields.bind(t):fields}}},PARSERS\x3d[{key:\x22$ref\x22,parse:function(_,ctx){return ctx.get(_.$ref)||vegaUtil.error(\x22Operator not defined: \x22+_.$ref)}},{key:\x22$key\x22,parse:function(_,ctx){var k\x3d\x22k:\x22+_.$key+\x22_\x22+!!_.$flat;return ctx.fn[k]||(ctx.fn[k]\x3dvegaUtil.key(_.$key,_.$flat,ctx.expr.codegen))}},{key:\x22$expr\x22,parse:function(_,ctx,params){_.$params\x26\x26ctx.parseParameters(_.$params,params);params\x3d\x22e:\x22+_.$expr.code+\x22_\x22+_.$name;\nreturn ctx.fn[params]||(ctx.fn[params]\x3dvegaUtil.accessor(ctx.parameterExpression(_.$expr),_.$fields,_.$name))}},{key:\x22$field\x22,parse:function(_,ctx){if(!_.$field)return null;var k\x3d\x22f:\x22+_.$field+\x22_\x22+_.$name;return ctx.fn[k]||(ctx.fn[k]\x3dvegaUtil.field(_.$field,_.$name,ctx.expr.codegen))}},{key:\x22$encode\x22,parse:function(_,ctx){_\x3d_.$encode;var encode\x3d{},name;for(name in _){var enc\x3d_[name];encode[name]\x3dvegaUtil.accessor(ctx.encodeExpression(enc.$expr),enc.$fields);encode[name].output\x3denc.$output}return encode}},\n{key:\x22$compare\x22,parse:function(_$jscomp$0,ctx){var k\x3d\x22c:\x22+_$jscomp$0.$compare+\x22_\x22+_$jscomp$0.$order,c\x3dvegaUtil.array(_$jscomp$0.$compare).map(function(_){return _\x26\x26_.$tupleid?vegaDataflow.tupleid:_});return ctx.fn[k]||(ctx.fn[k]\x3dvegaUtil.compare(c,_$jscomp$0.$order,ctx.expr.codegen))}},{key:\x22$context\x22,parse:function(_,ctx){return ctx}},{key:\x22$subflow\x22,parse:function(_,ctx){var spec\x3d_.$subflow;return function(dataflow,key,parent){var subctx\x3dctx.fork().parse(spec);dataflow\x3dsubctx.get(spec.operators[0].id);\n(key\x3dsubctx.signals.parent)\x26\x26key.set(parent);dataflow.detachSubflow\x3dfunction(){return ctx.detach(subctx)};return dataflow}}},{key:\x22$tupleid\x22,parse:function(){return vegaDataflow.tupleid}}],SKIP\x3d{skip:!0};Context.prototype\x3dSubcontext.prototype\x3d{fork:function(){var ctx\x3dnew Subcontext(this);(this.subcontext||(this.subcontext\x3d[])).push(ctx);return ctx},detach:function(ctx){this.subcontext\x3dthis.subcontext.filter(function(c){return c!\x3d\x3dctx});for(var keys\x3dObject.keys(ctx.nodes),$jscomp$iter$319\x3d$jscomp.makeIterator(keys),\n$jscomp$key$key\x3d$jscomp$iter$319.next();!$jscomp$key$key.done;$jscomp$key$key\x3d$jscomp$iter$319.next())ctx.nodes[$jscomp$key$key.value]._targets\x3dnull;keys\x3d$jscomp.makeIterator(keys);for($jscomp$key$key\x3dkeys.next();!$jscomp$key$key.done;$jscomp$key$key\x3dkeys.next())ctx.nodes[$jscomp$key$key.value].detach();ctx.nodes\x3dnull},get:function(id){return this.nodes[id]},set:function(id,node){return this.nodes[id]\x3dnode},add:function(spec,op){var ctx\x3dthis,df\x3dctx.dataflow,data\x3dspec.value;ctx.set(spec.id,op);\x22collect\x22\x3d\x3d\x3d\n(spec.type+\x22\x22).toLowerCase()\x26\x26data\x26\x26(data.$ingest?df.ingest(op,data.$ingest,data.$format):data.$request?df.preload(op,data.$request,data.$format):df.pulse(op,df.changeset().insert(data)));spec.root\x26\x26(ctx.root\x3dop);if(spec.parent){var p\x3dctx.get(spec.parent.$ref);p?(df.connect(p,[op]),op.targets().add(p)):(ctx.unresolved\x3dctx.unresolved||[]).push(function(){p\x3dctx.get(spec.parent.$ref);df.connect(p,[op]);op.targets().add(p)})}spec.signal\x26\x26(ctx.signals[spec.signal]\x3dop);spec.scale\x26\x26(ctx.scales[spec.scale]\x3d\nop);if(spec.data){data\x3d{};for(var name in spec.data)data.$jscomp$loop$prop$data$659$695\x3dctx.data[name]||(ctx.data[name]\x3d{}),spec.data[name].forEach(function($jscomp$loop$694){return function(role){return $jscomp$loop$694.$jscomp$loop$prop$data$659$695[role]\x3dop}}(data)),data\x3d{$jscomp$loop$prop$data$659$695:data.$jscomp$loop$prop$data$659$695}}},resolve:function(){(this.unresolved||[]).forEach(function(fn){return fn()});delete this.unresolved;return this},operator:function(spec,update){this.add(spec,\nthis.dataflow.add(spec.value,update))},transform:function(spec,type){this.add(spec,this.dataflow.add(this.transforms[(type+\x22\x22).toLowerCase()]))},stream:function(spec,stream){this.set(spec.id,stream)},update:function(spec,stream,target,update,params){this.dataflow.on(stream,target,update,params,spec.options)},operatorExpression:function(expr){return this.expr.operator(this,expr)},parameterExpression:function(expr){return this.expr.parameter(this,expr)},eventExpression:function(expr){return this.expr.event(this,\nexpr)},handlerExpression:function(expr){return this.expr.handler(this,expr)},encodeExpression:function(encode){return this.expr.encode(this,encode)},parse:function(spec){var ctx\x3dthis,operators\x3dspec.operators||[];spec.background\x26\x26(ctx.background\x3dspec.background);spec.eventConfig\x26\x26(ctx.eventConfig\x3dspec.eventConfig);spec.locale\x26\x26(ctx.locale\x3dspec.locale);operators.forEach(function(entry){return ctx.parseOperator(entry)});operators.forEach(function(entry){return ctx.parseOperatorParameters(entry)});(spec.streams||\n[]).forEach(function(entry){return ctx.parseStream(entry)});(spec.updates||[]).forEach(function(entry){return ctx.parseUpdate(entry)});return ctx.resolve()},parseOperator:function(spec){\x22operator\x22!\x3d\x3d(spec.type+\x22\x22).toLowerCase()\x26\x26spec.type?this.transform(spec,spec.type):this.operator(spec,spec.update?this.operatorExpression(spec.update):null)},parseOperatorParameters:function(spec){if(spec.params){var op\x3dthis.get(spec.id);op||vegaUtil.error(\x22Invalid operator id: \x22+spec.id);this.dataflow.connect(op,\nop.parameters(this.parseParameters(spec.params),spec.react,spec.initonly))}},parseParameters:function(spec,params){params\x3dparams||{};var ctx\x3dthis,key;for(key in spec){var value\x3dspec[key];params[key]\x3dvegaUtil.isArray(value)?value.map(function(v){return parseParameter(v,ctx,params)}):parseParameter(value,ctx,params)}return params},parseStream:function(spec){var ctx\x3dthis,filter\x3dnull!\x3dspec.filter?ctx.eventExpression(spec.filter):void 0,stream\x3dnull!\x3dspec.stream?ctx.get(spec.stream):void 0;if(spec.source)stream\x3d\nctx.events(spec.source,spec.type,filter);else if(spec.merge){var args\x3dspec.merge.map(function(_){return ctx.get(_)});stream\x3dargs[0].merge.apply(args[0],args.slice(1))}spec.between\x26\x26(args\x3dspec.between.map(function(_){return ctx.get(_)}),stream\x3dstream.between(args[0],args[1]));spec.filter\x26\x26(stream\x3dstream.filter(filter));null!\x3dspec.throttle\x26\x26(stream\x3dstream.throttle(+spec.throttle));null!\x3dspec.debounce\x26\x26(stream\x3dstream.debounce(+spec.debounce));null\x3d\x3dstream\x26\x26vegaUtil.error(\x22Invalid stream definition: \x22+\nJSON.stringify(spec));spec.consume\x26\x26stream.consume(!0);ctx.stream(spec,stream)},parseUpdate:function(spec){var srcid\x3dvegaUtil.isObject(srcid\x3dspec.source)?srcid.$ref:srcid;srcid\x3dthis.get(srcid);var update\x3dspec.update,params\x3dvoid 0;srcid||vegaUtil.error(\x22Source not defined: \x22+spec.source);var target\x3dspec.target\x26\x26spec.target.$expr?this.eventExpression(spec.target.$expr):this.get(spec.target);update\x26\x26update.$expr\x26\x26(update.$params\x26\x26(params\x3dthis.parseParameters(update.$params)),update\x3dthis.handlerExpression(update.$expr));\nthis.update(spec,srcid,target,update,params)},getState:function(options){var ctx$jscomp$0\x3dthis,state\x3d{};if(options.signals){var signals\x3dstate.signals\x3d{};Object.keys(ctx$jscomp$0.signals).forEach(function(key){var op\x3dctx$jscomp$0.signals[key];options.signals(key,op)\x26\x26(signals[key]\x3dop.value)})}if(options.data){var data\x3dstate.data\x3d{};Object.keys(ctx$jscomp$0.data).forEach(function(key){var dataset\x3dctx$jscomp$0.data[key];options.data(key,dataset)\x26\x26(data[key]\x3ddataset.input.value)})}ctx$jscomp$0.subcontext\x26\x26\n!1!\x3d\x3doptions.recurse\x26\x26(state.subcontext\x3dctx$jscomp$0.subcontext.map(function(ctx){return ctx.getState(options)}));return state},setState:function(state){var ctx\x3dthis,df\x3dctx.dataflow,data\x3dstate.data,signals\x3dstate.signals;Object.keys(signals||{}).forEach(function(key){df.update(ctx.signals[key],signals[key],SKIP)});Object.keys(data||{}).forEach(function(key){df.pulse(ctx.data[key].input,df.changeset().remove(vegaUtil.truthy).insert(data[key]))});(state.subcontext||[]).forEach(function(substate,i){(i\x3d\nctx.subcontext[i])\x26\x26i.setState(substate)})}};exports.context\x3dfunction(df,transforms,functions,expr){return new Context(df,transforms,functions,expr)};Object.defineProperty(exports,\x22__esModule\x22,{value:!0})})}");
SHADOW_ENV.evalLoad("module$node_modules$vega_view$build$vega_view.js", true , "shadow$provide.module$node_modules$vega_view$build$vega_view\x3dfunction(global$jscomp$0,require,module$jscomp$0,exports$jscomp$0){(function(global,factory){\x22object\x22\x3d\x3d\x3dtypeof exports$jscomp$0\x26\x26\x22undefined\x22!\x3d\x3dtypeof module$jscomp$0?factory(exports$jscomp$0,require(\x22module$node_modules$vega_util$build$vega_util\x22),require(\x22module$node_modules$vega_dataflow$build$vega_dataflow\x22),require(\x22module$node_modules$vega_scenegraph$build$vega_scenegraph\x22),require(\x22module$node_modules$d3_array$dist$d3_array\x22),require(\x22module$node_modules$vega_functions$build$vega_functions\x22),\nrequire(\x22module$node_modules$vega_runtime$build$vega_runtime\x22),require(\x22module$node_modules$d3_timer$dist$d3_timer\x22),require(\x22module$node_modules$vega_format$build$vega_format\x22)):\x22function\x22\x3d\x3d\x3dtypeof define\x26\x26define.amd?define(\x22exports vega-util vega-dataflow vega-scenegraph d3-array vega-functions vega-runtime d3-timer vega-format\x22.split(\x22 \x22),factory):(global\x3dglobal||self,factory(global.vega\x3d{},global.vega,global.vega,global.vega,global.d3,global.vega,global.vega,global.d3,global.vega))})(this,function(exports,\nvegaUtil,vegaDataflow,vegaScenegraph,d3Array,vegaFunctions,vegaRuntime,d3Timer,vegaFormat){function initializeAria(view){var el\x3dview.container();el\x26\x26(el.setAttribute(\x22role\x22,\x22graphics-document\x22),el.setAttribute(\x22aria-roleDescription\x22,\x22visualization\x22),ariaLabel(el,view.description()))}function ariaLabel(el,desc){el\x26\x26(null\x3d\x3ddesc?el.removeAttribute(\x22aria-label\x22):el.setAttribute(\x22aria-label\x22,desc))}function background(view){view.add(null,function(_){view._background\x3d_.bg;view._resize\x3d1;return _.bg},{bg:view._signals.background})}\nfunction cursor$jscomp$0(view){var cursor\x3dview._signals.cursor||(view._signals.cursor\x3dview.add({user:\x22default\x22,item:null}));view.on(view.events(\x22view\x22,\x22mousemove\x22),cursor,function(_,event){var user\x3d(_\x3dcursor.value)?vegaUtil.isString(_)?_:_.user:\x22default\x22;event\x3devent.item\x26\x26event.item.cursor||null;return _\x26\x26user\x3d\x3d\x3d_.user\x26\x26event\x3d\x3d_.item?_:{user:user,item:event}});view.add(null,function(_){_\x3d_.cursor;var item\x3dthis.value;vegaUtil.isString(_)||(item\x3d_.item,_\x3d_.user);setCursor(view,_\x26\x26\x22default\x22!\x3d\x3d_?_:item||\n_);return item},{cursor:cursor})}function setCursor(view,cursor){if(view\x3dview.globalCursor()?\x22undefined\x22!\x3d\x3dtypeof document\x26\x26document.body:view.container())return null\x3d\x3dcursor?view.style.removeProperty(\x22cursor\x22):view.style.cursor\x3dcursor}function dataref(view,name){view\x3dview._runtime.data;vegaUtil.hasOwnProperty(view,name)||vegaUtil.error(\x22Unrecognized data set: \x22+name);return view[name]}function change(name,changes){vegaDataflow.isChangeSet(changes)||vegaUtil.error(\x22Second argument to changes must be a changeset.\x22);\nname\x3ddataref(this,name);name.modified\x3d!0;return this.pulse(name.input,changes)}function width$jscomp$0(view){var padding\x3dview.padding();return Math.max(0,view._viewWidth+padding.left+padding.right)}function height$jscomp$0(view){var padding\x3dview.padding();return Math.max(0,view._viewHeight+padding.top+padding.bottom)}function offset(view){var padding\x3dview.padding();view\x3dview._origin;return[padding.left+view[0],padding.top+view[1]]}function resizeRenderer(view){var origin\x3doffset(view),w\x3dwidth$jscomp$0(view),\nh\x3dheight$jscomp$0(view);view._renderer.background(view.background());view._renderer.resize(w,h,origin);view._handler.origin(origin);view._resizeListeners.forEach(function(handler){try{handler(w,h)}catch(error){view.error(error)}})}function eventExtend(view,event,item){var r\x3dview._renderer;r\x3dr\x26\x26r.canvas();if(r){var translate\x3doffset(view);var p\x3devent.changedTouches?event.changedTouches[0]:event;p\x3dvegaScenegraph.point(p,r);p[0]-\x3dtranslate[0];p[1]-\x3dtranslate[1]}event.dataflow\x3dview;event.item\x3ditem;event.vega\x3d\nextension(view,item,p);return event}function extension(view,item$jscomp$0,point){function group(name){var g\x3ditemGroup,i;if(name)for(i\x3ditem$jscomp$0;i;i\x3di.mark.group)if(i.mark.name\x3d\x3d\x3dname){g\x3di;break}return g\x26\x26g.mark\x26\x26g.mark.interactive?g:{}}function xy(item){if(!item)return point;vegaUtil.isString(item)\x26\x26(item\x3dgroup(item));for(var p\x3dpoint.slice();item;)p[0]-\x3ditem.x||0,p[1]-\x3ditem.y||0,item\x3ditem.mark\x26\x26item.mark.group;return p}var itemGroup\x3ditem$jscomp$0?\x22group\x22\x3d\x3d\x3ditem$jscomp$0.mark.marktype?item$jscomp$0:\nitem$jscomp$0.mark.group:null;return{view:vegaUtil.constant(view),item:vegaUtil.constant(item$jscomp$0||{}),group:group,xy:xy,x:function(item){return xy(item)[0]},y:function(item){return xy(item)[1]}}}function initializeEventConfig(config){config\x3dvegaUtil.extend({defaults:{}},config);var unpack\x3dfunction(obj,keys){keys.forEach(function(k){vegaUtil.isArray(obj[k])\x26\x26(obj[k]\x3dvegaUtil.toSet(obj[k]))})};unpack(config.defaults,[\x22prevent\x22,\x22allow\x22]);unpack(config,[\x22view\x22,\x22window\x22,\x22selector\x22]);return config}\nfunction permit(view,key,type){var rule\x3dview._eventConfig\x26\x26view._eventConfig[key];return!1\x3d\x3d\x3drule||vegaUtil.isObject(rule)\x26\x26!rule[type]?(view.warn(\x22Blocked \x22+key+\x22 \x22+type+\x22 event listener.\x22),!1):!0}function itemFilter(event){return event.item}function markTarget(event){return event.item.mark.source}function invoke(name){return function(_,event){return event.vega.view().changeset().encode(event.item,name)}}function element(tag,attr,text){tag\x3ddocument.createElement(tag);for(var key in attr)tag.setAttribute(key,\nattr[key]);null!\x3dtext\x26\x26(tag.textContent\x3dtext);return tag}function bind$jscomp$0(view,el,binding){if(el){var param\x3dbinding.param,bind\x3dbinding.state;bind||(bind\x3dbinding.state\x3d{elements:null,active:!1,set:null,update:function(value){value!\x3d\x3dview.signal(param.signal)\x26\x26view.runAsync(null,function(){bind.source\x3d!0;view.signal(param.signal,value)})}},param.debounce\x26\x26(bind.update\x3dvegaUtil.debounce(param.debounce,bind.update)));generate(bind,el,param,view.signal(param.signal));bind.active||(view.on(view._signals[param.signal],\nnull,function(){bind.source?bind.source\x3d!1:bind.set(view.signal(param.signal))}),bind.active\x3d!0);return bind}}function generate(bind,el,param,value){var div\x3delement(\x22div\x22,{\x22class\x22:\x22vega-bind\x22}),wrapper\x3d\x22radio\x22\x3d\x3d\x3dparam.input?div:div.appendChild(element(\x22label\x22));wrapper.appendChild(element(\x22span\x22,{\x22class\x22:\x22vega-bind-name\x22},param.name||param.signal));el.appendChild(div);el\x3dform;switch(param.input){case \x22checkbox\x22:el\x3dcheckbox;break;case \x22select\x22:el\x3dselect;break;case \x22radio\x22:el\x3dradio;break;case \x22range\x22:el\x3d\nrange}el(bind,wrapper,param,value)}function form(bind,el,param,value$jscomp$0){var node\x3delement(\x22input\x22),key;for(key in param)\x22signal\x22!\x3d\x3dkey\x26\x26\x22element\x22!\x3d\x3dkey\x26\x26node.setAttribute(\x22input\x22\x3d\x3d\x3dkey?\x22type\x22:key,param[key]);node.setAttribute(\x22name\x22,param.signal);node.value\x3dvalue$jscomp$0;el.appendChild(node);node.addEventListener(\x22input\x22,function(){return bind.update(node.value)});bind.elements\x3d[node];bind.set\x3dfunction(value){return node.value\x3dvalue}}function checkbox(bind,el,param,value$jscomp$0){param\x3d{type:\x22checkbox\x22,\nname:param.signal};value$jscomp$0\x26\x26(param.checked\x3d!0);var node\x3delement(\x22input\x22,param);el.appendChild(node);node.addEventListener(\x22change\x22,function(){return bind.update(node.checked)});bind.elements\x3d[node];bind.set\x3dfunction(value){return node.checked\x3d!!value||null}}function select(bind,el,param,value$jscomp$0){var node\x3delement(\x22select\x22,{name:param.signal}),labels\x3dparam.labels||[];param.options.forEach(function(option,i){var attr\x3d{value:option};valuesEqual(option,value$jscomp$0)\x26\x26(attr.selected\x3d!0);\nnode.appendChild(element(\x22option\x22,attr,(labels[i]||option)+\x22\x22))});el.appendChild(node);node.addEventListener(\x22change\x22,function(){bind.update(param.options[node.selectedIndex])});bind.elements\x3d[node];bind.set\x3dfunction(value){for(var i\x3d0,n\x3dparam.options.length;i\x3cn;++i)if(valuesEqual(param.options[i],value)){node.selectedIndex\x3di;break}}}function radio(bind,el,param,value$jscomp$0){var group\x3delement(\x22span\x22,{\x22class\x22:\x22vega-bind-radio\x22}),labels\x3dparam.labels||[];el.appendChild(group);bind.elements\x3dparam.options.map(function(option,\ni){var attr\x3d{type:\x22radio\x22,name:param.signal,value:option};valuesEqual(option,value$jscomp$0)\x26\x26(attr.checked\x3d!0);attr\x3delement(\x22input\x22,attr);attr.addEventListener(\x22change\x22,function(){return bind.update(option)});i\x3delement(\x22label\x22,{},(labels[i]||option)+\x22\x22);i.prepend(attr);group.appendChild(i);return attr});bind.set\x3dfunction(value){for(var nodes\x3dbind.elements,n\x3dnodes.length,i\x3d0;i\x3cn;++i)valuesEqual(nodes[i].value,value)\x26\x26(nodes[i].checked\x3d!0)}}function range(bind,el,param,value$jscomp$0){value$jscomp$0\x3d\nvoid 0!\x3d\x3dvalue$jscomp$0?value$jscomp$0:(+param.max+ +param.min)/2;var max\x3dnull!\x3dparam.max?param.max:Math.max(100,+value$jscomp$0)||100,min\x3dparam.min||Math.min(0,max,+value$jscomp$0)||0,step\x3dparam.step||d3Array.tickStep(min,max,100),node\x3delement(\x22input\x22,{type:\x22range\x22,name:param.signal,min:min,max:max,step:step});node.value\x3dvalue$jscomp$0;var span\x3delement(\x22span\x22,{},+value$jscomp$0);el.appendChild(node);el.appendChild(span);el\x3dfunction(){span.textContent\x3dnode.value;bind.update(+node.value)};node.addEventListener(\x22input\x22,\nel);node.addEventListener(\x22change\x22,el);bind.elements\x3d[node];bind.set\x3dfunction(value){node.value\x3dvalue;span.textContent\x3dvalue}}function valuesEqual(a,b){return a\x3d\x3d\x3db||a+\x22\x22\x3d\x3d\x3db+\x22\x22}function initializeRenderer(view,r,el,constructor,scaleFactor,opt){r\x3dr||new constructor(view.loader());return r.initialize(el,width$jscomp$0(view),height$jscomp$0(view),offset(view),scaleFactor,opt).background(view.background())}function trap(view,fn){return fn?function(){try{fn.apply(this,arguments)}catch(error){view.error(error)}}:\nnull}function initializeHandler(view,prevHandler,el,constructor){var handler\x3d(new constructor(view.loader(),trap(view,view.tooltip()))).scene(view.scenegraph().root).initialize(el,offset(view),view);prevHandler\x26\x26prevHandler.handlers().forEach(function(h){handler.on(h.type,h.handler)});return handler}function lookup(view,el){if(\x22string\x22\x3d\x3d\x3dtypeof el)if(\x22undefined\x22!\x3d\x3dtypeof document){if(el\x3ddocument.querySelector(el),!el)return view.error(\x22Signal bind element not found: \x22+el),null}else return view.error(\x22DOM document instance not found.\x22),\nnull;if(el)try{el.innerHTML\x3d\x22\x22}catch(e){el\x3dnull,view.error(e)}return el}function padding$jscomp$0(_){vegaUtil.isObject(_)?_\x3d{top:+_.top||0,bottom:+_.bottom||0,left:+_.left||0,right:+_.right||0}:(_\x3d+_||0,_\x3d{top:_,bottom:_,left:_,right:_});return _}function renderHeadless(view,type,scaleFactor,opt){var module,ctr;return $jscomp.asyncExecutePromiseGeneratorProgram(function($jscomp$generator$context){return 1\x3d\x3d$jscomp$generator$context.nextAddress?((ctr\x3d(module\x3dvegaScenegraph.renderModule(type))\x26\x26module.headless)||\nvegaUtil.error(\x22Unrecognized renderer type: \x22+type),$jscomp$generator$context.yield(view.runAsync(),2)):$jscomp$generator$context.return(initializeRenderer(view,null,null,ctr,scaleFactor,opt).renderAsync(view._scenegraph.root))})}function toBlobURL(data,mime){data\x3dnew Blob([data],{type:mime});return window.URL.createObjectURL(data)}function runtime(view,spec,expr){return vegaRuntime.context(view,vegaDataflow.transforms,vegaFunctions.functionContext,expr).parse(spec)}function viewWidth$jscomp$0(view,\nwidth){var a\x3dview.autosize();view\x3dview.padding();return width-(a\x26\x26\x22padding\x22\x3d\x3d\x3da.contains?view.left+view.right:0)}function viewHeight$jscomp$0(view,height){var a\x3dview.autosize();view\x3dview.padding();return height-(a\x26\x26\x22padding\x22\x3d\x3d\x3da.contains?view.top+view.bottom:0)}function initializeResize(view){function resetSize(){view._autosize\x3dview._resize\x3d1}var s\x3dview._signals,w\x3ds.width,h\x3ds.height;s\x3ds.padding;view._resizeWidth\x3dview.add(null,function(_){view._width\x3d_.size;view._viewWidth\x3dviewWidth$jscomp$0(view,\n_.size);resetSize()},{size:w});view._resizeHeight\x3dview.add(null,function(_){view._height\x3d_.size;view._viewHeight\x3dviewHeight$jscomp$0(view,_.size);resetSize()},{size:h});var resizePadding\x3dview.add(null,resetSize,{pad:s});view._resizeWidth.rank\x3dw.rank+1;view._resizeHeight.rank\x3dh.rank+1;resizePadding.rank\x3ds.rank+1}function dataTest(name,data){return data.modified\x26\x26vegaUtil.isArray(data.input.value)\x26\x26name.indexOf(\x22_:vega:_\x22)}function signalTest(name,op){return!(\x22parent\x22\x3d\x3d\x3dname||op instanceof vegaDataflow.transforms.proxy)}\nfunction defaultTooltip(handler,event,item,value){(handler\x3dhandler.element())\x26\x26handler.setAttribute(\x22title\x22,formatTooltip(value))}function formatTooltip(value){return null\x3d\x3dvalue?\x22\x22:vegaUtil.isArray(value)?\x22[\x22+value.map(formatValue).join(\x22, \x22)+\x22]\x22:vegaUtil.isObject(value)\x26\x26!vegaUtil.isDate(value)?formatObject(value):value+\x22\x22}function formatObject(obj){return Object.keys(obj).map(function(key){var v\x3dobj[key];return key+\x22: \x22+(vegaUtil.isArray(v)?\x22[\x22+v.map(formatValue).join(\x22, \x22)+\x22]\x22:formatValue(v))}).join(\x22\\n\x22)}\nfunction formatValue(value){return vegaUtil.isArray(value)?\x22[\u2026]\x22:vegaUtil.isObject(value)\x26\x26!vegaUtil.isDate(value)?\x22{\u2026}\x22:value}function View(spec,options){options\x3doptions||{};vegaDataflow.Dataflow.call(this);options.loader\x26\x26this.loader(options.loader);options.logger\x26\x26this.logger(options.logger);null!\x3doptions.logLevel\x26\x26this.logLevel(options.logLevel);if(options.locale||spec.locale){var loc\x3dvegaUtil.extend({},spec.locale,options.locale);this.locale(vegaFormat.locale(loc.number,loc.time))}this._elBind\x3d\nthis._el\x3dnull;this._renderType\x3doptions.renderer||vegaScenegraph.RenderType.Canvas;this._scenegraph\x3dnew vegaScenegraph.Scenegraph;loc\x3dthis._scenegraph.root;this._renderer\x3dnull;this._tooltip\x3doptions.tooltip||defaultTooltip;this._redraw\x3d!0;this._handler\x3d(new vegaScenegraph.CanvasHandler).scene(loc);this._preventDefault\x3dthis._globalCursor\x3d!1;this._timers\x3d[];this._eventListeners\x3d[];this._resizeListeners\x3d[];this._eventConfig\x3dinitializeEventConfig(spec.eventConfig);this.globalCursor(this._eventConfig.globalCursor);\nvar ctx\x3druntime(this,spec,options.expr);this._runtime\x3dctx;this._signals\x3dctx.signals;this._bind\x3d(spec.bindings||[]).map(function(_){return{state:null,param:vegaUtil.extend({},_)}});ctx.root\x26\x26ctx.root.set(loc);loc.source\x3dctx.data.root.input;this.pulse(ctx.data.root.input,this.changeset().insert(loc.items));this._width\x3dthis.width();this._height\x3dthis.height();this._viewWidth\x3dviewWidth$jscomp$0(this,this._width);this._viewHeight\x3dviewHeight$jscomp$0(this,this._height);this._origin\x3d[0,0];this._resize\x3d0;\nthis._autosize\x3d1;initializeResize(this);background(this);cursor$jscomp$0(this);this.description(spec.description);options.hover\x26\x26this.hover();options.container\x26\x26this.initialize(options.container,options.bind)}function lookupSignal(view,name){return vegaUtil.hasOwnProperty(view._signals,name)?view._signals[name]:vegaUtil.error(\x22Unrecognized signal name: \x22+vegaUtil.stringValue(name))}function findOperatorHandler(op$jscomp$0,handler){op$jscomp$0\x3d(op$jscomp$0._targets||[]).filter(function(op){return op._update\x26\x26\nop._update.handler\x3d\x3d\x3dhandler});return op$jscomp$0.length?op$jscomp$0[0]:null}function addOperatorListener(view,name,op,handler){var h\x3dfindOperatorHandler(op,handler);h||(h\x3dtrap(view,function(){return handler(name,op.value)}),h.handler\x3dhandler,view.on(op,null,h));return view}function removeOperatorListener(view,op,handler){(handler\x3dfindOperatorHandler(op,handler))\x26\x26op._targets.remove(handler);return view}var NO_TRAP\x3d{trap:!1},Skip\x3d{skip:!0},prototype\x3dvegaUtil.inherits(View,vegaDataflow.Dataflow);prototype.evaluate\x3d\nfunction(encode,prerun,postrun){var $jscomp$async$this\x3dthis,e;return $jscomp.asyncExecutePromiseGeneratorProgram(function($jscomp$generator$context){switch($jscomp$generator$context.nextAddress){case 1:return $jscomp$generator$context.yield(vegaDataflow.Dataflow.prototype.evaluate.call($jscomp$async$this,encode,prerun),2);case 2:if(!$jscomp$async$this._redraw\x26\x26!$jscomp$async$this._resize){$jscomp$generator$context.jumpTo(3);break}$jscomp$generator$context.setCatchFinallyBlocks(4);if(!$jscomp$async$this._renderer){$jscomp$generator$context.jumpTo(6);\nbreak}$jscomp$async$this._resize\x26\x26($jscomp$async$this._resize\x3d0,resizeRenderer($jscomp$async$this));return $jscomp$generator$context.yield($jscomp$async$this._renderer.renderAsync($jscomp$async$this._scenegraph.root),6);case 6:$jscomp$async$this._redraw\x3d!1;$jscomp$generator$context.leaveTryBlock(3);break;case 4:e\x3d$jscomp$generator$context.enterCatchBlock(),$jscomp$async$this.error(e);case 3:return postrun\x26\x26vegaDataflow.asyncCallback($jscomp$async$this,postrun),$jscomp$generator$context.return($jscomp$async$this)}})};\nprototype.dirty\x3dfunction(item){this._redraw\x3d!0;this._renderer\x26\x26this._renderer.dirty(item)};prototype.description\x3dfunction(text){if(arguments.length){var desc\x3dnull!\x3dtext?text+\x22\x22:null;desc!\x3d\x3dthis._desc\x26\x26ariaLabel(this._el,this._desc\x3ddesc);return this}return this._desc};prototype.container\x3dfunction(){return this._el};prototype.scenegraph\x3dfunction(){return this._scenegraph};prototype.origin\x3dfunction(){return this._origin.slice()};prototype.signal\x3dfunction(name,value,options){var op\x3dlookupSignal(this,\nname);return 1\x3d\x3d\x3darguments.length?op.value:this.update(op,value,options)};prototype.width\x3dfunction(_){return arguments.length?this.signal(\x22width\x22,_):this.signal(\x22width\x22)};prototype.height\x3dfunction(_){return arguments.length?this.signal(\x22height\x22,_):this.signal(\x22height\x22)};prototype.padding\x3dfunction(_){return arguments.length?this.signal(\x22padding\x22,padding$jscomp$0(_)):padding$jscomp$0(this.signal(\x22padding\x22))};prototype.autosize\x3dfunction(_){return arguments.length?this.signal(\x22autosize\x22,_):this.signal(\x22autosize\x22)};\nprototype.background\x3dfunction(_){return arguments.length?this.signal(\x22background\x22,_):this.signal(\x22background\x22)};prototype.renderer\x3dfunction(type){if(!arguments.length)return this._renderType;vegaScenegraph.renderModule(type)||vegaUtil.error(\x22Unrecognized renderer type: \x22+type);type!\x3d\x3dthis._renderType\x26\x26(this._renderType\x3dtype,this._resetRenderer());return this};prototype.tooltip\x3dfunction(handler){if(!arguments.length)return this._tooltip;handler!\x3d\x3dthis._tooltip\x26\x26(this._tooltip\x3dhandler,this._resetRenderer());\nreturn this};prototype.loader\x3dfunction(loader){if(!arguments.length)return this._loader;loader!\x3d\x3dthis._loader\x26\x26(vegaDataflow.Dataflow.prototype.loader.call(this,loader),this._resetRenderer());return this};prototype.resize\x3dfunction(){this._autosize\x3d1;return this.touch(lookupSignal(this,\x22autosize\x22))};prototype._resetRenderer\x3dfunction(){this._renderer\x26\x26(this._renderer\x3dnull,this.initialize(this._el,this._elBind))};prototype._resizeView\x3dfunction(viewWidth,viewHeight,width,height,origin,auto){this.runAfter(function(view){var rerun\x3d\n0;view._autosize\x3d0;view.width()!\x3d\x3dwidth\x26\x26(rerun\x3d1,view.signal(\x22width\x22,width,Skip),view._resizeWidth.skip(!0));view.height()!\x3d\x3dheight\x26\x26(rerun\x3d1,view.signal(\x22height\x22,height,Skip),view._resizeHeight.skip(!0));view._viewWidth!\x3d\x3dviewWidth\x26\x26(view._resize\x3d1,view._viewWidth\x3dviewWidth);view._viewHeight!\x3d\x3dviewHeight\x26\x26(view._resize\x3d1,view._viewHeight\x3dviewHeight);if(view._origin[0]!\x3d\x3dorigin[0]||view._origin[1]!\x3d\x3dorigin[1])view._resize\x3d1,view._origin\x3dorigin;rerun\x26\x26view.run(\x22enter\x22);auto\x26\x26view.runAfter(function(v){return v.resize()})},\n!1,1)};prototype.addEventListener\x3dfunction(type,handler,options){var callback\x3dhandler;options\x26\x26!1\x3d\x3d\x3doptions.trap||(callback\x3dtrap(this,handler),callback.raw\x3dhandler);this._handler.on(type,callback);return this};prototype.removeEventListener\x3dfunction(type,handler){for(var handlers\x3dthis._handler.handlers(type),i\x3dhandlers.length,h,t;0\x3c\x3d--i;)if(t\x3dhandlers[i].type,h\x3dhandlers[i].handler,type\x3d\x3d\x3dt\x26\x26(handler\x3d\x3d\x3dh||handler\x3d\x3d\x3dh.raw)){this._handler.off(t,h);break}return this};prototype.addResizeListener\x3dfunction(handler){var l\x3d\nthis._resizeListeners;0\x3el.indexOf(handler)\x26\x26l.push(handler);return this};prototype.removeResizeListener\x3dfunction(handler){var l\x3dthis._resizeListeners;handler\x3dl.indexOf(handler);0\x3c\x3dhandler\x26\x26l.splice(handler,1);return this};prototype.addSignalListener\x3dfunction(name,handler){return addOperatorListener(this,name,lookupSignal(this,name),handler)};prototype.removeSignalListener\x3dfunction(name,handler){return removeOperatorListener(this,lookupSignal(this,name),handler)};prototype.addDataListener\x3dfunction(name,\nhandler){return addOperatorListener(this,name,dataref(this,name).values,handler)};prototype.removeDataListener\x3dfunction(name,handler){return removeOperatorListener(this,dataref(this,name).values,handler)};prototype.globalCursor\x3dfunction(_){if(arguments.length){if(this._globalCursor!\x3d\x3d!!_){var prev\x3dsetCursor(this,null);this._globalCursor\x3d!!_;prev\x26\x26setCursor(this,prev)}return this}return this._globalCursor};prototype.preventDefault\x3dfunction(_){return arguments.length?(this._preventDefault\x3d_,this):this._preventDefault};\nprototype.timer\x3dfunction(callback,delay){this._timers.push(d3Timer.interval(function(elapsed){callback({timestamp:Date.now(),elapsed:elapsed})},delay))};prototype.events\x3dfunction(source,type,filter){var view\x3dthis,s\x3dnew vegaDataflow.EventStream(filter);filter\x3dfunction(e,item){view.runAsync(null,function(){var JSCompiler_temp;if(JSCompiler_temp\x3d\x22view\x22\x3d\x3d\x3dsource){var def\x3dview._eventConfig.defaults;JSCompiler_temp\x3ddef.prevent;def\x3ddef.allow;JSCompiler_temp\x3d!1\x3d\x3d\x3dJSCompiler_temp||!0\x3d\x3d\x3ddef?!1:!0\x3d\x3d\x3dJSCompiler_temp||\n!1\x3d\x3d\x3ddef?!0:JSCompiler_temp?JSCompiler_temp[type]:def?!def[type]:view.preventDefault()}JSCompiler_temp\x26\x26e.preventDefault();s.receive(eventExtend(view,e,item))})};var sources;if(\x22timer\x22\x3d\x3d\x3dsource)permit(view,\x22timer\x22,type)\x26\x26view.timer(filter,type);else if(\x22view\x22\x3d\x3d\x3dsource)permit(view,\x22view\x22,type)\x26\x26view.addEventListener(type,filter,NO_TRAP);else if(\x22window\x22\x3d\x3d\x3dsource?permit(view,\x22window\x22,type)\x26\x26\x22undefined\x22!\x3d\x3dtypeof window\x26\x26(sources\x3d[window]):\x22undefined\x22!\x3d\x3dtypeof document\x26\x26permit(view,\x22selector\x22,type)\x26\x26\n(sources\x3ddocument.querySelectorAll(source)),sources){for(var i\x3d0,n\x3dsources.length;i\x3cn;++i)sources[i].addEventListener(type,filter);view._eventListeners.push({type:type,sources:sources,handler:filter})}else view.warn(\x22Can not resolve event source: \x22+source);return s};prototype.finalize\x3dfunction(){var tooltip\x3dthis._tooltip,timers\x3dthis._timers,listeners\x3dthis._eventListeners,n;for(n\x3dtimers.length;0\x3c\x3d--n;)timers[n].stop();for(n\x3dlisteners.length;0\x3c\x3d--n;){var e\x3dlisteners[n];for(timers\x3de.sources.length;0\x3c\x3d\n--timers;)e.sources[timers].removeEventListener(e.type,e.handler)}tooltip\x26\x26tooltip.call(this,this._handler,null,null,null);return this};prototype.hover\x3dfunction(hoverSet,leaveSet){hoverSet\x3d[hoverSet||\x22hover\x22];leaveSet\x3d[leaveSet||\x22update\x22,hoverSet[0]];this.on(this.events(\x22view\x22,\x22mouseover\x22,itemFilter),markTarget,invoke(hoverSet));this.on(this.events(\x22view\x22,\x22mouseout\x22,itemFilter),markTarget,invoke(leaveSet));return this};prototype.data\x3dfunction(name,values){return 2\x3earguments.length?dataref(this,name).values.value:\nchange.call(this,name,vegaDataflow.changeset().remove(vegaUtil.truthy).insert(values))};prototype.change\x3dchange;prototype.insert\x3dfunction(name,_){return change.call(this,name,vegaDataflow.changeset().insert(_))};prototype.remove\x3dfunction(name,_){return change.call(this,name,vegaDataflow.changeset().remove(_))};prototype.scale\x3dfunction(name){var scales\x3dthis._runtime.scales;vegaUtil.hasOwnProperty(scales,name)||vegaUtil.error(\x22Unrecognized scale or projection: \x22+name);return scales[name].value};prototype.initialize\x3d\nfunction(el,elBind){var view\x3dthis,type\x3dview._renderType,config\x3dview._eventConfig.bind,module\x3dvegaScenegraph.renderModule(type);el\x3dview._el\x3del?lookup(view,el):null;initializeAria(view);module||view.error(\x22Unrecognized renderer type: \x22+type);type\x3dmodule.handler||vegaScenegraph.CanvasHandler;module\x3del?module.renderer:module.headless;view._renderer\x3dmodule?initializeRenderer(view,view._renderer,el,module):null;view._handler\x3dinitializeHandler(view,view._handler,el,type);view._redraw\x3d!0;el\x26\x26\x22none\x22!\x3d\x3dconfig\x26\x26\n(elBind\x3delBind?view._elBind\x3dlookup(view,elBind):el.appendChild(element(\x22form\x22,{\x22class\x22:\x22vega-bindings\x22})),view._bind.forEach(function(_){_.param.element\x26\x26\x22container\x22!\x3d\x3dconfig\x26\x26(_.element\x3dlookup(view,_.param.element))}),view._bind.forEach(function(_){bind$jscomp$0(view,_.element||elBind,_)}));return view};prototype.toImageURL\x3dfunction(type,scaleFactor){var $jscomp$async$this\x3dthis,r;return $jscomp.asyncExecutePromiseGeneratorProgram(function($jscomp$generator$context){if(1\x3d\x3d$jscomp$generator$context.nextAddress)return type!\x3d\x3d\nvegaScenegraph.RenderType.Canvas\x26\x26type!\x3d\x3dvegaScenegraph.RenderType.SVG\x26\x26type!\x3d\x3dvegaScenegraph.RenderType.PNG\x26\x26vegaUtil.error(\x22Unrecognized image type: \x22+type),$jscomp$generator$context.yield(renderHeadless($jscomp$async$this,type,scaleFactor),2);r\x3d$jscomp$generator$context.yieldResult;return $jscomp$generator$context.return(type\x3d\x3d\x3dvegaScenegraph.RenderType.SVG?toBlobURL(r.svg(),\x22image/svg+xml\x22):r.canvas().toDataURL(\x22image/png\x22))})};prototype.toCanvas\x3dfunction(scaleFactor,opt){var $jscomp$async$this\x3d\nthis,r;return $jscomp.asyncExecutePromiseGeneratorProgram(function($jscomp$generator$context){if(1\x3d\x3d$jscomp$generator$context.nextAddress)return $jscomp$generator$context.yield(renderHeadless($jscomp$async$this,vegaScenegraph.RenderType.Canvas,scaleFactor,opt),2);r\x3d$jscomp$generator$context.yieldResult;return $jscomp$generator$context.return(r.canvas())})};prototype.toSVG\x3dfunction(scaleFactor){var $jscomp$async$this\x3dthis,r;return $jscomp.asyncExecutePromiseGeneratorProgram(function($jscomp$generator$context){if(1\x3d\x3d\n$jscomp$generator$context.nextAddress)return $jscomp$generator$context.yield(renderHeadless($jscomp$async$this,vegaScenegraph.RenderType.SVG,scaleFactor),2);r\x3d$jscomp$generator$context.yieldResult;return $jscomp$generator$context.return(r.svg())})};prototype.getState\x3dfunction(options){return this._runtime.getState(options||{data:dataTest,signals:signalTest,recurse:!0})};prototype.setState\x3dfunction(state){this.runAsync(null,function(v){v._trigger\x3d!1;v._runtime.setState(state)},function(v){v._trigger\x3d\n!0});return this};exports.View\x3dView;Object.defineProperty(exports,\x22__esModule\x22,{value:!0})})}");
SHADOW_ENV.evalLoad("module$node_modules$vega_event_selector$build$vega_event_selector.js", true , "shadow$provide.module$node_modules$vega_event_selector$build$vega_event_selector\x3dfunction(global$jscomp$0,require,module,exports$jscomp$0){(function(global,factory){\x22object\x22\x3d\x3d\x3dtypeof exports$jscomp$0\x26\x26\x22undefined\x22!\x3d\x3dtypeof module?factory(exports$jscomp$0):\x22function\x22\x3d\x3d\x3dtypeof define\x26\x26define.amd?define([\x22exports\x22],factory):(global\x3dglobal||self,factory(global.vega\x3d{}))})(this,function(exports){function find(s,i,endChar,pushChar,popChar){for(var count\x3d0,n\x3ds.length,c;i\x3cn;++i)if(c\x3ds[i],count||c!\x3d\x3dendChar)popChar\x26\x26\n0\x3c\x3dpopChar.indexOf(c)?--count:pushChar\x26\x260\x3c\x3dpushChar.indexOf(c)\x26\x26++count;else break;return i}function parseMerge(s){for(var output\x3d[],start\x3d0,n\x3ds.length,i\x3d0;i\x3cn;)i\x3dfind(s,i,COMMA,LBRACK+LBRACE,RBRACK+RBRACE),output.push(s.substring(start,i).trim()),start\x3d++i;if(0\x3d\x3d\x3doutput.length)throw\x22Empty event selector: \x22+s;return output}function parseSelector(s){if(\x22[\x22\x3d\x3d\x3ds[0]){var JSCompiler_temp\x3ds;var n\x3dJSCompiler_temp.length;s\x3dfind(JSCompiler_temp,1,RBRACK,LBRACK,RBRACK);if(s\x3d\x3d\x3dn)throw\x22Empty between selector: \x22+\nJSCompiler_temp;n\x3dparseMerge(JSCompiler_temp.substring(1,s));if(2!\x3d\x3dn.length)throw\x22Between selector must have two elements: \x22+JSCompiler_temp;JSCompiler_temp\x3dJSCompiler_temp.slice(s+1).trim();if(JSCompiler_temp[0]!\x3d\x3dGT)throw\x22Expected \x27\\x3e\x27 after between selector: \x22+JSCompiler_temp;n\x3dn.map(parseSelector);JSCompiler_temp\x3dparseSelector(JSCompiler_temp.slice(1).trim());JSCompiler_temp.between?JSCompiler_temp\x3d{between:n,stream:JSCompiler_temp}:JSCompiler_temp.between\x3dn}else{n\x3d{source:DEFAULT_SOURCE};\nvar source\x3d[],throttle\x3d[0,0],markname\x3d0,start\x3d0,n$jscomp$0\x3ds.length,i\x3d0;if(s[n$jscomp$0-1]\x3d\x3d\x3dRBRACE){i\x3ds.lastIndexOf(LBRACE);if(0\x3c\x3di){try{throttle\x3dparseThrottle(s.substring(i+1,n$jscomp$0-1))}catch(e){throw\x22Invalid throttle specification: \x22+s;}s\x3ds.slice(0,i).trim();n$jscomp$0\x3ds.length}else throw\x22Unmatched right brace: \x22+s;i\x3d0}if(!n$jscomp$0)throw s;s[0]\x3d\x3d\x3dNAME\x26\x26(markname\x3d++i);var j\x3dfind(s,i,COLON);j\x3cn$jscomp$0\x26\x26(source.push(s.substring(start,j).trim()),start\x3di\x3d++j);i\x3dfind(s,i,LBRACK);if(i\x3d\x3d\x3dn$jscomp$0)source.push(s.substring(start,\nn$jscomp$0).trim());else if(source.push(s.substring(start,i).trim()),JSCompiler_temp\x3d[],start\x3d++i,start\x3d\x3d\x3dn$jscomp$0)throw\x22Unmatched left bracket: \x22+s;for(;i\x3cn$jscomp$0;){i\x3dfind(s,i,RBRACK);if(i\x3d\x3d\x3dn$jscomp$0)throw\x22Unmatched left bracket: \x22+s;JSCompiler_temp.push(s.substring(start,i).trim());if(i\x3cn$jscomp$0-1\x26\x26s[++i]!\x3d\x3dLBRACK)throw\x22Expected left bracket: \x22+s;start\x3d++i}if(!(n$jscomp$0\x3dsource.length)||ILLEGAL.test(source[n$jscomp$0-1]))throw\x22Invalid event selector: \x22+s;1\x3cn$jscomp$0?(n.type\x3dsource[1],\nmarkname?n.markname\x3dsource[0].slice(1):MARKS[source[0]]?n.marktype\x3dsource[0]:n.source\x3dsource[0]):n.type\x3dsource[0];\x22!\x22\x3d\x3d\x3dn.type.slice(-1)\x26\x26(n.consume\x3d!0,n.type\x3dn.type.slice(0,-1));null!\x3dJSCompiler_temp\x26\x26(n.filter\x3dJSCompiler_temp);throttle[0]\x26\x26(n.throttle\x3dthrottle[0]);throttle[1]\x26\x26(n.debounce\x3dthrottle[1]);JSCompiler_temp\x3dn}return JSCompiler_temp}function parseThrottle(s){var a\x3ds.split(COMMA);if(!s.length||2\x3ca.length)throw s;return a.map(function(_){_\x3d+_;if(_!\x3d\x3d_)throw s;return _})}var LBRACK\x3d\x22[\x22,RBRACK\x3d\n\x22]\x22,LBRACE\x3d\x22{\x22,RBRACE\x3d\x22}\x22,COLON\x3d\x22:\x22,COMMA\x3d\x22,\x22,NAME\x3d\x22@\x22,GT\x3d\x22\\x3e\x22,ILLEGAL\x3d/[[\\]{}]/,DEFAULT_SOURCE,MARKS,DEFAULT_MARKS\x3d{\x22*\x22:1,arc:1,area:1,group:1,image:1,line:1,path:1,rect:1,rule:1,shape:1,symbol:1,text:1,trail:1};exports.selector\x3dfunction(selector,source,marks){DEFAULT_SOURCE\x3dsource||\x22view\x22;MARKS\x3dmarks||DEFAULT_MARKS;return parseMerge(selector.trim()).map(parseSelector)};Object.defineProperty(exports,\x22__esModule\x22,{value:!0})})}");
SHADOW_ENV.evalLoad("module$node_modules$vega_parser$build$vega_parser.js", true , "shadow$provide.module$node_modules$vega_parser$build$vega_parser\x3dfunction(global$jscomp$0,require,module,exports$jscomp$0){(function(global,factory){\x22object\x22\x3d\x3d\x3dtypeof exports$jscomp$0\x26\x26\x22undefined\x22!\x3d\x3dtypeof module?factory(exports$jscomp$0,require(\x22module$node_modules$vega_util$build$vega_util\x22),require(\x22module$node_modules$vega_functions$build$vega_functions\x22),require(\x22module$node_modules$vega_event_selector$build$vega_event_selector\x22),require(\x22module$node_modules$vega_scale$build$vega_scale\x22),require(\x22module$node_modules$vega_dataflow$build$vega_dataflow\x22)):\n\x22function\x22\x3d\x3d\x3dtypeof define\x26\x26define.amd?define(\x22exports vega-util vega-functions vega-event-selector vega-scale vega-dataflow\x22.split(\x22 \x22),factory):(global\x3dglobal||self,factory(global.vega\x3d{},global.vega,global.vega,global.vega,global.vega,global.vega))})(this,function(exports,vegaUtil,vegaFunctions,vegaEventSelector,vegaScale,vegaDataflow){function parseAutosize(spec){return vegaUtil.isObject(spec)?spec:{type:spec||\x22pad\x22}}function parsePadding(spec){vegaUtil.isObject(spec)?spec\x3dspec.signal?spec:{top:+spec.top||\n0,bottom:+spec.bottom||0,left:+spec.left||0,right:+spec.right||0}:(spec\x3d+spec||0,spec\x3d{top:spec,bottom:spec,left:spec,right:spec});return spec}function addEncode(object,name,value,set){return null!\x3dvalue?(vegaUtil.isObject(value)\x26\x26!vegaUtil.isArray(value)?object.update[name]\x3dvalue:object[set||\x22enter\x22][name]\x3d{value:value},1):0}function addEncoders(object,enter,update){for(var name in enter)addEncode(object,name,enter[name]);for(var name$660 in update)addEncode(object,name$660,update[name$660],\x22update\x22)}\nfunction extendEncode(encode,extra,skip){for(var name in extra)skip\x26\x26vegaUtil.hasOwnProperty(skip,name)||(encode[name]\x3dvegaUtil.extend(encode[name]||{},extra[name]));return encode}function has(key,encode){return encode\x26\x26(encode.enter\x26\x26encode.enter[key]||encode.update\x26\x26encode.update[key])}function applyDefaults(encode,type,role,style,config){var defaults\x3d{},enter\x3d{},update;var key\x3d\x22lineBreak\x22;\x22text\x22!\x3d\x3dtype||null\x3d\x3dconfig[key]||has(key,encode)||applyDefault(defaults,key,config[key]);if(\x22legend\x22\x3d\x3drole||\nString(role).startsWith(\x22axis\x22))role\x3dnull;role\x3d\x22frame\x22\x3d\x3d\x3drole?config.group:\x22mark\x22\x3d\x3d\x3drole?vegaUtil.extend({},config.mark,config[type]):null;for(key in role)(type\x3dhas(key,encode)||(\x22fill\x22\x3d\x3d\x3dkey||\x22stroke\x22\x3d\x3d\x3dkey)\x26\x26(has(\x22fill\x22,encode)||has(\x22stroke\x22,encode)))||applyDefault(defaults,key,role[key]);vegaUtil.array(style).forEach(function(name){name\x3dconfig.style\x26\x26config.style[name];for(var key$661 in name)has(key$661,encode)||applyDefault(defaults,key$661,name[key$661])});encode\x3dvegaUtil.extend({},encode);\nfor(key in defaults)role\x3ddefaults[key],role.signal?(update\x3dupdate||{})[key]\x3drole:enter[key]\x3drole;encode.enter\x3dvegaUtil.extend(enter,encode.enter);update\x26\x26(encode.update\x3dvegaUtil.extend(update,encode.update));return encode}function applyDefault(defaults,key,value){defaults[key]\x3dvalue\x26\x26value.signal?{signal:value.signal}:{value:value}}function entry$jscomp$0(enc){if(null!\x3denc.gradient)return gradient(enc);if(enc.signal)var JSCompiler_temp\x3d\x22(\x22+enc.signal+\x22)\x22;else enc.color?(JSCompiler_temp\x3denc.color,\nJSCompiler_temp\x3dJSCompiler_temp.c?_color(\x22hcl\x22,JSCompiler_temp.h,JSCompiler_temp.c,JSCompiler_temp.l):JSCompiler_temp.h||JSCompiler_temp.s?_color(\x22hsl\x22,JSCompiler_temp.h,JSCompiler_temp.s,JSCompiler_temp.l):JSCompiler_temp.l||JSCompiler_temp.a?_color(\x22lab\x22,JSCompiler_temp.l,JSCompiler_temp.a,JSCompiler_temp.b):JSCompiler_temp.r||JSCompiler_temp.g||JSCompiler_temp.b?_color(\x22rgb\x22,JSCompiler_temp.r,JSCompiler_temp.g,JSCompiler_temp.b):null):JSCompiler_temp\x3dnull!\x3denc.field?field$jscomp$0(enc.field):void 0!\x3d\x3d\nenc.value?vegaUtil.stringValue(enc.value):void 0;if(null!\x3denc.scale){var scale\x3dscaleRef(enc.scale);null!\x3denc.range?JSCompiler_temp\x3d\x22lerp(_range(\x22+scale+\x22), \x22+ +enc.range+\x22)\x22:(void 0!\x3d\x3dJSCompiler_temp\x26\x26(JSCompiler_temp\x3d\x22_scale(\x22+scale+\x22, \x22+JSCompiler_temp+\x22)\x22),enc.band\x26\x26(JSCompiler_temp\x3d(JSCompiler_temp?JSCompiler_temp+\x22+\x22:\x22\x22)+(\x22_bandwidth(\x22+scale+\x22)\x22)+(1\x3d\x3d\x3d+enc.band?\x22\x22:\x22*\x22+property$jscomp$0(enc.band)),enc.extra\x26\x26(JSCompiler_temp\x3d\x22(datum.extra ? _scale(\x22+scale+\x22, datum.extra.value) : \x22+JSCompiler_temp+\n\x22)\x22)),null\x3d\x3dJSCompiler_temp\x26\x26(JSCompiler_temp\x3d\x220\x22))}void 0\x3d\x3d\x3dJSCompiler_temp\x26\x26(JSCompiler_temp\x3dnull);null!\x3denc.exponent\x26\x26(JSCompiler_temp\x3d\x22pow(\x22+JSCompiler_temp+\x22,\x22+property$jscomp$0(enc.exponent)+\x22)\x22);null!\x3denc.mult\x26\x26(JSCompiler_temp+\x3d\x22*\x22+property$jscomp$0(enc.mult));null!\x3denc.offset\x26\x26(JSCompiler_temp+\x3d\x22+\x22+property$jscomp$0(enc.offset));enc.round\x26\x26(JSCompiler_temp\x3d\x22round(\x22+JSCompiler_temp+\x22)\x22);return JSCompiler_temp}function gradient(enc){for(var args\x3d[enc.start,enc.stop,enc.count].map(function(_){return null\x3d\x3d\n_?null:vegaUtil.stringValue(_)});args.length\x26\x26null\x3d\x3dvegaUtil.peek(args);)args.pop();args.unshift(scaleRef(enc.gradient));return\x22gradient(\x22+args.join(\x22,\x22)+\x22)\x22}function property$jscomp$0(property){return vegaUtil.isObject(property)?\x22(\x22+entry$jscomp$0(property)+\x22)\x22:property}function field$jscomp$0(ref){return resolveField(vegaUtil.isObject(ref)?ref:{datum:ref})}function resolveField(ref){if(ref.signal){var object\x3d\x22datum\x22;var level\x3dref.signal}else if(ref.group||ref.parent){level\x3dMath.max(1,ref.level||\n1);for(object\x3d\x22item\x22;0\x3clevel--;)object+\x3d\x22.mark.group\x22;ref.parent?(level\x3dref.parent,object+\x3d\x22.datum\x22):level\x3dref.group}else ref.datum?(object\x3d\x22datum\x22,level\x3dref.datum):vegaUtil.error(\x22Invalid field reference: \x22+vegaUtil.stringValue(ref));ref.signal||(level\x3dvegaUtil.isString(level)?vegaUtil.splitAccessPath(level).map(vegaUtil.stringValue).join(\x22][\x22):resolveField(level));return object+\x22[\x22+level+\x22]\x22}function rule$jscomp$0(enc){var code\x3d\x22\x22;enc.forEach(function(rule){var value\x3dentry$jscomp$0(rule);code+\x3d\nrule.test?\x22(\x22+rule.test+\x22)?\x22+value+\x22:\x22:value});\x22:\x22\x3d\x3d\x3dvegaUtil.peek(code)\x26\x26(code+\x3d\x22null\x22);return code}function parseEncode(encode,type,role,style,scope$jscomp$0,params$jscomp$0){var enc\x3d{};params$jscomp$0\x3dparams$jscomp$0||{};params$jscomp$0.encoders\x3d{$encode:enc};encode\x3dapplyDefaults(encode,type,role,style,scope$jscomp$0.config);for(var key in encode){role\x3dvoid 0;style\x3dencode[key];var marktype\x3dtype,params\x3dparams$jscomp$0,scope\x3dscope$jscomp$0,channels\x3d{},fields\x3d{};for(role in style)if(null!\x3dstyle[role]){var JSCompiler_inline_result\x3d\nstyle[role];JSCompiler_inline_result\x3dvegaUtil.isArray(JSCompiler_inline_result)?rule$jscomp$0(JSCompiler_inline_result):entry$jscomp$0(JSCompiler_inline_result);channels[role]\x3dparse(JSCompiler_inline_result,scope,params,fields)}role\x3d{$expr:{marktype:marktype,channels:channels},$fields:Object.keys(fields),$output:Object.keys(style)};enc[key]\x3drole}return params$jscomp$0}function parse(code,scope,params,fields){code\x3dvegaFunctions.parseExpression(code,scope);code.$fields.forEach(function(name){return fields[name]\x3d\n1});vegaUtil.extend(params,code.$params);return code.$expr}function outerError(prefix,name){vegaUtil.error(prefix+\x27 for \x22outer\x22 push: \x27+vegaUtil.stringValue(name))}function parseSignal(signal,scope){var name\x3dsignal.name;if(\x22outer\x22\x3d\x3d\x3dsignal.push)scope.signals[name]||outerError(\x22No prior signal definition\x22,name),OUTER_INVALID.forEach(function(prop){void 0!\x3d\x3dsignal[prop]\x26\x26outerError(\x22Invalid property \x22,prop)});else{var op\x3dscope.addSignal(name,signal.value);!1\x3d\x3d\x3dsignal.react\x26\x26(op.react\x3d!1);signal.bind\x26\x26\nscope.addBinding(name,signal.bind)}}function Entry(type,value,params,parent){this.id\x3d-1;this.type\x3dtype;this.value\x3dvalue;this.params\x3dparams;parent\x26\x26(this.parent\x3dparent)}function ref$jscomp$0(op){var ref\x3d{$ref:op.id};0\x3eop.id\x26\x26(op.refs\x3dop.refs||[]).push(ref);return ref}function fieldRef(field,name){return name?{$field:field,$name:name}:{$field:field}}function keyRef(fields,flat){fields\x3d{$key:fields};flat\x26\x26(fields.$flat\x3d!0);return fields}function aggrField(op,field){return(op\x26\x26op.signal?\x22$\x22+op.signal:\nop||\x22\x22)+(op\x26\x26field?\x22_\x22:\x22\x22)+(field\x26\x26field.signal?\x22$\x22+field.signal:field||\x22\x22)}function isSignal(_){return _\x26\x26_.signal}function hasSignal(_){if(isSignal(_))return!0;if(vegaUtil.isObject(_))for(var key in _)if(hasSignal(_[key]))return!0;return!1}function value$jscomp$0(specValue,defaultValue){return null!\x3dspecValue?specValue:defaultValue}function deref(v){return v\x26\x26v.signal||v}function parseStream(stream,scope){return(stream.merge?mergeStream:stream.stream?nestedStream:stream.type?eventStream:vegaUtil.error(\x22Invalid stream specification: \x22+\nvegaUtil.stringValue(stream)))(stream,scope)}function eventSource(source){return\x22scope\x22\x3d\x3d\x3dsource?\x22view\x22:source||\x22view\x22}function mergeStream(stream,scope){var list\x3dstream.merge.map(function(s){return parseStream(s,scope)});stream\x3dstreamParameters({merge:list},stream,scope);return scope.addStream(stream).id}function nestedStream(stream,scope){var id\x3dparseStream(stream.stream,scope);stream\x3dstreamParameters({stream:id},stream,scope);return scope.addStream(stream).id}function eventStream(stream,scope){if(\x22timer\x22\x3d\x3d\x3d\nstream.type){var id\x3dscope.event(\x22timer\x22,stream.throttle);stream\x3d{between:stream.between,filter:stream.filter}}else id\x3dscope.event(eventSource(stream.source),stream.type);stream\x3dstreamParameters({stream:id},stream,scope);return 1\x3d\x3d\x3dObject.keys(stream).length?id:scope.addStream(stream).id}function streamParameters(entry,stream,scope){var param\x3dstream.between;param\x26\x26(2!\x3d\x3dparam.length\x26\x26vegaUtil.error(\x27Stream \x22between\x22 parameter must have 2 entries: \x27+vegaUtil.stringValue(stream)),entry.between\x3d[parseStream(param[0],\nscope),parseStream(param[1],scope)]);param\x3dstream.filter?[].concat(stream.filter):[];(stream.marktype||stream.markname||stream.markrole)\x26\x26param.push(filterMark(stream.marktype,stream.markname,stream.markrole));\x22scope\x22\x3d\x3d\x3dstream.source\x26\x26param.push(\x22inScope(event.item)\x22);param.length\x26\x26(entry.filter\x3dvegaFunctions.parseExpression(\x22(\x22+param.join(\x22)\\x26\\x26(\x22)+\x22)\x22,scope).$expr);null!\x3d(param\x3dstream.throttle)\x26\x26(entry.throttle\x3d+param);null!\x3d(param\x3dstream.debounce)\x26\x26(entry.debounce\x3d+param);stream.consume\x26\x26(entry.consume\x3d\n!0);return entry}function filterMark(type,name,role){return\x22event.item\x22+(type\x26\x26\x22*\x22!\x3d\x3dtype?\x22\\x26\\x26event.item.mark.marktype\\x3d\\x3d\\x3d\x27\x22+type+\x22\x27\x22:\x22\x22)+(role?\x22\\x26\\x26event.item.mark.role\\x3d\\x3d\\x3d\x27\x22+role+\x22\x27\x22:\x22\x22)+(name?\x22\\x26\\x26event.item.mark.name\\x3d\\x3d\\x3d\x27\x22+name+\x22\x27\x22:\x22\x22)}function parseUpdate(spec,scope,target){var events\x3dspec.events,update\x3dspec.update,encode\x3dspec.encode,sources\x3d[],entry\x3d{target:target};events||vegaUtil.error(\x22Signal update missing events specification.\x22);vegaUtil.isString(events)\x26\x26\n(events\x3dvegaEventSelector.selector(events,scope.isSubscope()?\x22scope\x22:\x22view\x22));events\x3dvegaUtil.array(events).filter(function(s){return s.signal||s.scale?(sources.push(s),0):1});1\x3csources.length\x26\x26(sources\x3d[mergeSources(sources)]);events.length\x26\x26sources.push(1\x3cevents.length?{merge:events}:events[0]);null!\x3dencode\x26\x26(update\x26\x26vegaUtil.error(\x22Signal encode and update are mutually exclusive.\x22),update\x3d\x22encode(item(),\x22+vegaUtil.stringValue(encode)+\x22)\x22);entry.update\x3dvegaUtil.isString(update)?vegaFunctions.parseExpression(update,\nscope):null!\x3dupdate.expr?vegaFunctions.parseExpression(update.expr,scope):null!\x3dupdate.value?update.value:null!\x3dupdate.signal?{$expr:OP_VALUE_EXPR,$params:{$value:scope.signalRef(update.signal)}}:vegaUtil.error(\x22Invalid signal update specification.\x22);spec.force\x26\x26(entry.options\x3d{force:!0});sources.forEach(function(source){scope.addUpdate(vegaUtil.extend(streamSource(source,scope),entry))})}function streamSource(stream,scope){return{source:stream.signal?scope.signalRef(stream.signal):stream.scale?scope.scaleRef(stream.scale):\nparseStream(stream,scope)}}function mergeSources(sources){return{signal:\x22[\x22+sources.map(function(s){return s.scale?\x27scale(\x22\x27+s.scale+\x27\x22)\x27:s.signal})+\x22]\x22}}function parseSignalUpdates(signal,scope){var op\x3dscope.getSignal(signal.name),expr\x3dsignal.update;signal.init\x26\x26(expr?vegaUtil.error(\x22Signals can not include both init and update expressions.\x22):(expr\x3dsignal.init,op.initonly\x3d!0));expr\x26\x26(expr\x3dvegaFunctions.parseExpression(expr,scope),op.update\x3dexpr.$expr,op.params\x3dexpr.$params);signal.on\x26\x26signal.on.forEach(function(_){parseUpdate(_,\nscope,op.id)})}function parseLiteral(v,scope){return vegaUtil.isObject(v)?v.signal?scope.signalRef(v.signal):vegaUtil.error(\x22Unsupported object: \x22+vegaUtil.stringValue(v)):v}function parseArray(v$jscomp$0,scope){return v$jscomp$0.signal?scope.signalRef(v$jscomp$0.signal):v$jscomp$0.map(function(v){return parseLiteral(v,scope)})}function dataLookupError(name){vegaUtil.error(\x22Can not find data set: \x22+vegaUtil.stringValue(name))}function parseScaleDomain(domain,spec,scope){if(domain)return domain.signal?\nscope.signalRef(domain.signal):(vegaUtil.isArray(domain)?explicitDomain:domain.fields?multipleDomain:singularDomain)(domain,spec,scope);null\x3d\x3dspec.domainMin\x26\x26null\x3d\x3dspec.domainMax||vegaUtil.error(\x22No scale domain defined for domainMin/domainMax to override.\x22)}function explicitDomain(domain,spec,scope){return domain.map(function(v){return parseLiteral(v,scope)})}function singularDomain(domain,spec,scope){var data\x3dscope.getData(domain.data);data||dataLookupError(domain.data);return vegaScale.isDiscrete(spec.type)?\ndata.valuesRef(scope,domain.field,parseSort(domain.sort,!1)):vegaScale.isQuantile(spec.type)?data.domainRef(scope,domain.field):data.extentRef(scope,domain.field)}function multipleDomain(domain,spec,scope){var data$jscomp$0\x3ddomain.data,fields\x3ddomain.fields.reduce(function(dom,d){if(vegaUtil.isString(d))d\x3d{data:data$jscomp$0,field:d};else if(vegaUtil.isArray(d)||d.signal){var data\x3dd;d\x3d\x22_:vega:_\x22+FIELD_REF_ID++;var coll\x3dCollect({});vegaUtil.isArray(data)?coll.value\x3d{$ingest:data}:data.signal\x26\x26(data\x3d\n\x22setdata(\x22+vegaUtil.stringValue(d)+\x22,\x22+data.signal+\x22)\x22,coll.params.input\x3dscope.signalRef(data));scope.addDataPipeline(d,[coll,Sieve({})]);d\x3d{data:d,field:\x22data\x22}}dom.push(d);return dom},[]);return(vegaScale.isDiscrete(spec.type)?ordinalMultipleDomain:vegaScale.isQuantile(spec.type)?quantileMultipleDomain:numericMultipleDomain)(domain,scope,fields)}function ordinalMultipleDomain(domain,scope,fields){var sort\x3dparseSort(domain.sort,!0);domain\x3dfields.map(function(f){var data\x3dscope.getData(f.data);data||\ndataLookupError(f.data);return data.countsRef(scope,f.field,sort)});domain\x3d{groupby:keyFieldRef,pulse:domain};if(sort){fields\x3dsort.op||\x22count\x22;var v\x3dsort.field?aggrField(fields,sort.field):\x22count\x22;domain.ops\x3d[MULTIDOMAIN_SORT_OPS[fields]];domain.fields\x3d[scope.fieldRef(v)];domain.as\x3d[v]}fields\x3dscope.add(Aggregate(domain));domain\x3dscope.add(Collect({pulse:ref$jscomp$0(fields)}));v\x3dscope.add(Values({field:keyFieldRef,sort:scope.sortRef(sort),pulse:ref$jscomp$0(domain)}));return ref$jscomp$0(v)}function parseSort(sort,\nmultidomain){sort\x26\x26(sort.field||sort.op?sort.field||\x22count\x22\x3d\x3d\x3dsort.op?multidomain\x26\x26sort.field\x26\x26sort.op\x26\x26!MULTIDOMAIN_SORT_OPS[sort.op]\x26\x26vegaUtil.error(\x22Multiple domain scales can not be sorted using \x22+sort.op):vegaUtil.error(\x22No field provided for sort aggregate op: \x22+sort.op):vegaUtil.isObject(sort)?sort.field\x3d\x22key\x22:sort\x3d{field:\x22key\x22});return sort}function quantileMultipleDomain(domain,scope,fields){domain\x3dfields.map(function(f){var data\x3dscope.getData(f.data);data||dataLookupError(f.data);return data.domainRef(scope,\nf.field)});return ref$jscomp$0(scope.add(MultiValues({values:domain})))}function numericMultipleDomain(domain,scope,fields){domain\x3dfields.map(function(f){var data\x3dscope.getData(f.data);data||dataLookupError(f.data);return data.extentRef(scope,f.field)});return ref$jscomp$0(scope.add(MultiExtent({extents:domain})))}function parseScaleRange(spec,scope,params){var range\x3dspec.range,config\x3dscope.config.range;if(range.signal)return scope.signalRef(range.signal);if(vegaUtil.isString(range)){if(config\x26\x26vegaUtil.hasOwnProperty(config,\nrange))return spec\x3dvegaUtil.extend({},spec,{range:config[range]}),parseScaleRange(spec,scope,params);\x22width\x22\x3d\x3d\x3drange?range\x3d[0,{signal:\x22width\x22}]:\x22height\x22\x3d\x3d\x3drange?range\x3dvegaScale.isDiscrete(spec.type)?[0,{signal:\x22height\x22}]:[{signal:\x22height\x22},0]:vegaUtil.error(\x22Unrecognized scale range value: \x22+vegaUtil.stringValue(range))}else{if(range.scheme){params.scheme\x3dvegaUtil.isArray(range.scheme)?parseArray(range.scheme,scope):parseLiteral(range.scheme,scope);range.extent\x26\x26(params.schemeExtent\x3dparseArray(range.extent,\nscope));range.count\x26\x26(params.schemeCount\x3dparseLiteral(range.count,scope));return}if(range.step){params.rangeStep\x3dparseLiteral(range.step,scope);return}if(vegaScale.isDiscrete(spec.type)\x26\x26!vegaUtil.isArray(range))return parseScaleDomain(range,spec,scope);vegaUtil.isArray(range)||vegaUtil.error(\x22Unsupported range type: \x22+vegaUtil.stringValue(range))}return range.map(function(v){return(vegaUtil.isArray(v)?parseArray:parseLiteral)(v,scope)})}function parseParameter(_$jscomp$0,name,scope){return vegaUtil.isArray(_$jscomp$0)?\n_$jscomp$0.map(function(_){return parseParameter(_,name,scope)}):vegaUtil.isObject(_$jscomp$0)?_$jscomp$0.signal?scope.signalRef(_$jscomp$0.signal):\x22fit\x22\x3d\x3d\x3dname?_$jscomp$0:vegaUtil.error(\x22Unsupported parameter object: \x22+vegaUtil.stringValue(_$jscomp$0)):_$jscomp$0}function guideGroup(mark){mark.type\x3d\x22group\x22;mark.interactive\x3dmark.interactive||!1;return mark}function lookup$jscomp$0(spec,config){var _\x3dfunction(name,dflt){return value$jscomp$0(spec[name],value$jscomp$0(config[name],dflt))};_.isVertical\x3d\nfunction(s){return\x22vertical\x22\x3d\x3d\x3dvalue$jscomp$0(spec.direction,config.direction||(s?config.symbolDirection:config.gradientDirection))};_.gradientLength\x3dfunction(){return value$jscomp$0(spec.gradientLength,config.gradientLength||config.gradientWidth)};_.gradientThickness\x3dfunction(){return value$jscomp$0(spec.gradientThickness,config.gradientThickness||config.gradientHeight)};_.entryColumns\x3dfunction(){return value$jscomp$0(spec.columns,value$jscomp$0(config.columns,+_.isVertical(!0)))};return _}function getEncoding(name,\nencode){return(name\x3dencode\x26\x26(encode.update\x26\x26encode.update[name]||encode.enter\x26\x26encode.enter[name]))\x26\x26name.signal?name:name?name.value:null}function anchorExpr(s,e,m){return\x22item.anchor \\x3d\\x3d\\x3d \x27start\x27 ? \x22+s+\x22 : item.anchor \\x3d\\x3d\\x3d \x27end\x27 ? \x22+e+\x22 : \x22+m}function extendOffset(value,offset){return offset?value?vegaUtil.isObject(value)?Object.assign({},value,{offset:extendOffset(value.offset,offset)}):{value:value,offset:offset}:offset:value}function guideMark(mark,extras){extras?(mark.name\x3dextras.name,\nmark.style\x3dextras.style||mark.style,mark.interactive\x3d!!extras.interactive,mark.encode\x3dextendEncode(mark.encode,extras,Skip)):mark.interactive\x3d!1;return mark}function legendGradient(spec,scale,config,userEncode){spec\x3dlookup$jscomp$0(spec,config);var vertical\x3dspec.isVertical();config\x3dspec.gradientThickness();var length\x3dspec.gradientLength(),enter;if(vertical){vertical\x3d[0,1];var stop\x3d[0,0];var width\x3dconfig;config\x3dlength}else vertical\x3d[0,0],stop\x3d[1,0],width\x3dlength;scale\x3d{enter:enter\x3d{opacity:zero$jscomp$0,\nx:zero$jscomp$0,y:zero$jscomp$0,width:encoder(width),height:encoder(config)},update:vegaUtil.extend({},enter,{opacity:one,fill:{gradient:scale,start:vertical,stop:stop}}),exit:{opacity:zero$jscomp$0}};addEncoders(scale,{stroke:spec(\x22gradientStrokeColor\x22),strokeWidth:spec(\x22gradientStrokeWidth\x22)},{opacity:spec(\x22gradientOpacity\x22)});return guideMark({type:\x22rect\x22,role:\x22legend-gradient\x22,encode:scale},userEncode)}function legendGradientDiscrete(spec,scale,config,userEncode,dataRef){spec\x3dlookup$jscomp$0(spec,\nconfig);var vertical\x3dspec.isVertical();config\x3dspec.gradientThickness();var length\x3dspec.gradientLength(),encode,v,uu,vv,adjust\x3d\x22\x22;vertical?(encode\x3d\x22y\x22,uu\x3d\x22y2\x22,v\x3d\x22x\x22,vv\x3d\x22width\x22,adjust\x3d\x221-\x22):(encode\x3d\x22x\x22,uu\x3d\x22x2\x22,v\x3d\x22y\x22,vv\x3d\x22height\x22);scale\x3d{opacity:zero$jscomp$0,fill:{scale:scale,field:\x22value\x22}};scale[encode]\x3d{signal:adjust+\x22datum.perc\x22,mult:length};scale[v]\x3dzero$jscomp$0;scale[uu]\x3d{signal:adjust+\x22datum.perc2\x22,mult:length};scale[vv]\x3dencoder(config);encode\x3d{enter:scale,update:vegaUtil.extend({},scale,{opacity:one}),\nexit:{opacity:zero$jscomp$0}};addEncoders(encode,{stroke:spec(\x22gradientStrokeColor\x22),strokeWidth:spec(\x22gradientStrokeWidth\x22)},{opacity:spec(\x22gradientOpacity\x22)});return guideMark({type:\x22rect\x22,role:\x22legend-band\x22,key:\x22value\x22,from:dataRef,encode:encode},userEncode)}function legendGradientLabels(spec,config,userEncode,dataRef){var _\x3dlookup$jscomp$0(spec,config),vertical\x3d_.isVertical(),thickness\x3dencoder(_.gradientThickness()),length\x3d_.gradientLength(),overlap\x3d_(\x22labelOverlap\x22),enter,update,adjust\x3d\x22\x22;var encode\x3d\n{enter:enter\x3d{opacity:zero$jscomp$0},update:update\x3d{opacity:one,text:{field:\x22label\x22}},exit:{opacity:zero$jscomp$0}};addEncoders(encode,{fill:_(\x22labelColor\x22),fillOpacity:_(\x22labelOpacity\x22),font:_(\x22labelFont\x22),fontSize:_(\x22labelFontSize\x22),fontStyle:_(\x22labelFontStyle\x22),fontWeight:_(\x22labelFontWeight\x22),limit:value$jscomp$0(spec.labelLimit,config.gradientLabelLimit)});if(vertical){enter.align\x3d{value:\x22left\x22};enter.baseline\x3dupdate.baseline\x3d{signal:\x27datum.perc\\x3c\\x3d0?\x22bottom\x22:datum.perc\\x3e\\x3d1?\x22top\x22:\x22middle\x22\x27};\nvertical\x3d\x22y\x22;var v\x3d\x22x\x22;adjust\x3d\x221-\x22}else enter.align\x3dupdate.align\x3d{signal:\x27datum.perc\\x3c\\x3d0?\x22left\x22:datum.perc\\x3e\\x3d1?\x22right\x22:\x22center\x22\x27},enter.baseline\x3d{value:\x22top\x22},vertical\x3d\x22x\x22,v\x3d\x22y\x22;enter[vertical]\x3dupdate[vertical]\x3d{signal:adjust+\x22datum.perc\x22,mult:length};enter[v]\x3dupdate[v]\x3dthickness;thickness.offset\x3dvalue$jscomp$0(spec.labelOffset,config.gradientLabelOffset)||0;overlap\x3doverlap?{separation:_(\x22labelSeparation\x22),method:overlap,order:\x22datum.index\x22}:void 0;return guideMark({type:\x22text\x22,role:\x22legend-label\x22,\nstyle:\x22guide-label\x22,key:\x22value\x22,from:dataRef,encode:encode,overlap:overlap},userEncode)}function legendSymbolGroups(spec,config,userEncode,dataRef,columns){var _\x3dlookup$jscomp$0(spec,config),entries\x3duserEncode.entries,interactive\x3d!(!entries||!entries.interactive),name\x3dentries?entries.name:void 0,height\x3d_(\x22clipHeight\x22),symbolOffset\x3d_(\x22symbolOffset\x22),valueRef\x3d{data:\x22value\x22},encode\x3d{},xSignal\x3d\x22(\x22+columns+\x22) ? datum.offset : datum.size\x22,yEncode\x3dheight?encoder(height):{field:\x22size\x22},ncols\x3d\x22max(1, \x22+columns+\n\x22)\x22,enter,update;yEncode.mult\x3d.5;encode\x3d{enter:enter\x3d{opacity:zero$jscomp$0,x:{signal:xSignal,mult:.5,offset:symbolOffset},y:yEncode},update:update\x3d{opacity:one,x:enter.x,y:enter.y},exit:{opacity:zero$jscomp$0}};var baseFill\x3dnull,baseStroke\x3dnull;spec.fill||(baseFill\x3dconfig.symbolBaseFillColor,baseStroke\x3dconfig.symbolBaseStrokeColor);addEncoders(encode,{fill:_(\x22symbolFillColor\x22,baseFill),shape:_(\x22symbolType\x22),size:_(\x22symbolSize\x22),stroke:_(\x22symbolStrokeColor\x22,baseStroke),strokeDash:_(\x22symbolDash\x22),\nstrokeDashOffset:_(\x22symbolDashOffset\x22),strokeWidth:_(\x22symbolStrokeWidth\x22)},{opacity:_(\x22symbolOpacity\x22)});LegendScales.forEach(function(scale){spec[scale]\x26\x26(update[scale]\x3denter[scale]\x3d{scale:spec[scale],field:\x22value\x22})});config\x3dguideMark({type:\x22symbol\x22,role:\x22legend-symbol\x22,key:\x22value\x22,from:valueRef,clip:height?!0:void 0,encode:encode},userEncode.symbols);encode\x3dencoder(symbolOffset);encode.offset\x3d_(\x22labelOffset\x22);encode\x3d{enter:enter\x3d{opacity:zero$jscomp$0,x:{signal:xSignal,offset:encode},y:yEncode},\nupdate:update\x3d{opacity:one,text:{field:\x22label\x22},x:enter.x,y:enter.y},exit:{opacity:zero$jscomp$0}};addEncoders(encode,{align:_(\x22labelAlign\x22),baseline:_(\x22labelBaseline\x22),fill:_(\x22labelColor\x22),fillOpacity:_(\x22labelOpacity\x22),font:_(\x22labelFont\x22),fontSize:_(\x22labelFontSize\x22),fontStyle:_(\x22labelFontStyle\x22),fontWeight:_(\x22labelFontWeight\x22),limit:_(\x22labelLimit\x22)});userEncode\x3dguideMark({type:\x22text\x22,role:\x22legend-label\x22,style:\x22guide-label\x22,key:\x22value\x22,from:valueRef,encode:encode},userEncode.labels);encode\x3d{enter:{noBound:{value:!height},\nwidth:zero$jscomp$0,height:height?encoder(height):zero$jscomp$0,opacity:zero$jscomp$0},exit:{opacity:zero$jscomp$0},update:update\x3d{opacity:one,row:{signal:null},column:{signal:null}}};_.isVertical(!0)?(_\x3d\x22ceil(item.mark.items.length / \x22+ncols+\x22)\x22,update.row.signal\x3d\x22datum.index%\x22+_,update.column.signal\x3d\x22floor(datum.index / \x22+_+\x22)\x22,_\x3d{field:[\x22row\x22,\x22datum.index\x22]}):(update.row.signal\x3d\x22floor(datum.index / \x22+ncols+\x22)\x22,update.column.signal\x3d\x22datum.index % \x22+ncols,_\x3d{field:\x22datum.index\x22});update.column.signal\x3d\n\x22(\x22+columns+\x22)?\x22+update.column.signal+\x22:datum.index\x22;dataRef\x3d{facet:{data:dataRef,name:\x22value\x22,groupby:\x22index\x22}};return guideGroup({role:\x22scope\x22,from:dataRef,encode:extendEncode(encode,entries,Skip),marks:[config,userEncode],name:name,interactive:interactive,sort:_})}function legendSymbolLayout(spec,config){spec\x3dlookup$jscomp$0(spec,config);return{align:spec(\x22gridAlign\x22),columns:spec.entryColumns(),center:{row:!0,column:!1},padding:{row:spec(\x22rowPadding\x22),column:spec(\x22columnPadding\x22)}}}function legendTitle(spec,\nconfig,userEncode,dataRef){config\x3dlookup$jscomp$0(spec,config);var encode\x3d{enter:{opacity:zero$jscomp$0},update:{opacity:one,x:{field:{group:\x22padding\x22}},y:{field:{group:\x22padding\x22}}},exit:{opacity:zero$jscomp$0}};addEncoders(encode,{orient:config(\x22titleOrient\x22),_anchor:config(\x22titleAnchor\x22),anchor:{signal:\x27item._anchor || ((item.orient \\x3d\\x3d\\x3d \x22left\x22 || item.orient \\x3d\\x3d\\x3d \x22right\x22) ? \x22middle\x22 : \x22start\x22)\x27},angle:{signal:\x27datum.vgrad \\x26\\x26 (item.orient \\x3d\\x3d\\x3d \x22left\x22 || item.orient \\x3d\\x3d\\x3d \x22right\x22) ? (item.orient \\x3d\\x3d\\x3d \x22left\x22 ? -90 : 90) : 0\x27},\nalign:{signal:exprAlign},baseline:{signal:exprBaseline},text:spec.title,fill:config(\x22titleColor\x22),fillOpacity:config(\x22titleOpacity\x22),font:config(\x22titleFont\x22),fontSize:config(\x22titleFontSize\x22),fontStyle:config(\x22titleFontStyle\x22),fontWeight:config(\x22titleFontWeight\x22),limit:config(\x22titleLimit\x22),lineHeight:config(\x22titleLineHeight\x22)},{align:config(\x22titleAlign\x22),baseline:config(\x22titleBaseline\x22)});return guideMark({type:\x22text\x22,role:\x22legend-title\x22,style:\x22guide-title\x22,from:dataRef,encode:encode},userEncode)}\nfunction clip$jscomp$0(clip,scope){var expr;vegaUtil.isObject(clip)\x26\x26(clip.signal?expr\x3dclip.signal:clip.path?expr\x3d\x22pathShape(\x22+param$jscomp$0(clip.path)+\x22)\x22:clip.sphere\x26\x26(expr\x3d\x22geoShape(\x22+param$jscomp$0(clip.sphere)+\x27, {type: \x22Sphere\x22})\x27));return expr?scope.signalRef(expr):!!clip}function param$jscomp$0(value){return vegaUtil.isObject(value)\x26\x26value.signal?value.signal:vegaUtil.stringValue(value)}function getRole(spec){var role\x3dspec.role||\x22\x22;return role.indexOf(\x22axis\x22)\x26\x26role.indexOf(\x22legend\x22)\x26\x26role.indexOf(\x22title\x22)?\n\x22group\x22\x3d\x3d\x3dspec.type?\x22scope\x22:role||\x22mark\x22:role}function definition(spec){return{marktype:spec.type,name:spec.name||void 0,role:spec.role||getRole(spec),zindex:+spec.zindex||void 0,aria:spec.aria,description:spec.description}}function interactive$jscomp$0(spec,scope){return spec\x26\x26spec.signal?scope.signalRef(spec.signal):!1\x3d\x3d\x3dspec?!1:!0}function parseTransform(spec,scope){var def\x3dvegaDataflow.definition(spec.type);def||vegaUtil.error(\x22Unrecognized transform type: \x22+vegaUtil.stringValue(spec.type));var t\x3d\ndef.type.toLowerCase();var params\x3dparseParameters(def,spec,scope);t\x3dnew Entry(t,null,params,void 0);spec.signal\x26\x26scope.addSignal(spec.signal,scope.proxy(t));t.metadata\x3ddef.metadata||{};return t}function parseParameters(def,spec,scope){var params\x3d{},n;var i\x3d0;for(n\x3ddef.params.length;i\x3cn;++i){var pdef\x3ddef.params[i];params[pdef.name]\x3dparseParameter$1(pdef,spec,scope)}return params}function parseParameter$1(def,spec,scope){var type\x3ddef.type,value\x3dspec[def.name];if(\x22index\x22\x3d\x3d\x3dtype)return parseIndexParameter(def,\nspec,scope);if(void 0\x3d\x3d\x3dvalue)def.required\x26\x26vegaUtil.error(\x22Missing required \x22+vegaUtil.stringValue(spec.type)+\x22 parameter: \x22+vegaUtil.stringValue(def.name));else return\x22param\x22\x3d\x3d\x3dtype?parseSubParameters(def,spec,scope):\x22projection\x22\x3d\x3d\x3dtype?scope.projectionRef(spec[def.name]):def.array\x26\x26!isSignal(value)?value.map(function(v){return parameterValue(def,v,scope)}):parameterValue(def,value,scope)}function parameterValue(def,value,scope){var type\x3ddef.type;return isSignal(value)?\x22expr\x22\x3d\x3d\x3dtype?vegaUtil.error(\x22Expression references can not be signals.\x22):\n\x22field\x22\x3d\x3d\x3dtype?scope.fieldRef(value):\x22compare\x22\x3d\x3d\x3dtype?scope.compareRef(value):scope.signalRef(value.signal):(def\x3ddef.expr||\x22field\x22\x3d\x3d\x3dtype)\x26\x26value\x26\x26value.expr?scope.exprRef(value.expr,value.as):def\x26\x26value\x26\x26value.field?fieldRef(value.field,value.as):\x22expr\x22\x3d\x3d\x3dtype?vegaFunctions.parseExpression(value,scope):\x22data\x22\x3d\x3d\x3dtype?ref$jscomp$0(scope.getData(value).values):\x22field\x22\x3d\x3d\x3dtype?fieldRef(value):\x22compare\x22\x3d\x3d\x3dtype?scope.compareRef(value):value}function parseIndexParameter(def,spec,scope){vegaUtil.isString(spec.from)||\nvegaUtil.error(\x27Lookup \x22from\x22 parameter must be a string literal.\x27);return scope.getData(spec.from).lookupRef(scope,spec.key)}function parseSubParameters(def,spec,scope){spec\x3dspec[def.name];return def.array?(vegaUtil.isArray(spec)||vegaUtil.error(\x22Expected an array of sub-parameters. Instead: \x22+vegaUtil.stringValue(spec)),spec.map(function(v){return parseSubParameter(def,v,scope)})):parseSubParameter(def,spec,scope)}function parseSubParameter(def,value,scope){var k,n;var i\x3d0;for(n\x3ddef.params.length;i\x3c\nn;++i){var pdef\x3ddef.params[i];for(k in pdef.key)if(pdef.key[k]!\x3d\x3dvalue[k]){pdef\x3dnull;break}if(pdef)break}pdef||vegaUtil.error(\x22Unsupported parameter: \x22+vegaUtil.stringValue(value));def\x3dvegaUtil.extend(parseParameters(pdef,value,scope),pdef.key);return ref$jscomp$0(scope.add(Params(def)))}function parseData(from,group,scope){var facet,parent;if(!from)var dataRef\x3dref$jscomp$0(scope.add(Collect(null,[{}])));else if(facet\x3dfrom.facet)if(group||vegaUtil.error(\x22Only group marks can be faceted.\x22),null!\x3dfacet.field)dataRef\x3d\nparent\x3dgetDataRef(facet,scope);else{from.data?parent\x3dref$jscomp$0(scope.getData(from.data).aggregate):(group\x3dparseTransform(vegaUtil.extend({type:\x22aggregate\x22,groupby:vegaUtil.array(facet.groupby)},facet.aggregate),scope),group.params.key\x3dscope.keyRef(facet.groupby),group.params.pulse\x3dgetDataRef(facet,scope),dataRef\x3dparent\x3dref$jscomp$0(scope.add(group)));var key\x3dscope.keyRef(facet.groupby,!0)}dataRef||(dataRef\x3dgetDataRef(from,scope));return{key:key,pulse:dataRef,parent:parent}}function getDataRef(from,\nscope){return from.$ref?from:from.data\x26\x26from.data.$ref?from.data:ref$jscomp$0(scope.getData(from.data).output)}function DataScope(scope,input,output,values,aggr){this.scope\x3dscope;this.input\x3dinput;this.output\x3doutput;this.values\x3dvalues;this.aggregate\x3daggr;this.index\x3d{}}function fieldKey(field){return vegaUtil.isString(field)?field:null}function addSortField(scope,p,sort){var as\x3daggrField(sort.op,sort.field),s;if(p.ops)for(var i\x3d0,n\x3dp.as.length;i\x3cn;++i){if(p.as[i]\x3d\x3d\x3das)return}else p.ops\x3d[\x22count\x22],p.fields\x3d\n[null],p.as\x3d[\x22count\x22];sort.op\x26\x26(p.ops.push((s\x3dsort.op.signal)?scope.signalRef(s):sort.op),p.fields.push(scope.fieldRef(sort.field)),p.as.push(as))}function cache$jscomp$0(scope,ds,name,optype,field,counts,index){name\x3dds[name]||(ds[name]\x3d{});var sort\x3dvegaUtil.isObject(counts)?(\x22descending\x22\x3d\x3d\x3dcounts.order?\x22-\x22:\x22+\x22)+aggrField(counts.op,counts.field):\x22\x22;var k\x3dfieldKey(field);if(null!\x3dk){scope\x3dds.scope;k+\x3dsort?\x22|\x22+sort:\x22\x22;var v\x3dname[k]}v||(v\x3dcounts?{field:keyFieldRef,pulse:ds.countsRef(scope,field,counts)}:\n{field:scope.fieldRef(field),pulse:ref$jscomp$0(ds.output)},sort\x26\x26(v.sort\x3dscope.sortRef(counts)),scope\x3dscope.add(new Entry(optype,void 0,v,void 0)),index\x26\x26(ds.index[field]\x3dscope),v\x3dref$jscomp$0(scope),null!\x3dk\x26\x26(name[k]\x3dv));return v}function parseFacet(spec,scope,group){var facet\x3dspec.from.facet,name\x3dfacet.name,data\x3dgetDataRef(facet,scope),op;facet.name||vegaUtil.error(\x22Facet must have a name: \x22+vegaUtil.stringValue(facet));facet.data||vegaUtil.error(\x22Facet must reference a data set: \x22+vegaUtil.stringValue(facet));\nfacet.field?op\x3dscope.add(PreFacet({field:scope.fieldRef(facet.field),pulse:data})):facet.groupby?op\x3dscope.add(Facet({key:scope.keyRef(facet.groupby),group:ref$jscomp$0(scope.proxy(group.parent)),pulse:data})):vegaUtil.error(\x22Facet must specify groupby or field: \x22+vegaUtil.stringValue(facet));scope\x3dscope.fork();group\x3dscope.add(Collect());facet\x3dscope.add(Sieve({pulse:ref$jscomp$0(group)}));scope.addData(name,new DataScope(scope,group,group,facet));scope.addSignal(\x22parent\x22,null);op.params.subflow\x3d{$subflow:scope.parse(spec).toRuntime()}}\nfunction parseSubflow(spec,scope,input){input\x3dscope.add(PreFacet({pulse:input.pulse}));scope\x3dscope.fork();scope.add(Sieve());scope.addSignal(\x22parent\x22,null);input.params.subflow\x3d{$subflow:scope.parse(spec).toRuntime()}}function parseTrigger(spec,scope,name){var remove\x3dspec.remove,insert\x3dspec.insert,toggle\x3dspec.toggle,modify\x3dspec.modify,values\x3dspec.values,op\x3dscope.add(new Entry(\x22operator\x22,void 0,void 0,void 0));spec\x3d\x22if(\x22+spec.trigger+\x27,modify(\x22\x27+name+\x27\x22,\x27+[insert,remove,toggle,modify,values].map(function(_){return null\x3d\x3d\n_?\x22null\x22:_}).join(\x22,\x22)+\x22),0)\x22;scope\x3dvegaFunctions.parseExpression(spec,scope);op.update\x3dscope.$expr;op.params\x3dscope.$params}function parseMark(spec,scope){var role\x3dgetRole(spec),group\x3d\x22group\x22\x3d\x3d\x3dspec.type,facet\x3dspec.from\x26\x26spec.from.facet,layout\x3dspec.layout||\x22scope\x22\x3d\x3d\x3drole||\x22frame\x22\x3d\x3d\x3drole,nested\x3d\x22mark\x22\x3d\x3d\x3drole||layout||facet,overlap\x3dspec.overlap,store,enc;var input\x3dparseData(spec.from,group,scope);var op\x3dscope.add(DataJoin({key:input.key||(spec.key?fieldRef(spec.key):void 0),pulse:input.pulse,clean:!group}));\nvar joinRef\x3dref$jscomp$0(op);op\x3dstore\x3dscope.add(Collect({pulse:joinRef}));op\x3dscope.add(Mark({markdef:definition(spec),interactive:interactive$jscomp$0(spec.interactive,scope),clip:clip$jscomp$0(spec.clip,scope),context:{$context:!0},groups:scope.lookup(),parent:scope.signals.parent?scope.signalRef(\x22parent\x22):null,index:scope.markpath(),pulse:ref$jscomp$0(op)}));var bound\x3dref$jscomp$0(op);op\x3denc\x3dscope.add(Encode(parseEncode(spec.encode,spec.type,role,spec.style,scope,{mod:!1,pulse:bound})));op.params.parent\x3d\nscope.encode();spec.transform\x26\x26spec.transform.forEach(function(_){_\x3dparseTransform(_,scope);var md\x3d_.metadata;(md.generates||md.changes)\x26\x26vegaUtil.error(\x22Mark transforms should not generate new data.\x22);md.nomod||(enc.params.mod\x3d!0);_.params.pulse\x3dref$jscomp$0(op);scope.add(op\x3d_)});spec.sort\x26\x26(op\x3dscope.add(SortItems({sort:scope.compareRef(spec.sort),pulse:ref$jscomp$0(op)})));role\x3dref$jscomp$0(op);if(facet||layout){layout\x3dscope.add(ViewLayout({layout:scope.objectProperty(spec.layout),legends:scope.legends,\nmark:bound,pulse:role}));var layoutRef\x3dref$jscomp$0(layout)}bound\x3dscope.add(Bound({mark:bound,pulse:layoutRef||role}));var boundRef\x3dref$jscomp$0(bound);if(group){if(nested){var ops\x3dscope.operators;ops.pop();layout\x26\x26ops.pop()}scope.pushState(role,layoutRef||boundRef,joinRef);facet?parseFacet(spec,scope,input):nested?parseSubflow(spec,scope,input):scope.parse(spec);scope.popState();nested\x26\x26(layout\x26\x26ops.push(layout),ops.push(bound))}overlap\x26\x26(boundRef\x3dparseOverlap(overlap,boundRef,scope));group\x3dscope.add(Render({pulse:boundRef}));\nfacet\x3dscope.add(Sieve({pulse:ref$jscomp$0(group)},void 0,scope.parent()));if(null!\x3dspec.name){var name\x3dspec.name;scope.addData(name,new DataScope(scope,store,group,facet));spec.on\x26\x26spec.on.forEach(function(on){(on.insert||on.remove||on.toggle)\x26\x26vegaUtil.error(\x22Marks only support modify triggers.\x22);parseTrigger(on,scope,name)})}}function parseOverlap(overlap,source,scope){var method\x3doverlap.method,bound\x3doverlap.bound,sep\x3doverlap.separation;source\x3d{separation:isSignal(sep)?scope.signalRef(sep.signal):\nsep,method:isSignal(method)?scope.signalRef(method.signal):method,pulse:source};overlap.order\x26\x26(source.sort\x3dscope.compareRef({field:overlap.order}));bound\x26\x26(overlap\x3dbound.tolerance,source.boundTolerance\x3disSignal(overlap)?scope.signalRef(overlap.signal):+overlap,source.boundScale\x3dscope.scaleRef(bound.scale),source.boundOrient\x3dbound.orient);return ref$jscomp$0(scope.add(Overlap(source)))}function parseLegend(spec,scope){var config\x3dscope.config.legend,encode\x3dspec.encode||{},legendEncode\x3dencode.legend||\n{},name\x3dlegendEncode.name||void 0,interactive\x3dlegendEncode.interactive,style\x3dlegendEncode.style,_\x3dlookup$jscomp$0(spec,config),scales\x3d{},scale\x3d0,params;LegendScales.forEach(function(s){return spec[s]?(scales[s]\x3dspec[s],scale\x3dscale||spec[s]):0});scale||vegaUtil.error(\x22Missing valid scale for legend.\x22);var children\x3dlegendType(spec,scope.scaleType(scale));var datum\x3d{title:null!\x3dspec.title,scales:scales,type:children,vgrad:\x22symbol\x22!\x3d\x3dchildren\x26\x26_.isVertical()};var dataRef\x3dref$jscomp$0(scope.add(Collect(null,\n[datum])));legendEncode\x3dextendEncode(buildLegendEncode(_,spec,config),legendEncode,Skip);var entryRef\x3dref$jscomp$0(scope.add(LegendEntries(params\x3d{type:children,scale:scope.scaleRef(scale),count:scope.objectProperty(_(\x22tickCount\x22)),limit:scope.property(_(\x22symbolLimit\x22)),values:scope.objectProperty(spec.values),minstep:scope.property(spec.tickMinStep),formatType:scope.property(spec.formatType),formatSpecifier:scope.property(spec.format)})));if(\x22gradient\x22\x3d\x3d\x3dchildren)children\x3d[legendGradient(spec,scale,\nconfig,encode.gradient),legendGradientLabels(spec,config,encode.labels,entryRef)],params.count\x3dparams.count||scope.signalRef(\x22max(2,2*floor((\x22+deref(_.gradientLength())+\x22)/100))\x22);else if(\x22discrete\x22\x3d\x3d\x3dchildren)children\x3d[legendGradientDiscrete(spec,scale,config,encode.gradient,entryRef),legendGradientLabels(spec,config,encode.labels,entryRef)];else{var entryLayout\x3dlegendSymbolLayout(spec,config);children\x3d[legendSymbolGroups(spec,config,encode,entryRef,deref(entryLayout.columns))];params.size\x3dsizeExpression(spec,\nscope,children[0].marks)}children\x3d[guideGroup({role:\x22legend-entry\x22,from:dataRef,encode:{enter:{x:{value:0},y:{value:0}}},marks:children,layout:entryLayout,interactive:interactive})];datum.title\x26\x26children.push(legendTitle(spec,config,encode.title,dataRef));return parseMark(guideGroup({role:\x22legend\x22,from:dataRef,encode:legendEncode,marks:children,aria:_(\x22aria\x22),description:_(\x22description\x22),zindex:_(\x22zindex\x22),name:name,interactive:interactive,style:style}),scope)}function legendType(spec,scaleType){var type\x3d\nspec.type||\x22symbol\x22;spec.type||1!\x3d\x3dscaleCount(spec)||!spec.fill\x26\x26!spec.stroke||(type\x3dvegaScale.isContinuous(scaleType)?\x22gradient\x22:vegaScale.isDiscretizing(scaleType)?\x22discrete\x22:\x22symbol\x22);return\x22gradient\x22!\x3d\x3dtype?type:vegaScale.isDiscretizing(scaleType)?\x22discrete\x22:\x22gradient\x22}function scaleCount(spec){return LegendScales.reduce(function(count,type){return count+(spec[type]?1:0)},0)}function buildLegendEncode(_,spec,config){var encode\x3d{enter:{},update:{}};addEncoders(encode,{orient:_(\x22orient\x22),offset:_(\x22offset\x22),\npadding:_(\x22padding\x22),titlePadding:_(\x22titlePadding\x22),cornerRadius:_(\x22cornerRadius\x22),fill:_(\x22fillColor\x22),stroke:_(\x22strokeColor\x22),strokeWidth:config.strokeWidth,strokeDash:config.strokeDash,x:_(\x22legendX\x22),y:_(\x22legendY\x22),format:spec.format,formatType:spec.formatType});return encode}function sizeExpression(spec,scope,marks){var size\x3dderef(getChannel(\x22size\x22,spec,marks));spec\x3dderef(getChannel(\x22strokeWidth\x22,spec,marks));(marks\x3dgetEncoding(\x22fontSize\x22,marks[1].encode))||(marks\x3d(marks\x3dscope.config.style[\x22guide-label\x22])\x26\x26\nmarks.fontSize);marks\x3dderef(marks);return vegaFunctions.parseExpression(\x22max(ceil(sqrt(\x22+size+\x22)+\x22+spec+\x22),\x22+marks+\x22)\x22,scope)}function getChannel(name,spec,marks){return spec[name]?\x27scale(\x22\x27+spec[name]+\x27\x22,datum)\x27:getEncoding(name,marks[0].encode)}function parseTitle(spec,scope){spec\x3dvegaUtil.isString(spec)?{text:spec}:spec;var _\x3dlookup$jscomp$0(spec,scope.config.title),encode\x3dspec.encode||{},userEncode\x3dencode.group||{},name\x3duserEncode.name||void 0,interactive\x3duserEncode.interactive,style\x3duserEncode.style,\nchildren\x3d[];var dataRef\x3dref$jscomp$0(scope.add(Collect(null,[{}])));children.push(buildTitle(spec,_,titleEncode(spec),dataRef));spec.subtitle\x26\x26children.push(buildSubTitle(spec,_,encode.subtitle,dataRef));spec\x3d{enter:{},update:{}};addEncoders(spec,{orient:_(\x22orient\x22),anchor:_(\x22anchor\x22),align:{signal:alignExpr},angle:{signal:\x27item.orient\\x3d\\x3d\\x3d\x22left\x22?-90:item.orient\\x3d\\x3d\\x3d\x22right\x22?90:0\x27},limit:_(\x22limit\x22),frame:_(\x22frame\x22),offset:_(\x22offset\x22)||0,padding:_(\x22subtitlePadding\x22)});userEncode\x3dextendEncode(spec,\nuserEncode,Skip);return parseMark(guideGroup({role:\x22title\x22,from:dataRef,encode:userEncode,marks:children,aria:_(\x22aria\x22),description:_(\x22description\x22),zindex:_(\x22zindex\x22),name:name,interactive:interactive,style:style}),scope)}function titleEncode(spec){var encode\x3dspec.encode;return encode\x26\x26encode.title||vegaUtil.extend({name:spec.name,interactive:spec.interactive,style:spec.style},encode)}function buildTitle(spec,_,userEncode,dataRef){var zero\x3d{value:0};zero\x3d{enter:{opacity:zero},update:{opacity:{value:1}},\nexit:{opacity:zero}};addEncoders(zero,{text:spec.text,align:{signal:\x22item.mark.group.align\x22},angle:{signal:\x22item.mark.group.angle\x22},limit:{signal:\x22item.mark.group.limit\x22},baseline:\x22top\x22,dx:_(\x22dx\x22),dy:_(\x22dy\x22),fill:_(\x22color\x22),font:_(\x22font\x22),fontSize:_(\x22fontSize\x22),fontStyle:_(\x22fontStyle\x22),fontWeight:_(\x22fontWeight\x22),lineHeight:_(\x22lineHeight\x22)},{align:_(\x22align\x22),angle:_(\x22angle\x22),baseline:_(\x22baseline\x22)});return guideMark({type:\x22text\x22,role:\x22title-text\x22,style:\x22group-title\x22,from:dataRef,encode:zero},userEncode)}\nfunction buildSubTitle(spec,_,userEncode,dataRef){var zero\x3d{value:0};zero\x3d{enter:{opacity:zero},update:{opacity:{value:1}},exit:{opacity:zero}};addEncoders(zero,{text:spec.subtitle,align:{signal:\x22item.mark.group.align\x22},angle:{signal:\x22item.mark.group.angle\x22},limit:{signal:\x22item.mark.group.limit\x22},baseline:\x22top\x22,dx:_(\x22dx\x22),dy:_(\x22dy\x22),fill:_(\x22subtitleColor\x22),font:_(\x22subtitleFont\x22),fontSize:_(\x22subtitleFontSize\x22),fontStyle:_(\x22subtitleFontStyle\x22),fontWeight:_(\x22subtitleFontWeight\x22),lineHeight:_(\x22subtitleLineHeight\x22)},\n{align:_(\x22align\x22),angle:_(\x22angle\x22),baseline:_(\x22baseline\x22)});return guideMark({type:\x22text\x22,role:\x22title-subtitle\x22,style:\x22group-subtitle\x22,from:dataRef,encode:zero},userEncode)}function parseData$1(data,scope){var transforms\x3d[];data.transform\x26\x26data.transform.forEach(function(tx){transforms.push(parseTransform(tx,scope))});data.on\x26\x26data.on.forEach(function(on){parseTrigger(on,scope,data.name)});scope.addDataPipeline(data.name,analyze(data,scope,transforms))}function analyze(data,scope,ops){var output\x3d\n[],source\x3dnull,modify\x3d!1,generate\x3d!1,upstream,n;data.values?hasSignal(data.values)||hasSignal(data.format)?(output.push(load(scope,data)),output.push(source\x3dcollect())):output.push(source\x3dcollect({$ingest:data.values,$format:data.format})):data.url?hasSignal(data.url)||hasSignal(data.format)?(output.push(load(scope,data)),output.push(source\x3dcollect())):output.push(source\x3dcollect({$request:data.url,$format:data.format})):data.source\x26\x26(source\x3dupstream\x3dvegaUtil.array(data.source).map(function(d){return ref$jscomp$0(scope.getData(d).output)}),\noutput.push(null));data\x3d0;for(n\x3dops.length;data\x3cn;++data){var t\x3dops[data];var m\x3dt.metadata;source||m.source||output.push(source\x3dcollect());output.push(t);m.generates\x26\x26(generate\x3d!0);m.modifies\x26\x26!generate\x26\x26(modify\x3d!0);m.source?source\x3dt:m.changes\x26\x26(source\x3dnull)}upstream\x26\x26(n\x3dupstream.length-1,output[0]\x3dRelay({derive:modify,pulse:n?upstream:upstream[0]}),(modify||n)\x26\x26output.splice(1,0,collect()));source||output.push(collect());output.push(Sieve({}));return output}function collect(values){values\x3dCollect({},\nvalues);values.metadata\x3d{source:!0};return values}function load(scope,data){return Load({url:data.url?scope.property(data.url):void 0,async:data.async?scope.property(data.async):void 0,values:data.values?scope.property(data.values):void 0,format:scope.objectProperty(data.format)})}function fallback(prop,config,axisConfig,style){if(config\x26\x26vegaUtil.hasOwnProperty(config,prop))return config[prop];if(vegaUtil.hasOwnProperty(axisConfig,prop))return axisConfig[prop];if(prop.startsWith(\x22title\x22)){switch(prop){case \x22titleColor\x22:var styleProp\x3d\n\x22fill\x22;break;case \x22titleFont\x22:case \x22titleFontSize\x22:case \x22titleFontWeight\x22:styleProp\x3dprop[5].toLowerCase()+prop.slice(6)}return style[\x22guide-title\x22][styleProp]}if(prop.startsWith(\x22label\x22)){switch(prop){case \x22labelColor\x22:styleProp\x3d\x22fill\x22;break;case \x22labelFont\x22:case \x22labelFontSize\x22:styleProp\x3dprop[5].toLowerCase()+prop.slice(6)}return style[\x22guide-label\x22][styleProp]}return null}function keys(objects){var map\x3d{};objects\x3d$jscomp.makeIterator(objects);for(var $jscomp$key$obj\x3dobjects.next();!$jscomp$key$obj.done;$jscomp$key$obj\x3d\nobjects.next())if($jscomp$key$obj\x3d$jscomp$key$obj.value)for(var key in $jscomp$key$obj)map[key]\x3d1;return Object.keys(map)}function axisDomain(spec,config,userEncode,dataRef){var _\x3dlookup$jscomp$0(spec,config);config\x3dspec.orient;var enter,update;var encode\x3d{enter:enter\x3d{opacity:zero$jscomp$0},update:update\x3d{opacity:one},exit:{opacity:zero$jscomp$0}};addEncoders(encode,{stroke:_(\x22domainColor\x22),strokeCap:_(\x22domainCap\x22),strokeDash:_(\x22domainDash\x22),strokeDashOffset:_(\x22domainDashOffset\x22),strokeWidth:_(\x22domainWidth\x22),\nstrokeOpacity:_(\x22domainOpacity\x22)});_\x3d{scale:spec.scale,range:0};spec\x3d{scale:spec.scale,range:1};enter.x\x3dupdate.x\x3difX(config,_,zero$jscomp$0);enter.x2\x3dupdate.x2\x3difX(config,spec);enter.y\x3dupdate.y\x3difY(config,_,zero$jscomp$0);enter.y2\x3dupdate.y2\x3difY(config,spec);return guideMark({type:\x22rule\x22,role:\x22axis-domain\x22,from:dataRef,encode:encode},userEncode)}function axisGrid(spec,config,userEncode,dataRef,band){var _\x3dlookup$jscomp$0(spec,config);config\x3dspec.orient;var vscale\x3dspec.gridScale,sign\x3dgetSign(config,\n1,-1);a:{var offset\x3dspec.offset;if(1!\x3d\x3dsign)if(vegaUtil.isObject(offset)){for(var entry$662\x3doffset\x3dvegaUtil.extend({},offset);null!\x3dentry$662.mult;)if(vegaUtil.isObject(entry$662.mult))entry$662\x3dentry$662.mult\x3dvegaUtil.extend({},entry$662.mult);else{entry$662.mult\x3disSignal(sign)?{signal:\x22(\x22+entry$662.mult+\x22) * (\x22+sign.signal+\x22)\x22}:entry$662.mult*sign;var offset$jscomp$0\x3doffset;break a}entry$662.mult\x3dsign}else offset\x3disSignal(sign)?{signal:\x22(\x22+sign.signal+\x22) * (\x22+(offset||0)+\x22)\x22}:sign*(offset||0);offset$jscomp$0\x3d\noffset}var exit,update;offset\x3d{enter:entry$662\x3d{opacity:zero$jscomp$0},update:update\x3d{opacity:one},exit:exit\x3d{opacity:zero$jscomp$0}};addEncoders(offset,{stroke:_(\x22gridColor\x22),strokeCap:_(\x22gridCap\x22),strokeDash:_(\x22gridDash\x22),strokeDashOffset:_(\x22gridDashOffset\x22),strokeOpacity:_(\x22gridOpacity\x22),strokeWidth:_(\x22gridWidth\x22)});spec\x3d{scale:spec.scale,field:\x22value\x22,band:band.band,extra:band.extra,offset:band.offset,round:_(\x22tickRound\x22)};_\x3difX(config,{signal:\x22height\x22},{signal:\x22width\x22});band\x3dvscale?{scale:vscale,\nrange:0,mult:sign,offset:offset$jscomp$0}:{value:0,offset:offset$jscomp$0};vscale\x3dvscale?{scale:vscale,range:1,mult:sign,offset:offset$jscomp$0}:vegaUtil.extend(_,{mult:sign,offset:offset$jscomp$0});entry$662.x\x3dupdate.x\x3difX(config,spec,band);entry$662.y\x3dupdate.y\x3difY(config,spec,band);entry$662.x2\x3dupdate.x2\x3difY(config,vscale);entry$662.y2\x3dupdate.y2\x3difX(config,vscale);exit.x\x3difX(config,spec);exit.y\x3difY(config,spec);return guideMark({type:\x22rule\x22,role:\x22axis-grid\x22,key:\x22value\x22,from:dataRef,encode:offset},\nuserEncode)}function axisTicks(spec,config,userEncode,dataRef,size,band){var _\x3dlookup$jscomp$0(spec,config);config\x3dspec.orient;var sign\x3dgetSign(config,-1,1),enter,exit,update;var encode\x3d{enter:enter\x3d{opacity:zero$jscomp$0},update:update\x3d{opacity:one},exit:exit\x3d{opacity:zero$jscomp$0}};addEncoders(encode,{stroke:_(\x22tickColor\x22),strokeCap:_(\x22tickCap\x22),strokeDash:_(\x22tickDash\x22),strokeDashOffset:_(\x22tickDashOffset\x22),strokeOpacity:_(\x22tickOpacity\x22),strokeWidth:_(\x22tickWidth\x22)});size\x3dencoder(size);size.mult\x3d\nsign;spec\x3d{scale:spec.scale,field:\x22value\x22,band:band.band,extra:band.extra,offset:band.offset,round:_(\x22tickRound\x22)};update.y\x3denter.y\x3difX(config,zero$jscomp$0,spec);update.y2\x3denter.y2\x3difX(config,size);exit.x\x3difX(config,spec);update.x\x3denter.x\x3difY(config,zero$jscomp$0,spec);update.x2\x3denter.x2\x3difY(config,size);exit.y\x3difY(config,spec);return guideMark({type:\x22rule\x22,role:\x22axis-tick\x22,key:\x22value\x22,from:dataRef,encode:encode},userEncode)}function flushExpr(scale,threshold,a,b,c){return{signal:\x27flush(range(\x22\x27+\nscale+\x27\x22), scale(\x22\x27+scale+\x27\x22, datum.value), \x27+threshold+\x22,\x22+a+\x22,\x22+b+\x22,\x22+c+\x22)\x22}}function axisLabels(spec,config,userEncode,dataRef,size,band){config\x3dlookup$jscomp$0(spec,config);var orient\x3dspec.orient;spec\x3dspec.scale;var sign\x3dgetSign(orient,-1,1),flush\x3dderef(config(\x22labelFlush\x22)),flushOffset\x3dderef(config(\x22labelFlushOffset\x22)),flushOn\x3d0\x3d\x3d\x3dflush||!!flush,labelAlign\x3dconfig(\x22labelAlign\x22),labelBaseline\x3dconfig(\x22labelBaseline\x22);var encode\x3dencoder(size);encode.mult\x3dsign;encode.offset\x3dencoder(config(\x22labelPadding\x22)||\n0);encode.offset.mult\x3dsign;sign\x3d{scale:spec,field:\x22value\x22,band:.5,offset:extendOffset(band.offset,config(\x22labelOffset\x22))};band\x3dflushOn?flushExpr(spec,flush,\x27\x22left\x22\x27,\x27\x22right\x22\x27,\x27\x22center\x22\x27):{value:\x22center\x22};size\x3disSignal(orient)?ifExpr(orient.signal+\x22 \\x3d\\x3d\\x3d \x27right\x27\x22,\x22left\x22,\x22right\x22):\x22right\x22\x3d\x3d\x3dorient?{value:\x22left\x22}:{value:\x22right\x22};band\x3difX(orient,band,size);size\x3difX(orient,ifTop(orient,\x22bottom\x22,\x22top\x22),flushOn?flushExpr(spec,flush,\x27\x22top\x22\x27,\x27\x22bottom\x22\x27,\x27\x22middle\x22\x27):{value:\x22middle\x22});flush\x3dflushExpr(spec,\nflush,\x22-(\x22+flushOffset+\x22)\x22,flushOffset,0);flushOn\x3dflushOn\x26\x26flushOffset;encode\x3d{opacity:zero$jscomp$0,x:ifX(orient,sign,encode),y:ifY(orient,sign,encode)};encode\x3d{enter:encode,update:flushOffset\x3d{opacity:one,text:{field:\x22label\x22},x:encode.x,y:encode.y,align:band,baseline:size},exit:{opacity:zero$jscomp$0,x:encode.x,y:encode.y}};addEncoders(encode,{dx:!labelAlign\x26\x26flushOn?ifX(orient,flush):null,dy:!labelBaseline\x26\x26flushOn?ifY(orient,flush):null});addEncoders(encode,{angle:config(\x22labelAngle\x22),fill:config(\x22labelColor\x22),\nfillOpacity:config(\x22labelOpacity\x22),font:config(\x22labelFont\x22),fontSize:config(\x22labelFontSize\x22),fontWeight:config(\x22labelFontWeight\x22),fontStyle:config(\x22labelFontStyle\x22),limit:config(\x22labelLimit\x22),lineHeight:config(\x22labelLineHeight\x22)},{align:labelAlign,baseline:labelBaseline});flushOn\x3dconfig(\x22labelBound\x22);labelAlign\x3d(labelAlign\x3dconfig(\x22labelOverlap\x22))||flushOn?{separation:config(\x22labelSeparation\x22),method:labelAlign,order:\x22datum.index\x22,bound:flushOn?{scale:spec,orient:orient,tolerance:flushOn}:null}:void 0;\nflushOffset.align!\x3d\x3dband\x26\x26(flushOffset.align\x3dpatch(flushOffset.align,band));flushOffset.baseline!\x3d\x3dsize\x26\x26(flushOffset.baseline\x3dpatch(flushOffset.baseline,size));return guideMark({type:\x22text\x22,role:\x22axis-label\x22,style:\x22guide-label\x22,key:\x22value\x22,from:dataRef,encode:encode,overlap:labelAlign},userEncode)}function axisTitle(spec,config,userEncode,dataRef){config\x3dlookup$jscomp$0(spec,config);var orient\x3dspec.orient,sign\x3dgetSign(orient,-1,1),enter,update;var encode\x3d{enter:enter\x3d{opacity:zero$jscomp$0,anchor:encoder(config(\x22titleAnchor\x22,\nnull)),align:{signal:alignExpr}},update:update\x3dvegaUtil.extend({},enter,{opacity:one,text:encoder(spec.title)}),exit:{opacity:zero$jscomp$0}};spec\x3d{signal:\x27lerp(range(\x22\x27+spec.scale+\x27\x22), \x27+anchorExpr(0,1,.5)+\x22)\x22};update.x\x3difX(orient,spec);update.y\x3difY(orient,spec);spec\x3disSignal(sign)?{signal:\x22(\x22+sign.signal+\x22) * 90\x22}:{value:90*sign};enter.angle\x3difX(orient,zero$jscomp$0,spec);enter.baseline\x3difX(orient,ifTop(orient,\x22bottom\x22,\x22top\x22),{value:\x22bottom\x22});update.angle\x3denter.angle;update.baseline\x3denter.baseline;\naddEncoders(encode,{fill:config(\x22titleColor\x22),fillOpacity:config(\x22titleOpacity\x22),font:config(\x22titleFont\x22),fontSize:config(\x22titleFontSize\x22),fontStyle:config(\x22titleFontStyle\x22),fontWeight:config(\x22titleFontWeight\x22),limit:config(\x22titleLimit\x22),lineHeight:config(\x22titleLineHeight\x22)},{align:config(\x22titleAlign\x22),angle:config(\x22titleAngle\x22),baseline:config(\x22titleBaseline\x22)});autoLayout(config,orient,encode,userEncode);encode.update.align\x3dpatch(encode.update.align,enter.align);encode.update.angle\x3dpatch(encode.update.angle,\nenter.angle);encode.update.baseline\x3dpatch(encode.update.baseline,enter.baseline);return guideMark({type:\x22text\x22,role:\x22axis-title\x22,style:\x22guide-title\x22,from:dataRef,encode:encode},userEncode)}function autoLayout(_,orient,encode,userEncode){var auto\x3dfunction(value,dim){return null!\x3dvalue?(encode.update[dim]\x3dpatch(encoder(value),encode.update[dim]),!1):has(dim,userEncode)?!1:!0},autoY\x3dauto(_(\x22titleX\x22),\x22x\x22);_\x3dauto(_(\x22titleY\x22),\x22y\x22);encode.enter.auto\x3d_\x3d\x3d\x3dautoY?encoder(_):ifX(orient,encoder(_),encoder(autoY))}\nfunction parseScope(spec,scope,preprocessed){var signals\x3dvegaUtil.array(spec.signals),scales\x3dvegaUtil.array(spec.scales);preprocessed||signals.forEach(function(_){return parseSignal(_,scope)});vegaUtil.array(spec.projections).forEach(function(_){var config\x3dscope.config.projection||{},params\x3d{},name;for(name in _)\x22name\x22!\x3d\x3dname\x26\x26(params[name]\x3dparseParameter(_[name],name,scope));for(name in config)null\x3d\x3dparams[name]\x26\x26(params[name]\x3dparseParameter(config[name],name,scope));scope.addProjection(_.name,params)});\nscales.forEach(function(_){var type\x3d_.type||\x22linear\x22;vegaScale.isValidScaleType(type)||vegaUtil.error(\x22Unrecognized scale type: \x22+vegaUtil.stringValue(type));scope.addScale(_.name,{type:type,domain:void 0})});vegaUtil.array(spec.data).forEach(function(_){return parseData$1(_,scope)});scales.forEach(function(_){var params\x3dscope.getScale(_.name).params,key;params.domain\x3dparseScaleDomain(_.domain,_,scope);null!\x3d_.range\x26\x26(params.range\x3dparseScaleRange(_,scope,params));if(null!\x3d_.interpolate){var interpolate\x3d\n_.interpolate;params.interpolate\x3dparseLiteral(interpolate.type||interpolate);null!\x3dinterpolate.gamma\x26\x26(params.interpolateGamma\x3dparseLiteral(interpolate.gamma))}null!\x3d_.nice\x26\x26(interpolate\x3d_.nice,interpolate\x3dvegaUtil.isObject(interpolate)?{interval:parseLiteral(interpolate.interval),step:parseLiteral(interpolate.step)}:parseLiteral(interpolate),params.nice\x3dinterpolate);null!\x3d_.bins\x26\x26(interpolate\x3d_.bins,interpolate\x3dinterpolate.signal||vegaUtil.isArray(interpolate)?parseArray(interpolate,scope):scope.objectProperty(interpolate),\nparams.bins\x3dinterpolate);for(key in _)vegaUtil.hasOwnProperty(params,key)||\x22name\x22\x3d\x3d\x3dkey||(params[key]\x3dparseLiteral(_[key],scope))});(preprocessed||signals).forEach(function(_){return parseSignalUpdates(_,scope)});vegaUtil.array(spec.axes).forEach(function(_){var config\x3dscope.config;var style\x3dconfig.style,axis\x3dconfig.axis,band\x3d\x22band\x22\x3d\x3d\x3dscope.scaleType(_.scale)\x26\x26config.axisBand,orient\x3d_.orient,key;if(isSignal(orient)){var or\x3dkeys([config.axisX,config.axisY]);var orientKeys\x3dkeys([config.axisTop,config.axisBottom,\nconfig.axisLeft,config.axisRight]);var xy\x3d{};or\x3d$jscomp.makeIterator(or);for(key\x3dor.next();!key.done;key\x3dor.next())key\x3dkey.value,xy[key]\x3difX(orient,fallback(key,config.axisX,axis,style),fallback(key,config.axisY,axis,style));or\x3d{};orientKeys\x3d$jscomp.makeIterator(orientKeys);for(key\x3dorientKeys.next();!key.done;key\x3dorientKeys.next()){key\x3dkey.value;var JSCompiler_temp_const\x3dor,JSCompiler_temp_const$jscomp$0\x3dkey,$orient\x3dorient.signal,t\x3dfallback(key,config.axisTop,axis,style),b\x3dfallback(key,config.axisBottom,\naxis,style),l\x3dfallback(key,config.axisLeft,axis,style);key\x3dfallback(key,config.axisRight,axis,style);key\x3d{signal:(null!\x3dl?$orient+\x22 \\x3d\\x3d\\x3d \x27left\x27 ? (\x22+toExpr(l)+\x22) : \x22:\x22\x22)+(null!\x3db?$orient+\x22 \\x3d\\x3d\\x3d \x27bottom\x27 ? (\x22+toExpr(b)+\x22) : \x22:\x22\x22)+(null!\x3dkey?$orient+\x22 \\x3d\\x3d\\x3d \x27right\x27 ? (\x22+toExpr(key)+\x22) : \x22:\x22\x22)+(null!\x3dt?$orient+\x22 \\x3d\\x3d\\x3d \x27top\x27 ? (\x22+toExpr(t)+\x22) : \x22:\x22\x22)+\x22(null)\x22};JSCompiler_temp_const[JSCompiler_temp_const$jscomp$0]\x3dkey}}else xy\x3d\x22top\x22\x3d\x3d\x3dorient||\x22bottom\x22\x3d\x3d\x3dorient?config.axisX:\nconfig.axisY,or\x3dconfig[\x22axis\x22+orient[0].toUpperCase()+orient.slice(1)];config\x3dxy||or||band?vegaUtil.extend({},axis,xy,or,band):axis;style\x3d_.encode||{};axis\x3dstyle.axis||{};band\x3daxis.name||void 0;orient\x3daxis.interactive;xy\x3daxis.style;or\x3dlookup$jscomp$0(_,config);orientKeys\x3dor(\x22tickBand\x22);key\x3dor(\x22tickOffset\x22);orientKeys?orientKeys.signal?(JSCompiler_temp_const\x3d{signal:\x22(\x22+orientKeys.signal+\x22) \\x3d\\x3d\\x3d \x27extent\x27 ? 1 : 0.5\x22},JSCompiler_temp_const$jscomp$0\x3d{signal:\x22(\x22+orientKeys.signal+\x22) \\x3d\\x3d\\x3d \x27extent\x27\x22},\nvegaUtil.isObject(key)||(key\x3d{signal:\x22(\x22+orientKeys.signal+\x22) \\x3d\\x3d\\x3d \x27extent\x27 ? 0 : \x22+key})):\x22extent\x22\x3d\x3d\x3dorientKeys?(JSCompiler_temp_const\x3d1,JSCompiler_temp_const$jscomp$0\x3d!0,key\x3d0):(JSCompiler_temp_const\x3d.5,JSCompiler_temp_const$jscomp$0\x3d!1):(JSCompiler_temp_const\x3dor(\x22bandPosition\x22),JSCompiler_temp_const$jscomp$0\x3dor(\x22tickExtra\x22));orientKeys\x3d{extra:JSCompiler_temp_const$jscomp$0,band:JSCompiler_temp_const,offset:key};key\x3d{scale:_.scale,ticks:!!or(\x22ticks\x22),labels:!!or(\x22labels\x22),grid:!!or(\x22grid\x22),\ndomain:!!or(\x22domain\x22),title:null!\x3d_.title};JSCompiler_temp_const\x3dref$jscomp$0(scope.add(Collect({},[key])));JSCompiler_temp_const$jscomp$0\x3d{enter:{},update:{}};addEncoders(JSCompiler_temp_const$jscomp$0,{orient:or(\x22orient\x22),offset:or(\x22offset\x22)||0,position:value$jscomp$0(_.position,0),titlePadding:or(\x22titlePadding\x22),minExtent:or(\x22minExtent\x22),maxExtent:or(\x22maxExtent\x22),range:{signal:\x27abs(span(range(\x22\x27+_.scale+\x27\x22)))\x27},translate:or(\x22translate\x22),format:_.format,formatType:_.formatType});axis\x3dextendEncode(JSCompiler_temp_const$jscomp$0,\naxis,Skip);JSCompiler_temp_const$jscomp$0\x3dref$jscomp$0(scope.add(AxisTicks({scale:scope.scaleRef(_.scale),extra:scope.property(orientKeys.extra),count:scope.objectProperty(_.tickCount),values:scope.objectProperty(_.values),minstep:scope.property(_.tickMinStep),formatType:scope.property(_.formatType),formatSpecifier:scope.property(_.format)})));$orient\x3d[];key.grid\x26\x26$orient.push(axisGrid(_,config,style.grid,JSCompiler_temp_const$jscomp$0,orientKeys));if(key.ticks){var size\x3dor(\x22tickSize\x22);$orient.push(axisTicks(_,\nconfig,style.ticks,JSCompiler_temp_const$jscomp$0,size,orientKeys))}key.labels\x26\x26(size\x3dkey.ticks?size:0,$orient.push(axisLabels(_,config,style.labels,JSCompiler_temp_const$jscomp$0,size,orientKeys)));key.domain\x26\x26$orient.push(axisDomain(_,config,style.domain,JSCompiler_temp_const));key.title\x26\x26$orient.push(axisTitle(_,config,style.title,JSCompiler_temp_const));return parseMark(guideGroup({role:\x22axis\x22,from:JSCompiler_temp_const,encode:axis,marks:$orient,aria:or(\x22aria\x22),description:or(\x22description\x22),zindex:or(\x22zindex\x22),\nname:band,interactive:orient,style:xy}),scope)});vegaUtil.array(spec.marks).forEach(function(_){return parseMark(_,scope)});vegaUtil.array(spec.legends).forEach(function(_){return parseLegend(_,scope)});spec.title\x26\x26parseTitle(spec.title,scope);scope.parseLambdas();return scope}function parseView(spec,scope){var config\x3dscope.config,root\x3dref$jscomp$0(scope.root\x3dscope.add(new Entry(\x22operator\x22,void 0,void 0,void 0))),signals\x3dcollectSignals(spec,config);signals.forEach(function(_){return parseSignal(_,\nscope)});scope.description\x3dspec.description||config.description;scope.eventConfig\x3dconfig.events;scope.legends\x3dscope.objectProperty(config.legend\x26\x26config.legend.layout);scope.locale\x3dconfig.locale;config\x3dscope.add(Collect());var encode\x3dscope.add(Encode(parseEncode(extendEncode({enter:{x:{value:0},y:{value:0}},update:{width:{signal:\x22width\x22},height:{signal:\x22height\x22}}},spec.encode),\x22group\x22,\x22frame\x22,spec.style,scope,{pulse:ref$jscomp$0(config)}))),parent\x3dscope.add(ViewLayout({layout:scope.objectProperty(spec.layout),\nlegends:scope.legends,autosize:scope.signalRef(\x22autosize\x22),mark:root,pulse:ref$jscomp$0(encode)}));scope.operators.pop();scope.pushState(ref$jscomp$0(encode),ref$jscomp$0(parent),null);parseScope(spec,scope,signals);scope.operators.push(parent);spec\x3dscope.add(Bound({mark:root,pulse:ref$jscomp$0(parent)}));spec\x3dscope.add(Render({pulse:ref$jscomp$0(spec)}));spec\x3dscope.add(Sieve({pulse:ref$jscomp$0(spec)}));scope.addData(\x22root\x22,new DataScope(scope,config,config,spec));return scope}function signalObject(name,\nvalue){return value\x26\x26value.signal?{name:name,update:value.signal}:{name:name,value:value}}function collectSignals(spec,config){var _\x3dfunction(name){return value$jscomp$0(spec[name],config[name])},signals\x3d[signalObject(\x22background\x22,_(\x22background\x22)),signalObject(\x22autosize\x22,parseAutosize(_(\x22autosize\x22))),signalObject(\x22padding\x22,parsePadding(_(\x22padding\x22))),signalObject(\x22width\x22,_(\x22width\x22)||0),signalObject(\x22height\x22,_(\x22height\x22)||0)],pre\x3dsignals.reduce(function(p,s){return p[s.name]\x3ds,p},{}),map\x3d{};vegaUtil.array(spec.signals).forEach(function(s){vegaUtil.hasOwnProperty(pre,\ns.name)?s\x3dvegaUtil.extend(pre[s.name],s):signals.push(s);map[s.name]\x3ds});vegaUtil.array(config.signals).forEach(function(s){vegaUtil.hasOwnProperty(map,s.name)||vegaUtil.hasOwnProperty(pre,s.name)||signals.push(s)});return signals}function Scope$1(config,options){this.config\x3dconfig||{};this.options\x3doptions||{};this.bindings\x3d[];this.field\x3d{};this.signals\x3d{};this.lambdas\x3d{};this.scales\x3d{};this.events\x3d{};this.data\x3d{};this.streams\x3d[];this.updates\x3d[];this.operators\x3d[];this.locale\x3dthis.eventConfig\x3dnull;\nthis._subid\x3dthis._id\x3d0;this._nextsub\x3d[0];this._parent\x3d[];this._encode\x3d[];this._lookup\x3d[];this._markpath\x3d[]}function Subscope(scope){this.config\x3dscope.config;this.options\x3dscope.options;this.legends\x3dscope.legends;this.field\x3dObject.create(scope.field);this.signals\x3dObject.create(scope.signals);this.lambdas\x3dObject.create(scope.lambdas);this.scales\x3dObject.create(scope.scales);this.events\x3dObject.create(scope.events);this.data\x3dObject.create(scope.data);this.streams\x3d[];this.updates\x3d[];this.operators\x3d[];this._id\x3d\n0;this._subid\x3d++scope._nextsub[0];this._nextsub\x3dscope._nextsub;this._parent\x3dscope._parent.slice();this._encode\x3dscope._encode.slice();this._lookup\x3dscope._lookup.slice();this._markpath\x3dscope._markpath}function propertyLambda(spec){return(vegaUtil.isArray(spec)?arrayLambda:objectLambda)(spec)}function arrayLambda(array){for(var code\x3d\x22[\x22,i\x3d0,n\x3darray.length,value;i\x3cn;++i)value\x3darray[i],code+\x3d(0\x3ci?\x22,\x22:\x22\x22)+(vegaUtil.isObject(value)?value.signal||propertyLambda(value):vegaUtil.stringValue(value));return code+\n\x22]\x22}function objectLambda(obj){var code\x3d\x22{\x22,i\x3d0,key;for(key in obj){var value\x3dobj[key];code+\x3d(1\x3c++i?\x22,\x22:\x22\x22)+vegaUtil.stringValue(key)+\x22:\x22+(vegaUtil.isObject(value)?value.signal||propertyLambda(value):vegaUtil.stringValue(value))}return code+\x22}\x22}function defaults$jscomp$0(){return{description:\x22Vega visualization\x22,padding:0,autosize:\x22pad\x22,background:null,events:{defaults:{allow:[\x22wheel\x22]}},group:null,mark:null,arc:{fill:\x22#4c78a8\x22},area:{fill:\x22#4c78a8\x22},image:null,line:{stroke:\x22#4c78a8\x22,strokeWidth:2},\npath:{stroke:\x22#4c78a8\x22},rect:{fill:\x22#4c78a8\x22},rule:{stroke:\x22#000\x22},shape:{stroke:\x22#4c78a8\x22},symbol:{fill:\x22#4c78a8\x22,size:64},text:{fill:\x22#000\x22,font:\x22sans-serif\x22,fontSize:11},trail:{fill:\x22#4c78a8\x22,size:2},style:{\x22guide-label\x22:{fill:\x22#000\x22,font:\x22sans-serif\x22,fontSize:10},\x22guide-title\x22:{fill:\x22#000\x22,font:\x22sans-serif\x22,fontSize:11,fontWeight:\x22bold\x22},\x22group-title\x22:{fill:\x22#000\x22,font:\x22sans-serif\x22,fontSize:13,fontWeight:\x22bold\x22},\x22group-subtitle\x22:{fill:\x22#000\x22,font:\x22sans-serif\x22,fontSize:12},point:{size:30,strokeWidth:2,\nshape:\x22circle\x22},circle:{size:30,strokeWidth:2},square:{size:30,strokeWidth:2,shape:\x22square\x22},cell:{fill:\x22transparent\x22,stroke:\x22#ddd\x22}},title:{orient:\x22top\x22,anchor:\x22middle\x22,offset:4,subtitlePadding:3},axis:{minExtent:0,maxExtent:200,bandPosition:.5,domain:!0,domainWidth:1,domainColor:\x22#888\x22,grid:!1,gridWidth:1,gridColor:\x22#ddd\x22,labels:!0,labelAngle:0,labelLimit:180,labelOffset:0,labelPadding:2,ticks:!0,tickColor:\x22#888\x22,tickOffset:0,tickRound:!0,tickSize:5,tickWidth:1,titlePadding:4},axisBand:{tickOffset:-.5},\nprojection:{type:\x22mercator\x22},legend:{orient:\x22right\x22,padding:0,gridAlign:\x22each\x22,columnPadding:10,rowPadding:2,symbolDirection:\x22vertical\x22,gradientDirection:\x22vertical\x22,gradientLength:200,gradientThickness:16,gradientStrokeColor:\x22#ddd\x22,gradientStrokeWidth:0,gradientLabelOffset:2,labelAlign:\x22left\x22,labelBaseline:\x22middle\x22,labelLimit:160,labelOffset:4,labelOverlap:!0,symbolLimit:30,symbolType:\x22circle\x22,symbolSize:100,symbolOffset:0,symbolStrokeWidth:1.5,symbolBaseFillColor:\x22transparent\x22,symbolBaseStrokeColor:\x22#888\x22,\ntitleLimit:180,titleOrient:\x22top\x22,titlePadding:5,layout:{offset:18,direction:\x22horizontal\x22,left:{direction:\x22vertical\x22},right:{direction:\x22vertical\x22}}},range:{category:{scheme:\x22tableau10\x22},ordinal:{scheme:\x22blues\x22},heatmap:{scheme:\x22yellowgreenblue\x22},ramp:{scheme:\x22blues\x22},diverging:{scheme:\x22blueorange\x22,extent:[1,0]},symbol:\x22circle square triangle-up cross diamond triangle-right triangle-down triangle-left\x22.split(\x22 \x22)}}}var encoder\x3dfunction(_){return vegaUtil.isObject(_)\x26\x26!vegaUtil.isArray(_)?vegaUtil.extend({},\n_):{value:_}},scaleRef\x3dfunction(scale){return vegaUtil.isString(scale)?vegaUtil.stringValue(scale):scale.signal?\x22(\x22+scale.signal+\x22)\x22:field$jscomp$0(scale)},_color\x3dfunction(type,x,y,z){return\x22(\x22+type+\x22(\x22+[x,y,z].map(entry$jscomp$0).join(\x22,\x22)+\x22)+\x27\x27)\x22},OUTER_INVALID\x3d[\x22value\x22,\x22update\x22,\x22init\x22,\x22react\x22,\x22bind\x22],keyFieldRef\x3dfieldRef(\x22key\x22),OP_VALUE_EXPR\x3d{code:\x22_.$value\x22,ast:{type:\x22Identifier\x22,value:\x22value\x22}},transform$jscomp$0\x3dfunction(name){return function(params,value,parent){return new Entry(name,value,\nparams||void 0,parent)}},Aggregate\x3dtransform$jscomp$0(\x22aggregate\x22),AxisTicks\x3dtransform$jscomp$0(\x22axisticks\x22),Bound\x3dtransform$jscomp$0(\x22bound\x22),Collect\x3dtransform$jscomp$0(\x22collect\x22),Compare\x3dtransform$jscomp$0(\x22compare\x22),DataJoin\x3dtransform$jscomp$0(\x22datajoin\x22),Encode\x3dtransform$jscomp$0(\x22encode\x22),Expression\x3dtransform$jscomp$0(\x22expression\x22),Facet\x3dtransform$jscomp$0(\x22facet\x22),Field\x3dtransform$jscomp$0(\x22field\x22),Key\x3dtransform$jscomp$0(\x22key\x22),LegendEntries\x3dtransform$jscomp$0(\x22legendentries\x22),Load\x3dtransform$jscomp$0(\x22load\x22),\nMark\x3dtransform$jscomp$0(\x22mark\x22),MultiExtent\x3dtransform$jscomp$0(\x22multiextent\x22),MultiValues\x3dtransform$jscomp$0(\x22multivalues\x22),Overlap\x3dtransform$jscomp$0(\x22overlap\x22),Params\x3dtransform$jscomp$0(\x22params\x22),PreFacet\x3dtransform$jscomp$0(\x22prefacet\x22),Projection\x3dtransform$jscomp$0(\x22projection\x22),Proxy\x3dtransform$jscomp$0(\x22proxy\x22),Relay\x3dtransform$jscomp$0(\x22relay\x22),Render\x3dtransform$jscomp$0(\x22render\x22),Scale\x3dtransform$jscomp$0(\x22scale\x22),Sieve\x3dtransform$jscomp$0(\x22sieve\x22),SortItems\x3dtransform$jscomp$0(\x22sortitems\x22),ViewLayout\x3d\ntransform$jscomp$0(\x22viewlayout\x22),Values\x3dtransform$jscomp$0(\x22values\x22),FIELD_REF_ID\x3d0,MULTIDOMAIN_SORT_OPS\x3d{min:\x22min\x22,max:\x22max\x22,count:\x22sum\x22},LegendScales\x3d\x22size shape fill stroke strokeWidth strokeDash opacity\x22.split(\x22 \x22),Skip\x3d{name:1,style:1,interactive:1},zero$jscomp$0\x3d{value:0},one\x3d{value:1},alignExpr\x3danchorExpr(vegaUtil.stringValue(\x22left\x22),vegaUtil.stringValue(\x22right\x22),vegaUtil.stringValue(\x22center\x22)),baseline\x3danchorExpr(\x27\x22top\x22\x27,\x27\x22bottom\x22\x27,\x27\x22middle\x22\x27),exprAlign\x3d\x27datum.vgrad \\x26\\x26 item.orient \\x3d\\x3d\\x3d \x22right\x22 ? (\x27+\nanchorExpr(\x27\x22right\x22\x27,\x27\x22left\x22\x27,\x27\x22center\x22\x27)+\x27) : ((item.orient \\x3d\\x3d\\x3d \x22left\x22 || item.orient \\x3d\\x3d\\x3d \x22right\x22) \\x26\\x26 !(datum.vgrad \\x26\\x26 item.orient \\x3d\\x3d\\x3d \x22left\x22)) ? \x22left\x22 : \x27+alignExpr,exprBaseline\x3d\x27(item.orient \\x3d\\x3d\\x3d \x22left\x22 || item.orient \\x3d\\x3d\\x3d \x22right\x22) ? (datum.vgrad ? (item.orient \\x3d\\x3d\\x3d \x22right\x22 ? \x22bottom\x22 : \x22top\x22) : \x27+baseline+\x27) : \x22top\x22\x27;DataScope.fromEntries\x3dfunction(scope,entries){var n\x3dentries.length,i\x3d1,input\x3dentries[0],values\x3dentries[n-1],output\x3d\nentries[n-2],aggr\x3dnull;input\x26\x26\x22load\x22\x3d\x3d\x3dinput.type\x26\x26(input\x3dentries[1]);for(scope.add(entries[0]);i\x3cn;++i)entries[i].params.pulse\x3dref$jscomp$0(entries[i-1]),scope.add(entries[i]),\x22aggregate\x22\x3d\x3d\x3dentries[i].type\x26\x26(aggr\x3dentries[i]);return new DataScope(scope,input,output,values,aggr)};var prototype\x3dDataScope.prototype;prototype.countsRef\x3dfunction(scope,field,sort){var cache\x3dthis.counts||(this.counts\x3d{}),k\x3dfieldKey(field);if(null!\x3dk){scope\x3dthis.scope;var v\x3dcache[k]}v?sort\x26\x26sort.field\x26\x26addSortField(scope,\nv.agg.params,sort):(v\x3d{groupby:scope.fieldRef(field,\x22key\x22),pulse:ref$jscomp$0(this.output)},sort\x26\x26sort.field\x26\x26addSortField(scope,v,sort),sort\x3dscope.add(Aggregate(v)),v\x3dscope.add(Collect({pulse:ref$jscomp$0(sort)})),v\x3d{agg:sort,ref:ref$jscomp$0(v)},null!\x3dk\x26\x26(cache[k]\x3dv));return v.ref};prototype.tuplesRef\x3dfunction(){return ref$jscomp$0(this.values)};prototype.extentRef\x3dfunction(scope,field){return cache$jscomp$0(scope,this,\x22extent\x22,\x22extent\x22,field,!1)};prototype.domainRef\x3dfunction(scope,field){return cache$jscomp$0(scope,\nthis,\x22domain\x22,\x22values\x22,field,!1)};prototype.valuesRef\x3dfunction(scope,field,sort){return cache$jscomp$0(scope,this,\x22vals\x22,\x22values\x22,field,sort||!0)};prototype.lookupRef\x3dfunction(scope,field){return cache$jscomp$0(scope,this,\x22lookup\x22,\x22tupleindex\x22,field,!1)};prototype.indataRef\x3dfunction(scope,field){return cache$jscomp$0(scope,this,\x22indata\x22,\x22tupleindex\x22,field,!0,!0)};var getSign\x3dfunction(orient,a,b){isSignal(orient)?(orient\x3dorient.signal,a\x3difExpr(orient+\x22 \\x3d\\x3d\\x3d \x27left\x27 || \x22+orient+\x22 \\x3d\\x3d\\x3d \x27top\x27\x22,\na,b)):a\x3d\x22left\x22\x3d\x3d\x3dorient||\x22top\x22\x3d\x3d\x3dorient?a:b;return a},ifX\x3dfunction(orient,a,b){isSignal(orient)?(orient\x3dorient.signal,a\x3difEnc(orient+\x22 \\x3d\\x3d\\x3d \x27top\x27 || \x22+orient+\x22 \\x3d\\x3d\\x3d \x27bottom\x27\x22,a,b)):a\x3d\x22bottom\x22\x3d\x3d\x3dorient||\x22top\x22\x3d\x3d\x3dorient?a:b;return a},ifY\x3dfunction(orient,a,b){isSignal(orient)?(orient\x3dorient.signal,a\x3difEnc(orient+\x22 !\\x3d\\x3d \x27top\x27 \\x26\\x26 \x22+orient+\x22 !\\x3d\\x3d \x27bottom\x27\x22,a,b)):a\x3d\x22bottom\x22\x3d\x3d\x3dorient||\x22top\x22\x3d\x3d\x3dorient?b:a;return a},ifTop\x3dfunction(orient,a,b){return isSignal(orient)?ifExpr(orient.signal+\n\x22 \\x3d\\x3d\\x3d \x27top\x27\x22,a,b):\x22top\x22\x3d\x3d\x3dorient?{value:a}:{value:b}},ifEnc\x3dfunction(test,a,b){a\x3dnull!\x3da?encoder(a):a;b\x3dnull!\x3db?encoder(b):b;if(null!\x3da\x26\x261!\x3d\x3dObject.keys(a).length||null!\x3db\x26\x261!\x3d\x3dObject.keys(b).length)return[vegaUtil.extend({test:test},a)].concat(b||[]);a\x3da?a.signal||vegaUtil.stringValue(a.value):null;b\x3db?b.signal||vegaUtil.stringValue(b.value):null;return{signal:test+\x22 ? (\x22+a+\x22) : (\x22+b+\x22)\x22}},ifExpr\x3dfunction(test,a,b){return{signal:test+\x22 ? (\x22+toExpr(a)+\x22) : (\x22+toExpr(b)+\x22)\x22}},toExpr\x3dfunction(v){return isSignal(v)?\nv.signal:null\x3d\x3dv?null:vegaUtil.stringValue(v)},patch\x3dfunction(value,base){var s\x3dvalue.signal;return s\x26\x26s.endsWith(\x22(null)\x22)?{signal:s.slice(0,-6)+base.signal}:value},prototype$1\x3dScope$1.prototype\x3dSubscope.prototype;prototype$1.parse\x3dfunction(spec){return parseScope(spec,this)};prototype$1.fork\x3dfunction(){return new Subscope(this)};prototype$1.isSubscope\x3dfunction(){return 0\x3cthis._subid};prototype$1.toRuntime\x3dfunction(){this.finish();return{description:this.description,operators:this.operators,streams:this.streams,\nupdates:this.updates,bindings:this.bindings,eventConfig:this.eventConfig,locale:this.locale}};prototype$1.id\x3dfunction(){return(this._subid?this._subid+\x22:\x22:0)+this._id++};prototype$1.add\x3dfunction(op){this.operators.push(op);op.id\x3dthis.id();op.refs\x26\x26(op.refs.forEach(function(ref){ref.$ref\x3dop.id}),op.refs\x3dnull);return op};prototype$1.proxy\x3dfunction(op){op\x3dop instanceof Entry?ref$jscomp$0(op):op;return this.add(Proxy({value:op}))};prototype$1.addStream\x3dfunction(stream){this.streams.push(stream);stream.id\x3d\nthis.id();return stream};prototype$1.addUpdate\x3dfunction(update){this.updates.push(update);return update};prototype$1.finish\x3dfunction(){function annotate(op,name,type){op\x26\x26(op\x3dop.data||(op.data\x3d{}),name\x3dop[name]||(op[name]\x3d[]),name.push(type))}var name$jscomp$0;this.root\x26\x26(this.root.root\x3d!0);for(name$jscomp$0 in this.signals)this.signals[name$jscomp$0].signal\x3dname$jscomp$0;for(name$jscomp$0 in this.scales)this.scales[name$jscomp$0].scale\x3dname$jscomp$0;for(name$jscomp$0 in this.data){var ds\x3dthis.data[name$jscomp$0];\nannotate(ds.input,name$jscomp$0,\x22input\x22);annotate(ds.output,name$jscomp$0,\x22output\x22);annotate(ds.values,name$jscomp$0,\x22values\x22);for(var field in ds.index)annotate(ds.index[field],name$jscomp$0,\x22index:\x22+field)}return this};prototype$1.pushState\x3dfunction(encode,parent,lookup){this._encode.push(ref$jscomp$0(this.add(Sieve({pulse:encode}))));this._parent.push(parent);this._lookup.push(lookup?ref$jscomp$0(this.proxy(lookup)):null);this._markpath.push(-1)};prototype$1.popState\x3dfunction(){this._encode.pop();\nthis._parent.pop();this._lookup.pop();this._markpath.pop()};prototype$1.parent\x3dfunction(){return vegaUtil.peek(this._parent)};prototype$1.encode\x3dfunction(){return vegaUtil.peek(this._encode)};prototype$1.lookup\x3dfunction(){return vegaUtil.peek(this._lookup)};prototype$1.markpath\x3dfunction(){var p\x3dthis._markpath;return++p[p.length-1]};prototype$1.fieldRef\x3dfunction(field,name){if(vegaUtil.isString(field))return fieldRef(field,name);field.signal||vegaUtil.error(\x22Unsupported field reference: \x22+vegaUtil.stringValue(field));\nfield\x3dfield.signal;var f\x3dthis.field[field];f||(f\x3d{name:this.signalRef(field)},name\x26\x26(f.as\x3dname),this.field[field]\x3df\x3dref$jscomp$0(this.add(Field(f))));return f};prototype$1.compareRef\x3dfunction(cmp){function check(_){return isSignal(_)?(signal\x3d!0,scope.signalRef(_.signal)):_\x26\x26_.expr?(signal\x3d!0,scope.exprRef(_.expr)):_}var scope\x3dthis,signal\x3d!1,fields\x3dvegaUtil.array(cmp.field).map(check);cmp\x3dvegaUtil.array(cmp.order).map(check);return signal?ref$jscomp$0(this.add(Compare({fields:fields,orders:cmp}))):\n{$compare:fields,$order:cmp}};prototype$1.keyRef\x3dfunction(fields,flat){var sig\x3dthis.signals,signal\x3d!1;fields\x3dvegaUtil.array(fields).map(function(_){return isSignal(_)?(signal\x3d!0,ref$jscomp$0(sig[_.signal])):_});return signal?ref$jscomp$0(this.add(Key({fields:fields,flat:flat}))):keyRef(fields,flat)};prototype$1.sortRef\x3dfunction(sort){if(!sort)return sort;var a\x3daggrField(sort.op,sort.field);sort\x3dsort.order||\x22ascending\x22;return sort.signal?ref$jscomp$0(this.add(Compare({fields:a,orders:this.signalRef(sort.signal)}))):\n{$compare:a,$order:sort}};prototype$1.event\x3dfunction(source,type){var key\x3dsource+\x22:\x22+type;if(!this.events[key]){var id\x3dthis.id();this.streams.push({id:id,source:source,type:type});this.events[key]\x3did}return this.events[key]};prototype$1.hasOwnSignal\x3dfunction(name){return vegaUtil.hasOwnProperty(this.signals,name)};prototype$1.addSignal\x3dfunction(name,value){this.hasOwnSignal(name)\x26\x26vegaUtil.error(\x22Duplicate signal name: \x22+vegaUtil.stringValue(name));value\x3dvalue instanceof Entry?value:this.add(new Entry(\x22operator\x22,\nvalue,void 0,void 0));return this.signals[name]\x3dvalue};prototype$1.getSignal\x3dfunction(name){this.signals[name]||vegaUtil.error(\x22Unrecognized signal name: \x22+vegaUtil.stringValue(name));return this.signals[name]};prototype$1.signalRef\x3dfunction(s){if(this.signals[s])return ref$jscomp$0(this.signals[s]);vegaUtil.hasOwnProperty(this.lambdas,s)||(this.lambdas[s]\x3dthis.add(new Entry(\x22operator\x22,null,void 0,void 0)));return ref$jscomp$0(this.lambdas[s])};prototype$1.parseLambdas\x3dfunction(){for(var code\x3dObject.keys(this.lambdas),\ni\x3d0,n\x3dcode.length;i\x3cn;++i){var s\x3dcode[i],e\x3dvegaFunctions.parseExpression(s,this);s\x3dthis.lambdas[s];s.params\x3de.$params;s.update\x3de.$expr}};prototype$1.property\x3dfunction(spec){return spec\x26\x26spec.signal?this.signalRef(spec.signal):spec};prototype$1.objectProperty\x3dfunction(spec){return spec\x26\x26vegaUtil.isObject(spec)?this.signalRef(spec.signal||propertyLambda(spec)):spec};prototype$1.exprRef\x3dfunction(code,name){code\x3d{expr:vegaFunctions.parseExpression(code,this)};name\x26\x26(code.expr.$name\x3dname);return ref$jscomp$0(this.add(Expression(code)))};\nprototype$1.addBinding\x3dfunction(name,bind){this.bindings||vegaUtil.error(\x22Nested signals do not support binding: \x22+vegaUtil.stringValue(name));this.bindings.push(vegaUtil.extend({signal:name},bind))};prototype$1.addScaleProj\x3dfunction(name,transform){vegaUtil.hasOwnProperty(this.scales,name)\x26\x26vegaUtil.error(\x22Duplicate scale or projection name: \x22+vegaUtil.stringValue(name));this.scales[name]\x3dthis.add(transform)};prototype$1.addScale\x3dfunction(name,params){this.addScaleProj(name,Scale(params))};prototype$1.addProjection\x3d\nfunction(name,params){this.addScaleProj(name,Projection(params))};prototype$1.getScale\x3dfunction(name){this.scales[name]||vegaUtil.error(\x22Unrecognized scale name: \x22+vegaUtil.stringValue(name));return this.scales[name]};prototype$1.projectionRef\x3dprototype$1.scaleRef\x3dfunction(name){return ref$jscomp$0(this.getScale(name))};prototype$1.projectionType\x3dprototype$1.scaleType\x3dfunction(name){return this.getScale(name).params.type};prototype$1.addData\x3dfunction(name,dataScope){vegaUtil.hasOwnProperty(this.data,\nname)\x26\x26vegaUtil.error(\x22Duplicate data set name: \x22+vegaUtil.stringValue(name));return this.data[name]\x3ddataScope};prototype$1.getData\x3dfunction(name){this.data[name]||vegaUtil.error(\x22Undefined data set name: \x22+vegaUtil.stringValue(name));return this.data[name]};prototype$1.addDataPipeline\x3dfunction(name,entries){vegaUtil.hasOwnProperty(this.data,name)\x26\x26vegaUtil.error(\x22Duplicate data set name: \x22+vegaUtil.stringValue(name));return this.addData(name,DataScope.fromEntries(this,entries))};exports.AxisDomainRole\x3d\n\x22axis-domain\x22;exports.AxisGridRole\x3d\x22axis-grid\x22;exports.AxisLabelRole\x3d\x22axis-label\x22;exports.AxisRole\x3d\x22axis\x22;exports.AxisTickRole\x3d\x22axis-tick\x22;exports.AxisTitleRole\x3d\x22axis-title\x22;exports.DataScope\x3dDataScope;exports.FrameRole\x3d\x22frame\x22;exports.LegendEntryRole\x3d\x22legend-entry\x22;exports.LegendLabelRole\x3d\x22legend-label\x22;exports.LegendRole\x3d\x22legend\x22;exports.LegendSymbolRole\x3d\x22legend-symbol\x22;exports.LegendTitleRole\x3d\x22legend-title\x22;exports.MarkRole\x3d\x22mark\x22;exports.Scope\x3dScope$1;exports.ScopeRole\x3d\x22scope\x22;exports.config\x3d\ndefaults$jscomp$0;exports.parse\x3dfunction(spec,config,options){vegaUtil.isObject(spec)||vegaUtil.error(\x22Input Vega specification must be an object.\x22);config\x3dvegaUtil.mergeConfig(defaults$jscomp$0(),config,spec.config);return parseView(spec,new Scope$1(config,options)).toRuntime()};exports.signal\x3dparseSignal;exports.signalUpdates\x3dparseSignalUpdates;exports.stream\x3dparseStream;Object.defineProperty(exports,\x22__esModule\x22,{value:!0})})}");
SHADOW_ENV.evalLoad("module$node_modules$vega$build$vega_node.js", true , "shadow$provide.module$node_modules$vega$build$vega_node\x3dfunction(global,require,module,exports){Object.defineProperty(exports,\x22__esModule\x22,{value:!0});var vegaUtil\x3drequire(\x22module$node_modules$vega_util$build$vega_util\x22),vegaDataflow\x3drequire(\x22module$node_modules$vega_dataflow$build$vega_dataflow\x22);global\x3drequire(\x22module$node_modules$vega_transforms$build$vega_transforms\x22);module\x3drequire(\x22module$node_modules$vega_view_transforms$build$vega_view_transforms\x22);var encode\x3drequire(\x22module$node_modules$vega_encode$build$vega_encode\x22),\ngeo\x3drequire(\x22module$node_modules$vega_geo$build$vega_geo\x22),force\x3drequire(\x22module$node_modules$vega_force$build$vega_force\x22),tree\x3drequire(\x22module$node_modules$vega_hierarchy$build$vega_hierarchy\x22),reg\x3drequire(\x22module$node_modules$vega_regression$build$vega_regression\x22),voronoi\x3drequire(\x22module$node_modules$vega_voronoi$build$vega_voronoi\x22),wordcloud\x3drequire(\x22module$node_modules$vega_wordcloud$build$vega_wordcloud\x22),xf\x3drequire(\x22module$node_modules$vega_crossfilter$build$vega_crossfilter\x22),vegaStatistics\x3d\nrequire(\x22module$node_modules$vega_statistics$build$vega_statistics\x22),vegaTime\x3drequire(\x22module$node_modules$vega_time$build$vega_time\x22),vegaLoader\x3drequire(\x22module$node_modules$vega_loader$build$vega_loader\x22),vegaScenegraph\x3drequire(\x22module$node_modules$vega_scenegraph$build$vega_scenegraph\x22),vegaScale\x3drequire(\x22module$node_modules$vega_scale$build$vega_scale\x22),vegaProjection\x3drequire(\x22module$node_modules$vega_projection$build$vega_projection\x22),vegaView\x3drequire(\x22module$node_modules$vega_view$build$vega_view\x22),\nvegaFormat\x3drequire(\x22module$node_modules$vega_format$build$vega_format\x22),vegaFunctions\x3drequire(\x22module$node_modules$vega_functions$build$vega_functions\x22),vegaParser\x3drequire(\x22module$node_modules$vega_parser$build$vega_parser\x22),vegaRuntime\x3drequire(\x22module$node_modules$vega_runtime$build$vega_runtime\x22);vegaUtil.extend(vegaDataflow.transforms,global,module,encode,geo,force,tree,reg,voronoi,wordcloud,xf);Object.keys(vegaUtil).forEach(function(k){\x22default\x22!\x3d\x3dk\x26\x26Object.defineProperty(exports,k,{enumerable:!0,\nget:function(){return vegaUtil[k]}})});Object.keys(vegaStatistics).forEach(function(k){\x22default\x22!\x3d\x3dk\x26\x26Object.defineProperty(exports,k,{enumerable:!0,get:function(){return vegaStatistics[k]}})});Object.keys(vegaTime).forEach(function(k){\x22default\x22!\x3d\x3dk\x26\x26Object.defineProperty(exports,k,{enumerable:!0,get:function(){return vegaTime[k]}})});Object.keys(vegaLoader).forEach(function(k){\x22default\x22!\x3d\x3dk\x26\x26Object.defineProperty(exports,k,{enumerable:!0,get:function(){return vegaLoader[k]}})});Object.keys(vegaScenegraph).forEach(function(k){\x22default\x22!\x3d\x3d\nk\x26\x26Object.defineProperty(exports,k,{enumerable:!0,get:function(){return vegaScenegraph[k]}})});Object.defineProperty(exports,\x22Dataflow\x22,{enumerable:!0,get:function(){return vegaDataflow.Dataflow}});Object.defineProperty(exports,\x22EventStream\x22,{enumerable:!0,get:function(){return vegaDataflow.EventStream}});Object.defineProperty(exports,\x22MultiPulse\x22,{enumerable:!0,get:function(){return vegaDataflow.MultiPulse}});Object.defineProperty(exports,\x22Operator\x22,{enumerable:!0,get:function(){return vegaDataflow.Operator}});\nObject.defineProperty(exports,\x22Parameters\x22,{enumerable:!0,get:function(){return vegaDataflow.Parameters}});Object.defineProperty(exports,\x22Pulse\x22,{enumerable:!0,get:function(){return vegaDataflow.Pulse}});Object.defineProperty(exports,\x22Transform\x22,{enumerable:!0,get:function(){return vegaDataflow.Transform}});Object.defineProperty(exports,\x22changeset\x22,{enumerable:!0,get:function(){return vegaDataflow.changeset}});Object.defineProperty(exports,\x22definition\x22,{enumerable:!0,get:function(){return vegaDataflow.definition}});\nObject.defineProperty(exports,\x22ingest\x22,{enumerable:!0,get:function(){return vegaDataflow.ingest}});Object.defineProperty(exports,\x22isTuple\x22,{enumerable:!0,get:function(){return vegaDataflow.isTuple}});Object.defineProperty(exports,\x22transform\x22,{enumerable:!0,get:function(){return vegaDataflow.transform}});Object.defineProperty(exports,\x22transforms\x22,{enumerable:!0,get:function(){return vegaDataflow.transforms}});Object.defineProperty(exports,\x22tupleid\x22,{enumerable:!0,get:function(){return vegaDataflow.tupleid}});\nObject.defineProperty(exports,\x22interpolate\x22,{enumerable:!0,get:function(){return vegaScale.interpolate}});Object.defineProperty(exports,\x22interpolateColors\x22,{enumerable:!0,get:function(){return vegaScale.interpolateColors}});Object.defineProperty(exports,\x22interpolateRange\x22,{enumerable:!0,get:function(){return vegaScale.interpolateRange}});Object.defineProperty(exports,\x22quantizeInterpolator\x22,{enumerable:!0,get:function(){return vegaScale.quantizeInterpolator}});Object.defineProperty(exports,\x22scale\x22,\n{enumerable:!0,get:function(){return vegaScale.scale}});Object.defineProperty(exports,\x22scheme\x22,{enumerable:!0,get:function(){return vegaScale.scheme}});Object.defineProperty(exports,\x22projection\x22,{enumerable:!0,get:function(){return vegaProjection.projection}});Object.defineProperty(exports,\x22View\x22,{enumerable:!0,get:function(){return vegaView.View}});Object.defineProperty(exports,\x22defaultLocale\x22,{enumerable:!0,get:function(){return vegaFormat.defaultLocale}});Object.defineProperty(exports,\x22formatLocale\x22,\n{enumerable:!0,get:function(){return vegaFormat.numberFormatDefaultLocale}});Object.defineProperty(exports,\x22locale\x22,{enumerable:!0,get:function(){return vegaFormat.locale}});Object.defineProperty(exports,\x22resetDefaultLocale\x22,{enumerable:!0,get:function(){return vegaFormat.resetDefaultLocale}});Object.defineProperty(exports,\x22timeFormatLocale\x22,{enumerable:!0,get:function(){return vegaFormat.timeFormatDefaultLocale}});Object.defineProperty(exports,\x22expressionFunction\x22,{enumerable:!0,get:function(){return vegaFunctions.expressionFunction}});\nObject.defineProperty(exports,\x22parse\x22,{enumerable:!0,get:function(){return vegaParser.parse}});Object.defineProperty(exports,\x22runtimeContext\x22,{enumerable:!0,get:function(){return vegaRuntime.context}});exports.version\x3d\x225.13.0\x22}");
SHADOW_ENV.evalLoad("module$node_modules$vega_embed$build$vega_embed.js", true , "shadow$provide.module$node_modules$vega_embed$build$vega_embed\x3dfunction(global$jscomp$0,require,module$jscomp$0,exports$jscomp$0){var process\x3drequire(\x22module$node_modules$process$browser\x22);(function(global,factory){\x22object\x22\x3d\x3d\x3dtypeof exports$jscomp$0\x26\x26\x22undefined\x22!\x3d\x3dtypeof module$jscomp$0?module$jscomp$0.exports\x3dfactory(require(\x22module$node_modules$vega$build$vega_node\x22),require(\x22module$node_modules$vega_lite$build$vega_lite\x22)):\x22function\x22\x3d\x3d\x3dtypeof define\x26\x26define.amd?define([\x22vega\x22,\x22vega-lite\x22],factory):\n(global\x3dglobal||self,global.vegaEmbed\x3dfactory(global.vega,global.vegaLite))})(this,function(vegaImport,vegaLiteImport){function __awaiter(thisArg,_arguments,P,generator){function adopt(value){return value instanceof P?value:new P(function(resolve){resolve(value)})}return new (P||(P\x3dPromise))(function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator[\x22throw\x22](value))}catch(e){reject(e)}}function step(result){result.done?\nresolve(result.value):adopt(result.value).then(fulfilled,rejected)}step((generator\x3dgenerator.apply(thisArg,_arguments||[])).next())})}function _objectKeys(obj){if(Array.isArray(obj)){var keys\x3dArray(obj.length);for(obj\x3d0;obj\x3ckeys.length;obj++)keys[obj]\x3d\x22\x22+obj;return keys}if(Object.keys)return Object.keys(obj);keys\x3d[];for(var i in obj)_hasOwnProperty.call(obj,i)\x26\x26keys.push(i);return keys}function _deepClone(obj){switch(typeof obj){case \x22object\x22:return JSON.parse(JSON.stringify(obj));case \x22undefined\x22:return null;\ndefault:return obj}}function isInteger(str){for(var i\x3d0,len\x3dstr.length,charCode;i\x3clen;)if(charCode\x3dstr.charCodeAt(i),48\x3c\x3dcharCode\x26\x2657\x3e\x3dcharCode)i++;else return!1;return!0}function escapePathComponent(path){return-1\x3d\x3d\x3dpath.indexOf(\x22/\x22)\x26\x26-1\x3d\x3d\x3dpath.indexOf(\x22~\x22)?path:path.replace(/~/g,\x22~0\x22).replace(/\\//g,\x22~1\x22)}function unescapePathComponent(path){return path.replace(/~1/g,\x22/\x22).replace(/~0/g,\x22~\x22)}function hasUndefined(obj){if(void 0\x3d\x3d\x3dobj)return!0;if(obj)if(Array.isArray(obj))for(var i\x3d0,len\x3dobj.length;i\x3c\nlen;i++){if(hasUndefined(obj[i]))return!0}else if(\x22object\x22\x3d\x3d\x3dtypeof obj){len\x3d_objectKeys(obj);var objKeysLength\x3dlen.length;for(i\x3d0;i\x3cobjKeysLength;i++)if(hasUndefined(obj[len[i]]))return!0}return!1}function patchErrorMessageFormatter(message,args){message\x3d[message];for(var key in args){var value\x3d\x22object\x22\x3d\x3d\x3dtypeof args[key]?JSON.stringify(args[key],null,2):args[key];\x22undefined\x22!\x3d\x3dtypeof value\x26\x26message.push(key+\x22: \x22+value)}return message.join(\x22\\n\x22)}function getValueByPointer(document,pointer){if(\x22\x22\x3d\x3d\npointer)return document;pointer\x3d{op:\x22_get\x22,path:pointer};applyOperation(document,pointer);return pointer.value}function applyOperation(document,operation,validateOperation,mutateDocument,banPrototypeModifications,index){void 0\x3d\x3d\x3dvalidateOperation\x26\x26(validateOperation\x3d!1);void 0\x3d\x3d\x3dmutateDocument\x26\x26(mutateDocument\x3d!0);void 0\x3d\x3d\x3dbanPrototypeModifications\x26\x26(banPrototypeModifications\x3d!0);void 0\x3d\x3d\x3dindex\x26\x26(index\x3d0);validateOperation\x26\x26(\x22function\x22\x3d\x3dtypeof validateOperation?validateOperation(operation,0,document,\noperation.path):validator(operation,0));if(\x22\x22\x3d\x3d\x3doperation.path){banPrototypeModifications\x3d{newDocument:document};if(\x22add\x22\x3d\x3d\x3doperation.op)return banPrototypeModifications.newDocument\x3doperation.value,banPrototypeModifications;if(\x22replace\x22\x3d\x3d\x3doperation.op)return banPrototypeModifications.newDocument\x3doperation.value,banPrototypeModifications.removed\x3ddocument,banPrototypeModifications;if(\x22move\x22\x3d\x3d\x3doperation.op||\x22copy\x22\x3d\x3d\x3doperation.op)return banPrototypeModifications.newDocument\x3dgetValueByPointer(document,\noperation.from),\x22move\x22\x3d\x3d\x3doperation.op\x26\x26(banPrototypeModifications.removed\x3ddocument),banPrototypeModifications;if(\x22test\x22\x3d\x3d\x3doperation.op){banPrototypeModifications.test\x3d_areEquals(document,operation.value);if(!1\x3d\x3d\x3dbanPrototypeModifications.test)throw new JsonPatchError(\x22Test operation failed\x22,\x22TEST_OPERATION_FAILED\x22,index,operation,document);banPrototypeModifications.newDocument\x3ddocument;return banPrototypeModifications}if(\x22remove\x22\x3d\x3d\x3doperation.op)return banPrototypeModifications.removed\x3ddocument,banPrototypeModifications.newDocument\x3d\nnull,banPrototypeModifications;if(\x22_get\x22\x3d\x3d\x3doperation.op)return operation.value\x3ddocument,banPrototypeModifications;if(validateOperation)throw new JsonPatchError(\x22Operation `op` property is not one of operations defined in RFC-6902\x22,\x22OPERATION_OP_INVALID\x22,index,operation,document);return banPrototypeModifications}mutateDocument||(document\x3d_deepClone(document));mutateDocument\x3d(operation.path||\x22\x22).split(\x22/\x22);var obj\x3ddocument,t\x3d1,len\x3dmutateDocument.length,existingPathFragment\x3dvoid 0,validateFunction;for(validateFunction\x3d\n\x22function\x22\x3d\x3dtypeof validateOperation?validateOperation:validator;;){var key\x3dmutateDocument[t];if(banPrototypeModifications\x26\x26\x22__proto__\x22\x3d\x3dkey)throw new TypeError(\x22JSON-Patch: modifying `__proto__` prop is banned for security reasons, if this was on purpose, please set `banPrototypeModifications` flag false and pass it to this function. More info in fast-json-patch README\x22);validateOperation\x26\x26void 0\x3d\x3d\x3dexistingPathFragment\x26\x26(void 0\x3d\x3d\x3dobj[key]?existingPathFragment\x3dmutateDocument.slice(0,t).join(\x22/\x22):\nt\x3d\x3dlen-1\x26\x26(existingPathFragment\x3doperation.path),void 0!\x3d\x3dexistingPathFragment\x26\x26validateFunction(operation,0,document,existingPathFragment));t++;if(Array.isArray(obj)){if(\x22-\x22\x3d\x3d\x3dkey)key\x3dobj.length;else{if(validateOperation\x26\x26!isInteger(key))throw new JsonPatchError(\x22Expected an unsigned base-10 integer value, making the new referenced value the array element with the zero-based index\x22,\x22OPERATION_PATH_ILLEGAL_ARRAY_INDEX\x22,index,operation,document);isInteger(key)\x26\x26(key\x3d~~key)}if(t\x3e\x3dlen){if(validateOperation\x26\x26\n\x22add\x22\x3d\x3d\x3doperation.op\x26\x26key\x3eobj.length)throw new JsonPatchError(\x22The specified index MUST NOT be greater than the number of elements in the array\x22,\x22OPERATION_VALUE_OUT_OF_BOUNDS\x22,index,operation,document);banPrototypeModifications\x3darrOps[operation.op].call(operation,obj,key,document);if(!1\x3d\x3d\x3dbanPrototypeModifications.test)throw new JsonPatchError(\x22Test operation failed\x22,\x22TEST_OPERATION_FAILED\x22,index,operation,document);return banPrototypeModifications}}else if(key\x26\x26-1!\x3dkey.indexOf(\x22~\x22)\x26\x26(key\x3dunescapePathComponent(key)),\nt\x3e\x3dlen){banPrototypeModifications\x3dobjOps[operation.op].call(operation,obj,key,document);if(!1\x3d\x3d\x3dbanPrototypeModifications.test)throw new JsonPatchError(\x22Test operation failed\x22,\x22TEST_OPERATION_FAILED\x22,index,operation,document);return banPrototypeModifications}obj\x3dobj[key]}}function applyPatch(document,patch,validateOperation,mutateDocument,banPrototypeModifications){void 0\x3d\x3d\x3dmutateDocument\x26\x26(mutateDocument\x3d!0);void 0\x3d\x3d\x3dbanPrototypeModifications\x26\x26(banPrototypeModifications\x3d!0);if(validateOperation\x26\x26\n!Array.isArray(patch))throw new JsonPatchError(\x22Patch sequence must be an array\x22,\x22SEQUENCE_NOT_AN_ARRAY\x22);mutateDocument||(document\x3d_deepClone(document));mutateDocument\x3dArray(patch.length);for(var i\x3d0,length_1\x3dpatch.length;i\x3clength_1;i++)mutateDocument[i]\x3dapplyOperation(document,patch[i],validateOperation,!0,banPrototypeModifications,i),document\x3dmutateDocument[i].newDocument;mutateDocument.newDocument\x3ddocument;return mutateDocument}function validator(operation,index,document,existingPathFragment){if(\x22object\x22!\x3d\x3d\ntypeof operation||null\x3d\x3d\x3doperation||Array.isArray(operation))throw new JsonPatchError(\x22Operation is not an object\x22,\x22OPERATION_NOT_AN_OBJECT\x22,index,operation,document);if(objOps[operation.op]){if(\x22string\x22!\x3d\x3dtypeof operation.path)throw new JsonPatchError(\x22Operation `path` property is not a string\x22,\x22OPERATION_PATH_INVALID\x22,index,operation,document);if(0!\x3d\x3doperation.path.indexOf(\x22/\x22)\x26\x260\x3coperation.path.length)throw new JsonPatchError(\x27Operation `path` property must start with \x22/\x22\x27,\x22OPERATION_PATH_INVALID\x22,\nindex,operation,document);if(\x22move\x22!\x3d\x3doperation.op\x26\x26\x22copy\x22!\x3d\x3doperation.op||\x22string\x22\x3d\x3d\x3dtypeof operation.from)if(\x22add\x22!\x3d\x3doperation.op\x26\x26\x22replace\x22!\x3d\x3doperation.op\x26\x26\x22test\x22!\x3d\x3doperation.op||void 0!\x3d\x3doperation.value){if((\x22add\x22\x3d\x3d\x3doperation.op||\x22replace\x22\x3d\x3d\x3doperation.op||\x22test\x22\x3d\x3d\x3doperation.op)\x26\x26hasUndefined(operation.value))throw new JsonPatchError(\x22Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)\x22,\x22OPERATION_VALUE_CANNOT_CONTAIN_UNDEFINED\x22,index,operation,document);\nif(document)if(\x22add\x22\x3d\x3doperation.op){var pathLen\x3doperation.path.split(\x22/\x22).length;existingPathFragment\x3dexistingPathFragment.split(\x22/\x22).length;if(pathLen!\x3d\x3dexistingPathFragment+1\x26\x26pathLen!\x3d\x3dexistingPathFragment)throw new JsonPatchError(\x22Cannot perform an `add` operation at the desired path\x22,\x22OPERATION_PATH_CANNOT_ADD\x22,index,operation,document);}else if(\x22replace\x22\x3d\x3d\x3doperation.op||\x22remove\x22\x3d\x3d\x3doperation.op||\x22_get\x22\x3d\x3d\x3doperation.op){if(operation.path!\x3d\x3dexistingPathFragment)throw new JsonPatchError(\x22Cannot perform the operation at a path that does not exist\x22,\n\x22OPERATION_PATH_UNRESOLVABLE\x22,index,operation,document);}else if((\x22move\x22\x3d\x3d\x3doperation.op||\x22copy\x22\x3d\x3d\x3doperation.op)\x26\x26(pathLen\x3dvalidate([{op:\x22_get\x22,path:operation.from,value:void 0}],document))\x26\x26\x22OPERATION_PATH_UNRESOLVABLE\x22\x3d\x3d\x3dpathLen.name)throw new JsonPatchError(\x22Cannot perform the operation from a path that does not exist\x22,\x22OPERATION_FROM_UNRESOLVABLE\x22,index,operation,document);}else throw new JsonPatchError(\x22Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)\x22,\n\x22OPERATION_VALUE_REQUIRED\x22,index,operation,document);else throw new JsonPatchError(\x22Operation `from` property is not present (applicable in `move` and `copy` operations)\x22,\x22OPERATION_FROM_REQUIRED\x22,index,operation,document);}else throw new JsonPatchError(\x22Operation `op` property is not one of operations defined in RFC-6902\x22,\x22OPERATION_OP_INVALID\x22,index,operation,document);}function validate(sequence,document,externalValidator){try{if(!Array.isArray(sequence))throw new JsonPatchError(\x22Patch sequence must be an array\x22,\n\x22SEQUENCE_NOT_AN_ARRAY\x22);if(document)applyPatch(_deepClone(document),_deepClone(sequence),externalValidator||!0);else{externalValidator\x3dexternalValidator||validator;for(var i\x3d0;i\x3csequence.length;i++)externalValidator(sequence[i],i,document,void 0)}}catch(e){if(e instanceof JsonPatchError)return e;throw e;}}function _areEquals(a,b){if(a\x3d\x3d\x3db)return!0;if(a\x26\x26b\x26\x26\x22object\x22\x3d\x3dtypeof a\x26\x26\x22object\x22\x3d\x3dtypeof b){var arrA\x3dArray.isArray(a),arrB\x3dArray.isArray(b);if(arrA\x26\x26arrB){var length\x3da.length;if(length!\x3db.length)return!1;\nfor(arrA\x3dlength;0!\x3d\x3darrA--;)if(!_areEquals(a[arrA],b[arrA]))return!1;return!0}if(arrA!\x3darrB)return!1;arrB\x3dObject.keys(a);length\x3darrB.length;if(length!\x3d\x3dObject.keys(b).length)return!1;for(arrA\x3dlength;0!\x3d\x3darrA--;)if(!b.hasOwnProperty(arrB[arrA]))return!1;for(arrA\x3dlength;0!\x3d\x3darrA--;)if(length\x3darrB[arrA],!_areEquals(a[length],b[length]))return!1;return!0}return a!\x3d\x3da\x26\x26b!\x3d\x3db}function generate(observer,invertible){void 0\x3d\x3d\x3dinvertible\x26\x26(invertible\x3d!1);var mirror\x3dbeforeDict.get(observer.object);_generate(mirror.value,\nobserver.object,observer.patches,\x22\x22,invertible);observer.patches.length\x26\x26applyPatch(mirror.value,observer.patches);invertible\x3dobserver.patches;0\x3cinvertible.length\x26\x26(observer.patches\x3d[],observer.callback\x26\x26observer.callback(invertible));return invertible}function _generate(mirror,obj,patches,path,invertible){if(obj!\x3d\x3dmirror){\x22function\x22\x3d\x3d\x3dtypeof obj.toJSON\x26\x26(obj\x3dobj.toJSON());for(var newKeys\x3d_objectKeys(obj),oldKeys\x3d_objectKeys(mirror),deleted\x3d!1,t\x3doldKeys.length-1;0\x3c\x3dt;t--){var key\x3doldKeys[t],oldVal\x3d\nmirror[key];if(!_hasOwnProperty.call(obj,key)||void 0\x3d\x3d\x3dobj[key]\x26\x26void 0!\x3d\x3doldVal\x26\x26!1\x3d\x3d\x3dArray.isArray(obj))Array.isArray(mirror)\x3d\x3d\x3dArray.isArray(obj)?(invertible\x26\x26patches.push({op:\x22test\x22,path:path+\x22/\x22+escapePathComponent(key),value:_deepClone(oldVal)}),patches.push({op:\x22remove\x22,path:path+\x22/\x22+escapePathComponent(key)}),deleted\x3d!0):(invertible\x26\x26patches.push({op:\x22test\x22,path:path,value:mirror}),patches.push({op:\x22replace\x22,path:path,value:obj}));else{var newVal\x3dobj[key];\x22object\x22\x3d\x3dtypeof oldVal\x26\x26null!\x3doldVal\x26\x26\n\x22object\x22\x3d\x3dtypeof newVal\x26\x26null!\x3dnewVal?_generate(oldVal,newVal,patches,path+\x22/\x22+escapePathComponent(key),invertible):oldVal!\x3d\x3dnewVal\x26\x26(invertible\x26\x26patches.push({op:\x22test\x22,path:path+\x22/\x22+escapePathComponent(key),value:_deepClone(oldVal)}),patches.push({op:\x22replace\x22,path:path+\x22/\x22+escapePathComponent(key),value:_deepClone(newVal)}))}}if(deleted||newKeys.length!\x3doldKeys.length)for(t\x3d0;t\x3cnewKeys.length;t++)key\x3dnewKeys[t],_hasOwnProperty.call(mirror,key)||void 0\x3d\x3d\x3dobj[key]||patches.push({op:\x22add\x22,path:path+\n\x22/\x22+escapePathComponent(key),value:_deepClone(obj[key])})}}function createCommonjsModule(fn,basedir,module){return module\x3d{path:basedir,exports:{},require:function(path,base){throw Error(\x22Dynamic requires are not currently supported by @rollup/plugin-commonjs\x22);}},fn(module,module.exports),module.exports}function accessor(fn,fields,name){fn.fields\x3dfields||[];fn.fname\x3dname;return fn}function getter(path){return 1\x3d\x3d\x3dpath.length?get1(path[0]):getN(path)}function splitAccessPath(p){function push(){path.push(s+\np.substring(i,j));s\x3d\x22\x22;i\x3dj+1}var path\x3d[],q\x3dnull,b\x3d0,n\x3dp.length,s\x3d\x22\x22,i,j;p+\x3d\x22\x22;for(i\x3dj\x3d0;j\x3cn;++j){var c\x3dp[j];if(\x22\\\\\x22\x3d\x3d\x3dc)s+\x3dp.substring(i,j),s+\x3dp.substring(++j,++j),i\x3dj;else if(c\x3d\x3d\x3dq)push(),q\x3dnull,b\x3d-1;else if(!q)if(i\x3d\x3d\x3db\x26\x26\x27\x22\x27\x3d\x3d\x3dc)i\x3dj+1,q\x3dc;else if(i\x3d\x3d\x3db\x26\x26\x22\x27\x22\x3d\x3d\x3dc)i\x3dj+1,q\x3dc;else if(\x22.\x22\x3d\x3d\x3dc\x26\x26!b)j\x3ei?push():i\x3dj+1;else if(\x22[\x22\x3d\x3d\x3dc)j\x3ei\x26\x26push(),b\x3di\x3dj+1;else if(\x22]\x22\x3d\x3d\x3dc){if(!b)throw Error(\x22Access path missing open bracket: \x22+p);0\x3cb\x26\x26push();b\x3d0;i\x3dj+1}}if(b)throw Error(\x22Access path missing closing bracket: \x22+\np);if(q)throw Error(\x22Access path missing closing quote: \x22+p);j\x3ei\x26\x26(j++,push());return path}function mergeConfig(configs){for(var $jscomp$restParams\x3d[],$jscomp$restIndex\x3d0;$jscomp$restIndex\x3carguments.length;++$jscomp$restIndex)$jscomp$restParams[$jscomp$restIndex-0]\x3darguments[$jscomp$restIndex];return $jscomp$restParams.reduce(function(out,source){for(var key in source)\x22signals\x22\x3d\x3d\x3dkey?out.signals\x3dmergeNamed(out.signals,source.signals):writeConfig(out,key,source[key],\x22legend\x22\x3d\x3d\x3dkey?{layout:1}:\x22style\x22\x3d\x3d\x3d\nkey?!0:null);return out},{})}function writeConfig(output,key,value,recurse){if(\x22__proto__\x22!\x3d\x3dkey){var k;if(value!\x3d\x3dObject(value)||isArray(value))output[key]\x3dvalue;else{var _\x3doutput[key];output\x3d_\x3d\x3d\x3dObject(_)?output[key]:output[key]\x3d{};for(k in value)recurse\x26\x26(!0\x3d\x3d\x3drecurse||recurse[k])?writeConfig(output,k,value[k]):\x22__proto__\x22!\x3d\x3dk\x26\x26(output[k]\x3dvalue[k])}}}function mergeNamed(a,b){function add(_){map[_.name]||(map[_.name]\x3d1,out.push(_))}if(null\x3d\x3da)return b;var map\x3d{},out\x3d[];b.forEach(add);a.forEach(add);\nreturn out}function isString(_){return\x22string\x22\x3d\x3d\x3dtypeof _}function formatValue(value,valueToHtml,maxDepth){if(isArray(value))return\x22[\x22+value.map(function(v){return valueToHtml(isString(v)?v:JSON.stringify(v,replacer$jscomp$0(maxDepth)))}).join(\x22, \x22)+\x22]\x22;if(value\x3d\x3d\x3dObject(value)){var content\x3d\x22\x22,title\x3dvalue.title,image\x3dvalue.image;value\x3d__rest(value,[\x22title\x22,\x22image\x22]);title\x26\x26(content+\x3d\x22\\x3ch2\\x3e\x22+valueToHtml(title)+\x22\\x3c/h2\\x3e\x22);image\x26\x26(content+\x3d\x27\\x3cimg src\\x3d\x22\x27+valueToHtml(image)+\x27\x22\\x3e\x27);title\x3d\nObject.keys(value);if(0\x3ctitle.length){content+\x3d\x22\\x3ctable\\x3e\x22;title\x3d$jscomp.makeIterator(title);for(image\x3dtitle.next();!image.done;image\x3dtitle.next()){image\x3dimage.value;var val\x3dvalue[image];void 0!\x3d\x3dval\x26\x26(val\x3d\x3d\x3dObject(val)\x26\x26(val\x3dJSON.stringify(val,replacer$jscomp$0(maxDepth))),content+\x3d\x27\\x3ctr\\x3e\\x3ctd class\\x3d\x22key\x22\\x3e\x27+valueToHtml(image)+\x27:\\x3c/td\\x3e\\x3ctd class\\x3d\x22value\x22\\x3e\x27+valueToHtml(val)+\x22\\x3c/td\\x3e\\x3c/tr\\x3e\x22)}content+\x3d\x22\\x3c/table\\x3e\x22}return content||\x22{}\x22}return valueToHtml(value)}\nfunction replacer$jscomp$0(maxDepth){var stack\x3d[];return function(key,value){if(\x22object\x22!\x3d\x3dtypeof value||null\x3d\x3d\x3dvalue)return value;key\x3dstack.indexOf(this)+1;stack.length\x3dkey;if(stack.length\x3emaxDepth)return\x22[Object]\x22;if(0\x3c\x3dstack.indexOf(value))return\x22[Circular]\x22;stack.push(value);return value}}function post(window,url,data){function listen(evt){evt.source\x3d\x3d\x3deditor\x26\x26(count\x3d0,window.removeEventListener(\x22message\x22,listen,!1))}function send(){0\x3e\x3dcount||(editor.postMessage(data,origin),setTimeout(send,250),\n--count)}var editor\x3dwindow.open(url),origin\x3d(new URL(url)).origin,count\x3d40;window.addEventListener(\x22message\x22,listen,!1);setTimeout(send,250)}function mergeDeep(dest$jscomp$0,src){for(var $jscomp$restParams\x3d[],$jscomp$restIndex\x3d1;$jscomp$restIndex\x3carguments.length;++$jscomp$restIndex)$jscomp$restParams[$jscomp$restIndex-1]\x3darguments[$jscomp$restIndex];$jscomp$restParams\x3d$jscomp.makeIterator($jscomp$restParams);for($jscomp$restIndex\x3d$jscomp$restParams.next();!$jscomp$restIndex.done;$jscomp$restIndex\x3d\n$jscomp$restParams.next()){$jscomp$restIndex\x3d$jscomp$restIndex.value;for(var dest\x3ddest$jscomp$0,$jscomp$inline_6272\x3d$jscomp.makeIterator(Object.keys($jscomp$restIndex)),$jscomp$key$property\x3d$jscomp$inline_6272.next();!$jscomp$key$property.done;$jscomp$key$property\x3d$jscomp$inline_6272.next())$jscomp$key$property\x3d$jscomp$key$property.value,vegaImport.writeConfig(dest,$jscomp$key$property,$jscomp$restIndex[$jscomp$key$property],!0)}return dest$jscomp$0}function viewSource(source,sourceHeader,sourceFooter,\nmode){sourceHeader\x3d\x22\\x3chtml\\x3e\\x3chead\\x3e\x22+sourceHeader+\x27\\x3c/head\\x3e\\x3cbody\\x3e\\x3cpre\\x3e\\x3ccode class\\x3d\x22json\x22\\x3e\x27;sourceFooter\x3d\x22\\x3c/code\\x3e\\x3c/pre\\x3e\x22+sourceFooter+\x22\\x3c/body\\x3e\\x3c/html\\x3e\x22;var win\x3dwindow.open(\x22\x22);win.document.write(sourceHeader+source+sourceFooter);win.document.title\x3dNAMES[mode]+\x22 JSON Source\x22}function guessMode(spec,providedMode){var _a;return spec.$schema?(spec\x3dschemaParser(spec.$schema),providedMode\x26\x26providedMode!\x3d\x3dspec.library\x26\x26console.warn(\x22The given visualization spec is written in \x22+\nNAMES[spec.library]+\x22, but mode argument sets \x22+(null!\x3d\x3d(_a\x3dNAMES[providedMode])\x26\x26void 0!\x3d\x3d_a?_a:providedMode)+\x22.\x22),providedMode\x3dspec.library,semver$1.satisfies(VERSION[providedMode],\x22^\x22+spec.version.slice(1))||console.warn(\x22The input spec uses \x22+NAMES[providedMode]+\x22 \x22+spec.version+\x22, but the current version of \x22+NAMES[providedMode]+\x22 is v\x22+VERSION[providedMode]+\x22.\x22),providedMode):\x22mark\x22in spec||\x22encoding\x22in spec||\x22layer\x22in spec||\x22hconcat\x22in spec||\x22vconcat\x22in spec||\x22facet\x22in spec||\x22repeat\x22in spec?\n\x22vega-lite\x22:\x22marks\x22in spec||\x22signals\x22in spec||\x22scales\x22in spec||\x22axes\x22in spec?\x22vega\x22:null!\x3d\x3dprovidedMode\x26\x26void 0!\x3d\x3dprovidedMode?providedMode:\x22vega\x22}function embed(el,spec,opts){opts\x3dvoid 0\x3d\x3d\x3dopts?{}:opts;var _a,_b,_c;return __awaiter(this,void 0,void 0,function $jscomp$generator$function(){var loader,JSCompiler_temp,JSCompiler_temp_const,JSCompiler_temp_const$jscomp$0,parsedSpec,usermetaOpts,parsedOpts,mergedOpts;return $jscomp.generator.createGenerator($jscomp$generator$function,function($jscomp$generator$context){switch($jscomp$generator$context.nextAddress){case 1:var o\x3d\nopts.loader;loader\x3do\x26\x26\x22load\x22in o?opts.loader:vega.loader(opts.loader);if(!isString(spec)){JSCompiler_temp\x3dspec;$jscomp$generator$context.jumpTo(2);break}JSCompiler_temp_const\x3dJSON;JSCompiler_temp_const$jscomp$0\x3dJSCompiler_temp_const.parse;return $jscomp$generator$context.yield(loader.load(spec),3);case 3:JSCompiler_temp\x3dJSCompiler_temp_const$jscomp$0.call(JSCompiler_temp_const,$jscomp$generator$context.yieldResult);case 2:return parsedSpec\x3dJSCompiler_temp,$jscomp$generator$context.yield(loadOpts(null!\x3d\x3d\n(_a\x3dparsedSpec.usermeta\x26\x26parsedSpec.usermeta.embedOptions)\x26\x26void 0!\x3d\x3d_a?_a:{},loader),4);case 4:return usermetaOpts\x3d$jscomp$generator$context.yieldResult,$jscomp$generator$context.yield(loadOpts(opts,loader),5);case 5:return parsedOpts\x3d$jscomp$generator$context.yieldResult,mergedOpts\x3dObject.assign(Object.assign({},mergeDeep(parsedOpts,usermetaOpts)),{config:mergeConfig(null!\x3d\x3d(_b\x3dparsedOpts.config)\x26\x26void 0!\x3d\x3d_b?_b:{},null!\x3d\x3d(_c\x3dusermetaOpts.config)\x26\x26void 0!\x3d\x3d_c?_c:{})}),$jscomp$generator$context.yield(_embed(el,\nparsedSpec,mergedOpts,loader),6);case 6:return $jscomp$generator$context.return($jscomp$generator$context.yieldResult)}})})}function loadOpts(opt,loader){var _a;return __awaiter(this,void 0,void 0,function $jscomp$generator$function(){var JSCompiler_temp,JSCompiler_temp_const,JSCompiler_temp_const$jscomp$0,config,JSCompiler_temp$jscomp$0,JSCompiler_temp_const$jscomp$1,JSCompiler_temp_const$jscomp$2,patch;return $jscomp.generator.createGenerator($jscomp$generator$function,function($jscomp$generator$context){switch($jscomp$generator$context.nextAddress){case 1:if(!isString(opt.config)){JSCompiler_temp\x3d\nnull!\x3d\x3d(_a\x3dopt.config)\x26\x26void 0!\x3d\x3d_a?_a:{};$jscomp$generator$context.jumpTo(2);break}JSCompiler_temp_const\x3dJSON;JSCompiler_temp_const$jscomp$0\x3dJSCompiler_temp_const.parse;return $jscomp$generator$context.yield(loader.load(opt.config),3);case 3:JSCompiler_temp\x3dJSCompiler_temp_const$jscomp$0.call(JSCompiler_temp_const,$jscomp$generator$context.yieldResult);case 2:config\x3dJSCompiler_temp;if(!isString(opt.patch)){JSCompiler_temp$jscomp$0\x3dopt.patch;$jscomp$generator$context.jumpTo(4);break}JSCompiler_temp_const$jscomp$1\x3d\nJSON;JSCompiler_temp_const$jscomp$2\x3dJSCompiler_temp_const$jscomp$1.parse;return $jscomp$generator$context.yield(loader.load(opt.patch),5);case 5:JSCompiler_temp$jscomp$0\x3dJSCompiler_temp_const$jscomp$2.call(JSCompiler_temp_const$jscomp$1,$jscomp$generator$context.yieldResult);case 4:return patch\x3dJSCompiler_temp$jscomp$0,$jscomp$generator$context.return(Object.assign(Object.assign(Object.assign({},opt),patch?{patch:patch}:{}),config?{config:config}:{}))}})})}function _embed(el,spec,opts,loader){opts\x3d\nvoid 0\x3d\x3d\x3dopts?{}:opts;var _a$jscomp$0,_b$jscomp$0,_c,_d,_e,_f;return __awaiter(this,void 0,void 0,function $jscomp$generator$function(){function finalize(){documentClickHandler\x26\x26document.removeEventListener(\x22click\x22,documentClickHandler);view.finalize()}var config,actions,i18n,renderer,logLevel,downloadFileName,style,mode,vgSpec,parsed,div,patch,$jscomp$destructuring$var477,ast,runtime,view,handler,$jscomp$destructuring$var478,hover,$jscomp$destructuring$var479,hoverSet,updateSet,documentClickHandler,\nwrapper$673,details,summary,ctrl,$jscomp$loop$699,$jscomp$iter$335,$jscomp$key$ext,i18nExportAction,exportLink,viewSourceLink,compileLink,editorUrl,editorLink;return $jscomp.generator.createGenerator($jscomp$generator$function,function($jscomp$generator$context){if(1\x3d\x3d$jscomp$generator$context.nextAddress){config\x3dopts.theme?mergeConfig(themes[opts.theme],null!\x3d\x3d(_a$jscomp$0\x3dopts.config)\x26\x26void 0!\x3d\x3d_a$jscomp$0?_a$jscomp$0:{}):opts.config;actions\x3d\x22boolean\x22\x3d\x3d\x3dtypeof opts.actions?opts.actions:mergeDeep({},\nDEFAULT_ACTIONS,null!\x3d\x3d(_b$jscomp$0\x3dopts.actions)\x26\x26void 0!\x3d\x3d_b$jscomp$0?_b$jscomp$0:{});i18n\x3dObject.assign(Object.assign({},I18N),opts.i18n);renderer\x3dnull!\x3d\x3d(_c\x3dopts.renderer)\x26\x26void 0!\x3d\x3d_c?_c:\x22canvas\x22;logLevel\x3dnull!\x3d\x3d(_d\x3dopts.logLevel)\x26\x26void 0!\x3d\x3d_d?_d:vega.Warn;downloadFileName\x3dnull!\x3d\x3d(_e\x3dopts.downloadFileName)\x26\x26void 0!\x3d\x3d_e?_e:\x22visualization\x22;!1\x3d\x3d\x3dopts.defaultStyle||document.getElementById(\x22vega-embed-style\x22)||(style\x3ddocument.createElement(\x22style\x22),style.id\x3d\x22vega-embed-style\x22,style.innerText\x3dvoid 0\x3d\x3d\x3d\nopts.defaultStyle||!0\x3d\x3d\x3dopts.defaultStyle?\x27.vega-embed {\\n  position: relative;\\n  display: inline-block; }\\n  .vega-embed.has-actions {\\n    padding-right: 38px; }\\n  .vega-embed details:not([open]) \\x3e :not(summary) {\\n    display: none !important; }\\n  .vega-embed summary {\\n    list-style: none;\\n    position: absolute;\\n    top: 0;\\n    right: 0;\\n    padding: 6px;\\n    z-index: 1000;\\n    background: white;\\n    box-shadow: 1px 1px 3px rgba(0, 0, 0, 0.1);\\n    color: #1b1e23;\\n    border: 1px solid #aaa;\\n    border-radius: 999px;\\n    opacity: 0.2;\\n    transition: opacity 0.4s ease-in;\\n    outline: none;\\n    cursor: pointer;\\n    line-height: 0px; }\\n    .vega-embed summary::-webkit-details-marker {\\n      display: none; }\\n    .vega-embed summary:active {\\n      box-shadow: #aaa 0px 0px 0px 1px inset; }\\n    .vega-embed summary svg {\\n      width: 14px;\\n      height: 14px; }\\n  .vega-embed details[open] summary {\\n    opacity: 0.7; }\\n  .vega-embed:hover summary,\\n  .vega-embed:focus summary {\\n    opacity: 1 !important;\\n    transition: opacity 0.2s ease; }\\n  .vega-embed .vega-actions {\\n    position: absolute;\\n    z-index: 1001;\\n    top: 35px;\\n    right: -9px;\\n    display: flex;\\n    flex-direction: column;\\n    padding-bottom: 8px;\\n    padding-top: 8px;\\n    border-radius: 4px;\\n    box-shadow: 0 2px 8px 0 rgba(0, 0, 0, 0.2);\\n    border: 1px solid #d9d9d9;\\n    background: white;\\n    animation-duration: 0.15s;\\n    animation-name: scale-in;\\n    animation-timing-function: cubic-bezier(0.2, 0, 0.13, 1.5);\\n    text-align: left; }\\n    .vega-embed .vega-actions a {\\n      padding: 8px 16px;\\n      font-family: sans-serif;\\n      font-size: 14px;\\n      font-weight: 600;\\n      white-space: nowrap;\\n      color: #434a56;\\n      text-decoration: none; }\\n      .vega-embed .vega-actions a:hover {\\n        background-color: #f7f7f9;\\n        color: black; }\\n    .vega-embed .vega-actions::before, .vega-embed .vega-actions::after {\\n      content: \x22\x22;\\n      display: inline-block;\\n      position: absolute; }\\n    .vega-embed .vega-actions::before {\\n      left: auto;\\n      right: 14px;\\n      top: -16px;\\n      border: 8px solid #0000;\\n      border-bottom-color: #d9d9d9; }\\n    .vega-embed .vega-actions::after {\\n      left: auto;\\n      right: 15px;\\n      top: -14px;\\n      border: 7px solid #0000;\\n      border-bottom-color: #fff; }\\n\\n.vega-embed-wrapper {\\n  max-width: 100%;\\n  overflow: scroll;\\n  padding-right: 14px; }\\n\\n@keyframes scale-in {\\n  from {\\n    opacity: 0;\\n    transform: scale(0.6); }\\n  to {\\n    opacity: 1;\\n    transform: scale(1); } }\\n\x27.toString():\nopts.defaultStyle,document.head.appendChild(style));mode\x3dguessMode(spec,opts.mode);vgSpec\x3dPREPROCESSOR[mode](spec,config);\x22vega-lite\x22\x3d\x3d\x3dmode\x26\x26vgSpec.$schema\x26\x26(parsed\x3dschemaParser(vgSpec.$schema),semver$1.satisfies(VERSION.vega,\x22^\x22+parsed.version.slice(1))||console.warn(\x22The compiled spec uses Vega \x22+parsed.version+\x22, but current version is v\x22+VERSION.vega+\x22.\x22));div\x3d\x22string\x22\x3d\x3d\x3dtypeof el?document.querySelector(el):el;if(!div)throw Error(el+\x22 does not exist\x22);div.classList.add(\x22vega-embed\x22);actions\x26\x26\ndiv.classList.add(\x22has-actions\x22);div.innerHTML\x3d\x22\x22;(patch\x3dopts.patch)\x26\x26(vgSpec\x3dpatch instanceof Function?patch(vgSpec):applyPatch(vgSpec,patch,!0,!1).newDocument);opts.formatLocale\x26\x26vega.formatLocale(opts.formatLocale);opts.timeFormatLocale\x26\x26vega.timeFormatLocale(opts.timeFormatLocale);$jscomp$destructuring$var477\x3dopts;ast\x3d$jscomp$destructuring$var477.ast;runtime\x3dvega.parse(vgSpec,\x22vega-lite\x22\x3d\x3d\x3dmode?{}:config,{ast:ast});view\x3dnew vega.View(runtime,Object.assign({loader:loader,logLevel:logLevel,renderer:renderer},\nast?{expr:vega.expressionInterpreter}:{}));!1!\x3d\x3dopts.tooltip\x26\x26(handler\x3d\x22function\x22\x3d\x3d\x3dtypeof opts.tooltip?opts.tooltip:(new Handler(!0\x3d\x3d\x3dopts.tooltip?{}:opts.tooltip)).call,view.tooltip(handler));$jscomp$destructuring$var478\x3dopts;hover\x3d$jscomp$destructuring$var478.hover;void 0\x3d\x3d\x3dhover\x26\x26(hover\x3d\x22vega\x22\x3d\x3d\x3dmode);hover\x26\x26($jscomp$destructuring$var479\x3d\x22boolean\x22\x3d\x3d\x3dtypeof hover?{}:hover,hoverSet\x3d$jscomp$destructuring$var479.hoverSet,updateSet\x3d$jscomp$destructuring$var479.updateSet,view.hover(hoverSet,updateSet));\nopts\x26\x26(null!\x3dopts.width\x26\x26view.width(opts.width),null!\x3dopts.height\x26\x26view.height(opts.height),null!\x3dopts.padding\x26\x26view.padding(opts.padding));return $jscomp$generator$context.yield(view.initialize(el).runAsync(),2)}if(!1!\x3d\x3dactions){wrapper$673\x3ddiv;!1!\x3d\x3dopts.defaultStyle\x26\x26(details\x3ddocument.createElement(\x22details\x22),details.title\x3di18n.CLICK_TO_VIEW_ACTIONS,div.append(details),wrapper$673\x3ddetails,summary\x3ddocument.createElement(\x22summary\x22),summary.innerHTML\x3d\x27\\n\\x3csvg viewBox\\x3d\x220 0 16 16\x22 fill\\x3d\x22currentColor\x22 stroke\\x3d\x22none\x22 stroke-width\\x3d\x221\x22 stroke-linecap\\x3d\x22round\x22 stroke-linejoin\\x3d\x22round\x22\\x3e\\n  \\x3ccircle r\\x3d\x222\x22 cy\\x3d\x228\x22 cx\\x3d\x222\x22\\x3e\\x3c/circle\\x3e\\n  \\x3ccircle r\\x3d\x222\x22 cy\\x3d\x228\x22 cx\\x3d\x228\x22\\x3e\\x3c/circle\\x3e\\n  \\x3ccircle r\\x3d\x222\x22 cy\\x3d\x228\x22 cx\\x3d\x2214\x22\\x3e\\x3c/circle\\x3e\\n\\x3c/svg\\x3e\x27,\ndetails.append(summary),documentClickHandler\x3dfunction(ev){details.contains(ev.target)||details.removeAttribute(\x22open\x22)},document.addEventListener(\x22click\x22,documentClickHandler));ctrl\x3ddocument.createElement(\x22div\x22);wrapper$673.append(ctrl);ctrl.classList.add(\x22vega-actions\x22);if(!0\x3d\x3d\x3dactions||!1!\x3d\x3dactions.export)for($jscomp$loop$699\x3d{},$jscomp$iter$335\x3d$jscomp.makeIterator([\x22svg\x22,\x22png\x22]),$jscomp$key$ext\x3d$jscomp$iter$335.next();!$jscomp$key$ext.done;$jscomp$loop$699\x3d{$jscomp$loop$prop$ext$700:$jscomp$loop$699.$jscomp$loop$prop$ext$700},\n$jscomp$key$ext\x3d$jscomp$iter$335.next())if($jscomp$loop$699.$jscomp$loop$prop$ext$700\x3d$jscomp$key$ext.value,!0\x3d\x3d\x3dactions||!0\x3d\x3d\x3dactions.export||actions.export[$jscomp$loop$699.$jscomp$loop$prop$ext$700])i18nExportAction\x3di18n[$jscomp$loop$699.$jscomp$loop$prop$ext$700.toUpperCase()+\x22_ACTION\x22],exportLink\x3ddocument.createElement(\x22a\x22),exportLink.text\x3di18nExportAction,exportLink.href\x3d\x22#\x22,exportLink.target\x3d\x22_blank\x22,exportLink.download\x3ddownloadFileName+\x22.\x22+$jscomp$loop$699.$jscomp$loop$prop$ext$700,exportLink.addEventListener(\x22mousedown\x22,\nfunction($jscomp$loop$699){return function(e){return __awaiter(this,void 0,void 0,function $jscomp$generator$function$1(){var url,$jscomp$generator$this$1\x3dthis;return $jscomp.generator.createGenerator($jscomp$generator$function$1,function($jscomp$generator$context$1){if(1\x3d\x3d$jscomp$generator$context$1.nextAddress)return e.preventDefault(),$jscomp$generator$context$1.yield(view.toImageURL($jscomp$loop$699.$jscomp$loop$prop$ext$700,opts.scaleFactor),2);url\x3d$jscomp$generator$context$1.yieldResult;$jscomp$generator$this$1.href\x3d\nurl;$jscomp$generator$context$1.jumpToEnd()})})}}($jscomp$loop$699)),ctrl.append(exportLink);if(!0\x3d\x3d\x3dactions||!1!\x3d\x3dactions.source)viewSourceLink\x3ddocument.createElement(\x22a\x22),viewSourceLink.text\x3di18n.SOURCE_ACTION,viewSourceLink.href\x3d\x22#\x22,viewSourceLink.addEventListener(\x22click\x22,function(e){var _a,_b;viewSource(jsonStringifyPrettyCompact(spec),null!\x3d\x3d(_a\x3dopts.sourceHeader)\x26\x26void 0!\x3d\x3d_a?_a:\x22\x22,null!\x3d\x3d(_b\x3dopts.sourceFooter)\x26\x26void 0!\x3d\x3d_b?_b:\x22\x22,mode);e.preventDefault()}),ctrl.append(viewSourceLink);\x22vega-lite\x22!\x3d\x3d\nmode||!0!\x3d\x3dactions\x26\x26!1\x3d\x3d\x3dactions.compiled||(compileLink\x3ddocument.createElement(\x22a\x22),compileLink.text\x3di18n.COMPILED_ACTION,compileLink.href\x3d\x22#\x22,compileLink.addEventListener(\x22click\x22,function(e){var _a,_b;viewSource(jsonStringifyPrettyCompact(vgSpec),null!\x3d\x3d(_a\x3dopts.sourceHeader)\x26\x26void 0!\x3d\x3d_a?_a:\x22\x22,null!\x3d\x3d(_b\x3dopts.sourceFooter)\x26\x26void 0!\x3d\x3d_b?_b:\x22\x22,\x22vega\x22);e.preventDefault()}),ctrl.append(compileLink));if(!0\x3d\x3d\x3dactions||!1!\x3d\x3dactions.editor)editorUrl\x3dnull!\x3d\x3d(_f\x3dopts.editorUrl)\x26\x26void 0!\x3d\x3d_f?_f:\x22https://vega.github.io/editor/\x22,\neditorLink\x3ddocument.createElement(\x22a\x22),editorLink.text\x3di18n.EDITOR_ACTION,editorLink.href\x3d\x22#\x22,editorLink.addEventListener(\x22click\x22,function(e){post(window,editorUrl,{config:config,mode:mode,renderer:renderer,spec:jsonStringifyPrettyCompact(spec)});e.preventDefault()}),ctrl.append(editorLink)}return $jscomp$generator$context.return({view:view,spec:spec,vgSpec:vgSpec,finalize:finalize})})})}function container(spec,opt){opt\x3dvoid 0\x3d\x3d\x3dopt?{}:opt;var _a;return __awaiter(this,void 0,void 0,function $jscomp$generator$function(){var wrapper,\ndiv,actions,result;return $jscomp.generator.createGenerator($jscomp$generator$function,function($jscomp$generator$context){if(1\x3d\x3d$jscomp$generator$context.nextAddress)return wrapper\x3ddocument.createElement(\x22div\x22),wrapper.classList.add(\x22vega-embed-wrapper\x22),div\x3ddocument.createElement(\x22div\x22),wrapper.appendChild(div),actions\x3d!0\x3d\x3d\x3dopt.actions||!1\x3d\x3d\x3dopt.actions?opt.actions:Object.assign({export:!0,source:!1,compiled:!0,editor:!0},null!\x3d\x3d(_a\x3dopt.actions)\x26\x26void 0!\x3d\x3d_a?_a:{}),$jscomp$generator$context.yield(embed(div,\nspec,Object.assign({actions:actions},null!\x3d\x3dopt\x26\x26void 0!\x3d\x3dopt?opt:{})),2);result\x3d$jscomp$generator$context.yieldResult;wrapper.value\x3dresult.view;return $jscomp$generator$context.return(wrapper)})})}var __extends\x3dfunction(){var extendStatics\x3dfunction(d$jscomp$0,b$jscomp$0){extendStatics\x3dObject.setPrototypeOf||{__proto__:[]}instanceof Array\x26\x26function(d,b){d.__proto__\x3db}||function(d,b){for(var p in b)b.hasOwnProperty(p)\x26\x26(d[p]\x3db[p])};return extendStatics(d$jscomp$0,b$jscomp$0)};return function(d,b){function __(){this.constructor\x3d\nd}extendStatics(d,b);d.prototype\x3dnull\x3d\x3d\x3db?Object.create(b):(__.prototype\x3db.prototype,new __)}}(),_hasOwnProperty\x3dObject.prototype.hasOwnProperty,PatchError\x3dfunction(_super){function PatchError(message,name,index,operation,tree){var _newTarget\x3dthis.constructor,_this\x3d_super.call(this,patchErrorMessageFormatter(message,{name:name,index:index,operation:operation,tree:tree}))||this;_this.name\x3dname;_this.index\x3dindex;_this.operation\x3doperation;_this.tree\x3dtree;Object.setPrototypeOf(_this,_newTarget.prototype);\n_this.message\x3dpatchErrorMessageFormatter(message,{name:name,index:index,operation:operation,tree:tree});return _this}__extends(PatchError,_super);return PatchError}(Error),JsonPatchError\x3dPatchError,objOps\x3d{add:function(obj,key,document){obj[key]\x3dthis.value;return{newDocument:document}},remove:function(obj,key,document){var removed\x3dobj[key];delete obj[key];return{newDocument:document,removed:removed}},replace:function(obj,key,document){var removed\x3dobj[key];obj[key]\x3dthis.value;return{newDocument:document,\nremoved:removed}},move:function(obj,key,document){(obj\x3dgetValueByPointer(document,this.path))\x26\x26(obj\x3d_deepClone(obj));key\x3dapplyOperation(document,{op:\x22remove\x22,path:this.from}).removed;applyOperation(document,{op:\x22add\x22,path:this.path,value:key});return{newDocument:document,removed:obj}},copy:function(obj,key,document){obj\x3dgetValueByPointer(document,this.from);applyOperation(document,{op:\x22add\x22,path:this.path,value:_deepClone(obj)});return{newDocument:document}},test:function(obj,key,document){return{newDocument:document,\ntest:_areEquals(obj[key],this.value)}},_get:function(obj,key,document){this.value\x3dobj[key];return{newDocument:document}}},arrOps\x3d{add:function(arr,i,document){isInteger(i)?arr.splice(i,0,this.value):arr[i]\x3dthis.value;return{newDocument:document,index:i}},remove:function(arr,i,document){arr\x3darr.splice(i,1);return{newDocument:document,removed:arr[0]}},replace:function(arr,i,document){var removed\x3darr[i];arr[i]\x3dthis.value;return{newDocument:document,removed:removed}},move:objOps.move,copy:objOps.copy,\ntest:objOps.test,_get:objOps._get},core\x3dObject.freeze({__proto__:null,JsonPatchError:JsonPatchError,deepClone:_deepClone,getValueByPointer:getValueByPointer,applyOperation:applyOperation,applyPatch:applyPatch,applyReducer:function(document,operation,index){var operationResult\x3dapplyOperation(document,operation);if(!1\x3d\x3d\x3doperationResult.test)throw new JsonPatchError(\x22Test operation failed\x22,\x22TEST_OPERATION_FAILED\x22,index,operation,document);return operationResult.newDocument},validator:validator,validate:validate,\n_areEquals:_areEquals}),beforeDict\x3dnew WeakMap,Mirror\x3dfunction(){return function(obj){this.observers\x3dnew Map;this.obj\x3dobj}}(),ObserverInfo\x3dfunction(){return function(callback,observer){this.callback\x3dcallback;this.observer\x3dobserver}}(),duplex\x3dObject.freeze({__proto__:null,unobserve:function(root,observer){observer.unobserve()},observe:function(obj,callback){var mirror\x3dbeforeDict.get(obj);if(mirror){var observerInfo\x3dmirror.observers.get(callback);var observer\x3dobserverInfo\x26\x26observerInfo.observer}else mirror\x3d\nnew Mirror(obj),beforeDict.set(obj,mirror);if(observer)return observer;observer\x3d{};mirror.value\x3d_deepClone(obj);if(callback){observer.callback\x3dcallback;observer.next\x3dnull;var dirtyCheck\x3dfunction(){generate(observer)},fastCheck\x3dfunction(){clearTimeout(observer.next);observer.next\x3dsetTimeout(dirtyCheck)};\x22undefined\x22!\x3d\x3dtypeof window\x26\x26(window.addEventListener(\x22mouseup\x22,fastCheck),window.addEventListener(\x22keyup\x22,fastCheck),window.addEventListener(\x22mousedown\x22,fastCheck),window.addEventListener(\x22keydown\x22,\nfastCheck),window.addEventListener(\x22change\x22,fastCheck))}observer.patches\x3d[];observer.object\x3dobj;observer.unobserve\x3dfunction(){generate(observer);clearTimeout(observer.next);mirror.observers.delete(observer.callback);\x22undefined\x22!\x3d\x3dtypeof window\x26\x26(window.removeEventListener(\x22mouseup\x22,fastCheck),window.removeEventListener(\x22keyup\x22,fastCheck),window.removeEventListener(\x22mousedown\x22,fastCheck),window.removeEventListener(\x22keydown\x22,fastCheck),window.removeEventListener(\x22change\x22,fastCheck))};mirror.observers.set(callback,\nnew ObserverInfo(callback,observer));return observer},generate:generate,compare:function(tree1,tree2,invertible){void 0\x3d\x3d\x3dinvertible\x26\x26(invertible\x3d!1);var patches\x3d[];_generate(tree1,tree2,patches,\x22\x22,invertible);return patches}});Object.assign({},core,duplex,{JsonPatchError:PatchError,deepClone:_deepClone,escapePathComponent:escapePathComponent,unescapePathComponent:unescapePathComponent});var stringOrChar\x3d/(\x22(?:[^\\\\\x22]|\\\\.)*\x22)|[:,]/g,jsonStringifyPrettyCompact\x3dfunction(passedObj,options){options\x3doptions||\n{};var indent\x3dJSON.stringify([1],void 0,void 0\x3d\x3d\x3doptions.indent?2:options.indent).slice(2,-3);var maxLength\x3d\x22\x22\x3d\x3d\x3dindent?Infinity:void 0\x3d\x3d\x3doptions.maxLength?80:options.maxLength;var replacer\x3doptions.replacer;return function _stringify(obj,currentIndent,reserved){obj\x26\x26\x22function\x22\x3d\x3d\x3dtypeof obj.toJSON\x26\x26(obj\x3dobj.toJSON());var string\x3dJSON.stringify(obj,replacer);if(void 0\x3d\x3d\x3dstring)return string;reserved\x3dmaxLength-currentIndent.length-reserved;if(string.length\x3c\x3dreserved){var end\x3dstring.replace(stringOrChar,\nfunction(match,stringLiteral){return stringLiteral||match+\x22 \x22});if(end.length\x3c\x3dreserved)return end}null!\x3dreplacer\x26\x26(obj\x3dJSON.parse(string),replacer\x3dvoid 0);if(\x22object\x22\x3d\x3d\x3dtypeof obj\x26\x26null!\x3d\x3dobj){var nextIndent\x3dcurrentIndent+indent;var items\x3d[];var index\x3d0;if(Array.isArray(obj)){var start\x3d\x22[\x22;end\x3d\x22]\x22;for(reserved\x3dobj.length;index\x3creserved;index++)items.push(_stringify(obj[index],nextIndent,index\x3d\x3d\x3dreserved-1?0:1)||\x22null\x22)}else{start\x3d\x22{\x22;end\x3d\x22}\x22;var keys\x3dObject.keys(obj);for(reserved\x3dkeys.length;index\x3c\nreserved;index++){var key\x3dkeys[index];var keyPart\x3dJSON.stringify(key)+\x22: \x22;key\x3d_stringify(obj[key],nextIndent,keyPart.length+(index\x3d\x3d\x3dreserved-1?0:1));void 0!\x3d\x3dkey\x26\x26items.push(keyPart+key)}}if(0\x3citems.length)return[start,indent+items.join(\x22,\\n\x22+nextIndent),end].join(\x22\\n\x22+currentIndent)}return string}(passedObj,\x22\x22,0)},JSCompiler_object_inline_MAX_SAFE_INTEGER_8125\x3dNumber.MAX_SAFE_INTEGER||9007199254740991,debug_1\x3d\x22object\x22\x3d\x3d\x3dtypeof process\x26\x26process.env\x26\x26process.env.NODE_DEBUG\x26\x26/\\bsemver\\b/i.test(process.env.NODE_DEBUG)?\nfunction(args){for(var $jscomp$restParams\x3d[],$jscomp$restIndex\x3d0;$jscomp$restIndex\x3carguments.length;++$jscomp$restIndex)$jscomp$restParams[$jscomp$restIndex-0]\x3darguments[$jscomp$restIndex];return console.error.apply(console,[\x22SEMVER\x22].concat($jscomp.arrayFromIterable($jscomp$restParams)))}:function(){},re_1\x3dcreateCommonjsModule(function(module,exports){exports\x3dmodule.exports\x3d{};var re\x3dexports.re\x3d[],src\x3dexports.src\x3d[],t\x3dexports.t\x3d{},R\x3d0;module\x3dfunction(name,value,isGlobal){var index\x3dR++;debug_1(index,\nvalue);t[name]\x3dindex;src[index]\x3dvalue;re[index]\x3dnew RegExp(value,isGlobal?\x22g\x22:void 0)};module(\x22NUMERICIDENTIFIER\x22,\x220|[1-9]\\\\d*\x22);module(\x22NUMERICIDENTIFIERLOOSE\x22,\x22[0-9]+\x22);module(\x22NONNUMERICIDENTIFIER\x22,\x22\\\\d*[a-zA-Z-][a-zA-Z0-9-]*\x22);module(\x22MAINVERSION\x22,\x22(\x22+src[t.NUMERICIDENTIFIER]+\x22)\\\\.(\x22+(src[t.NUMERICIDENTIFIER]+\x22)\\\\.(\x22)+(src[t.NUMERICIDENTIFIER]+\x22)\x22));module(\x22MAINVERSIONLOOSE\x22,\x22(\x22+src[t.NUMERICIDENTIFIERLOOSE]+\x22)\\\\.(\x22+(src[t.NUMERICIDENTIFIERLOOSE]+\x22)\\\\.(\x22)+(src[t.NUMERICIDENTIFIERLOOSE]+\x22)\x22));\nmodule(\x22PRERELEASEIDENTIFIER\x22,\x22(?:\x22+src[t.NUMERICIDENTIFIER]+\x22|\x22+src[t.NONNUMERICIDENTIFIER]+\x22)\x22);module(\x22PRERELEASEIDENTIFIERLOOSE\x22,\x22(?:\x22+src[t.NUMERICIDENTIFIERLOOSE]+\x22|\x22+src[t.NONNUMERICIDENTIFIER]+\x22)\x22);module(\x22PRERELEASE\x22,\x22(?:-(\x22+src[t.PRERELEASEIDENTIFIER]+\x22(?:\\\\.\x22+src[t.PRERELEASEIDENTIFIER]+\x22)*))\x22);module(\x22PRERELEASELOOSE\x22,\x22(?:-?(\x22+src[t.PRERELEASEIDENTIFIERLOOSE]+\x22(?:\\\\.\x22+src[t.PRERELEASEIDENTIFIERLOOSE]+\x22)*))\x22);module(\x22BUILDIDENTIFIER\x22,\x22[0-9A-Za-z-]+\x22);module(\x22BUILD\x22,\x22(?:\\\\+(\x22+src[t.BUILDIDENTIFIER]+\n\x22(?:\\\\.\x22+src[t.BUILDIDENTIFIER]+\x22)*))\x22);module(\x22FULLPLAIN\x22,\x22v?\x22+src[t.MAINVERSION]+src[t.PRERELEASE]+\x22?\x22+src[t.BUILD]+\x22?\x22);module(\x22FULL\x22,\x22^\x22+src[t.FULLPLAIN]+\x22$\x22);module(\x22LOOSEPLAIN\x22,\x22[v\\x3d\\\\s]*\x22+src[t.MAINVERSIONLOOSE]+src[t.PRERELEASELOOSE]+\x22?\x22+src[t.BUILD]+\x22?\x22);module(\x22LOOSE\x22,\x22^\x22+src[t.LOOSEPLAIN]+\x22$\x22);module(\x22GTLT\x22,\x22((?:\\x3c|\\x3e)?\\x3d?)\x22);module(\x22XRANGEIDENTIFIERLOOSE\x22,src[t.NUMERICIDENTIFIERLOOSE]+\x22|x|X|\\\\*\x22);module(\x22XRANGEIDENTIFIER\x22,src[t.NUMERICIDENTIFIER]+\x22|x|X|\\\\*\x22);module(\x22XRANGEPLAIN\x22,\n\x22[v\\x3d\\\\s]*(\x22+src[t.XRANGEIDENTIFIER]+\x22)(?:\\\\.(\x22+(src[t.XRANGEIDENTIFIER]+\x22)(?:\\\\.(\x22)+(src[t.XRANGEIDENTIFIER]+\x22)(?:\x22)+(src[t.PRERELEASE]+\x22)?\x22+src[t.BUILD]+\x22?)?)?\x22));module(\x22XRANGEPLAINLOOSE\x22,\x22[v\\x3d\\\\s]*(\x22+src[t.XRANGEIDENTIFIERLOOSE]+\x22)(?:\\\\.(\x22+(src[t.XRANGEIDENTIFIERLOOSE]+\x22)(?:\\\\.(\x22)+(src[t.XRANGEIDENTIFIERLOOSE]+\x22)(?:\x22)+(src[t.PRERELEASELOOSE]+\x22)?\x22+src[t.BUILD]+\x22?)?)?\x22));module(\x22XRANGE\x22,\x22^\x22+src[t.GTLT]+\x22\\\\s*\x22+src[t.XRANGEPLAIN]+\x22$\x22);module(\x22XRANGELOOSE\x22,\x22^\x22+src[t.GTLT]+\x22\\\\s*\x22+src[t.XRANGEPLAINLOOSE]+\n\x22$\x22);module(\x22COERCE\x22,\x22(^|[^\\\\d])(\\\\d{1,16})(?:\\\\.(\\\\d{1,16}))?(?:\\\\.(\\\\d{1,16}))?(?:$|[^\\\\d])\x22);module(\x22COERCERTL\x22,src[t.COERCE],!0);module(\x22LONETILDE\x22,\x22(?:~\\x3e?)\x22);module(\x22TILDETRIM\x22,\x22(\\\\s*)\x22+src[t.LONETILDE]+\x22\\\\s+\x22,!0);exports.tildeTrimReplace\x3d\x22$1~\x22;module(\x22TILDE\x22,\x22^\x22+src[t.LONETILDE]+src[t.XRANGEPLAIN]+\x22$\x22);module(\x22TILDELOOSE\x22,\x22^\x22+src[t.LONETILDE]+src[t.XRANGEPLAINLOOSE]+\x22$\x22);module(\x22LONECARET\x22,\x22(?:\\\\^)\x22);module(\x22CARETTRIM\x22,\x22(\\\\s*)\x22+src[t.LONECARET]+\x22\\\\s+\x22,!0);exports.caretTrimReplace\x3d\x22$1^\x22;module(\x22CARET\x22,\n\x22^\x22+src[t.LONECARET]+src[t.XRANGEPLAIN]+\x22$\x22);module(\x22CARETLOOSE\x22,\x22^\x22+src[t.LONECARET]+src[t.XRANGEPLAINLOOSE]+\x22$\x22);module(\x22COMPARATORLOOSE\x22,\x22^\x22+src[t.GTLT]+\x22\\\\s*(\x22+src[t.LOOSEPLAIN]+\x22)$|^$\x22);module(\x22COMPARATOR\x22,\x22^\x22+src[t.GTLT]+\x22\\\\s*(\x22+src[t.FULLPLAIN]+\x22)$|^$\x22);module(\x22COMPARATORTRIM\x22,\x22(\\\\s*)\x22+src[t.GTLT]+\x22\\\\s*(\x22+src[t.LOOSEPLAIN]+\x22|\x22+src[t.XRANGEPLAIN]+\x22)\x22,!0);exports.comparatorTrimReplace\x3d\x22$1$2$3\x22;module(\x22HYPHENRANGE\x22,\x22^\\\\s*(\x22+src[t.XRANGEPLAIN]+\x22)\\\\s+-\\\\s+(\x22+(src[t.XRANGEPLAIN]+\x22)\\\\s*$\x22));module(\x22HYPHENRANGELOOSE\x22,\n\x22^\\\\s*(\x22+src[t.XRANGEPLAINLOOSE]+\x22)\\\\s+-\\\\s+(\x22+(src[t.XRANGEPLAINLOOSE]+\x22)\\\\s*$\x22));module(\x22STAR\x22,\x22(\\x3c|\\x3e)?\\x3d?\\\\s*\\\\*\x22);module(\x22GTE0\x22,\x22^\\\\s*\\x3e\\x3d\\\\s*0.0.0\\\\s*$\x22);module(\x22GTE0PRE\x22,\x22^\\\\s*\\x3e\\x3d\\\\s*0.0.0-0\\\\s*$\x22)}),numeric\x3d/^[0-9]+$/,compareIdentifiers\x3dfunction(a,b){var anum\x3dnumeric.test(a),bnum\x3dnumeric.test(b);anum\x26\x26bnum\x26\x26(a\x3d+a,b\x3d+b);return a\x3d\x3d\x3db?0:anum\x26\x26!bnum?-1:bnum\x26\x26!anum?1:a\x3cb?-1:1},re$jscomp$0\x3dre_1.re,t$jscomp$0\x3dre_1.t,SemVer\x3dfunction(version,options){options\x26\x26\x22object\x22\x3d\x3d\x3dtypeof options||\n(options\x3d{loose:!!options,includePrerelease:!1});if(version instanceof SemVer){if(version.loose\x3d\x3d\x3d!!options.loose\x26\x26version.includePrerelease\x3d\x3d\x3d!!options.includePrerelease)return version;version\x3dversion.version}else if(\x22string\x22!\x3d\x3dtypeof version)throw new TypeError(\x22Invalid Version: \x22+version);if(256\x3cversion.length)throw new TypeError(\x22version is longer than 256 characters\x22);debug_1(\x22SemVer\x22,version,options);this.options\x3doptions;this.loose\x3d!!options.loose;this.includePrerelease\x3d!!options.includePrerelease;\noptions\x3dversion.trim().match(options.loose?re$jscomp$0[t$jscomp$0.LOOSE]:re$jscomp$0[t$jscomp$0.FULL]);if(!options)throw new TypeError(\x22Invalid Version: \x22+version);this.raw\x3dversion;this.major\x3d+options[1];this.minor\x3d+options[2];this.patch\x3d+options[3];if(this.major\x3eJSCompiler_object_inline_MAX_SAFE_INTEGER_8125||0\x3ethis.major)throw new TypeError(\x22Invalid major version\x22);if(this.minor\x3eJSCompiler_object_inline_MAX_SAFE_INTEGER_8125||0\x3ethis.minor)throw new TypeError(\x22Invalid minor version\x22);if(this.patch\x3e\nJSCompiler_object_inline_MAX_SAFE_INTEGER_8125||0\x3ethis.patch)throw new TypeError(\x22Invalid patch version\x22);this.prerelease\x3doptions[4]?options[4].split(\x22.\x22).map(function(id){if(/^[0-9]+$/.test(id)){var num\x3d+id;if(0\x3c\x3dnum\x26\x26num\x3cJSCompiler_object_inline_MAX_SAFE_INTEGER_8125)return num}return id}):[];this.build\x3doptions[5]?options[5].split(\x22.\x22):[];this.format()};SemVer.prototype.format\x3dfunction(){this.version\x3dthis.major+\x22.\x22+this.minor+\x22.\x22+this.patch;this.prerelease.length\x26\x26(this.version+\x3d\x22-\x22+this.prerelease.join(\x22.\x22));\nreturn this.version};SemVer.prototype.toString\x3dfunction(){return this.version};SemVer.prototype.compare\x3dfunction(other){debug_1(\x22SemVer.compare\x22,this.version,this.options,other);if(!(other instanceof SemVer)){if(\x22string\x22\x3d\x3d\x3dtypeof other\x26\x26other\x3d\x3d\x3dthis.version)return 0;other\x3dnew SemVer(other,this.options)}return other.version\x3d\x3d\x3dthis.version?0:this.compareMain(other)||this.comparePre(other)};SemVer.prototype.compareMain\x3dfunction(other){other instanceof SemVer||(other\x3dnew SemVer(other,this.options));return compareIdentifiers(this.major,\nother.major)||compareIdentifiers(this.minor,other.minor)||compareIdentifiers(this.patch,other.patch)};SemVer.prototype.comparePre\x3dfunction(other){other instanceof SemVer||(other\x3dnew SemVer(other,this.options));if(this.prerelease.length\x26\x26!other.prerelease.length)return-1;if(!this.prerelease.length\x26\x26other.prerelease.length)return 1;if(!this.prerelease.length\x26\x26!other.prerelease.length)return 0;var i\x3d0;do{var a\x3dthis.prerelease[i],b\x3dother.prerelease[i];debug_1(\x22prerelease compare\x22,i,a,b);if(void 0\x3d\x3d\x3da\x26\x26\nvoid 0\x3d\x3d\x3db)return 0;if(void 0\x3d\x3d\x3db)return 1;if(void 0\x3d\x3d\x3da)return-1;if(a!\x3d\x3db)return compareIdentifiers(a,b)}while(++i)};SemVer.prototype.compareBuild\x3dfunction(other){other instanceof SemVer||(other\x3dnew SemVer(other,this.options));var i\x3d0;do{var a\x3dthis.build[i],b\x3dother.build[i];debug_1(\x22prerelease compare\x22,i,a,b);if(void 0\x3d\x3d\x3da\x26\x26void 0\x3d\x3d\x3db)return 0;if(void 0\x3d\x3d\x3db)return 1;if(void 0\x3d\x3d\x3da)return-1;if(a!\x3d\x3db)return compareIdentifiers(a,b)}while(++i)};SemVer.prototype.inc\x3dfunction(release,identifier){switch(release){case \x22premajor\x22:this.minor\x3d\nthis.patch\x3dthis.prerelease.length\x3d0;this.major++;this.inc(\x22pre\x22,identifier);break;case \x22preminor\x22:this.patch\x3dthis.prerelease.length\x3d0;this.minor++;this.inc(\x22pre\x22,identifier);break;case \x22prepatch\x22:this.prerelease.length\x3d0;this.inc(\x22patch\x22,identifier);this.inc(\x22pre\x22,identifier);break;case \x22prerelease\x22:0\x3d\x3d\x3dthis.prerelease.length\x26\x26this.inc(\x22patch\x22,identifier);this.inc(\x22pre\x22,identifier);break;case \x22major\x22:0\x3d\x3d\x3dthis.minor\x26\x260\x3d\x3d\x3dthis.patch\x26\x260!\x3d\x3dthis.prerelease.length||this.major++;this.patch\x3dthis.minor\x3d0;\nthis.prerelease\x3d[];break;case \x22minor\x22:0\x3d\x3d\x3dthis.patch\x26\x260!\x3d\x3dthis.prerelease.length||this.minor++;this.patch\x3d0;this.prerelease\x3d[];break;case \x22patch\x22:0\x3d\x3d\x3dthis.prerelease.length\x26\x26this.patch++;this.prerelease\x3d[];break;case \x22pre\x22:if(0\x3d\x3d\x3dthis.prerelease.length)this.prerelease\x3d[0];else{for(release\x3dthis.prerelease.length;0\x3c\x3d--release;)\x22number\x22\x3d\x3d\x3dtypeof this.prerelease[release]\x26\x26(this.prerelease[release]++,release\x3d-2);-1\x3d\x3d\x3drelease\x26\x26this.prerelease.push(0)}identifier\x26\x26(this.prerelease[0]\x3d\x3d\x3didentifier?isNaN(this.prerelease[1])\x26\x26\n(this.prerelease\x3d[identifier,0]):this.prerelease\x3d[identifier,0]);break;default:throw Error(\x22invalid increment argument: \x22+release);}this.format();this.raw\x3dthis.version;return this};var semver\x3dSemVer,re$1\x3dre_1.re,t$1\x3dre_1.t,parse_1\x3dfunction(version,options){options\x26\x26\x22object\x22\x3d\x3d\x3dtypeof options||(options\x3d{loose:!!options,includePrerelease:!1});if(version instanceof semver)return version;if(\x22string\x22!\x3d\x3dtypeof version||256\x3cversion.length||!(options.loose?re$1[t$1.LOOSE]:re$1[t$1.FULL]).test(version))return null;\ntry{return new semver(version,options)}catch(er){return null}},compare_1\x3dfunction(a,b,loose){return(new semver(a,loose)).compare(new semver(b,loose))},eq_1\x3dfunction(a,b,loose){return 0\x3d\x3d\x3dcompare_1(a,b,loose)},compareBuild_1\x3dfunction(a,b,loose){a\x3dnew semver(a,loose);b\x3dnew semver(b,loose);return a.compare(b)||a.compareBuild(b)},gt_1\x3dfunction(a,b,loose){return 0\x3ccompare_1(a,b,loose)},lt_1\x3dfunction(a,b,loose){return 0\x3ecompare_1(a,b,loose)},neq_1\x3dfunction(a,b,loose){return 0!\x3d\x3dcompare_1(a,b,loose)},gte_1\x3d\nfunction(a,b,loose){return 0\x3c\x3dcompare_1(a,b,loose)},lte_1\x3dfunction(a,b,loose){return 0\x3e\x3dcompare_1(a,b,loose)},cmp_1\x3dfunction(a,op,b,loose){switch(op){case \x22\\x3d\\x3d\\x3d\x22:return\x22object\x22\x3d\x3d\x3dtypeof a\x26\x26(a\x3da.version),\x22object\x22\x3d\x3d\x3dtypeof b\x26\x26(b\x3db.version),a\x3d\x3d\x3db;case \x22!\\x3d\\x3d\x22:return\x22object\x22\x3d\x3d\x3dtypeof a\x26\x26(a\x3da.version),\x22object\x22\x3d\x3d\x3dtypeof b\x26\x26(b\x3db.version),a!\x3d\x3db;case \x22\x22:case \x22\\x3d\x22:case \x22\\x3d\\x3d\x22:return eq_1(a,b,loose);case \x22!\\x3d\x22:return neq_1(a,b,loose);case \x22\\x3e\x22:return gt_1(a,b,loose);case \x22\\x3e\\x3d\x22:return gte_1(a,\nb,loose);case \x22\\x3c\x22:return lt_1(a,b,loose);case \x22\\x3c\\x3d\x22:return lte_1(a,b,loose);default:throw new TypeError(\x22Invalid operator: \x22+op);}},re$2\x3dre_1.re,t$2\x3dre_1.t,Range\x3dfunction(range$jscomp$0,options){var $jscomp$this\x3dthis;options\x26\x26\x22object\x22\x3d\x3d\x3dtypeof options||(options\x3d{loose:!!options,includePrerelease:!1});if(range$jscomp$0 instanceof Range)return range$jscomp$0.loose\x3d\x3d\x3d!!options.loose\x26\x26range$jscomp$0.includePrerelease\x3d\x3d\x3d!!options.includePrerelease?range$jscomp$0:new Range(range$jscomp$0.raw,options);\nif(range$jscomp$0 instanceof comparator$jscomp$0)return this.raw\x3drange$jscomp$0.value,this.set\x3d[[range$jscomp$0]],this.format(),this;this.options\x3doptions;this.loose\x3d!!options.loose;this.includePrerelease\x3d!!options.includePrerelease;this.raw\x3drange$jscomp$0;this.set\x3drange$jscomp$0.split(/\\s*\\|\\|\\s*/).map(function(range){return $jscomp$this.parseRange(range.trim())}).filter(function(c){return c.length});if(!this.set.length)throw new TypeError(\x22Invalid SemVer Range: \x22+range$jscomp$0);this.format()};Range.prototype.format\x3d\nfunction(){return this.range\x3dthis.set.map(function(comps){return comps.join(\x22 \x22).trim()}).join(\x22||\x22).trim()};Range.prototype.toString\x3dfunction(){return this.range};Range.prototype.parseRange\x3dfunction(range){var $jscomp$this\x3dthis,loose\x3dthis.options.loose;range\x3drange.trim();range\x3drange.replace(loose?re$3[t$3.HYPHENRANGELOOSE]:re$3[t$3.HYPHENRANGE],hyphenReplace(this.options.includePrerelease));debug_1(\x22hyphen replace\x22,range);range\x3drange.replace(re$3[t$3.COMPARATORTRIM],comparatorTrimReplace);debug_1(\x22comparator trim\x22,\nrange,re$3[t$3.COMPARATORTRIM]);range\x3drange.replace(re$3[t$3.TILDETRIM],tildeTrimReplace);range\x3drange.replace(re$3[t$3.CARETTRIM],caretTrimReplace);range\x3drange.split(/\\s+/).join(\x22 \x22);var compRe\x3dloose?re$3[t$3.COMPARATORLOOSE]:re$3[t$3.COMPARATOR];return range.split(\x22 \x22).map(function(comp){var comp$jscomp$0\x3dcomp;comp\x3d$jscomp$this.options;debug_1(\x22comp\x22,comp$jscomp$0,comp);comp$jscomp$0\x3dreplaceCarets(comp$jscomp$0,comp);debug_1(\x22caret\x22,comp$jscomp$0);comp$jscomp$0\x3dreplaceTildes(comp$jscomp$0,comp);\ndebug_1(\x22tildes\x22,comp$jscomp$0);comp$jscomp$0\x3dreplaceXRanges(comp$jscomp$0,comp);debug_1(\x22xrange\x22,comp$jscomp$0);debug_1(\x22replaceStars\x22,comp$jscomp$0,comp);comp$jscomp$0\x3dcomp$jscomp$0.trim().replace(re$3[t$3.STAR],\x22\x22);debug_1(\x22stars\x22,comp$jscomp$0);return comp$jscomp$0}).join(\x22 \x22).split(/\\s+/).map(function(comp){var options\x3d$jscomp$this.options;debug_1(\x22replaceGTE0\x22,comp,options);return comp.trim().replace(re$3[options.includePrerelease?t$3.GTE0PRE:t$3.GTE0],\x22\x22)}).filter(this.options.loose?function(comp){return!!comp.match(compRe)}:\nfunction(){return!0}).map(function(comp){return new comparator$jscomp$0(comp,$jscomp$this.options)})};Range.prototype.intersects\x3dfunction(range,options){if(!(range instanceof Range))throw new TypeError(\x22a Range is required\x22);return this.set.some(function(thisComparators){return isSatisfiable(thisComparators,options)\x26\x26range.set.some(function(rangeComparators){return isSatisfiable(rangeComparators,options)\x26\x26thisComparators.every(function(thisComparator){return rangeComparators.every(function(rangeComparator){return thisComparator.intersects(rangeComparator,\noptions)})})})})};Range.prototype.test\x3dfunction(version$jscomp$0){if(!version$jscomp$0)return!1;if(\x22string\x22\x3d\x3d\x3dtypeof version$jscomp$0)try{version$jscomp$0\x3dnew semver(version$jscomp$0,this.options)}catch(er){return!1}for(var i\x3d0;i\x3cthis.set.length;i++){a:{var JSCompiler_inline_result\x3dthis.set[i];for(var version\x3dversion$jscomp$0,options\x3dthis.options,i$jscomp$0\x3d0;i$jscomp$0\x3cJSCompiler_inline_result.length;i$jscomp$0++)if(!JSCompiler_inline_result[i$jscomp$0].test(version)){JSCompiler_inline_result\x3d!1;\nbreak a}if(version.prerelease.length\x26\x26!options.includePrerelease){for(options\x3d0;options\x3cJSCompiler_inline_result.length;options++)if(debug_1(JSCompiler_inline_result[options].semver),JSCompiler_inline_result[options].semver!\x3d\x3dcomparator$jscomp$0.ANY\x26\x260\x3cJSCompiler_inline_result[options].semver.prerelease.length\x26\x26(i$jscomp$0\x3dJSCompiler_inline_result[options].semver,i$jscomp$0.major\x3d\x3d\x3dversion.major\x26\x26i$jscomp$0.minor\x3d\x3d\x3dversion.minor\x26\x26i$jscomp$0.patch\x3d\x3d\x3dversion.patch)){JSCompiler_inline_result\x3d!0;break a}JSCompiler_inline_result\x3d\n!1}else JSCompiler_inline_result\x3d!0}if(JSCompiler_inline_result)return!0}return!1};var range$jscomp$1\x3dRange,re$3\x3dre_1.re,t$3\x3dre_1.t,comparatorTrimReplace\x3dre_1.comparatorTrimReplace,tildeTrimReplace\x3dre_1.tildeTrimReplace,caretTrimReplace\x3dre_1.caretTrimReplace,isSatisfiable\x3dfunction(comparators,options){var result\x3d!0;comparators\x3dcomparators.slice();for(var testComparator\x3dcomparators.pop();result\x26\x26comparators.length;)result\x3dcomparators.every(function(otherComparator){return testComparator.intersects(otherComparator,\noptions)}),testComparator\x3dcomparators.pop();return result},isX\x3dfunction(id){return!id||\x22x\x22\x3d\x3d\x3did.toLowerCase()||\x22*\x22\x3d\x3d\x3did},replaceTildes\x3dfunction(comp$jscomp$0,options){return comp$jscomp$0.trim().split(/\\s+/).map(function(comp){return replaceTilde(comp,options)}).join(\x22 \x22)},replaceTilde\x3dfunction(comp,options){return comp.replace(options.loose?re$3[t$3.TILDELOOSE]:re$3[t$3.TILDE],function(_,M,m,p,pr){debug_1(\x22tilde\x22,comp,_,M,m,p,pr);isX(M)?_\x3d\x22\x22:isX(m)?_\x3d\x22\\x3e\\x3d\x22+M+\x22.0.0 \\x3c\x22+(+M+1)+\x22.0.0-0\x22:isX(p)?\n_\x3d\x22\\x3e\\x3d\x22+M+\x22.\x22+m+\x22.0 \\x3c\x22+M+\x22.\x22+(+m+1)+\x22.0-0\x22:pr?(debug_1(\x22replaceTilde pr\x22,pr),_\x3d\x22\\x3e\\x3d\x22+M+\x22.\x22+m+\x22.\x22+p+\x22-\x22+pr+\x22 \\x3c\x22+M+\x22.\x22+(+m+1)+\x22.0-0\x22):_\x3d\x22\\x3e\\x3d\x22+M+\x22.\x22+m+\x22.\x22+p+\x22 \\x3c\x22+M+\x22.\x22+(+m+1)+\x22.0-0\x22;debug_1(\x22tilde return\x22,_);return _})},replaceCarets\x3dfunction(comp$jscomp$0,options){return comp$jscomp$0.trim().split(/\\s+/).map(function(comp){return replaceCaret(comp,options)}).join(\x22 \x22)},replaceCaret\x3dfunction(comp,options){debug_1(\x22caret\x22,comp,options);var z\x3doptions.includePrerelease?\x22-0\x22:\x22\x22;return comp.replace(options.loose?\nre$3[t$3.CARETLOOSE]:re$3[t$3.CARET],function(_,M,m,p,pr){debug_1(\x22caret\x22,comp,_,M,m,p,pr);isX(M)?_\x3d\x22\x22:isX(m)?_\x3d\x22\\x3e\\x3d\x22+M+\x22.0.0\x22+z+\x22 \\x3c\x22+(+M+1)+\x22.0.0-0\x22:isX(p)?_\x3d\x220\x22\x3d\x3d\x3dM?\x22\\x3e\\x3d\x22+M+\x22.\x22+m+\x22.0\x22+z+\x22 \\x3c\x22+M+\x22.\x22+(+m+1)+\x22.0-0\x22:\x22\\x3e\\x3d\x22+M+\x22.\x22+m+\x22.0\x22+z+\x22 \\x3c\x22+(+M+1)+\x22.0.0-0\x22:pr?(debug_1(\x22replaceCaret pr\x22,pr),_\x3d\x220\x22\x3d\x3d\x3dM?\x220\x22\x3d\x3d\x3dm?\x22\\x3e\\x3d\x22+M+\x22.\x22+m+\x22.\x22+p+\x22-\x22+pr+\x22 \\x3c\x22+M+\x22.\x22+m+\x22.\x22+(+p+1)+\x22-0\x22:\x22\\x3e\\x3d\x22+M+\x22.\x22+m+\x22.\x22+p+\x22-\x22+pr+\x22 \\x3c\x22+M+\x22.\x22+(+m+1)+\x22.0-0\x22:\x22\\x3e\\x3d\x22+M+\x22.\x22+m+\x22.\x22+p+\x22-\x22+pr+\x22 \\x3c\x22+(+M+1)+\n\x22.0.0-0\x22):(debug_1(\x22no pr\x22),_\x3d\x220\x22\x3d\x3d\x3dM?\x220\x22\x3d\x3d\x3dm?\x22\\x3e\\x3d\x22+M+\x22.\x22+m+\x22.\x22+p+z+\x22 \\x3c\x22+M+\x22.\x22+m+\x22.\x22+(+p+1)+\x22-0\x22:\x22\\x3e\\x3d\x22+M+\x22.\x22+m+\x22.\x22+p+z+\x22 \\x3c\x22+M+\x22.\x22+(+m+1)+\x22.0-0\x22:\x22\\x3e\\x3d\x22+M+\x22.\x22+m+\x22.\x22+p+\x22 \\x3c\x22+(+M+1)+\x22.0.0-0\x22);debug_1(\x22caret return\x22,_);return _})},replaceXRanges\x3dfunction(comp$jscomp$0,options){debug_1(\x22replaceXRanges\x22,comp$jscomp$0,options);return comp$jscomp$0.split(/\\s+/).map(function(comp){return replaceXRange(comp,options)}).join(\x22 \x22)},replaceXRange\x3dfunction(comp,options){comp\x3dcomp.trim();return comp.replace(options.loose?\nre$3[t$3.XRANGELOOSE]:re$3[t$3.XRANGE],function(ret,gtlt,M,m,p,pr){debug_1(\x22xRange\x22,comp,ret,gtlt,M,m,p,pr);var xM\x3disX(M),xm\x3dxM||isX(m);p\x3dxm||isX(p);\x22\\x3d\x22\x3d\x3d\x3dgtlt\x26\x26p\x26\x26(gtlt\x3d\x22\x22);pr\x3doptions.includePrerelease?\x22-0\x22:\x22\x22;xM?ret\x3d\x22\\x3e\x22\x3d\x3d\x3dgtlt||\x22\\x3c\x22\x3d\x3d\x3dgtlt?\x22\\x3c0.0.0-0\x22:\x22*\x22:gtlt\x26\x26p?(xm\x26\x26(m\x3d0),p\x3d0,\x22\\x3e\x22\x3d\x3d\x3dgtlt?(gtlt\x3d\x22\\x3e\\x3d\x22,xm?(M\x3d+M+1,m\x3d0):m\x3d+m+1,p\x3d0):\x22\\x3c\\x3d\x22\x3d\x3d\x3dgtlt\x26\x26(gtlt\x3d\x22\\x3c\x22,xm?M\x3d+M+1:m\x3d+m+1),\x22\\x3c\x22\x3d\x3d\x3dgtlt\x26\x26(pr\x3d\x22-0\x22),ret\x3dgtlt+M+\x22.\x22+m+\x22.\x22+p+pr):xm?ret\x3d\x22\\x3e\\x3d\x22+M+\x22.0.0\x22+pr+\x22 \\x3c\x22+(+M+1)+\x22.0.0-0\x22:\np\x26\x26(ret\x3d\x22\\x3e\\x3d\x22+M+\x22.\x22+m+\x22.0\x22+pr+\x22 \\x3c\x22+M+\x22.\x22+(+m+1)+\x22.0-0\x22);debug_1(\x22xRange return\x22,ret);return ret})},hyphenReplace\x3dfunction(incPr){return function($0,from,fM,fm,fp,fpr,fb,to,tM,tm,tp,tpr,tb){from\x3disX(fM)?\x22\x22:isX(fm)?\x22\\x3e\\x3d\x22+fM+\x22.0.0\x22+(incPr?\x22-0\x22:\x22\x22):isX(fp)?\x22\\x3e\\x3d\x22+fM+\x22.\x22+fm+\x22.0\x22+(incPr?\x22-0\x22:\x22\x22):fpr?\x22\\x3e\\x3d\x22+from:\x22\\x3e\\x3d\x22+from+(incPr?\x22-0\x22:\x22\x22);to\x3disX(tM)?\x22\x22:isX(tm)?\x22\\x3c\x22+(+tM+1)+\x22.0.0-0\x22:isX(tp)?\x22\\x3c\x22+tM+\x22.\x22+(+tm+1)+\x22.0-0\x22:tpr?\x22\\x3c\\x3d\x22+tM+\x22.\x22+tm+\x22.\x22+tp+\x22-\x22+tpr:incPr?\x22\\x3c\x22+tM+\x22.\x22+\ntm+\x22.\x22+(+tp+1)+\x22-0\x22:\x22\\x3c\\x3d\x22+to;return(from+\x22 \x22+to).trim()}};$jscomp.initSymbol();var ANY\x3dSymbol(\x22SemVer ANY\x22),Comparator\x3dfunction(comp,options){options\x26\x26\x22object\x22\x3d\x3d\x3dtypeof options||(options\x3d{loose:!!options,includePrerelease:!1});if(comp instanceof Comparator){if(comp.loose\x3d\x3d\x3d!!options.loose)return comp;comp\x3dcomp.value}debug_1(\x22comparator\x22,comp,options);this.options\x3doptions;this.loose\x3d!!options.loose;this.parse(comp);this.value\x3dthis.semver\x3d\x3d\x3dANY?\x22\x22:this.operator+this.semver.version;debug_1(\x22comp\x22,\nthis)};Comparator.prototype.parse\x3dfunction(comp){var m\x3dcomp.match(this.options.loose?re$4[t$4.COMPARATORLOOSE]:re$4[t$4.COMPARATOR]);if(!m)throw new TypeError(\x22Invalid comparator: \x22+comp);this.operator\x3dvoid 0!\x3d\x3dm[1]?m[1]:\x22\x22;\x22\\x3d\x22\x3d\x3d\x3dthis.operator\x26\x26(this.operator\x3d\x22\x22);this.semver\x3dm[2]?new semver(m[2],this.options.loose):ANY};Comparator.prototype.toString\x3dfunction(){return this.value};Comparator.prototype.test\x3dfunction(version){debug_1(\x22Comparator.test\x22,version,this.options.loose);if(this.semver\x3d\x3d\x3dANY||\nversion\x3d\x3d\x3dANY)return!0;if(\x22string\x22\x3d\x3d\x3dtypeof version)try{version\x3dnew semver(version,this.options)}catch(er){return!1}return cmp_1(version,this.operator,this.semver,this.options)};Comparator.prototype.intersects\x3dfunction(comp,options){if(!(comp instanceof Comparator))throw new TypeError(\x22a Comparator is required\x22);options\x26\x26\x22object\x22\x3d\x3d\x3dtypeof options||(options\x3d{loose:!!options,includePrerelease:!1});if(\x22\x22\x3d\x3d\x3dthis.operator)return\x22\x22\x3d\x3d\x3dthis.value?!0:(new range$jscomp$1(comp.value,options)).test(this.value);\nif(\x22\x22\x3d\x3d\x3dcomp.operator)return\x22\x22\x3d\x3d\x3dcomp.value?!0:(new range$jscomp$1(this.value,options)).test(comp.semver);var sameDirectionIncreasing\x3d(\x22\\x3e\\x3d\x22\x3d\x3d\x3dthis.operator||\x22\\x3e\x22\x3d\x3d\x3dthis.operator)\x26\x26(\x22\\x3e\\x3d\x22\x3d\x3d\x3dcomp.operator||\x22\\x3e\x22\x3d\x3d\x3dcomp.operator),sameDirectionDecreasing\x3d(\x22\\x3c\\x3d\x22\x3d\x3d\x3dthis.operator||\x22\\x3c\x22\x3d\x3d\x3dthis.operator)\x26\x26(\x22\\x3c\\x3d\x22\x3d\x3d\x3dcomp.operator||\x22\\x3c\x22\x3d\x3d\x3dcomp.operator),sameSemVer\x3dthis.semver.version\x3d\x3d\x3dcomp.semver.version,differentDirectionsInclusive\x3d(\x22\\x3e\\x3d\x22\x3d\x3d\x3dthis.operator||\x22\\x3c\\x3d\x22\x3d\x3d\x3dthis.operator)\x26\x26\n(\x22\\x3e\\x3d\x22\x3d\x3d\x3dcomp.operator||\x22\\x3c\\x3d\x22\x3d\x3d\x3dcomp.operator),oppositeDirectionsLessThan\x3dcmp_1(this.semver,\x22\\x3c\x22,comp.semver,options)\x26\x26(\x22\\x3e\\x3d\x22\x3d\x3d\x3dthis.operator||\x22\\x3e\x22\x3d\x3d\x3dthis.operator)\x26\x26(\x22\\x3c\\x3d\x22\x3d\x3d\x3dcomp.operator||\x22\\x3c\x22\x3d\x3d\x3dcomp.operator);comp\x3dcmp_1(this.semver,\x22\\x3e\x22,comp.semver,options)\x26\x26(\x22\\x3c\\x3d\x22\x3d\x3d\x3dthis.operator||\x22\\x3c\x22\x3d\x3d\x3dthis.operator)\x26\x26(\x22\\x3e\\x3d\x22\x3d\x3d\x3dcomp.operator||\x22\\x3e\x22\x3d\x3d\x3dcomp.operator);return sameDirectionIncreasing||sameDirectionDecreasing||sameSemVer\x26\x26differentDirectionsInclusive||oppositeDirectionsLessThan||\ncomp};$jscomp.global.Object.defineProperties(Comparator,{ANY:{configurable:!0,enumerable:!0,get:function(){return ANY}}});var comparator$jscomp$0\x3dComparator,re$4\x3dre_1.re,t$4\x3dre_1.t,satisfies_1\x3dfunction(version,range$1,options){try{range$1\x3dnew range$jscomp$1(range$1,options)}catch(er){return!1}return range$1.test(version)},ANY$1\x3dcomparator$jscomp$0.ANY,outside_1\x3dfunction(version,range$1,hilo,options){version\x3dnew semver(version,options);range$1\x3dnew range$jscomp$1(range$1,options);switch(hilo){case \x22\\x3e\x22:var gtfn\x3d\ngt_1;hilo\x3dlte_1;var ltfn\x3dlt_1;var comp\x3d\x22\\x3e\x22;var ecomp\x3d\x22\\x3e\\x3d\x22;break;case \x22\\x3c\x22:gtfn\x3dlt_1;hilo\x3dgte_1;ltfn\x3dgt_1;comp\x3d\x22\\x3c\x22;ecomp\x3d\x22\\x3c\\x3d\x22;break;default:throw new TypeError(\x27Must provide a hilo val of \x22\\x3c\x22 or \x22\\x3e\x22\x27);}if(satisfies_1(version,range$1,options))return!1;for(var $jscomp$loop$696\x3d{},i\x3d0;i\x3crange$1.set.length;$jscomp$loop$696\x3d{$jscomp$loop$prop$high$697:$jscomp$loop$696.$jscomp$loop$prop$high$697,$jscomp$loop$prop$low$698:$jscomp$loop$696.$jscomp$loop$prop$low$698},++i){var comparators\x3d\nrange$1.set[i];$jscomp$loop$696.$jscomp$loop$prop$high$697\x3dnull;$jscomp$loop$696.$jscomp$loop$prop$low$698\x3dnull;comparators.forEach(function($jscomp$loop$696){return function(comparator$1){comparator$1.semver\x3d\x3d\x3dANY$1\x26\x26(comparator$1\x3dnew comparator$jscomp$0(\x22\\x3e\\x3d0.0.0\x22));$jscomp$loop$696.$jscomp$loop$prop$high$697\x3d$jscomp$loop$696.$jscomp$loop$prop$high$697||comparator$1;$jscomp$loop$696.$jscomp$loop$prop$low$698\x3d$jscomp$loop$696.$jscomp$loop$prop$low$698||comparator$1;gtfn(comparator$1.semver,\n$jscomp$loop$696.$jscomp$loop$prop$high$697.semver,options)?$jscomp$loop$696.$jscomp$loop$prop$high$697\x3dcomparator$1:ltfn(comparator$1.semver,$jscomp$loop$696.$jscomp$loop$prop$low$698.semver,options)\x26\x26($jscomp$loop$696.$jscomp$loop$prop$low$698\x3dcomparator$1)}}($jscomp$loop$696));if($jscomp$loop$696.$jscomp$loop$prop$high$697.operator\x3d\x3d\x3dcomp||$jscomp$loop$696.$jscomp$loop$prop$high$697.operator\x3d\x3d\x3decomp||(!$jscomp$loop$696.$jscomp$loop$prop$low$698.operator||$jscomp$loop$696.$jscomp$loop$prop$low$698.operator\x3d\x3d\x3d\ncomp)\x26\x26hilo(version,$jscomp$loop$696.$jscomp$loop$prop$low$698.semver)||$jscomp$loop$696.$jscomp$loop$prop$low$698.operator\x3d\x3d\x3decomp\x26\x26ltfn(version,$jscomp$loop$696.$jscomp$loop$prop$low$698.semver))return!1}return!0},ANY$2\x3dcomparator$jscomp$0.ANY,simpleSubset\x3dfunction(sub,dom,options){if(1\x3d\x3d\x3dsub.length\x26\x26sub[0].semver\x3d\x3d\x3dANY$2)return 1\x3d\x3d\x3ddom.length\x26\x26dom[0].semver\x3d\x3d\x3dANY$2;var eqSet\x3dnew Set,gt,lt,$jscomp$iter$328\x3d$jscomp.makeIterator(sub);for(sub\x3d$jscomp$iter$328.next();!sub.done;sub\x3d$jscomp$iter$328.next())sub\x3d\nsub.value,\x22\\x3e\x22\x3d\x3d\x3dsub.operator||\x22\\x3e\\x3d\x22\x3d\x3d\x3dsub.operator?gt\x3dhigherGT(gt,sub,options):\x22\\x3c\x22\x3d\x3d\x3dsub.operator||\x22\\x3c\\x3d\x22\x3d\x3d\x3dsub.operator?lt\x3dlowerLT(lt,sub,options):eqSet.add(sub.semver);if(1\x3ceqSet.size)return null;if(gt\x26\x26lt){var gtltComp\x3dcompare_1(gt.semver,lt.semver,options);if(0\x3cgtltComp||0\x3d\x3d\x3dgtltComp\x26\x26(\x22\\x3e\\x3d\x22!\x3d\x3dgt.operator||\x22\\x3c\\x3d\x22!\x3d\x3dlt.operator))return null}for(sub\x3d$jscomp.makeIterator(eqSet).next();!sub.done;){gtltComp\x3dsub.value;if(gt\x26\x26!satisfies_1(gtltComp,String(gt),options)||lt\x26\x26!satisfies_1(gtltComp,\nString(lt),options))return null;gt\x3d$jscomp.makeIterator(dom);for(sub\x3dgt.next();!sub.done;sub\x3dgt.next())if(!satisfies_1(gtltComp,String(sub.value),options))return!1;return!0}dom\x3d$jscomp.makeIterator(dom);for(sub\x3ddom.next();!sub.done;sub\x3ddom.next()){sub\x3dsub.value;var hasDomGT\x3dhasDomGT||\x22\\x3e\x22\x3d\x3d\x3dsub.operator||\x22\\x3e\\x3d\x22\x3d\x3d\x3dsub.operator;var hasDomLT\x3dhasDomLT||\x22\\x3c\x22\x3d\x3d\x3dsub.operator||\x22\\x3c\\x3d\x22\x3d\x3d\x3dsub.operator;if(gt)if(\x22\\x3e\x22\x3d\x3d\x3dsub.operator||\x22\\x3e\\x3d\x22\x3d\x3d\x3dsub.operator){if(eqSet\x3dhigherGT(gt,sub,options),eqSet\x3d\x3d\x3d\nsub)return!1}else if(\x22\\x3e\\x3d\x22\x3d\x3d\x3dgt.operator\x26\x26!satisfies_1(gt.semver,String(sub),options))return!1;if(lt)if(\x22\\x3c\x22\x3d\x3d\x3dsub.operator||\x22\\x3c\\x3d\x22\x3d\x3d\x3dsub.operator){if(eqSet\x3dlowerLT(lt,sub,options),eqSet\x3d\x3d\x3dsub)return!1}else if(\x22\\x3c\\x3d\x22\x3d\x3d\x3dlt.operator\x26\x26!satisfies_1(lt.semver,String(sub),options))return!1;if(!sub.operator\x26\x26(lt||gt)\x26\x260!\x3d\x3dgtltComp)return!1}return gt\x26\x26hasDomLT\x26\x26!lt\x26\x260!\x3d\x3dgtltComp||lt\x26\x26hasDomGT\x26\x26!gt\x26\x260!\x3d\x3dgtltComp?!1:!0},higherGT\x3dfunction(a,b,options){if(!a)return b;options\x3dcompare_1(a.semver,\nb.semver,options);return 0\x3coptions?a:0\x3eoptions?b:\x22\\x3e\x22\x3d\x3d\x3db.operator\x26\x26\x22\\x3e\\x3d\x22\x3d\x3d\x3da.operator?b:a},lowerLT\x3dfunction(a,b,options){if(!a)return b;options\x3dcompare_1(a.semver,b.semver,options);return 0\x3eoptions?a:0\x3coptions?b:\x22\\x3c\x22\x3d\x3d\x3db.operator\x26\x26\x22\\x3c\\x3d\x22\x3d\x3d\x3da.operator?b:a},semver$1\x3d{re:re_1.re,src:re_1.src,tokens:re_1.t,SEMVER_SPEC_VERSION:\x222.0.0\x22,SemVer:semver,compareIdentifiers:compareIdentifiers,rcompareIdentifiers:function(a,b){return compareIdentifiers(b,a)},parse:parse_1,valid:function(version,\noptions){return(version\x3dparse_1(version,options))?version.version:null},clean:function(version,options){return(version\x3dparse_1(version.trim().replace(/^[\x3dv]+/,\x22\x22),options))?version.version:null},inc:function(version,release,options,identifier){\x22string\x22\x3d\x3d\x3dtypeof options\x26\x26(identifier\x3doptions,options\x3dvoid 0);try{return(new semver(version,options)).inc(release,identifier).version}catch(er){return null}},diff:function(version1,version2){if(eq_1(version1,version2))return null;version1\x3dparse_1(version1);\nversion2\x3dparse_1(version2);var hasPre\x3dversion1.prerelease.length||version2.prerelease.length,prefix\x3dhasPre?\x22pre\x22:\x22\x22,key;for(key in version1)if((\x22major\x22\x3d\x3d\x3dkey||\x22minor\x22\x3d\x3d\x3dkey||\x22patch\x22\x3d\x3d\x3dkey)\x26\x26version1[key]!\x3d\x3dversion2[key])return prefix+key;return hasPre?\x22prerelease\x22:\x22\x22},major:function(a,loose){return(new semver(a,loose)).major},minor:function(a,loose){return(new semver(a,loose)).minor},patch:function(a,loose){return(new semver(a,loose)).patch},prerelease:function(version,options){return(version\x3dparse_1(version,\noptions))\x26\x26version.prerelease.length?version.prerelease:null},compare:compare_1,rcompare:function(a,b,loose){return compare_1(b,a,loose)},compareLoose:function(a,b){return compare_1(a,b,!0)},compareBuild:compareBuild_1,sort:function(list,loose){return list.sort(function(a,b){return compareBuild_1(a,b,loose)})},rsort:function(list,loose){return list.sort(function(a,b){return compareBuild_1(b,a,loose)})},gt:gt_1,lt:lt_1,eq:eq_1,neq:neq_1,gte:gte_1,lte:lte_1,cmp:cmp_1,coerce:function(version,options){if(version instanceof\nsemver)return version;\x22number\x22\x3d\x3d\x3dtypeof version\x26\x26(version\x3dString(version));if(\x22string\x22!\x3d\x3dtypeof version)return null;options\x3doptions||{};var match\x3dnull;if(options.rtl){for(var next;(next\x3dre$2[t$2.COERCERTL].exec(version))\x26\x26(!match||match.index+match[0].length!\x3d\x3dversion.length);)match\x26\x26next.index+next[0].length\x3d\x3d\x3dmatch.index+match[0].length||(match\x3dnext),re$2[t$2.COERCERTL].lastIndex\x3dnext.index+next[1].length+next[2].length;re$2[t$2.COERCERTL].lastIndex\x3d-1}else match\x3dversion.match(re$2[t$2.COERCE]);\nreturn null\x3d\x3d\x3dmatch?null:parse_1(match[2]+\x22.\x22+(match[3]||\x220\x22)+\x22.\x22+(match[4]||\x220\x22),options)},Comparator:comparator$jscomp$0,Range:range$jscomp$1,satisfies:satisfies_1,toComparators:function(range$1,options){return(new range$jscomp$1(range$1,options)).set.map(function(comp){return comp.map(function(c){return c.value}).join(\x22 \x22).trim().split(\x22 \x22)})},maxSatisfying:function(versions,range$1,options){var max\x3dnull,maxSV\x3dnull,rangeObj\x3dnull;try{rangeObj\x3dnew range$jscomp$1(range$1,options)}catch(er){return null}versions.forEach(function(v){!rangeObj.test(v)||\nmax\x26\x26-1!\x3d\x3dmaxSV.compare(v)||(max\x3dv,maxSV\x3dnew semver(max,options))});return max},minSatisfying:function(versions,range$1,options){var min\x3dnull,minSV\x3dnull,rangeObj\x3dnull;try{rangeObj\x3dnew range$jscomp$1(range$1,options)}catch(er){return null}versions.forEach(function(v){!rangeObj.test(v)||min\x26\x261!\x3d\x3dminSV.compare(v)||(min\x3dv,minSV\x3dnew semver(min,options))});return min},minVersion:function(range$1,loose){range$1\x3dnew range$jscomp$1(range$1,loose);var minver\x3dnew semver(\x220.0.0\x22);if(range$1.test(minver))return minver;\nminver\x3dnew semver(\x220.0.0-0\x22);if(range$1.test(minver))return minver;minver\x3dnull;for(loose\x3d0;loose\x3crange$1.set.length;++loose)range$1.set[loose].forEach(function(comparator){var compver\x3dnew semver(comparator.semver.version);switch(comparator.operator){case \x22\\x3e\x22:0\x3d\x3d\x3dcompver.prerelease.length?compver.patch++:compver.prerelease.push(0),compver.raw\x3dcompver.format();case \x22\x22:case \x22\\x3e\\x3d\x22:if(!minver||gt_1(minver,compver))minver\x3dcompver;break;case \x22\\x3c\x22:case \x22\\x3c\\x3d\x22:break;default:throw Error(\x22Unexpected operation: \x22+\ncomparator.operator);}});return minver\x26\x26range$1.test(minver)?minver:null},validRange:function(range$1,options){try{return(new range$jscomp$1(range$1,options)).range||\x22*\x22}catch(er){return null}},outside:outside_1,gtr:function(version,range,options){return outside_1(version,range,\x22\\x3e\x22,options)},ltr:function(version,range,options){return outside_1(version,range,\x22\\x3c\x22,options)},intersects:function(r1,r2,options){r1\x3dnew range$jscomp$1(r1,options);r2\x3dnew range$jscomp$1(r2,options);return r1.intersects(r2)},\nsimplifyRange:function(versions,range,options){var set\x3d[],min\x3dnull,prev\x3dnull;versions\x3dversions.sort(function(a,b){return compare_1(a,b,options)});for(var $jscomp$iter$324\x3d$jscomp.makeIterator(versions),$jscomp$key$version\x3d$jscomp$iter$324.next();!$jscomp$key$version.done;$jscomp$key$version\x3d$jscomp$iter$324.next())$jscomp$key$version\x3d$jscomp$key$version.value,satisfies_1($jscomp$key$version,range,options)?(prev\x3d$jscomp$key$version,min||(min\x3d$jscomp$key$version)):(prev\x26\x26set.push([min,prev]),min\x3dprev\x3d\nnull);min\x26\x26set.push([min,null]);min\x3d[];set\x3d$jscomp.makeIterator(set);for(prev\x3dset.next();!prev.done;prev\x3dset.next())$jscomp$iter$324\x3d$jscomp.makeIterator(prev.value),prev\x3d$jscomp$iter$324.next().value,$jscomp$iter$324\x3d$jscomp$iter$324.next().value,prev\x3d\x3d\x3d$jscomp$iter$324?min.push(prev):$jscomp$iter$324||prev!\x3d\x3dversions[0]?$jscomp$iter$324?prev\x3d\x3d\x3dversions[0]?min.push(\x22\\x3c\\x3d\x22+$jscomp$iter$324):min.push(prev+\x22 - \x22+$jscomp$iter$324):min.push(\x22\\x3e\\x3d\x22+prev):min.push(\x22*\x22);versions\x3dmin.join(\x22 || \x22);\nreturn versions.length\x3c(\x22string\x22\x3d\x3d\x3dtypeof range.raw?range.raw:String(range)).length?versions:range},subset:function(sub,dom,options){sub\x3dnew range$jscomp$1(sub,options);dom\x3dnew range$jscomp$1(dom,options);var sawNonNull\x3d!1;sub\x3d$jscomp.makeIterator(sub.set);var $jscomp$key$simpleSub\x3dsub.next();a:for(;!$jscomp$key$simpleSub.done;$jscomp$key$simpleSub\x3dsub.next()){$jscomp$key$simpleSub\x3d$jscomp$key$simpleSub.value;for(var $jscomp$iter$326\x3d$jscomp.makeIterator(dom.set),$jscomp$key$simpleDom\x3d$jscomp$iter$326.next();!$jscomp$key$simpleDom.done;$jscomp$key$simpleDom\x3d\n$jscomp$iter$326.next())if($jscomp$key$simpleDom\x3dsimpleSubset($jscomp$key$simpleSub,$jscomp$key$simpleDom.value,options),sawNonNull\x3dsawNonNull||null!\x3d\x3d$jscomp$key$simpleDom,$jscomp$key$simpleDom)continue a;if(sawNonNull)return!1}return!0}},schemaParser\x3dfunction(x){return x\x26\x26x.__esModule\x26\x26Object.prototype.hasOwnProperty.call(x,\x22default\x22)?x[\x22default\x22]:x}(createCommonjsModule(function(module,exports){Object.defineProperty(exports,\x22__esModule\x22,{value:!0});exports.default\x3dfunction(url){url\x3d/\\/schema\\/([\\w-]+)\\/([\\w\\.\\-]+)\\.json$/g.exec(url).slice(1,\n3);return{library:url[0],version:url[1]}}})),colorSchemes\x3d{\x22category-6\x22:\x22#ec8431 #829eb1 #c89d29 #3580b1 #adc839 #ab7fb4\x22.split(\x22 \x22),\x22fire-7\x22:\x22#fbf2c7 #f9e39c #f8d36e #f4bb6a #e68a4f #d15a40 #ab4232\x22.split(\x22 \x22),\x22fireandice-6\x22:\x22#e68a4f #f4bb6a #f9e39c #dadfe2 #a6b7c6 #849eae\x22.split(\x22 \x22),\x22ice-7\x22:\x22#edefee #dadfe2 #c4ccd2 #a6b7c6 #849eae #607785 #47525d\x22.split(\x22 \x22)},colorSchemes$1\x3d{\x22main-colors\x22:\x22#1696d2 #d2d2d2 #000000 #fdbf11 #ec008b #55b748 #5c5859 #db2b27\x22.split(\x22 \x22),\x22shades-blue\x22:\x22#CFE8F3 #A2D4EC #73BFE2 #46ABDB #1696D2 #12719E #0A4C6A #062635\x22.split(\x22 \x22),\n\x22shades-gray\x22:\x22#F5F5F5 #ECECEC #E3E3E3 #DCDBDB #D2D2D2 #9D9D9D #696969 #353535\x22.split(\x22 \x22),\x22shades-yellow\x22:\x22#FFF2CF #FCE39E #FDD870 #FCCB41 #FDBF11 #E88E2D #CA5800 #843215\x22.split(\x22 \x22),\x22shades-magenta\x22:\x22#F5CBDF #EB99C2 #E46AA7 #E54096 #EC008B #AF1F6B #761548 #351123\x22.split(\x22 \x22),\x22shades-green\x22:\x22#DCEDD9 #BCDEB4 #98CF90 #78C26D #55B748 #408941 #2C5C2D #1A2E19\x22.split(\x22 \x22),\x22shades-black\x22:\x22#D5D5D4 #ADABAC #848081 #5C5859 #332D2F #262223 #1A1717 #0E0C0D\x22.split(\x22 \x22),\x22shades-red\x22:\x22#F8D5D4 #F1AAA9 #E9807D #E25552 #DB2B27 #A4201D #6E1614 #370B0A\x22.split(\x22 \x22),\n\x22one-group\x22:[\x22#1696d2\x22,\x22#000000\x22],\x22two-groups-cat-1\x22:[\x22#1696d2\x22,\x22#000000\x22],\x22two-groups-cat-2\x22:[\x22#1696d2\x22,\x22#fdbf11\x22],\x22two-groups-cat-3\x22:[\x22#1696d2\x22,\x22#db2b27\x22],\x22two-groups-seq\x22:[\x22#a2d4ec\x22,\x22#1696d2\x22],\x22three-groups-cat\x22:[\x22#1696d2\x22,\x22#fdbf11\x22,\x22#000000\x22],\x22three-groups-seq\x22:[\x22#a2d4ec\x22,\x22#1696d2\x22,\x22#0a4c6a\x22],\x22four-groups-cat-1\x22:[\x22#000000\x22,\x22#d2d2d2\x22,\x22#fdbf11\x22,\x22#1696d2\x22],\x22four-groups-cat-2\x22:[\x22#1696d2\x22,\x22#ec0008b\x22,\x22#fdbf11\x22,\x22#5c5859\x22],\x22four-groups-seq\x22:[\x22#cfe8f3\x22,\x22#73bf42\x22,\x22#1696d2\x22,\x22#0a4c6a\x22],\x22five-groups-cat-1\x22:[\x22#1696d2\x22,\n\x22#fdbf11\x22,\x22#d2d2d2\x22,\x22#ec008b\x22,\x22#000000\x22],\x22five-groups-cat-2\x22:[\x22#1696d2\x22,\x22#0a4c6a\x22,\x22#d2d2d2\x22,\x22#fdbf11\x22,\x22#332d2f\x22],\x22five-groups-seq\x22:[\x22#cfe8f3\x22,\x22#73bf42\x22,\x22#1696d2\x22,\x22#0a4c6a\x22,\x22#000000\x22],\x22six-groups-cat-1\x22:\x22#1696d2 #ec008b #fdbf11 #000000 #d2d2d2 #55b748\x22.split(\x22 \x22),\x22six-groups-cat-2\x22:\x22#1696d2 #d2d2d2 #ec008b #fdbf11 #332d2f #0a4c6a\x22.split(\x22 \x22),\x22six-groups-seq\x22:\x22#cfe8f3 #a2d4ec #73bfe2 #46abdb #1696d2 #12719e\x22.split(\x22 \x22),\x22diverging-colors\x22:\x22#ca5800 #fdbf11 #fdd870 #fff2cf #cfe8f3 #73bfe2 #1696d2 #0a4c6a\x22.split(\x22 \x22)},\nthemes\x3dObject.freeze({__proto__:null,version:\x222.8.3\x22,dark:{background:\x22#333\x22,title:{color:\x22#fff\x22},style:{\x22guide-label\x22:{fill:\x22#fff\x22},\x22guide-title\x22:{fill:\x22#fff\x22}},axis:{domainColor:\x22#fff\x22,gridColor:\x22#888\x22,tickColor:\x22#fff\x22}},excel:{background:\x22#fff\x22,arc:{fill:\x22#4572a7\x22},area:{fill:\x22#4572a7\x22},line:{stroke:\x22#4572a7\x22,strokeWidth:2},path:{stroke:\x22#4572a7\x22},rect:{fill:\x22#4572a7\x22},shape:{stroke:\x22#4572a7\x22},symbol:{fill:\x22#4572a7\x22,strokeWidth:1.5,size:50},axis:{bandPosition:.5,grid:!0,gridColor:\x22#000000\x22,gridOpacity:1,\ngridWidth:.5,labelPadding:10,tickSize:5,tickWidth:.5},axisBand:{grid:!1,tickExtra:!0},legend:{labelBaseline:\x22middle\x22,labelFontSize:11,symbolSize:50,symbolType:\x22square\x22},range:{category:\x22#4572a7 #aa4643 #8aa453 #71598e #4598ae #d98445 #94aace #d09393 #b9cc98 #a99cbc\x22.split(\x22 \x22)}},fivethirtyeight:{arc:{fill:\x22#30a2da\x22},area:{fill:\x22#30a2da\x22},axis:{domainColor:\x22#cbcbcb\x22,grid:!0,gridColor:\x22#cbcbcb\x22,gridWidth:1,labelColor:\x22#999\x22,labelFontSize:10,titleColor:\x22#333\x22,tickColor:\x22#cbcbcb\x22,tickSize:10,titleFontSize:14,\ntitlePadding:10,labelPadding:4},axisBand:{grid:!1},background:\x22#f0f0f0\x22,group:{fill:\x22#f0f0f0\x22},legend:{labelColor:\x22#333\x22,labelFontSize:11,padding:1,symbolSize:30,symbolType:\x22square\x22,titleColor:\x22#333\x22,titleFontSize:14,titlePadding:10},line:{stroke:\x22#30a2da\x22,strokeWidth:2},path:{stroke:\x22#30a2da\x22,strokeWidth:.5},rect:{fill:\x22#30a2da\x22},range:{category:\x22#30a2da #fc4f30 #e5ae38 #6d904f #8b8b8b #b96db8 #ff9e27 #56cc60 #52d2ca #52689e #545454 #9fe4f8\x22.split(\x22 \x22),diverging:\x22#cc0020 #e77866 #f6e7e1 #d6e8ed #91bfd9 #1d78b5\x22.split(\x22 \x22),\nheatmap:[\x22#d6e8ed\x22,\x22#cee0e5\x22,\x22#91bfd9\x22,\x22#549cc6\x22,\x22#1d78b5\x22]},point:{filled:!0,shape:\x22circle\x22},shape:{stroke:\x22#30a2da\x22},bar:{binSpacing:2,fill:\x22#30a2da\x22,stroke:null},title:{anchor:\x22start\x22,fontSize:24,fontWeight:600,offset:20}},ggplot2:{group:{fill:\x22#e5e5e5\x22},arc:{fill:\x22#000\x22},area:{fill:\x22#000\x22},line:{stroke:\x22#000\x22},path:{stroke:\x22#000\x22},rect:{fill:\x22#000\x22},shape:{stroke:\x22#000\x22},symbol:{fill:\x22#000\x22,size:40},axis:{domain:!1,grid:!0,gridColor:\x22#FFFFFF\x22,gridOpacity:1,labelColor:\x22#7F7F7F\x22,labelPadding:4,\ntickColor:\x22#7F7F7F\x22,tickSize:5.67,titleFontSize:16,titleFontWeight:\x22normal\x22},legend:{labelBaseline:\x22middle\x22,labelFontSize:11,symbolSize:40},range:{category:\x22#000000 #7F7F7F #1A1A1A #999999 #333333 #B0B0B0 #4D4D4D #C9C9C9 #666666 #DCDCDC\x22.split(\x22 \x22)}},latimes:{background:\x22#ffffff\x22,title:{anchor:\x22start\x22,color:\x22#000000\x22,font:\x22Benton Gothic Bold, sans-serif\x22,fontSize:22,fontWeight:\x22normal\x22},arc:{fill:\x22#82c6df\x22},area:{fill:\x22#82c6df\x22},line:{stroke:\x22#82c6df\x22,strokeWidth:2},path:{stroke:\x22#82c6df\x22},rect:{fill:\x22#82c6df\x22},\nshape:{stroke:\x22#82c6df\x22},symbol:{fill:\x22#82c6df\x22,size:30},axis:{labelFont:\x22Benton Gothic, sans-serif\x22,labelFontSize:11.5,labelFontWeight:\x22normal\x22,titleFont:\x22Benton Gothic Bold, sans-serif\x22,titleFontSize:13,titleFontWeight:\x22normal\x22},axisX:{labelAngle:0,labelPadding:4,tickSize:3},axisY:{labelBaseline:\x22middle\x22,maxExtent:45,minExtent:45,tickSize:2,titleAlign:\x22left\x22,titleAngle:0,titleX:-45,titleY:-11},legend:{labelFont:\x22Benton Gothic, sans-serif\x22,labelFontSize:11.5,symbolType:\x22square\x22,titleFont:\x22Benton Gothic Bold, sans-serif\x22,\ntitleFontSize:13,titleFontWeight:\x22normal\x22},range:{category:colorSchemes[\x22category-6\x22],diverging:colorSchemes[\x22fireandice-6\x22],heatmap:colorSchemes[\x22fire-7\x22],ordinal:colorSchemes[\x22fire-7\x22],ramp:colorSchemes[\x22fire-7\x22]}},quartz:{background:\x22#f9f9f9\x22,arc:{fill:\x22#ab5787\x22},area:{fill:\x22#ab5787\x22},line:{stroke:\x22#ab5787\x22},path:{stroke:\x22#ab5787\x22},rect:{fill:\x22#ab5787\x22},shape:{stroke:\x22#ab5787\x22},symbol:{fill:\x22#ab5787\x22,size:30},axis:{domainColor:\x22#979797\x22,domainWidth:.5,gridWidth:.2,labelColor:\x22#979797\x22,tickColor:\x22#979797\x22,\ntickWidth:.2,titleColor:\x22#979797\x22},axisBand:{grid:!1},axisX:{grid:!0,tickSize:10},axisY:{domain:!1,grid:!0,tickSize:0},legend:{labelFontSize:11,padding:1,symbolSize:30,symbolType:\x22square\x22},range:{category:\x22#ab5787 #51b2e5 #703c5c #168dd9 #d190b6 #00609f #d365ba #154866 #666666 #c4c4c4\x22.split(\x22 \x22)}},vox:{background:\x22#fff\x22,arc:{fill:\x22#3e5c69\x22},area:{fill:\x22#3e5c69\x22},line:{stroke:\x22#3e5c69\x22},path:{stroke:\x22#3e5c69\x22},rect:{fill:\x22#3e5c69\x22},shape:{stroke:\x22#3e5c69\x22},symbol:{fill:\x22#3e5c69\x22},axis:{domainWidth:.5,\ngrid:!0,labelPadding:2,tickSize:5,tickWidth:.5,titleFontWeight:\x22normal\x22},axisBand:{grid:!1},axisX:{gridWidth:.2},axisY:{gridDash:[3],gridWidth:.4},legend:{labelFontSize:11,padding:1,symbolType:\x22square\x22},range:{category:\x22#3e5c69 #6793a6 #182429 #0570b0 #3690c0 #74a9cf #a6bddb #e2ddf2\x22.split(\x22 \x22)}},urbaninstitute:{background:\x22#FFFFFF\x22,title:{anchor:\x22start\x22,fontSize:18,font:\x22Lato\x22},axisX:{domain:!0,domainColor:\x22#000000\x22,domainWidth:1,grid:!1,labelFontSize:12,labelFont:\x22Lato\x22,labelAngle:0,tickColor:\x22#000000\x22,\ntickSize:5,titleFontSize:12,titlePadding:10,titleFont:\x22Lato\x22},axisY:{domain:!1,domainWidth:1,grid:!0,gridColor:\x22#DEDDDD\x22,gridWidth:1,labelFontSize:12,labelFont:\x22Lato\x22,labelPadding:8,ticks:!1,titleFontSize:12,titlePadding:10,titleFont:\x22Lato\x22,titleAngle:0,titleY:-10,titleX:18},legend:{labelFontSize:12,labelFont:\x22Lato\x22,symbolSize:100,titleFontSize:12,titlePadding:10,titleFont:\x22Lato\x22,orient:\x22right\x22,offset:10},view:{stroke:\x22transparent\x22},range:{category:colorSchemes$1[\x22six-groups-cat-1\x22],diverging:colorSchemes$1[\x22diverging-colors\x22],\nheatmap:colorSchemes$1[\x22diverging-colors\x22],ordinal:colorSchemes$1[\x22six-groups-seq\x22],ramp:colorSchemes$1[\x22shades-blue\x22]},area:{fill:\x22#1696d2\x22},rect:{fill:\x22#1696d2\x22},line:{color:\x22#1696d2\x22,stroke:\x22#1696d2\x22,strokeWidth:5},trail:{color:\x22#1696d2\x22,stroke:\x22#1696d2\x22,strokeWidth:0,size:1},path:{stroke:\x22#1696d2\x22,strokeWidth:.5},point:{filled:!0},text:{font:\x22Lato\x22,color:\x22#1696d2\x22,fontSize:11,align:\x22center\x22,fontWeight:400,size:11},style:{bar:{fill:\x22#1696d2\x22,stroke:null}},arc:{fill:\x22#1696d2\x22},shape:{stroke:\x22#1696d2\x22},\nsymbol:{fill:\x22#1696d2\x22,size:30}},googlecharts:{arc:{fill:\x22#3366CC\x22},area:{fill:\x22#3366CC\x22},path:{stroke:\x22#3366CC\x22},rect:{fill:\x22#3366CC\x22},shape:{stroke:\x22#3366CC\x22},symbol:{stroke:\x22#3366CC\x22},circle:{fill:\x22#3366CC\x22},background:\x22#fff\x22,padding:{top:10,right:10,bottom:10,left:10},style:{\x22guide-label\x22:{font:\x22Arial, sans-serif\x22,fontSize:12},\x22guide-title\x22:{font:\x22Arial, sans-serif\x22,fontSize:12},\x22group-title\x22:{font:\x22Arial, sans-serif\x22,fontSize:12}},title:{font:\x22Arial, sans-serif\x22,fontSize:14,fontWeight:\x22bold\x22,\ndy:-3,anchor:\x22start\x22},axis:{gridColor:\x22#ccc\x22,tickColor:\x22#ccc\x22,domain:!1,grid:!0},range:{category:\x22#4285F4 #DB4437 #F4B400 #0F9D58 #AB47BC #00ACC1 #FF7043 #9E9D24 #5C6BC0 #F06292 #00796B #C2185B\x22.split(\x22 \x22),heatmap:[\x22#c6dafc\x22,\x22#5e97f6\x22,\x22#2a56c6\x22]}}}),DEFAULT_OPTIONS\x3d{offsetX:10,offsetY:10,id:\x22vg-tooltip-element\x22,styleId:\x22vega-tooltip-style\x22,theme:\x22light\x22,disableDefaultStyle:!1,sanitize:function(value){return String(value).replace(/\x26/g,\x22\\x26amp;\x22).replace(/\x3c/g,\x22\\x26lt;\x22)},maxDepth:2},get1\x3dfunction(field){return function(obj){return obj[field]}},\ngetN\x3dfunction(path){var len\x3dpath.length;return function(obj){for(var i\x3d0;i\x3clen;++i)obj\x3dobj[path[i]];return obj}},empty\x3d[];(function(field,name,opt){var path\x3dsplitAccessPath(field);field\x3d1\x3d\x3d\x3dpath.length?path[0]:field;return accessor((opt\x26\x26opt.get||getter)(path),[field],name||field)})(\x22id\x22);accessor(function(_){return _},empty,\x22identity\x22);accessor(function(){return 0},empty,\x22zero\x22);accessor(function(){return 1},empty,\x22one\x22);accessor(function(){return!0},empty,\x22true\x22);accessor(function(){return!1},empty,\n\x22false\x22);var isArray\x3dArray.isArray,__rest\x3dfunction(s,e){var t\x3d{},p;for(p in s)Object.prototype.hasOwnProperty.call(s,p)\x26\x260\x3ee.indexOf(p)\x26\x26(t[p]\x3ds[p]);if(null!\x3ds\x26\x26\x22function\x22\x3d\x3d\x3dtypeof Object.getOwnPropertySymbols){var i\x3d0;for(p\x3dObject.getOwnPropertySymbols(s);i\x3cp.length;i++)0\x3ee.indexOf(p[i])\x26\x26Object.prototype.propertyIsEnumerable.call(s,p[i])\x26\x26(t[p[i]]\x3ds[p[i]])}return t},Handler\x3dfunction(options){this.options\x3dObject.assign(Object.assign({},DEFAULT_OPTIONS),options);options\x3dthis.options.id;this.call\x3d\nthis.tooltipHandler.bind(this);if(!this.options.disableDefaultStyle\x26\x26!document.getElementById(this.options.styleId)){var style\x3ddocument.createElement(\x22style\x22);style.setAttribute(\x22id\x22,this.options.styleId);if(!/^[A-Za-z]+[-:.\\w]*$/.test(options))throw Error(\x22Invalid HTML ID\x22);var JSCompiler_inline_result\x3d\x22#vg-tooltip-element {\\n  visibility: hidden;\\n  padding: 8px;\\n  position: fixed;\\n  z-index: 1000;\\n  font-family: sans-serif;\\n  font-size: 11px;\\n  border-radius: 3px;\\n  box-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);\\n  /* The default theme is the light theme. */\\n  background-color: rgba(255, 255, 255, 0.95);\\n  border: 1px solid #d9d9d9;\\n  color: black; }\\n  #vg-tooltip-element.visible {\\n    visibility: visible; }\\n  #vg-tooltip-element h2 {\\n    margin-top: 0;\\n    margin-bottom: 10px;\\n    font-size: 13px; }\\n  #vg-tooltip-element img {\\n    max-width: 200px;\\n    max-height: 200px; }\\n  #vg-tooltip-element table {\\n    border-spacing: 0; }\\n    #vg-tooltip-element table tr {\\n      border: none; }\\n      #vg-tooltip-element table tr td {\\n        overflow: hidden;\\n        text-overflow: ellipsis;\\n        padding-top: 2px;\\n        padding-bottom: 2px; }\\n        #vg-tooltip-element table tr td.key {\\n          color: #808080;\\n          max-width: 150px;\\n          text-align: right;\\n          padding-right: 4px; }\\n        #vg-tooltip-element table tr td.value {\\n          display: block;\\n          max-width: 300px;\\n          max-height: 7em;\\n          text-align: left; }\\n  #vg-tooltip-element.dark-theme {\\n    background-color: rgba(32, 32, 32, 0.9);\\n    border: 1px solid #f5f5f5;\\n    color: white; }\\n    #vg-tooltip-element.dark-theme td.key {\\n      color: #bfbfbf; }\\n\x22.toString().replace(\x22vg-tooltip-element\x22,\noptions);style.innerHTML\x3dJSCompiler_inline_result;JSCompiler_inline_result\x3ddocument.head;0\x3cJSCompiler_inline_result.childNodes.length?JSCompiler_inline_result.insertBefore(style,JSCompiler_inline_result.childNodes[0]):JSCompiler_inline_result.appendChild(style)}this.el\x3ddocument.getElementById(options);this.el||(this.el\x3ddocument.createElement(\x22div\x22),this.el.setAttribute(\x22id\x22,options),this.el.classList.add(\x22vg-tooltip\x22),document.body.appendChild(this.el))};Handler.prototype.tooltipHandler\x3dfunction(handler,\nevent,item,value){if(null\x3d\x3dvalue||\x22\x22\x3d\x3d\x3dvalue)this.el.classList.remove(\x22visible\x22,this.options.theme+\x22-theme\x22);else{this.el.innerHTML\x3dformatValue(value,this.options.sanitize,this.options.maxDepth);this.el.classList.add(\x22visible\x22,this.options.theme+\x22-theme\x22);handler\x3dthis.el.getBoundingClientRect();var offsetX\x3dthis.options.offsetX;item\x3dthis.options.offsetY;value\x3devent.clientX+offsetX;value+handler.width\x3ewindow.innerWidth\x26\x26(value\x3d+event.clientX-offsetX-handler.width);offsetX\x3devent.clientY+item;offsetX+\nhandler.height\x3ewindow.innerHeight\x26\x26(offsetX\x3d+event.clientY-item-handler.height);this.el.setAttribute(\x22style\x22,\x22top: \x22+offsetX+\x22px; left: \x22+value+\x22px\x22)}};String.prototype.startsWith||(String.prototype.startsWith\x3dfunction(search,pos){return this.substr(!pos||0\x3epos?0:+pos,search.length)\x3d\x3d\x3dsearch});var _a$jscomp$1,vega\x3dvegaImport,vegaLite\x3dvegaLiteImport,w\x3d\x22undefined\x22!\x3d\x3dtypeof window?window:void 0;void 0\x3d\x3d\x3dvegaLite\x26\x26(null\x3d\x3d\x3d(_a$jscomp$1\x3dnull\x3d\x3d\x3dw||void 0\x3d\x3d\x3dw?void 0:w.vl)||void 0\x3d\x3d\x3d_a$jscomp$1?0:_a$jscomp$1.compile)\x26\x26\n(vegaLite\x3dw.vl);var DEFAULT_ACTIONS\x3d{export:{svg:!0,png:!0},source:!0,compiled:!0,editor:!0},I18N\x3d{CLICK_TO_VIEW_ACTIONS:\x22Click to view actions\x22,COMPILED_ACTION:\x22View Compiled Vega\x22,EDITOR_ACTION:\x22Open in Vega Editor\x22,PNG_ACTION:\x22Save as PNG\x22,SOURCE_ACTION:\x22View Source\x22,SVG_ACTION:\x22Save as SVG\x22},NAMES\x3d{vega:\x22Vega\x22,\x22vega-lite\x22:\x22Vega-Lite\x22},VERSION\x3d{vega:vega.version,\x22vega-lite\x22:vegaLite?vegaLite.version:\x22not available\x22},PREPROCESSOR\x3d{vega:function(vgSpec){return vgSpec},\x22vega-lite\x22:function(vlSpec,\nconfig){return vegaLite.compile(vlSpec,{config:config}).spec}},wrapper$jscomp$0\x3dfunction(args){for(var $jscomp$restParams\x3d[],$jscomp$restIndex\x3d0;$jscomp$restIndex\x3carguments.length;++$jscomp$restIndex)$jscomp$restParams[$jscomp$restIndex-0]\x3darguments[$jscomp$restIndex];if($jscomp$restIndex\x3d1\x3c$jscomp$restParams.length){if($jscomp$restIndex\x3dvegaImport.isString($jscomp$restParams[0]))$jscomp$restIndex\x3d$jscomp$restParams[0],$jscomp$restIndex\x3d!($jscomp$restIndex.startsWith(\x22http://\x22)||$jscomp$restIndex.startsWith(\x22https://\x22)||\n$jscomp$restIndex.startsWith(\x22//\x22));$jscomp$restIndex\x3d$jscomp$restIndex||$jscomp$restParams[0]instanceof HTMLElement||3\x3d\x3d\x3d$jscomp$restParams.length}return $jscomp$restIndex?embed($jscomp$restParams[0],$jscomp$restParams[1],$jscomp$restParams[2]):container($jscomp$restParams[0],$jscomp$restParams[1])};wrapper$jscomp$0.vegaLite\x3dvegaLite;wrapper$jscomp$0.vl\x3dvegaLite;wrapper$jscomp$0.container\x3dcontainer;wrapper$jscomp$0.embed\x3dembed;wrapper$jscomp$0.vega\x3dvega;wrapper$jscomp$0.default\x3dembed;wrapper$jscomp$0.version\x3d\n\x226.9.0\x22;return wrapper$jscomp$0})}");
SHADOW_ENV.evalLoad("vega.base.js", true , "goog.provide(\x27vega.base\x27);\nvar module$node_modules$vega_lite$build$vega_lite\x3dshadow.js.require(\x22module$node_modules$vega_lite$build$vega_lite\x22, {});\nvar module$node_modules$vega_embed$build$vega_embed\x3dshadow.js.require(\x22module$node_modules$vega_embed$build$vega_embed\x22, {});\nconsole.log(\x22LOADED VEGA BASE\x22);\nvega.base.window_resolve \x3d (function vega$base$window_resolve(symbol){\nreturn cljs.core.reduce.cljs$core$IFn$_invoke$arity$3((function (p1__81684_SHARP_,p2__81685_SHARP_){\nreturn (p1__81684_SHARP_[p2__81685_SHARP_]);\n}),window,cljs.core.conj.cljs$core$IFn$_invoke$arity$2(clojure.string.split.cljs$core$IFn$_invoke$arity$2(clojure.string.replace(cljs.core.namespace(symbol),\x22-\x22,\x22_\x22),\x22.\x22),clojure.string.replace(cljs.core.name(symbol),\x22-\x22,\x22_\x22)));\n});\nvega.base.compile \x3d (function vega$base$compile(form){\nreturn sci.core.eval_string.cljs$core$IFn$_invoke$arity$2(cljs.core.pr_str.cljs$core$IFn$_invoke$arity$variadic(cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([form], 0)),new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,\x22bindings\x22,\x22bindings\x22,1271397192),new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Symbol(\x22js\x22,\x22console.log\x22,\x22js/console.log\x22,-2005248266,null),console.log,new cljs.core.Symbol(\x22js\x22,\x22document\x22,\x22js/document\x22,311343521,null),document], null),new cljs.core.Keyword(null,\x22classes\x22,\x22classes\x22,2037804510),new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,\x22allow\x22,\x22allow\x22,-1857325745),new cljs.core.Keyword(null,\x22all\x22,\x22all\x22,892129742)], null)], null));\n});\nvega.base.dataset_component \x3d (function vega$base$dataset_component(p__81694){\nvar map__81695 \x3d p__81694;\nvar map__81695__$1 \x3d (((((!((map__81695 \x3d\x3d null))))?(((((map__81695.cljs$lang$protocol_mask$partition0$ \x26 (64))) || ((cljs.core.PROTOCOL_SENTINEL \x3d\x3d\x3d map__81695.cljs$core$ISeq$))))?true:false):false))?cljs.core.apply.cljs$core$IFn$_invoke$arity$2(cljs.core.hash_map,map__81695):map__81695);\nvar data__GT_vega_spec \x3d cljs.core.get.cljs$core$IFn$_invoke$arity$2(map__81695__$1,new cljs.core.Keyword(\x22vega\x22,\x22data-\x3evega-spec\x22,\x22vega/data-\x3evega-spec\x22,-155039939));\nvar dependencies \x3d cljs.core.get.cljs$core$IFn$_invoke$arity$2(map__81695__$1,new cljs.core.Keyword(\x22dataset\x22,\x22dependencies\x22,\x22dataset/dependencies\x22,2019679717));\nvar data__GT_vega_spec__$1 \x3d vega.base.compile((data__GT_vega_spec[\x22rep\x22]));\nvar data \x3d cljs.core.atom.cljs$core$IFn$_invoke$arity$1(cljs.core.PersistentArrayMap.EMPTY);\nreturn new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,\x22div\x22,\x22div\x22,1057191632),new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,\x22ref\x22,\x22ref\x22,1289896967),(function (c){\nreturn cljs.core.doall.cljs$core$IFn$_invoke$arity$1(cljs.core.map.cljs$core$IFn$_invoke$arity$2((function (p__81700){\nvar vec__81704 \x3d p__81700;\nvar dep_name \x3d cljs.core.nth.cljs$core$IFn$_invoke$arity$3(vec__81704,(0),null);\nvar dep_path \x3d cljs.core.nth.cljs$core$IFn$_invoke$arity$3(vec__81704,(1),null);\nreturn (function (){var fexpr__81708 \x3d vega.base.window_resolve(new cljs.core.Symbol(\x22browjure.state\x22,\x22get-or-create-subject\x22,\x22browjure.state/get-or-create-subject\x22,-741919012,null));\nreturn (fexpr__81708.cljs$core$IFn$_invoke$arity$2 ? fexpr__81708.cljs$core$IFn$_invoke$arity$2(dep_path,null) : fexpr__81708.call(null,dep_path,null));\n})().subscribe((function (r){\ncljs.core.swap_BANG_.cljs$core$IFn$_invoke$arity$4(data,cljs.core.assoc,dep_name,r);\n\nreturn module$node_modules$vega_embed$build$vega_embed.default(c,cljs.core.clj__GT_js((function (){var G__81726 \x3d cljs.core.deref(data);\nreturn (data__GT_vega_spec__$1.cljs$core$IFn$_invoke$arity$1 ? data__GT_vega_spec__$1.cljs$core$IFn$_invoke$arity$1(G__81726) : data__GT_vega_spec__$1.call(null,G__81726));\n})()));\n}));\n}),dependencies));\n})], null)], null);\n});\nvega.base.embed_component \x3d (function vega$base$embed_component(var_args){\nvar args__4742__auto__ \x3d [];\nvar len__4736__auto___81781 \x3d arguments.length;\nvar i__4737__auto___81782 \x3d (0);\nwhile(true){\nif((i__4737__auto___81782 \x3c len__4736__auto___81781)){\nargs__4742__auto__.push((arguments[i__4737__auto___81782]));\n\nvar G__81783 \x3d (i__4737__auto___81782 + (1));\ni__4737__auto___81782 \x3d G__81783;\ncontinue;\n} else {\n}\nbreak;\n}\n\nvar argseq__4743__auto__ \x3d ((((0) \x3c args__4742__auto__.length))?(new cljs.core.IndexedSeq(args__4742__auto__.slice((0)),(0),null)):null);\nreturn vega.base.embed_component.cljs$core$IFn$_invoke$arity$variadic(argseq__4743__auto__);\n});\n\n(vega.base.embed_component.cljs$core$IFn$_invoke$arity$variadic \x3d (function (specs){\nreturn new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,\x22div\x22,\x22div\x22,1057191632),(function (){var iter__4529__auto__ \x3d (function vega$base$iter__81734(s__81735){\nreturn (new cljs.core.LazySeq(null,(function (){\nvar s__81735__$1 \x3d s__81735;\nwhile(true){\nvar temp__5735__auto__ \x3d cljs.core.seq(s__81735__$1);\nif(temp__5735__auto__){\nvar s__81735__$2 \x3d temp__5735__auto__;\nif(cljs.core.chunked_seq_QMARK_(s__81735__$2)){\nvar c__4527__auto__ \x3d cljs.core.chunk_first(s__81735__$2);\nvar size__4528__auto__ \x3d cljs.core.count(c__4527__auto__);\nvar b__81737 \x3d cljs.core.chunk_buffer(size__4528__auto__);\nif((function (){var i__81736 \x3d (0);\nwhile(true){\nif((i__81736 \x3c size__4528__auto__)){\nvar spec \x3d cljs.core._nth(c__4527__auto__,i__81736);\ncljs.core.chunk_append(b__81737,new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,\x22div\x22,\x22div\x22,1057191632),new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,\x22ref\x22,\x22ref\x22,1289896967),((function (i__81736,spec,c__4527__auto__,size__4528__auto__,b__81737,s__81735__$2,temp__5735__auto__){\nreturn (function (p1__81728_SHARP_){\nreturn module$node_modules$vega_embed$build$vega_embed.default(p1__81728_SHARP_,cljs.core.clj__GT_js(spec));\n});})(i__81736,spec,c__4527__auto__,size__4528__auto__,b__81737,s__81735__$2,temp__5735__auto__))\n], null)], null));\n\nvar G__81812 \x3d (i__81736 + (1));\ni__81736 \x3d G__81812;\ncontinue;\n} else {\nreturn true;\n}\nbreak;\n}\n})()){\nreturn cljs.core.chunk_cons(cljs.core.chunk(b__81737),vega$base$iter__81734(cljs.core.chunk_rest(s__81735__$2)));\n} else {\nreturn cljs.core.chunk_cons(cljs.core.chunk(b__81737),null);\n}\n} else {\nvar spec \x3d cljs.core.first(s__81735__$2);\nreturn cljs.core.cons(new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,\x22div\x22,\x22div\x22,1057191632),new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,\x22ref\x22,\x22ref\x22,1289896967),((function (spec,s__81735__$2,temp__5735__auto__){\nreturn (function (p1__81728_SHARP_){\nreturn module$node_modules$vega_embed$build$vega_embed.default(p1__81728_SHARP_,cljs.core.clj__GT_js(spec));\n});})(spec,s__81735__$2,temp__5735__auto__))\n], null)], null),vega$base$iter__81734(cljs.core.rest(s__81735__$2)));\n}\n} else {\nreturn null;\n}\nbreak;\n}\n}),null,null));\n});\nreturn iter__4529__auto__(specs);\n})()], null);\n}));\n\n(vega.base.embed_component.cljs$lang$maxFixedArity \x3d (0));\n\n/** @this {Function} */\n(vega.base.embed_component.cljs$lang$applyTo \x3d (function (seq81730){\nvar self__4724__auto__ \x3d this;\nreturn self__4724__auto__.cljs$core$IFn$_invoke$arity$variadic(cljs.core.seq(seq81730));\n}));\n\nvega.base.handler \x3d (function vega$base$handler(p__81755){\nvar map__81756 \x3d p__81755;\nvar map__81756__$1 \x3d (((((!((map__81756 \x3d\x3d null))))?(((((map__81756.cljs$lang$protocol_mask$partition0$ \x26 (64))) || ((cljs.core.PROTOCOL_SENTINEL \x3d\x3d\x3d map__81756.cljs$core$ISeq$))))?true:false):false))?cljs.core.apply.cljs$core$IFn$_invoke$arity$2(cljs.core.hash_map,map__81756):map__81756);\nvar command \x3d map__81756__$1;\nvar id \x3d cljs.core.get.cljs$core$IFn$_invoke$arity$2(map__81756__$1,new cljs.core.Keyword(null,\x22id\x22,\x22id\x22,-1388402092));\nvar type \x3d cljs.core.get.cljs$core$IFn$_invoke$arity$2(map__81756__$1,new cljs.core.Keyword(null,\x22type\x22,\x22type\x22,1174270348));\nvar payload \x3d cljs.core.get.cljs$core$IFn$_invoke$arity$2(map__81756__$1,new cljs.core.Keyword(null,\x22payload\x22,\x22payload\x22,-383036092));\nif(cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(type,new cljs.core.Keyword(null,\x22visualize\x22,\x22visualize\x22,-44099815))){\nconsole.log(\x22vega base handler\x22,command);\n\nreturn module$node_modules$vega_embed$build$vega_embed.default(\x22#app\x22,cljs.core.clj__GT_js(payload));\n} else {\nreturn null;\n}\n});\n");
SHADOW_ENV.evalLoad("shadow.module.vega.append.js", false , ";\nSHADOW_ENV.setLoaded(\x22module$node_modules$base64_js$index.js\x22);\nSHADOW_ENV.setLoaded(\x22module$node_modules$isarray$index.js\x22);\nSHADOW_ENV.setLoaded(\x22module$node_modules$buffer$index.js\x22);\nSHADOW_ENV.setLoaded(\x22module$node_modules$vega_lite$build$vega_lite.js\x22);\nSHADOW_ENV.setLoaded(\x22module$node_modules$vega_util$build$vega_util.js\x22);\nSHADOW_ENV.setLoaded(\x22module$node_modules$d3_dsv$dist$d3_dsv.js\x22);\nSHADOW_ENV.setLoaded(\x22module$node_modules$topojson_client$dist$topojson_client.js\x22);\nSHADOW_ENV.setLoaded(\x22module$node_modules$d3_array$dist$d3_array.js\x22);\nSHADOW_ENV.setLoaded(\x22module$node_modules$d3_format$dist$d3_format.js\x22);\nSHADOW_ENV.setLoaded(\x22module$node_modules$d3_time$dist$d3_time.js\x22);\nSHADOW_ENV.setLoaded(\x22module$node_modules$vega_time$build$vega_time.js\x22);\nSHADOW_ENV.setLoaded(\x22module$node_modules$d3_time_format$dist$d3_time_format.js\x22);\nSHADOW_ENV.setLoaded(\x22module$node_modules$vega_format$build$vega_format.js\x22);\nSHADOW_ENV.setLoaded(\x22module$node_modules$vega_loader$build$vega_loader.js\x22);\nSHADOW_ENV.setLoaded(\x22module$node_modules$vega_dataflow$build$vega_dataflow.js\x22);\nSHADOW_ENV.setLoaded(\x22module$node_modules$vega_statistics$build$vega_statistics.js\x22);\nSHADOW_ENV.setLoaded(\x22module$node_modules$vega_transforms$build$vega_transforms.js\x22);\nSHADOW_ENV.setLoaded(\x22module$node_modules$d3_path$dist$d3_path.js\x22);\nSHADOW_ENV.setLoaded(\x22module$node_modules$d3_shape$dist$d3_shape.js\x22);\nSHADOW_ENV.setLoaded(\x22module$node_modules$vega_canvas$build$vega_canvas.js\x22);\nSHADOW_ENV.setLoaded(\x22module$node_modules$d3_color$dist$d3_color.js\x22);\nSHADOW_ENV.setLoaded(\x22module$node_modules$d3_interpolate$dist$d3_interpolate.js\x22);\nSHADOW_ENV.setLoaded(\x22module$node_modules$d3_scale$dist$d3_scale.js\x22);\nSHADOW_ENV.setLoaded(\x22module$node_modules$vega_scale$build$vega_scale.js\x22);\nSHADOW_ENV.setLoaded(\x22module$node_modules$vega_scenegraph$build$vega_scenegraph.js\x22);\nSHADOW_ENV.setLoaded(\x22module$node_modules$vega_view_transforms$build$vega_view_transforms.js\x22);\nSHADOW_ENV.setLoaded(\x22module$node_modules$vega_encode$build$vega_encode.js\x22);\nSHADOW_ENV.setLoaded(\x22module$node_modules$d3_geo$dist$d3_geo.js\x22);\nSHADOW_ENV.setLoaded(\x22module$node_modules$d3_geo_projection$dist$d3_geo_projection.js\x22);\nSHADOW_ENV.setLoaded(\x22module$node_modules$vega_projection$build$vega_projection.js\x22);\nSHADOW_ENV.setLoaded(\x22module$node_modules$vega_geo$build$vega_geo.js\x22);\nSHADOW_ENV.setLoaded(\x22module$node_modules$d3_quadtree$dist$d3_quadtree.js\x22);\nSHADOW_ENV.setLoaded(\x22module$node_modules$d3_dispatch$dist$d3_dispatch.js\x22);\nSHADOW_ENV.setLoaded(\x22module$node_modules$d3_timer$dist$d3_timer.js\x22);\nSHADOW_ENV.setLoaded(\x22module$node_modules$d3_force$dist$d3_force.js\x22);\nSHADOW_ENV.setLoaded(\x22module$node_modules$vega_force$build$vega_force.js\x22);\nSHADOW_ENV.setLoaded(\x22module$node_modules$d3_hierarchy$dist$d3_hierarchy.js\x22);\nSHADOW_ENV.setLoaded(\x22module$node_modules$vega_hierarchy$build$vega_hierarchy.js\x22);\nSHADOW_ENV.setLoaded(\x22module$node_modules$vega_regression$build$vega_regression.js\x22);\nSHADOW_ENV.setLoaded(\x22module$node_modules$d3_delaunay$dist$d3_delaunay.js\x22);\nSHADOW_ENV.setLoaded(\x22module$node_modules$vega_voronoi$build$vega_voronoi.js\x22);\nSHADOW_ENV.setLoaded(\x22module$node_modules$vega_wordcloud$build$vega_wordcloud.js\x22);\nSHADOW_ENV.setLoaded(\x22module$node_modules$vega_crossfilter$build$vega_crossfilter.js\x22);\nSHADOW_ENV.setLoaded(\x22module$node_modules$vega_expression$build$vega_expression.js\x22);\nSHADOW_ENV.setLoaded(\x22module$node_modules$vega_selections$build$vega_selections.js\x22);\nSHADOW_ENV.setLoaded(\x22module$node_modules$vega_functions$build$vega_functions.js\x22);\nSHADOW_ENV.setLoaded(\x22module$node_modules$vega_runtime$build$vega_runtime.js\x22);\nSHADOW_ENV.setLoaded(\x22module$node_modules$vega_view$build$vega_view.js\x22);\nSHADOW_ENV.setLoaded(\x22module$node_modules$vega_event_selector$build$vega_event_selector.js\x22);\nSHADOW_ENV.setLoaded(\x22module$node_modules$vega_parser$build$vega_parser.js\x22);\nSHADOW_ENV.setLoaded(\x22module$node_modules$vega$build$vega_node.js\x22);\nSHADOW_ENV.setLoaded(\x22module$node_modules$vega_embed$build$vega_embed.js\x22);\nSHADOW_ENV.setLoaded(\x22vega.base.js\x22);\nSHADOW_ENV.setLoaded(\x22shadow.module.vega.append.js\x22);");