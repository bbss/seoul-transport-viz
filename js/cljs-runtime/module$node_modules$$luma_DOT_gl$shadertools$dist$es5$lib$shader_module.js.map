{
"version":3,
"file":"module$node_modules$$luma_DOT_gl$shadertools$dist$es5$lib$shader_module.js",
"lineCount":8,
"mappings":"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",
"sources":["node_modules/@luma_DOT_gl/shadertools/dist/es5/lib/shader-module.js"],
"sourcesContent":["shadow$provide[\"module$node_modules$$luma_DOT_gl$shadertools$dist$es5$lib$shader_module\"] = function(global,require,module,exports) {\n\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.normalizeShaderModule = normalizeShaderModule;\nexports[\"default\"] = void 0;\n\nvar _classCallCheck2 = _interopRequireDefault(require(\"@babel/runtime/helpers/classCallCheck\"));\n\nvar _createClass2 = _interopRequireDefault(require(\"@babel/runtime/helpers/createClass\"));\n\nvar _utils = require(\"../utils\");\n\nvar _propTypes = require(\"./filters/prop-types\");\n\nvar VERTEX_SHADER = 'vs';\nvar FRAGMENT_SHADER = 'fs';\n\nvar ShaderModule = function () {\n  function ShaderModule(_ref) {\n    var name = _ref.name,\n        vs = _ref.vs,\n        fs = _ref.fs,\n        _ref$dependencies = _ref.dependencies,\n        dependencies = _ref$dependencies === void 0 ? [] : _ref$dependencies,\n        uniforms = _ref.uniforms,\n        getUniforms = _ref.getUniforms,\n        _ref$deprecations = _ref.deprecations,\n        deprecations = _ref$deprecations === void 0 ? [] : _ref$deprecations,\n        _ref$defines = _ref.defines,\n        defines = _ref$defines === void 0 ? {} : _ref$defines,\n        _ref$inject = _ref.inject,\n        inject = _ref$inject === void 0 ? {} : _ref$inject,\n        vertexShader = _ref.vertexShader,\n        fragmentShader = _ref.fragmentShader;\n    (0, _classCallCheck2[\"default\"])(this, ShaderModule);\n    (0, _utils.assert)(typeof name === 'string');\n    this.name = name;\n    this.vs = vs || vertexShader;\n    this.fs = fs || fragmentShader;\n    this.getModuleUniforms = getUniforms;\n    this.dependencies = dependencies;\n    this.deprecations = this._parseDeprecationDefinitions(deprecations);\n    this.defines = defines;\n    this.injections = normalizeInjections(inject);\n\n    if (uniforms) {\n      this.uniforms = (0, _propTypes.parsePropTypes)(uniforms);\n    }\n  }\n\n  (0, _createClass2[\"default\"])(ShaderModule, [{\n    key: \"getModuleSource\",\n    value: function getModuleSource(type) {\n      var moduleSource;\n\n      switch (type) {\n        case VERTEX_SHADER:\n          moduleSource = this.vs || '';\n          break;\n\n        case FRAGMENT_SHADER:\n          moduleSource = this.fs || '';\n          break;\n\n        default:\n          (0, _utils.assert)(false);\n      }\n\n      return \"#define MODULE_\".concat(this.name.toUpperCase().replace(/[^0-9a-z]/gi, '_'), \"\\n\").concat(moduleSource, \"// END MODULE_\").concat(this.name, \"\\n\\n\");\n    }\n  }, {\n    key: \"getUniforms\",\n    value: function getUniforms(opts, uniforms) {\n      if (this.getModuleUniforms) {\n        return this.getModuleUniforms(opts, uniforms);\n      }\n\n      if (this.uniforms) {\n        return this._defaultGetUniforms(opts);\n      }\n\n      return {};\n    }\n  }, {\n    key: \"getDefines\",\n    value: function getDefines() {\n      return this.defines;\n    }\n  }, {\n    key: \"checkDeprecations\",\n    value: function checkDeprecations(shaderSource, log) {\n      this.deprecations.forEach(function (def) {\n        if (def.regex.test(shaderSource)) {\n          if (def.deprecated) {\n            log.deprecated(def.old, def[\"new\"])();\n          } else {\n            log.removed(def.old, def[\"new\"])();\n          }\n        }\n      });\n    }\n  }, {\n    key: \"_parseDeprecationDefinitions\",\n    value: function _parseDeprecationDefinitions(deprecations) {\n      deprecations.forEach(function (def) {\n        switch (def.type) {\n          case 'function':\n            def.regex = new RegExp(\"\\\\b\".concat(def.old, \"\\\\(\"));\n            break;\n\n          default:\n            def.regex = new RegExp(\"\".concat(def.type, \" \").concat(def.old, \";\"));\n        }\n      });\n      return deprecations;\n    }\n  }, {\n    key: \"_defaultGetUniforms\",\n    value: function _defaultGetUniforms() {\n      var opts = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      var uniforms = {};\n      var propTypes = this.uniforms;\n\n      for (var key in propTypes) {\n        var propDef = propTypes[key];\n\n        if (key in opts && !propDef[\"private\"]) {\n          if (propDef.validate) {\n            (0, _utils.assert)(propDef.validate(opts[key], propDef), \"\".concat(this.name, \": invalid \").concat(key));\n          }\n\n          uniforms[key] = opts[key];\n        } else {\n          uniforms[key] = propDef.value;\n        }\n      }\n\n      return uniforms;\n    }\n  }]);\n  return ShaderModule;\n}();\n\nexports[\"default\"] = ShaderModule;\n\nfunction normalizeShaderModule(module) {\n  if (!module.normalized) {\n    module.normalized = true;\n\n    if (module.uniforms && !module.getUniforms) {\n      var shaderModule = new ShaderModule(module);\n      module.getUniforms = shaderModule.getUniforms.bind(shaderModule);\n    }\n  }\n\n  return module;\n}\n\nfunction normalizeInjections(injections) {\n  var result = {\n    vs: {},\n    fs: {}\n  };\n\n  for (var hook in injections) {\n    var injection = injections[hook];\n    var stage = hook.slice(0, 2);\n\n    if (typeof injection === 'string') {\n      injection = {\n        injection: injection\n      };\n    }\n\n    result[stage][hook] = injection;\n  }\n\n  return result;\n}\n//# sourceMappingURL=shader-module.js.map\n};"],
"names":["shadow$provide","global","require","module","exports","_interopRequireDefault","Object","defineProperty","value","normalizeShaderModule","normalized","uniforms","getUniforms","shaderModule","ShaderModule","bind","_classCallCheck2","_createClass2","_utils","_propTypes","_ref","name","vs","fs","_ref$dependencies","dependencies","_ref$deprecations","deprecations","_ref$defines","defines","_ref$inject","inject","vertexShader","fragmentShader","assert","getModuleUniforms","_parseDeprecationDefinitions","result","hook","injection","stage","slice","injections","parsePropTypes","key","getModuleSource","type","VERTEX_SHADER","moduleSource","FRAGMENT_SHADER","concat","toUpperCase","replace","opts","_defaultGetUniforms","getDefines","checkDeprecations","shaderSource","log","forEach","def","regex","test","deprecated","old","removed","RegExp","arguments","length","undefined","propTypes","propDef","validate"]
}
