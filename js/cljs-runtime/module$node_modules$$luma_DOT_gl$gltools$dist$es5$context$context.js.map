{
"version":3,
"file":"module$node_modules$$luma_DOT_gl$gltools$dist$es5$context$context.js",
"lineCount":13,
"mappings":"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",
"sources":["node_modules/@luma_DOT_gl/gltools/dist/es5/context/context.js"],
"sourcesContent":["shadow$provide[\"module$node_modules$$luma_DOT_gl$gltools$dist$es5$context$context\"] = function(global,require,module,exports) {\n\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.createGLContext = createGLContext;\nexports.instrumentGLContext = instrumentGLContext;\nexports.getContextDebugInfo = getContextDebugInfo;\nexports.resizeGLContext = resizeGLContext;\nexports.ERR_WEBGL2 = exports.ERR_WEBGL = exports.ERR_CONTEXT = void 0;\n\nvar _env = require(\"probe.gl/env\");\n\nvar _trackContextState = _interopRequireDefault(require(\"../state-tracker/track-context-state\"));\n\nvar _utils = require(\"../utils\");\n\nvar ERR_CONTEXT = 'Invalid WebGLRenderingContext';\nexports.ERR_CONTEXT = ERR_CONTEXT;\nvar ERR_WEBGL = ERR_CONTEXT;\nexports.ERR_WEBGL = ERR_WEBGL;\nvar ERR_WEBGL2 = 'Requires WebGL2';\nexports.ERR_WEBGL2 = ERR_WEBGL2;\nvar isBrowser = (0, _env.isBrowser)();\nvar isPage = isBrowser && typeof document !== 'undefined';\nvar CONTEXT_DEFAULTS = {\n  webgl2: true,\n  webgl1: true,\n  throwOnError: true,\n  manageState: true,\n  canvas: null,\n  debug: false,\n  width: 800,\n  height: 600\n};\n\nfunction createGLContext() {\n  var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  (0, _utils.assert)(isBrowser, \"createGLContext on available in the browser.\\nCreate your own headless context or use 'createHeadlessContext' from @luma.gl/test-utils\");\n  options = Object.assign({}, CONTEXT_DEFAULTS, options);\n  var _options = options,\n      width = _options.width,\n      height = _options.height;\n\n  function onError(message) {\n    if (options.throwOnError) {\n      throw new Error(message);\n    }\n\n    console.error(message);\n    return null;\n  }\n\n  options.onError = onError;\n  var gl;\n  var _options2 = options,\n      canvas = _options2.canvas;\n  var targetCanvas = getCanvas({\n    canvas: canvas,\n    width: width,\n    height: height,\n    onError: onError\n  });\n  gl = createBrowserContext(targetCanvas, options);\n\n  if (!gl) {\n    return null;\n  }\n\n  gl = instrumentGLContext(gl, options);\n  logInfo(gl);\n  return gl;\n}\n\nfunction instrumentGLContext(gl) {\n  var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n  if (!gl || gl._instrumented) {\n    return gl;\n  }\n\n  gl._version = gl._version || getVersion(gl);\n  gl.luma = gl.luma || {};\n  gl.luma.canvasSizeInfo = gl.luma.canvasSizeInfo || {};\n  options = Object.assign({}, CONTEXT_DEFAULTS, options);\n  var _options3 = options,\n      manageState = _options3.manageState,\n      debug = _options3.debug;\n\n  if (manageState) {\n    (0, _trackContextState[\"default\"])(gl, {\n      copyState: false,\n      log: function log() {\n        for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n          args[_key] = arguments[_key];\n        }\n\n        return _utils.log.log.apply(_utils.log, [1].concat(args))();\n      }\n    });\n  }\n\n  if (isBrowser && debug) {\n    if (!_env.global.makeDebugContext) {\n      _utils.log.warn('WebGL debug mode not activated. import \"@luma.gl/debug\" to enable.')();\n    } else {\n      gl = _env.global.makeDebugContext(gl, options);\n      _utils.log.level = Math.max(_utils.log.level, 1);\n    }\n  }\n\n  gl._instrumented = true;\n  return gl;\n}\n\nfunction getContextDebugInfo(gl) {\n  var vendorMasked = gl.getParameter(7936);\n  var rendererMasked = gl.getParameter(7937);\n  var ext = gl.getExtension('WEBGL_debug_renderer_info');\n  var vendorUnmasked = ext && gl.getParameter(ext.UNMASKED_VENDOR_WEBGL || 7936);\n  var rendererUnmasked = ext && gl.getParameter(ext.UNMASKED_RENDERER_WEBGL || 7937);\n  return {\n    vendor: vendorUnmasked || vendorMasked,\n    renderer: rendererUnmasked || rendererMasked,\n    vendorMasked: vendorMasked,\n    rendererMasked: rendererMasked,\n    version: gl.getParameter(7938),\n    shadingLanguageVersion: gl.getParameter(35724)\n  };\n}\n\nfunction resizeGLContext(gl) {\n  var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n  if (gl.canvas) {\n    var devicePixelRatio = (0, _utils.getDevicePixelRatio)(options.useDevicePixels);\n    setDevicePixelRatio(gl, devicePixelRatio, options);\n    return;\n  }\n\n  var ext = gl.getExtension('STACKGL_resize_drawingbuffer');\n\n  if (ext && \"width\" in options && \"height\" in options) {\n    ext.resize(options.width, options.height);\n  }\n}\n\nfunction createBrowserContext(canvas, options) {\n  var onError = options.onError;\n\n  var onCreateError = function onCreateError(error) {\n    return onError(\"WebGL context: \".concat(error.statusMessage || 'error'));\n  };\n\n  canvas.addEventListener('webglcontextcreationerror', onCreateError, false);\n  var _options$webgl = options.webgl1,\n      webgl1 = _options$webgl === void 0 ? true : _options$webgl,\n      _options$webgl2 = options.webgl2,\n      webgl2 = _options$webgl2 === void 0 ? true : _options$webgl2;\n  var gl = null;\n\n  if (webgl2) {\n    gl = gl || canvas.getContext('webgl2', options);\n    gl = gl || canvas.getContext('experimental-webgl2', options);\n  }\n\n  if (webgl1) {\n    gl = gl || canvas.getContext('webgl', options);\n    gl = gl || canvas.getContext('experimental-webgl', options);\n  }\n\n  canvas.removeEventListener('webglcontextcreationerror', onCreateError, false);\n\n  if (!gl) {\n    return onError(\"Failed to create \".concat(webgl2 && !webgl1 ? 'WebGL2' : 'WebGL', \" context\"));\n  }\n\n  return gl;\n}\n\nfunction getCanvas(_ref) {\n  var canvas = _ref.canvas,\n      _ref$width = _ref.width,\n      width = _ref$width === void 0 ? 800 : _ref$width,\n      _ref$height = _ref.height,\n      height = _ref$height === void 0 ? 600 : _ref$height,\n      onError = _ref.onError;\n  var targetCanvas;\n\n  if (typeof canvas === 'string') {\n    var isPageLoaded = isPage && document.readyState === 'complete';\n\n    if (!isPageLoaded) {\n      onError(\"createGLContext called on canvas '\".concat(canvas, \"' before page was loaded\"));\n    }\n\n    targetCanvas = document.getElementById(canvas);\n  } else if (canvas) {\n    targetCanvas = canvas;\n  } else {\n    targetCanvas = document.createElement('canvas');\n    targetCanvas.id = 'lumagl-canvas';\n    targetCanvas.style.width = Number.isFinite(width) ? \"\".concat(width, \"px\") : '100%';\n    targetCanvas.style.height = Number.isFinite(height) ? \"\".concat(height, \"px\") : '100%';\n    document.body.insertBefore(targetCanvas, document.body.firstChild);\n  }\n\n  return targetCanvas;\n}\n\nfunction logInfo(gl) {\n  var webGL = (0, _utils.isWebGL2)(gl) ? 'WebGL2' : 'WebGL1';\n  var info = getContextDebugInfo(gl);\n  var driver = info ? \"(\".concat(info.vendor, \",\").concat(info.renderer, \")\") : '';\n  var debug = gl.debug ? ' debug' : '';\n\n  _utils.log.info(1, \"\".concat(webGL).concat(debug, \" context \").concat(driver))();\n}\n\nfunction getVersion(gl) {\n  if (typeof WebGL2RenderingContext !== 'undefined' && gl instanceof WebGL2RenderingContext) {\n    return 2;\n  }\n\n  return 1;\n}\n\nfunction setDevicePixelRatio(gl, devicePixelRatio, options) {\n  var clientWidth = 'width' in options ? options.width : gl.canvas.clientWidth;\n  var clientHeight = 'height' in options ? options.height : gl.canvas.clientHeight;\n\n  if (!clientWidth || !clientHeight) {\n    _utils.log.log(1, 'Canvas clientWidth/clientHeight is 0')();\n\n    devicePixelRatio = 1;\n    clientWidth = gl.canvas.width || 1;\n    clientHeight = gl.canvas.height || 1;\n  }\n\n  gl.luma = gl.luma || {};\n  gl.luma.canvasSizeInfo = gl.luma.canvasSizeInfo || {};\n  var cachedSize = gl.luma.canvasSizeInfo;\n\n  if (cachedSize.clientWidth !== clientWidth || cachedSize.clientHeight !== clientHeight || cachedSize.devicePixelRatio !== devicePixelRatio) {\n    var clampedPixelRatio = devicePixelRatio;\n    var canvasWidth = Math.floor(clientWidth * clampedPixelRatio);\n    var canvasHeight = Math.floor(clientHeight * clampedPixelRatio);\n    gl.canvas.width = canvasWidth;\n    gl.canvas.height = canvasHeight;\n\n    if (gl.drawingBufferWidth !== canvasWidth || gl.drawingBufferHeight !== canvasHeight) {\n      _utils.log.warn(\"Device pixel ratio clamped\")();\n\n      clampedPixelRatio = Math.min(gl.drawingBufferWidth / clientWidth, gl.drawingBufferHeight / clientHeight);\n      gl.canvas.width = Math.floor(clientWidth * clampedPixelRatio);\n      gl.canvas.height = Math.floor(clientHeight * clampedPixelRatio);\n    }\n\n    Object.assign(gl.luma.canvasSizeInfo, {\n      clientWidth: clientWidth,\n      clientHeight: clientHeight,\n      devicePixelRatio: devicePixelRatio\n    });\n  }\n}\n//# sourceMappingURL=context.js.map\n};"],
"names":["shadow$provide","global","require","module","exports","instrumentGLContext","gl","options","arguments","length","undefined","_instrumented","_version","WebGL2RenderingContext","luma","canvasSizeInfo","_options3","Object","assign","CONTEXT_DEFAULTS","debug","manageState","_trackContextState","copyState","log","_len","args","Array","_key","_utils","apply","concat","isBrowser","_env","makeDebugContext","level","Math","max","warn","getContextDebugInfo","vendorMasked","getParameter","rendererMasked","ext","getExtension","vendorUnmasked","UNMASKED_VENDOR_WEBGL","rendererUnmasked","UNMASKED_RENDERER_WEBGL","vendor","renderer","version","shadingLanguageVersion","createBrowserContext","canvas","onError","onCreateError","error","statusMessage","addEventListener","_options$webgl","webgl1","_options$webgl2","webgl2","getContext","removeEventListener","getCanvas","_ref","_ref$width","width","_ref$height","height","isPage","document","readyState","targetCanvas","getElementById","createElement","id","style","Number","isFinite","body","insertBefore","firstChild","logInfo","webGL","isWebGL2","info","driver","_interopRequireDefault","defineProperty","value","createGLContext","message","throwOnError","Error","console","assert","_options","resizeGLContext","devicePixelRatio","getDevicePixelRatio","useDevicePixels","clientWidth","clientHeight","cachedSize","clampedPixelRatio","canvasWidth","floor","canvasHeight","drawingBufferWidth","drawingBufferHeight","min","resize","ERR_WEBGL2","ERR_WEBGL","ERR_CONTEXT"]
}
