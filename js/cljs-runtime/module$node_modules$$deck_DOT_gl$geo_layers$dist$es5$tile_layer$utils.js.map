{
"version":3,
"file":"module$node_modules$$deck_DOT_gl$geo_layers$dist$es5$tile_layer$utils.js",
"lineCount":7,
"mappings":"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",
"sources":["node_modules/@deck_DOT_gl/geo-layers/dist/es5/tile-layer/utils.js"],
"sourcesContent":["shadow$provide[\"module$node_modules$$deck_DOT_gl$geo_layers$dist$es5$tile_layer$utils\"] = function(global,require,module,exports) {\n\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.getURLFromTemplate = getURLFromTemplate;\nexports.tileToBoundingBox = tileToBoundingBox;\nexports.getTileIndices = getTileIndices;\nexports.urlType = void 0;\n\nvar _slicedToArray2 = _interopRequireDefault(require(\"@babel/runtime/helpers/slicedToArray\"));\n\nvar _tile2dTraversal = require(\"./tile-2d-traversal\");\n\nvar TILE_SIZE = 512;\nvar DEFAULT_EXTENT = [-Infinity, -Infinity, Infinity, Infinity];\nvar urlType = {\n  type: 'url',\n  value: '',\n  validate: function validate(value) {\n    return typeof value === 'string' || Array.isArray(value) && value.every(function (url) {\n      return typeof url === 'string';\n    });\n  },\n  equals: function equals(value1, value2) {\n    if (value1 === value2) {\n      return true;\n    }\n\n    if (!Array.isArray(value1) || !Array.isArray(value2)) {\n      return false;\n    }\n\n    var len = value1.length;\n\n    if (len !== value2.length) {\n      return false;\n    }\n\n    for (var i = 0; i < len; i++) {\n      if (value1[i] !== value2[i]) {\n        return false;\n      }\n    }\n\n    return true;\n  }\n};\nexports.urlType = urlType;\n\nfunction getURLFromTemplate(template, properties) {\n  if (!template || !template.length) {\n    return null;\n  }\n\n  if (Array.isArray(template)) {\n    var index = Math.abs(properties.x + properties.y) % template.length;\n    template = template[index];\n  }\n\n  return template.replace ? template.replace(/\\{ *([\\w_-]+) *\\}/g, function (_, property) {\n    return properties[property];\n  }) : null;\n}\n\nfunction getBoundingBox(viewport, zRange, extent) {\n  var bounds;\n\n  if (zRange && zRange.length === 2) {\n    var _zRange = (0, _slicedToArray2[\"default\"])(zRange, 2),\n        minZ = _zRange[0],\n        maxZ = _zRange[1];\n\n    var bounds0 = viewport.getBounds({\n      z: minZ\n    });\n    var bounds1 = viewport.getBounds({\n      z: maxZ\n    });\n    bounds = [Math.min(bounds0[0], bounds1[0]), Math.min(bounds0[1], bounds1[1]), Math.max(bounds0[2], bounds1[2]), Math.max(bounds0[3], bounds1[3])];\n  } else {\n    bounds = viewport.getBounds();\n  }\n\n  return [Math.max(bounds[0], extent[0]), Math.max(bounds[1], extent[1]), Math.min(bounds[2], extent[2]), Math.min(bounds[3], extent[3])];\n}\n\nfunction getTileIndex(_ref, scale) {\n  var _ref2 = (0, _slicedToArray2[\"default\"])(_ref, 2),\n      x = _ref2[0],\n      y = _ref2[1];\n\n  return [x * scale / TILE_SIZE, y * scale / TILE_SIZE];\n}\n\nfunction getScale(z) {\n  return Math.pow(2, z);\n}\n\nfunction osmTile2lngLat(x, y, z) {\n  var scale = getScale(z);\n  var lng = x / scale * 360 - 180;\n  var n = Math.PI - 2 * Math.PI * y / scale;\n  var lat = 180 / Math.PI * Math.atan(0.5 * (Math.exp(n) - Math.exp(-n)));\n  return [lng, lat];\n}\n\nfunction tile2XY(x, y, z) {\n  var scale = getScale(z);\n  return [x / scale * TILE_SIZE, y / scale * TILE_SIZE];\n}\n\nfunction tileToBoundingBox(viewport, x, y, z) {\n  if (viewport.isGeospatial) {\n    var _osmTile2lngLat = osmTile2lngLat(x, y, z),\n        _osmTile2lngLat2 = (0, _slicedToArray2[\"default\"])(_osmTile2lngLat, 2),\n        west = _osmTile2lngLat2[0],\n        north = _osmTile2lngLat2[1];\n\n    var _osmTile2lngLat3 = osmTile2lngLat(x + 1, y + 1, z),\n        _osmTile2lngLat4 = (0, _slicedToArray2[\"default\"])(_osmTile2lngLat3, 2),\n        east = _osmTile2lngLat4[0],\n        south = _osmTile2lngLat4[1];\n\n    return {\n      west: west,\n      north: north,\n      east: east,\n      south: south\n    };\n  }\n\n  var _tile2XY = tile2XY(x, y, z),\n      _tile2XY2 = (0, _slicedToArray2[\"default\"])(_tile2XY, 2),\n      left = _tile2XY2[0],\n      top = _tile2XY2[1];\n\n  var _tile2XY3 = tile2XY(x + 1, y + 1, z),\n      _tile2XY4 = (0, _slicedToArray2[\"default\"])(_tile2XY3, 2),\n      right = _tile2XY4[0],\n      bottom = _tile2XY4[1];\n\n  return {\n    left: left,\n    top: top,\n    right: right,\n    bottom: bottom\n  };\n}\n\nfunction getIdentityTileIndices(viewport, z, extent) {\n  var bbox = getBoundingBox(viewport, null, extent);\n  var scale = getScale(z);\n\n  var _getTileIndex = getTileIndex([bbox[0], bbox[1]], scale),\n      _getTileIndex2 = (0, _slicedToArray2[\"default\"])(_getTileIndex, 2),\n      minX = _getTileIndex2[0],\n      minY = _getTileIndex2[1];\n\n  var _getTileIndex3 = getTileIndex([bbox[2], bbox[3]], scale),\n      _getTileIndex4 = (0, _slicedToArray2[\"default\"])(_getTileIndex3, 2),\n      maxX = _getTileIndex4[0],\n      maxY = _getTileIndex4[1];\n\n  var indices = [];\n\n  for (var x = Math.floor(minX); x < maxX; x++) {\n    for (var y = Math.floor(minY); y < maxY; y++) {\n      indices.push({\n        x: x,\n        y: y,\n        z: z\n      });\n    }\n  }\n\n  return indices;\n}\n\nfunction getTileIndices(_ref3) {\n  var viewport = _ref3.viewport,\n      maxZoom = _ref3.maxZoom,\n      minZoom = _ref3.minZoom,\n      zRange = _ref3.zRange,\n      extent = _ref3.extent,\n      _ref3$tileSize = _ref3.tileSize,\n      tileSize = _ref3$tileSize === void 0 ? TILE_SIZE : _ref3$tileSize;\n  var z = Math.round(viewport.zoom + Math.log2(TILE_SIZE / tileSize));\n\n  if (Number.isFinite(minZoom) && z < minZoom) {\n    if (!extent) {\n      return [];\n    }\n\n    z = minZoom;\n  }\n\n  if (Number.isFinite(maxZoom) && z > maxZoom) {\n    z = maxZoom;\n  }\n\n  return viewport.isGeospatial ? (0, _tile2dTraversal.getOSMTileIndices)(viewport, z, zRange, extent || DEFAULT_EXTENT) : getIdentityTileIndices(viewport, z, extent || DEFAULT_EXTENT);\n}\n//# sourceMappingURL=utils.js.map\n};"],
"names":["shadow$provide","global","require","module","exports","getTileIndex","_ref","scale","_ref2","_slicedToArray2","x","TILE_SIZE","y","osmTile2lngLat","z","Math","pow","n","PI","atan","exp","tile2XY","_interopRequireDefault","Object","defineProperty","value","getURLFromTemplate","template","properties","length","Array","isArray","abs","replace","_","property","tileToBoundingBox","viewport","isGeospatial","_osmTile2lngLat","_osmTile2lngLat2","west","north","_osmTile2lngLat3","_osmTile2lngLat4","east","south","_tile2XY","_tile2XY2","left","top","_tile2XY3","_tile2XY4","right","bottom","getTileIndices","_ref3","maxZoom","minZoom","zRange","extent","_ref3$tileSize","tileSize","round","zoom","log2","Number","isFinite","bounds","getBounds","max","min","_getTileIndex","bbox","_getTileIndex2","minX","minY","_getTileIndex3","_getTileIndex4","maxX","maxY","indices","floor","push","urlType","_tile2dTraversal","DEFAULT_EXTENT","Infinity","type","validate","every","url","equals","value1","value2","len","i"]
}
