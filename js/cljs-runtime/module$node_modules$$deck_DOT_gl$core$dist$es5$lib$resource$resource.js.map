{
"version":3,
"file":"module$node_modules$$deck_DOT_gl$core$dist$es5$lib$resource$resource.js",
"lineCount":5,
"mappings":"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",
"sources":["node_modules/@deck_DOT_gl/core/dist/es5/lib/resource/resource.js"],
"sourcesContent":["shadow$provide[\"module$node_modules$$deck_DOT_gl$core$dist$es5$lib$resource$resource\"] = function(global,require,module,exports) {\n\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\n\nvar _classCallCheck2 = _interopRequireDefault(require(\"@babel/runtime/helpers/classCallCheck\"));\n\nvar _createClass2 = _interopRequireDefault(require(\"@babel/runtime/helpers/createClass\"));\n\nvar _core = require(\"@loaders.gl/core\");\n\nvar Resource = function () {\n  function Resource(id, data, context) {\n    (0, _classCallCheck2[\"default\"])(this, Resource);\n    this.id = id;\n    this.context = context;\n    this._loadCount = 0;\n    this._subscribers = new Set();\n    this.setData(data);\n  }\n\n  (0, _createClass2[\"default\"])(Resource, [{\n    key: \"subscribe\",\n    value: function subscribe(consumer) {\n      this._subscribers.add(consumer);\n    }\n  }, {\n    key: \"unsubscribe\",\n    value: function unsubscribe(consumer) {\n      this._subscribers[\"delete\"](consumer);\n    }\n  }, {\n    key: \"inUse\",\n    value: function inUse() {\n      return this._subscribers.size > 0;\n    }\n  }, {\n    key: \"delete\",\n    value: function _delete() {}\n  }, {\n    key: \"getData\",\n    value: function getData() {\n      var _this = this;\n\n      return this.isLoaded ? this._error ? Promise.reject(this._error) : this._content : this._loader.then(function () {\n        return _this.getData();\n      });\n    }\n  }, {\n    key: \"setData\",\n    value: function setData(data, forceUpdate) {\n      var _this2 = this;\n\n      if (data === this._data && !forceUpdate) {\n        return;\n      }\n\n      this._data = data;\n      var loadCount = ++this._loadCount;\n      var loader = data;\n\n      if (typeof data === 'string') {\n        loader = (0, _core.load)(data);\n      }\n\n      if (loader instanceof Promise) {\n        this.isLoaded = false;\n        this._loader = loader.then(function (result) {\n          if (_this2._loadCount === loadCount) {\n            _this2.isLoaded = true;\n            _this2._error = null;\n            _this2._content = result;\n          }\n        })[\"catch\"](function (error) {\n          if (_this2._loadCount === loadCount) {\n            _this2.isLoaded = true;\n            _this2._error = error || true;\n          }\n        });\n      } else {\n        this.isLoaded = true;\n        this._error = null;\n        this._content = data;\n      }\n\n      var _iteratorNormalCompletion = true;\n      var _didIteratorError = false;\n      var _iteratorError = undefined;\n\n      try {\n        for (var _iterator = this._subscribers[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n          var subscriber = _step.value;\n          subscriber.onChange(this.getData());\n        }\n      } catch (err) {\n        _didIteratorError = true;\n        _iteratorError = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion && _iterator[\"return\"] != null) {\n            _iterator[\"return\"]();\n          }\n        } finally {\n          if (_didIteratorError) {\n            throw _iteratorError;\n          }\n        }\n      }\n    }\n  }]);\n  return Resource;\n}();\n\nexports[\"default\"] = Resource;\n//# sourceMappingURL=resource.js.map\n};"],
"names":["shadow$provide","global","require","module","exports","_interopRequireDefault","Object","defineProperty","value","_classCallCheck2","_createClass2","_core","Resource","id","data","context","_loadCount","_subscribers","Set","setData","key","subscribe","consumer","add","unsubscribe","inUse","size","_delete","getData","_this","isLoaded","_error","Promise","reject","_content","_loader","then","forceUpdate","_this2","_data","loadCount","loader","load","result","error","_iteratorNormalCompletion","_didIteratorError","_iteratorError","undefined","_iterator","Symbol","iterator","_step","done","next","onChange","err"]
}
