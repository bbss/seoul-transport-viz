{
"version":3,
"file":"module$node_modules$$luma_DOT_gl$webgl$dist$es5$classes$program_configuration.js",
"lineCount":8,
"mappings":"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",
"sources":["node_modules/@luma_DOT_gl/webgl/dist/es5/classes/program-configuration.js"],
"sourcesContent":["shadow$provide[\"module$node_modules$$luma_DOT_gl$webgl$dist$es5$classes$program_configuration\"] = function(global,require,module,exports) {\n\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\n\nvar _classCallCheck2 = _interopRequireDefault(require(\"@babel/runtime/helpers/classCallCheck\"));\n\nvar _createClass2 = _interopRequireDefault(require(\"@babel/runtime/helpers/createClass\"));\n\nvar _accessor = _interopRequireDefault(require(\"./accessor\"));\n\nvar _gltools = require(\"@luma.gl/gltools\");\n\nvar _attributeUtils = require(\"../webgl-utils/attribute-utils\");\n\nvar ProgramConfiguration = function () {\n  function ProgramConfiguration(program) {\n    (0, _classCallCheck2[\"default\"])(this, ProgramConfiguration);\n    this.id = program.id;\n    this.attributeInfos = [];\n    this.attributeInfosByName = {};\n    this.attributeInfosByLocation = [];\n    this.varyingInfos = [];\n    this.varyingInfosByName = {};\n    Object.seal(this);\n\n    this._readAttributesFromProgram(program);\n\n    this._readVaryingsFromProgram(program);\n  }\n\n  (0, _createClass2[\"default\"])(ProgramConfiguration, [{\n    key: \"getAttributeInfo\",\n    value: function getAttributeInfo(locationOrName) {\n      var location = Number(locationOrName);\n\n      if (Number.isFinite(location)) {\n        return this.attributeInfosByLocation[location];\n      }\n\n      return this.attributeInfosByName[locationOrName] || null;\n    }\n  }, {\n    key: \"getAttributeLocation\",\n    value: function getAttributeLocation(locationOrName) {\n      var attributeInfo = this.getAttributeInfo(locationOrName);\n      return attributeInfo ? attributeInfo.location : -1;\n    }\n  }, {\n    key: \"getAttributeAccessor\",\n    value: function getAttributeAccessor(locationOrName) {\n      var attributeInfo = this.getAttributeInfo(locationOrName);\n      return attributeInfo ? attributeInfo.accessor : null;\n    }\n  }, {\n    key: \"getVaryingInfo\",\n    value: function getVaryingInfo(locationOrName) {\n      var location = Number(locationOrName);\n\n      if (Number.isFinite(location)) {\n        return this.varyingInfos[location];\n      }\n\n      return this.varyingInfosByName[locationOrName] || null;\n    }\n  }, {\n    key: \"getVaryingIndex\",\n    value: function getVaryingIndex(locationOrName) {\n      var varying = this.getVaryingInfo();\n      return varying ? varying.location : -1;\n    }\n  }, {\n    key: \"getVaryingAccessor\",\n    value: function getVaryingAccessor(locationOrName) {\n      var varying = this.getVaryingInfo();\n      return varying ? varying.accessor : null;\n    }\n  }, {\n    key: \"_readAttributesFromProgram\",\n    value: function _readAttributesFromProgram(program) {\n      var gl = program.gl;\n      var count = gl.getProgramParameter(program.handle, 35721);\n\n      for (var index = 0; index < count; index++) {\n        var _gl$getActiveAttrib = gl.getActiveAttrib(program.handle, index),\n            name = _gl$getActiveAttrib.name,\n            type = _gl$getActiveAttrib.type,\n            size = _gl$getActiveAttrib.size;\n\n        var location = gl.getAttribLocation(program.handle, name);\n\n        if (location >= 0) {\n          this._addAttribute(location, name, type, size);\n        }\n      }\n\n      this.attributeInfos.sort(function (a, b) {\n        return a.location - b.location;\n      });\n    }\n  }, {\n    key: \"_readVaryingsFromProgram\",\n    value: function _readVaryingsFromProgram(program) {\n      var gl = program.gl;\n\n      if (!(0, _gltools.isWebGL2)(gl)) {\n        return;\n      }\n\n      var count = gl.getProgramParameter(program.handle, 35971);\n\n      for (var location = 0; location < count; location++) {\n        var _gl$getTransformFeedb = gl.getTransformFeedbackVarying(program.handle, location),\n            name = _gl$getTransformFeedb.name,\n            type = _gl$getTransformFeedb.type,\n            size = _gl$getTransformFeedb.size;\n\n        this._addVarying(location, name, type, size);\n      }\n\n      this.varyingInfos.sort(function (a, b) {\n        return a.location - b.location;\n      });\n    }\n  }, {\n    key: \"_addAttribute\",\n    value: function _addAttribute(location, name, compositeType, size) {\n      var _decomposeCompositeGL = (0, _attributeUtils.decomposeCompositeGLType)(compositeType),\n          type = _decomposeCompositeGL.type,\n          components = _decomposeCompositeGL.components;\n\n      var accessor = {\n        type: type,\n        size: size * components\n      };\n\n      this._inferProperties(location, name, accessor);\n\n      var attributeInfo = {\n        location: location,\n        name: name,\n        accessor: new _accessor[\"default\"](accessor)\n      };\n      this.attributeInfos.push(attributeInfo);\n      this.attributeInfosByLocation[location] = attributeInfo;\n      this.attributeInfosByName[attributeInfo.name] = attributeInfo;\n    }\n  }, {\n    key: \"_inferProperties\",\n    value: function _inferProperties(location, name, accessor) {\n      if (/instance/i.test(name)) {\n        accessor.divisor = 1;\n      }\n    }\n  }, {\n    key: \"_addVarying\",\n    value: function _addVarying(location, name, compositeType, size) {\n      var _decomposeCompositeGL2 = (0, _attributeUtils.decomposeCompositeGLType)(compositeType),\n          type = _decomposeCompositeGL2.type,\n          components = _decomposeCompositeGL2.components;\n\n      var accessor = new _accessor[\"default\"]({\n        type: type,\n        size: size * components\n      });\n      var varying = {\n        location: location,\n        name: name,\n        accessor: accessor\n      };\n      this.varyingInfos.push(varying);\n      this.varyingInfosByName[varying.name] = varying;\n    }\n  }]);\n  return ProgramConfiguration;\n}();\n\nexports[\"default\"] = ProgramConfiguration;\n//# sourceMappingURL=program-configuration.js.map\n};"],
"names":["shadow$provide","global","require","module","exports","_interopRequireDefault","Object","defineProperty","value","_classCallCheck2","_createClass2","_accessor","_gltools","_attributeUtils","ProgramConfiguration","program","id","attributeInfos","attributeInfosByName","attributeInfosByLocation","varyingInfos","varyingInfosByName","seal","_readAttributesFromProgram","_readVaryingsFromProgram","key","getAttributeInfo","locationOrName","location","Number","isFinite","getAttributeLocation","attributeInfo","getAttributeAccessor","accessor","getVaryingInfo","getVaryingIndex","varying","getVaryingAccessor","gl","count","getProgramParameter","handle","index","_gl$getActiveAttrib","getActiveAttrib","name","type","size","getAttribLocation","_addAttribute","sort","a","b","isWebGL2","_gl$getTransformFeedb","getTransformFeedbackVarying","_addVarying","compositeType","_decomposeCompositeGL","decomposeCompositeGLType","components","_inferProperties","push","test","divisor","_decomposeCompositeGL2"]
}
