shadow$provide.module$node_modules$mapbox_gl$dist$mapbox_gl=function(global$jscomp$0,require,module,exports){(function(global,factory){"object"===typeof exports&&"undefined"!==typeof module?module.exports=factory():"function"===typeof define&&define.amd?define(factory):(global=global||self,global.mapboxgl=factory())})(this,function(){function define(_,chunk){if(shared)if(worker){_="var sharedChunk \x3d {}; ("+shared+")(sharedChunk); ("+worker+")(sharedChunk);";var sharedChunk={};shared(sharedChunk);
mapboxgl=chunk(sharedChunk);"undefined"!==typeof window&&(mapboxgl.workerUrl=window.URL.createObjectURL(new Blob([_],{type:"text/javascript"})))}else worker=chunk;else shared=chunk}var shared,worker,mapboxgl;define(["exports"],function(t$jscomp$4){function e$jscomp$4(t,e){return t(e={exports:{}},e.exports),e.exports}function n$jscomp$2(t,e,r,n){this.cx=3*t;this.bx=3*(r-t)-this.cx;this.ax=1-this.cx-this.bx;this.cy=3*e;this.by=3*(n-e)-this.cy;this.ay=1-this.cy-this.by;this.p1x=t;this.p1y=n;this.p2x=
r;this.p2y=n}function a$jscomp$3(t,e){this.x=t;this.y=e}function s$jscomp$3(t$jscomp$0,e,n,i){var a=new r$jscomp$4(t$jscomp$0,e,n,i);return function(t){return a.solve(t)}}function l$jscomp$2(t,e,r){return Math.min(r,Math.max(e,t))}function p$jscomp$3(t,e,r){var n=r-e;t=((t-e)%n+n)%n+e;return t===e?r:t}function c$jscomp$4(t){for(var e=[],r=arguments.length-1;0<r--;)e[r]=arguments[r+1];for(r=0;r<e.length;r+=1){var a=e[r],o;for(o in a)t[o]=a[o]}return t}function y$jscomp$2(){return function t(e){return e?
(e^16*Math.random()>>e/4).toString(16):"10000000-1000-4000-8000-100000000000".replace(/[018]/g,t)}()}function d$jscomp$2(t){return!!t&&/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(t)}function m$jscomp$2(t$jscomp$0,e){t$jscomp$0.forEach(function(t){e[t]&&(e[t]=e[t].bind(e))})}function v$jscomp$2(t,e){return-1!==t.indexOf(e,t.length-e.length)}function g$jscomp$1(t,e,r){var n={},i;for(i in t)n[i]=e.call(r||this,t[i],i,t);return n}function x$jscomp$2(t,e,r){var n={},
i;for(i in t)e.call(r||this,t[i],i,t)&&(n[i]=t[i]);return n}function b$jscomp$2(t){return Array.isArray(t)?t.map(b$jscomp$2):"object"==typeof t&&t?g$jscomp$1(t,b$jscomp$2):t}function _$jscomp$0(t){w$jscomp$2[t]||("undefined"!=typeof console&&console.warn(t),w$jscomp$2[t]=!0)}function A$jscomp$2(t,e,r){return(r.y-t.y)*(e.x-t.x)>(e.y-t.y)*(r.x-t.x)}function k$jscomp$2(){return"undefined"!=typeof WorkerGlobalScope&&"undefined"!=typeof self&&self instanceof WorkerGlobalScope}function I$jscomp$2(t$jscomp$0){var e=
{};if(t$jscomp$0.replace(/(?:^|(?:\s*,\s*))([^\x00-\x20\(\)<>@,;:\\"\/\[\]\?=\{\}\x7F]+)(?:=(?:([^\x00-\x20\(\)<>@,;:\\"\/\[\]\?=\{\}\x7F]+)|(?:"((?:[^"\\]|\\.)*)")))?/g,function(t,r,n,i){t=n||i;return e[r]=!t||t.toLowerCase(),""}),e["max-age"])t$jscomp$0=parseInt(e["max-age"],10),isNaN(t$jscomp$0)?delete e["max-age"]:e["max-age"]=t$jscomp$0;return e}function C$jscomp$1(t){if(null==z$jscomp$2){var e=t.navigator?t.navigator.userAgent:null;z$jscomp$2=!!t.safari||!(!e||!(/\b(iPad|iPhone|iPod)\b/.test(e)||
e.match("Safari")&&!e.match("Chrome")))}return z$jscomp$2}function M$jscomp$2(t){try{var e=o$jscomp$2[t];return e.setItem("_mapbox_test_",1),e.removeItem("_mapbox_test_"),!0}catch(t$385){return!1}}function q(t){var e=t.createTexture();t.bindTexture(t.TEXTURE_2D,e);try{if(t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,B$jscomp$0),t.isContextLost())return;O$jscomp$0.supported=!0}catch(t$386){}t.deleteTexture(e);U$jscomp$0=!0}function G(t){return 0===t.indexOf("mapbox:")}function H$jscomp$0(t){t=
t.match(J);if(!t)throw Error("Unable to parse URL object");return{protocol:t[1],authority:t[2],path:t[3]||"/",params:t[4]?t[4].split("\x26"):[]}}function Y(t){var e=t.params.length?"?"+t.params.join("\x26"):"";return t.protocol+"://"+t.authority+t.path+e}function $(t$jscomp$0){if(!t$jscomp$0)return null;t$jscomp$0=t$jscomp$0.split(".");if(!t$jscomp$0||3!==t$jscomp$0.length)return null;try{return JSON.parse(decodeURIComponent(o$jscomp$2.atob(t$jscomp$0[1]).split("").map(function(t){return"%"+("00"+
t.charCodeAt(0).toString(16)).slice(-2)}).join("")))}catch(t$387){return null}}function ut(){o$jscomp$2.caches&&!Q&&(Q=o$jscomp$2.caches.open("mapbox-tiles"))}function lt(t){var e=t.indexOf("?");return 0>e?t:t.slice(0,e)}function ht(){return null==pt&&(pt=o$jscomp$2.OffscreenCanvas&&(new o$jscomp$2.OffscreenCanvas(1,1)).getContext("2d")&&"function"==typeof o$jscomp$2.createImageBitmap),pt}function _t(t,e,r){r[t]&&-1!==r[t].indexOf(e)||(r[t]=r[t]||[],r[t].push(e))}function At(t,e,r){r&&r[t]&&(e=r[t].indexOf(e),
-1!==e&&r[t].splice(e,1))}function Mt(t){var e=t.value;return e?[new Ct(t.key,e,"constants have been deprecated as of v8")]:[]}function Et(t){for(var e=[],r=arguments.length-1;0<r--;)e[r]=arguments[r+1];for(r=0;r<e.length;r+=1){var a=e[r],o;for(o in a)t[o]=a[o]}return t}function Tt(t){return t instanceof Number||t instanceof String||t instanceof Boolean?t.valueOf():t}function Pt(t){if(Array.isArray(t))return t.map(Pt);if(t instanceof Object&&!(t instanceof Number||t instanceof String||t instanceof
Boolean)){var e={},r;for(r in t)e[r]=Pt(t[r]);return e}return Tt(t)}function Gt(t,e){return{kind:"array",itemType:t,N:e}}function Zt(t){if("array"===t.kind){var e=Zt(t.itemType);return"number"==typeof t.N?"array\x3c"+e+", "+t.N+"\x3e":"value"===t.itemType.kind?"array":"array\x3c"+e+"\x3e"}return t.kind}function Jt(t,e){if("error"===e.kind)return null;if("array"===t.kind){if("array"===e.kind&&(0===e.N&&"value"===e.itemType.kind||!Jt(t.itemType,e.itemType))&&("number"!=typeof t.N||t.N===e.N))return null}else{if(t.kind===
e.kind)return null;if("value"===t.kind)for(var r=0,n=Xt;r<n.length;r+=1)if(!Jt(n[r],e))return null}return"Expected "+Zt(t)+" but found "+Zt(e)+" instead."}function Ht(t,e$jscomp$0){return e$jscomp$0.some(function(e){return e.kind===t.kind})}function Yt(t,e$jscomp$0){return e$jscomp$0.some(function(e){return"null"===e?null===t:"array"===e?Array.isArray(t):"object"===e?t&&!Array.isArray(t)&&"object"==typeof t:e===typeof t})}function ne(t,e,r,n){return"number"==typeof t&&0<=t&&255>=t&&"number"==typeof e&&
0<=e&&255>=e&&"number"==typeof r&&0<=r&&255>=r?void 0===n||"number"==typeof n&&0<=n&&1>=n?null:"Invalid rgba value ["+[t,e,r,n].join(", ")+"]: 'a' must be between 0 and 1.":"Invalid rgba value ["+("number"==typeof n?[t,e,r,n]:[t,e,r]).join(", ")+"]: 'r', 'g', and 'b' must be between 0 and 255."}function ie(t){if(null===t||"string"==typeof t||"boolean"==typeof t||"number"==typeof t||t instanceof Wt||t instanceof Qt||t instanceof ee||t instanceof re)return!0;if(Array.isArray(t)){for(var e=0;e<t.length;e+=
1)if(!ie(t[e]))return!1;return!0}if("object"==typeof t){for(e in t)if(!ie(t[e]))return!1;return!0}return!1}function ae(t){if(null===t)return Ft;if("string"==typeof t)return Lt;if("boolean"==typeof t)return Rt;if("number"==typeof t)return Dt;if(t instanceof Wt)return Ot;if(t instanceof Qt)return qt;if(t instanceof ee)return Nt;if(t instanceof re)return Kt;if(Array.isArray(t)){for(var e,r=t.length,n=0;n<t.length;n+=1){var a=ae(t[n]);if(e){if(e===a)continue;e=jt;break}e=a}return Gt(e||jt,r)}return Ut}
function oe(t){var e=typeof t;return null===t?"":"string"===e||"number"===e||"boolean"===e?String(t):t instanceof Wt||t instanceof ee||t instanceof re?t.toString():JSON.stringify(t)}function xe(t,e){t[0]=Math.min(t[0],e[0]);t[1]=Math.min(t[1],e[1]);t[2]=Math.max(t[2],e[0]);t[3]=Math.max(t[3],e[1])}function be(t,e){return!(t[0]<=e[0]||t[2]>=e[2]||t[1]<=e[1]||t[3]>=e[3])}function Ae(t,e$jscomp$0){for(var r,n,i,a,o,s,u,l=!1,p=0,c=e$jscomp$0.length;p<c;p++)for(var h=e$jscomp$0[p],f=0,y=h.length;f<y-1;f++){if(0==
(a=(r=t)[0]-(n=h[f])[0])*(u=r[1]-(i=h[f+1])[1])-(s=r[0]-i[0])*(o=r[1]-n[1])&&0>=a*s&&0>=o*u)return!1;var e=h[f],r$jscomp$0=h[f+1];e[1]>t[1]!=r$jscomp$0[1]>t[1]&&t[0]<(r$jscomp$0[0]-e[0])*(t[1]-e[1])/(r$jscomp$0[1]-e[1])+e[0]&&(l=!l)}return l}function ke(t,e,r,n){var i=n[0]-r[0];n=n[1]-r[1];t=(t[0]-r[0])*n-i*(t[1]-r[1]);e=(e[0]-r[0])*n-i*(e[1]-r[1]);return 0<t&&0>e||0>t&&0<e}function ze(t$jscomp$0,e$jscomp$0){for(var r=0;r<t$jscomp$0.length;++r)if(!Ae(t$jscomp$0[r],e$jscomp$0))return!1;for(r=0;r<t$jscomp$0.length-
1;++r){var JSCompiler_inline_result;a:{for(var c=JSCompiler_inline_result=void 0,p=void 0,l=void 0,u=void 0,s=void 0,t=t$jscomp$0[r],e=t$jscomp$0[r+1],n=0,i=e$jscomp$0;n<i.length;n+=1)for(var a=i[n],o=0;o<a.length-1;++o)if(0!=(c=[(p=a[o+1])[0]-(l=a[o])[0],p[1]-l[1]])[0]*(JSCompiler_inline_result=[(u=e)[0]-(s=t)[0],u[1]-s[1]])[1]-c[1]*JSCompiler_inline_result[0]&&ke(s,u,l,p)&&ke(l,p,s,u)){JSCompiler_inline_result=!0;break a}JSCompiler_inline_result=!1}if(JSCompiler_inline_result)return!1}return!0}
function Me(t,e,r){for(var n=[],i=0;i<t.length;i++){for(var a=[],o=0;o<t[i].length;o++){var s=t[i][o];var i$jscomp$0=Math.pow(2,r.z);s=[Math.round((180+s[0])/360*i$jscomp$0*8192),Math.round((180-180/Math.PI*Math.log(Math.tan(Math.PI/4+s[1]*Math.PI/360)))/360*i$jscomp$0*8192)];xe(e,s);a.push(s)}n.push(a)}return n}function Ee(t,e,r){for(var n=[],i=0;i<t.length;i++){var a=Me(t[i],e,r);n.push(a)}return n}function Te(t,e,r,n){if(t[0]<r[0]||t[0]>r[2]){var i=.5*n,a=t[0]-r[0]>i?-n:r[0]-t[0]>i?n:0;0===a&&
(a=t[0]-r[2]>i?-n:r[2]-t[0]>i?n:0);t[0]+=a}xe(e,t)}function Pe(t,e,r,n){var i=8192*Math.pow(2,n.z);n=[8192*n.x,8192*n.y];for(var o=[],s=0;s<t.length;s+=1)for(var l=0,p=t[s];l<p.length;l+=1){var c=p[l];c=[c.x+n[0],c.y+n[1]];Te(c,e,r,i);o.push(c)}return o}function Be(t,e,r,n){var a=8192*Math.pow(2,n.z),o=[8192*n.x,8192*n.y];n=[];for(var u=0;u<t.length;u+=1){for(var p=[],c=0,h=t[u];c<h.length;c+=1){var f=h[c];f=[f.x+o[0],f.y+o[1]];xe(e,f);p.push(f)}n.push(p)}if(e[2]-e[0]<=a/2)for(e[0]=e[1]=1/0,e[2]=
e[3]=-1/0,t=0;t<n.length;t+=1)for(o=0,u=n[t];o<u.length;o+=1)Te(u[o],e,r,a);return n}function Fe(t$jscomp$0){if(t$jscomp$0 instanceof ve&&("get"===t$jscomp$0.name&&1===t$jscomp$0.args.length||"feature-state"===t$jscomp$0.name||"has"===t$jscomp$0.name&&1===t$jscomp$0.args.length||"properties"===t$jscomp$0.name||"geometry-type"===t$jscomp$0.name||"id"===t$jscomp$0.name||/^filter-/.test(t$jscomp$0.name))||t$jscomp$0 instanceof Ve)return!1;var e=!0;return t$jscomp$0.eachChild(function(t){e&&!Fe(t)&&(e=
!1)}),e}function De(t$jscomp$0){if(t$jscomp$0 instanceof ve&&"feature-state"===t$jscomp$0.name)return!1;var e=!0;return t$jscomp$0.eachChild(function(t){e&&!De(t)&&(e=!1)}),e}function Le(t$jscomp$0,e){if(t$jscomp$0 instanceof ve&&0<=e.indexOf(t$jscomp$0.name))return!1;var r=!0;return t$jscomp$0.eachChild(function(t){r&&!Le(t,e)&&(r=!1)}),r}function Ue(t,e){for(var r,n=t.length-1,i=0,a=n,o;i<=a;)if((r=t[o=Math.floor((i+a)/2)])<=e){if(o===n||e<t[o+1])return o;i=o+1}else{if(!(r>e))throw new ue("Input is not a number.");
a=o-1}return 0}function qe(t,e,r){return t*(1-r)+e*r}function Xe(t){return.008856451679035631<t?Math.pow(t,1/3):t/Ke+4/29}function Je(t){return t>6/29?t*t*t:Ke*(t-4/29)}function He(t){return 255*(.0031308>=t?12.92*t:1.055*Math.pow(t,1/2.4)-.055)}function Ye(t){return.04045>=(t/=255)?t/12.92:Math.pow((t+.055)/1.055,2.4)}function $e(t){var e=Ye(t.r),r=Ye(t.g),n=Ye(t.b),i=Xe((.4124564*e+.3575761*r+.1804375*n)/.95047),a=Xe(.2126729*e+.7151522*r+.072175*n);return{l:116*a-16,a:500*(i-a),b:200*(a-Xe((.0193339*
e+.119192*r+.9503041*n)/1.08883)),alpha:t.a}}function We(t){var e=(t.l+16)/116,r=isNaN(t.a)?e:e+t.a/500,n=isNaN(t.b)?e:e-t.b/200;return e=1*Je(e),r=.95047*Je(r),n=1.08883*Je(n),new Wt(He(3.2404542*r-1.5371385*e-.4985314*n),He(-.969266*r+1.8760108*e+.041556*n),He(.0556434*r-.2040259*e+1.0572252*n),t.alpha)}function ir(t,e,r,n){n-=r;t-=r;return 0===n?0:1===e?t/n:(Math.pow(e,t)-1)/(Math.pow(e,n)-1)}function fr(t,e){return"\x3d\x3d"===t||"!\x3d"===t?"boolean"===e.kind||"string"===e.kind||"number"===e.kind||
"null"===e.kind||"value"===e.kind:"string"===e.kind||"number"===e.kind||"value"===e.kind}function yr(t,e,r,n){return 0===n.compare(e,r)}function dr(t$jscomp$0,e$jscomp$0,r$jscomp$0){var n="\x3d\x3d"!==t$jscomp$0&&"!\x3d"!==t$jscomp$0;return function(){function i$jscomp$0(t,e,r){this.type=Rt;this.lhs=t;this.rhs=e;this.collator=r;this.hasUntypedArgument="value"===t.type.kind||"value"===e.type.kind}return i$jscomp$0.parse=function(t,e){if(3!==t.length&&4!==t.length)return e.error("Expected two or three arguments.");
var r=t[0],a=e.parse(t[1],1,jt);if(!a)return null;if(!fr(r,a.type))return e.concat(1).error('"'+r+"\" comparisons are not supported for type '"+Zt(a.type)+"'.");var o=e.parse(t[2],2,jt);if(!o)return null;if(!fr(r,o.type))return e.concat(2).error('"'+r+"\" comparisons are not supported for type '"+Zt(o.type)+"'.");if(a.type.kind!==o.type.kind&&"value"!==a.type.kind&&"value"!==o.type.kind)return e.error("Cannot compare types '"+Zt(a.type)+"' and '"+Zt(o.type)+"'.");n&&("value"===a.type.kind&&"value"!==
o.type.kind?a=new pe(o.type,[a]):"value"!==a.type.kind&&"value"===o.type.kind&&(o=new pe(a.type,[o])));r=null;if(4===t.length){if("string"!==a.type.kind&&"string"!==o.type.kind&&"value"!==a.type.kind&&"value"!==o.type.kind)return e.error("Cannot use collator to compare non-string types.");if(!(r=e.parse(t[3],3,qt)))return null}return new i$jscomp$0(a,o,r)},i$jscomp$0.prototype.evaluate=function(i){var a=this.lhs.evaluate(i),o=this.rhs.evaluate(i);if(n&&this.hasUntypedArgument){var s=ae(a),u=ae(o);
if(s.kind!==u.kind||"string"!==s.kind&&"number"!==s.kind)throw new ue('Expected arguments for "'+t$jscomp$0+'" to be (string, string) or (number, number), but found ('+s.kind+", "+u.kind+") instead.");}return this.collator&&!n&&this.hasUntypedArgument&&(s=ae(a),u=ae(o),"string"!==s.kind||"string"!==u.kind)?e$jscomp$0(i,a,o):this.collator?r$jscomp$0(i,a,o,this.collator.evaluate(i)):e$jscomp$0(i,a,o)},i$jscomp$0.prototype.eachChild=function(t){t(this.lhs);t(this.rhs);this.collator&&t(this.collator)},
i$jscomp$0.prototype.outputDefined=function(){return!0},i$jscomp$0.prototype.serialize=function(){var e=[t$jscomp$0];return this.eachChild(function(t){e.push(t.serialize())}),e},i$jscomp$0}()}function kr(t,e){var r=e[0],n=e[1],i=e[2];e=e[3];r=r.evaluate(t);n=n.evaluate(t);i=i.evaluate(t);t=e?e.evaluate(t):1;if(e=ne(r,n,i,t))throw new ue(e);return new Wt(r/255*t,n/255*t,i/255*t,t)}function zr(t,e){t=e[t];return void 0===t?null:t}function Er(t){return{result:"error",value:t}}function Tr(t){return"data-driven"===
t["property-type"]||"cross-faded-data-driven"===t["property-type"]}function Pr(t){return!!t.expression&&-1<t.expression.parameters.indexOf("zoom")}function Br(t){return!!t.expression&&t.expression.interpolated}function Vr(t){return t instanceof Number?"number":t instanceof String?"string":t instanceof Boolean?"boolean":Array.isArray(t)?"array":null===t?"null":typeof t}function Fr(t){return"object"==typeof t&&null!==t&&!Array.isArray(t)}function Dr(t){return t}function Lr(t,e,r){return void 0!==t?
t:void 0!==e?e:void 0!==r?r:void 0}function Rr(t,e,r,n,i){return Lr(typeof r===i?n[r]:void 0,t.default,e.default)}function Or(t$jscomp$0,e,r){if("number"!==Vr(r))return Lr(t$jscomp$0.default,e.default);e=t$jscomp$0.stops.length;if(1===e||r<=t$jscomp$0.stops[0][0])return t$jscomp$0.stops[0][1];if(r>=t$jscomp$0.stops[e-1][0])return t$jscomp$0.stops[e-1][1];r=Ue(t$jscomp$0.stops.map(function(t){return t[0]}),r);return t$jscomp$0.stops[r][1]}function Ur(t$jscomp$0,e$jscomp$0,r$jscomp$0){var n$jscomp$0=
void 0!==t$jscomp$0.base?t$jscomp$0.base:1;if("number"!==Vr(r$jscomp$0))return Lr(t$jscomp$0.default,e$jscomp$0.default);var i=t$jscomp$0.stops.length;if(1===i||r$jscomp$0<=t$jscomp$0.stops[0][0])return t$jscomp$0.stops[0][1];if(r$jscomp$0>=t$jscomp$0.stops[i-1][0])return t$jscomp$0.stops[i-1][1];i=Ue(t$jscomp$0.stops.map(function(t){return t[0]}),r$jscomp$0);var o=function(t,e,r,n){n-=r;t-=r;return 0===n?0:1===e?t/n:(Math.pow(e,t)-1)/(Math.pow(e,n)-1)}(r$jscomp$0,n$jscomp$0,t$jscomp$0.stops[i][0],
t$jscomp$0.stops[i+1][0]),s=t$jscomp$0.stops[i][1],u=t$jscomp$0.stops[i+1][1],l=Ne[e$jscomp$0.type]||Dr;if(t$jscomp$0.colorSpace&&"rgb"!==t$jscomp$0.colorSpace){var p=rr[t$jscomp$0.colorSpace];l=function(t,e){return p.reverse(p.interpolate(p.forward(t),p.forward(e),o))}}return"function"==typeof s.evaluate?{evaluate:function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];e=s.evaluate.apply(void 0,t);t=u.evaluate.apply(void 0,t);if(void 0!==e&&void 0!==t)return l(e,t,o)}}:l(s,u,o)}function jr(t,
e,r){return"color"===e.type?r=Wt.parse(r):"formatted"===e.type?r=ee.fromString(r.toString()):"resolvedImage"===e.type?r=re.fromString(r.toString()):Vr(r)===e.type||"enum"===e.type&&e.values[r]||(r=void 0),Lr(r,t.default,e.default)}function Nr(t){return Array.isArray(t)&&0<t.length&&"string"==typeof t[0]&&t[0]in Sr}function Kr(t,e){var JSCompiler_temp_const=Oe;if(e){var JSCompiler_temp={color:Ot,string:Lt,number:Dt,enum:Lt,boolean:Rt,formatted:Nt,resolvedImage:Kt};JSCompiler_temp="array"===e.type?
Gt(JSCompiler_temp[e.value]||jt,e.length):JSCompiler_temp[e.type]}else JSCompiler_temp=void 0;JSCompiler_temp_const=new JSCompiler_temp_const(Sr,[],JSCompiler_temp);return(t=JSCompiler_temp_const.parse(t,void 0,void 0,void 0,e&&"string"===e.type?{typeAnnotation:"coerce"}:void 0))?{result:"success",value:new qr(t,e)}:Er(JSCompiler_temp_const.errors)}function Xr(t$jscomp$0,e$jscomp$1){if("error"===(t$jscomp$0=Kr(t$jscomp$0,e$jscomp$1)).result)return t$jscomp$0;var r$jscomp$0=t$jscomp$0.value.expression,
n$jscomp$0=Fe(r$jscomp$0);if(!n$jscomp$0&&!Tr(e$jscomp$1))return Er([new Bt("","data expressions not supported")]);var i$jscomp$0=Le(r$jscomp$0,["zoom"]);return i$jscomp$0||Pr(e$jscomp$1)?(r$jscomp$0=function t(e$jscomp$0){var r=null;if(e$jscomp$0 instanceof or)r=t(e$jscomp$0.result);else if(e$jscomp$0 instanceof ar)for(var n=0,i=e$jscomp$0.args;n<i.length&&!(r=t(i[n]));n+=1);else(e$jscomp$0 instanceof je||e$jscomp$0 instanceof nr)&&e$jscomp$0.input instanceof ve&&"zoom"===e$jscomp$0.input.name&&
(r=e$jscomp$0);return r instanceof Bt||e$jscomp$0.eachChild(function(e){e=t(e);e instanceof Bt?r=e:!r&&e?r=new Bt("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):r&&e&&r!==e&&(r=new Bt("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),r}(r$jscomp$0))||i$jscomp$0?r$jscomp$0 instanceof Bt?Er([r$jscomp$0]):r$jscomp$0 instanceof nr&&!Br(e$jscomp$1)?Er([new Bt("",'"interpolate" expressions cannot be used with this property')]):
{result:"success",value:r$jscomp$0?new Zr(n$jscomp$0?"camera":"composite",t$jscomp$0.value,r$jscomp$0.labels,r$jscomp$0 instanceof nr?r$jscomp$0.interpolation:void 0):new Gr(n$jscomp$0?"constant":"source",t$jscomp$0.value)}:Er([new Bt("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')]):Er([new Bt("","zoom expressions not supported")])}function Hr(t){var e=t.key,r=t.value,n=t.valueSpec||{},i=t.objectElementValidators||{},a=t.style;t=t.styleSpec;var s=
[],u=Vr(r);if("object"!==u)return[new Ct(e,r,"object expected, "+u+" found")];for(var l in r){var p=l.split(".")[0];u=n[p]||n["*"];if(i[p])p=i[p];else if(n[p])p=wn;else if(i["*"])p=i["*"];else{if(!n["*"]){s.push(new Ct(e,r[l],'unknown property "'+l+'"'));continue}p=wn}s=s.concat(p({key:(e?e+".":e)+l,value:r[l],valueSpec:u,style:a,styleSpec:t,object:r,objectKey:l},r))}for(var f in n)i[f]||n[f].required&&void 0===n[f].default&&void 0===r[f]&&s.push(new Ct(e,r,'missing required property "'+f+'"'));return s}
function Yr(t){var e=t.value,r=t.valueSpec,n=t.style,i=t.styleSpec,a=t.key;t=t.arrayElementValidator||wn;if("array"!==Vr(e))return[new Ct(a,e,"array expected, "+Vr(e)+" found")];if(r.length&&e.length!==r.length)return[new Ct(a,e,"array length "+r.length+" expected, length "+e.length+" found")];if(r["min-length"]&&e.length<r["min-length"])return[new Ct(a,e,"array length at least "+r["min-length"]+" expected, length "+e.length+" found")];var s={type:r.value,values:r.values};7>i.$version&&(s.function=
r.function);"object"===Vr(r.value)&&(s=r.value);r=[];for(var l=0;l<e.length;l++)r=r.concat(t({array:e,arrayIndex:l,value:e[l],valueSpec:s,style:n,styleSpec:i,key:a+"["+l+"]"}));return r}function $r(t){var e=t.key,r=t.value;t=t.valueSpec;var i=Vr(r);return"number"===i&&r!=r&&(i="NaN"),"number"!==i?[new Ct(e,r,"number expected, "+i+" found")]:"minimum"in t&&r<t.minimum?[new Ct(e,r,r+" is less than the minimum value "+t.minimum)]:"maximum"in t&&r>t.maximum?[new Ct(e,r,r+" is greater than the maximum value "+
t.maximum)]:[]}function Wr(t$jscomp$0){function c(t){var e=[],a=t.value,s=t.key;if("array"!==Vr(a))return[new Ct(s,a,"array expected, "+Vr(a)+" found")];if(2!==a.length)return[new Ct(s,a,"array length 2 expected, length "+a.length+" found")];if(l){if("object"!==Vr(a[0]))return[new Ct(s,a,"object expected, "+Vr(a[0])+" found")];if(void 0===a[0].zoom)return[new Ct(s,a,"object stop key must have zoom")];if(void 0===a[0].value)return[new Ct(s,a,"object stop key must have value")];if(n$jscomp$0&&n$jscomp$0>
Tt(a[0].zoom))return[new Ct(s,a[0].zoom,"stop zoom values must appear in ascending order")];Tt(a[0].zoom)!==n$jscomp$0&&(n$jscomp$0=Tt(a[0].zoom),r$jscomp$0=void 0,o={});e=e.concat(Hr({key:s+"[0]",value:a[0],valueSpec:{zoom:{}},style:t.style,styleSpec:t.styleSpec,objectElementValidators:{zoom:$r,value:h}}))}else e=e.concat(h({key:s+"[0]",value:a[0],valueSpec:{},style:t.style,styleSpec:t.styleSpec},a));return Nr(Pt(a[1]))?e.concat([new Ct(s+"[1]",a[1],"expressions are not allowed in function stops.")]):
e.concat(wn({key:s+"[1]",value:a[1],valueSpec:i,style:t.style,styleSpec:t.styleSpec}))}function h(t,n){var s=Vr(t.value),u=Tt(t.value);n=null!==t.value?t.value:n;if(e$jscomp$0){if(s!==e$jscomp$0)return[new Ct(t.key,n,s+" stop domain type must match previous stop domain type "+e$jscomp$0)]}else e$jscomp$0=s;return"number"!==s&&"string"!==s&&"boolean"!==s?[new Ct(t.key,n,"stop domain value must be a number, string, or boolean")]:"number"!==s&&"categorical"!==a$jscomp$0?(s="number expected, "+s+" found",
Tr(i)&&void 0===a$jscomp$0&&(s+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new Ct(t.key,n,s)]):"categorical"!==a$jscomp$0||"number"!==s||isFinite(u)&&Math.floor(u)===u?"categorical"!==a$jscomp$0&&"number"===s&&void 0!==r$jscomp$0&&u<r$jscomp$0?[new Ct(t.key,n,"stop domain values must appear in ascending order")]:(r$jscomp$0=u,"categorical"===a$jscomp$0&&u in o?[new Ct(t.key,n,"stop domain values must be unique")]:(o[u]=!0,[])):[new Ct(t.key,n,"integer expected, found "+
u)]}var e$jscomp$0,r$jscomp$0,n$jscomp$0,i=t$jscomp$0.valueSpec,a$jscomp$0=Tt(t$jscomp$0.value.type),o={},s$jscomp$0="categorical"!==a$jscomp$0&&void 0===t$jscomp$0.value.property,u$jscomp$0=!s$jscomp$0,l="array"===Vr(t$jscomp$0.value.stops)&&"array"===Vr(t$jscomp$0.value.stops[0])&&"object"===Vr(t$jscomp$0.value.stops[0][0]),p=Hr({key:t$jscomp$0.key,value:t$jscomp$0.value,valueSpec:t$jscomp$0.styleSpec.function,style:t$jscomp$0.style,styleSpec:t$jscomp$0.styleSpec,objectElementValidators:{stops:function(t){if("identity"===
a$jscomp$0)return[new Ct(t.key,t.value,'identity function may not have a "stops" property')];var e=[],r=t.value;return e=e.concat(Yr({key:t.key,value:r,valueSpec:t.valueSpec,style:t.style,styleSpec:t.styleSpec,arrayElementValidator:c})),"array"===Vr(r)&&0===r.length&&e.push(new Ct(t.key,r,"array must have at least one stop")),e},default:function(t){return wn({key:t.key,value:t.value,valueSpec:i,style:t.style,styleSpec:t.styleSpec})}}});return"identity"===a$jscomp$0&&s$jscomp$0&&p.push(new Ct(t$jscomp$0.key,
t$jscomp$0.value,'missing required property "property"')),"identity"===a$jscomp$0||t$jscomp$0.value.stops||p.push(new Ct(t$jscomp$0.key,t$jscomp$0.value,'missing required property "stops"')),"exponential"===a$jscomp$0&&t$jscomp$0.valueSpec.expression&&!Br(t$jscomp$0.valueSpec)&&p.push(new Ct(t$jscomp$0.key,t$jscomp$0.value,"exponential functions not supported")),8<=t$jscomp$0.styleSpec.$version&&(u$jscomp$0&&!Tr(t$jscomp$0.valueSpec)?p.push(new Ct(t$jscomp$0.key,t$jscomp$0.value,"property functions not supported")):
s$jscomp$0&&!Pr(t$jscomp$0.valueSpec)&&p.push(new Ct(t$jscomp$0.key,t$jscomp$0.value,"zoom functions not supported"))),"categorical"!==a$jscomp$0&&!l||void 0!==t$jscomp$0.value.property||p.push(new Ct(t$jscomp$0.key,t$jscomp$0.value,'"property" property is required')),p}function Qr(t){var e$jscomp$0=("property"===t.expressionContext?Xr:Kr)(Pt(t.value),t.valueSpec);if("error"===e$jscomp$0.result)return e$jscomp$0.value.map(function(e){return new Ct(""+t.key+e.key,t.value,e.message)});e$jscomp$0=e$jscomp$0.value.expression||
e$jscomp$0.value._styleExpression.expression;if("property"===t.expressionContext&&"text-font"===t.propertyKey&&!e$jscomp$0.outputDefined())return[new Ct(t.key,t.value,'Invalid data expression for "'+t.propertyKey+'". Output values must be contained as literals within the expression.')];if("property"===t.expressionContext&&"layout"===t.propertyType&&!De(e$jscomp$0))return[new Ct(t.key,t.value,'"feature-state" data expressions are not supported with layout properties.')];if("filter"===t.expressionContext&&
!De(e$jscomp$0))return[new Ct(t.key,t.value,'"feature-state" data expressions are not supported with filters.')];if(t.expressionContext&&0===t.expressionContext.indexOf("cluster")){if(!Le(e$jscomp$0,["zoom","feature-state"]))return[new Ct(t.key,t.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if("cluster-initial"===t.expressionContext&&!Fe(e$jscomp$0))return[new Ct(t.key,t.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}
function tn(t){var e=t.key,r=t.value;t=t.valueSpec;var i=[];return Array.isArray(t.values)?-1===t.values.indexOf(Tt(r))&&i.push(new Ct(e,r,"expected one of ["+t.values.join(", ")+"], "+JSON.stringify(r)+" found")):-1===Object.keys(t.values).indexOf(Tt(r))&&i.push(new Ct(e,r,"expected one of ["+Object.keys(t.values).join(", ")+"], "+JSON.stringify(r)+" found")),i}function en(t){if(!0===t||!1===t)return!0;if(!Array.isArray(t)||0===t.length)return!1;switch(t[0]){case "has":return 2<=t.length&&"$id"!==
t[1]&&"$type"!==t[1];case "in":return 3<=t.length&&("string"!=typeof t[1]||Array.isArray(t[2]));case "!in":case "!has":case "none":return!1;case "\x3d\x3d":case "!\x3d":case "\x3e":case "\x3e\x3d":case "\x3c":case "\x3c\x3d":return 3!==t.length||Array.isArray(t[1])||Array.isArray(t[2]);case "any":case "all":var e=0;for(t=t.slice(1);e<t.length;e+=1){var n=t[e];if(!en(n)&&"boolean"!=typeof n)return!1}return!0;default:return!0}}function nn(t$jscomp$0){if(null==t$jscomp$0)return{filter:function(){return!0},
needGeometry:!1};en(t$jscomp$0)||(t$jscomp$0=on(t$jscomp$0));var e$jscomp$0=Kr(t$jscomp$0,rn);if("error"===e$jscomp$0.result)throw Error(e$jscomp$0.value.map(function(t){return t.key+": "+t.message}).join(", "));return{filter:function(t,r,n){return e$jscomp$0.value.evaluate(t,r,{},n)},needGeometry:function t(e){if(!Array.isArray(e))return!1;if("within"===e[0])return!0;for(var r=1;r<e.length;r++)if(t(e[r]))return!0;return!1}(t$jscomp$0)}}function an(t,e){return t<e?-1:t>e?1:0}function on(t){if(!t)return!0;
var e,r=t[0];return 1>=t.length?"any"!==r:"\x3d\x3d"===r?sn(t[1],t[2],"\x3d\x3d"):"!\x3d"===r?pn(sn(t[1],t[2],"\x3d\x3d")):"\x3c"===r||"\x3e"===r||"\x3c\x3d"===r||"\x3e\x3d"===r?sn(t[1],t[2],r):"any"===r?(e=t.slice(1),["any"].concat(e.map(on))):"all"===r?["all"].concat(t.slice(1).map(on)):"none"===r?["all"].concat(t.slice(1).map(on).map(pn)):"in"===r?un(t[1],t.slice(2)):"!in"===r?pn(un(t[1],t.slice(2))):"has"===r?ln(t[1]):"!has"===r?pn(ln(t[1])):"within"!==r||t}function sn(t,e,r){switch(t){case "$type":return["filter-type-"+
r,e];case "$id":return["filter-id-"+r,e];default:return["filter-"+r,t,e]}}function un(t$jscomp$0,e){if(0===e.length)return!1;switch(t$jscomp$0){case "$type":return["filter-type-in",["literal",e]];case "$id":return["filter-id-in",["literal",e]];default:return 200<e.length&&!e.some(function(t){return typeof t!=typeof e[0]})?["filter-in-large",t$jscomp$0,["literal",e.sort(an)]]:["filter-in-small",t$jscomp$0,["literal",e]]}}function ln(t){switch(t){case "$type":return!0;case "$id":return["filter-has-id"];
default:return["filter-has",t]}}function pn(t){return["!",t]}function cn(t$jscomp$0){return en(Pt(t$jscomp$0.value))?Qr(Et({},t$jscomp$0,{expressionContext:"filter",valueSpec:{value:"boolean"}})):function t(e){var r=e.value,n=e.key;if("array"!==Vr(r))return[new Ct(n,r,"array expected, "+Vr(r)+" found")];var i,a=e.styleSpec,o=[];if(1>r.length)return[new Ct(n,r,"filter array must have at least 1 element")];switch(o=o.concat(tn({key:n+"[0]",value:r[0],valueSpec:a.filter_operator,style:e.style,styleSpec:e.styleSpec})),
Tt(r[0])){case "\x3c":case "\x3c\x3d":case "\x3e":case "\x3e\x3d":2<=r.length&&"$type"===Tt(r[1])&&o.push(new Ct(n,r,'"$type" cannot be use with operator "'+r[0]+'"'));case "\x3d\x3d":case "!\x3d":3!==r.length&&o.push(new Ct(n,r,'filter array for operator "'+r[0]+'" must have 3 elements'));case "in":case "!in":2<=r.length&&"string"!==(i=Vr(r[1]))&&o.push(new Ct(n+"[1]",r[1],"string expected, "+i+" found"));for(var s=2;s<r.length;s++)i=Vr(r[s]),"$type"===Tt(r[1])?o=o.concat(tn({key:n+"["+s+"]",value:r[s],
valueSpec:a.geometry_type,style:e.style,styleSpec:e.styleSpec})):"string"!==i&&"number"!==i&&"boolean"!==i&&o.push(new Ct(n+"["+s+"]",r[s],"string, number, or boolean expected, "+i+" found"));break;case "any":case "all":case "none":for(i=1;i<r.length;i++)o=o.concat(t({key:n+"["+i+"]",value:r[i],style:e.style,styleSpec:e.styleSpec}));break;case "has":case "!has":i=Vr(r[1]);2!==r.length?o.push(new Ct(n,r,'filter array for "'+r[0]+'" operator must have 2 elements')):"string"!==i&&o.push(new Ct(n+"[1]",
r[1],"string expected, "+i+" found"));break;case "within":i=Vr(r[1]),2!==r.length?o.push(new Ct(n,r,'filter array for "'+r[0]+'" operator must have 2 elements')):"object"!==i&&o.push(new Ct(n+"[1]",r[1],"object expected, "+i+" found"))}return o}(t$jscomp$0)}function hn(t,e){var r=t.key,n=t.style,i=t.styleSpec,a=t.value,o=t.objectKey,s=i[e+"_"+t.layerType];if(!s)return[];var u=o.match(/^(.*)-transition$/);if("paint"===e&&u&&s[u[1]]&&s[u[1]].transition)return wn({key:r,value:a,valueSpec:i.transition,
style:n,styleSpec:i});var l;s=t.valueSpec||s[o];if(!s)return[new Ct(r,a,'unknown property "'+o+'"')];if("string"===Vr(a)&&Tr(s)&&!s.tokens&&(l=/^{([^}]+)}$/.exec(a)))return[new Ct(r,a,'"'+o+'" does not support interpolation syntax\nUse an identity property function instead: `{ "type": "identity", "property": '+JSON.stringify(l[1])+" }`.")];l=[];return"symbol"===t.layerType&&("text-field"===o&&n&&!n.glyphs&&l.push(new Ct(r,a,'use of "text-field" requires a style "glyphs" property')),"text-font"===
o&&Fr(Pt(a))&&"identity"===Tt(a.type)&&l.push(new Ct(r,a,'"text-font" does not support identity functions'))),l.concat(wn({key:t.key,value:a,valueSpec:s,style:n,styleSpec:i,expressionContext:"property",propertyType:e,propertyKey:o}))}function fn(t){return hn(t,"paint")}function yn(t){return hn(t,"layout")}function dn(t$jscomp$1){var e=[],r=t$jscomp$1.value,n=t$jscomp$1.key,i=t$jscomp$1.style,a=t$jscomp$1.styleSpec;r.type||r.ref||e.push(new Ct(n,r,'either "type" or "ref" is required'));var o,s=Tt(r.type),
u=Tt(r.ref);if(r.id)for(var l=Tt(r.id),p=0;p<t$jscomp$1.arrayIndex;p++){var c=i.layers[p];Tt(c.id)===l&&e.push(new Ct(n,r.id,'duplicate layer id "'+r.id+'", previously used at line '+c.id.__line__))}"ref"in r?(["type","source","source-layer","filter","layout"].forEach(function(t){t in r&&e.push(new Ct(n,r[t],'"'+t+'" is prohibited for ref layers'))}),i.layers.forEach(function(t){Tt(t.id)===u&&(o=t)}),o?o.ref?e.push(new Ct(n,r.ref,"ref cannot reference another ref layer")):s=Tt(o.type):e.push(new Ct(n,
r.ref,'ref layer "'+u+'" not found'))):"background"!==s&&(r.source?(l=(i=i.sources&&i.sources[r.source])&&Tt(i.type),i?"vector"===l&&"raster"===s?e.push(new Ct(n,r.source,'layer "'+r.id+'" requires a raster source')):"raster"===l&&"raster"!==s?e.push(new Ct(n,r.source,'layer "'+r.id+'" requires a vector source')):"vector"!==l||r["source-layer"]?"raster-dem"===l&&"hillshade"!==s?e.push(new Ct(n,r.source,"raster-dem source can only be used with layer type 'hillshade'.")):"line"!==s||!r.paint||!r.paint["line-gradient"]||
"geojson"===l&&i.lineMetrics||e.push(new Ct(n,r,'layer "'+r.id+'" specifies a line-gradient, which requires a GeoJSON source with `lineMetrics` enabled.')):e.push(new Ct(n,r,'layer "'+r.id+'" must specify a "source-layer"')):e.push(new Ct(n,r.source,'source "'+r.source+'" not found'))):e.push(new Ct(n,r,'missing required property "source"')));return e=e.concat(Hr({key:n,value:r,valueSpec:a.layer,style:t$jscomp$1.style,styleSpec:t$jscomp$1.styleSpec,objectElementValidators:{"*":function(){return[]},
type:function(){return wn({key:n+".type",value:r.type,valueSpec:a.layer.type,style:t$jscomp$1.style,styleSpec:t$jscomp$1.styleSpec,object:r,objectKey:"type"})},filter:cn,layout:function(t$jscomp$0){return Hr({layer:r,key:t$jscomp$0.key,value:t$jscomp$0.value,style:t$jscomp$0.style,styleSpec:t$jscomp$0.styleSpec,objectElementValidators:{"*":function(t){return yn(Et({layerType:s},t))}}})},paint:function(t$jscomp$0){return Hr({layer:r,key:t$jscomp$0.key,value:t$jscomp$0.value,style:t$jscomp$0.style,
styleSpec:t$jscomp$0.styleSpec,objectElementValidators:{"*":function(t){return fn(Et({layerType:s},t))}}})}}}))}function mn(t){var e=t.value;t=t.key;var n=Vr(e);return"string"!==n?[new Ct(t,e,"string expected, "+n+" found")]:[]}function gn(t){var e=t.value,r=t.key,n=t.styleSpec,i=t.style;if(!e.type)return[new Ct(r,e,'"type" is required')];var o=Tt(e.type);switch(o){case "vector":case "raster":case "raster-dem":return Hr({key:r,value:e,valueSpec:n["source_"+o.replace("-","_")],style:t.style,styleSpec:n,
objectElementValidators:vn});case "geojson":if(t=Hr({key:r,value:e,valueSpec:n.source_geojson,style:i,styleSpec:n,objectElementValidators:vn}),e.cluster)for(var s in e.clusterProperties)n=e.clusterProperties[s],i=n[0],i="string"==typeof i?[i,["accumulated"],["get",s]]:i,t.push.apply(t,Qr({key:r+"."+s+".map",value:n[1],expressionContext:"cluster-map"})),t.push.apply(t,Qr({key:r+"."+s+".reduce",value:i,expressionContext:"cluster-reduce"}));return t;case "video":return Hr({key:r,value:e,valueSpec:n.source_video,
style:i,styleSpec:n});case "image":return Hr({key:r,value:e,valueSpec:n.source_image,style:i,styleSpec:n});case "canvas":return[new Ct(r,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return tn({key:r+".type",value:e.type,valueSpec:{values:"vector raster raster-dem geojson video image".split(" ")},style:i,styleSpec:n})}}function xn(t){var e=t.value,r=t.styleSpec,n=r.light;t=t.style;var a=[],o=Vr(e);if(void 0===e)return a;
if("object"!==o)return a.concat([new Ct("light",e,"object expected, "+o+" found")]);for(var s in e)o=s.match(/^(.*)-transition$/),a=a.concat(o&&n[o[1]]&&n[o[1]].transition?wn({key:s,value:e[s],valueSpec:r.transition,style:t,styleSpec:r}):n[s]?wn({key:s,value:e[s],valueSpec:n[s],style:t,styleSpec:r}):[new Ct(s,e[s],'unknown property "'+s+'"')]);return a}function wn(t){var e=t.value,r=t.valueSpec,n=t.styleSpec;return r.expression&&Fr(Tt(e))?Wr(t):r.expression&&Nr(Pt(e))?Qr(t):r.type&&bn[r.type]?bn[r.type](t):
Hr(Et({},t,{valueSpec:r.type?n[r.type]:r}))}function _n(t){var e=t.value,r=t.key;t=mn(t);return t.length||(-1===e.indexOf("{fontstack}")&&t.push(new Ct(r,e,'"glyphs" url must include a "{fontstack}" token')),-1===e.indexOf("{range}")&&t.push(new Ct(r,e,'"glyphs" url must include a "{range}" token'))),t}function An(t,e){void 0===e&&(e=zt);var r=[];return r=r.concat(wn({key:"",value:t,valueSpec:e.$root,styleSpec:e,style:t,objectElementValidators:{glyphs:_n,"*":function(){return[]}}})),t.constants&&
(r=r.concat(Mt({key:"constants",value:t.constants,style:t,styleSpec:e}))),Sn(r)}function Sn(t$jscomp$0){return[].concat(t$jscomp$0).sort(function(t,e){return t.line-e.line})}function kn(t){return function(){for(var e=[],r=arguments.length;r--;)e[r]=arguments[r];return Sn(t.apply(this,e))}}function En(t,e){var r=!1;if(e&&e.length)for(var n=0;n<e.length;n+=1)t.fire(new kt(Error(e[n].message))),r=!0;return r}function Pn(t,e,r){var n=this.cells=[];if(t instanceof ArrayBuffer){this.arrayBuffer=t;var i=
new Int32Array(this.arrayBuffer);t=i[0];this.d=(e=i[1])+2*(r=i[2]);for(var a=0;a<this.d*this.d;a++){var o=i[3+a],s=i[3+a+1];n.push(o===s?null:i.subarray(o,s))}a=i[3+n.length+1];this.keys=i.subarray(i[3+n.length],a);this.bboxes=i.subarray(a);this.insert=this._insertReadonly}else{this.d=e+2*r;for(i=0;i<this.d*this.d;i++)n.push([]);this.keys=[];this.bboxes=[]}this.n=e;this.extent=t;this.padding=r;this.scale=e/t;this.uid=0;e=r/e*t;this.min=-e;this.max=t+e}function Dn(t,e,r){void 0===r&&(r={});Object.defineProperty(e,
"_classRegistryKey",{value:t,writeable:!1});Fn[t]={klass:e,omit:r.omit||[],shallow:r.shallow||[]}}function Rn(t){return t&&"undefined"!=typeof ArrayBuffer&&(t instanceof ArrayBuffer||t.constructor&&"ArrayBuffer"===t.constructor.name)}function Un(t,e){if(null==t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||t instanceof Boolean||t instanceof Number||t instanceof String||t instanceof Date||t instanceof RegExp)return t;if(Rn(t)||Vn&&t instanceof Vn)return e&&e.push(t),t;if(ArrayBuffer.isView(t))return e&&
e.push(t.buffer),t;if(t instanceof Bn)return e&&e.push(t.data.buffer),t;if(Array.isArray(t)){for(var n=[],i=0;i<t.length;i+=1)n.push(Un(t[i],e));return n}if("object"==typeof t){var o=t.constructor;n=o._classRegistryKey;if(!n)throw Error("can't serialize object of unregistered class");i=o.serialize?o.serialize(t,e):{};if(!o.serialize){for(var l in t)!t.hasOwnProperty(l)||0<=Fn[n].omit.indexOf(l)||(o=t[l],i[l]=0<=Fn[n].shallow.indexOf(l)?o:Un(o,e));t instanceof Error&&(i.message=t.message)}if(i.$name)throw Error("$name property is reserved for worker serialization logic.");
return"Object"!==n&&(i.$name=n),i}throw Error("can't serialize object of type "+typeof t);}function jn(t){if(null==t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||t instanceof Boolean||t instanceof Number||t instanceof String||t instanceof Date||t instanceof RegExp||Rn(t)||Vn&&t instanceof Vn||ArrayBuffer.isView(t)||t instanceof Bn)return t;if(Array.isArray(t))return t.map(jn);if("object"==typeof t){var e=t.$name||"Object",r=Fn[e].klass;if(!r)throw Error("can't deserialize unregistered class "+
e);if(r.deserialize)return r.deserialize(t);r=Object.create(r.prototype);for(var i=0,a=Object.keys(t);i<a.length;i+=1){var o=a[i];if("$name"!==o){var s=t[o];r[o]=0<=Fn[e].shallow.indexOf(o)?s:jn(s)}}return r}throw Error("can't deserialize object of type "+typeof t);}function Kn(t){for(var e=0;e<t.length;e+=1)if(Gn(t[e].charCodeAt(0)))return!0;return!1}function Gn(t){return!(746!==t&&747!==t&&(4352>t||!(Nn["Bopomofo Extended"](t)||Nn.Bopomofo(t)||Nn["CJK Compatibility Forms"](t)&&!(65097<=t&&65103>=
t)||Nn["CJK Compatibility Ideographs"](t)||Nn["CJK Compatibility"](t)||Nn["CJK Radicals Supplement"](t)||Nn["CJK Strokes"](t)||!(!Nn["CJK Symbols and Punctuation"](t)||12296<=t&&12305>=t||12308<=t&&12319>=t||12336===t)||Nn["CJK Unified Ideographs Extension A"](t)||Nn["CJK Unified Ideographs"](t)||Nn["Enclosed CJK Letters and Months"](t)||Nn["Hangul Compatibility Jamo"](t)||Nn["Hangul Jamo Extended-A"](t)||Nn["Hangul Jamo Extended-B"](t)||Nn["Hangul Jamo"](t)||Nn["Hangul Syllables"](t)||Nn.Hiragana(t)||
Nn["Ideographic Description Characters"](t)||Nn.Kanbun(t)||Nn["Kangxi Radicals"](t)||Nn["Katakana Phonetic Extensions"](t)||Nn.Katakana(t)&&12540!==t||!(!Nn["Halfwidth and Fullwidth Forms"](t)||65288===t||65289===t||65293===t||65306<=t&&65310>=t||65339===t||65341===t||65343===t||65371<=t&&65503>=t||65507===t||65512<=t&&65519>=t)||!(!Nn["Small Form Variants"](t)||65112<=t&&65118>=t||65123<=t&&65126>=t)||Nn["Unified Canadian Aboriginal Syllabics"](t)||Nn["Unified Canadian Aboriginal Syllabics Extended"](t)||
Nn["Vertical Forms"](t)||Nn["Yijing Hexagram Symbols"](t)||Nn["Yi Syllables"](t)||Nn["Yi Radicals"](t))))}function Zn(t){var JSCompiler_temp;(JSCompiler_temp=Gn(t))||(JSCompiler_temp=!!(Nn["Latin-1 Supplement"](t)&&(167===t||169===t||174===t||177===t||188===t||189===t||190===t||215===t||247===t)||Nn["General Punctuation"](t)&&(8214===t||8224===t||8225===t||8240===t||8241===t||8251===t||8252===t||8258===t||8263===t||8264===t||8265===t||8273===t)||Nn["Letterlike Symbols"](t)||Nn["Number Forms"](t)||
Nn["Miscellaneous Technical"](t)&&(8960<=t&&8967>=t||8972<=t&&8991>=t||8996<=t&&9E3>=t||9003===t||9085<=t&&9114>=t||9150<=t&&9165>=t||9167===t||9169<=t&&9179>=t||9186<=t&&9215>=t)||Nn["Control Pictures"](t)&&9251!==t||Nn["Optical Character Recognition"](t)||Nn["Enclosed Alphanumerics"](t)||Nn["Geometric Shapes"](t)||Nn["Miscellaneous Symbols"](t)&&!(9754<=t&&9759>=t)||Nn["Miscellaneous Symbols and Arrows"](t)&&(11026<=t&&11055>=t||11088<=t&&11097>=t||11192<=t&&11243>=t)||Nn["CJK Symbols and Punctuation"](t)||
Nn.Katakana(t)||Nn["Private Use Area"](t)||Nn["CJK Compatibility Forms"](t)||Nn["Small Form Variants"](t)||Nn["Halfwidth and Fullwidth Forms"](t)||8734===t||8756===t||8757===t||9984<=t&&10087>=t||10102<=t&&10131>=t||65532===t||65533===t));return!JSCompiler_temp}function Xn(t){return 1424<=t&&2303>=t||Nn["Arabic Presentation Forms-A"](t)||Nn["Arabic Presentation Forms-B"](t)}function ti(){ei.fire(new St("pluginStateChange",{pluginStatus:$n,pluginURL:Wn}))}function Si(t$jscomp$0,e){void 0===e&&(e=1);
var r=0,n=0;return{members:t$jscomp$0.map(function(t){var i=wi[t.type].BYTES_PER_ELEMENT,a=r=ki(r,Math.max(e,i)),o=t.components||1;return n=Math.max(n,i),r+=i*o,{name:t.name,type:t.type,components:o,offset:a}}),size:ki(r,Math.max(n,e)),alignment:e}}function ki(t,e){return Math.ceil(t/e)*e}function oa(t,e){return 256*l$jscomp$2(Math.floor(t),0,255)+l$jscomp$2(Math.floor(e),0,255)}function ya(t){var e=+t;return!isNaN(e)&&e<=fa?e:pa(String(t))}function da(t,e,r){var n=t[e];t[e]=t[r];t[r]=n}function ka(t){return[oa(255*
t.r,255*t.g),oa(255*t.b,255*t.a)]}function Va(t,e,r){var n={color:{source:Zi,composite:Xi},number:{source:ji,composite:Zi}};return(t={"line-pattern":{source:Ei,composite:Ei},"fill-pattern":{source:Ei,composite:Ei},"fill-extrusion-pattern":{source:Ei,composite:Ei}}[t])&&t[r]||n[e][r]}function La(t){var e=8192/t.extent;t=t.loadGeometry();for(var n=0;n<t.length;n++)for(var i=t[n],a=0;a<i.length;a++){var o=i[a],s=Math.round(o.x*e),u=Math.round(o.y*e);o.x=l$jscomp$2(s,Da,Fa);o.y=l$jscomp$2(u,Da,Fa);(s<
o.x||s>o.x+1||u<o.y||u>o.y+1)&&_$jscomp$0("Geometry exceeds allowed extent, reduce your vector tile buffer size")}return t}function Ra(t,e,r,n,i){t.emplaceBack(2*e+(n+1)/2,2*r+(i+1)/2)}function Ua(t,e){for(var r=0;r<t.length;r++)if(Ha(e,t[r]))return!0;for(r=0;r<e.length;r++)if(Ha(t,e[r]))return!0;return!!Ka(t,e)}function ja(t,e,r){return!!Ha(t,e)||!!Za(e,t,r)}function qa(t,e){if(1===t.length)return Ja(e,t[0]);for(var r=0;r<e.length;r++)for(var n=e[r],i=0;i<n.length;i++)if(Ha(t,n[i]))return!0;for(r=
0;r<t.length;r++)if(Ja(e,t[r]))return!0;for(r=0;r<e.length;r++)if(Ka(t,e[r]))return!0;return!1}function Ka(t$jscomp$0,e$jscomp$0){if(0===t$jscomp$0.length||0===e$jscomp$0.length)return!1;for(var r=0;r<t$jscomp$0.length-1;r++)for(var n=t$jscomp$0[r],i=t$jscomp$0[r+1],a=0;a<e$jscomp$0.length-1;a++){var t=n,e=i,r$jscomp$0=e$jscomp$0[a],n$jscomp$0=e$jscomp$0[a+1];if(A$jscomp$2(t,r$jscomp$0,n$jscomp$0)!==A$jscomp$2(e,r$jscomp$0,n$jscomp$0)&&A$jscomp$2(t,e,r$jscomp$0)!==A$jscomp$2(t,e,n$jscomp$0))return!0}return!1}
function Za(t,e,r){r*=r;if(1===e.length)return t.distSqr(e[0])<r;for(var i=1;i<e.length;i++)if(Xa(t,e[i-1],e[i])<r)return!0;return!1}function Xa(t,e,r){var n=e.distSqr(r);if(0===n)return t.distSqr(e);n=((t.x-e.x)*(r.x-e.x)+(t.y-e.y)*(r.y-e.y))/n;return t.distSqr(0>n?e:1<n?r:r.sub(e)._mult(n)._add(e))}function Ja(t,e){for(var r,n,i,a=!1,o=0;o<t.length;o++)for(var s=0,u=(r=t[o]).length-1;s<r.length;u=s++)(n=r[s]).y>e.y!=(i=r[u]).y>e.y&&e.x<(i.x-n.x)*(e.y-n.y)/(i.y-n.y)+n.x&&(a=!a);return a}function Ha(t,
e){for(var r=!1,n=0,i=t.length-1;n<t.length;i=n++){var a=t[n];i=t[i];a.y>e.y!=i.y>e.y&&e.x<(i.x-a.x)*(e.y-a.y)/(i.y-a.y)+a.x&&(r=!r)}return r}function $a(t,e,r){var n=e.paint.get(t).value;return"constant"===n.kind?n.value:r.programConfigurations.get(e.id).getMaxValue(t)}function Wa(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1])}function Qa(t,e,r,n,a){if(!e[0]&&!e[1])return t;e=i$jscomp$2.convert(e)._mult(a);"viewport"===r&&e._rotate(-n);r=[];for(n=0;n<t.length;n++)r.push(t[n].sub(e));return r}function no(t){return t[0]=
1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function io(t,e,r){var n=e[0],i=e[1],a=e[2],o=e[3],s=e[4],u=e[5],l=e[6],p=e[7],c=e[8],h=e[9],f=e[10],y=e[11],d=e[12],m=e[13],v=e[14];e=e[15];var x=r[0],b=r[1],w=r[2],_=r[3];return t[0]=x*n+b*s+w*c+_*d,t[1]=x*i+b*u+w*h+_*m,t[2]=x*a+b*l+w*f+_*v,t[3]=x*o+b*p+w*y+_*e,t[4]=(x=r[4])*n+(b=r[5])*s+(w=r[6])*c+(_=r[7])*d,t[5]=x*i+b*u+w*h+_*m,t[6]=x*a+b*l+w*f+_*v,t[7]=x*o+b*p+w*y+_*e,t[8]=(x=r[8])*
n+(b=r[9])*s+(w=r[10])*c+(_=r[11])*d,t[9]=x*i+b*u+w*h+_*m,t[10]=x*a+b*l+w*f+_*v,t[11]=x*o+b*p+w*y+_*e,t[12]=(x=r[12])*n+(b=r[13])*s+(w=r[14])*c+(_=r[15])*d,t[13]=x*i+b*u+w*h+_*m,t[14]=x*a+b*l+w*f+_*v,t[15]=x*o+b*p+w*y+_*e,t}function so(t,e,r){var n=e[0],i=e[1],a=e[2];e=e[3];return t[0]=r[0]*n+r[4]*i+r[8]*a+r[12]*e,t[1]=r[1]*n+r[5]*i+r[9]*a+r[13]*e,t[2]=r[2]*n+r[6]*i+r[10]*a+r[14]*e,t[3]=r[3]*n+r[7]*i+r[11]*a+r[15]*e,t}function lo(t,e){t=so([],[t.x,t.y,0,1],e);return new i$jscomp$2(t[0]/t[3],t[1]/
t[3])}function co(t,e,r,n){var i=e.width;e=e.height;if(n)if(n instanceof Uint8ClampedArray)n=new Uint8Array(n.buffer);else{if(n.length!==i*e*r)throw new RangeError("mismatched image size");}else n=new Uint8Array(i*e*r);return t.width=i,t.height=e,t.data=n,t}function ho(t,e,r){var n=e.width;e=e.height;if(n!==t.width||e!==t.height){var a=co({},{width:n,height:e},r);fo(t,a,{x:0,y:0},{x:0,y:0},{width:Math.min(t.width,n),height:Math.min(t.height,e)},r);t.width=n;t.height=e;t.data=a.data}}function fo(t,
e,r,n,i,a){if(0===i.width||0===i.height)return e;if(i.width>t.width||i.height>t.height||r.x>t.width-i.width||r.y>t.height-i.height)throw new RangeError("out of range source coordinates for image copy");if(i.width>e.width||i.height>e.height||n.x>e.width-i.width||n.y>e.height-i.height)throw new RangeError("out of range destination coordinates for image copy");for(var o=t.data,s=e.data,u=0;u<i.height;u++)for(var l=((r.y+u)*t.width+r.x)*a,p=((n.y+u)*e.width+n.x)*a,c=0;c<i.width*a;c++)s[p+c]=o[l+c];return e}
function go(t,e){for(var r=new Uint8Array(1024),n={},i=0,a=0;256>i;i++,a+=4){n[e]=i/255;var o=t.evaluate(n);r[a+0]=Math.floor(255*o.r/o.a);r[a+1]=Math.floor(255*o.g/o.a);r[a+2]=Math.floor(255*o.b/o.a);r[a+3]=Math.floor(255*o.a)}return new mo({width:256,height:1},r)}function ko(t,e,r){r=r||2;var o,s,u,p=e&&e.length,c=p?e[0]*r:t.length,h=Io(t,0,c,r,!0),f=[];if(!h||h.next===h.prev)return f;if(p){p=r;var a,s$jscomp$0=[];var i=0;for(a=e.length;i<a;i++)(o=Io(t,e[i]*p,i<a-1?e[i+1]*p:t.length,p,!1))===o.next&&
(o.steiner=!0),s$jscomp$0.push(Lo(o));s$jscomp$0.sort(Bo);for(i=0;i<s$jscomp$0.length;i++)Vo(s$jscomp$0[i],h),h=zo(h,h.next)}if(t.length>80*r){var n=e=t[0];var i$jscomp$0=o=t[1];for(p=r;p<c;p+=r)(s=t[p])<n&&(n=s),(u=t[p+1])<i$jscomp$0&&(i$jscomp$0=u),s>e&&(e=s),u>o&&(o=u);var l=0!==(l=Math.max(e-n,o-i$jscomp$0))?1/l:0}return Co(h,f,r,n,i$jscomp$0,l),f}function Io(t,e,r,n,i){if(i===0<Yo(t,e,r,n))for(i=e;i<r;i+=n)var o=Xo(i,t[i],t[i+1],o);else for(i=r-n;i>=e;i-=n)o=Xo(i,t[i],t[i+1],o);return o&&jo(o,
o.next)&&(Jo(o),o=o.next),o}function zo(t,e){if(!t)return t;e||(e=t);var n=t;do if(t=!1,n.steiner||!jo(n,n.next)&&0!==Uo(n.prev,n,n.next))n=n.next;else{if(Jo(n),(n=e=n.prev)===n.next)break;t=!0}while(t||n!==e);return e}function Co(t$jscomp$0,e$jscomp$0,r,n$jscomp$1,i$jscomp$1,a$jscomp$0,o$jscomp$0){if(t$jscomp$0){if(!o$jscomp$0&&a$jscomp$0){var t=t$jscomp$0,i=t;do null===i.z&&(i.z=Do(i.x,i.y,n$jscomp$1,i$jscomp$1,a$jscomp$0)),i.prevZ=i.prev,i=i.nextZ=i.next;while(i!==t);i.prevZ.nextZ=null;i.prevZ=
null;t=i;var e,i$jscomp$0,o,s,l=1;do{i=t;var a=t=null;for(o=0;i;){o++;var n=i;for(e=s=0;e<l&&(s++,n=n.nextZ);e++);for(e=l;0<s||0<e&&n;)0!==s&&(0===e||!n||i.z<=n.z)?(i$jscomp$0=i,i=i.nextZ,s--):(i$jscomp$0=n,n=n.nextZ,e--),a?a.nextZ=i$jscomp$0:t=i$jscomp$0,i$jscomp$0.prevZ=a,a=i$jscomp$0;i=n}a.nextZ=null;l*=2}while(1<o)}for(i=t$jscomp$0;t$jscomp$0.prev!==t$jscomp$0.next;){i$jscomp$0=t$jscomp$0.prev;t=t$jscomp$0.next;if(a$jscomp$0)a:{n=t$jscomp$0;l=n$jscomp$1;e=i$jscomp$1;var n$jscomp$0=a$jscomp$0;
a=n.prev;o=n.next;if(0<=Uo(a,n,o))n=!1;else{var s$jscomp$0=a.x>n.x?a.x>o.x?a.x:o.x:n.x>o.x?n.x:o.x,u=a.y>n.y?a.y>o.y?a.y:o.y:n.y>o.y?n.y:o.y;s=Do(a.x<n.x?a.x<o.x?a.x:o.x:n.x<o.x?n.x:o.x,a.y<n.y?a.y<o.y?a.y:o.y:n.y<o.y?n.y:o.y,l,e,n$jscomp$0);l=Do(s$jscomp$0,u,l,e,n$jscomp$0);e=n.prevZ;for(n$jscomp$0=n.nextZ;e&&e.z>=s&&n$jscomp$0&&n$jscomp$0.z<=l;){if(e!==n.prev&&e!==n.next&&Ro(a.x,a.y,n.x,n.y,o.x,o.y,e.x,e.y)&&0<=Uo(e.prev,e,e.next)||(e=e.prevZ,n$jscomp$0!==n.prev&&n$jscomp$0!==n.next&&Ro(a.x,a.y,
n.x,n.y,o.x,o.y,n$jscomp$0.x,n$jscomp$0.y)&&0<=Uo(n$jscomp$0.prev,n$jscomp$0,n$jscomp$0.next))){n=!1;break a}n$jscomp$0=n$jscomp$0.nextZ}for(;e&&e.z>=s;){if(e!==n.prev&&e!==n.next&&Ro(a.x,a.y,n.x,n.y,o.x,o.y,e.x,e.y)&&0<=Uo(e.prev,e,e.next)){n=!1;break a}e=e.prevZ}for(;n$jscomp$0&&n$jscomp$0.z<=l;){if(n$jscomp$0!==n.prev&&n$jscomp$0!==n.next&&Ro(a.x,a.y,n.x,n.y,o.x,o.y,n$jscomp$0.x,n$jscomp$0.y)&&0<=Uo(n$jscomp$0.prev,n$jscomp$0,n$jscomp$0.next)){n=!1;break a}n$jscomp$0=n$jscomp$0.nextZ}n=!0}}else a:if(n=
t$jscomp$0,a=n.prev,o=n.next,0<=Uo(a,n,o))n=!1;else{for(s=n.next.next;s!==n.prev;){if(Ro(a.x,a.y,n.x,n.y,o.x,o.y,s.x,s.y)&&0<=Uo(s.prev,s,s.next)){n=!1;break a}s=s.next}n=!0}if(n)e$jscomp$0.push(i$jscomp$0.i/r),e$jscomp$0.push(t$jscomp$0.i/r),e$jscomp$0.push(t.i/r),Jo(t$jscomp$0),i=t$jscomp$0=t.next;else if((t$jscomp$0=t)===i){if(o$jscomp$0)if(1===o$jscomp$0){t$jscomp$0=zo(t$jscomp$0);o$jscomp$0=e$jscomp$0;i$jscomp$0=r;t=t$jscomp$0;do i=t.prev,n=t.next.next,!jo(i,n)&&qo(i,t,t.next,n)&&Go(i,n)&&Go(n,
i)&&(o$jscomp$0.push(i.i/i$jscomp$0),o$jscomp$0.push(t.i/i$jscomp$0),o$jscomp$0.push(n.i/i$jscomp$0),Jo(t),Jo(t.next),t=t$jscomp$0=n),t=t.next;while(t!==t$jscomp$0);t$jscomp$0=zo(t);Co(t$jscomp$0,e$jscomp$0,r,n$jscomp$1,i$jscomp$1,a$jscomp$0,2)}else{if(2===o$jscomp$0)a:{o$jscomp$0=t$jscomp$0;do{for(i$jscomp$0=o$jscomp$0.next.next;i$jscomp$0!==o$jscomp$0.prev;){if(o$jscomp$0.i!==i$jscomp$0.i&&Oo(o$jscomp$0,i$jscomp$0)){t$jscomp$0=Zo(o$jscomp$0,i$jscomp$0);o$jscomp$0=zo(o$jscomp$0,o$jscomp$0.next);
t$jscomp$0=zo(t$jscomp$0,t$jscomp$0.next);Co(o$jscomp$0,e$jscomp$0,r,n$jscomp$1,i$jscomp$1,a$jscomp$0);Co(t$jscomp$0,e$jscomp$0,r,n$jscomp$1,i$jscomp$1,a$jscomp$0);break a}i$jscomp$0=i$jscomp$0.next}o$jscomp$0=o$jscomp$0.next}while(o$jscomp$0!==t$jscomp$0)}}else Co(zo(t$jscomp$0),e$jscomp$0,r,n$jscomp$1,i$jscomp$1,a$jscomp$0,1);break}}}}function Bo(t,e){return t.x-e.x}function Vo(t$jscomp$0,e$jscomp$1){if(e$jscomp$1=function(t,e$jscomp$0){var n=e$jscomp$0,i=t.x,a=t.y,o=-1/0;do{if(a<=n.y&&a>=n.next.y&&
n.next.y!==n.y){var s=n.x+(a-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(s<=i&&s>o){if(o=s,s===i){if(a===n.y)return n;if(a===n.next.y)return n.next}var r=n.x<n.next.x?n:n.next}}n=n.next}while(n!==e$jscomp$0);if(!r)return null;if(i===o)return r;s=r;var p=r.x,c=r.y,h=1/0;n=r;do{if(i>=n.x&&n.x>=p&&i!==n.x&&Ro(a<c?i:o,a,p,c,a<c?o:i,a,n.x,n.y)){e$jscomp$0=Math.abs(a-n.y)/(i-n.x);var JSCompiler_temp;if((JSCompiler_temp=Go(n,t))&&!(JSCompiler_temp=e$jscomp$0<h)&&(JSCompiler_temp=e$jscomp$0===h)&&!(JSCompiler_temp=
n.x>r.x)&&(JSCompiler_temp=n.x===r.x)){JSCompiler_temp=r;var e=n;JSCompiler_temp=0>Uo(JSCompiler_temp.prev,JSCompiler_temp,e.prev)&&0>Uo(e.next,JSCompiler_temp,JSCompiler_temp.next)}JSCompiler_temp&&(r=n,h=e$jscomp$0)}n=n.next}while(n!==s);return r}(t$jscomp$0,e$jscomp$1))t$jscomp$0=Zo(e$jscomp$1,t$jscomp$0),zo(e$jscomp$1,e$jscomp$1.next),zo(t$jscomp$0,t$jscomp$0.next)}function Do(t,e,r,n,i){return 1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-r)*i)|t<<8))|t<<4))|t<<2))|t<<1)|(1431655765&
((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-n)*i)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function Lo(t){var e=t,r=t;do(e.x<r.x||e.x===r.x&&e.y<r.y)&&(r=e),e=e.next;while(e!==t);return r}function Ro(t,e,r,n,i,a,o,s){return 0<=(i-o)*(e-s)-(t-o)*(a-s)&&0<=(t-o)*(n-s)-(r-o)*(e-s)&&0<=(r-o)*(a-s)-(i-o)*(n-s)}function Oo(t$jscomp$0,e$jscomp$0){return t$jscomp$0.next.i!==e$jscomp$0.i&&t$jscomp$0.prev.i!==e$jscomp$0.i&&!function(t,e){var r=t;do{if(r.i!==t.i&&r.next.i!==t.i&&r.i!==e.i&&r.next.i!==e.i&&qo(r,
r.next,t,e))return!0;r=r.next}while(r!==t);return!1}(t$jscomp$0,e$jscomp$0)&&(Go(t$jscomp$0,e$jscomp$0)&&Go(e$jscomp$0,t$jscomp$0)&&function(t,e){var r=t,n=!1,i=(t.x+e.x)/2;e=(t.y+e.y)/2;do r.y>e!=r.next.y>e&&r.next.y!==r.y&&i<(r.next.x-r.x)*(e-r.y)/(r.next.y-r.y)+r.x&&(n=!n),r=r.next;while(r!==t);return n}(t$jscomp$0,e$jscomp$0)&&(Uo(t$jscomp$0.prev,t$jscomp$0,e$jscomp$0.prev)||Uo(t$jscomp$0,e$jscomp$0.prev,e$jscomp$0))||jo(t$jscomp$0,e$jscomp$0)&&0<Uo(t$jscomp$0.prev,t$jscomp$0,t$jscomp$0.next)&&
0<Uo(e$jscomp$0.prev,e$jscomp$0,e$jscomp$0.next))}function Uo(t,e,r){return(e.y-t.y)*(r.x-e.x)-(e.x-t.x)*(r.y-e.y)}function jo(t,e){return t.x===e.x&&t.y===e.y}function qo(t,e,r,n){var i=Ko(Uo(t,e,r)),a=Ko(Uo(t,e,n)),o=Ko(Uo(r,n,t)),s=Ko(Uo(r,n,e));return i!==a&&o!==s||!(0!==i||!No(t,r,e))||!(0!==a||!No(t,n,e))||!(0!==o||!No(r,t,n))||!(0!==s||!No(r,e,n))}function No(t,e,r){return e.x<=Math.max(t.x,r.x)&&e.x>=Math.min(t.x,r.x)&&e.y<=Math.max(t.y,r.y)&&e.y>=Math.min(t.y,r.y)}function Ko(t){return 0<
t?1:0>t?-1:0}function Go(t,e){return 0>Uo(t.prev,t,t.next)?0<=Uo(t,e,t.next)&&0<=Uo(t,t.prev,e):0>Uo(t,e,t.prev)||0>Uo(t,t.next,e)}function Zo(t,e){var r=new Ho(t.i,t.x,t.y),n=new Ho(e.i,e.x,e.y),i=t.next,a=e.prev;return t.next=e,e.prev=t,r.next=i,i.prev=r,n.next=r,r.prev=n,a.next=n,n.prev=a,n}function Xo(t,e,r,n){t=new Ho(t,e,r);return n?(t.next=n.next,t.prev=n,n.next.prev=t,n.next=t):(t.prev=t,t.next=t),t}function Jo(t){t.next.prev=t.prev;t.prev.next=t.next;t.prevZ&&(t.prevZ.nextZ=t.nextZ);t.nextZ&&
(t.nextZ.prevZ=t.prevZ)}function Ho(t,e,r){this.i=t;this.x=e;this.y=r;this.nextZ=this.prevZ=this.z=this.next=this.prev=null;this.steiner=!1}function Yo(t,e,r,n){for(var i=0,o=r-n;e<r;e+=n)i+=(t[o]-t[e])*(t[e+1]+t[o+1]),o=e;return i}function $o(t$jscomp$0,e$jscomp$0,r$jscomp$0,n$jscomp$0,i$jscomp$0){!function t(e,r,n,i,a){for(;i>n;){if(600<i-n){var o=i-n+1,s=r-n+1,u=Math.log(o),l=.5*Math.exp(2*u/3);u=.5*Math.sqrt(u*l*(o-l)/o)*(0>s-o/2?-1:1);t(e,r,Math.max(n,Math.floor(r-s*l/o+u)),Math.min(i,Math.floor(r+
(o-s)*l/o+u)),a)}o=e[r];s=n;l=i;Wo(e,n,r);for(0<a(e[i],o)&&Wo(e,n,i);s<l;){Wo(e,s,l);s++;for(l--;0>a(e[s],o);)s++;for(;0<a(e[l],o);)l--}0===a(e[n],o)?Wo(e,n,l):Wo(e,++l,i);l<=r&&(n=l+1);r<=l&&(i=l-1)}}(t$jscomp$0,e$jscomp$0,r$jscomp$0||0,n$jscomp$0||t$jscomp$0.length-1,i$jscomp$0||Qo)}function Wo(t,e,r){var n=t[e];t[e]=t[r];t[r]=n}function Qo(t,e){return t<e?-1:t>e?1:0}function ts(t,e$jscomp$0){var r=t.length;if(1>=r)return[t];for(var n,i,a=[],o=0;o<r;o++){var s=t[o];for(var e=0,r$jscomp$0=0,n$jscomp$0=
s.length,i$jscomp$0=n$jscomp$0-1,a$jscomp$0=void 0,o$jscomp$0=void 0;r$jscomp$0<n$jscomp$0;i$jscomp$0=r$jscomp$0++)e+=((o$jscomp$0=s[i$jscomp$0]).x-(a$jscomp$0=s[r$jscomp$0]).x)*(a$jscomp$0.y+o$jscomp$0.y);s=e;0!==s&&(t[o].area=Math.abs(s),void 0===i&&(i=0>s),i===0>s?(n&&a.push(n),n=[t[o]]):n.push(t[o]))}if(n&&a.push(n),1<e$jscomp$0)for(t=0;t<a.length;t++)a[t].length<=e$jscomp$0||($o(a[t],e$jscomp$0,1,a[t].length-1,es),a[t]=a[t].slice(0,e$jscomp$0));return a}function es(t,e){return e.area-t.area}
function rs(t,e,r){r=r.patternDependencies;for(var i=!1,a=0;a<e.length;a+=1){var s=e[a].paint.get(t+"-pattern");s.isConstant()||(i=!0);(s=s.constantOr(null))&&(i=!0,r[s.to]=!0,r[s.from]=!0)}return i}function ns(t,e,r,n,i){for(var a=i.patternDependencies,o=0;o<e.length;o+=1){var u=e[o],l=u.paint.get(t+"-pattern").value;if("constant"!==l.kind){var p=l.evaluate({zoom:n-1},r,{},i.availableImages),c=l.evaluate({zoom:n},r,{},i.availableImages);l=l.evaluate({zoom:n+1},r,{},i.availableImages);c=c&&c.name?
c.name:c;l=l&&l.name?l.name:l;a[p=p&&p.name?p.name:p]=!0;a[c]=!0;a[l]=!0;r.patterns[u.id]={min:p,mid:c,max:l}}}return r}function ps(t,e,r,n,i){this.properties={};this.extent=r;this.type=0;this._pbf=t;this._geometry=-1;this._keys=n;this._values=i;t.readFields(cs,this,e)}function cs(t,e,r){if(1==t)e.id=r.readVarint();else if(2==t)for(t=r.readVarint()+r.pos;r.pos<t;){var n=e._keys[r.readVarint()],i=e._values[r.readVarint()];e.properties[n]=i}else 3==t?e.type=r.readVarint():4==t&&(e._geometry=r.pos)}
function ys(t,e){this.version=1;this.name=null;this.extent=4096;this.length=0;this._pbf=t;this._keys=[];this._values=[];this._features=[];t.readFields(ds,this,e);this.length=this._features.length}function ds(t$jscomp$0,e$jscomp$0,r$jscomp$0){15===t$jscomp$0?e$jscomp$0.version=r$jscomp$0.readVarint():1===t$jscomp$0?e$jscomp$0.name=r$jscomp$0.readString():5===t$jscomp$0?e$jscomp$0.extent=r$jscomp$0.readVarint():2===t$jscomp$0?e$jscomp$0._features.push(r$jscomp$0.pos):3===t$jscomp$0?e$jscomp$0._keys.push(r$jscomp$0.readString()):
4===t$jscomp$0&&e$jscomp$0._values.push(function(t){for(var e=null,r=t.readVarint()+t.pos;t.pos<r;)e=t.readVarint()>>3,e=1===e?t.readString():2===e?t.readFloat():3===e?t.readDouble():4===e?t.readVarint64():5===e?t.readVarint():6===e?t.readSVarint():7===e?t.readBoolean():null;return e}(r$jscomp$0))}function ms(t,e,r){3===t&&(t=new fs(r,r.readVarint()+r.pos),t.length&&(e[t.name]=t))}function bs(t,e,r,n,i,a,o,s){t.emplaceBack(e,r,2*Math.floor(n*xs)+o,i*xs*2,a*xs*2,Math.round(s))}function ks(t,e){return t.x*
e.x+t.y*e.y}function Is(t,e){if(1===t.length){for(var r,n=0,i=e[n++];!r||i.equals(r);)if(!(r=e[n++]))return 1/0;for(;n<e.length;n++){var a=e[n],o=t[0],s=r.sub(i),u=a.sub(i),l=o.sub(i);o=ks(s,s);var c=ks(s,u),h=ks(u,u);s=ks(l,s);u=ks(l,u);l=o*h-c*c;h=(h*s-c*u)/l;o=(o*u-c*s)/l;a=i.z*(1-h-o)+r.z*h+a.z*o;if(isFinite(a))return a}return 1/0}t=1/0;for(r=0;r<e.length;r+=1)t=Math.min(t,e[r].z);return t}function Ds(t,e){return 0<e?e+2*t:t}function qs(t$jscomp$1,e,r){return t$jscomp$1.sections.forEach(function(t$jscomp$0){var t=
t$jscomp$0.text;var JSCompiler_inline_result=e.layout.get("text-transform").evaluate(r,{});JSCompiler_inline_result=("uppercase"===JSCompiler_inline_result?t=t.toLocaleUpperCase():"lowercase"===JSCompiler_inline_result&&(t=t.toLocaleLowerCase()),ii.applyArabicShaping&&(t=ii.applyArabicShaping(t)),t);t$jscomp$0.text=JSCompiler_inline_result}),t$jscomp$1}function Xs(t){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(t)?t:new Uint8Array(t||0);this.type=this.pos=0;this.length=this.buf.length}function Hs(t){return t.type===
Xs.Bytes?t.readVarint()+t.pos:t.pos+1}function $s(t,e,r){e=16383>=e?1:2097151>=e?2:268435455>=e?3:Math.floor(Math.log(e)/(7*Math.LN2));r.realloc(e);for(var i=r.pos-1;i>=t;i--)r.buf[i+e]=r.buf[i]}function Ws(t,e){for(var r=0;r<t.length;r++)e.writeVarint(t[r])}function Qs(t,e){for(var r=0;r<t.length;r++)e.writeSVarint(t[r])}function tu(t,e){for(var r=0;r<t.length;r++)e.writeFloat(t[r])}function eu(t,e){for(var r=0;r<t.length;r++)e.writeDouble(t[r])}function ru(t,e){for(var r=0;r<t.length;r++)e.writeBoolean(t[r])}
function nu(t,e){for(var r=0;r<t.length;r++)e.writeFixed32(t[r])}function iu(t,e){for(var r=0;r<t.length;r++)e.writeSFixed32(t[r])}function au(t,e){for(var r=0;r<t.length;r++)e.writeFixed64(t[r])}function ou(t,e){for(var r=0;r<t.length;r++)e.writeSFixed64(t[r])}function su(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16)+16777216*t[e+3]}function uu(t,e,r){t[r]=e;t[r+1]=e>>>8;t[r+2]=e>>>16;t[r+3]=e>>>24}function lu(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16)+(t[e+3]<<24)}function pu(t,e,r){1===t&&r.readMessage(cu,
e)}function cu(t,e,r){if(3===t){t=r.readMessage(hu,{});r=t.width;var a=t.height,o=t.left,s=t.top,u=t.advance;e.push({id:t.id,bitmap:new yo({width:r+6,height:a+6},t.bitmap),metrics:{width:r,height:a,left:o,top:s,advance:u}})}}function hu(t,e,r){1===t?e.id=r.readVarint():2===t?e.bitmap=r.readBytes():3===t?e.width=r.readVarint():4===t?e.height=r.readVarint():5===t?e.left=r.readSVarint():6===t?e.top=r.readSVarint():7===t&&(e.advance=r.readVarint())}function fu(t$jscomp$0){for(var e$jscomp$0=0,r=0,n=0;n<
t$jscomp$0.length;n+=1){var a=t$jscomp$0[n];e$jscomp$0+=a.w*a.h;r=Math.max(r,a.w)}t$jscomp$0.sort(function(t,e){return e.h-t.h});r=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(e$jscomp$0/.95)),r),h:1/0}];for(var l=a=n=0;l<t$jscomp$0.length;l+=1)for(var c=t$jscomp$0[l],h=r.length-1;0<=h;h--){var f=r[h];if(!(c.w>f.w||c.h>f.h)){(c.x=f.x,c.y=f.y,a=Math.max(a,c.y+c.h),n=Math.max(n,c.x+c.w),c.w===f.w&&c.h===f.h)?(c=r.pop(),h<r.length&&(r[h]=c)):c.h===f.h?(f.x+=c.w,f.w-=c.w):c.w===f.w?(f.y+=c.h,f.h-=c.h):(r.push({x:f.x+
c.w,y:f.y,w:f.w-c.w,h:c.h}),f.y+=c.h,f.h-=c.h);break}}return{w:n,h:a,fill:e$jscomp$0/(n*a)||0}}function bu(t$jscomp$0,e$jscomp$0,r$jscomp$0,n$jscomp$0,i$jscomp$0,a$jscomp$0,o$jscomp$0,s$jscomp$0,u$jscomp$0,l$jscomp$0,p$jscomp$0,c$jscomp$0,h$jscomp$0,f$jscomp$0,y$jscomp$0,d$jscomp$0){i$jscomp$0=xu.fromFeature(t$jscomp$0,i$jscomp$0);c$jscomp$0===vu.vertical&&i$jscomp$0.verticalizePunctuation();var g$jscomp$0=ii.processBidirectionalText,x=ii.processStyledBidirectionalText;if(g$jscomp$0&&1===i$jscomp$0.sections.length){t$jscomp$0=
[];var b$jscomp$0=0;for(a$jscomp$0=g$jscomp$0(i$jscomp$0.toString(),zu(i$jscomp$0,l$jscomp$0,a$jscomp$0,e$jscomp$0,n$jscomp$0,f$jscomp$0,y$jscomp$0));b$jscomp$0<a$jscomp$0.length;b$jscomp$0+=1){f$jscomp$0=a$jscomp$0[b$jscomp$0];y$jscomp$0=new xu;y$jscomp$0.text=f$jscomp$0;y$jscomp$0.sections=i$jscomp$0.sections;for(g$jscomp$0=0;g$jscomp$0<f$jscomp$0.length;g$jscomp$0++)y$jscomp$0.sectionIndex.push(0);t$jscomp$0.push(y$jscomp$0)}}else if(x)for(t$jscomp$0=[],b$jscomp$0=0,a$jscomp$0=x(i$jscomp$0.text,
i$jscomp$0.sectionIndex,zu(i$jscomp$0,l$jscomp$0,a$jscomp$0,e$jscomp$0,n$jscomp$0,f$jscomp$0,y$jscomp$0));b$jscomp$0<a$jscomp$0.length;b$jscomp$0+=1)f$jscomp$0=a$jscomp$0[b$jscomp$0],y$jscomp$0=new xu,y$jscomp$0.text=f$jscomp$0[0],y$jscomp$0.sectionIndex=f$jscomp$0[1],y$jscomp$0.sections=i$jscomp$0.sections,t$jscomp$0.push(y$jscomp$0);else t$jscomp$0=function(t,e){for(var r=[],n=t.text,i=0,a=0;a<e.length;a+=1){var s=e[a];r.push(t.substring(i,s));i=s}return i<n.length&&r.push(t.substring(i,n.length)),
r}(i$jscomp$0,zu(i$jscomp$0,l$jscomp$0,a$jscomp$0,e$jscomp$0,n$jscomp$0,f$jscomp$0,y$jscomp$0));a$jscomp$0=[];p$jscomp$0={positionedLines:a$jscomp$0,text:i$jscomp$0.toString(),top:p$jscomp$0[1],bottom:p$jscomp$0[1],left:p$jscomp$0[0],right:p$jscomp$0[0],writingMode:c$jscomp$0,iconsInText:!1,verticalizable:!1};return function(t,e,r,n,i,a,o,s,u,l,p,c){var h=0,f=-17,y=0,d=0;s="right"===s?1:"left"===s?0:.5;for(var v=0,g=0;g<i.length;g+=1){var b=i[g];b.trim();var w=b.getMaxScale(),_=24*(w-1),A={positionedGlyphs:[],
lineOffset:0};t.positionedLines[v]=A;var S=A.positionedGlyphs,k=0;if(b.length()){for(var I=0;I<b.length();I++){var z=b.getSection(I),C=b.getSectionIndex(I),M=b.getCharCode(I),T,P=null,B=null,V=24,F=!(u===vu.horizontal||!p&&!Gn(M)||p&&(wu[M]||(K=M,Nn.Arabic(K)||Nn["Arabic Supplement"](K)||Nn["Arabic Extended-A"](K)||Nn["Arabic Presentation Forms-A"](K)||Nn["Arabic Presentation Forms-B"](K))));if(z.imageName){V=n[z.imageName];if(!V)continue;B=z.imageName;t.iconsInText=t.iconsInText||!0;P=V.paddedRect;
var L=V.displaySize;z.scale=24*z.scale/c;var E=_+(24-L[1]*z.scale);V=(T={width:L[0],height:L[1],left:1,top:-3,advance:F?L[1]:L[0]}).advance;L=F?L[0]*z.scale-24*w:L[1]*z.scale-24*w;0<L&&L>k&&(k=L)}else{if((E=(E=r[z.fontStack])&&E[M])&&E.rect)P=E.rect,T=E.metrics;else{E=(E=e[z.fontStack])&&E[M];if(!E)continue;T=E.metrics}E=24*(w-z.scale)}F?(t.verticalizable=!0,S.push({glyph:M,imageName:B,x:h,y:f+E,vertical:F,scale:z.scale,fontStack:z.fontStack,sectionIndex:C,metrics:T,rect:P}),h+=V*z.scale+l):(S.push({glyph:M,
imageName:B,x:h,y:f+E,vertical:F,scale:z.scale,fontStack:z.fontStack,sectionIndex:C,metrics:T,rect:P}),h+=T.advance*z.scale+l)}if(0!==S.length&&(y=Math.max(h-l,y),h=S,S=S.length-1,b=k,s||b))for(I=h[S],I=(h[S].x+I.metrics.advance*I.scale)*s,z=0;z<=S;z++)h[z].x-=I,h[z].y+=b;h=0;w=a*w+k;A.lineOffset=Math.max(k,_);f+=w;d=Math.max(w,d)}else f+=a;++v}var K;e=f- -17;r=Cu(o);o=r.horizontalAlign;r=r.verticalAlign;s=(s-o)*y;i=d!==a?-e*r- -17:(-r*i.length+.5)*a;a=0;for(d=t.positionedLines;a<d.length;a+=1)for(n=
0,u=d[a].positionedGlyphs;n<u.length;n+=1)l=u[n],l.x+=s,l.y+=i;t.top+=-r*e;t.bottom=t.top+e;t.left+=-o*y;t.right=t.left+y}(p$jscomp$0,e$jscomp$0,r$jscomp$0,n$jscomp$0,t$jscomp$0,o$jscomp$0,s$jscomp$0,u$jscomp$0,c$jscomp$0,l$jscomp$0,h$jscomp$0,d$jscomp$0),!function(t){for(var e=0;e<t.length;e+=1)if(0!==t[e].positionedGlyphs.length)return!1;return!0}(a$jscomp$0)&&p$jscomp$0}function Au(t,e,r,n,i,a){return e.imageName?(t=n[e.imageName])?t.displaySize[0]*e.scale*24/a+i:0:(t=(a=r[e.fontStack])&&a[t])?
t.metrics.advance*e.scale+i:0}function Su(t,e,r,n){var i=Math.pow(t-e,2);return n?t<e?i/2:2*i:i+Math.abs(r)*r}function ku(t,e,r){var n=0;return 10===t&&(n-=1E4),r&&(n+=150),40!==t&&65288!==t||(n+=50),41!==e&&65289!==e||(n+=50),n}function Iu(t,e,r,n,i,a){for(var o=null,s=Su(e,r,i,a),u=0;u<n.length;u+=1){var p=n[u],c=Su(e-p.x,r,i,a)+p.badness;c<=s&&(o=p,s=c)}return{index:t,x:e,priorBreak:o,badness:s}}function zu(t$jscomp$0,e$jscomp$0,r$jscomp$0,n$jscomp$0,i$jscomp$0,a$jscomp$0,o$jscomp$0){if("point"!==
a$jscomp$0||!t$jscomp$0)return[];var s$jscomp$0;a$jscomp$0=[];r$jscomp$0=function(t,e,r,n,i,a){for(var o=0,s=0;s<t.length();s++){var u=t.getSection(s);o+=Au(t.getCharCode(s),u,n,i,e,a)}return o/Math.max(1,Math.ceil(o/r))}(t$jscomp$0,e$jscomp$0,r$jscomp$0,n$jscomp$0,i$jscomp$0,o$jscomp$0);for(var p=0<=t$jscomp$0.text.indexOf(""),c=0,h=0;h<t$jscomp$0.length();h++){var f=t$jscomp$0.getSection(h),y=t$jscomp$0.getCharCode(h);if(wu[y]||(c+=Au(y,f,n$jscomp$0,i$jscomp$0,e$jscomp$0,o$jscomp$0)),h<t$jscomp$0.length()-
1){var d=!(11904>(s$jscomp$0=y)||!(Nn["Bopomofo Extended"](s$jscomp$0)||Nn.Bopomofo(s$jscomp$0)||Nn["CJK Compatibility Forms"](s$jscomp$0)||Nn["CJK Compatibility Ideographs"](s$jscomp$0)||Nn["CJK Compatibility"](s$jscomp$0)||Nn["CJK Radicals Supplement"](s$jscomp$0)||Nn["CJK Strokes"](s$jscomp$0)||Nn["CJK Symbols and Punctuation"](s$jscomp$0)||Nn["CJK Unified Ideographs Extension A"](s$jscomp$0)||Nn["CJK Unified Ideographs"](s$jscomp$0)||Nn["Enclosed CJK Letters and Months"](s$jscomp$0)||Nn["Halfwidth and Fullwidth Forms"](s$jscomp$0)||
Nn.Hiragana(s$jscomp$0)||Nn["Ideographic Description Characters"](s$jscomp$0)||Nn["Kangxi Radicals"](s$jscomp$0)||Nn["Katakana Phonetic Extensions"](s$jscomp$0)||Nn.Katakana(s$jscomp$0)||Nn["Vertical Forms"](s$jscomp$0)||Nn["Yi Radicals"](s$jscomp$0)||Nn["Yi Syllables"](s$jscomp$0)));(_u[y]||d||f.imageName)&&a$jscomp$0.push(Iu(h+1,c,r$jscomp$0,a$jscomp$0,ku(y,t$jscomp$0.getCharCode(h+1),d&&p),!1))}}return function t(e){return e?t(e.priorBreak).concat(e.index):[]}(Iu(t$jscomp$0.length(),c,r$jscomp$0,
a$jscomp$0,0,!0))}function Cu(t){var e=.5,r=.5;switch(t){case "right":case "top-right":case "bottom-right":e=1;break;case "left":case "top-left":case "bottom-left":e=0}switch(t){case "bottom":case "bottom-right":case "bottom-left":r=1;break;case "top":case "top-right":case "top-left":r=0}return{horizontalAlign:e,verticalAlign:r}}function Eu(t,e,r,n,i,a){t=t.image;if(t.content){var o=t.content;var l=t.pixelRatio||1;o=[o[0]/l,o[1]/l,t.displaySize[0]-o[2]/l,t.displaySize[1]-o[3]/l]}var p,c,h,f;l=e.left*
a;var d=e.right*a;"width"===r||"both"===r?(f=i[0]+l-n[3],c=i[0]+d+n[1]):c=(f=i[0]+(l+d-t.displaySize[0])/2)+t.displaySize[0];l=e.top*a;e=e.bottom*a;return"height"===r||"both"===r?(p=i[1]+l-n[0],h=i[1]+e+n[2]):h=(p=i[1]+(l+e-t.displaySize[1])/2)+t.displaySize[1],{image:t,top:p,right:c,bottom:h,left:f,collisionPadding:o}}function Pu(t,e){e=e.expression;if("constant"===e.kind)return{kind:"constant",layoutSize:e.evaluate(new ai(t+1))};if("source"===e.kind)return{kind:"source"};for(var n=e.zoomStops,i=
e.interpolationType,a=0;a<n.length&&n[a]<=t;)a++;for(var o=a=Math.max(0,a-1);o<n.length&&n[o]<t+1;)o++;o=Math.min(n.length-1,o);t=n[a];n=n[o];return"composite"===e.kind?{kind:"composite",minZoom:t,maxZoom:n,interpolationType:i}:{kind:"camera",minZoom:t,maxZoom:n,minSize:e.evaluate(new ai(t)),maxSize:e.evaluate(new ai(n)),interpolationType:i}}function Bu(t,e,r){var n=e.uSize,i=r.lowerSize;return"source"===t.kind?i/128:"composite"===t.kind?qe(i/128,r.upperSize/128,e.uSizeT):n}function Vu(t,e){var r=
0,n=0;if("constant"===t.kind)n=t.layoutSize;else if("source"!==t.kind){var i=t.interpolationType;e=i?l$jscomp$2(nr.interpolationFactor(i,e,t.minZoom,t.maxZoom),0,1):0;"camera"===t.kind?n=qe(t.minSize,t.maxSize,e):r=e}return{uSizeT:r,uSize:n}}function Du(t,e,r,n,i){if(void 0===e.segment)return!0;var a=e;e=e.segment+1;for(var s=0;s>-r/2;){if(0>--e)return!1;s-=t[e].dist(a);a=t[e]}s+=t[e].dist(t[e+1]);e++;a=[];for(var l=0;s<r/2;){var p=t[e],c=t[e+1];if(!c)return!1;var h=t[e-1].angleTo(p)-p.angleTo(c);
h=Math.abs((h+3*Math.PI)%(2*Math.PI)-Math.PI);a.push({distance:s,angleDelta:h});for(l+=h;s-a[0].distance>n;)l-=a.shift().angleDelta;if(l>i)return!1;e++;s+=p.dist(c)}return!0}function Lu(t){for(var e=0,r=0;r<t.length-1;r++)e+=t[r].dist(t[r+1]);return e}function Uu(t,e,r,n,i,a){i=r?.6*i*a:0;r=Math.max(r?r.right-r.left:0,n?n.right-n.left:0)*a;var u=0,l=Lu(t)/2;for(n=0;n<t.length-1;n++){a=t[n];var h=t[n+1],f=a.dist(h);if(u+f>l)return l=(l-u)/f,u=qe(a.x,h.x,l),l=qe(a.y,h.y,l),n=new Tu(u,l,h.angleTo(a),
n),n._round(),!i||Du(t,n,r,i,e)?n:void 0;u+=f}}function ju(t$jscomp$0,e$jscomp$0,r$jscomp$0,n$jscomp$0,i$jscomp$0,a$jscomp$0,o$jscomp$0,s$jscomp$0,u$jscomp$0){i$jscomp$0=Math.max(n$jscomp$0?n$jscomp$0.right-n$jscomp$0.left:0,i$jscomp$0?i$jscomp$0.right-i$jscomp$0.left:0);var c$jscomp$0=i$jscomp$0*o$jscomp$0,h$jscomp$0=0===t$jscomp$0[0].x||t$jscomp$0[0].x===u$jscomp$0||0===t$jscomp$0[0].y||t$jscomp$0[0].y===u$jscomp$0;return e$jscomp$0-c$jscomp$0<e$jscomp$0/4&&(e$jscomp$0=c$jscomp$0+e$jscomp$0/4),
function t(e,r,n,i,a,o,s,u,l){var p=o/2,c=Lu(e),h=0;r-=n;for(var y=[],d=0;d<e.length-1;d++){for(var m=e[d],v=e[d+1],g=m.dist(v),x=v.angleTo(m);r+n<h+g;){var b=((r+=n)-h)/g,w=qe(m.x,v.x,b);b=qe(m.y,v.y,b);0<=w&&w<l&&0<=b&&b<l&&0<=r-p&&r+p<=c&&(w=new Tu(w,b,x,d),w._round(),i&&!Du(e,w,o,i,a)||y.push(w))}h+=g}return u||y.length||s||(y=t(e,h/2,n,i,a,o,s,!0,l)),y}(t$jscomp$0,h$jscomp$0?e$jscomp$0/2*s$jscomp$0%e$jscomp$0:(i$jscomp$0/2+2*a$jscomp$0)*o$jscomp$0*s$jscomp$0%e$jscomp$0,e$jscomp$0,n$jscomp$0?
.6*a$jscomp$0*o$jscomp$0:0,r$jscomp$0,c$jscomp$0,h$jscomp$0,!1,u$jscomp$0)}function qu(t,e,r,n,a){for(var o=[],s=0;s<t.length;s++)for(var u=t[s],l=void 0,p=0;p<u.length-1;p++){var c=u[p],h=u[p+1];c.x<e&&h.x<e||(c.x<e?c=(new i$jscomp$2(e,c.y+(e-c.x)/(h.x-c.x)*(h.y-c.y)))._round():h.x<e&&(h=(new i$jscomp$2(e,c.y+(e-c.x)/(h.x-c.x)*(h.y-c.y)))._round()),c.y<r&&h.y<r||(c.y<r?c=(new i$jscomp$2(c.x+(r-c.y)/(h.y-c.y)*(h.x-c.x),r))._round():h.y<r&&(h=(new i$jscomp$2(c.x+(r-c.y)/(h.y-c.y)*(h.x-c.x),r))._round()),
c.x>=n&&h.x>=n||(c.x>=n?c=(new i$jscomp$2(n,c.y+(n-c.x)/(h.x-c.x)*(h.y-c.y)))._round():h.x>=n&&(h=(new i$jscomp$2(n,c.y+(n-c.x)/(h.x-c.x)*(h.y-c.y)))._round()),c.y>=a&&h.y>=a||(c.y>=a?c=(new i$jscomp$2(c.x+(a-c.y)/(h.y-c.y)*(h.x-c.x),a))._round():h.y>=a&&(h=(new i$jscomp$2(c.x+(a-c.y)/(h.y-c.y)*(h.x-c.x),a))._round()),l&&c.equals(l[l.length-1])||o.push(l=[c]),l.push(h)))))}return o}function Nu(t$jscomp$0,e$jscomp$0,r,n$jscomp$0){var a$jscomp$0=[],o=t$jscomp$0.image,s=o.pixelRatio,u$jscomp$0=o.paddedRect.w-
2,l$jscomp$0=o.paddedRect.h-2,p=t$jscomp$0.right-t$jscomp$0.left,c=t$jscomp$0.bottom-t$jscomp$0.top,h$jscomp$0=o.stretchX||[[0,u$jscomp$0]],f$jscomp$0=o.stretchY||[[0,l$jscomp$0]],y$jscomp$0=function(t,e){return t+e[1]-e[0]},d=h$jscomp$0.reduce(y$jscomp$0,0),m=f$jscomp$0.reduce(y$jscomp$0,0),v$jscomp$0=u$jscomp$0-d,g$jscomp$0=l$jscomp$0-m,x=0,b=d,w=0,_=m,A=0,S=v$jscomp$0,k=0,I=g$jscomp$0;o.content&&n$jscomp$0&&(y$jscomp$0=o.content,x=Ku(h$jscomp$0,0,y$jscomp$0[0]),w=Ku(f$jscomp$0,0,y$jscomp$0[1]),
b=Ku(h$jscomp$0,y$jscomp$0[0],y$jscomp$0[2]),_=Ku(f$jscomp$0,y$jscomp$0[1],y$jscomp$0[3]),A=y$jscomp$0[0]-x,k=y$jscomp$0[1]-w,S=y$jscomp$0[2]-y$jscomp$0[0]-b,I=y$jscomp$0[3]-y$jscomp$0[1]-_);y$jscomp$0=function(n,a,u,l){var h=(n.stretch-x)/b*p+t$jscomp$0.left,f=n.fixed-A-S*n.stretch/d,y=(a.stretch-w)/_*c+t$jscomp$0.top,v=a.fixed-k-I*a.stretch/m,g=(u.stretch-x)/b*p+t$jscomp$0.left,z=u.fixed-A-S*u.stretch/d,C=(l.stretch-w)/_*c+t$jscomp$0.top,M=l.fixed-k-I*l.stretch/m,E=new i$jscomp$2(h,y);y=new i$jscomp$2(g,
y);g=new i$jscomp$2(g,C);h=new i$jscomp$2(h,C);f=new i$jscomp$2(f/s,v/s);z=new i$jscomp$2(z/s,M/s);if(v=e$jscomp$0*Math.PI/180)M=Math.sin(v),v=Math.cos(v),M=[v,-M,M,v],E._matMult(M),y._matMult(M),h._matMult(M),g._matMult(M);n=n.stretch+n.fixed;a=a.stretch+a.fixed;return{tl:E,tr:y,bl:h,br:g,tex:{x:o.paddedRect.x+1+n,y:o.paddedRect.y+1+a,w:u.stretch+u.fixed-n,h:l.stretch+l.fixed-a},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:f,pixelOffsetBR:z,minFontScaleX:S/s/p,minFontScaleY:I/
s/c,isSDF:r}};if(n$jscomp$0&&(o.stretchX||o.stretchY))for(n$jscomp$0=Gu(h$jscomp$0,v$jscomp$0,d),f$jscomp$0=Gu(f$jscomp$0,g$jscomp$0,m),u$jscomp$0=0;u$jscomp$0<n$jscomp$0.length-1;u$jscomp$0++)for(l$jscomp$0=n$jscomp$0[u$jscomp$0],h$jscomp$0=n$jscomp$0[u$jscomp$0+1],g$jscomp$0=0;g$jscomp$0<f$jscomp$0.length-1;g$jscomp$0++)a$jscomp$0.push(y$jscomp$0(l$jscomp$0,f$jscomp$0[g$jscomp$0],h$jscomp$0,f$jscomp$0[g$jscomp$0+1]));else a$jscomp$0.push(y$jscomp$0({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,
stretch:u$jscomp$0+1},{fixed:0,stretch:l$jscomp$0+1}));return a$jscomp$0}function Ku(t,e,r){for(var n=0,i=0;i<t.length;i+=1){var o=t[i];n+=Math.max(e,Math.min(r,o[1]))-Math.max(e,Math.min(r,o[0]))}return n}function Gu(t,e,r){for(var n=[{fixed:-1,stretch:0}],i=0;i<t.length;i+=1){var o=t[i],s=o[0];o=o[1];var l=n[n.length-1];n.push({fixed:s-l.stretch,stretch:l.stretch});n.push({fixed:s-l.stretch,stretch:l.stretch+(o-s)})}return n.push({fixed:e+1,stretch:r}),n}function Yu(t,e){return t<e?-1:t>e?1:0}function $u(t,
e,r){void 0===e&&(e=1);void 0===r&&(r=!1);for(var n=1/0,a=1/0,o=-1/0,s=-1/0,u=t[0],l=0;l<u.length;l++){var p=u[l];(!l||p.x<n)&&(n=p.x);(!l||p.y<a)&&(a=p.y);(!l||p.x>o)&&(o=p.x);(!l||p.y>s)&&(s=p.y)}p=Math.min(o-n,s-a);u=p/2;l=new Hu([],Wu);if(0===p)return new i$jscomp$2(n,a);for(;n<o;n+=p)for(var d=a;d<s;d+=p)l.push(new Qu(n+u,d+u,u,t));s=o=a=0;n=t[0];p=0;d=n.length;for(var s$jscomp$0=d-1;p<d;s$jscomp$0=p++){var u$jscomp$0=n[p];s$jscomp$0=n[s$jscomp$0];var p$jscomp$0=u$jscomp$0.x*s$jscomp$0.y-s$jscomp$0.x*
u$jscomp$0.y;o+=(u$jscomp$0.x+s$jscomp$0.x)*p$jscomp$0;s+=(u$jscomp$0.y+s$jscomp$0.y)*p$jscomp$0;a+=3*p$jscomp$0}a=new Qu(o/a,s/a,0,t);for(o=l.length;l.length;)s=l.pop(),(s.d>a.d||!a.d)&&(a=s,r&&console.log("found best %d after %d probes",Math.round(1E4*s.d)/1E4,o)),s.max-a.d<=e||(l.push(new Qu(s.p.x-(u=s.h/2),s.p.y-u,u,t)),l.push(new Qu(s.p.x+u,s.p.y-u,u,t)),l.push(new Qu(s.p.x-u,s.p.y+u,u,t)),l.push(new Qu(s.p.x+u,s.p.y+u,u,t)),o+=4);return r&&(console.log("num probes: "+o),console.log("best distance: "+
a.d)),a.p}function Wu(t,e){return e.max-t.max}function Qu(t,e,r,n){this.p=new i$jscomp$2(t,e);this.h=r;t=this.p;e=!1;r=1/0;for(var i=0;i<n.length;i++)for(var a=n[i],o=0,s=a.length,u=s-1;o<s;u=o++){var l=a[o];u=a[u];l.y>t.y!=u.y>t.y&&t.x<(u.x-l.x)*(t.y-l.y)/(u.y-l.y)+l.x&&(e=!e);r=Math.min(r,Xa(t,l,u))}this.d=(e?1:-1)*Math.sqrt(r);this.max=this.d+this.h*Math.SQRT2}function el(t$jscomp$0,e$jscomp$0){return e$jscomp$0[1]!==tl?function(t,e,r){var n=0,i=0;switch(e=Math.abs(e),r=Math.abs(r),t){case "top-right":case "top-left":case "top":i=
r-7;break;case "bottom-right":case "bottom-left":case "bottom":i=7-r}switch(t){case "top-right":case "bottom-right":case "right":n=-e;break;case "top-left":case "bottom-left":case "left":n=e}return[n,i]}(t$jscomp$0,e$jscomp$0[0],e$jscomp$0[1]):function(t,e){var r=0,n=0;0>e&&(e=0);var i=e/Math.sqrt(2);switch(t){case "top-right":case "top-left":n=i-7;break;case "bottom-right":case "bottom-left":n=7-i;break;case "bottom":n=7-e;break;case "top":n=e-7}switch(t){case "top-right":case "bottom-right":r=-i;
break;case "top-left":case "bottom-left":r=i;break;case "left":r=e;break;case "right":r=-e}return[r,n]}(t$jscomp$0,e$jscomp$0[0])}function rl(t){switch(t){case "right":case "top-right":case "bottom-right":return"right";case "left":case "top-left":case "bottom-left":return"left"}return"center"}function nl(t,e,r,n,a,o,s,u$jscomp$0,l$jscomp$0,p$jscomp$0,c$jscomp$0,h$jscomp$0,f$jscomp$0,y$jscomp$0,d$jscomp$0){for(var u=t.allowVerticalPlacement,l=a.layout.get("text-rotate").evaluate(s,{})*Math.PI/180,
p=[],c=0,h=r.positionedLines;c<h.length;c+=1)for(var f=h[c],y=0,d=f.positionedGlyphs;y<d.length;y+=1){var m=d[y];if(m.rect){var v=m.rect||{},g=4,x=!0,b=1,w=0,_=(o||u)&&m.vertical,A=m.metrics.advance*m.scale/2;if(u&&r.verticalizable&&(w=f.lineOffset/2-(m.imageName?-(24-m.metrics.width*m.scale)/2:24*(m.scale-1))),m.imageName){var S=n[m.imageName];x=S.sdf;g=1/(b=S.pixelRatio)}S=o?[m.x+A,m.y]:[0,0];var I=o?[0,0]:[m.x+A+u$jscomp$0[0],m.y+u$jscomp$0[1]-w],z=[0,0];_&&(z=I,I=[0,0]);w=(m.metrics.left-g)*m.scale-
A+I[0];g=(-m.metrics.top-g)*m.scale+I[1];I=w+v.w*m.scale/b;var T=g+v.h*m.scale/b;b=new i$jscomp$2(w,g);g=new i$jscomp$2(I,g);w=new i$jscomp$2(w,T);I=new i$jscomp$2(I,T);_&&(_=new i$jscomp$2(-A,A- -17),T=-Math.PI/2,A=12-A,A=new i$jscomp$2(22-A,-(m.imageName?A:0)),z=new (Function.prototype.bind.apply(i$jscomp$2,[null].concat(z))),b._rotateAround(T,_)._add(A)._add(z),g._rotateAround(T,_)._add(A)._add(z),w._rotateAround(T,_)._add(A)._add(z),I._rotateAround(T,_)._add(A)._add(z));l&&(A=Math.sin(l),z=Math.cos(l),
A=[z,-A,A,z],b._matMult(A),g._matMult(A),w._matMult(A),I._matMult(A));A=new i$jscomp$2(0,0);z=new i$jscomp$2(0,0);p.push({tl:b,tr:g,bl:w,br:I,tex:v,writingMode:r.writingMode,glyphOffset:S,sectionIndex:m.sectionIndex,isSDF:x,pixelOffsetTL:A,pixelOffsetBR:z,minFontScaleX:0,minFontScaleY:0})}}r=t.textSizeData;n=null;"source"===r.kind?32640<(n=[128*a.layout.get("text-size").evaluate(s,{})])[0]&&_$jscomp$0(t.layerIds[0]+': Value for "text-size" is \x3e\x3d 255. Reduce your "text-size".'):"composite"===
r.kind&&(32640<(n=[128*y$jscomp$0.compositeTextSizes[0].evaluate(s,{},d$jscomp$0),128*y$jscomp$0.compositeTextSizes[1].evaluate(s,{},d$jscomp$0)])[0]||32640<n[1])&&_$jscomp$0(t.layerIds[0]+': Value for "text-size" is \x3e\x3d 255. Reduce your "text-size".');t.addSymbols(t.text,p,n,u$jscomp$0,o,s,p$jscomp$0,e,l$jscomp$0.lineStartIndex,l$jscomp$0.lineLength,f$jscomp$0,d$jscomp$0);for(e=0;e<c$jscomp$0.length;e+=1)h$jscomp$0[c$jscomp$0[e]]=t.text.placedSymbolArray.length-1;return 4*p.length}function il(t){for(var e in t)return t[e];
return null}function al(t,e,r,n){t=t.compareText;if(e in t)for(var a=t[e],o=a.length-1;0<=o;o--){if(n.dist(a[o])<r)return!0}else t[e]=[];return t[e].push(n),!1}function ul(t,e,r,n,i,a,o,s,u,l,p,c,h){t.emplaceBack(e,r,Math.round(32*n),Math.round(32*i),a,o,((s?Math.min(32640,Math.round(s[0])):0)<<1)+(u?1:0),s?Math.min(32640,Math.round(s[1])):0,16*l,16*p,256*c,256*h)}function ll(t,e,r){t.emplaceBack(e.x,e.y,r);t.emplaceBack(e.x,e.y,r);t.emplaceBack(e.x,e.y,r);t.emplaceBack(e.x,e.y,r)}function pl(t){var e=
0;for(t=t.sections;e<t.length;e+=1){a:{var JSCompiler_inline_result=0;for(var r=t[e].text;JSCompiler_inline_result<r.length;JSCompiler_inline_result+=1)if(Xn(r[JSCompiler_inline_result].charCodeAt(0))){JSCompiler_inline_result=!0;break a}JSCompiler_inline_result=!1}if(JSCompiler_inline_result)return!0}return!1}function Pl(t,e,r){r=12756274*Math.PI/256/Math.pow(2,r);return[t*r-12756274*Math.PI/2,e*r-12756274*Math.PI/2]}function Ll(t){return(180+t)/360}function Rl(t){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/
4+t*Math.PI/360)))/360}function Ul(t){return 360/Math.PI*Math.atan(Math.exp((180-360*t)*Math.PI/180))-90}function Gl(t,e,r,n,i){0>(t*=2)&&(t=-1*t-1);var a=1<<r;return(a*a*t+a*i+n).toString(36)+r.toString(36)+e.toString(36)}function Wl(t$jscomp$0,e,r,n,i){return g$jscomp$1(t$jscomp$0,function(t,a){return(t=e instanceof fi?e.get(a):null)&&t.evaluate?t.evaluate(r,n,i):t})}function Ql(t){for(var e=1/0,r=1/0,n=-1/0,i=-1/0,a=0;a<t.length;a+=1){var s=t[a];e=Math.min(e,s.x);r=Math.min(r,s.y);n=Math.max(n,
s.x);i=Math.max(i,s.y)}return{minX:e,minY:r,maxX:n,maxY:i}}function tp(t,e){return e-t}var r$jscomp$4=n$jscomp$2;n$jscomp$2.prototype.sampleCurveX=function(t){return((this.ax*t+this.bx)*t+this.cx)*t};n$jscomp$2.prototype.sampleCurveY=function(t){return((this.ay*t+this.by)*t+this.cy)*t};n$jscomp$2.prototype.sampleCurveDerivativeX=function(t){return(3*this.ax*t+2*this.bx)*t+this.cx};n$jscomp$2.prototype.solveCurveX=function(t,e){var r,a;void 0===e&&(e=1E-6);var i=t;for(r=0;8>r;r++){if(a=this.sampleCurveX(i)-
t,Math.abs(a)<e)return i;var n=this.sampleCurveDerivativeX(i);if(1E-6>Math.abs(n))break;i-=a/n}if((i=t)<(r=0))return r;if(i>(n=1))return n;for(;r<n&&!(a=this.sampleCurveX(i),Math.abs(a-t)<e);)t>a?r=i:n=i,i=.5*(n-r)+r;return i};n$jscomp$2.prototype.solve=function(t,e){return this.sampleCurveY(this.solveCurveX(t,e))};var i$jscomp$2=a$jscomp$3;a$jscomp$3.prototype={clone:function(){return new a$jscomp$3(this.x,this.y)},add:function(t){return this.clone()._add(t)},sub:function(t){return this.clone()._sub(t)},
multByPoint:function(t){return this.clone()._multByPoint(t)},divByPoint:function(t){return this.clone()._divByPoint(t)},mult:function(t){return this.clone()._mult(t)},div:function(t){return this.clone()._div(t)},rotate:function(t){return this.clone()._rotate(t)},rotateAround:function(t,e){return this.clone()._rotateAround(t,e)},matMult:function(t){return this.clone()._matMult(t)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},
mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(t){return this.x===t.x&&this.y===t.y},dist:function(t){return Math.sqrt(this.distSqr(t))},distSqr:function(t){var e=t.x-this.x;t=t.y-this.y;return e*e+t*t},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(t){return Math.atan2(this.y-t.y,this.x-t.x)},angleWith:function(t){return this.angleWithSep(t.x,t.y)},angleWithSep:function(t,e){return Math.atan2(this.x*e-this.y*t,this.x*t+this.y*e)},_matMult:function(t){var e=
t[2]*this.x+t[3]*this.y;return this.x=t[0]*this.x+t[1]*this.y,this.y=e,this},_add:function(t){return this.x+=t.x,this.y+=t.y,this},_sub:function(t){return this.x-=t.x,this.y-=t.y,this},_mult:function(t){return this.x*=t,this.y*=t,this},_div:function(t){return this.x/=t,this.y/=t,this},_multByPoint:function(t){return this.x*=t.x,this.y*=t.y,this},_divByPoint:function(t){return this.x/=t.x,this.y/=t.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var t=this.y;return this.y=
this.x,this.x=-t,this},_rotate:function(t){var e=Math.cos(t);t=Math.sin(t);var n=t*this.x+e*this.y;return this.x=e*this.x-t*this.y,this.y=n,this},_rotateAround:function(t,e){var r=Math.cos(t);t=Math.sin(t);var i=e.y+t*(this.x-e.x)+r*(this.y-e.y);return this.x=e.x+r*(this.x-e.x)-t*(this.y-e.y),this.y=i,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}};a$jscomp$3.convert=function(t){return t instanceof a$jscomp$3?t:Array.isArray(t)?new a$jscomp$3(t[0],t[1]):t};
var o$jscomp$2="undefined"!=typeof self?self:{},u$jscomp$3=s$jscomp$3(.25,.1,.25,1),h$jscomp$2=1,w$jscomp$2={},z$jscomp$2=null,E$jscomp$1,T$jscomp$1,P$jscomp$0,B$jscomp$0,V$jscomp$1=o$jscomp$2.performance&&o$jscomp$2.performance.now?o$jscomp$2.performance.now.bind(o$jscomp$2.performance):Date.now.bind(Date),F$jscomp$2=o$jscomp$2.requestAnimationFrame||o$jscomp$2.mozRequestAnimationFrame||o$jscomp$2.webkitRequestAnimationFrame||o$jscomp$2.msRequestAnimationFrame,D$jscomp$2=o$jscomp$2.cancelAnimationFrame||
o$jscomp$2.mozCancelAnimationFrame||o$jscomp$2.webkitCancelAnimationFrame||o$jscomp$2.msCancelAnimationFrame,L$jscomp$1={now:V$jscomp$1,frame:function(t){var e=F$jscomp$2(t);return{cancel:function(){return D$jscomp$2(e)}}},getImageData:function(t,e){void 0===e&&(e=0);var r=o$jscomp$2.document.createElement("canvas"),n=r.getContext("2d");if(!n)throw Error("failed to create canvas 2d context");return r.width=t.width,r.height=t.height,n.drawImage(t,0,0,t.width,t.height),n.getImageData(-e,-e,t.width+
2*e,t.height+2*e)},resolveURL:function(t){return E$jscomp$1||(E$jscomp$1=o$jscomp$2.document.createElement("a")),E$jscomp$1.href=t,E$jscomp$1.href},hardwareConcurrency:o$jscomp$2.navigator&&o$jscomp$2.navigator.hardwareConcurrency||4,get devicePixelRatio(){return o$jscomp$2.devicePixelRatio},get prefersReducedMotion(){return!!o$jscomp$2.matchMedia&&(null==T$jscomp$1&&(T$jscomp$1=o$jscomp$2.matchMedia("(prefers-reduced-motion: reduce)")),T$jscomp$1.matches)}},R$jscomp$0={API_URL:"https://api.mapbox.com",
get EVENTS_URL(){return this.API_URL?0===this.API_URL.indexOf("https://api.mapbox.cn")?"https://events.mapbox.cn/events/v2":0===this.API_URL.indexOf("https://api.mapbox.com")?"https://events.mapbox.com/events/v2":null:null},FEEDBACK_URL:"https://apps.mapbox.com/feedback",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null,MAX_PARALLEL_IMAGE_REQUESTS:16},O$jscomp$0={supported:!1,testSupport:function(t){!U$jscomp$0&&B$jscomp$0&&(j$jscomp$0?q(t):P$jscomp$0=t)}},U$jscomp$0=!1,j$jscomp$0=!1;o$jscomp$2.document&&
((B$jscomp$0=o$jscomp$2.document.createElement("img")).onload=function(){P$jscomp$0&&q(P$jscomp$0);P$jscomp$0=null;j$jscomp$0=!0},B$jscomp$0.onerror=function(){U$jscomp$0=!0;P$jscomp$0=null},B$jscomp$0.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA\x3d");var K$jscomp$0=function(t,e){this._transformRequestFn=t;this._customAccessToken=e;this._createSkuToken()};K$jscomp$0.prototype._createSkuToken=function(){var JSCompiler_object_inline_tokenExpiresAt_6547;var JSCompiler_object_inline_token_6546=
"";for(JSCompiler_object_inline_tokenExpiresAt_6547=0;10>JSCompiler_object_inline_tokenExpiresAt_6547;JSCompiler_object_inline_tokenExpiresAt_6547++)JSCompiler_object_inline_token_6546+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[Math.floor(62*Math.random())];JSCompiler_object_inline_token_6546=["101",JSCompiler_object_inline_token_6546].join("");JSCompiler_object_inline_tokenExpiresAt_6547=Date.now()+432E5;this._skuToken=JSCompiler_object_inline_token_6546;this._skuTokenExpiresAt=
JSCompiler_object_inline_tokenExpiresAt_6547};K$jscomp$0.prototype._isSkuTokenExpired=function(){return Date.now()>this._skuTokenExpiresAt};K$jscomp$0.prototype.transformRequest=function(t,e){return this._transformRequestFn&&this._transformRequestFn(t,e)||{url:t}};K$jscomp$0.prototype.normalizeStyleURL=function(t,e){if(!G(t))return t;t=H$jscomp$0(t);return t.path="/styles/v1"+t.path,this._makeAPIURL(t,this._customAccessToken||e)};K$jscomp$0.prototype.normalizeGlyphsURL=function(t,e){if(!G(t))return t;
t=H$jscomp$0(t);return t.path="/fonts/v1"+t.path,this._makeAPIURL(t,this._customAccessToken||e)};K$jscomp$0.prototype.normalizeSourceURL=function(t,e){if(!G(t))return t;t=H$jscomp$0(t);return t.path="/v4/"+t.authority+".json",t.params.push("secure"),this._makeAPIURL(t,this._customAccessToken||e)};K$jscomp$0.prototype.normalizeSpriteURL=function(t,e,r,n){var i=H$jscomp$0(t);return G(t)?(i.path="/styles/v1"+i.path+"/sprite"+e+r,this._makeAPIURL(i,this._customAccessToken||n)):(i.path+=""+e+r,Y(i))};
K$jscomp$0.prototype.normalizeTileURL=function(t,e){if(this._isSkuTokenExpired()&&this._createSkuToken(),t&&!G(t))return t;t=H$jscomp$0(t);t.path=t.path.replace(/(\.(png|jpg)\d*)(?=$)/,(2<=L$jscomp$1.devicePixelRatio||512===e?"@2x":"")+(O$jscomp$0.supported?".webp":"$1"));t.path=t.path.replace(/^.+\/v4\//,"/");t.path="/v4"+t.path;if(!(e=this._customAccessToken))a:{e=0;for(var r=t.params;e<r.length;e+=1){var n=r[e].match(/^access_token=(.*)$/);if(n){e=n[1];break a}}e=null}e=e||R$jscomp$0.ACCESS_TOKEN;
return R$jscomp$0.REQUIRE_ACCESS_TOKEN&&e&&this._skuToken&&t.params.push("sku\x3d"+this._skuToken),this._makeAPIURL(t,e)};K$jscomp$0.prototype.canonicalizeTileURL=function(t$jscomp$0,e){var r=H$jscomp$0(t$jscomp$0);if(!r.path.match(/(^\/v4\/)/)||!r.path.match(/\.[\w]+$/))return t$jscomp$0;t$jscomp$0="mapbox://tiles/"+r.path.replace("/v4/","");r=r.params;return e&&(r=r.filter(function(t){return!t.match(/^access_token=/)})),r.length&&(t$jscomp$0+="?"+r.join("\x26")),t$jscomp$0};K$jscomp$0.prototype.canonicalizeTileset=
function(t,e){e=!!e&&G(e);var n=[],i=0;for(t=t.tiles||[];i<t.length;i+=1){var o=t[i];Z.test(o)?n.push(this.canonicalizeTileURL(o,e)):n.push(o)}return n};K$jscomp$0.prototype._makeAPIURL=function(t$jscomp$0,e){var n=H$jscomp$0(R$jscomp$0.API_URL);if(t$jscomp$0.protocol=n.protocol,t$jscomp$0.authority=n.authority,"/"!==n.path&&(t$jscomp$0.path=""+n.path+t$jscomp$0.path),!R$jscomp$0.REQUIRE_ACCESS_TOKEN)return Y(t$jscomp$0);if(!(e=e||R$jscomp$0.ACCESS_TOKEN))throw Error("An API access token is required to use Mapbox GL. See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes");
if("s"===e[0])throw Error("Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes");return t$jscomp$0.params=t$jscomp$0.params.filter(function(t){return-1===t.indexOf("access_token")}),t$jscomp$0.params.push("access_token\x3d"+e),Y(t$jscomp$0)};var Z=/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/|\?|$)/i,J=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/,W=function(t){this.type=t;this.anonId=null;this.eventData=
{};this.queue=[];this.pendingRequest=null};W.prototype.getStorageKey=function(t$jscomp$0){var e$jscomp$0,r=$(R$jscomp$0.ACCESS_TOKEN);return e$jscomp$0=r&&r.u?o$jscomp$2.btoa(encodeURIComponent(r.u).replace(/%([0-9A-F]{2})/g,function(t,e){return String.fromCharCode(Number("0x"+e))})):R$jscomp$0.ACCESS_TOKEN||"",t$jscomp$0?"mapbox.eventData."+t$jscomp$0+":"+e$jscomp$0:"mapbox.eventData:"+e$jscomp$0};W.prototype.fetchEventData=function(){var t=M$jscomp$2("localStorage"),e=this.getStorageKey(),r=this.getStorageKey("uuid");
if(t)try{var n=o$jscomp$2.localStorage.getItem(e);n&&(this.eventData=JSON.parse(n));var i=o$jscomp$2.localStorage.getItem(r);i&&(this.anonId=i)}catch(t$388){_$jscomp$0("Unable to read from LocalStorage")}};W.prototype.saveEventData=function(){var t=M$jscomp$2("localStorage"),e=this.getStorageKey(),r=this.getStorageKey("uuid");if(t)try{o$jscomp$2.localStorage.setItem(r,this.anonId),1<=Object.keys(this.eventData).length&&o$jscomp$2.localStorage.setItem(e,JSON.stringify(this.eventData))}catch(t$389){_$jscomp$0("Unable to write to LocalStorage")}};
W.prototype.processRequests=function(t){};W.prototype.postEvent=function(t$jscomp$0,e,r,n){var i=this;if(R$jscomp$0.EVENTS_URL){var a=H$jscomp$0(R$jscomp$0.EVENTS_URL);a.params.push("access_token\x3d"+(n||R$jscomp$0.ACCESS_TOKEN||""));t$jscomp$0={event:this.type,created:(new Date(t$jscomp$0)).toISOString(),sdkIdentifier:"mapbox-gl-js",sdkVersion:"1.11.1",skuId:"01",userId:this.anonId};e=e?c$jscomp$4(t$jscomp$0,e):t$jscomp$0;a={url:Y(a),headers:{"Content-Type":"text/plain"},body:JSON.stringify([e])};
this.pendingRequest=bt(a,function(t){i.pendingRequest=null;r(t);i.saveEventData();i.processRequests(n)})}};W.prototype.queueRequest=function(t,e){this.queue.push(t);this.processRequests(e)};var Q,tt,et=function(t$jscomp$1){function e$jscomp$0(){t$jscomp$1.call(this,"map.load");this.success={};this.skuToken=""}return t$jscomp$1&&(e$jscomp$0.__proto__=t$jscomp$1),(e$jscomp$0.prototype=Object.create(t$jscomp$1&&t$jscomp$1.prototype)).constructor=e$jscomp$0,e$jscomp$0.prototype.postMapLoadEvent=function(t$jscomp$0,
e,r,n){this.skuToken=r;(R$jscomp$0.EVENTS_URL&&n||R$jscomp$0.ACCESS_TOKEN&&Array.isArray(t$jscomp$0)&&t$jscomp$0.some(function(t){return G(t)||Z.test(t)}))&&this.queueRequest({id:e,timestamp:Date.now()},n)},e$jscomp$0.prototype.processRequests=function(t$jscomp$0){var e=this;if(!this.pendingRequest&&0!==this.queue.length){var r=this.queue.shift(),n=r.id;r=r.timestamp;n&&this.success[n]||(this.anonId||this.fetchEventData(),d$jscomp$2(this.anonId)||(this.anonId=y$jscomp$2()),this.postEvent(r,{skuToken:this.skuToken},
function(t){t||n&&(e.success[n]=!0)},t$jscomp$0))}},e$jscomp$0}(W),rt=new (function(t$jscomp$1){function e$jscomp$0(e){t$jscomp$1.call(this,"appUserTurnstile");this._customAccessToken=e}return t$jscomp$1&&(e$jscomp$0.__proto__=t$jscomp$1),(e$jscomp$0.prototype=Object.create(t$jscomp$1&&t$jscomp$1.prototype)).constructor=e$jscomp$0,e$jscomp$0.prototype.postTurnstileEvent=function(t$jscomp$0,e){R$jscomp$0.EVENTS_URL&&R$jscomp$0.ACCESS_TOKEN&&Array.isArray(t$jscomp$0)&&t$jscomp$0.some(function(t){return G(t)||
Z.test(t)})&&this.queueRequest(Date.now(),e)},e$jscomp$0.prototype.processRequests=function(t$jscomp$0){var e=this;if(!this.pendingRequest&&0!==this.queue.length){this.anonId&&this.eventData.lastSuccess&&this.eventData.tokenU||this.fetchEventData();var r=$(R$jscomp$0.ACCESS_TOKEN),n=r?r.u:R$jscomp$0.ACCESS_TOKEN;r=n!==this.eventData.tokenU;d$jscomp$2(this.anonId)||(this.anonId=y$jscomp$2(),r=!0);var a=this.queue.shift();if(this.eventData.lastSuccess){var o=new Date(this.eventData.lastSuccess),s=new Date(a),
u=(a-this.eventData.lastSuccess)/864E5;r=r||1<=u||-1>u||o.getDate()!==s.getDate()}else r=!0;if(!r)return this.processRequests();this.postEvent(a,{"enabled.telemetry":!1},function(t){t||(e.eventData.lastSuccess=a,e.eventData.tokenU=n)},t$jscomp$0)}},e$jscomp$0}(W)),nt=rt.postTurnstileEvent.bind(rt),it=new et,at=it.postMapLoadEvent.bind(it),ot=500,st=50,pt,ct=1/0,ft={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};
"function"==typeof Object.freeze&&Object.freeze(ft);var yt=function(t){function e$jscomp$0(e,r,n){401===r&&Z.test(n)&&(e+=": you may have provided an invalid Mapbox access token. See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes");t.call(this,e);this.status=r;this.url=n;this.name=this.constructor.name;this.message=e}return t&&(e$jscomp$0.__proto__=t),(e$jscomp$0.prototype=Object.create(t&&t.prototype)).constructor=e$jscomp$0,e$jscomp$0.prototype.toString=function(){return this.name+
": "+this.message+" ("+this.status+"): "+this.url},e$jscomp$0}(Error),dt=k$jscomp$2()?function(){return self.worker&&self.worker.referrer}:function(){return("blob:"===o$jscomp$2.location.protocol?o$jscomp$2.parent:o$jscomp$2).location.href},gt=function(t$jscomp$3,e$jscomp$3){if(!(/^file:/.test(r$jscomp$3=t$jscomp$3.url)||/^file:/.test(dt())&&!/^\w+:/.test(r$jscomp$3))){if(o$jscomp$2.fetch&&o$jscomp$2.Request&&o$jscomp$2.AbortController&&o$jscomp$2.Request.prototype.hasOwnProperty("signal"))return function(t$jscomp$2,
e$jscomp$2){var r$jscomp$2,n$jscomp$1=new o$jscomp$2.AbortController,i$jscomp$0=new o$jscomp$2.Request(t$jscomp$2.url,{method:t$jscomp$2.method||"GET",body:t$jscomp$2.body,credentials:t$jscomp$2.credentials,headers:t$jscomp$2.headers,referrer:dt(),signal:n$jscomp$1.signal}),a$jscomp$0=!1,s=!1,u$jscomp$0=0<(r$jscomp$2=i$jscomp$0.url).indexOf("sku\x3d")&&Z.test(r$jscomp$2);"json"===t$jscomp$2.type&&i$jscomp$0.headers.set("Accept","application/json");r$jscomp$2=function(r$jscomp$0,n$jscomp$0,a){if(!s){if(r$jscomp$0&&
"SecurityError"!==r$jscomp$0.message&&_$jscomp$0(r$jscomp$0),n$jscomp$0&&a)return p(n$jscomp$0);var l=Date.now();o$jscomp$2.fetch(i$jscomp$0).then(function(r){if(r.ok){var n=u$jscomp$0?r.clone():null;return p(r,n,l)}return e$jscomp$2(new yt(r.statusText,r.status,t$jscomp$2.url))}).catch(function(t){20!==t.code&&e$jscomp$2(Error(t.message))})}};var p=function(r$jscomp$1,n$jscomp$0,u){("arrayBuffer"===t$jscomp$2.type?r$jscomp$1.arrayBuffer():"json"===t$jscomp$2.type?r$jscomp$1.json():r$jscomp$1.text()).then(function(t$jscomp$1){s||
(n$jscomp$0&&u&&function(t$jscomp$0,e$jscomp$1,r$jscomp$0){if(ut(),Q){var n={status:e$jscomp$1.status,statusText:e$jscomp$1.statusText,headers:new o$jscomp$2.Headers};e$jscomp$1.headers.forEach(function(t,e){return n.headers.set(e,t)});var i=I$jscomp$2(e$jscomp$1.headers.get("Cache-Control")||"");i["no-store"]||(i["max-age"]&&n.headers.set("Expires",(new Date(r$jscomp$0+1E3*i["max-age"])).toUTCString()),42E4>(new Date(n.headers.get("Expires"))).getTime()-r$jscomp$0||function(t,e){if(void 0===tt)try{new Response(new ReadableStream),
tt=!0}catch(t$390){tt=!1}tt?e(t.body):t.blob().then(e)}(e$jscomp$1,function(e$jscomp$0){var r=new o$jscomp$2.Response(e$jscomp$0,n);ut();Q&&Q.then(function(e){return e.put(lt(t$jscomp$0.url),r)}).catch(function(t){return _$jscomp$0(t.message)})}))}}(i$jscomp$0,n$jscomp$0,u),a$jscomp$0=!0,e$jscomp$2(null,t$jscomp$1,r$jscomp$1.headers.get("Cache-Control"),r$jscomp$1.headers.get("Expires")))}).catch(function(t){s||e$jscomp$2(Error(t.message))})};return u$jscomp$0?function(t$jscomp$0,e){if(ut(),!Q)return e(null);
var r$jscomp$0=lt(t$jscomp$0.url);Q.then(function(t){t.match(r$jscomp$0).then(function(n){if(n){var i=new Date(n.headers.get("Expires")||0);var r=I$jscomp$2(n.headers.get("Cache-Control")||"");i=i>Date.now()&&!r["no-cache"]}else i=!1;t.delete(r$jscomp$0);i&&t.put(r$jscomp$0,n.clone());e(null,n,i)}).catch(e)}).catch(e)}(i$jscomp$0,r$jscomp$2):r$jscomp$2(null,null),{cancel:function(){s=!0;a$jscomp$0||n$jscomp$1.abort()}}}(t$jscomp$3,e$jscomp$3);if(k$jscomp$2()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",
t$jscomp$3,e$jscomp$3,void 0,!0)}var r$jscomp$3;return function(t,e){var r=new o$jscomp$2.XMLHttpRequest,n$jscomp$0;for(n$jscomp$0 in r.open(t.method||"GET",t.url,!0),"arrayBuffer"===t.type&&(r.responseType="arraybuffer"),t.headers)r.setRequestHeader(n$jscomp$0,t.headers[n$jscomp$0]);return"json"===t.type&&(r.responseType="text",r.setRequestHeader("Accept","application/json")),r.withCredentials="include"===t.credentials,r.onerror=function(){e(Error(r.statusText))},r.onload=function(){if((200<=r.status&&
300>r.status||0===r.status)&&null!==r.response){var n=r.response;if("json"===t.type)try{n=JSON.parse(r.response)}catch(t$391){return e(t$391)}e(null,n,r.getResponseHeader("Cache-Control"),r.getResponseHeader("Expires"))}else e(new yt(r.statusText,r.status,t.url))},r.send(t.body),{cancel:function(){return r.abort()}}}(t$jscomp$3,e$jscomp$3)},xt=function(t,e){return gt(c$jscomp$4(t,{type:"arrayBuffer"}),e)},bt=function(t,e){return gt(c$jscomp$4(t,{method:"POST"}),e)};var mt=[];var vt=0;var wt=function(t$jscomp$2,
e$jscomp$0){if(O$jscomp$0.supported&&(t$jscomp$2.headers||(t$jscomp$2.headers={}),t$jscomp$2.headers.accept="image/webp,*/*"),vt>=R$jscomp$0.MAX_PARALLEL_IMAGE_REQUESTS)return t$jscomp$2={requestParameters:t$jscomp$2,callback:e$jscomp$0,cancelled:!1,cancel:function(){this.cancelled=!0}},mt.push(t$jscomp$2),t$jscomp$2;vt++;var n$jscomp$1=!1,i$jscomp$0=function(){if(!n$jscomp$1)for(n$jscomp$1=!0,vt--;mt.length&&vt<R$jscomp$0.MAX_PARALLEL_IMAGE_REQUESTS;){var t=mt.shift();t.cancelled||(t.cancel=wt(t.requestParameters,
t.callback).cancel)}},a$jscomp$1=xt(t$jscomp$2,function(t$jscomp$1,r$jscomp$0,n$jscomp$0,a$jscomp$0){i$jscomp$0();t$jscomp$1?e$jscomp$0(t$jscomp$1):r$jscomp$0&&(ht()?function(t$jscomp$0,e){t$jscomp$0=new o$jscomp$2.Blob([new Uint8Array(t$jscomp$0)],{type:"image/png"});o$jscomp$2.createImageBitmap(t$jscomp$0).then(function(t){e(null,t)}).catch(function(t){e(Error("Could not load image because of "+t.message+". Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))})}(r$jscomp$0,
e$jscomp$0):function(t,e,r,n){var i=new o$jscomp$2.Image,a=o$jscomp$2.URL;i.onload=function(){e(null,i);a.revokeObjectURL(i.src)};i.onerror=function(){return e(Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))};var s=new o$jscomp$2.Blob([new Uint8Array(t)],{type:"image/png"});i.cacheControl=r;i.expires=n;i.src=t.byteLength?a.createObjectURL(s):"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII\x3d"}(r$jscomp$0,
e$jscomp$0,n$jscomp$0,a$jscomp$0))});return{cancel:function(){a$jscomp$1.cancel();i$jscomp$0()}}},St=function(t,e){void 0===e&&(e={});c$jscomp$4(this,e);this.type=t},kt=function(t){function e$jscomp$0(e,r){void 0===r&&(r={});t.call(this,"error",c$jscomp$4({error:e},r))}return t&&(e$jscomp$0.__proto__=t),(e$jscomp$0.prototype=Object.create(t&&t.prototype)).constructor=e$jscomp$0,e$jscomp$0}(St),It=function(){};It.prototype.on=function(t,e){return this._listeners=this._listeners||{},_t(t,e,this._listeners),
this};It.prototype.off=function(t,e){return At(t,e,this._listeners),At(t,e,this._oneTimeListeners),this};It.prototype.once=function(t,e){return this._oneTimeListeners=this._oneTimeListeners||{},_t(t,e,this._oneTimeListeners),this};It.prototype.fire=function(t,e){"string"==typeof t&&(t=new St(t,e||{}));e=t.type;if(this.listens(e)){t.target=this;for(var n=0,i=this._listeners&&this._listeners[e]?this._listeners[e].slice():[];n<i.length;n+=1)i[n].call(this,t);n=0;for(i=this._oneTimeListeners&&this._oneTimeListeners[e]?
this._oneTimeListeners[e].slice():[];n<i.length;n+=1){var s=i[n];At(e,s,this._oneTimeListeners);s.call(this,t)}(e=this._eventedParent)&&(c$jscomp$4(t,"function"==typeof this._eventedParentData?this._eventedParentData():this._eventedParentData),e.fire(t))}else t instanceof kt&&console.error(t.error);return this};It.prototype.listens=function(t){return this._listeners&&this._listeners[t]&&0<this._listeners[t].length||this._oneTimeListeners&&this._oneTimeListeners[t]&&0<this._oneTimeListeners[t].length||
this._eventedParent&&this._eventedParent.listens(t)};It.prototype.setEventedParent=function(t,e){return this._eventedParent=t,this._eventedParentData=e,this};var zt={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},sources:{required:!0,type:"sources"},sprite:{type:"string"},
glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:"source_vector source_raster source_raster_dem source_geojson source_video source_image".split(" "),source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},
minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},
scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},
encoding:{type:"enum",values:{terrarium:{},mapbox:{}},default:"mapbox"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},
clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",
length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:"layout_fill layout_line layout_circle layout_heatmap layout_fill-extrusion layout_symbol layout_raster layout_hillshade layout_background".split(" "),
layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",
values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",
values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,
parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},
"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,
requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",
requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},
"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,
parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",
length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],
expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",
default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",
default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",
values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},
requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",
{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},
"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],
expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",
default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",
values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"\x3d\x3d":{},"!\x3d":{},"\x3e":{},"\x3e\x3d":{},"\x3c":{},"\x3c\x3d":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",
default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},expression_name:{type:"enum",values:{let:{group:"Variable binding"},var:{group:"Variable binding"},literal:{group:"Types"},array:{group:"Types"},at:{group:"Lookup"},
in:{group:"Lookup"},"index-of":{group:"Lookup"},slice:{group:"Lookup"},case:{group:"Decision"},match:{group:"Decision"},coalesce:{group:"Decision"},step:{group:"Ramps, scales, curves"},interpolate:{group:"Ramps, scales, curves"},"interpolate-hcl":{group:"Ramps, scales, curves"},"interpolate-lab":{group:"Ramps, scales, curves"},ln2:{group:"Math"},pi:{group:"Math"},e:{group:"Math"},typeof:{group:"Types"},string:{group:"Types"},number:{group:"Types"},boolean:{group:"Types"},object:{group:"Types"},collator:{group:"Types"},
format:{group:"Types"},image:{group:"Types"},"number-format":{group:"Types"},"to-string":{group:"Types"},"to-number":{group:"Types"},"to-boolean":{group:"Types"},"to-rgba":{group:"Color"},"to-color":{group:"Types"},rgb:{group:"Color"},rgba:{group:"Color"},get:{group:"Lookup"},has:{group:"Lookup"},length:{group:"Lookup"},properties:{group:"Feature data"},"feature-state":{group:"Feature data"},"geometry-type":{group:"Feature data"},id:{group:"Feature data"},zoom:{group:"Zoom"},"heatmap-density":{group:"Heatmap"},
"line-progress":{group:"Feature data"},accumulated:{group:"Feature data"},"+":{group:"Math"},"*":{group:"Math"},"-":{group:"Math"},"/":{group:"Math"},"%":{group:"Math"},"^":{group:"Math"},sqrt:{group:"Math"},log10:{group:"Math"},ln:{group:"Math"},log2:{group:"Math"},sin:{group:"Math"},cos:{group:"Math"},tan:{group:"Math"},asin:{group:"Math"},acos:{group:"Math"},atan:{group:"Math"},min:{group:"Math"},max:{group:"Math"},round:{group:"Math"},abs:{group:"Math"},ceil:{group:"Math"},floor:{group:"Math"},
distance:{group:"Math"},"\x3d\x3d":{group:"Decision"},"!\x3d":{group:"Decision"},"\x3e":{group:"Decision"},"\x3c":{group:"Decision"},"\x3e\x3d":{group:"Decision"},"\x3c\x3d":{group:"Decision"},all:{group:"Decision"},any:{group:"Decision"},"!":{group:"Decision"},within:{group:"Decision"},"is-supported-script":{group:"String"},upcase:{group:"String"},downcase:{group:"String"},concat:{group:"String"},"resolved-locale":{group:"String"}}},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},
"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,
parameters:["zoom"]},transition:!0}},paint:"paint_fill paint_line paint_circle paint_heatmap paint_fill-extrusion paint_symbol paint_raster paint_hillshade paint_background".split(" "),paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},
"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",
expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,
maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},
"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom",
"feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,
maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},
"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature",
"feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],
expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",
default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",
default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},
"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},
"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom",
"feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",
.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},
"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,
parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",
values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom",
"feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",
default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],
expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,
expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,
parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,
expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,
parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,
parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},
"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}},Ct=function(t,e,r,n){this.message=(t?t+": ":"")+r;n&&(this.identifier=n);null!=e&&e.__line__&&(this.line=e.__line__)},Bt=function(t){function e$jscomp$0(e,r){t.call(this,r);this.message=r;this.key=e}return t&&(e$jscomp$0.__proto__=t),(e$jscomp$0.prototype=Object.create(t&&t.prototype)).constructor=
e$jscomp$0,e$jscomp$0}(Error),Vt=function(t,e){void 0===e&&(e=[]);this.parent=t;this.bindings={};for(t=0;t<e.length;t+=1){var i=e[t];this.bindings[i[0]]=i[1]}};Vt.prototype.concat=function(t){return new Vt(this,t)};Vt.prototype.get=function(t){if(this.bindings[t])return this.bindings[t];if(this.parent)return this.parent.get(t);throw Error(t+" not found in scope.");};Vt.prototype.has=function(t){return!!this.bindings[t]||!!this.parent&&this.parent.has(t)};var Ft={kind:"null"},Dt={kind:"number"},Lt=
{kind:"string"},Rt={kind:"boolean"},Ot={kind:"color"},Ut={kind:"object"},jt={kind:"value"},qt={kind:"collator"},Nt={kind:"formatted"},Kt={kind:"resolvedImage"},Xt=[Ft,Dt,Lt,Rt,Ot,Nt,Ut,Gt(jt),Kt],$t=e$jscomp$4(function(t$jscomp$0,e$jscomp$0){function n(t){return 0>(t=Math.round(t))?0:255<t?255:t}function i(t){return n("%"===t[t.length-1]?parseFloat(t)/100*255:parseInt(t))}function a(t){return 0>(e="%"===t[t.length-1]?parseFloat(t)/100:parseFloat(t))?0:1<e?1:e;var e}function o(t,e,r){return 0>r?r+=
1:1<r&&--r,1>6*r?t+(e-t)*r*6:1>2*r?e:2>3*r?t+(e-t)*(2/3-r)*6:t}var r$jscomp$0={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],
cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,
1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,
255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,
170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,
21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,
1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,
180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};try{e$jscomp$0.parseCSSColor=function(t){var e;t=t.replace(/ /g,"").toLowerCase();if(t in r$jscomp$0)return r$jscomp$0[t].slice();if("#"===t[0])return 4===t.length?0<=(e=parseInt(t.substr(1),16))&&4095>=e?[(3840&e)>>4|(3840&e)>>8,240&e|(240&e)>>
4,15&e|(15&e)<<4,1]:null:7===t.length&&0<=(e=parseInt(t.substr(1),16))&&16777215>=e?[(16711680&e)>>16,(65280&e)>>8,255&e,1]:null;var u=t.indexOf("("),l=t.indexOf(")");if(-1!==u&&l+1===t.length)switch(e=t.substr(0,u),u=t.substr(u+1,l-(u+1)).split(","),t=1,e){case "rgba":if(4!==u.length)break;t=a(u.pop());case "rgb":return 3!==u.length?null:[i(u[0]),i(u[1]),i(u[2]),t];case "hsla":if(4!==u.length)break;t=a(u.pop());case "hsl":if(3===u.length)return e=(parseFloat(u[0])%360+360)%360/360,l=a(u[1]),u=a(u[2]),
l=.5>=u?u*(l+1):u+l-u*l,u=2*u-l,[n(255*o(u,l,e+1/3)),n(255*o(u,l,e)),n(255*o(u,l,e-1/3)),t]}return null}}catch(t$392){}}).parseCSSColor,Wt=function(t,e,r,n){void 0===n&&(n=1);this.r=t;this.g=e;this.b=r;this.a=n};Wt.parse=function(t){if(t){if(t instanceof Wt)return t;if("string"==typeof t&&(t=$t(t)))return new Wt(t[0]/255*t[3],t[1]/255*t[3],t[2]/255*t[3],t[3])}};Wt.prototype.toString=function(){var t=this.toArray();return"rgba("+Math.round(t[0])+","+Math.round(t[1])+","+Math.round(t[2])+","+t[3]+")"};
Wt.prototype.toArray=function(){var t=this.a;return 0===t?[0,0,0,0]:[255*this.r/t,255*this.g/t,255*this.b/t,t]};Wt.black=new Wt(0,0,0,1);Wt.white=new Wt(1,1,1,1);Wt.transparent=new Wt(0,0,0,0);Wt.red=new Wt(1,0,0,1);var Qt=function(t,e,r){this.sensitivity=t?e?"variant":"case":e?"accent":"base";this.locale=r;this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})};Qt.prototype.compare=function(t,e){return this.collator.compare(t,e)};Qt.prototype.resolvedLocale=
function(){return(new Intl.Collator(this.locale?this.locale:[])).resolvedOptions().locale};var te=function(t,e,r,n,i){this.text=t;this.image=e;this.scale=r;this.fontStack=n;this.textColor=i},ee=function(t){this.sections=t};ee.fromString=function(t){return new ee([new te(t,null,null,null,null)])};ee.prototype.isEmpty=function(){return 0===this.sections.length||!this.sections.some(function(t){return 0!==t.text.length||t.image&&0!==t.image.name.length})};ee.factory=function(t){return t instanceof ee?
t:ee.fromString(t)};ee.prototype.toString=function(){return 0===this.sections.length?"":this.sections.map(function(t){return t.text}).join("")};ee.prototype.serialize=function(){for(var t=["format"],e=0,r=this.sections;e<r.length;e+=1){var n=r[e];if(n.image)t.push(["image",n.image.name]);else{t.push(n.text);var i={};n.fontStack&&(i["text-font"]=["literal",n.fontStack.split(",")]);n.scale&&(i["font-scale"]=n.scale);n.textColor&&(i["text-color"]=["rgba"].concat(n.textColor.toArray()));t.push(i)}}return t};
var re=function(t){this.name=t.name;this.available=t.available};re.prototype.toString=function(){return this.name};re.fromString=function(t){return t?new re({name:t,available:!1}):null};re.prototype.serialize=function(){return["image",this.name]};var se=function(t,e){this.type=t;this.value=e};se.parse=function(t,e){if(2!==t.length)return e.error("'literal' expression requires exactly one argument, but found "+(t.length-1)+" instead.");if(!ie(t[1]))return e.error("invalid value");t=t[1];var n=ae(t);
e=e.expectedType;return"array"!==n.kind||0!==n.N||!e||"array"!==e.kind||"number"==typeof e.N&&0!==e.N||(n=e),new se(n,t)};se.prototype.evaluate=function(){return this.value};se.prototype.eachChild=function(){};se.prototype.outputDefined=function(){return!0};se.prototype.serialize=function(){return"array"===this.type.kind||"object"===this.type.kind?["literal",this.value]:this.value instanceof Wt?["rgba"].concat(this.value.toArray()):this.value instanceof ee?this.value.serialize():this.value};var ue=
function(t){this.name="ExpressionEvaluationError";this.message=t};ue.prototype.toJSON=function(){return this.message};var le={string:Lt,number:Dt,boolean:Rt,object:Ut},pe=function(t,e){this.type=t;this.args=e};pe.parse=function(t,e){if(2>t.length)return e.error("Expected at least one argument.");var n=1,i=t[0];if("array"===i){if(2<t.length){i=t[1];if("string"!=typeof i||!(i in le)||"object"===i)return e.error('The item type argument of "array" must be one of string, number, boolean',1);i=le[i];n++}else i=
jt;if(3<t.length){if(null!==t[2]&&("number"!=typeof t[2]||0>t[2]||t[2]!==Math.floor(t[2])))return e.error('The length argument to "array" must be a positive integer literal',2);var r=t[2];n++}r=Gt(i,r)}else r=le[i];for(i=[];n<t.length;n++){var l=e.parse(t[n],n,jt);if(!l)return null;i.push(l)}return new pe(r,i)};pe.prototype.evaluate=function(t){for(var e=0;e<this.args.length;e++){var r=this.args[e].evaluate(t);if(!Jt(this.type,ae(r)))return r;if(e===this.args.length-1)throw new ue("Expected value to be of type "+
Zt(this.type)+", but found "+Zt(ae(r))+" instead.");}return null};pe.prototype.eachChild=function(t){this.args.forEach(t)};pe.prototype.outputDefined=function(){return this.args.every(function(t){return t.outputDefined()})};pe.prototype.serialize=function(){var t$jscomp$0=this.type,e=[t$jscomp$0.kind];if("array"===t$jscomp$0.kind){var r=t$jscomp$0.itemType;if("string"===r.kind||"number"===r.kind||"boolean"===r.kind)e.push(r.kind),t$jscomp$0=t$jscomp$0.N,("number"==typeof t$jscomp$0||1<this.args.length)&&
e.push(t$jscomp$0)}return e.concat(this.args.map(function(t){return t.serialize()}))};var ce=function(t){this.type=Nt;this.sections=t};ce.parse=function(t,e){if(2>t.length)return e.error("Expected at least one argument.");var r=t[1];if(!Array.isArray(r)&&"object"==typeof r)return e.error("First argument must be an image or text section.");r=[];for(var i=!1,a=1;a<=t.length-1;++a){var o=t[a];if(i&&"object"==typeof o&&!Array.isArray(o)){i=!1;var s=null;if(o["font-scale"]&&!(s=e.parse(o["font-scale"],
1,Dt)))return null;var u=null;if(o["text-font"]&&!(u=e.parse(o["text-font"],1,Gt(Lt))))return null;var l=null;if(o["text-color"]&&!(l=e.parse(o["text-color"],1,Ot)))return null;o=r[r.length-1];o.scale=s;o.font=u;o.textColor=l}else{s=e.parse(t[a],1,jt);if(!s)return null;i=s.type.kind;if("string"!==i&&"value"!==i&&"null"!==i&&"resolvedImage"!==i)return e.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");i=!0;r.push({content:s,scale:null,font:null,textColor:null})}}return new ce(r)};
ce.prototype.evaluate=function(t){return new ee(this.sections.map(function(e){var r=e.content.evaluate(t);return ae(r)===Kt?new te("",r,null,null,null):new te(oe(r),null,e.scale?e.scale.evaluate(t):null,e.font?e.font.evaluate(t).join(","):null,e.textColor?e.textColor.evaluate(t):null)}))};ce.prototype.eachChild=function(t){for(var e=0,r=this.sections;e<r.length;e+=1){var n=r[e];t(n.content);n.scale&&t(n.scale);n.font&&t(n.font);n.textColor&&t(n.textColor)}};ce.prototype.outputDefined=function(){return!1};
ce.prototype.serialize=function(){for(var t=["format"],e=0,r=this.sections;e<r.length;e+=1){var n=r[e];t.push(n.content.serialize());var i={};n.scale&&(i["font-scale"]=n.scale.serialize());n.font&&(i["text-font"]=n.font.serialize());n.textColor&&(i["text-color"]=n.textColor.serialize());t.push(i)}return t};var he=function(t){this.type=Kt;this.input=t};he.parse=function(t,e){return 2!==t.length?e.error("Expected two arguments."):(t=e.parse(t[1],1,Lt))?new he(t):e.error("No image name provided.")};
he.prototype.evaluate=function(t){var e=this.input.evaluate(t),r=re.fromString(e);return r&&t.availableImages&&(r.available=-1<t.availableImages.indexOf(e)),r};he.prototype.eachChild=function(t){t(this.input)};he.prototype.outputDefined=function(){return!1};he.prototype.serialize=function(){return["image",this.input.serialize()]};var fe={"to-boolean":Rt,"to-color":Ot,"to-number":Dt,"to-string":Lt},ye=function(t,e){this.type=t;this.args=e};ye.parse=function(t,e){if(2>t.length)return e.error("Expected at least one argument.");
var r=t[0];if(("to-boolean"===r||"to-string"===r)&&2!==t.length)return e.error("Expected one argument.");r=fe[r];for(var i=[],a=1;a<t.length;a++){var o=e.parse(t[a],a,jt);if(!o)return null;i.push(o)}return new ye(r,i)};ye.prototype.evaluate=function(t){if("boolean"===this.type.kind)return!!this.args[0].evaluate(t);if("color"===this.type.kind){for(var e,r,n=0,i=this.args;n<i.length;n+=1){if(r=null,(e=i[n].evaluate(t))instanceof Wt)return e;if("string"==typeof e){var a=t.parseColor(e);if(a)return a}else if(Array.isArray(e)&&
!(r=3>e.length||4<e.length?"Invalid rbga value "+JSON.stringify(e)+": expected an array containing either three or four numeric values.":ne(e[0],e[1],e[2],e[3])))return new Wt(e[0]/255,e[1]/255,e[2]/255,e[3])}throw new ue(r||"Could not parse color from value '"+("string"==typeof e?e:String(JSON.stringify(e)))+"'");}if("number"===this.type.kind){e=null;r=0;for(n=this.args;r<n.length;r+=1){if(null===(e=n[r].evaluate(t)))return 0;i=Number(e);if(!isNaN(i))return i}throw new ue("Could not convert "+JSON.stringify(e)+
" to number.");}return"formatted"===this.type.kind?ee.fromString(oe(this.args[0].evaluate(t))):"resolvedImage"===this.type.kind?re.fromString(oe(this.args[0].evaluate(t))):oe(this.args[0].evaluate(t))};ye.prototype.eachChild=function(t){this.args.forEach(t)};ye.prototype.outputDefined=function(){return this.args.every(function(t){return t.outputDefined()})};ye.prototype.serialize=function(){if("formatted"===this.type.kind)return(new ce([{content:this.args[0],scale:null,font:null,textColor:null}])).serialize();
if("resolvedImage"===this.type.kind)return(new he(this.args[0])).serialize();var t=["to-"+this.type.kind];return this.eachChild(function(e){t.push(e.serialize())}),t};var de=["Unknown","Point","LineString","Polygon"],me=function(){this.formattedSection=this.featureState=this.feature=this.globals=null;this._parseColorCache={};this.canonical=this.availableImages=null};me.prototype.id=function(){return this.feature&&"id"in this.feature?this.feature.id:null};me.prototype.geometryType=function(){return this.feature?
"number"==typeof this.feature.type?de[this.feature.type]:this.feature.type:null};me.prototype.geometry=function(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null};me.prototype.canonicalID=function(){return this.canonical};me.prototype.properties=function(){return this.feature&&this.feature.properties||{}};me.prototype.parseColor=function(t){var e=this._parseColorCache[t];return e||(e=this._parseColorCache[t]=Wt.parse(t)),e};var ve=function(t,e,r,n){this.name=t;this.type=
e;this._evaluate=r;this.args=n};ve.prototype.evaluate=function(t){return this._evaluate(t,this.args)};ve.prototype.eachChild=function(t){this.args.forEach(t)};ve.prototype.outputDefined=function(){return!1};ve.prototype.serialize=function(){return[this.name].concat(this.args.map(function(t){return t.serialize()}))};ve.parse=function(t$jscomp$0,e$jscomp$0){var r,n=t$jscomp$0[0],i=ve.definitions[n];if(!i)return e$jscomp$0.error('Unknown expression "'+n+'". If you wanted a literal array, use ["literal", [...]].',
0);var a=Array.isArray(i)?i[0]:i.type;i=Array.isArray(i)?[[i[1],i[2]]]:i.overloads;for(var s=i.filter(function(e){e=e[0];return!Array.isArray(e)||e.length===t$jscomp$0.length-1}),u=null,l=0;l<s.length;l+=1){u=s[l];var h=u[0],f=u[1];u=new Oe(e$jscomp$0.registry,e$jscomp$0.path,null,e$jscomp$0.scope);for(var y=[],d=!1,m=1;m<t$jscomp$0.length;m++){var v=t$jscomp$0[m],g=Array.isArray(h)?h[m-1]:h.type;v=u.parse(v,1+y.length,g);if(!v){d=!0;break}y.push(v)}if(!d)if(Array.isArray(h)&&h.length!==y.length)u.error("Expected "+
h.length+" arguments, but found "+y.length+" instead.");else{for(d=0;d<y.length;d++)m=Array.isArray(h)?h[d]:h.type,v=y[d],u.concat(d+1).checkSubtype(m,v.type);if(0===u.errors.length)return new ve(n,a,f,y)}}if(1===s.length)(r=e$jscomp$0.errors).push.apply(r,u.errors);else{r=(s.length?s:i).map(function(t){var e;return e=t[0],Array.isArray(e)?"("+e.map(Zt).join(", ")+")":"("+Zt(e.type)+"...)"}).join(" | ");n=[];for(a=1;a<t$jscomp$0.length;a++){i=e$jscomp$0.parse(t$jscomp$0[a],1+n.length);if(!i)return null;
n.push(Zt(i.type))}e$jscomp$0.error("Expected arguments of type "+r+", but found ("+n.join(", ")+") instead.")}return null};ve.register=function(t,e){for(var r in ve.definitions=e,e)t[r]=ve};var ge=function(t,e,r){this.type=qt;this.locale=r;this.caseSensitive=t;this.diacriticSensitive=e};ge.parse=function(t,e){if(2!==t.length)return e.error("Expected one argument.");t=t[1];if("object"!=typeof t||Array.isArray(t))return e.error("Collator options argument must be an object.");var n=e.parse(void 0!==
t["case-sensitive"]&&t["case-sensitive"],1,Rt);if(!n)return null;var i=e.parse(void 0!==t["diacritic-sensitive"]&&t["diacritic-sensitive"],1,Rt);if(!i)return null;var a=null;return t.locale&&!(a=e.parse(t.locale,1,Lt))?null:new ge(n,i,a)};ge.prototype.evaluate=function(t){return new Qt(this.caseSensitive.evaluate(t),this.diacriticSensitive.evaluate(t),this.locale?this.locale.evaluate(t):null)};ge.prototype.eachChild=function(t){t(this.caseSensitive);t(this.diacriticSensitive);this.locale&&t(this.locale)};
ge.prototype.outputDefined=function(){return!1};ge.prototype.serialize=function(){var t={};return t["case-sensitive"]=this.caseSensitive.serialize(),t["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(t.locale=this.locale.serialize()),["collator",t]};var Ve=function(t,e){this.type=Rt;this.geojson=t;this.geometries=e};Ve.parse=function(t,e){if(2!==t.length)return e.error("'within' expression requires exactly one argument, but found "+(t.length-1)+" instead.");if(ie(t[1]))if(t=
t[1],"FeatureCollection"===t.type)for(var n=0;n<t.features.length;++n){var i=t.features[n].geometry.type;if("Polygon"===i||"MultiPolygon"===i)return new Ve(t,t.features[n].geometry)}else if("Feature"===t.type){if(n=t.geometry.type,"Polygon"===n||"MultiPolygon"===n)return new Ve(t,t.geometry)}else if("Polygon"===t.type||"MultiPolygon"===t.type)return new Ve(t,t);return e.error("'within' expression requires valid geojson object that contains polygon geometry type.")};Ve.prototype.evaluate=function(t$jscomp$0){if(null!=
t$jscomp$0.geometry()&&null!=t$jscomp$0.canonicalID()){if("Point"===t$jscomp$0.geometryType())return function(t,e){var r=[1/0,1/0,-1/0,-1/0],n=[1/0,1/0,-1/0,-1/0],i=t.canonicalID();if("Polygon"===e.type){var a=Me(e.coordinates,n,i),o=Pe(t.geometry(),r,n,i);if(!be(r,n))return!1;for(var s=0;s<o.length;s+=1)if(!Ae(o[s],a))return!1}if("MultiPolygon"===e.type){e=Ee(e.coordinates,n,i);t=Pe(t.geometry(),r,n,i);if(!be(r,n))return!1;for(r=0;r<t.length;r+=1){a:{n=t[r];i=e;for(a=0;a<i.length;a++)if(Ae(n,i[a])){n=
!0;break a}n=!1}if(!n)return!1}}return!0}(t$jscomp$0,this.geometries);if("LineString"===t$jscomp$0.geometryType())return function(t,e){var r=[1/0,1/0,-1/0,-1/0],n=[1/0,1/0,-1/0,-1/0],i=t.canonicalID();if("Polygon"===e.type){var a=Me(e.coordinates,n,i),o=Be(t.geometry(),r,n,i);if(!be(r,n))return!1;for(var s=0;s<o.length;s+=1)if(!ze(o[s],a))return!1}if("MultiPolygon"===e.type){e=Ee(e.coordinates,n,i);t=Be(t.geometry(),r,n,i);if(!be(r,n))return!1;for(r=0;r<t.length;r+=1){a:{n=t[r];i=e;for(a=0;a<i.length;a++)if(ze(n,
i[a])){n=!0;break a}n=!1}if(!n)return!1}}return!0}(t$jscomp$0,this.geometries)}return!1};Ve.prototype.eachChild=function(){};Ve.prototype.outputDefined=function(){return!0};Ve.prototype.serialize=function(){return["within",this.geojson]};var Re=function(t,e){this.type=e.type;this.name=t;this.boundExpression=e};Re.parse=function(t,e){if(2!==t.length||"string"!=typeof t[1])return e.error("'var' expression requires exactly one string literal argument.");t=t[1];return e.scope.has(t)?new Re(t,e.scope.get(t)):
e.error('Unknown variable "'+t+'". Make sure "'+t+'" has been bound in an enclosing "let" expression before using it.',1)};Re.prototype.evaluate=function(t){return this.boundExpression.evaluate(t)};Re.prototype.eachChild=function(){};Re.prototype.outputDefined=function(){return!1};Re.prototype.serialize=function(){return["var",this.name]};var Oe=function(t$jscomp$0,e,r,n,i){void 0===e&&(e=[]);void 0===n&&(n=new Vt);void 0===i&&(i=[]);this.registry=t$jscomp$0;this.path=e;this.key=e.map(function(t){return"["+
t+"]"}).join("");this.scope=n;this.errors=i;this.expectedType=r};Oe.prototype.parse=function(t,e,r,n,i){return void 0===i&&(i={}),e?this.concat(e,r,n)._parse(t,i):this._parse(t,i)};Oe.prototype._parse=function(t$jscomp$0,e$jscomp$1){function r$jscomp$0(t,e,r){return"assert"===r?new pe(e,[t]):"coerce"===r?new ye(e,[t]):t}if(null!==t$jscomp$0&&"string"!=typeof t$jscomp$0&&"boolean"!=typeof t$jscomp$0&&"number"!=typeof t$jscomp$0||(t$jscomp$0=["literal",t$jscomp$0]),Array.isArray(t$jscomp$0)){if(0===
t$jscomp$0.length)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');var n$jscomp$0=t$jscomp$0[0];if("string"!=typeof n$jscomp$0)return this.error("Expression name must be a string, but found "+typeof n$jscomp$0+' instead. If you wanted a literal array, use ["literal", [...]].',0),null;var i=this.registry[n$jscomp$0];if(i){t$jscomp$0=i.parse(t$jscomp$0,this);if(!t$jscomp$0)return null;if(this.expectedType)if(n$jscomp$0=this.expectedType,
i=t$jscomp$0.type,"string"!==n$jscomp$0.kind&&"number"!==n$jscomp$0.kind&&"boolean"!==n$jscomp$0.kind&&"object"!==n$jscomp$0.kind&&"array"!==n$jscomp$0.kind||"value"!==i.kind)if("color"!==n$jscomp$0.kind&&"formatted"!==n$jscomp$0.kind&&"resolvedImage"!==n$jscomp$0.kind||"value"!==i.kind&&"string"!==i.kind){if(this.checkSubtype(n$jscomp$0,i))return null}else t$jscomp$0=r$jscomp$0(t$jscomp$0,n$jscomp$0,e$jscomp$1.typeAnnotation||"coerce");else t$jscomp$0=r$jscomp$0(t$jscomp$0,n$jscomp$0,e$jscomp$1.typeAnnotation||
"assert");if(!(t$jscomp$0 instanceof se)&&"resolvedImage"!==t$jscomp$0.type.kind&&function t(e$jscomp$0){if(e$jscomp$0 instanceof Re)return t(e$jscomp$0.boundExpression);if(e$jscomp$0 instanceof ve&&"error"===e$jscomp$0.name||e$jscomp$0 instanceof ge||e$jscomp$0 instanceof Ve)return!1;var r=e$jscomp$0 instanceof ye||e$jscomp$0 instanceof pe,n=!0;return e$jscomp$0.eachChild(function(e){n=r?n&&t(e):n&&e instanceof se}),!!n&&Fe(e$jscomp$0)&&Le(e$jscomp$0,["zoom","heatmap-density","line-progress","accumulated",
"is-supported-script"])}(t$jscomp$0)){e$jscomp$1=new me;try{t$jscomp$0=new se(t$jscomp$0.type,t$jscomp$0.evaluate(e$jscomp$1))}catch(t$393){return this.error(t$393.message),null}}return t$jscomp$0}return this.error('Unknown expression "'+n$jscomp$0+'". If you wanted a literal array, use ["literal", [...]].',0)}return this.error(void 0===t$jscomp$0?"'undefined' value invalid. Use null instead.":"object"==typeof t$jscomp$0?'Bare objects invalid. Use ["literal", {...}] instead.':"Expected an array, but found "+
typeof t$jscomp$0+" instead.")};Oe.prototype.concat=function(t,e,r){t="number"==typeof t?this.path.concat(t):this.path;r=r?this.scope.concat(r):this.scope;return new Oe(this.registry,t,e||null,r,this.errors)};Oe.prototype.error=function(t$jscomp$0){for(var e=[],r=arguments.length-1;0<r--;)e[r]=arguments[r+1];e=""+this.key+e.map(function(t){return"["+t+"]"}).join("");this.errors.push(new Bt(e,t$jscomp$0))};Oe.prototype.checkSubtype=function(t,e){t=Jt(t,e);return t&&this.error(t),t};var je=function(t,
e,r){this.type=t;this.input=e;this.labels=[];this.outputs=[];for(t=0;t<r.length;t+=1){e=r[t];var o=e[1];this.labels.push(e[0]);this.outputs.push(o)}};je.parse=function(t,e){if(4>t.length-1)return e.error("Expected at least 4 arguments, but found only "+(t.length-1)+".");if(0!=(t.length-1)%2)return e.error("Expected an even number of arguments.");var r=e.parse(t[1],1,Dt);if(!r)return null;var n=[],i=null;e.expectedType&&"value"!==e.expectedType.kind&&(i=e.expectedType);for(var a=1;a<t.length;a+=2){var o=
1===a?-1/0:t[a],s=t[a+1],u=a,l=a+1;if("number"!=typeof o)return e.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',u);if(n.length&&n[n.length-1][0]>=o)return e.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',u);s=e.parse(s,l,i);if(!s)return null;i=i||s.type;n.push([o,s])}return new je(i,r,n)};je.prototype.evaluate=function(t){var e=this.labels,
r=this.outputs;if(1===e.length)return r[0].evaluate(t);var n=this.input.evaluate(t);if(n<=e[0])return r[0].evaluate(t);var i=e.length;return n>=e[i-1]?r[i-1].evaluate(t):r[Ue(e,n)].evaluate(t)};je.prototype.eachChild=function(t){t(this.input);for(var e=0,r=this.outputs;e<r.length;e+=1)t(r[e])};je.prototype.outputDefined=function(){return this.outputs.every(function(t){return t.outputDefined()})};je.prototype.serialize=function(){for(var t=["step",this.input.serialize()],e=0;e<this.labels.length;e++)0<
e&&t.push(this.labels[e]),t.push(this.outputs[e].serialize());return t};var Ne=Object.freeze({__proto__:null,number:qe,color:function(t,e,r){return new Wt(qe(t.r,e.r,r),qe(t.g,e.g,r),qe(t.b,e.b,r),qe(t.a,e.a,r))},array:function(t$jscomp$0,e,r){return t$jscomp$0.map(function(t,n){return qe(t,e[n],r)})}}),Ke=6/29*3*(6/29),Ge=Math.PI/180,Ze=180/Math.PI,tr={forward:$e,reverse:We,interpolate:function(t,e,r){return{l:qe(t.l,e.l,r),a:qe(t.a,e.a,r),b:qe(t.b,e.b,r),alpha:qe(t.alpha,e.alpha,r)}}},er={forward:function(t){var e=
$e(t),n=e.a,i=e.b,a=Math.atan2(i,n)*Ze;return{h:0>a?a+360:a,c:Math.sqrt(n*n+i*i),l:e.l,alpha:t.a}},reverse:function(t){var e=t.h*Ge,r=t.c;return We({l:t.l,a:Math.cos(e)*r,b:Math.sin(e)*r,alpha:t.alpha})},interpolate:function(t$jscomp$0,e,r){var t=t$jscomp$0.h,n=e.h-t;return{h:t+r*(180<n||-180>n?n-360*Math.round(n/360):n),c:qe(t$jscomp$0.c,e.c,r),l:qe(t$jscomp$0.l,e.l,r),alpha:qe(t$jscomp$0.alpha,e.alpha,r)}}},rr=Object.freeze({__proto__:null,lab:tr,hcl:er}),nr=function(t,e,r,n,i){this.type=t;this.operator=
e;this.interpolation=r;this.input=n;this.labels=[];this.outputs=[];for(t=0;t<i.length;t+=1)e=i[t],r=e[1],this.labels.push(e[0]),this.outputs.push(r)};nr.interpolationFactor=function(t,e,n,i){var a=0;"exponential"===t.name?a=ir(e,t.base,n,i):"linear"===t.name?a=ir(e,1,n,i):"cubic-bezier"===t.name&&(t=t.controlPoints,a=(new r$jscomp$4(t[0],t[1],t[2],t[3])).solve(ir(e,1,n,i)));return a};nr.parse=function(t$jscomp$0,e){var r=t$jscomp$0[0],n=t$jscomp$0[1],i=t$jscomp$0[2],a=t$jscomp$0.slice(3);if(!Array.isArray(n)||
0===n.length)return e.error("Expected an interpolation type expression.",1);if("linear"===n[0])n={name:"linear"};else if("exponential"===n[0]){n=n[1];if("number"!=typeof n)return e.error("Exponential interpolation requires a numeric base.",1,1);n={name:"exponential",base:n}}else{if("cubic-bezier"!==n[0])return e.error("Unknown interpolation type "+String(n[0]),1,0);n=n.slice(1);if(4!==n.length||n.some(function(t){return"number"!=typeof t||0>t||1<t}))return e.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",
1);n={name:"cubic-bezier",controlPoints:n}}if(4>t$jscomp$0.length-1)return e.error("Expected at least 4 arguments, but found only "+(t$jscomp$0.length-1)+".");if(0!=(t$jscomp$0.length-1)%2)return e.error("Expected an even number of arguments.");if(!(i=e.parse(i,2,Dt)))return null;t$jscomp$0=[];var l=null;"interpolate-hcl"===r||"interpolate-lab"===r?l=Ot:e.expectedType&&"value"!==e.expectedType.kind&&(l=e.expectedType);for(var p=0;p<a.length;p+=2){var c=a[p],h=a[p+1],f=p+3,y=p+4;if("number"!=typeof c)return e.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',
f);if(t$jscomp$0.length&&t$jscomp$0[t$jscomp$0.length-1][0]>=c)return e.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',f);h=e.parse(h,y,l);if(!h)return null;l=l||h.type;t$jscomp$0.push([c,h])}return"number"===l.kind||"color"===l.kind||"array"===l.kind&&"number"===l.itemType.kind&&"number"==typeof l.N?new nr(l,r,n,i,t$jscomp$0):e.error("Type "+Zt(l)+" is not interpolatable.")};nr.prototype.evaluate=function(t){var e=this.labels,
r=this.outputs;if(1===e.length)return r[0].evaluate(t);var n=this.input.evaluate(t);if(n<=e[0])return r[0].evaluate(t);var i=e.length;if(n>=e[i-1])return r[i-1].evaluate(t);i=Ue(e,n);e=nr.interpolationFactor(this.interpolation,n,e[i],e[i+1]);n=r[i].evaluate(t);t=r[i+1].evaluate(t);return"interpolate"===this.operator?Ne[this.type.kind.toLowerCase()](n,t,e):"interpolate-hcl"===this.operator?er.reverse(er.interpolate(er.forward(n),er.forward(t),e)):tr.reverse(tr.interpolate(tr.forward(n),tr.forward(t),
e))};nr.prototype.eachChild=function(t){t(this.input);for(var e=0,r=this.outputs;e<r.length;e+=1)t(r[e])};nr.prototype.outputDefined=function(){return this.outputs.every(function(t){return t.outputDefined()})};nr.prototype.serialize=function(){var t="linear"===this.interpolation.name?["linear"]:"exponential"===this.interpolation.name?1===this.interpolation.base?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints);t=[this.operator,t,this.input.serialize()];
for(var r=0;r<this.labels.length;r++)t.push(this.labels[r],this.outputs[r].serialize());return t};var ar=function(t,e){this.type=t;this.args=e};ar.parse=function(t$jscomp$0,e){if(2>t$jscomp$0.length)return e.error("Expectected at least one argument.");var r=null,n=e.expectedType;n&&"value"!==n.kind&&(r=n);var i=[],a=0;for(t$jscomp$0=t$jscomp$0.slice(1);a<t$jscomp$0.length;a+=1){var s=e.parse(t$jscomp$0[a],1+i.length,r,void 0,{typeAnnotation:"omit"});if(!s)return null;r=r||s.type;i.push(s)}e=n&&i.some(function(t){return Jt(n,
t.type)});return new ar(e?jt:r,i)};ar.prototype.evaluate=function(t){for(var e,r=null,n=0,i=0,a=this.args;i<a.length&&(n++,(r=a[i].evaluate(t))&&r instanceof re&&!r.available&&(e||(e=r.name),r=null,n===this.args.length&&(r=e)),null===r);i+=1);return r};ar.prototype.eachChild=function(t){this.args.forEach(t)};ar.prototype.outputDefined=function(){return this.args.every(function(t){return t.outputDefined()})};ar.prototype.serialize=function(){var t=["coalesce"];return this.eachChild(function(e){t.push(e.serialize())}),
t};var or=function(t,e){this.type=e.type;this.bindings=[].concat(t);this.result=e};or.prototype.evaluate=function(t){return this.result.evaluate(t)};or.prototype.eachChild=function(t){for(var e=0,r=this.bindings;e<r.length;e+=1)t(r[e][1]);t(this.result)};or.parse=function(t,e){if(4>t.length)return e.error("Expected at least 3 arguments, but found "+(t.length-1)+" instead.");for(var r=[],n=1;n<t.length-1;n+=2){var i=t[n];if("string"!=typeof i)return e.error("Expected string, but found "+typeof i+" instead.",
n);if(/[^a-zA-Z0-9_]/.test(i))return e.error("Variable names must contain only alphanumeric characters or '_'.",n);var a=e.parse(t[n+1],n+1);if(!a)return null;r.push([i,a])}return(t=e.parse(t[t.length-1],t.length-1,e.expectedType,r))?new or(r,t):null};or.prototype.outputDefined=function(){return this.result.outputDefined()};or.prototype.serialize=function(){for(var t=["let"],e=0,r=this.bindings;e<r.length;e+=1){var n=r[e];t.push(n[0],n[1].serialize())}return t.push(this.result.serialize()),t};var sr=
function(t,e,r){this.type=t;this.index=e;this.input=r};sr.parse=function(t,e){if(3!==t.length)return e.error("Expected 2 arguments, but found "+(t.length-1)+" instead.");var r=e.parse(t[1],1,Dt);t=e.parse(t[2],2,Gt(e.expectedType||jt));return r&&t?new sr(t.type.itemType,r,t):null};sr.prototype.evaluate=function(t){var e=this.index.evaluate(t);t=this.input.evaluate(t);if(0>e)throw new ue("Array index out of bounds: "+e+" \x3c 0.");if(e>=t.length)throw new ue("Array index out of bounds: "+e+" \x3e "+
(t.length-1)+".");if(e!==Math.floor(e))throw new ue("Array index must be an integer, but found "+e+" instead.");return t[e]};sr.prototype.eachChild=function(t){t(this.index);t(this.input)};sr.prototype.outputDefined=function(){return!1};sr.prototype.serialize=function(){return["at",this.index.serialize(),this.input.serialize()]};var ur=function(t,e){this.type=Rt;this.needle=t;this.haystack=e};ur.parse=function(t,e){if(3!==t.length)return e.error("Expected 2 arguments, but found "+(t.length-1)+" instead.");
var r=e.parse(t[1],1,jt);t=e.parse(t[2],2,jt);return r&&t?Ht(r.type,[Rt,Lt,Dt,Ft,jt])?new ur(r,t):e.error("Expected first argument to be of type boolean, string, number or null, but found "+Zt(r.type)+" instead"):null};ur.prototype.evaluate=function(t){var e=this.needle.evaluate(t);t=this.haystack.evaluate(t);if(!t)return!1;if(!Yt(e,["boolean","string","number","null"]))throw new ue("Expected first argument to be of type boolean, string, number or null, but found "+Zt(ae(e))+" instead.");if(!Yt(t,
["string","array"]))throw new ue("Expected second argument to be of type array or string, but found "+Zt(ae(t))+" instead.");return 0<=t.indexOf(e)};ur.prototype.eachChild=function(t){t(this.needle);t(this.haystack)};ur.prototype.outputDefined=function(){return!0};ur.prototype.serialize=function(){return["in",this.needle.serialize(),this.haystack.serialize()]};var lr=function(t,e,r){this.type=Dt;this.needle=t;this.haystack=e;this.fromIndex=r};lr.parse=function(t,e){if(2>=t.length||5<=t.length)return e.error("Expected 3 or 4 arguments, but found "+
(t.length-1)+" instead.");var r=e.parse(t[1],1,jt),n=e.parse(t[2],2,jt);return r&&n?Ht(r.type,[Rt,Lt,Dt,Ft,jt])?4===t.length?(t=e.parse(t[3],3,Dt))?new lr(r,n,t):null:new lr(r,n):e.error("Expected first argument to be of type boolean, string, number or null, but found "+Zt(r.type)+" instead"):null};lr.prototype.evaluate=function(t){var e=this.needle.evaluate(t),r=this.haystack.evaluate(t);if(!Yt(e,["boolean","string","number","null"]))throw new ue("Expected first argument to be of type boolean, string, number or null, but found "+
Zt(ae(e))+" instead.");if(!Yt(r,["string","array"]))throw new ue("Expected second argument to be of type array or string, but found "+Zt(ae(r))+" instead.");return this.fromIndex?(t=this.fromIndex.evaluate(t),r.indexOf(e,t)):r.indexOf(e)};lr.prototype.eachChild=function(t){t(this.needle);t(this.haystack);this.fromIndex&&t(this.fromIndex)};lr.prototype.outputDefined=function(){return!1};lr.prototype.serialize=function(){if(null!=this.fromIndex&&void 0!==this.fromIndex){var t=this.fromIndex.serialize();
return["index-of",this.needle.serialize(),this.haystack.serialize(),t]}return["index-of",this.needle.serialize(),this.haystack.serialize()]};var pr=function(t,e,r,n,i,a){this.inputType=t;this.type=e;this.input=r;this.cases=n;this.outputs=i;this.otherwise=a};pr.parse=function(t,e){if(5>t.length)return e.error("Expected at least 4 arguments, but found only "+(t.length-1)+".");if(1!=t.length%2)return e.error("Expected an even number of arguments.");var n;e.expectedType&&"value"!==e.expectedType.kind&&
(n=e.expectedType);for(var i={},a=[],o=2;o<t.length-1;o+=2){var s=t[o],u=t[o+1];Array.isArray(s)||(s=[s]);var l=e.concat(o);if(0===s.length)return l.error("Expected at least one branch label.");for(var p=0;p<s.length;p+=1){var h=s[p];if("number"!=typeof h&&"string"!=typeof h)return l.error("Branch labels must be numbers or strings.");if("number"==typeof h&&Math.abs(h)>Number.MAX_SAFE_INTEGER)return l.error("Branch labels must be integers no larger than "+Number.MAX_SAFE_INTEGER+".");if("number"==
typeof h&&Math.floor(h)!==h)return l.error("Numeric branch labels must be integer values.");if(r){if(l.checkSubtype(r,ae(h)))return null}else var r=ae(h);if(void 0!==i[String(h)])return l.error("Branch labels must be unique.");i[String(h)]=a.length}u=e.parse(u,o,n);if(!u)return null;n=n||u.type;a.push(u)}o=e.parse(t[1],1,jt);return o?(t=e.parse(t[t.length-1],t.length-1,n))?"value"!==o.type.kind&&e.concat(1).checkSubtype(r,o.type)?null:new pr(r,n,o,i,a,t):null:null};pr.prototype.evaluate=function(t){var e=
this.input.evaluate(t);return(ae(e)===this.inputType&&this.outputs[this.cases[e]]||this.otherwise).evaluate(t)};pr.prototype.eachChild=function(t){t(this.input);this.outputs.forEach(t);t(this.otherwise)};pr.prototype.outputDefined=function(){return this.outputs.every(function(t){return t.outputDefined()})&&this.otherwise.outputDefined()};pr.prototype.serialize=function(){for(var t=this,e$jscomp$0=["match",this.input.serialize()],r=[],n={},i=0,a=Object.keys(this.cases).sort();i<a.length;i+=1){var o=
a[i];void 0===(c=n[this.cases[o]])?(n[this.cases[o]]=r.length,r.push([this.cases[o],[o]])):r[c][1].push(o)}n=function(e){return"number"===t.inputType.kind?Number(e):e};for(i=0;i<r.length;i+=1){a=r[i];var c=a[0];c=a[1];e$jscomp$0.push(1===c.length?n(c[0]):c.map(n));e$jscomp$0.push(this.outputs[outputIndex$1].serialize())}return e$jscomp$0.push(this.otherwise.serialize()),e$jscomp$0};var cr=function(t,e,r){this.type=t;this.branches=e;this.otherwise=r};cr.parse=function(t,e){if(4>t.length)return e.error("Expected at least 3 arguments, but found only "+
(t.length-1)+".");if(0!=t.length%2)return e.error("Expected an odd number of arguments.");var r;e.expectedType&&"value"!==e.expectedType.kind&&(r=e.expectedType);for(var n=[],i=1;i<t.length-1;i+=2){var a=e.parse(t[i],i,Rt);if(!a)return null;var o=e.parse(t[i+1],i+1,r);if(!o)return null;n.push([a,o]);r=r||o.type}return(t=e.parse(t[t.length-1],t.length-1,r))?new cr(r,n,t):null};cr.prototype.evaluate=function(t){for(var e=0,r=this.branches;e<r.length;e+=1){var n=r[e],i=n[1];if(n[0].evaluate(t))return i.evaluate(t)}return this.otherwise.evaluate(t)};
cr.prototype.eachChild=function(t){for(var e=0,r=this.branches;e<r.length;e+=1){var n=r[e],i=n[1];t(n[0]);t(i)}t(this.otherwise)};cr.prototype.outputDefined=function(){return this.branches.every(function(t){return t[1].outputDefined()})&&this.otherwise.outputDefined()};cr.prototype.serialize=function(){var t=["case"];return this.eachChild(function(e){t.push(e.serialize())}),t};var hr=function(t,e,r,n){this.type=t;this.input=e;this.beginIndex=r;this.endIndex=n};hr.parse=function(t,e){if(2>=t.length||
5<=t.length)return e.error("Expected 3 or 4 arguments, but found "+(t.length-1)+" instead.");var r=e.parse(t[1],1,jt),n=e.parse(t[2],2,Dt);return r&&n?Ht(r.type,[Gt(jt),Lt,jt])?4===t.length?(t=e.parse(t[3],3,Dt))?new hr(r.type,r,n,t):null:new hr(r.type,r,n):e.error("Expected first argument to be of type array or string, but found "+Zt(r.type)+" instead"):null};hr.prototype.evaluate=function(t){var e=this.input.evaluate(t),r=this.beginIndex.evaluate(t);if(!Yt(e,["string","array"]))throw new ue("Expected first argument to be of type array or string, but found "+
Zt(ae(e))+" instead.");return this.endIndex?(t=this.endIndex.evaluate(t),e.slice(r,t)):e.slice(r)};hr.prototype.eachChild=function(t){t(this.input);t(this.beginIndex);this.endIndex&&t(this.endIndex)};hr.prototype.outputDefined=function(){return!1};hr.prototype.serialize=function(){if(null!=this.endIndex&&void 0!==this.endIndex){var t=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),t]}return["slice",this.input.serialize(),this.beginIndex.serialize()]};var mr=
dr("\x3d\x3d",function(t,e,r){return e===r},yr),vr=dr("!\x3d",function(t,e,r){return e!==r},function(t,e,r,n){return!yr(0,e,r,n)}),gr=dr("\x3c",function(t,e,r){return e<r},function(t,e,r,n){return 0>n.compare(e,r)}),xr=dr("\x3e",function(t,e,r){return e>r},function(t,e,r,n){return 0<n.compare(e,r)}),br=dr("\x3c\x3d",function(t,e,r){return e<=r},function(t,e,r,n){return 0>=n.compare(e,r)}),wr=dr("\x3e\x3d",function(t,e,r){return e>=r},function(t,e,r,n){return 0<=n.compare(e,r)}),_r=function(t,e,r,
n,i){this.type=Lt;this.number=t;this.locale=e;this.currency=r;this.minFractionDigits=n;this.maxFractionDigits=i};_r.parse=function(t,e){if(3!==t.length)return e.error("Expected two arguments.");var r=e.parse(t[1],1,Dt);if(!r)return null;t=t[2];if("object"!=typeof t||Array.isArray(t))return e.error("NumberFormat options argument must be an object.");var i=null;if(t.locale&&!(i=e.parse(t.locale,1,Lt)))return null;var a=null;if(t.currency&&!(a=e.parse(t.currency,1,Lt)))return null;var o=null;if(t["min-fraction-digits"]&&
!(o=e.parse(t["min-fraction-digits"],1,Dt)))return null;var s=null;return t["max-fraction-digits"]&&!(s=e.parse(t["max-fraction-digits"],1,Dt))?null:new _r(r,i,a,o,s)};_r.prototype.evaluate=function(t){return(new Intl.NumberFormat(this.locale?this.locale.evaluate(t):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(t):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(t):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(t):
void 0})).format(this.number.evaluate(t))};_r.prototype.eachChild=function(t){t(this.number);this.locale&&t(this.locale);this.currency&&t(this.currency);this.minFractionDigits&&t(this.minFractionDigits);this.maxFractionDigits&&t(this.maxFractionDigits)};_r.prototype.outputDefined=function(){return!1};_r.prototype.serialize=function(){var t={};return this.locale&&(t.locale=this.locale.serialize()),this.currency&&(t.currency=this.currency.serialize()),this.minFractionDigits&&(t["min-fraction-digits"]=
this.minFractionDigits.serialize()),this.maxFractionDigits&&(t["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),t]};var Ar=function(t){this.type=Dt;this.input=t};Ar.parse=function(t,e){return 2!==t.length?e.error("Expected 1 argument, but found "+(t.length-1)+" instead."):(t=e.parse(t[1],1))?"array"!==t.type.kind&&"string"!==t.type.kind&&"value"!==t.type.kind?e.error("Expected argument of type string or array, but found "+Zt(t.type)+" instead."):
new Ar(t):null};Ar.prototype.evaluate=function(t){t=this.input.evaluate(t);if("string"==typeof t||Array.isArray(t))return t.length;throw new ue("Expected value to be of type string or array, but found "+Zt(ae(t))+" instead.");};Ar.prototype.eachChild=function(t){t(this.input)};Ar.prototype.outputDefined=function(){return!1};Ar.prototype.serialize=function(){var t=["length"];return this.eachChild(function(e){t.push(e.serialize())}),t};var Sr={"\x3d\x3d":mr,"!\x3d":vr,"\x3e":xr,"\x3c":gr,"\x3e\x3d":wr,
"\x3c\x3d":br,array:pe,at:sr,boolean:pe,case:cr,coalesce:ar,collator:ge,format:ce,image:he,in:ur,"index-of":lr,interpolate:nr,"interpolate-hcl":nr,"interpolate-lab":nr,length:Ar,let:or,literal:se,match:pr,number:pe,"number-format":_r,object:pe,slice:hr,step:je,string:pe,"to-boolean":ye,"to-color":ye,"to-number":ye,"to-string":ye,var:Re,within:Ve};ve.register(Sr,{error:[{kind:"error"},[Lt],function(t,e){throw new ue(e[0].evaluate(t));}],typeof:[Lt,[jt],function(t,e){return Zt(ae(e[0].evaluate(t)))}],
"to-rgba":[Gt(Dt,4),[Ot],function(t,e){return e[0].evaluate(t).toArray()}],rgb:[Ot,[Dt,Dt,Dt],kr],rgba:[Ot,[Dt,Dt,Dt,Dt],kr],has:{type:Rt,overloads:[[[Lt],function(t,e){e=e[0].evaluate(t);t=t.properties();return e in t}],[[Lt,Ut],function(t,e){var r=e[1];e=e[0].evaluate(t);t=r.evaluate(t);return e in t}]]},get:{type:jt,overloads:[[[Lt],function(t,e){return zr(e[0].evaluate(t),t.properties())}],[[Lt,Ut],function(t,e){var r=e[1];return zr(e[0].evaluate(t),r.evaluate(t))}]]},"feature-state":[jt,[Lt],
function(t,e){return zr(e[0].evaluate(t),t.featureState||{})}],properties:[Ut,[],function(t){return t.properties()}],"geometry-type":[Lt,[],function(t){return t.geometryType()}],id:[jt,[],function(t){return t.id()}],zoom:[Dt,[],function(t){return t.globals.zoom}],"heatmap-density":[Dt,[],function(t){return t.globals.heatmapDensity||0}],"line-progress":[Dt,[],function(t){return t.globals.lineProgress||0}],accumulated:[jt,[],function(t){return void 0===t.globals.accumulated?null:t.globals.accumulated}],
"+":[Dt,{type:Dt},function(t,e){for(var r=0,n=0;n<e.length;n+=1)r+=e[n].evaluate(t);return r}],"*":[Dt,{type:Dt},function(t,e){for(var r=1,n=0;n<e.length;n+=1)r*=e[n].evaluate(t);return r}],"-":{type:Dt,overloads:[[[Dt,Dt],function(t,e){var r=e[1];return e[0].evaluate(t)-r.evaluate(t)}],[[Dt],function(t,e){return-e[0].evaluate(t)}]]},"/":[Dt,[Dt,Dt],function(t,e){var r=e[1];return e[0].evaluate(t)/r.evaluate(t)}],"%":[Dt,[Dt,Dt],function(t,e){var r=e[1];return e[0].evaluate(t)%r.evaluate(t)}],ln2:[Dt,
[],function(){return Math.LN2}],pi:[Dt,[],function(){return Math.PI}],e:[Dt,[],function(){return Math.E}],"^":[Dt,[Dt,Dt],function(t,e){var r=e[1];return Math.pow(e[0].evaluate(t),r.evaluate(t))}],sqrt:[Dt,[Dt],function(t,e){return Math.sqrt(e[0].evaluate(t))}],log10:[Dt,[Dt],function(t,e){return Math.log(e[0].evaluate(t))/Math.LN10}],ln:[Dt,[Dt],function(t,e){return Math.log(e[0].evaluate(t))}],log2:[Dt,[Dt],function(t,e){return Math.log(e[0].evaluate(t))/Math.LN2}],sin:[Dt,[Dt],function(t,e){return Math.sin(e[0].evaluate(t))}],
cos:[Dt,[Dt],function(t,e){return Math.cos(e[0].evaluate(t))}],tan:[Dt,[Dt],function(t,e){return Math.tan(e[0].evaluate(t))}],asin:[Dt,[Dt],function(t,e){return Math.asin(e[0].evaluate(t))}],acos:[Dt,[Dt],function(t,e){return Math.acos(e[0].evaluate(t))}],atan:[Dt,[Dt],function(t,e){return Math.atan(e[0].evaluate(t))}],min:[Dt,{type:Dt},function(t,e$jscomp$0){return Math.min.apply(Math,e$jscomp$0.map(function(e){return e.evaluate(t)}))}],max:[Dt,{type:Dt},function(t,e$jscomp$0){return Math.max.apply(Math,
e$jscomp$0.map(function(e){return e.evaluate(t)}))}],abs:[Dt,[Dt],function(t,e){return Math.abs(e[0].evaluate(t))}],round:[Dt,[Dt],function(t,e){t=e[0].evaluate(t);return 0>t?-Math.round(-t):Math.round(t)}],floor:[Dt,[Dt],function(t,e){return Math.floor(e[0].evaluate(t))}],ceil:[Dt,[Dt],function(t,e){return Math.ceil(e[0].evaluate(t))}],"filter-\x3d\x3d":[Rt,[Lt,jt],function(t,e){var r=e[0];e=e[1];return t.properties()[r.value]===e.value}],"filter-id-\x3d\x3d":[Rt,[jt],function(t,e){e=e[0];return t.id()===
e.value}],"filter-type-\x3d\x3d":[Rt,[Lt],function(t,e){e=e[0];return t.geometryType()===e.value}],"filter-\x3c":[Rt,[Lt,jt],function(t,e){var r=e[0];e=e[1];t=t.properties()[r.value];r=e.value;return typeof t==typeof r&&t<r}],"filter-id-\x3c":[Rt,[jt],function(t,e){e=e[0];t=t.id();e=e.value;return typeof t==typeof e&&t<e}],"filter-\x3e":[Rt,[Lt,jt],function(t,e){var r=e[0];e=e[1];t=t.properties()[r.value];r=e.value;return typeof t==typeof r&&t>r}],"filter-id-\x3e":[Rt,[jt],function(t,e){e=e[0];t=
t.id();e=e.value;return typeof t==typeof e&&t>e}],"filter-\x3c\x3d":[Rt,[Lt,jt],function(t,e){var r=e[0];e=e[1];t=t.properties()[r.value];r=e.value;return typeof t==typeof r&&t<=r}],"filter-id-\x3c\x3d":[Rt,[jt],function(t,e){e=e[0];t=t.id();e=e.value;return typeof t==typeof e&&t<=e}],"filter-\x3e\x3d":[Rt,[Lt,jt],function(t,e){var r=e[0];e=e[1];t=t.properties()[r.value];r=e.value;return typeof t==typeof r&&t>=r}],"filter-id-\x3e\x3d":[Rt,[jt],function(t,e){e=e[0];t=t.id();e=e.value;return typeof t==
typeof e&&t>=e}],"filter-has":[Rt,[jt],function(t,e){return e[0].value in t.properties()}],"filter-has-id":[Rt,[],function(t){return null!==t.id()&&void 0!==t.id()}],"filter-type-in":[Rt,[Gt(Lt)],function(t,e){return 0<=e[0].value.indexOf(t.geometryType())}],"filter-id-in":[Rt,[Gt(jt)],function(t,e){return 0<=e[0].value.indexOf(t.id())}],"filter-in-small":[Rt,[Lt,Gt(jt)],function(t,e){var r=e[0];return 0<=e[1].value.indexOf(t.properties()[r.value])}],"filter-in-large":[Rt,[Lt,Gt(jt)],function(t,e){var r=
e[0];e=e[1];a:{t=t.properties()[r.value];r=e.value;var r$jscomp$0=0;for(e=e.value.length-1;r$jscomp$0<=e;){var i=r$jscomp$0+e>>1;if(r[i]===t){e=!0;break a}r[i]>t?e=i-1:r$jscomp$0=i+1}e=!1}return e}],all:{type:Rt,overloads:[[[Rt,Rt],function(t,e){var r=e[1];return e[0].evaluate(t)&&r.evaluate(t)}],[{type:Rt},function(t,e){for(var r=0;r<e.length;r+=1)if(!e[r].evaluate(t))return!1;return!0}]]},any:{type:Rt,overloads:[[[Rt,Rt],function(t,e){var r=e[1];return e[0].evaluate(t)||r.evaluate(t)}],[{type:Rt},
function(t,e){for(var r=0;r<e.length;r+=1)if(e[r].evaluate(t))return!0;return!1}]]},"!":[Rt,[Rt],function(t,e){return!e[0].evaluate(t)}],"is-supported-script":[Rt,[Lt],function(t,e){var r=t.globals&&t.globals.isSupportedScript;return!r||r(e[0].evaluate(t))}],upcase:[Lt,[Lt],function(t,e){return e[0].evaluate(t).toUpperCase()}],downcase:[Lt,[Lt],function(t,e){return e[0].evaluate(t).toLowerCase()}],concat:[Lt,{type:jt},function(t,e$jscomp$0){return e$jscomp$0.map(function(e){return oe(e.evaluate(t))}).join("")}],
"resolved-locale":[Lt,[qt],function(t,e){return e[0].evaluate(t).resolvedLocale()}]});var qr=function(t,e){this.expression=t;this._warningHistory={};this._evaluator=new me;this._defaultValue=e?"color"===e.type&&Fr(e.default)?new Wt(0,0,0,0):"color"===e.type?Wt.parse(e.default)||null:void 0===e.default?null:e.default:null;this._enumValues=e&&"enum"===e.type?e.values:null};qr.prototype.evaluateWithoutErrorHandling=function(t,e,r,n,i,a){return this._evaluator.globals=t,this._evaluator.feature=e,this._evaluator.featureState=
r,this._evaluator.canonical=n,this._evaluator.availableImages=i||null,this._evaluator.formattedSection=a,this.expression.evaluate(this._evaluator)};qr.prototype.evaluate=function(t$jscomp$0,e,r,n,i,a){this._evaluator.globals=t$jscomp$0;this._evaluator.feature=e||null;this._evaluator.featureState=r||null;this._evaluator.canonical=n;this._evaluator.availableImages=i||null;this._evaluator.formattedSection=a||null;try{var o=this.expression.evaluate(this._evaluator);if(null==o||"number"==typeof o&&o!=
o)return this._defaultValue;if(this._enumValues&&!(o in this._enumValues))throw new ue("Expected value to be one of "+Object.keys(this._enumValues).map(function(t){return JSON.stringify(t)}).join(", ")+", but found "+JSON.stringify(o)+" instead.");return o}catch(t$394){return this._warningHistory[t$394.message]||(this._warningHistory[t$394.message]=!0,"undefined"!=typeof console&&console.warn(t$394.message)),this._defaultValue}};var Gr=function(t,e){this.kind=t;this._styleExpression=e;this.isStateDependent=
"constant"!==t&&!De(e.expression)};Gr.prototype.evaluateWithoutErrorHandling=function(t,e,r,n,i,a){return this._styleExpression.evaluateWithoutErrorHandling(t,e,r,n,i,a)};Gr.prototype.evaluate=function(t,e,r,n,i,a){return this._styleExpression.evaluate(t,e,r,n,i,a)};var Zr=function(t,e,r,n){this.kind=t;this.zoomStops=r;this._styleExpression=e;this.isStateDependent="camera"!==t&&!De(e.expression);this.interpolationType=n};Zr.prototype.evaluateWithoutErrorHandling=function(t,e,r,n,i,a){return this._styleExpression.evaluateWithoutErrorHandling(t,
e,r,n,i,a)};Zr.prototype.evaluate=function(t,e,r,n,i,a){return this._styleExpression.evaluate(t,e,r,n,i,a)};Zr.prototype.interpolationFactor=function(t,e,r){return this.interpolationType?nr.interpolationFactor(this.interpolationType,t,e,r):0};var Jr=function(t$jscomp$1,e$jscomp$0){this._parameters=t$jscomp$1;this._specification=e$jscomp$0;Et(this,function t$jscomp$0(e,r){var o$jscomp$0="color"===r.type,s=e.stops&&"object"==typeof e.stops[0][0],u=s||!(s||void 0!==e.property),l=e.type||(Br(r)?"exponential":
"interval");if(o$jscomp$0&&((e=Et({},e)).stops&&(e.stops=e.stops.map(function(t){return[t[0],Wt.parse(t[1])]})),e.default=Wt.parse(e.default?e.default:r.default)),e.colorSpace&&"rgb"!==e.colorSpace&&!rr[e.colorSpace])throw Error("Unknown color space: "+e.colorSpace);if("exponential"===l)var n$jscomp$0=Ur;else if("interval"===l)n$jscomp$0=Or;else if("categorical"===l){n$jscomp$0=Rr;var i=Object.create(null);o$jscomp$0=0;for(var c=e.stops;o$jscomp$0<c.length;o$jscomp$0+=1){var h=c[o$jscomp$0];i[h[0]]=
h[1]}var a=typeof e.stops[0][0]}else{if("identity"!==l)throw Error('Unknown function type "'+l+'"');n$jscomp$0=jr}if(s){s={};u=[];for(l=0;l<e.stops.length;l++)o$jscomp$0=e.stops[l],c=o$jscomp$0[0].zoom,void 0===s[c]&&(s[c]={zoom:c,type:e.type,property:e.property,default:e.default,stops:[]},u.push(c)),s[c].stops.push([o$jscomp$0[0].value,o$jscomp$0[1]]);var g=[];for(l=0;l<u.length;l+=1)o$jscomp$0=u[l],g.push([s[o$jscomp$0].zoom,t$jscomp$0(s[o$jscomp$0],r)]);s={name:"linear"};return{kind:"composite",
interpolationType:s,interpolationFactor:nr.interpolationFactor.bind(void 0,s),zoomStops:g.map(function(t){return t[0]}),evaluate:function(t,n){t=t.zoom;return Ur({stops:g,base:e.base},r,t).evaluate(t,n)}}}return u?(s="exponential"===l?{name:"exponential",base:void 0!==e.base?e.base:1}:null,{kind:"camera",interpolationType:s,interpolationFactor:nr.interpolationFactor.bind(void 0,s),zoomStops:e.stops.map(function(t){return t[0]}),evaluate:function(t){return n$jscomp$0(e,r,t.zoom,i,a)}}):{kind:"source",
evaluate:function(t,o){t=o&&o.properties?o.properties[e.property]:void 0;return void 0===t?Lr(e.default,r.default):n$jscomp$0(e,r,t,i,a)}}}(this._parameters,this._specification))};Jr.deserialize=function(t){return new Jr(t._parameters,t._specification)};Jr.serialize=function(t){return{_parameters:t._parameters,_specification:t._specification}};var rn={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}},vn={promoteId:function(t){var e=
t.key;t=t.value;if("string"===Vr(t))return mn({key:e,value:t});var n=[],i;for(i in t)n.push.apply(n,mn({key:e+"."+i,value:t[i]}));return n}},bn={"*":function(){return[]},array:Yr,boolean:function(t){var e=t.value;t=t.key;var n=Vr(e);return"boolean"!==n?[new Ct(t,e,"boolean expected, "+n+" found")]:[]},number:$r,color:function(t){var e=t.key;t=t.value;var n=Vr(t);return"string"!==n?[new Ct(e,t,"color expected, "+n+" found")]:null===$t(t)?[new Ct(e,t,'color expected, "'+t+'" found')]:[]},constants:Mt,
enum:tn,filter:cn,function:Wr,layer:dn,object:Hr,source:gn,light:xn,string:mn,formatted:function(t){return 0===mn(t).length?[]:Qr(t)},resolvedImage:function(t){return 0===mn(t).length?[]:Qr(t)}};An.source=kn(gn);An.light=kn(xn);An.layer=kn(dn);An.filter=kn(cn);An.paintProperty=kn(fn);An.layoutProperty=kn(yn);var zn=An.light,Cn=An.paintProperty,Mn=An.layoutProperty;Pn.prototype.insert=function(t,e,r,n,i){this._forEachCell(e,r,n,i,this._insertCell,this.uid++);this.keys.push(t);this.bboxes.push(e);this.bboxes.push(r);
this.bboxes.push(n);this.bboxes.push(i)};Pn.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer.";};Pn.prototype._insertCell=function(t,e,r,n,i,a){this.cells[i].push(a)};Pn.prototype.query=function(t,e,r,n,i){var a=this.min,o=this.max;if(t<=a&&e<=a&&o<=r&&o<=n&&!i)return Array.prototype.slice.call(this.keys);a=[];return this._forEachCell(t,e,r,n,this._queryCell,a,{},i),a};Pn.prototype._queryCell=function(t,e,r,n,i,a,o,s){i=this.cells[i];if(null!==
i)for(var l=this.keys,p=this.bboxes,c=0;c<i.length;c++){var h=i[c];if(void 0===o[h]){var f=4*h;(s?s(p[f+0],p[f+1],p[f+2],p[f+3]):t<=p[f+2]&&e<=p[f+3]&&r>=p[f+0]&&n>=p[f+1])?(o[h]=!0,a.push(l[h])):o[h]=!1}}};Pn.prototype._forEachCell=function(t,e,r,n,i,a,o,s){for(var u=this._convertToCellCoord(t),l=this._convertToCellCoord(e),p=this._convertToCellCoord(r),c=this._convertToCellCoord(n);u<=p;u++)for(var f=l;f<=c;f++){var y=this.d*f+u;if((!s||s(this._convertFromCellCoord(u),this._convertFromCellCoord(f),
this._convertFromCellCoord(u+1),this._convertFromCellCoord(f+1)))&&i.call(this,t,e,r,n,y,a,o,s))return}};Pn.prototype._convertFromCellCoord=function(t){return(t-this.padding)/this.scale};Pn.prototype._convertToCellCoord=function(t){return Math.max(0,Math.min(this.d-1,Math.floor(t*this.scale)+this.padding))};Pn.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var t=this.cells,e=3+this.cells.length+1+1,r=0,n=0;n<this.cells.length;n++)r+=this.cells[n].length;r=new Int32Array(e+
r+this.keys.length+this.bboxes.length);r[0]=this.extent;r[1]=this.n;r[2]=this.padding;for(n=0;n<t.length;n++){var s=t[n];r[3+n]=e;r.set(s,e);e+=s.length}return r[3+t.length]=e,r.set(this.keys,e),r[3+t.length+1]=e+=this.keys.length,r.set(this.bboxes,e),r.buffer};var Bn=o$jscomp$2.ImageData,Vn=o$jscomp$2.ImageBitmap,Fn={},Ln;for(Ln in Dn("Object",Object),Pn.serialize=function(t,e){t=t.toArrayBuffer();return e&&e.push(t),{buffer:t}},Pn.deserialize=function(t){return new Pn(t.buffer)},Dn("Grid",Pn),Dn("Color",
Wt),Dn("Error",Error),Dn("ResolvedImage",re),Dn("StylePropertyFunction",Jr),Dn("StyleExpression",qr,{omit:["_evaluator"]}),Dn("ZoomDependentExpression",Zr),Dn("ZoomConstantExpression",Gr),Dn("CompoundExpression",ve,{omit:["_evaluate"]}),Sr)Sr[Ln]._classRegistryKey||Dn("Expression_"+Ln,Sr[Ln]);var qn=function(){this.first=!0};qn.prototype.update=function(t,e){var r=Math.floor(t);return this.first?(this.first=!1,this.lastIntegerZoom=r,this.lastIntegerZoomTime=0,this.lastZoom=t,this.lastFloorZoom=r,
!0):(this.lastFloorZoom>r?(this.lastIntegerZoom=r+1,this.lastIntegerZoomTime=e):this.lastFloorZoom<r&&(this.lastIntegerZoom=r,this.lastIntegerZoomTime=e),t!==this.lastZoom&&(this.lastZoom=t,this.lastFloorZoom=r,!0))};var Nn={"Latin-1 Supplement":function(t){return 128<=t&&255>=t},Arabic:function(t){return 1536<=t&&1791>=t},"Arabic Supplement":function(t){return 1872<=t&&1919>=t},"Arabic Extended-A":function(t){return 2208<=t&&2303>=t},"Hangul Jamo":function(t){return 4352<=t&&4607>=t},"Unified Canadian Aboriginal Syllabics":function(t){return 5120<=
t&&5759>=t},Khmer:function(t){return 6016<=t&&6143>=t},"Unified Canadian Aboriginal Syllabics Extended":function(t){return 6320<=t&&6399>=t},"General Punctuation":function(t){return 8192<=t&&8303>=t},"Letterlike Symbols":function(t){return 8448<=t&&8527>=t},"Number Forms":function(t){return 8528<=t&&8591>=t},"Miscellaneous Technical":function(t){return 8960<=t&&9215>=t},"Control Pictures":function(t){return 9216<=t&&9279>=t},"Optical Character Recognition":function(t){return 9280<=t&&9311>=t},"Enclosed Alphanumerics":function(t){return 9312<=
t&&9471>=t},"Geometric Shapes":function(t){return 9632<=t&&9727>=t},"Miscellaneous Symbols":function(t){return 9728<=t&&9983>=t},"Miscellaneous Symbols and Arrows":function(t){return 11008<=t&&11263>=t},"CJK Radicals Supplement":function(t){return 11904<=t&&12031>=t},"Kangxi Radicals":function(t){return 12032<=t&&12255>=t},"Ideographic Description Characters":function(t){return 12272<=t&&12287>=t},"CJK Symbols and Punctuation":function(t){return 12288<=t&&12351>=t},Hiragana:function(t){return 12352<=
t&&12447>=t},Katakana:function(t){return 12448<=t&&12543>=t},Bopomofo:function(t){return 12544<=t&&12591>=t},"Hangul Compatibility Jamo":function(t){return 12592<=t&&12687>=t},Kanbun:function(t){return 12688<=t&&12703>=t},"Bopomofo Extended":function(t){return 12704<=t&&12735>=t},"CJK Strokes":function(t){return 12736<=t&&12783>=t},"Katakana Phonetic Extensions":function(t){return 12784<=t&&12799>=t},"Enclosed CJK Letters and Months":function(t){return 12800<=t&&13055>=t},"CJK Compatibility":function(t){return 13056<=
t&&13311>=t},"CJK Unified Ideographs Extension A":function(t){return 13312<=t&&19903>=t},"Yijing Hexagram Symbols":function(t){return 19904<=t&&19967>=t},"CJK Unified Ideographs":function(t){return 19968<=t&&40959>=t},"Yi Syllables":function(t){return 40960<=t&&42127>=t},"Yi Radicals":function(t){return 42128<=t&&42191>=t},"Hangul Jamo Extended-A":function(t){return 43360<=t&&43391>=t},"Hangul Syllables":function(t){return 44032<=t&&55215>=t},"Hangul Jamo Extended-B":function(t){return 55216<=t&&
55295>=t},"Private Use Area":function(t){return 57344<=t&&63743>=t},"CJK Compatibility Ideographs":function(t){return 63744<=t&&64255>=t},"Arabic Presentation Forms-A":function(t){return 64336<=t&&65023>=t},"Vertical Forms":function(t){return 65040<=t&&65055>=t},"CJK Compatibility Forms":function(t){return 65072<=t&&65103>=t},"Small Form Variants":function(t){return 65104<=t&&65135>=t},"Arabic Presentation Forms-B":function(t){return 65136<=t&&65279>=t},"Halfwidth and Fullwidth Forms":function(t){return 65280<=
t&&65519>=t}},Yn=null,$n="unavailable",Wn=null,Qn=function(t){t&&"string"==typeof t&&-1<t.indexOf("NetworkError")&&($n="error");Yn&&Yn(t)},ei=new It,ni=function(){if("deferred"!==$n||!Wn)throw Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");$n="loading";ti();Wn&&xt({url:Wn},function(t){t?Qn(t):($n="loaded",ti())})},ii={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:function(){return"loaded"===$n||null!=ii.applyArabicShaping},
isLoading:function(){return"loading"===$n},setState:function(t){$n=t.pluginStatus;Wn=t.pluginURL},isParsed:function(){return null!=ii.applyArabicShaping&&null!=ii.processBidirectionalText&&null!=ii.processStyledBidirectionalText},getPluginURL:function(){return Wn}},ai=function(t,e){this.zoom=t;e?(this.now=e.now,this.fadeDuration=e.fadeDuration,this.zoomHistory=e.zoomHistory,this.transition=e.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new qn,this.transition={})};ai.prototype.isSupportedScript=
function(t$jscomp$0){a:{for(var e=ii.isLoaded(),r=0;r<t$jscomp$0.length;r+=1){var t=t$jscomp$0[r].charCodeAt(0);if(!e&&Xn(t)||2304<=t&&3583>=t||3840<=t&&4255>=t||Nn.Khmer(t)){t$jscomp$0=!1;break a}}t$jscomp$0=!0}return t$jscomp$0};ai.prototype.crossFadingFactor=function(){return 0===this.fadeDuration?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)};ai.prototype.getCrossfadeParameters=function(){var t=this.zoom,e=t-Math.floor(t),r=this.crossFadingFactor();return t>this.zoomHistory.lastIntegerZoom?
{fromScale:2,toScale:1,t:e+(1-e)*r}:{fromScale:.5,toScale:1,t:1-(1-r)*e}};var oi=function(t$jscomp$1,e$jscomp$0){this.property=t$jscomp$1;this.value=e$jscomp$0;this.expression=function(t$jscomp$0,e){if(Fr(t$jscomp$0))return new Jr(t$jscomp$0,e);if(Nr(t$jscomp$0)){t$jscomp$0=Xr(t$jscomp$0,e);if("error"===t$jscomp$0.result)throw Error(t$jscomp$0.value.map(function(t){return t.key+": "+t.message}).join(", "));return t$jscomp$0.value}var n=t$jscomp$0;return"string"==typeof t$jscomp$0&&"color"===e.type&&
(n=Wt.parse(t$jscomp$0)),{kind:"constant",evaluate:function(){return n}}}(void 0===e$jscomp$0?t$jscomp$1.specification.default:e$jscomp$0,t$jscomp$1.specification)};oi.prototype.isDataDriven=function(){return"source"===this.expression.kind||"composite"===this.expression.kind};oi.prototype.possiblyEvaluate=function(t,e,r){return this.property.possiblyEvaluate(this,t,e,r)};var si=function(t){this.property=t;this.value=new oi(t,void 0)};si.prototype.transitioned=function(t,e){return new li(this.property,
this.value,e,c$jscomp$4({},t.transition,this.transition),t.now)};si.prototype.untransitioned=function(){return new li(this.property,this.value,null,{},0)};var ui=function(t){this._properties=t;this._values=Object.create(t.defaultTransitionablePropertyValues)};ui.prototype.getValue=function(t){return b$jscomp$2(this._values[t].value.value)};ui.prototype.setValue=function(t,e){this._values.hasOwnProperty(t)||(this._values[t]=new si(this._values[t].property));this._values[t].value=new oi(this._values[t].property,
null===e?void 0:b$jscomp$2(e))};ui.prototype.getTransition=function(t){return b$jscomp$2(this._values[t].transition)};ui.prototype.setTransition=function(t,e){this._values.hasOwnProperty(t)||(this._values[t]=new si(this._values[t].property));this._values[t].transition=b$jscomp$2(e)||void 0};ui.prototype.serialize=function(){for(var t={},e=0,r=Object.keys(this._values);e<r.length;e+=1){var n=r[e],i=this.getValue(n);void 0!==i&&(t[n]=i);i=this.getTransition(n);void 0!==i&&(t[n+"-transition"]=i)}return t};
ui.prototype.transitioned=function(t,e){for(var r=new pi(this._properties),n=0,i=Object.keys(this._values);n<i.length;n+=1){var a=i[n];r._values[a]=this._values[a].transitioned(t,e._values[a])}return r};ui.prototype.untransitioned=function(){for(var t=new pi(this._properties),e=0,r=Object.keys(this._values);e<r.length;e+=1){var n=r[e];t._values[n]=this._values[n].untransitioned()}return t};var li=function(t,e,r,n,i){this.property=t;this.value=e;this.begin=i+n.delay||0;this.end=this.begin+n.duration||
0;t.specification.transition&&(n.delay||n.duration)&&(this.prior=r)};li.prototype.possiblyEvaluate=function(t$jscomp$0,e$jscomp$0,r$jscomp$0){var n=t$jscomp$0.now||0,i=this.value.possiblyEvaluate(t$jscomp$0,e$jscomp$0,r$jscomp$0),a=this.prior;if(a){if(n>this.end||this.value.isDataDriven())return this.prior=null,i;if(n<this.begin)return a.possiblyEvaluate(t$jscomp$0,e$jscomp$0,r$jscomp$0);n=(n-this.begin)/(this.end-this.begin);return this.property.interpolate(a.possiblyEvaluate(t$jscomp$0,e$jscomp$0,
r$jscomp$0),i,function(t){if(0>=t)return 0;if(1<=t)return 1;var e=t*t,r=e*t;return 4*(.5>t?r:3*(t-e)+r-.75)}(n))}return i};var pi=function(t){this._properties=t;this._values=Object.create(t.defaultTransitioningPropertyValues)};pi.prototype.possiblyEvaluate=function(t,e,r){for(var n=new fi(this._properties),i=0,a=Object.keys(this._values);i<a.length;i+=1){var o=a[i];n._values[o]=this._values[o].possiblyEvaluate(t,e,r)}return n};pi.prototype.hasTransition=function(){for(var t=0,e=Object.keys(this._values);t<
e.length;t+=1)if(this._values[e[t]].prior)return!0;return!1};var ci=function(t){this._properties=t;this._values=Object.create(t.defaultPropertyValues)};ci.prototype.getValue=function(t){return b$jscomp$2(this._values[t].value)};ci.prototype.setValue=function(t,e){this._values[t]=new oi(this._values[t].property,null===e?void 0:b$jscomp$2(e))};ci.prototype.serialize=function(){for(var t={},e=0,r=Object.keys(this._values);e<r.length;e+=1){var n=r[e],i=this.getValue(n);void 0!==i&&(t[n]=i)}return t};
ci.prototype.possiblyEvaluate=function(t,e,r){for(var n=new fi(this._properties),i=0,a=Object.keys(this._values);i<a.length;i+=1){var o=a[i];n._values[o]=this._values[o].possiblyEvaluate(t,e,r)}return n};var hi=function(t,e,r){this.property=t;this.value=e;this.parameters=r};hi.prototype.isConstant=function(){return"constant"===this.value.kind};hi.prototype.constantOr=function(t){return"constant"===this.value.kind?this.value.value:t};hi.prototype.evaluate=function(t,e,r,n){return this.property.evaluate(this.value,
this.parameters,t,e,r,n)};var fi=function(t){this._properties=t;this._values=Object.create(t.defaultPossiblyEvaluatedValues)};fi.prototype.get=function(t){return this._values[t]};var yi=function(t){this.specification=t};yi.prototype.possiblyEvaluate=function(t,e){return t.expression.evaluate(e)};yi.prototype.interpolate=function(t,e,r){var n=Ne[this.specification.type];return n?n(t,e,r):t};var di=function(t,e){this.specification=t;this.overrides=e};di.prototype.possiblyEvaluate=function(t,e,r,n){return new hi(this,
"constant"===t.expression.kind||"camera"===t.expression.kind?{kind:"constant",value:t.expression.evaluate(e,null,{},r,n)}:t.expression,e)};di.prototype.interpolate=function(t,e,r){if("constant"!==t.value.kind||"constant"!==e.value.kind)return t;if(void 0===t.value.value||void 0===e.value.value)return new hi(this,{kind:"constant",value:void 0},t.parameters);var n=Ne[this.specification.type];return n?new hi(this,{kind:"constant",value:n(t.value.value,e.value.value,r)},t.parameters):t};di.prototype.evaluate=
function(t,e,r,n,i,a){return"constant"===t.kind?t.value:t.evaluate(e,r,n,i,a)};var mi=function(t$jscomp$0){function e$jscomp$0(){t$jscomp$0.apply(this,arguments)}return t$jscomp$0&&(e$jscomp$0.__proto__=t$jscomp$0),(e$jscomp$0.prototype=Object.create(t$jscomp$0&&t$jscomp$0.prototype)).constructor=e$jscomp$0,e$jscomp$0.prototype.possiblyEvaluate=function(t,e,r,n){return void 0===t.value?new hi(this,{kind:"constant",value:void 0},e):"constant"===t.expression.kind?(r=t.expression.evaluate(e,null,{},
r,n),t="resolvedImage"===t.property.specification.type&&"string"!=typeof r?r.name:r,t=this._calculate(t,t,t,e),new hi(this,{kind:"constant",value:t},e)):"camera"===t.expression.kind?(t=this._calculate(t.expression.evaluate({zoom:e.zoom-1}),t.expression.evaluate({zoom:e.zoom}),t.expression.evaluate({zoom:e.zoom+1}),e),new hi(this,{kind:"constant",value:t},e)):new hi(this,t.expression,e)},e$jscomp$0.prototype.evaluate=function(t,e,r,n,i,a){return"source"===t.kind?(t=t.evaluate(e,r,n,i,a),this._calculate(t,
t,t,e)):"composite"===t.kind?this._calculate(t.evaluate({zoom:Math.floor(e.zoom)-1},r,n),t.evaluate({zoom:Math.floor(e.zoom)},r,n),t.evaluate({zoom:Math.floor(e.zoom)+1},r,n),e):t.value},e$jscomp$0.prototype._calculate=function(t,e,r,n){return n.zoom>n.zoomHistory.lastIntegerZoom?{from:t,to:e}:{from:r,to:e}},e$jscomp$0.prototype.interpolate=function(t){return t},e$jscomp$0}(di),vi=function(t){this.specification=t};vi.prototype.possiblyEvaluate=function(t,e,r,n){if(void 0!==t.value)return"constant"===
t.expression.kind?(t=t.expression.evaluate(e,null,{},r,n),this._calculate(t,t,t,e)):this._calculate(t.expression.evaluate(new ai(Math.floor(e.zoom-1),e)),t.expression.evaluate(new ai(Math.floor(e.zoom),e)),t.expression.evaluate(new ai(Math.floor(e.zoom+1),e)),e)};vi.prototype._calculate=function(t,e,r,n){return n.zoom>n.zoomHistory.lastIntegerZoom?{from:t,to:e}:{from:r,to:e}};vi.prototype.interpolate=function(t){return t};var gi=function(t){this.specification=t};gi.prototype.possiblyEvaluate=function(t,
e,r,n){return!!t.expression.evaluate(e,null,{},r,n)};gi.prototype.interpolate=function(){return!1};var xi=function(t){for(var e in this.properties=t,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[],t){var r=t[e];r.specification.overridable&&this.overridableProperties.push(e);var n=this.defaultPropertyValues[e]=new oi(r,void 0);r=this.defaultTransitionablePropertyValues[e]=
new si(r);this.defaultTransitioningPropertyValues[e]=r.untransitioned();this.defaultPossiblyEvaluatedValues[e]=n.possiblyEvaluate({})}};Dn("DataDrivenProperty",di);Dn("DataConstantProperty",yi);Dn("CrossFadedDataDrivenProperty",mi);Dn("CrossFadedProperty",vi);Dn("ColorRampProperty",gi);var bi=function(t$jscomp$1){function e$jscomp$0(e,r){if(t$jscomp$1.call(this),this.id=e.id,this.type=e.type,this._featureFilter={filter:function(){return!0},needGeometry:!1},"custom"!==e.type&&(this.metadata=e.metadata,
this.minzoom=e.minzoom,this.maxzoom=e.maxzoom,"background"!==e.type&&(this.source=e.source,this.sourceLayer=e["source-layer"],this.filter=e.filter),r.layout&&(this._unevaluatedLayout=new ci(r.layout)),r.paint)){for(var n in this._transitionablePaint=new ui(r.paint),e.paint)this.setPaintProperty(n,e.paint[n],{validate:!1});for(var i in e.layout)this.setLayoutProperty(i,e.layout[i],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned();this.paint=new fi(r.paint)}}return t$jscomp$1&&
(e$jscomp$0.__proto__=t$jscomp$1),(e$jscomp$0.prototype=Object.create(t$jscomp$1&&t$jscomp$1.prototype)).constructor=e$jscomp$0,e$jscomp$0.prototype.getCrossfadeParameters=function(){return this._crossfadeParameters},e$jscomp$0.prototype.getLayoutProperty=function(t){return"visibility"===t?this.visibility:this._unevaluatedLayout.getValue(t)},e$jscomp$0.prototype.setLayoutProperty=function(t,e,r){void 0===r&&(r={});null!=e&&this._validate(Mn,"layers."+this.id+".layout."+t,t,e,r)||("visibility"!==t?
this._unevaluatedLayout.setValue(t,e):this.visibility=e)},e$jscomp$0.prototype.getPaintProperty=function(t){return v$jscomp$2(t,"-transition")?this._transitionablePaint.getTransition(t.slice(0,-11)):this._transitionablePaint.getValue(t)},e$jscomp$0.prototype.setPaintProperty=function(t,e,r){if(void 0===r&&(r={}),null!=e&&this._validate(Cn,"layers."+this.id+".paint."+t,t,e,r))return!1;if(v$jscomp$2(t,"-transition"))return this._transitionablePaint.setTransition(t.slice(0,-11),e||void 0),!1;var n=this._transitionablePaint._values[t];
r="cross-faded-data-driven"===n.property.specification["property-type"];var a=n.value.isDataDriven();n=n.value;this._transitionablePaint.setValue(t,e);this._handleSpecialPaintPropertyUpdate(t);e=this._transitionablePaint._values[t].value;return e.isDataDriven()||a||r||this._handleOverridablePaintPropertyUpdate(t,n,e)},e$jscomp$0.prototype._handleSpecialPaintPropertyUpdate=function(t){},e$jscomp$0.prototype._handleOverridablePaintPropertyUpdate=function(t,e,r){return!1},e$jscomp$0.prototype.isHidden=
function(t){return!!(this.minzoom&&t<this.minzoom)||!!(this.maxzoom&&t>=this.maxzoom)||"none"===this.visibility},e$jscomp$0.prototype.updateTransitions=function(t){this._transitioningPaint=this._transitionablePaint.transitioned(t,this._transitioningPaint)},e$jscomp$0.prototype.hasTransition=function(){return this._transitioningPaint.hasTransition()},e$jscomp$0.prototype.recalculate=function(t,e){t.getCrossfadeParameters&&(this._crossfadeParameters=t.getCrossfadeParameters());this._unevaluatedLayout&&
(this.layout=this._unevaluatedLayout.possiblyEvaluate(t,void 0,e));this.paint=this._transitioningPaint.possiblyEvaluate(t,void 0,e)},e$jscomp$0.prototype.serialize=function(){var t$jscomp$0={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&
(t$jscomp$0.layout=t$jscomp$0.layout||{},t$jscomp$0.layout.visibility=this.visibility),x$jscomp$2(t$jscomp$0,function(t,e){return!(void 0===t||"layout"===e&&!Object.keys(t).length||"paint"===e&&!Object.keys(t).length)})},e$jscomp$0.prototype._validate=function(t,e,r,n,i){return void 0===i&&(i={}),(!i||!1!==i.validate)&&En(this,t.call(An,{key:e,layerType:this.type,objectKey:r,value:n,styleSpec:zt,style:{glyphs:!0,sprite:!0}}))},e$jscomp$0.prototype.is3D=function(){return!1},e$jscomp$0.prototype.isTileClipped=
function(){return!1},e$jscomp$0.prototype.hasOffscreenPass=function(){return!1},e$jscomp$0.prototype.resize=function(){},e$jscomp$0.prototype.isStateDependent=function(){for(var t in this.paint._values){var e=this.paint.get(t);if(e instanceof hi&&Tr(e.property.specification)&&("source"===e.value.kind||"composite"===e.value.kind)&&e.value.isStateDependent)return!0}return!1},e$jscomp$0}(It),wi={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array},
_i=function(t,e){this._structArray=t;this._pos1=e*this.size;this._pos2=this._pos1/2;this._pos4=this._pos1/4;this._pos8=this._pos1/8},Ai=function(){this.isTransferred=!1;this.capacity=-1;this.resize(0)};Ai.serialize=function(t,e){return t._trim(),e&&(t.isTransferred=!0,e.push(t.arrayBuffer)),{length:t.length,arrayBuffer:t.arrayBuffer}};Ai.deserialize=function(t){var e=Object.create(this.prototype);return e.arrayBuffer=t.arrayBuffer,e.length=t.length,e.capacity=t.arrayBuffer.byteLength/e.bytesPerElement,
e._refreshViews(),e};Ai.prototype._trim=function(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())};Ai.prototype.clear=function(){this.length=0};Ai.prototype.resize=function(t){this.reserve(t);this.length=t};Ai.prototype.reserve=function(t){t>this.capacity&&(this.capacity=Math.max(t,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement),t=this.uint8,
this._refreshViews(),t&&this.uint8.set(t))};Ai.prototype._refreshViews=function(){throw Error("_refreshViews() must be implemented by each concrete StructArray layout");};var Ii=function(t$jscomp$0){function e$jscomp$0(){t$jscomp$0.apply(this,arguments)}return t$jscomp$0&&(e$jscomp$0.__proto__=t$jscomp$0),(e$jscomp$0.prototype=Object.create(t$jscomp$0&&t$jscomp$0.prototype)).constructor=e$jscomp$0,e$jscomp$0.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer);this.int16=
new Int16Array(this.arrayBuffer)},e$jscomp$0.prototype.emplaceBack=function(t,e){var r=this.length;return this.resize(r+1),this.emplace(r,t,e)},e$jscomp$0.prototype.emplace=function(t,e,r){var n=2*t;return this.int16[n+0]=e,this.int16[n+1]=r,t},e$jscomp$0}(Ai);Ii.prototype.bytesPerElement=4;Dn("StructArrayLayout2i4",Ii);var zi=function(t$jscomp$0){function e$jscomp$0(){t$jscomp$0.apply(this,arguments)}return t$jscomp$0&&(e$jscomp$0.__proto__=t$jscomp$0),(e$jscomp$0.prototype=Object.create(t$jscomp$0&&
t$jscomp$0.prototype)).constructor=e$jscomp$0,e$jscomp$0.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer);this.int16=new Int16Array(this.arrayBuffer)},e$jscomp$0.prototype.emplaceBack=function(t,e,r,n){var i=this.length;return this.resize(i+1),this.emplace(i,t,e,r,n)},e$jscomp$0.prototype.emplace=function(t,e,r,n,i){var a=4*t;return this.int16[a+0]=e,this.int16[a+1]=r,this.int16[a+2]=n,this.int16[a+3]=i,t},e$jscomp$0}(Ai);zi.prototype.bytesPerElement=8;Dn("StructArrayLayout4i8",
zi);var Ci=function(t$jscomp$0){function e$jscomp$0(){t$jscomp$0.apply(this,arguments)}return t$jscomp$0&&(e$jscomp$0.__proto__=t$jscomp$0),(e$jscomp$0.prototype=Object.create(t$jscomp$0&&t$jscomp$0.prototype)).constructor=e$jscomp$0,e$jscomp$0.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer);this.int16=new Int16Array(this.arrayBuffer)},e$jscomp$0.prototype.emplaceBack=function(t,e,r,n,i,a){var o=this.length;return this.resize(o+1),this.emplace(o,t,e,r,n,i,a)},e$jscomp$0.prototype.emplace=
function(t,e,r,n,i,a,o){var s=6*t;return this.int16[s+0]=e,this.int16[s+1]=r,this.int16[s+2]=n,this.int16[s+3]=i,this.int16[s+4]=a,this.int16[s+5]=o,t},e$jscomp$0}(Ai);Ci.prototype.bytesPerElement=12;Dn("StructArrayLayout2i4i12",Ci);var Mi=function(t$jscomp$0){function e$jscomp$0(){t$jscomp$0.apply(this,arguments)}return t$jscomp$0&&(e$jscomp$0.__proto__=t$jscomp$0),(e$jscomp$0.prototype=Object.create(t$jscomp$0&&t$jscomp$0.prototype)).constructor=e$jscomp$0,e$jscomp$0.prototype._refreshViews=function(){this.uint8=
new Uint8Array(this.arrayBuffer);this.int16=new Int16Array(this.arrayBuffer)},e$jscomp$0.prototype.emplaceBack=function(t,e,r,n,i,a){var o=this.length;return this.resize(o+1),this.emplace(o,t,e,r,n,i,a)},e$jscomp$0.prototype.emplace=function(t,e,r,n,i,a,o){var s=4*t,u=8*t;return this.int16[s+0]=e,this.int16[s+1]=r,this.uint8[u+4]=n,this.uint8[u+5]=i,this.uint8[u+6]=a,this.uint8[u+7]=o,t},e$jscomp$0}(Ai);Mi.prototype.bytesPerElement=8;Dn("StructArrayLayout2i4ub8",Mi);var Ei=function(t$jscomp$0){function e$jscomp$0(){t$jscomp$0.apply(this,
arguments)}return t$jscomp$0&&(e$jscomp$0.__proto__=t$jscomp$0),(e$jscomp$0.prototype=Object.create(t$jscomp$0&&t$jscomp$0.prototype)).constructor=e$jscomp$0,e$jscomp$0.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer);this.uint16=new Uint16Array(this.arrayBuffer)},e$jscomp$0.prototype.emplaceBack=function(t,e,r,n,i,a,o,s,u,l){var p=this.length;return this.resize(p+1),this.emplace(p,t,e,r,n,i,a,o,s,u,l)},e$jscomp$0.prototype.emplace=function(t,e,r,n,i,a,o,s,u,l,p){var c=
10*t;return this.uint16[c+0]=e,this.uint16[c+1]=r,this.uint16[c+2]=n,this.uint16[c+3]=i,this.uint16[c+4]=a,this.uint16[c+5]=o,this.uint16[c+6]=s,this.uint16[c+7]=u,this.uint16[c+8]=l,this.uint16[c+9]=p,t},e$jscomp$0}(Ai);Ei.prototype.bytesPerElement=20;Dn("StructArrayLayout10ui20",Ei);var Ti=function(t$jscomp$0){function e$jscomp$0(){t$jscomp$0.apply(this,arguments)}return t$jscomp$0&&(e$jscomp$0.__proto__=t$jscomp$0),(e$jscomp$0.prototype=Object.create(t$jscomp$0&&t$jscomp$0.prototype)).constructor=
e$jscomp$0,e$jscomp$0.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer);this.int16=new Int16Array(this.arrayBuffer);this.uint16=new Uint16Array(this.arrayBuffer)},e$jscomp$0.prototype.emplaceBack=function(t,e,r,n,i,a,o,s,u,l,p,c){var h=this.length;return this.resize(h+1),this.emplace(h,t,e,r,n,i,a,o,s,u,l,p,c)},e$jscomp$0.prototype.emplace=function(t,e,r,n,i,a,o,s,u,l,p,c,h){var f=12*t;return this.int16[f+0]=e,this.int16[f+1]=r,this.int16[f+2]=n,this.int16[f+3]=i,this.uint16[f+
4]=a,this.uint16[f+5]=o,this.uint16[f+6]=s,this.uint16[f+7]=u,this.int16[f+8]=l,this.int16[f+9]=p,this.int16[f+10]=c,this.int16[f+11]=h,t},e$jscomp$0}(Ai);Ti.prototype.bytesPerElement=24;Dn("StructArrayLayout4i4ui4i24",Ti);var Pi=function(t$jscomp$0){function e$jscomp$0(){t$jscomp$0.apply(this,arguments)}return t$jscomp$0&&(e$jscomp$0.__proto__=t$jscomp$0),(e$jscomp$0.prototype=Object.create(t$jscomp$0&&t$jscomp$0.prototype)).constructor=e$jscomp$0,e$jscomp$0.prototype._refreshViews=function(){this.uint8=
new Uint8Array(this.arrayBuffer);this.float32=new Float32Array(this.arrayBuffer)},e$jscomp$0.prototype.emplaceBack=function(t,e,r){var n=this.length;return this.resize(n+1),this.emplace(n,t,e,r)},e$jscomp$0.prototype.emplace=function(t,e,r,n){var i=3*t;return this.float32[i+0]=e,this.float32[i+1]=r,this.float32[i+2]=n,t},e$jscomp$0}(Ai);Pi.prototype.bytesPerElement=12;Dn("StructArrayLayout3f12",Pi);var Bi=function(t$jscomp$0){function e$jscomp$0(){t$jscomp$0.apply(this,arguments)}return t$jscomp$0&&
(e$jscomp$0.__proto__=t$jscomp$0),(e$jscomp$0.prototype=Object.create(t$jscomp$0&&t$jscomp$0.prototype)).constructor=e$jscomp$0,e$jscomp$0.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer);this.uint32=new Uint32Array(this.arrayBuffer)},e$jscomp$0.prototype.emplaceBack=function(t){var e=this.length;return this.resize(e+1),this.emplace(e,t)},e$jscomp$0.prototype.emplace=function(t,e){return this.uint32[1*t]=e,t},e$jscomp$0}(Ai);Bi.prototype.bytesPerElement=4;Dn("StructArrayLayout1ul4",
Bi);var Vi=function(t$jscomp$0){function e$jscomp$0(){t$jscomp$0.apply(this,arguments)}return t$jscomp$0&&(e$jscomp$0.__proto__=t$jscomp$0),(e$jscomp$0.prototype=Object.create(t$jscomp$0&&t$jscomp$0.prototype)).constructor=e$jscomp$0,e$jscomp$0.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer);this.int16=new Int16Array(this.arrayBuffer);this.uint32=new Uint32Array(this.arrayBuffer);this.uint16=new Uint16Array(this.arrayBuffer)},e$jscomp$0.prototype.emplaceBack=function(t,
e,r,n,i,a,o,s,u){var l=this.length;return this.resize(l+1),this.emplace(l,t,e,r,n,i,a,o,s,u)},e$jscomp$0.prototype.emplace=function(t,e,r,n,i,a,o,s,u,l){var p=10*t;return this.int16[p+0]=e,this.int16[p+1]=r,this.int16[p+2]=n,this.int16[p+3]=i,this.int16[p+4]=a,this.int16[p+5]=o,this.uint32[5*t+3]=s,this.uint16[p+8]=u,this.uint16[p+9]=l,t},e$jscomp$0}(Ai);Vi.prototype.bytesPerElement=20;Dn("StructArrayLayout6i1ul2ui20",Vi);var Fi=function(t$jscomp$0){function e$jscomp$0(){t$jscomp$0.apply(this,arguments)}
return t$jscomp$0&&(e$jscomp$0.__proto__=t$jscomp$0),(e$jscomp$0.prototype=Object.create(t$jscomp$0&&t$jscomp$0.prototype)).constructor=e$jscomp$0,e$jscomp$0.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer);this.int16=new Int16Array(this.arrayBuffer)},e$jscomp$0.prototype.emplaceBack=function(t,e,r,n,i,a){var o=this.length;return this.resize(o+1),this.emplace(o,t,e,r,n,i,a)},e$jscomp$0.prototype.emplace=function(t,e,r,n,i,a,o){var s=6*t;return this.int16[s+0]=e,this.int16[s+
1]=r,this.int16[s+2]=n,this.int16[s+3]=i,this.int16[s+4]=a,this.int16[s+5]=o,t},e$jscomp$0}(Ai);Fi.prototype.bytesPerElement=12;Dn("StructArrayLayout2i2i2i12",Fi);var Di=function(t$jscomp$0){function e$jscomp$0(){t$jscomp$0.apply(this,arguments)}return t$jscomp$0&&(e$jscomp$0.__proto__=t$jscomp$0),(e$jscomp$0.prototype=Object.create(t$jscomp$0&&t$jscomp$0.prototype)).constructor=e$jscomp$0,e$jscomp$0.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer);this.float32=new Float32Array(this.arrayBuffer);
this.int16=new Int16Array(this.arrayBuffer)},e$jscomp$0.prototype.emplaceBack=function(t,e,r,n,i){var a=this.length;return this.resize(a+1),this.emplace(a,t,e,r,n,i)},e$jscomp$0.prototype.emplace=function(t,e,r,n,i,a){var o=4*t,s=8*t;return this.float32[o+0]=e,this.float32[o+1]=r,this.float32[o+2]=n,this.int16[s+6]=i,this.int16[s+7]=a,t},e$jscomp$0}(Ai);Di.prototype.bytesPerElement=16;Dn("StructArrayLayout2f1f2i16",Di);var Li=function(t$jscomp$0){function e$jscomp$0(){t$jscomp$0.apply(this,arguments)}
return t$jscomp$0&&(e$jscomp$0.__proto__=t$jscomp$0),(e$jscomp$0.prototype=Object.create(t$jscomp$0&&t$jscomp$0.prototype)).constructor=e$jscomp$0,e$jscomp$0.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer);this.float32=new Float32Array(this.arrayBuffer)},e$jscomp$0.prototype.emplaceBack=function(t,e,r,n){var i=this.length;return this.resize(i+1),this.emplace(i,t,e,r,n)},e$jscomp$0.prototype.emplace=function(t,e,r,n,i){var a=12*t,o=3*t;return this.uint8[a+0]=e,this.uint8[a+
1]=r,this.float32[o+1]=n,this.float32[o+2]=i,t},e$jscomp$0}(Ai);Li.prototype.bytesPerElement=12;Dn("StructArrayLayout2ub2f12",Li);var Ri=function(t$jscomp$0){function e$jscomp$0(){t$jscomp$0.apply(this,arguments)}return t$jscomp$0&&(e$jscomp$0.__proto__=t$jscomp$0),(e$jscomp$0.prototype=Object.create(t$jscomp$0&&t$jscomp$0.prototype)).constructor=e$jscomp$0,e$jscomp$0.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer);this.uint16=new Uint16Array(this.arrayBuffer)},e$jscomp$0.prototype.emplaceBack=
function(t,e,r){var n=this.length;return this.resize(n+1),this.emplace(n,t,e,r)},e$jscomp$0.prototype.emplace=function(t,e,r,n){var i=3*t;return this.uint16[i+0]=e,this.uint16[i+1]=r,this.uint16[i+2]=n,t},e$jscomp$0}(Ai);Ri.prototype.bytesPerElement=6;Dn("StructArrayLayout3ui6",Ri);var Oi=function(t$jscomp$0){function e$jscomp$0(){t$jscomp$0.apply(this,arguments)}return t$jscomp$0&&(e$jscomp$0.__proto__=t$jscomp$0),(e$jscomp$0.prototype=Object.create(t$jscomp$0&&t$jscomp$0.prototype)).constructor=
e$jscomp$0,e$jscomp$0.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer);this.int16=new Int16Array(this.arrayBuffer);this.uint16=new Uint16Array(this.arrayBuffer);this.uint32=new Uint32Array(this.arrayBuffer);this.float32=new Float32Array(this.arrayBuffer)},e$jscomp$0.prototype.emplaceBack=function(t,e,r,n,i,a,o,s,u,l,p,c,h,f,y,d,m){var v=this.length;return this.resize(v+1),this.emplace(v,t,e,r,n,i,a,o,s,u,l,p,c,h,f,y,d,m)},e$jscomp$0.prototype.emplace=function(t,e,r,n,
i,a,o,s,u,l,p,c,h,f,y,d,m,v){var g=24*t,x=12*t,b=48*t;return this.int16[g+0]=e,this.int16[g+1]=r,this.uint16[g+2]=n,this.uint16[g+3]=i,this.uint32[x+2]=a,this.uint32[x+3]=o,this.uint32[x+4]=s,this.uint16[g+10]=u,this.uint16[g+11]=l,this.uint16[g+12]=p,this.float32[x+7]=c,this.float32[x+8]=h,this.uint8[b+36]=f,this.uint8[b+37]=y,this.uint8[b+38]=d,this.uint32[x+10]=m,this.int16[g+22]=v,t},e$jscomp$0}(Ai);Oi.prototype.bytesPerElement=48;Dn("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",Oi);var Ui=function(t$jscomp$0){function e$jscomp$0(){t$jscomp$0.apply(this,
arguments)}return t$jscomp$0&&(e$jscomp$0.__proto__=t$jscomp$0),(e$jscomp$0.prototype=Object.create(t$jscomp$0&&t$jscomp$0.prototype)).constructor=e$jscomp$0,e$jscomp$0.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer);this.int16=new Int16Array(this.arrayBuffer);this.uint16=new Uint16Array(this.arrayBuffer);this.uint32=new Uint32Array(this.arrayBuffer);this.float32=new Float32Array(this.arrayBuffer)},e$jscomp$0.prototype.emplaceBack=function(t,e,r,n,i,a,o,s,u,l,p,c,h,
f,y,d,m,v,g,x,b,w,_,A,S,k,I,z){var C=this.length;return this.resize(C+1),this.emplace(C,t,e,r,n,i,a,o,s,u,l,p,c,h,f,y,d,m,v,g,x,b,w,_,A,S,k,I,z)},e$jscomp$0.prototype.emplace=function(t,e,r,n,i,a,o,s,u,l,p,c,h,f,y,d,m,v,g,x,b,w,_,A,S,k,I,z,C){var M=34*t,E=17*t;return this.int16[M+0]=e,this.int16[M+1]=r,this.int16[M+2]=n,this.int16[M+3]=i,this.int16[M+4]=a,this.int16[M+5]=o,this.int16[M+6]=s,this.int16[M+7]=u,this.uint16[M+8]=l,this.uint16[M+9]=p,this.uint16[M+10]=c,this.uint16[M+11]=h,this.uint16[M+
12]=f,this.uint16[M+13]=y,this.uint16[M+14]=d,this.uint16[M+15]=m,this.uint16[M+16]=v,this.uint16[M+17]=g,this.uint16[M+18]=x,this.uint16[M+19]=b,this.uint16[M+20]=w,this.uint16[M+21]=_,this.uint16[M+22]=A,this.uint32[E+12]=S,this.float32[E+13]=k,this.float32[E+14]=I,this.float32[E+15]=z,this.float32[E+16]=C,t},e$jscomp$0}(Ai);Ui.prototype.bytesPerElement=68;Dn("StructArrayLayout8i15ui1ul4f68",Ui);var ji=function(t$jscomp$0){function e$jscomp$0(){t$jscomp$0.apply(this,arguments)}return t$jscomp$0&&
(e$jscomp$0.__proto__=t$jscomp$0),(e$jscomp$0.prototype=Object.create(t$jscomp$0&&t$jscomp$0.prototype)).constructor=e$jscomp$0,e$jscomp$0.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer);this.float32=new Float32Array(this.arrayBuffer)},e$jscomp$0.prototype.emplaceBack=function(t){var e=this.length;return this.resize(e+1),this.emplace(e,t)},e$jscomp$0.prototype.emplace=function(t,e){return this.float32[1*t]=e,t},e$jscomp$0}(Ai);ji.prototype.bytesPerElement=4;Dn("StructArrayLayout1f4",
ji);var qi=function(t$jscomp$0){function e$jscomp$0(){t$jscomp$0.apply(this,arguments)}return t$jscomp$0&&(e$jscomp$0.__proto__=t$jscomp$0),(e$jscomp$0.prototype=Object.create(t$jscomp$0&&t$jscomp$0.prototype)).constructor=e$jscomp$0,e$jscomp$0.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer);this.int16=new Int16Array(this.arrayBuffer)},e$jscomp$0.prototype.emplaceBack=function(t,e,r){var n=this.length;return this.resize(n+1),this.emplace(n,t,e,r)},e$jscomp$0.prototype.emplace=
function(t,e,r,n){var i=3*t;return this.int16[i+0]=e,this.int16[i+1]=r,this.int16[i+2]=n,t},e$jscomp$0}(Ai);qi.prototype.bytesPerElement=6;Dn("StructArrayLayout3i6",qi);var Ni=function(t$jscomp$0){function e$jscomp$0(){t$jscomp$0.apply(this,arguments)}return t$jscomp$0&&(e$jscomp$0.__proto__=t$jscomp$0),(e$jscomp$0.prototype=Object.create(t$jscomp$0&&t$jscomp$0.prototype)).constructor=e$jscomp$0,e$jscomp$0.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer);this.uint32=
new Uint32Array(this.arrayBuffer);this.uint16=new Uint16Array(this.arrayBuffer)},e$jscomp$0.prototype.emplaceBack=function(t,e,r){var n=this.length;return this.resize(n+1),this.emplace(n,t,e,r)},e$jscomp$0.prototype.emplace=function(t,e,r,n){var i=4*t;return this.uint32[2*t]=e,this.uint16[i+2]=r,this.uint16[i+3]=n,t},e$jscomp$0}(Ai);Ni.prototype.bytesPerElement=8;Dn("StructArrayLayout1ul2ui8",Ni);var Ki=function(t$jscomp$0){function e$jscomp$0(){t$jscomp$0.apply(this,arguments)}return t$jscomp$0&&
(e$jscomp$0.__proto__=t$jscomp$0),(e$jscomp$0.prototype=Object.create(t$jscomp$0&&t$jscomp$0.prototype)).constructor=e$jscomp$0,e$jscomp$0.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer);this.uint16=new Uint16Array(this.arrayBuffer)},e$jscomp$0.prototype.emplaceBack=function(t,e){var r=this.length;return this.resize(r+1),this.emplace(r,t,e)},e$jscomp$0.prototype.emplace=function(t,e,r){var n=2*t;return this.uint16[n+0]=e,this.uint16[n+1]=r,t},e$jscomp$0}(Ai);Ki.prototype.bytesPerElement=
4;Dn("StructArrayLayout2ui4",Ki);var Gi=function(t$jscomp$0){function e$jscomp$0(){t$jscomp$0.apply(this,arguments)}return t$jscomp$0&&(e$jscomp$0.__proto__=t$jscomp$0),(e$jscomp$0.prototype=Object.create(t$jscomp$0&&t$jscomp$0.prototype)).constructor=e$jscomp$0,e$jscomp$0.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer);this.uint16=new Uint16Array(this.arrayBuffer)},e$jscomp$0.prototype.emplaceBack=function(t){var e=this.length;return this.resize(e+1),this.emplace(e,
t)},e$jscomp$0.prototype.emplace=function(t,e){return this.uint16[1*t]=e,t},e$jscomp$0}(Ai);Gi.prototype.bytesPerElement=2;Dn("StructArrayLayout1ui2",Gi);var Zi=function(t$jscomp$0){function e$jscomp$0(){t$jscomp$0.apply(this,arguments)}return t$jscomp$0&&(e$jscomp$0.__proto__=t$jscomp$0),(e$jscomp$0.prototype=Object.create(t$jscomp$0&&t$jscomp$0.prototype)).constructor=e$jscomp$0,e$jscomp$0.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer);this.float32=new Float32Array(this.arrayBuffer)},
e$jscomp$0.prototype.emplaceBack=function(t,e){var r=this.length;return this.resize(r+1),this.emplace(r,t,e)},e$jscomp$0.prototype.emplace=function(t,e,r){var n=2*t;return this.float32[n+0]=e,this.float32[n+1]=r,t},e$jscomp$0}(Ai);Zi.prototype.bytesPerElement=8;Dn("StructArrayLayout2f8",Zi);var Xi=function(t$jscomp$0){function e$jscomp$0(){t$jscomp$0.apply(this,arguments)}return t$jscomp$0&&(e$jscomp$0.__proto__=t$jscomp$0),(e$jscomp$0.prototype=Object.create(t$jscomp$0&&t$jscomp$0.prototype)).constructor=
e$jscomp$0,e$jscomp$0.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer);this.float32=new Float32Array(this.arrayBuffer)},e$jscomp$0.prototype.emplaceBack=function(t,e,r,n){var i=this.length;return this.resize(i+1),this.emplace(i,t,e,r,n)},e$jscomp$0.prototype.emplace=function(t,e,r,n,i){var a=4*t;return this.float32[a+0]=e,this.float32[a+1]=r,this.float32[a+2]=n,this.float32[a+3]=i,t},e$jscomp$0}(Ai);Xi.prototype.bytesPerElement=16;Dn("StructArrayLayout4f16",Xi);var Ji=
function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t);(e.prototype=Object.create(t&&t.prototype)).constructor=e;var r={anchorPointX:{configurable:!0},anchorPointY:{configurable:!0},x1:{configurable:!0},y1:{configurable:!0},x2:{configurable:!0},y2:{configurable:!0},featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0},anchorPoint:{configurable:!0}};return r.anchorPointX.get=function(){return this._structArray.int16[this._pos2+0]},r.anchorPointY.get=
function(){return this._structArray.int16[this._pos2+1]},r.x1.get=function(){return this._structArray.int16[this._pos2+2]},r.y1.get=function(){return this._structArray.int16[this._pos2+3]},r.x2.get=function(){return this._structArray.int16[this._pos2+4]},r.y2.get=function(){return this._structArray.int16[this._pos2+5]},r.featureIndex.get=function(){return this._structArray.uint32[this._pos4+3]},r.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+8]},r.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+
9]},r.anchorPoint.get=function(){return new i$jscomp$2(this.anchorPointX,this.anchorPointY)},Object.defineProperties(e.prototype,r),e}(_i);Ji.prototype.size=20;var Hi=function(t$jscomp$0){function e(){t$jscomp$0.apply(this,arguments)}return t$jscomp$0&&(e.__proto__=t$jscomp$0),(e.prototype=Object.create(t$jscomp$0&&t$jscomp$0.prototype)).constructor=e,e.prototype.get=function(t){return new Ji(this,t)},e}(Vi);Dn("CollisionBoxArray",Hi);var Yi=function(t$jscomp$0){function e(){t$jscomp$0.apply(this,
arguments)}t$jscomp$0&&(e.__proto__=t$jscomp$0);(e.prototype=Object.create(t$jscomp$0&&t$jscomp$0.prototype)).constructor=e;var r={anchorX:{configurable:!0},anchorY:{configurable:!0},glyphStartIndex:{configurable:!0},numGlyphs:{configurable:!0},vertexStartIndex:{configurable:!0},lineStartIndex:{configurable:!0},lineLength:{configurable:!0},segment:{configurable:!0},lowerSize:{configurable:!0},upperSize:{configurable:!0},lineOffsetX:{configurable:!0},lineOffsetY:{configurable:!0},writingMode:{configurable:!0},
placedOrientation:{configurable:!0},hidden:{configurable:!0},crossTileID:{configurable:!0},associatedIconIndex:{configurable:!0}};return r.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},r.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},r.glyphStartIndex.get=function(){return this._structArray.uint16[this._pos2+2]},r.numGlyphs.get=function(){return this._structArray.uint16[this._pos2+3]},r.vertexStartIndex.get=function(){return this._structArray.uint32[this._pos4+
2]},r.lineStartIndex.get=function(){return this._structArray.uint32[this._pos4+3]},r.lineLength.get=function(){return this._structArray.uint32[this._pos4+4]},r.segment.get=function(){return this._structArray.uint16[this._pos2+10]},r.lowerSize.get=function(){return this._structArray.uint16[this._pos2+11]},r.upperSize.get=function(){return this._structArray.uint16[this._pos2+12]},r.lineOffsetX.get=function(){return this._structArray.float32[this._pos4+7]},r.lineOffsetY.get=function(){return this._structArray.float32[this._pos4+
8]},r.writingMode.get=function(){return this._structArray.uint8[this._pos1+36]},r.placedOrientation.get=function(){return this._structArray.uint8[this._pos1+37]},r.placedOrientation.set=function(t){this._structArray.uint8[this._pos1+37]=t},r.hidden.get=function(){return this._structArray.uint8[this._pos1+38]},r.hidden.set=function(t){this._structArray.uint8[this._pos1+38]=t},r.crossTileID.get=function(){return this._structArray.uint32[this._pos4+10]},r.crossTileID.set=function(t){this._structArray.uint32[this._pos4+
10]=t},r.associatedIconIndex.get=function(){return this._structArray.int16[this._pos2+22]},Object.defineProperties(e.prototype,r),e}(_i);Yi.prototype.size=48;var $i=function(t$jscomp$0){function e(){t$jscomp$0.apply(this,arguments)}return t$jscomp$0&&(e.__proto__=t$jscomp$0),(e.prototype=Object.create(t$jscomp$0&&t$jscomp$0.prototype)).constructor=e,e.prototype.get=function(t){return new Yi(this,t)},e}(Oi);Dn("PlacedSymbolArray",$i);var Wi=function(t$jscomp$0){function e(){t$jscomp$0.apply(this,arguments)}
t$jscomp$0&&(e.__proto__=t$jscomp$0);(e.prototype=Object.create(t$jscomp$0&&t$jscomp$0.prototype)).constructor=e;var r={anchorX:{configurable:!0},anchorY:{configurable:!0},rightJustifiedTextSymbolIndex:{configurable:!0},centerJustifiedTextSymbolIndex:{configurable:!0},leftJustifiedTextSymbolIndex:{configurable:!0},verticalPlacedTextSymbolIndex:{configurable:!0},placedIconSymbolIndex:{configurable:!0},verticalPlacedIconSymbolIndex:{configurable:!0},key:{configurable:!0},textBoxStartIndex:{configurable:!0},
textBoxEndIndex:{configurable:!0},verticalTextBoxStartIndex:{configurable:!0},verticalTextBoxEndIndex:{configurable:!0},iconBoxStartIndex:{configurable:!0},iconBoxEndIndex:{configurable:!0},verticalIconBoxStartIndex:{configurable:!0},verticalIconBoxEndIndex:{configurable:!0},featureIndex:{configurable:!0},numHorizontalGlyphVertices:{configurable:!0},numVerticalGlyphVertices:{configurable:!0},numIconVertices:{configurable:!0},numVerticalIconVertices:{configurable:!0},useRuntimeCollisionCircles:{configurable:!0},
crossTileID:{configurable:!0},textBoxScale:{configurable:!0},textOffset0:{configurable:!0},textOffset1:{configurable:!0},collisionCircleDiameter:{configurable:!0}};return r.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},r.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},r.rightJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+2]},r.centerJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+3]},r.leftJustifiedTextSymbolIndex.get=
function(){return this._structArray.int16[this._pos2+4]},r.verticalPlacedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+5]},r.placedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+6]},r.verticalPlacedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+7]},r.key.get=function(){return this._structArray.uint16[this._pos2+8]},r.textBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+9]},r.textBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+
10]},r.verticalTextBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+11]},r.verticalTextBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+12]},r.iconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+13]},r.iconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+14]},r.verticalIconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+15]},r.verticalIconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+
16]},r.featureIndex.get=function(){return this._structArray.uint16[this._pos2+17]},r.numHorizontalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+18]},r.numVerticalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+19]},r.numIconVertices.get=function(){return this._structArray.uint16[this._pos2+20]},r.numVerticalIconVertices.get=function(){return this._structArray.uint16[this._pos2+21]},r.useRuntimeCollisionCircles.get=function(){return this._structArray.uint16[this._pos2+
22]},r.crossTileID.get=function(){return this._structArray.uint32[this._pos4+12]},r.crossTileID.set=function(t){this._structArray.uint32[this._pos4+12]=t},r.textBoxScale.get=function(){return this._structArray.float32[this._pos4+13]},r.textOffset0.get=function(){return this._structArray.float32[this._pos4+14]},r.textOffset1.get=function(){return this._structArray.float32[this._pos4+15]},r.collisionCircleDiameter.get=function(){return this._structArray.float32[this._pos4+16]},Object.defineProperties(e.prototype,
r),e}(_i);Wi.prototype.size=68;var Qi=function(t$jscomp$0){function e(){t$jscomp$0.apply(this,arguments)}return t$jscomp$0&&(e.__proto__=t$jscomp$0),(e.prototype=Object.create(t$jscomp$0&&t$jscomp$0.prototype)).constructor=e,e.prototype.get=function(t){return new Wi(this,t)},e}(Ui);Dn("SymbolInstanceArray",Qi);var ta=function(t$jscomp$0){function e(){t$jscomp$0.apply(this,arguments)}return t$jscomp$0&&(e.__proto__=t$jscomp$0),(e.prototype=Object.create(t$jscomp$0&&t$jscomp$0.prototype)).constructor=
e,e.prototype.getoffsetX=function(t){return this.float32[1*t]},e}(ji);Dn("GlyphOffsetArray",ta);var ea=function(t$jscomp$0){function e(){t$jscomp$0.apply(this,arguments)}return t$jscomp$0&&(e.__proto__=t$jscomp$0),(e.prototype=Object.create(t$jscomp$0&&t$jscomp$0.prototype)).constructor=e,e.prototype.getx=function(t){return this.int16[3*t]},e.prototype.gety=function(t){return this.int16[3*t+1]},e.prototype.gettileUnitDistanceFromAnchor=function(t){return this.int16[3*t+2]},e}(qi);Dn("SymbolLineVertexArray",
ea);var ra=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t);(e.prototype=Object.create(t&&t.prototype)).constructor=e;var r={featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0}};return r.featureIndex.get=function(){return this._structArray.uint32[this._pos4+0]},r.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+2]},r.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+3]},Object.defineProperties(e.prototype,
r),e}(_i);ra.prototype.size=8;var na=function(t$jscomp$0){function e(){t$jscomp$0.apply(this,arguments)}return t$jscomp$0&&(e.__proto__=t$jscomp$0),(e.prototype=Object.create(t$jscomp$0&&t$jscomp$0.prototype)).constructor=e,e.prototype.get=function(t){return new ra(this,t)},e}(Ni);Dn("FeatureIndexArray",na);var ia=Si([{name:"a_pos",components:2,type:"Int16"}],4).members,aa=function(t){void 0===t&&(t=[]);this.segments=t};aa.prototype.prepareSegment=function(t,e,r,n){var i=this.segments[this.segments.length-
1];return t>aa.MAX_VERTEX_ARRAY_LENGTH&&_$jscomp$0("Max vertices per segment is "+aa.MAX_VERTEX_ARRAY_LENGTH+": bucket requested "+t),(!i||i.vertexLength+t>aa.MAX_VERTEX_ARRAY_LENGTH||i.sortKey!==n)&&(i={vertexOffset:e.length,primitiveOffset:r.length,vertexLength:0,primitiveLength:0},void 0!==n&&(i.sortKey=n),this.segments.push(i)),i};aa.prototype.get=function(){return this.segments};aa.prototype.destroy=function(){for(var t=0,e=this.segments;t<e.length;t+=1){var r=e[t],n;for(n in r.vaos)r.vaos[n].destroy()}};
aa.simpleSegment=function(t,e,r,n){return new aa([{vertexOffset:t,primitiveOffset:e,vertexLength:r,primitiveLength:n,vaos:{},sortKey:0}])};aa.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1;Dn("SegmentVector",aa);var sa=Si([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]),ua=e$jscomp$4(function(t$jscomp$0){t$jscomp$0.exports=function(t,e){var r,
a,l;var n=t.length-(r=3&t.length);for(l=0;l<n;){var u=255&t.charCodeAt(l)|(255&t.charCodeAt(++l))<<8|(255&t.charCodeAt(++l))<<16|(255&t.charCodeAt(++l))<<24;++l;e=27492+(65535&(a=5*(65535&(e=(e^=461845907*(65535&(u=(u=3432918353*(65535&u)+((3432918353*(u>>>16)&65535)<<16)&4294967295)<<15|u>>>17))+((461845907*(u>>>16)&65535)<<16)&4294967295)<<13|e>>>19))+((5*(e>>>16)&65535)<<16)&4294967295))+((58964+(a>>>16)&65535)<<16)}switch(u=0,r){case 3:u^=(255&t.charCodeAt(l+2))<<16;case 2:u^=(255&t.charCodeAt(l+
1))<<8;case 1:e^=461845907*(65535&(u=(u=3432918353*(65535&(u^=255&t.charCodeAt(l)))+((3432918353*(u>>>16)&65535)<<16)&4294967295)<<15|u>>>17))+((461845907*(u>>>16)&65535)<<16)&4294967295}return e^=t.length,e=2246822507*(65535&(e^=e>>>16))+((2246822507*(e>>>16)&65535)<<16)&4294967295,e=3266489909*(65535&(e^=e>>>13))+((3266489909*(e>>>16)&65535)<<16)&4294967295,(e^e>>>16)>>>0}}),la=e$jscomp$4(function(t$jscomp$0){t$jscomp$0.exports=function(t,e){var n=t.length;e^=n;for(var a=0;4<=n;){var r=1540483477*
(65535&(r=255&t.charCodeAt(a)|(255&t.charCodeAt(++a))<<8|(255&t.charCodeAt(++a))<<16|(255&t.charCodeAt(++a))<<24))+((1540483477*(r>>>16)&65535)<<16);e=1540483477*(65535&e)+((1540483477*(e>>>16)&65535)<<16)^(r=1540483477*(65535&(r^=r>>>24))+((1540483477*(r>>>16)&65535)<<16));n-=4;++a}switch(n){case 3:e^=(255&t.charCodeAt(a+2))<<16;case 2:e^=(255&t.charCodeAt(a+1))<<8;case 1:e=1540483477*(65535&(e^=255&t.charCodeAt(a)))+((1540483477*(e>>>16)&65535)<<16)}return e=1540483477*(65535&(e^=e>>>13))+((1540483477*
(e>>>16)&65535)<<16),(e^e>>>15)>>>0}}),pa=ua;pa.murmur3=ua;pa.murmur2=la;var ha=function(){this.ids=[];this.positions=[];this.indexed=!1};ha.prototype.add=function(t,e,r,n){this.ids.push(ya(t));this.positions.push(e,r,n)};ha.prototype.getPositions=function(t){t=ya(t);for(var r=0,n=this.ids.length-1;r<n;){var i=r+n>>1;this.ids[i]>=t?n=i:r=i+1}for(n=[];this.ids[r]===t;)n.push({index:this.positions[3*r],start:this.positions[3*r+1],end:this.positions[3*r+2]}),r++;return n};ha.serialize=function(t$jscomp$0,
e$jscomp$0){var r$jscomp$0=new Float64Array(t$jscomp$0.ids);t$jscomp$0=new Uint32Array(t$jscomp$0.positions);return function t(e,r,n,i){for(;n<i;){for(var a=e[n+i>>1],o=n-1,s=i+1;;){do o++;while(e[o]<a);do s--;while(e[s]>a);if(o>=s)break;da(e,o,s);da(r,3*o,3*s);da(r,3*o+1,3*s+1);da(r,3*o+2,3*s+2)}s-n<i-s?(t(e,r,n,s),n=s+1):(t(e,r,s+1,i),i=s)}}(r$jscomp$0,t$jscomp$0,0,r$jscomp$0.length-1),e$jscomp$0&&e$jscomp$0.push(r$jscomp$0.buffer,t$jscomp$0.buffer),{ids:r$jscomp$0,positions:t$jscomp$0}};ha.deserialize=
function(t){var e=new ha;return e.ids=t.ids,e.positions=t.positions,e.indexed=!0,e};var fa=Math.pow(2,53)-1;Dn("FeaturePositionMap",ha);var ma=function(t,e){this.gl=t.gl;this.location=e},va=function(t$jscomp$0){function e$jscomp$0(e,r){t$jscomp$0.call(this,e,r);this.current=0}return t$jscomp$0&&(e$jscomp$0.__proto__=t$jscomp$0),(e$jscomp$0.prototype=Object.create(t$jscomp$0&&t$jscomp$0.prototype)).constructor=e$jscomp$0,e$jscomp$0.prototype.set=function(t){this.current!==t&&(this.current=t,this.gl.uniform1i(this.location,
t))},e$jscomp$0}(ma),ga=function(t$jscomp$0){function e$jscomp$0(e,r){t$jscomp$0.call(this,e,r);this.current=0}return t$jscomp$0&&(e$jscomp$0.__proto__=t$jscomp$0),(e$jscomp$0.prototype=Object.create(t$jscomp$0&&t$jscomp$0.prototype)).constructor=e$jscomp$0,e$jscomp$0.prototype.set=function(t){this.current!==t&&(this.current=t,this.gl.uniform1f(this.location,t))},e$jscomp$0}(ma),xa=function(t$jscomp$0){function e$jscomp$0(e,r){t$jscomp$0.call(this,e,r);this.current=[0,0]}return t$jscomp$0&&(e$jscomp$0.__proto__=
t$jscomp$0),(e$jscomp$0.prototype=Object.create(t$jscomp$0&&t$jscomp$0.prototype)).constructor=e$jscomp$0,e$jscomp$0.prototype.set=function(t){t[0]===this.current[0]&&t[1]===this.current[1]||(this.current=t,this.gl.uniform2f(this.location,t[0],t[1]))},e$jscomp$0}(ma),ba=function(t$jscomp$0){function e$jscomp$0(e,r){t$jscomp$0.call(this,e,r);this.current=[0,0,0]}return t$jscomp$0&&(e$jscomp$0.__proto__=t$jscomp$0),(e$jscomp$0.prototype=Object.create(t$jscomp$0&&t$jscomp$0.prototype)).constructor=e$jscomp$0,
e$jscomp$0.prototype.set=function(t){t[0]===this.current[0]&&t[1]===this.current[1]&&t[2]===this.current[2]||(this.current=t,this.gl.uniform3f(this.location,t[0],t[1],t[2]))},e$jscomp$0}(ma),wa=function(t$jscomp$0){function e$jscomp$0(e,r){t$jscomp$0.call(this,e,r);this.current=[0,0,0,0]}return t$jscomp$0&&(e$jscomp$0.__proto__=t$jscomp$0),(e$jscomp$0.prototype=Object.create(t$jscomp$0&&t$jscomp$0.prototype)).constructor=e$jscomp$0,e$jscomp$0.prototype.set=function(t){t[0]===this.current[0]&&t[1]===
this.current[1]&&t[2]===this.current[2]&&t[3]===this.current[3]||(this.current=t,this.gl.uniform4f(this.location,t[0],t[1],t[2],t[3]))},e$jscomp$0}(ma),_a=function(t$jscomp$0){function e$jscomp$0(e,r){t$jscomp$0.call(this,e,r);this.current=Wt.transparent}return t$jscomp$0&&(e$jscomp$0.__proto__=t$jscomp$0),(e$jscomp$0.prototype=Object.create(t$jscomp$0&&t$jscomp$0.prototype)).constructor=e$jscomp$0,e$jscomp$0.prototype.set=function(t){t.r===this.current.r&&t.g===this.current.g&&t.b===this.current.b&&
t.a===this.current.a||(this.current=t,this.gl.uniform4f(this.location,t.r,t.g,t.b,t.a))},e$jscomp$0}(ma),Aa=new Float32Array(16),Sa=function(t$jscomp$0){function e$jscomp$0(e,r){t$jscomp$0.call(this,e,r);this.current=Aa}return t$jscomp$0&&(e$jscomp$0.__proto__=t$jscomp$0),(e$jscomp$0.prototype=Object.create(t$jscomp$0&&t$jscomp$0.prototype)).constructor=e$jscomp$0,e$jscomp$0.prototype.set=function(t){if(t[12]!==this.current[12]||t[0]!==this.current[0])return this.current=t,void this.gl.uniformMatrix4fv(this.location,
!1,t);for(var e=1;16>e;e++)if(t[e]!==this.current[e]){this.current=t;this.gl.uniformMatrix4fv(this.location,!1,t);break}},e$jscomp$0}(ma),Ia=function(t$jscomp$0,e,r){this.value=t$jscomp$0;this.uniformNames=e.map(function(t){return"u_"+t});this.type=r};Ia.prototype.setUniform=function(t,e,r){t.set(r.constantOr(this.value))};Ia.prototype.getBinding=function(t,e,r){return"color"===this.type?new _a(t,e):new ga(t,e)};var za=function(t$jscomp$0,e){this.uniformNames=e.map(function(t){return"u_"+t});this.patternTo=
this.patternFrom=null;this.pixelRatioTo=this.pixelRatioFrom=1};za.prototype.setConstantPatternPositions=function(t,e){this.pixelRatioFrom=e.pixelRatio;this.pixelRatioTo=t.pixelRatio;this.patternFrom=e.tlbr;this.patternTo=t.tlbr};za.prototype.setUniform=function(t,e,r,n){(e="u_pattern_to"===n?this.patternTo:"u_pattern_from"===n?this.patternFrom:"u_pixel_ratio_to"===n?this.pixelRatioTo:"u_pixel_ratio_from"===n?this.pixelRatioFrom:null)&&t.set(e)};za.prototype.getBinding=function(t,e,r){return"u_pattern"===
r.substr(0,9)?new wa(t,e):new ga(t,e)};var Ca=function(t$jscomp$0,e,r,n){this.expression=t$jscomp$0;this.type=r;this.maxValue=0;this.paintVertexAttributes=e.map(function(t){return{name:"a_"+t,type:"Float32",components:"color"===r?2:1,offset:0}});this.paintVertexArray=new n};Ca.prototype.populatePaintArray=function(t,e,r,n,i){r=this.paintVertexArray.length;e=this.expression.evaluate(new ai(0),e,{},n,[],i);this.paintVertexArray.resize(t);this._setPaintValue(r,t,e)};Ca.prototype.updatePaintArray=function(t,
e,r,n){r=this.expression.evaluate({zoom:0},r,n);this._setPaintValue(t,e,r)};Ca.prototype._setPaintValue=function(t,e,r){if("color"===this.type)for(r=ka(r);t<e;t++)this.paintVertexArray.emplace(t,r[0],r[1]);else{for(;t<e;t++)this.paintVertexArray.emplace(t,r);this.maxValue=Math.max(this.maxValue,Math.abs(r))}};Ca.prototype.upload=function(t){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):
this.paintVertexBuffer=t.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))};Ca.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()};var Ma=function(t$jscomp$0,e,r,n,i,a){this.expression=t$jscomp$0;this.uniformNames=e.map(function(t){return"u_"+t+"_t"});this.type=r;this.useIntegerZoom=n;this.zoom=i;this.maxValue=0;this.paintVertexAttributes=e.map(function(t){return{name:"a_"+t,type:"Float32",components:"color"===
r?4:2,offset:0}});this.paintVertexArray=new a};Ma.prototype.populatePaintArray=function(t,e,r,n,i){r=this.expression.evaluate(new ai(this.zoom),e,{},n,[],i);e=this.expression.evaluate(new ai(this.zoom+1),e,{},n,[],i);n=this.paintVertexArray.length;this.paintVertexArray.resize(t);this._setPaintValue(n,t,r,e)};Ma.prototype.updatePaintArray=function(t,e,r,n){var i=this.expression.evaluate({zoom:this.zoom},r,n);r=this.expression.evaluate({zoom:this.zoom+1},r,n);this._setPaintValue(t,e,i,r)};Ma.prototype._setPaintValue=
function(t,e,r,n){if("color"===this.type)for(r=ka(r),n=ka(n);t<e;t++)this.paintVertexArray.emplace(t,r[0],r[1],n[0],n[1]);else{for(;t<e;t++)this.paintVertexArray.emplace(t,r,n);this.maxValue=Math.max(this.maxValue,Math.abs(r),Math.abs(n))}};Ma.prototype.upload=function(t){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=t.createVertexBuffer(this.paintVertexArray,
this.paintVertexAttributes,this.expression.isStateDependent))};Ma.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()};Ma.prototype.setUniform=function(t,e){e=l$jscomp$2(this.expression.interpolationFactor(this.useIntegerZoom?Math.floor(e.zoom):e.zoom,this.zoom,this.zoom+1),0,1);t.set(e)};Ma.prototype.getBinding=function(t,e,r){return new ga(t,e)};var Ea=function(t,e,r,n,i,a){this.expression=t;this.type=e;this.useIntegerZoom=r;this.zoom=n;this.layerId=a;this.zoomInPaintVertexArray=
new i;this.zoomOutPaintVertexArray=new i};Ea.prototype.populatePaintArray=function(t,e,r){var n=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(t);this.zoomOutPaintVertexArray.resize(t);this._setPaintValues(n,t,e.patterns&&e.patterns[this.layerId],r)};Ea.prototype.updatePaintArray=function(t,e,r,n,i){this._setPaintValues(t,e,r.patterns&&r.patterns[this.layerId],i)};Ea.prototype._setPaintValues=function(t,e,r,n){if(n&&r){var i=n[r.min],a=n[r.mid];r=n[r.max];if(i&&a&&r)for(;t<
e;t++)this.zoomInPaintVertexArray.emplace(t,a.tl[0],a.tl[1],a.br[0],a.br[1],i.tl[0],i.tl[1],i.br[0],i.br[1],a.pixelRatio,i.pixelRatio),this.zoomOutPaintVertexArray.emplace(t,a.tl[0],a.tl[1],a.br[0],a.br[1],r.tl[0],r.tl[1],r.br[0],r.br[1],a.pixelRatio,r.pixelRatio)}};Ea.prototype.upload=function(t){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=t.createVertexBuffer(this.zoomInPaintVertexArray,
sa.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=t.createVertexBuffer(this.zoomOutPaintVertexArray,sa.members,this.expression.isStateDependent))};Ea.prototype.destroy=function(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy();this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()};var Ta=function(t,e,r){this.binders={};this._buffers=[];var n=[],i;for(i in t.paint._values)if(r(i)){var a=t.paint.get(i);if(a instanceof hi&&Tr(a.property.specification)){var o=
{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to",
"pattern_from","pixel_ratio_to","pixel_ratio_from"]}[i]||[i.replace(t.type+"-","").replace(/-/g,"_")],s=a.value,u=a.property.specification.type,l=a.property.useIntegerZoom;a=a.property.specification["property-type"];a="cross-faded"===a||"cross-faded-data-driven"===a;if("constant"===s.kind)this.binders[i]=a?new za(s.value,o):new Ia(s.value,o,u),n.push("/u_"+i);else if("source"===s.kind||a){var h=Va(i,u,"source");this.binders[i]=a?new Ea(s,u,l,e,h,t.id):new Ca(s,o,u,h);n.push("/a_"+i)}else a=Va(i,u,
"composite"),this.binders[i]=new Ma(s,o,u,l,e,a),n.push("/z_"+i)}}this.cacheKey=n.sort().join("")};Ta.prototype.getMaxValue=function(t){t=this.binders[t];return t instanceof Ca||t instanceof Ma?t.maxValue:0};Ta.prototype.populatePaintArrays=function(t,e,r,n,i){for(var a in this.binders){var o=this.binders[a];(o instanceof Ca||o instanceof Ma||o instanceof Ea)&&o.populatePaintArray(t,e,r,n,i)}};Ta.prototype.setConstantPatternPositions=function(t,e){for(var r in this.binders){var n=this.binders[r];
n instanceof za&&n.setConstantPatternPositions(t,e)}};Ta.prototype.updatePaintArrays=function(t,e,r,n,i){var a=!1,o;for(o in t)for(var s=0,u=e.getPositions(o);s<u.length;s+=1){var l=u[s],p=r.feature(l.index),c;for(c in this.binders){var h=this.binders[c];(h instanceof Ca||h instanceof Ma||h instanceof Ea)&&!0===h.expression.isStateDependent&&(a=n.paint.get(c),h.expression=a.value,h.updatePaintArray(l.start,l.end,p,t[o],i),a=!0)}}return a};Ta.prototype.defines=function(){var t$jscomp$0=[],e;for(e in this.binders){var r=
this.binders[e];(r instanceof Ia||r instanceof za)&&t$jscomp$0.push.apply(t$jscomp$0,r.uniformNames.map(function(t){return"#define HAS_UNIFORM_"+t}))}return t$jscomp$0};Ta.prototype.getBinderAttributes=function(){var t=[],e;for(e in this.binders){var r=this.binders[e];if(r instanceof Ca||r instanceof Ma)for(var n=0;n<r.paintVertexAttributes.length;n++)t.push(r.paintVertexAttributes[n].name);else if(r instanceof Ea)for(r=0;r<sa.members.length;r++)t.push(sa.members[r].name)}return t};Ta.prototype.getBinderUniforms=
function(){var t=[],e;for(e in this.binders){var r=this.binders[e];if(r instanceof Ia||r instanceof za||r instanceof Ma){var n=0;for(r=r.uniformNames;n<r.length;n+=1)t.push(r[n])}}return t};Ta.prototype.getPaintVertexBuffers=function(){return this._buffers};Ta.prototype.getUniforms=function(t,e){var r=[],n;for(n in this.binders){var i=this.binders[n];if(i instanceof Ia||i instanceof za||i instanceof Ma)for(var a=0,o=i.uniformNames;a<o.length;a+=1){var s=o[a];if(e[s]){var u=i.getBinding(t,e[s],s);
r.push({name:s,property:n,binding:u})}}}return r};Ta.prototype.setUniforms=function(t,e,r,n){for(t=0;t<e.length;t+=1){var o=e[t],s=o.name,u=o.property;this.binders[u].setUniform(o.binding,n,r.get(u),s)}};Ta.prototype.updatePaintBuffers=function(t){for(var e in this._buffers=[],this.binders){var r=this.binders[e];t&&r instanceof Ea?(r=2===t.fromScale?r.zoomInPaintVertexBuffer:r.zoomOutPaintVertexBuffer)&&this._buffers.push(r):(r instanceof Ca||r instanceof Ma)&&r.paintVertexBuffer&&this._buffers.push(r.paintVertexBuffer)}};
Ta.prototype.upload=function(t){for(var e in this.binders){var r=this.binders[e];(r instanceof Ca||r instanceof Ma||r instanceof Ea)&&r.upload(t)}this.updatePaintBuffers()};Ta.prototype.destroy=function(){for(var t in this.binders){var e=this.binders[t];(e instanceof Ca||e instanceof Ma||e instanceof Ea)&&e.destroy()}};var Pa=function(t,e,r){void 0===r&&(r=function(){return!0});this.programConfigurations={};for(var n=0;n<t.length;n+=1){var a=t[n];this.programConfigurations[a.id]=new Ta(a,e,r)}this.needsUpload=
!1;this._featureMap=new ha;this._bufferOffset=0};Pa.prototype.populatePaintArrays=function(t,e,r,n,i,a){for(var o in this.programConfigurations)this.programConfigurations[o].populatePaintArrays(t,e,n,i,a);void 0!==e.id&&this._featureMap.add(e.id,r,this._bufferOffset,t);this._bufferOffset=t;this.needsUpload=!0};Pa.prototype.updatePaintArrays=function(t,e,r,n){for(var i=0;i<r.length;i+=1){var o=r[i];this.needsUpload=this.programConfigurations[o.id].updatePaintArrays(t,this._featureMap,e,o,n)||this.needsUpload}};
Pa.prototype.get=function(t){return this.programConfigurations[t]};Pa.prototype.upload=function(t){if(this.needsUpload){for(var e in this.programConfigurations)this.programConfigurations[e].upload(t);this.needsUpload=!1}};Pa.prototype.destroy=function(){for(var t in this.programConfigurations)this.programConfigurations[t].destroy()};Dn("ConstantBinder",Ia);Dn("CrossFadedConstantBinder",za);Dn("SourceExpressionBinder",Ca);Dn("CrossFadedCompositeBinder",Ea);Dn("CompositeExpressionBinder",Ma);Dn("ProgramConfiguration",
Ta,{omit:["_buffers"]});Dn("ProgramConfigurationSet",Pa);var Fa=Math.pow(2,14)-1,Da=-Fa-1,Oa=function(t$jscomp$0){this.zoom=t$jscomp$0.zoom;this.overscaling=t$jscomp$0.overscaling;this.layers=t$jscomp$0.layers;this.layerIds=this.layers.map(function(t){return t.id});this.index=t$jscomp$0.index;this.hasPattern=!1;this.layoutVertexArray=new Ii;this.indexArray=new Ri;this.segments=new aa;this.programConfigurations=new Pa(t$jscomp$0.layers,t$jscomp$0.zoom);this.stateDependentLayerIds=this.layers.filter(function(t){return t.isStateDependent()}).map(function(t){return t.id})};
Oa.prototype.populate=function(t$jscomp$0,e$jscomp$0,r){var n=this.layers[0],i=[],a=null;"circle"===n.type&&(a=n.layout.get("circle-sort-key"));for(n=0;n<t$jscomp$0.length;n+=1){var u=t$jscomp$0[n],l=u.feature,p=u.id,c=u.index;u=u.sourceLayerIndex;var f=this.layers[0]._featureFilter.needGeometry,y={type:l.type,id:p,properties:l.properties,geometry:f?La(l):[]};this.layers[0]._featureFilter.filter(new ai(this.zoom),y,r)&&(f||(y.geometry=La(l)),f=a?a.evaluate(y,{},r):void 0,i.push({id:p,properties:l.properties,
type:l.type,sourceLayerIndex:u,index:c,geometry:y.geometry,patterns:{},sortKey:f}))}a&&i.sort(function(t,e){return t.sortKey-e.sortKey});for(a=0;a<i.length;a+=1)n=i[a],l=n.geometry,p=n.index,c=n.sourceLayerIndex,u=t$jscomp$0[p].feature,this.addFeature(n,l,p,r),e$jscomp$0.featureIndex.insert(u,l,p,c,this.index)};Oa.prototype.update=function(t,e,r){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,e,this.stateDependentLayers,r)};Oa.prototype.isEmpty=function(){return 0===
this.layoutVertexArray.length};Oa.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload};Oa.prototype.upload=function(t){this.uploaded||(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,ia),this.indexBuffer=t.createIndexBuffer(this.indexArray));this.programConfigurations.upload(t);this.uploaded=!0};Oa.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),
this.segments.destroy())};Oa.prototype.addFeature=function(t,e,r,n){for(var i=0;i<e.length;i+=1)for(var o=0,s=e[i];o<s.length;o+=1){var u=s[o],l=u.x;u=u.y;if(!(0>l||8192<=l||0>u||8192<=u)){var c=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,t.sortKey),h=c.vertexLength;Ra(this.layoutVertexArray,l,u,-1,-1);Ra(this.layoutVertexArray,l,u,1,-1);Ra(this.layoutVertexArray,l,u,1,1);Ra(this.layoutVertexArray,l,u,-1,1);this.indexArray.emplaceBack(h,h+1,h+2);this.indexArray.emplaceBack(h,
h+3,h+2);c.vertexLength+=4;c.primitiveLength+=2}}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,r,{},n)};Dn("CircleBucket",Oa,{omit:["layers"]});var to=new xi({"circle-sort-key":new di(zt.layout_circle["circle-sort-key"])}),eo={paint:new xi({"circle-radius":new di(zt.paint_circle["circle-radius"]),"circle-color":new di(zt.paint_circle["circle-color"]),"circle-blur":new di(zt.paint_circle["circle-blur"]),"circle-opacity":new di(zt.paint_circle["circle-opacity"]),"circle-translate":new yi(zt.paint_circle["circle-translate"]),
"circle-translate-anchor":new yi(zt.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new yi(zt.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new yi(zt.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new di(zt.paint_circle["circle-stroke-width"]),"circle-stroke-color":new di(zt.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new di(zt.paint_circle["circle-stroke-opacity"])}),layout:to},ro="undefined"!=typeof Float32Array?Float32Array:Array;Math.hypot||
(Math.hypot=function(){for(var t=arguments,e=0,r=arguments.length;r--;)e+=t[r]*t[r];return Math.sqrt(e)});var ao=new ro(3);ro!=Float32Array&&(ao[0]=0,ao[1]=0,ao[2]=0);(function(){var t=new ro(4);ro!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[3]=0)})();var uo=(function(){var t=new ro(2);ro!=Float32Array&&(t[0]=0,t[1]=0)}(),function(t$jscomp$2){function e$jscomp$1(e){t$jscomp$2.call(this,e,eo)}return t$jscomp$2&&(e$jscomp$1.__proto__=t$jscomp$2),(e$jscomp$1.prototype=Object.create(t$jscomp$2&&t$jscomp$2.prototype)).constructor=
e$jscomp$1,e$jscomp$1.prototype.createBucket=function(t){return new Oa(t)},e$jscomp$1.prototype.queryRadius=function(t){return $a("circle-radius",this,t)+$a("circle-stroke-width",this,t)+Wa(this.paint.get("circle-translate"))},e$jscomp$1.prototype.queryIntersectsFeature=function(t$jscomp$1,e$jscomp$0,r,n,i,a,o,s){t$jscomp$1=Qa(t$jscomp$1,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),a.angle,o);i=this.paint.get("circle-radius").evaluate(e$jscomp$0,r)+this.paint.get("circle-stroke-width").evaluate(e$jscomp$0,
r);r=(e$jscomp$0="map"===this.paint.get("circle-pitch-alignment"))?t$jscomp$1:function(t$jscomp$0,e){return t$jscomp$0.map(function(t){return lo(t,e)})}(t$jscomp$1,s);o=e$jscomp$0?i*o:i;for(t$jscomp$1=0;t$jscomp$1<n.length;t$jscomp$1+=1){i=0;for(var m=n[t$jscomp$1];i<m.length;i+=1){var v=m[i],g=e$jscomp$0?v:lo(v,s),x=o;v=so([],[v.x,v.y,0,1],s);if("viewport"===this.paint.get("circle-pitch-scale")&&"map"===this.paint.get("circle-pitch-alignment")?x*=v[3]/a.cameraToCenterDistance:"map"===this.paint.get("circle-pitch-scale")&&
"viewport"===this.paint.get("circle-pitch-alignment")&&(x*=a.cameraToCenterDistance/v[3]),ja(r,g,x))return!0}}return!1},e$jscomp$1}(bi)),po=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e}(Oa);Dn("HeatmapBucket",po,{omit:["layers"]});var yo=function(t,e){co(this,t,1,e)};yo.prototype.resize=function(t){ho(this,t,1)};yo.prototype.clone=function(){return new yo({width:this.width,height:this.height},new Uint8Array(this.data))};
yo.copy=function(t,e,r,n,i){fo(t,e,r,n,i,1)};var mo=function(t,e){co(this,t,4,e)};mo.prototype.resize=function(t){ho(this,t,4)};mo.prototype.replace=function(t,e){e?this.data.set(t):this.data=t instanceof Uint8ClampedArray?new Uint8Array(t.buffer):t};mo.prototype.clone=function(){return new mo({width:this.width,height:this.height},new Uint8Array(this.data))};mo.copy=function(t,e,r,n,i){fo(t,e,r,n,i,4)};Dn("AlphaImage",yo);Dn("RGBAImage",mo);var vo={paint:new xi({"heatmap-radius":new di(zt.paint_heatmap["heatmap-radius"]),
"heatmap-weight":new di(zt.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new yi(zt.paint_heatmap["heatmap-intensity"]),"heatmap-color":new gi(zt.paint_heatmap["heatmap-color"]),"heatmap-opacity":new yi(zt.paint_heatmap["heatmap-opacity"])})},xo=function(t$jscomp$0){function e$jscomp$0(e){t$jscomp$0.call(this,e,vo);this._updateColorRamp()}return t$jscomp$0&&(e$jscomp$0.__proto__=t$jscomp$0),(e$jscomp$0.prototype=Object.create(t$jscomp$0&&t$jscomp$0.prototype)).constructor=e$jscomp$0,e$jscomp$0.prototype.createBucket=
function(t){return new po(t)},e$jscomp$0.prototype._handleSpecialPaintPropertyUpdate=function(t){"heatmap-color"===t&&this._updateColorRamp()},e$jscomp$0.prototype._updateColorRamp=function(){this.colorRamp=go(this._transitionablePaint._values["heatmap-color"].value.expression,"heatmapDensity");this.colorRampTexture=null},e$jscomp$0.prototype.resize=function(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)},e$jscomp$0.prototype.queryRadius=function(){return 0},e$jscomp$0.prototype.queryIntersectsFeature=
function(){return!1},e$jscomp$0.prototype.hasOffscreenPass=function(){return 0!==this.paint.get("heatmap-opacity")&&"none"!==this.visibility},e$jscomp$0}(bi),bo={paint:new xi({"hillshade-illumination-direction":new yi(zt.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new yi(zt.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new yi(zt.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new yi(zt.paint_hillshade["hillshade-shadow-color"]),
"hillshade-highlight-color":new yi(zt.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new yi(zt.paint_hillshade["hillshade-accent-color"])})},wo=function(t){function e$jscomp$0(e){t.call(this,e,bo)}return t&&(e$jscomp$0.__proto__=t),(e$jscomp$0.prototype=Object.create(t&&t.prototype)).constructor=e$jscomp$0,e$jscomp$0.prototype.hasOffscreenPass=function(){return 0!==this.paint.get("hillshade-exaggeration")&&"none"!==this.visibility},e$jscomp$0}(bi),_o=Si([{name:"a_pos",components:2,
type:"Int16"}],4).members;ko.deviation=function(t,e,r,n){var i=e&&e.length,a=Math.abs(Yo(t,0,i?e[0]*r:t.length,r));if(i){i=0;for(var s=e.length;i<s;i++)a-=Math.abs(Yo(t,e[i]*r,i<s-1?e[i+1]*r:t.length,r))}for(i=e=0;i<n.length;i+=3){s=n[i]*r;var p=n[i+1]*r,c=n[i+2]*r;e+=Math.abs((t[s]-t[c])*(t[p+1]-t[s+1])-(t[s]-t[p])*(t[c+1]-t[s+1]))}return 0===a&&0===e?0:Math.abs((e-a)/a)};ko.flatten=function(t){for(var e=t[0][0].length,r={vertices:[],holes:[],dimensions:e},n=0,i=0;i<t.length;i++){for(var a=0;a<t[i].length;a++)for(var o=
0;o<e;o++)r.vertices.push(t[i][a][o]);0<i&&r.holes.push(n+=t[i-1].length)}return r};ko.default=ko;var is=function(t$jscomp$0){this.zoom=t$jscomp$0.zoom;this.overscaling=t$jscomp$0.overscaling;this.layers=t$jscomp$0.layers;this.layerIds=this.layers.map(function(t){return t.id});this.index=t$jscomp$0.index;this.hasPattern=!1;this.patternFeatures=[];this.layoutVertexArray=new Ii;this.indexArray=new Ri;this.indexArray2=new Ki;this.programConfigurations=new Pa(t$jscomp$0.layers,t$jscomp$0.zoom);this.segments=
new aa;this.segments2=new aa;this.stateDependentLayerIds=this.layers.filter(function(t){return t.isStateDependent()}).map(function(t){return t.id})};is.prototype.populate=function(t$jscomp$0,e$jscomp$0,r){this.hasPattern=rs("fill",this.layers,e$jscomp$0);for(var n=this.layers[0].layout.get("fill-sort-key"),i=[],a=0;a<t$jscomp$0.length;a+=1){var s=t$jscomp$0[a],u=s.feature,l=s.id,p=s.index;s=s.sourceLayerIndex;var h=this.layers[0]._featureFilter.needGeometry,f={type:u.type,id:l,properties:u.properties,
geometry:h?La(u):[]};this.layers[0]._featureFilter.filter(new ai(this.zoom),f,r)&&(h||(f.geometry=La(u)),h=n?n.evaluate(f,{},r,e$jscomp$0.availableImages):void 0,i.push({id:l,properties:u.properties,type:u.type,sourceLayerIndex:s,index:p,geometry:f.geometry,patterns:{},sortKey:h}))}n&&i.sort(function(t,e){return t.sortKey-e.sortKey});for(n=0;n<i.length;n+=1)p=i[n],a=p.geometry,u=p.index,l=p.sourceLayerIndex,this.hasPattern?(p=ns("fill",this.layers,p,this.zoom,e$jscomp$0),this.patternFeatures.push(p)):
this.addFeature(p,a,u,r,{}),e$jscomp$0.featureIndex.insert(t$jscomp$0[u].feature,a,u,l,this.index)};is.prototype.update=function(t,e,r){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,e,this.stateDependentLayers,r)};is.prototype.addFeatures=function(t,e,r){t=0;for(var i=this.patternFeatures;t<i.length;t+=1){var a=i[t];this.addFeature(a,a.geometry,a.index,e,r)}};is.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length};is.prototype.uploadPending=function(){return!this.uploaded||
this.programConfigurations.needsUpload};is.prototype.upload=function(t){this.uploaded||(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,_o),this.indexBuffer=t.createIndexBuffer(this.indexArray),this.indexBuffer2=t.createIndexBuffer(this.indexArray2));this.programConfigurations.upload(t);this.uploaded=!0};is.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),
this.segments.destroy(),this.segments2.destroy())};is.prototype.addFeature=function(t,e,r,n,i){var a=0;for(e=ts(e,500);a<e.length;a+=1){for(var s=e[a],u=0,l=0,p=s;l<p.length;l+=1)u+=p[l].length;l=this.segments.prepareSegment(u,this.layoutVertexArray,this.indexArray);p=l.vertexLength;for(var f=[],y=[],d=0,m=s;d<m.length;d+=1){var v=m[d];if(0!==v.length){v!==s[0]&&y.push(f.length/2);var g=this.segments2.prepareSegment(v.length,this.layoutVertexArray,this.indexArray2),x=g.vertexLength;this.layoutVertexArray.emplaceBack(v[0].x,
v[0].y);this.indexArray2.emplaceBack(x+v.length-1,x);f.push(v[0].x);f.push(v[0].y);for(var b=1;b<v.length;b++)this.layoutVertexArray.emplaceBack(v[b].x,v[b].y),this.indexArray2.emplaceBack(x+b-1,x+b),f.push(v[b].x),f.push(v[b].y);g.vertexLength+=v.length;g.primitiveLength+=v.length}}s=ko(f,y);for(f=0;f<s.length;f+=3)this.indexArray.emplaceBack(p+s[f],p+s[f+1],p+s[f+2]);l.vertexLength+=u;l.primitiveLength+=s.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,r,
i,n)};Dn("FillBucket",is,{omit:["layers","patternFeatures"]});var as=new xi({"fill-sort-key":new di(zt.layout_fill["fill-sort-key"])}),os={paint:new xi({"fill-antialias":new yi(zt.paint_fill["fill-antialias"]),"fill-opacity":new di(zt.paint_fill["fill-opacity"]),"fill-color":new di(zt.paint_fill["fill-color"]),"fill-outline-color":new di(zt.paint_fill["fill-outline-color"]),"fill-translate":new yi(zt.paint_fill["fill-translate"]),"fill-translate-anchor":new yi(zt.paint_fill["fill-translate-anchor"]),
"fill-pattern":new mi(zt.paint_fill["fill-pattern"])}),layout:as},ss=function(t$jscomp$0){function e$jscomp$0(e){t$jscomp$0.call(this,e,os)}return t$jscomp$0&&(e$jscomp$0.__proto__=t$jscomp$0),(e$jscomp$0.prototype=Object.create(t$jscomp$0&&t$jscomp$0.prototype)).constructor=e$jscomp$0,e$jscomp$0.prototype.recalculate=function(e,r){t$jscomp$0.prototype.recalculate.call(this,e,r);e=this.paint._values["fill-outline-color"];"constant"===e.value.kind&&void 0===e.value.value&&(this.paint._values["fill-outline-color"]=
this.paint._values["fill-color"])},e$jscomp$0.prototype.createBucket=function(t){return new is(t)},e$jscomp$0.prototype.queryRadius=function(){return Wa(this.paint.get("fill-translate"))},e$jscomp$0.prototype.queryIntersectsFeature=function(t,e,r,n,i,a,o){return qa(Qa(t,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),a.angle,o),n)},e$jscomp$0.prototype.isTileClipped=function(){return!0},e$jscomp$0}(bi),us=Si([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,
type:"Int16"}],4).members;ps.types=["Unknown","Point","LineString","Polygon"];ps.prototype.loadGeometry=function(){var t=this._pbf;t.pos=this._geometry;for(var e,r=t.readVarint()+t.pos,n=1,a=0,o=0,s=0,u=[];t.pos<r;)if(0>=a&&(a=t.readVarint(),n=7&a,a>>=3),a--,1===n||2===n)o+=t.readSVarint(),s+=t.readSVarint(),1===n&&(e&&u.push(e),e=[]),e.push(new i$jscomp$2(o,s));else{if(7!==n)throw Error("unknown command "+n);e&&e.push(e[0].clone())}return e&&u.push(e),u};ps.prototype.bbox=function(){var t=this._pbf;
t.pos=this._geometry;for(var e=t.readVarint()+t.pos,r=1,n=0,i=0,a=0,o=1/0,s=-1/0,u=1/0,l=-1/0;t.pos<e;)if(0>=n&&(n=t.readVarint(),r=7&n,n>>=3),n--,1===r||2===r)(i+=t.readSVarint())<o&&(o=i),i>s&&(s=i),(a+=t.readSVarint())<u&&(u=a),a>l&&(l=a);else if(7!==r)throw Error("unknown command "+r);return[o,u,s,l]};ps.prototype.toGeoJSON=function(t$jscomp$1,e$jscomp$1,r$jscomp$0){function p(t){for(var e=0;e<t.length;e++){var r=t[e];t[e]=[360*(r.x+o$jscomp$1)/a$jscomp$1-180,360/Math.PI*Math.atan(Math.exp((180-
360*(r.y+s)/a$jscomp$1)*Math.PI/180))-90]}}var a$jscomp$1=this.extent*Math.pow(2,r$jscomp$0),o$jscomp$1=this.extent*t$jscomp$1,s=this.extent*e$jscomp$1;e$jscomp$1=this.loadGeometry();r$jscomp$0=ps.types[this.type];switch(this.type){case 1:var i$jscomp$1=[];for(t$jscomp$1=0;t$jscomp$1<e$jscomp$1.length;t$jscomp$1++)i$jscomp$1[t$jscomp$1]=e$jscomp$1[t$jscomp$1][0];p(e$jscomp$1=i$jscomp$1);break;case 2:for(t$jscomp$1=0;t$jscomp$1<e$jscomp$1.length;t$jscomp$1++)p(e$jscomp$1[t$jscomp$1]);break;case 3:for(e$jscomp$1=
function(t$jscomp$0){var e=t$jscomp$0.length;if(1>=e)return[t$jscomp$0];for(var r,n,i=[],a=0;a<e;a++){for(var o,e$jscomp$0=o=void 0,t=t$jscomp$0[a],n$jscomp$0=0,i$jscomp$0=0,a$jscomp$0=t.length,o$jscomp$0=a$jscomp$0-1;i$jscomp$0<a$jscomp$0;o$jscomp$0=i$jscomp$0++)n$jscomp$0+=((o=t[o$jscomp$0]).x-(e$jscomp$0=t[i$jscomp$0]).x)*(e$jscomp$0.y+o.y);o=n$jscomp$0;0!==o&&(void 0===n&&(n=0>o),n===0>o?(r&&i.push(r),r=[t$jscomp$0[a]]):r.push(t$jscomp$0[a]))}return r&&i.push(r),i}(e$jscomp$1),t$jscomp$1=0;t$jscomp$1<
e$jscomp$1.length;t$jscomp$1++)for(i$jscomp$1=0;i$jscomp$1<e$jscomp$1[t$jscomp$1].length;i$jscomp$1++)p(e$jscomp$1[t$jscomp$1][i$jscomp$1])}1===e$jscomp$1.length?e$jscomp$1=e$jscomp$1[0]:r$jscomp$0="Multi"+r$jscomp$0;t$jscomp$1={type:"Feature",geometry:{type:r$jscomp$0,coordinates:e$jscomp$1},properties:this.properties};return"id"in this&&(t$jscomp$1.id=this.id),t$jscomp$1};var fs=ys;ys.prototype.feature=function(t){if(0>t||t>=this._features.length)throw Error("feature index out of bounds");this._pbf.pos=
this._features[t];t=this._pbf.readVarint()+this._pbf.pos;return new ps(this._pbf,t,this.extent,this._keys,this._values)};var vs={VectorTile:function(t,e){this.layers=t.readFields(ms,{},e)},VectorTileFeature:ps,VectorTileLayer:fs},gs=vs.VectorTileFeature.types,xs=Math.pow(2,13),ws=function(t$jscomp$0){this.zoom=t$jscomp$0.zoom;this.overscaling=t$jscomp$0.overscaling;this.layers=t$jscomp$0.layers;this.layerIds=this.layers.map(function(t){return t.id});this.index=t$jscomp$0.index;this.hasPattern=!1;
this.layoutVertexArray=new Ci;this.indexArray=new Ri;this.programConfigurations=new Pa(t$jscomp$0.layers,t$jscomp$0.zoom);this.segments=new aa;this.stateDependentLayerIds=this.layers.filter(function(t){return t.isStateDependent()}).map(function(t){return t.id})};ws.prototype.populate=function(t,e,r){this.features=[];this.hasPattern=rs("fill-extrusion",this.layers,e);for(var n=0;n<t.length;n+=1){var a=t[n],o=a.feature,s=a.id,u=a.index;a=a.sourceLayerIndex;var p=this.layers[0]._featureFilter.needGeometry,
c={type:o.type,id:s,properties:o.properties,geometry:p?La(o):[]};this.layers[0]._featureFilter.filter(new ai(this.zoom),c,r)&&(s={id:s,sourceLayerIndex:a,index:u,geometry:p?c.geometry:La(o),properties:o.properties,type:o.type,patterns:{}},void 0!==o.id&&(s.id=o.id),this.hasPattern?this.features.push(ns("fill-extrusion",this.layers,s,this.zoom,e)):this.addFeature(s,s.geometry,u,r,{}),e.featureIndex.insert(o,s.geometry,u,a,this.index,!0))}};ws.prototype.addFeatures=function(t,e,r){t=0;for(var i=this.features;t<
i.length;t+=1){var a=i[t];this.addFeature(a,a.geometry,a.index,e,r)}};ws.prototype.update=function(t,e,r){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,e,this.stateDependentLayers,r)};ws.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length};ws.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload};ws.prototype.upload=function(t){this.uploaded||(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,
us),this.indexBuffer=t.createIndexBuffer(this.indexArray));this.programConfigurations.upload(t);this.uploaded=!0};ws.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())};ws.prototype.addFeature=function(t$jscomp$0,e,r,n,i){var a=0;for(e=ts(e,500);a<e.length;a+=1){for(var s=e[a],u=0,l=0,p=s;l<p.length;l+=1)u+=p[l].length;l=this.segments.prepareSegment(4,this.layoutVertexArray,
this.indexArray);p=0;for(var f=s;p<f.length;p+=1){var y=f[p];if(0!==y.length&&!((P=y).every(function(t){return 0>t.x})||P.every(function(t){return 8192<t.x})||P.every(function(t){return 0>t.y})||P.every(function(t){return 8192<t.y})))for(var d=0,m=0;m<y.length;m++){var v=y[m];if(1<=m){var g=y[m-1];if(!(v.x===g.x&&(0>v.x||8192<v.x)||v.y===g.y&&(0>v.y||8192<v.y))){l.vertexLength+4>aa.MAX_VERTEX_ARRAY_LENGTH&&(l=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));var x=v.sub(g)._perp()._unit(),
b=g.dist(v);32768<d+b&&(d=0);bs(this.layoutVertexArray,v.x,v.y,x.x,x.y,0,0,d);bs(this.layoutVertexArray,v.x,v.y,x.x,x.y,0,1,d);bs(this.layoutVertexArray,g.x,g.y,x.x,x.y,0,0,d+=b);bs(this.layoutVertexArray,g.x,g.y,x.x,x.y,0,1,d);v=l.vertexLength;this.indexArray.emplaceBack(v,v+2,v+1);this.indexArray.emplaceBack(v+1,v+2,v+3);l.vertexLength+=4;l.primitiveLength+=2}}}}if(l.vertexLength+u>aa.MAX_VERTEX_ARRAY_LENGTH&&(l=this.segments.prepareSegment(u,this.layoutVertexArray,this.indexArray)),"Polygon"===
gs[t$jscomp$0.type]){f=[];y=[];p=l.vertexLength;d=0;for(m=s;d<m.length;d+=1)if(v=m[d],0!==v.length)for(v!==s[0]&&y.push(f.length/2),g=0;g<v.length;g++)x=v[g],bs(this.layoutVertexArray,x.x,x.y,0,0,1,1,0),f.push(x.x),f.push(x.y);s=ko(f,y);for(f=0;f<s.length;f+=3)this.indexArray.emplaceBack(p+s[f],p+s[f+2],p+s[f+1]);l.primitiveLength+=s.length/3;l.vertexLength+=u}}var P;this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t$jscomp$0,r,i,n)};Dn("FillExtrusionBucket",ws,{omit:["layers",
"features"]});var As={paint:new xi({"fill-extrusion-opacity":new yi(zt["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new di(zt["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new yi(zt["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new yi(zt["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new mi(zt["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new di(zt["paint_fill-extrusion"]["fill-extrusion-height"]),
"fill-extrusion-base":new di(zt["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new yi(zt["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})},Ss=function(t$jscomp$1){function e$jscomp$1(e){t$jscomp$1.call(this,e,As)}return t$jscomp$1&&(e$jscomp$1.__proto__=t$jscomp$1),(e$jscomp$1.prototype=Object.create(t$jscomp$1&&t$jscomp$1.prototype)).constructor=e$jscomp$1,e$jscomp$1.prototype.createBucket=function(t){return new ws(t)},e$jscomp$1.prototype.queryRadius=
function(){return Wa(this.paint.get("fill-extrusion-translate"))},e$jscomp$1.prototype.is3D=function(){return!0},e$jscomp$1.prototype.queryIntersectsFeature=function(t$jscomp$0,e$jscomp$0,r$jscomp$0,n$jscomp$0,a$jscomp$0,o$jscomp$0,s$jscomp$0,u$jscomp$0){a$jscomp$0=Qa(t$jscomp$0,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),o$jscomp$0.angle,s$jscomp$0);t$jscomp$0=this.paint.get("fill-extrusion-height").evaluate(e$jscomp$0,r$jscomp$0);e$jscomp$0=this.paint.get("fill-extrusion-base").evaluate(e$jscomp$0,
r$jscomp$0);r$jscomp$0=function(t,e,r,n){r=[];for(n=0;n<t.length;n+=1){var u=t[n];u=[u.x,u.y,0,1];so(u,u,e);r.push(new i$jscomp$2(u[0]/u[3],u[1]/u[3]))}return r}(a$jscomp$0,u$jscomp$0);n$jscomp$0=function(t,e,r,n){var a=[],o=[],s=n[8]*e,u=n[9]*e,l=n[10]*e;e*=n[11];var c=n[8]*r,h=n[9]*r,f=n[10]*r;r*=n[11];for(var d=0;d<t.length;d+=1){for(var v=[],g=[],x=0,b=t[d];x<b.length;x+=1){var w=b[x],_=w.x,A=w.y;w=n[0]*_+n[4]*A+n[12];var k=n[1]*_+n[5]*A+n[13],I=n[2]*_+n[6]*A+n[14],z=n[3]*_+n[7]*A+n[15];_=I+l;
A=z+e;var E=w+c,T=k+h;I+=f;z+=r;w=new i$jscomp$2((w+s)/A,(k+u)/A);w.z=_/A;v.push(w);w=new i$jscomp$2(E/z,T/z);w.z=I/z;g.push(w)}a.push(v);o.push(g)}return[a,o]}(n$jscomp$0,e$jscomp$0,t$jscomp$0,u$jscomp$0);return function(t,e,r){var n=1/0;qa(r,e)&&(n=Is(r,e[0]));for(var i=0;i<e.length;i++)for(var a=e[i],o=t[i],s=0;s<a.length-1;s++){var u=a[s];u=[u,a[s+1],o[s+1],o[s],u];Ua(r,u)&&(n=Math.min(n,Is(r,u)))}return n!==1/0&&n}(n$jscomp$0[0],n$jscomp$0[1],r$jscomp$0)},e$jscomp$1}(bi),zs=Si([{name:"a_pos_normal",
components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4).members,Cs=vs.VectorTileFeature.types,Ms=Math.cos(Math.PI/180*37.5),Es=Math.pow(2,14)/.5,Ts=function(t$jscomp$0){this.zoom=t$jscomp$0.zoom;this.overscaling=t$jscomp$0.overscaling;this.layers=t$jscomp$0.layers;this.layerIds=this.layers.map(function(t){return t.id});this.index=t$jscomp$0.index;this.hasPattern=!1;this.patternFeatures=[];this.layoutVertexArray=new Mi;this.indexArray=new Ri;this.programConfigurations=new Pa(t$jscomp$0.layers,
t$jscomp$0.zoom);this.segments=new aa;this.stateDependentLayerIds=this.layers.filter(function(t){return t.isStateDependent()}).map(function(t){return t.id})};Ts.prototype.populate=function(t$jscomp$0,e$jscomp$0,r){this.hasPattern=rs("line",this.layers,e$jscomp$0);for(var n=this.layers[0].layout.get("line-sort-key"),i=[],a=0;a<t$jscomp$0.length;a+=1){var s=t$jscomp$0[a],u=s.feature,l=s.id,p=s.index;s=s.sourceLayerIndex;var h=this.layers[0]._featureFilter.needGeometry,f={type:u.type,id:l,properties:u.properties,
geometry:h?La(u):[]};this.layers[0]._featureFilter.filter(new ai(this.zoom),f,r)&&(h||(f.geometry=La(u)),h=n?n.evaluate(f,{},r):void 0,i.push({id:l,properties:u.properties,type:u.type,sourceLayerIndex:s,index:p,geometry:f.geometry,patterns:{},sortKey:h}))}n&&i.sort(function(t,e){return t.sortKey-e.sortKey});for(n=0;n<i.length;n+=1)p=i[n],a=p.geometry,u=p.index,l=p.sourceLayerIndex,this.hasPattern?(p=ns("line",this.layers,p,this.zoom,e$jscomp$0),this.patternFeatures.push(p)):this.addFeature(p,a,u,
r,{}),e$jscomp$0.featureIndex.insert(t$jscomp$0[u].feature,a,u,l,this.index)};Ts.prototype.update=function(t,e,r){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,e,this.stateDependentLayers,r)};Ts.prototype.addFeatures=function(t,e,r){t=0;for(var i=this.patternFeatures;t<i.length;t+=1){var a=i[t];this.addFeature(a,a.geometry,a.index,e,r)}};Ts.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length};Ts.prototype.uploadPending=function(){return!this.uploaded||
this.programConfigurations.needsUpload};Ts.prototype.upload=function(t){this.uploaded||(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,zs),this.indexBuffer=t.createIndexBuffer(this.indexArray));this.programConfigurations.upload(t);this.uploaded=!0};Ts.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())};Ts.prototype.addFeature=function(t,e,r,n,i){var a=
this.layers[0].layout,o=a.get("line-join").evaluate(t,{}),s=a.get("line-cap"),u=a.get("line-miter-limit");a=a.get("line-round-limit");for(var p=0;p<e.length;p+=1)this.addLine(e[p],t,o,s,u,a);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,r,i,n)};Ts.prototype.addLine=function(t,e,r,n,i,a){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,e.properties&&e.properties.hasOwnProperty("mapbox_clip_start")&&e.properties.hasOwnProperty("mapbox_clip_end")){this.clipStart=
+e.properties.mapbox_clip_start;this.clipEnd=+e.properties.mapbox_clip_end;for(var o=0;o<t.length-1;o++)this.totalDistance+=t[o].dist(t[o+1]);this.updateScaledDistance()}e="Polygon"===Cs[e.type];for(o=t.length;2<=o&&t[o-1].equals(t[o-2]);)o--;for(var l=0;l<o-1&&t[l].equals(t[l+1]);)l++;if(!(o<(e?3:2))){"bevel"===r&&(i=1.05);var p,c=16>=this.overscaling?122880/(512*this.overscaling):0,h=this.segments.prepareSegment(10*o,this.layoutVertexArray,this.indexArray),f=void 0,y=void 0,d=void 0,m=void 0;this.e1=
this.e2=-1;e&&(m=t[l].sub(p=t[o-2])._unit()._perp());for(var v=l;v<o;v++)if(!(y=v===o-1?e?t[l+1]:void 0:t[v+1])||!t[v].equals(y)){m&&(d=m);p&&(f=p);p=t[v];m=y?y.sub(p)._unit()._perp():d;var g=(d=d||m).add(m);0===g.x&&0===g.y||g._unit();var x=d.x*m.x+d.y*m.y,b=g.x*m.x+g.y*m.y,w=0!==b?1/b:1/0,_=2*Math.sqrt(2-2*b);b=b<Ms&&f&&y;var S=0<d.x*m.y-d.y*m.x;if(b&&v>l){var k=p.dist(f);k>2*c&&(k=p.sub(p.sub(f)._mult(c/k)._round()),this.updateDistance(f,k),this.addCurrentVertex(k,d,0,0,h),f=k)}var z=f&&y;k=z?
r:e?"butt":n;if(z&&"round"===k&&(w<a?k="miter":2>=w&&(k="fakeround")),"miter"===k&&w>i&&(k="bevel"),"bevel"===k&&(2<w&&(k="flipbevel"),w<i&&(k="miter")),f&&this.updateDistance(f,p),"miter"===k)g._mult(w),this.addCurrentVertex(p,g,0,0,h);else if("flipbevel"===k)100<w?g=m.mult(-1):(x=w*d.add(m).mag()/d.sub(m).mag(),g._perp()._mult(x*(S?-1:1))),this.addCurrentVertex(p,g,0,0,h),this.addCurrentVertex(p,g.mult(-1),0,0,h);else if("bevel"===k||"fakeround"===k){w=-Math.sqrt(w*w-1);g=S?w:0;w=S?0:w;if(f&&this.addCurrentVertex(p,
d,g,w,h),"fakeround"===k)for(_=Math.round(180*_/Math.PI/20),k=1;k<_;k++){z=k/_;if(.5!==z){var D=z-.5;z+=z*D*(z-1)*((1.0904+x*(x*(3.55645-1.43519*x)-3.2452))*D*D+(.848013+x*(.215638*x-1.06021)))}z=m.sub(d)._mult(z)._add(d)._unit()._mult(S?-1:1);this.addHalfVertex(p,z.x,z.y,!1,S,0,h)}y&&this.addCurrentVertex(p,m,-g,-w,h)}else"butt"===k?this.addCurrentVertex(p,g,0,0,h):"square"===k?(x=f?1:-1,this.addCurrentVertex(p,g,x,x,h)):"round"===k&&(f&&(this.addCurrentVertex(p,d,0,0,h),this.addCurrentVertex(p,
d,1,1,h,!0)),y&&(this.addCurrentVertex(p,m,-1,-1,h,!0),this.addCurrentVertex(p,m,0,0,h)));b&&v<o-1&&(b=p.dist(y),b>2*c&&(b=p.add(y.sub(p)._mult(c/b)._round()),this.updateDistance(p,b),this.addCurrentVertex(b,m,0,0,h),p=b))}}};Ts.prototype.addCurrentVertex=function(t,e,r,n,i,a){void 0===a&&(a=!1);var o=e.y*n-e.x,s=-e.y-e.x*n;this.addHalfVertex(t,e.x+e.y*r,e.y-e.x*r,a,!1,r,i);this.addHalfVertex(t,o,s,a,!0,-n,i);this.distance>Es/2&&0===this.totalDistance&&(this.distance=0,this.addCurrentVertex(t,e,r,
n,i,a))};Ts.prototype.addHalfVertex=function(t,e,r,n,i,a,o){var s=.5*this.scaledDistance;this.layoutVertexArray.emplaceBack((t.x<<1)+(n?1:0),(t.y<<1)+(i?1:0),Math.round(63*e)+128,Math.round(63*r)+128,1+(0===a?0:0>a?-1:1)|(63&s)<<2,s>>6);t=o.vertexLength++;0<=this.e1&&0<=this.e2&&(this.indexArray.emplaceBack(this.e1,this.e2,t),o.primitiveLength++);i?this.e2=t:this.e1=t};Ts.prototype.updateScaledDistance=function(){this.scaledDistance=0<this.totalDistance?(this.clipStart+(this.clipEnd-this.clipStart)*
this.distance/this.totalDistance)*(Es-1):this.distance};Ts.prototype.updateDistance=function(t,e){this.distance+=t.dist(e);this.updateScaledDistance()};Dn("LineBucket",Ts,{omit:["layers","patternFeatures"]});var Ps=new xi({"line-cap":new yi(zt.layout_line["line-cap"]),"line-join":new di(zt.layout_line["line-join"]),"line-miter-limit":new yi(zt.layout_line["line-miter-limit"]),"line-round-limit":new yi(zt.layout_line["line-round-limit"]),"line-sort-key":new di(zt.layout_line["line-sort-key"])}),Bs=
{paint:new xi({"line-opacity":new di(zt.paint_line["line-opacity"]),"line-color":new di(zt.paint_line["line-color"]),"line-translate":new yi(zt.paint_line["line-translate"]),"line-translate-anchor":new yi(zt.paint_line["line-translate-anchor"]),"line-width":new di(zt.paint_line["line-width"]),"line-gap-width":new di(zt.paint_line["line-gap-width"]),"line-offset":new di(zt.paint_line["line-offset"]),"line-blur":new di(zt.paint_line["line-blur"]),"line-dasharray":new vi(zt.paint_line["line-dasharray"]),
"line-pattern":new mi(zt.paint_line["line-pattern"]),"line-gradient":new gi(zt.paint_line["line-gradient"])}),layout:Ps},Vs=new (function(t){function e$jscomp$0(){t.apply(this,arguments)}return t&&(e$jscomp$0.__proto__=t),(e$jscomp$0.prototype=Object.create(t&&t.prototype)).constructor=e$jscomp$0,e$jscomp$0.prototype.possiblyEvaluate=function(e,r){return r=new ai(Math.floor(r.zoom),{now:r.now,fadeDuration:r.fadeDuration,zoomHistory:r.zoomHistory,transition:r.transition}),t.prototype.possiblyEvaluate.call(this,
e,r)},e$jscomp$0.prototype.evaluate=function(e,r,n,i){return r=c$jscomp$4({},r,{zoom:Math.floor(r.zoom)}),t.prototype.evaluate.call(this,e,r,n,i)},e$jscomp$0}(di))(Bs.paint.properties["line-width"].specification);Vs.useIntegerZoom=!0;var Fs=function(t$jscomp$1){function e$jscomp$1(e){t$jscomp$1.call(this,e,Bs)}return t$jscomp$1&&(e$jscomp$1.__proto__=t$jscomp$1),(e$jscomp$1.prototype=Object.create(t$jscomp$1&&t$jscomp$1.prototype)).constructor=e$jscomp$1,e$jscomp$1.prototype._handleSpecialPaintPropertyUpdate=
function(t){"line-gradient"===t&&this._updateGradient()},e$jscomp$1.prototype._updateGradient=function(){this.gradient=go(this._transitionablePaint._values["line-gradient"].value.expression,"lineProgress");this.gradientTexture=null},e$jscomp$1.prototype.recalculate=function(e,r){t$jscomp$1.prototype.recalculate.call(this,e,r);this.paint._values["line-floorwidth"]=Vs.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,e)},e$jscomp$1.prototype.createBucket=function(t){return new Ts(t)},
e$jscomp$1.prototype.queryRadius=function(t){var r=Ds($a("line-width",this,t),$a("line-gap-width",this,t));t=$a("line-offset",this,t);return r/2+Math.abs(t)+Wa(this.paint.get("line-translate"))},e$jscomp$1.prototype.queryIntersectsFeature=function(t$jscomp$0,e$jscomp$0,r$jscomp$1,n$jscomp$1,a$jscomp$0,o$jscomp$0,s$jscomp$0){t$jscomp$0=Qa(t$jscomp$0,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),o$jscomp$0.angle,s$jscomp$0);a$jscomp$0=s$jscomp$0/2*Ds(this.paint.get("line-width").evaluate(e$jscomp$0,
r$jscomp$1),this.paint.get("line-gap-width").evaluate(e$jscomp$0,r$jscomp$1));e$jscomp$0=this.paint.get("line-offset").evaluate(e$jscomp$0,r$jscomp$1);return e$jscomp$0&&(n$jscomp$1=function(t,e){for(var r=[],n=new i$jscomp$2(0,0),a=0;a<t.length;a++){for(var o=t[a],s=[],u=0;u<o.length;u++){var l=o[u],p=o[u+1],c=0===u?n:l.sub(o[u-1])._unit()._perp();p=u===o.length-1?n:p.sub(l)._unit()._perp();c=c._add(p)._unit();c._mult(1/(c.x*p.x+c.y*p.y));s.push(c._mult(e)._add(l))}r.push(s)}return r}(n$jscomp$1,
e$jscomp$0*s$jscomp$0)),function(t,e,r$jscomp$0){for(var n=0;n<e.length;n++){var i=e[n];if(3<=t.length)for(var a=0;a<i.length;a++)if(Ha(t,i[a]))return!0;a:{a=t;var r=r$jscomp$0;if(1<a.length){if(Ka(a,i)){a=!0;break a}for(var n$jscomp$0=0;n$jscomp$0<i.length;n$jscomp$0++)if(Za(i[n$jscomp$0],a,r)){a=!0;break a}}for(n$jscomp$0=0;n$jscomp$0<a.length;n$jscomp$0++)if(Za(a[n$jscomp$0],i,r)){a=!0;break a}a=!1}if(a)return!0}return!1}(t$jscomp$0,n$jscomp$1,a$jscomp$0)},e$jscomp$1.prototype.isTileClipped=function(){return!0},
e$jscomp$1}(bi),Ls=Si([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),Rs=Si([{name:"a_projected_pos",components:3,type:"Float32"}],4),Os=(Si([{name:"a_fade_opacity",components:1,type:"Uint32"}],4),Si([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}])),Us=(Si([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",
name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]),Si([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4)),js=Si([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);Si([{name:"triangle",components:3,type:"Uint16"}]);
Si([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",
name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]);Si([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",
name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},
{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"}]);Si([{type:"Float32",name:"offsetX"}]);Si([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]);var Ns={"!":"","#":"",$:"","%":"","\x26":"","(":"",")":"","*":"","+":"",",":"","-":"",
".":"","/":"",":":"",";":"","\x3c":"","\x3d":"","\x3e":"","?":"","@":"","[":"","\\":"","]":"","^":"",_:"","`":"","{":"","|":"","}":"","~":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"",
"":"","":"","":"","":"","":"","":"","":"","":"","":"","":""},Ks=function(t,e,r,n,i){var o=8*i-n-1;var u=(1<<o)-1,l=u>>1,p=-7;i=r?i-1:0;var h=r?-1:1,f=t[e+i];i+=h;r=f&(1<<-p)-1;f>>=-p;for(p+=o;0<p;r=256*r+t[e+i],i+=h,p-=8);o=r&(1<<-p)-1;r>>=-p;for(p+=n;0<p;o=256*o+t[e+i],i+=h,p-=8);if(0===r)r=1-l;else{if(r===u)return o?NaN:1/0*(f?-1:1);o+=Math.pow(2,n);r-=l}return(f?-1:1)*o*Math.pow(2,r-n)},Gs=function(t,e,r,n,i,a){var o,s,u,l=8*a-i-1,p=(1<<l)-1,c=p>>1,h=23===i?Math.pow(2,-24)-
Math.pow(2,-77):0;a=n?0:a-1;n=n?1:-1;var d=0>e||0===e&&0>1/e?1:0;e=Math.abs(e);for(isNaN(e)||e===1/0?(s=isNaN(e)?1:0,o=p):(o=Math.floor(Math.log(e)/Math.LN2),1>e*(u=Math.pow(2,-o))&&(o--,u*=2),2<=(e+=1<=o+c?h/u:h*Math.pow(2,1-c))*u&&(o++,u/=2),o+c>=p?(s=0,o=p):1<=o+c?(s=(e*u-1)*Math.pow(2,i),o+=c):(s=e*Math.pow(2,c-1)*Math.pow(2,i),o=0));8<=i;t[r+a]=255&s,a+=n,s/=256,i-=8);o=o<<i|s;for(l+=i;0<l;t[r+a]=255&o,a+=n,o/=256,l-=8);t[r+a-n]|=128*d};Xs.Varint=0;Xs.Fixed64=1;Xs.Bytes=2;Xs.Fixed32=5;var Js=
"undefined"==typeof TextDecoder?null:new TextDecoder("utf8");Xs.prototype={destroy:function(){this.buf=null},readFields:function(t,e,r){for(r=r||this.length;this.pos<r;){var n=this.readVarint(),i=n>>3,a=this.pos;this.type=7&n;t(i,e,this);this.pos===a&&this.skip(n)}return e},readMessage:function(t,e){return this.readFields(t,e,this.readVarint()+this.pos)},readFixed32:function(){var t=su(this.buf,this.pos);return this.pos+=4,t},readSFixed32:function(){var t=lu(this.buf,this.pos);return this.pos+=4,
t},readFixed64:function(){var t=su(this.buf,this.pos)+4294967296*su(this.buf,this.pos+4);return this.pos+=8,t},readSFixed64:function(){var t=su(this.buf,this.pos)+4294967296*lu(this.buf,this.pos+4);return this.pos+=8,t},readFloat:function(){var t=Ks(this.buf,this.pos,!0,23,4);return this.pos+=4,t},readDouble:function(){var t=Ks(this.buf,this.pos,!0,52,8);return this.pos+=8,t},readVarint:function(t){var r,n=this.buf;var e=127&(r=n[this.pos++]);if(128>r)t=e;else if(e|=(127&(r=n[this.pos++]))<<7,128>
r)t=e;else if(e|=(127&(r=n[this.pos++]))<<14,128>r)t=e;else if(e|=(127&(r=n[this.pos++]))<<21,128>r)t=e;else{e|=(15&n[this.pos])<<28;var n$jscomp$0,i;r=this.buf;if((n$jscomp$0=(112&(i=r[this.pos++]))>>4,128>i)||(n$jscomp$0|=(127&(i=r[this.pos++]))<<3,128>i)||(n$jscomp$0|=(127&(i=r[this.pos++]))<<10,128>i)||(n$jscomp$0|=(127&(i=r[this.pos++]))<<17,128>i)||(n$jscomp$0|=(127&(i=r[this.pos++]))<<24,128>i)||(n$jscomp$0|=(1&(i=r[this.pos++]))<<31,128>i))t=t?4294967296*n$jscomp$0+(e>>>0):4294967296*(n$jscomp$0>>>
0)+(e>>>0);else throw Error("Expected varint not more than 10 bytes");}return t},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var t=this.readVarint();return 1==t%2?(t+1)/-2:t/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var t=this.readVarint()+this.pos,e=this.pos;this.pos=t;if(12<=t-e&&Js)t=Js.decode(this.buf.subarray(e,t));else{for(var t$jscomp$0=this.buf,n="";e<t;){var a,o,s,u=t$jscomp$0[e],l=null,p=239<u?4:223<u?3:191<u?2:1;if(e+p>t)break;
1===p?128>u&&(l=u):2===p?128==(192&(a=t$jscomp$0[e+1]))&&127>=(l=(31&u)<<6|63&a)&&(l=null):3===p?(o=t$jscomp$0[e+2],128==(192&(a=t$jscomp$0[e+1]))&&128==(192&o)&&(2047>=(l=(15&u)<<12|(63&a)<<6|63&o)||55296<=l&&57343>=l)&&(l=null)):4===p&&(o=t$jscomp$0[e+2],s=t$jscomp$0[e+3],128==(192&(a=t$jscomp$0[e+1]))&&128==(192&o)&&128==(192&s)&&(65535>=(l=(15&u)<<18|(63&a)<<12|(63&o)<<6|63&s)||1114112<=l)&&(l=null));null===l?(l=65533,p=1):65535<l&&(l-=65536,n+=String.fromCharCode(l>>>10&1023|55296),l=56320|1023&
l);n+=String.fromCharCode(l);e+=p}t=n}return t},readBytes:function(){var t=this.readVarint()+this.pos,e=this.buf.subarray(this.pos,t);return this.pos=t,e},readPackedVarint:function(t,e){if(this.type!==Xs.Bytes)return t.push(this.readVarint(e));var r=Hs(this);for(t=t||[];this.pos<r;)t.push(this.readVarint(e));return t},readPackedSVarint:function(t){if(this.type!==Xs.Bytes)return t.push(this.readSVarint());var e=Hs(this);for(t=t||[];this.pos<e;)t.push(this.readSVarint());return t},readPackedBoolean:function(t){if(this.type!==
Xs.Bytes)return t.push(this.readBoolean());var e=Hs(this);for(t=t||[];this.pos<e;)t.push(this.readBoolean());return t},readPackedFloat:function(t){if(this.type!==Xs.Bytes)return t.push(this.readFloat());var e=Hs(this);for(t=t||[];this.pos<e;)t.push(this.readFloat());return t},readPackedDouble:function(t){if(this.type!==Xs.Bytes)return t.push(this.readDouble());var e=Hs(this);for(t=t||[];this.pos<e;)t.push(this.readDouble());return t},readPackedFixed32:function(t){if(this.type!==Xs.Bytes)return t.push(this.readFixed32());
var e=Hs(this);for(t=t||[];this.pos<e;)t.push(this.readFixed32());return t},readPackedSFixed32:function(t){if(this.type!==Xs.Bytes)return t.push(this.readSFixed32());var e=Hs(this);for(t=t||[];this.pos<e;)t.push(this.readSFixed32());return t},readPackedFixed64:function(t){if(this.type!==Xs.Bytes)return t.push(this.readFixed64());var e=Hs(this);for(t=t||[];this.pos<e;)t.push(this.readFixed64());return t},readPackedSFixed64:function(t){if(this.type!==Xs.Bytes)return t.push(this.readSFixed64());var e=
Hs(this);for(t=t||[];this.pos<e;)t.push(this.readSFixed64());return t},skip:function(t){t&=7;if(t===Xs.Varint)for(;127<this.buf[this.pos++];);else if(t===Xs.Bytes)this.pos=this.readVarint()+this.pos;else if(t===Xs.Fixed32)this.pos+=4;else{if(t!==Xs.Fixed64)throw Error("Unimplemented type: "+t);this.pos+=8}},writeTag:function(t,e){this.writeVarint(t<<3|e)},realloc:function(t){for(var e=this.length||16;e<this.pos+t;)e*=2;e!==this.length&&(t=new Uint8Array(e),t.set(this.buf),this.buf=t,this.length=e)},
finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(t){this.realloc(4);uu(this.buf,t,this.pos);this.pos+=4},writeSFixed32:function(t){this.realloc(4);uu(this.buf,t,this.pos);this.pos+=4},writeFixed64:function(t){this.realloc(8);uu(this.buf,-1&t,this.pos);uu(this.buf,Math.floor(1/4294967296*t),this.pos+4);this.pos+=8},writeSFixed64:function(t){this.realloc(8);uu(this.buf,-1&t,this.pos);uu(this.buf,Math.floor(1/4294967296*t),this.pos+4);this.pos+=
8},writeVarint:function(t$jscomp$1){268435455<(t$jscomp$1=+t$jscomp$1||0)||0>t$jscomp$1?function(t$jscomp$0,e$jscomp$0){var r$jscomp$0,n;if(0<=t$jscomp$0?(r$jscomp$0=t$jscomp$0%4294967296|0,n=t$jscomp$0/4294967296|0):(n=~(-t$jscomp$0/4294967296),4294967295^(r$jscomp$0=~(-t$jscomp$0%4294967296))?r$jscomp$0=r$jscomp$0+1|0:(r$jscomp$0=0,n=n+1|0)),1.8446744073709552E19<=t$jscomp$0||-1.8446744073709552E19>t$jscomp$0)throw Error("Given varint doesn't fit into 10 bytes");e$jscomp$0.realloc(10);(function(t,
e,r){r.buf[r.pos++]=127&t|128;t>>>=7;r.buf[r.pos++]=127&t|128;t>>>=7;r.buf[r.pos++]=127&t|128;t>>>=7;r.buf[r.pos++]=127&t|128;r.buf[r.pos]=127&t>>>7})(r$jscomp$0,0,e$jscomp$0);(function(t,e){e.buf[e.pos++]|=(7&t)<<4|((t>>>=3)?128:0);t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t)))))})(n,e$jscomp$0)}(t$jscomp$1,this):(this.realloc(4),this.buf[this.pos++]=
127&t$jscomp$1|(127<t$jscomp$1?128:0),127>=t$jscomp$1||(this.buf[this.pos++]=127&(t$jscomp$1>>>=7)|(127<t$jscomp$1?128:0),127>=t$jscomp$1||(this.buf[this.pos++]=127&(t$jscomp$1>>>=7)|(127<t$jscomp$1?128:0),127>=t$jscomp$1||(this.buf[this.pos++]=t$jscomp$1>>>7&127))))},writeSVarint:function(t){this.writeVarint(0>t?2*-t-1:2*t)},writeBoolean:function(t){this.writeVarint(!!t)},writeString:function(t$jscomp$0){t$jscomp$0=String(t$jscomp$0);this.realloc(4*t$jscomp$0.length);this.pos++;for(var e=this.pos,
t=this.buf,r=this.pos,n,i,a=0;a<t$jscomp$0.length;a++){if(55295<(n=t$jscomp$0.charCodeAt(a))&&57344>n){if(!i){56319<n||a+1===t$jscomp$0.length?(t[r++]=239,t[r++]=191,t[r++]=189):i=n;continue}if(56320>n){t[r++]=239;t[r++]=191;t[r++]=189;i=n;continue}n=i-55296<<10|n-56320|65536;i=null}else i&&(t[r++]=239,t[r++]=191,t[r++]=189,i=null);128>n?t[r++]=n:(2048>n?t[r++]=n>>6|192:(65536>n?t[r++]=n>>12|224:(t[r++]=n>>18|240,t[r++]=n>>12&63|128),t[r++]=n>>6&63|128),t[r++]=63&n|128)}this.pos=r;t=this.pos-e;128<=
t&&$s(e,t,this);this.pos=e-1;this.writeVarint(t);this.pos+=t},writeFloat:function(t){this.realloc(4);Gs(this.buf,t,this.pos,!0,23,4);this.pos+=4},writeDouble:function(t){this.realloc(8);Gs(this.buf,t,this.pos,!0,52,8);this.pos+=8},writeBytes:function(t){var e=t.length;this.writeVarint(e);this.realloc(e);for(var r=0;r<e;r++)this.buf[this.pos++]=t[r]},writeRawMessage:function(t,e){this.pos++;var r=this.pos;t(e,this);t=this.pos-r;128<=t&&$s(r,t,this);this.pos=r-1;this.writeVarint(t);this.pos+=t},writeMessage:function(t,
e,r){this.writeTag(t,Xs.Bytes);this.writeRawMessage(e,r)},writePackedVarint:function(t,e){e.length&&this.writeMessage(t,Ws,e)},writePackedSVarint:function(t,e){e.length&&this.writeMessage(t,Qs,e)},writePackedBoolean:function(t,e){e.length&&this.writeMessage(t,ru,e)},writePackedFloat:function(t,e){e.length&&this.writeMessage(t,tu,e)},writePackedDouble:function(t,e){e.length&&this.writeMessage(t,eu,e)},writePackedFixed32:function(t,e){e.length&&this.writeMessage(t,nu,e)},writePackedSFixed32:function(t,
e){e.length&&this.writeMessage(t,iu,e)},writePackedFixed64:function(t,e){e.length&&this.writeMessage(t,au,e)},writePackedSFixed64:function(t,e){e.length&&this.writeMessage(t,ou,e)},writeBytesField:function(t,e){this.writeTag(t,Xs.Bytes);this.writeBytes(e)},writeFixed32Field:function(t,e){this.writeTag(t,Xs.Fixed32);this.writeFixed32(e)},writeSFixed32Field:function(t,e){this.writeTag(t,Xs.Fixed32);this.writeSFixed32(e)},writeFixed64Field:function(t,e){this.writeTag(t,Xs.Fixed64);this.writeFixed64(e)},
writeSFixed64Field:function(t,e){this.writeTag(t,Xs.Fixed64);this.writeSFixed64(e)},writeVarintField:function(t,e){this.writeTag(t,Xs.Varint);this.writeVarint(e)},writeSVarintField:function(t,e){this.writeTag(t,Xs.Varint);this.writeSVarint(e)},writeStringField:function(t,e){this.writeTag(t,Xs.Bytes);this.writeString(e)},writeFloatField:function(t,e){this.writeTag(t,Xs.Fixed32);this.writeFloat(e)},writeDoubleField:function(t,e){this.writeTag(t,Xs.Fixed64);this.writeDouble(e)},writeBooleanField:function(t,
e){this.writeVarintField(t,!!e)}};var yu=function(t,e){var r=e.pixelRatio,n=e.version,i=e.stretchX,a=e.stretchY;e=e.content;this.paddedRect=t;this.pixelRatio=r;this.stretchX=i;this.stretchY=a;this.content=e;this.version=n},du={tl:{configurable:!0},br:{configurable:!0},tlbr:{configurable:!0},displaySize:{configurable:!0}};du.tl.get=function(){return[this.paddedRect.x+1,this.paddedRect.y+1]};du.br.get=function(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]};du.tlbr.get=
function(){return this.tl.concat(this.br)};du.displaySize.get=function(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]};Object.defineProperties(yu.prototype,du);var mu=function(t,e){var r={},n={};this.haveRenderCallbacks=[];var i=[];this.addImages(t,r,i);this.addImages(e,n,i);i=fu(i);i=new mo({width:i.w||1,height:i.h||1});for(var s in t){var u=t[s],l=r[s].paddedRect;mo.copy(u.data,i,{x:0,y:0},{x:l.x+1,y:l.y+1},u.data)}for(var p in e){t=e[p];u=n[p].paddedRect;
s=u.x+1;u=u.y+1;l=t.data.width;var m=t.data.height;mo.copy(t.data,i,{x:0,y:0},{x:s,y:u},t.data);mo.copy(t.data,i,{x:0,y:m-1},{x:s,y:u-1},{width:l,height:1});mo.copy(t.data,i,{x:0,y:0},{x:s,y:u+m},{width:l,height:1});mo.copy(t.data,i,{x:l-1,y:0},{x:s-1,y:u},{width:1,height:m});mo.copy(t.data,i,{x:0,y:0},{x:s+l,y:u},{width:1,height:m})}this.image=i;this.iconPositions=r;this.patternPositions=n};mu.prototype.addImages=function(t,e,r){for(var n in t){var i=t[n],a={x:0,y:0,w:i.data.width+2,h:i.data.height+
2};r.push(a);e[n]=new yu(a,i);i.hasRenderCallback&&this.haveRenderCallbacks.push(n)}};mu.prototype.patchUpdatedImages=function(t,e){for(var r in t.dispatchRenderCallbacks(this.haveRenderCallbacks),t.updatedImages)this.patchUpdatedImage(this.iconPositions[r],t.getImage(r),e),this.patchUpdatedImage(this.patternPositions[r],t.getImage(r),e)};mu.prototype.patchUpdatedImage=function(t,e,r){t&&e&&t.version!==e.version&&(t.version=e.version,t=t.tl,r.update(e.data,void 0,{x:t[0],y:t[1]}))};Dn("ImagePosition",
yu);Dn("ImageAtlas",mu);var vu={horizontal:1,vertical:2,horizontalOnly:3},gu=function(){this.scale=1;this.fontStack="";this.imageName=null};gu.forText=function(t,e){var r=new gu;return r.scale=t||1,r.fontStack=e,r};gu.forImage=function(t){var e=new gu;return e.imageName=t,e};var xu=function(){this.text="";this.sectionIndex=[];this.sections=[];this.imageSectionID=null};xu.fromFeature=function(t,e){for(var r=new xu,n=0;n<t.sections.length;n++){var i=t.sections[n];i.image?r.addImageSection(i):r.addTextSection(i,
e)}return r};xu.prototype.length=function(){return this.text.length};xu.prototype.getSection=function(t){return this.sections[this.sectionIndex[t]]};xu.prototype.getSectionIndex=function(t){return this.sectionIndex[t]};xu.prototype.getCharCode=function(t){return this.text.charCodeAt(t)};xu.prototype.verticalizePunctuation=function(){for(var t=this.text,e="",r=0;r<t.length;r++){var n=t.charCodeAt(r+1)||null,i=t.charCodeAt(r-1)||null;e+=n&&Zn(n)&&!Ns[t[r+1]]||i&&Zn(i)&&!Ns[t[r-1]]||!Ns[t[r]]?t[r]:Ns[t[r]]}this.text=
e};xu.prototype.trim=function(){for(var t=0,e=0;e<this.text.length&&wu[this.text.charCodeAt(e)];e++)t++;e=this.text.length;for(var n=this.text.length-1;0<=n&&n>=t&&wu[this.text.charCodeAt(n)];n--)e--;this.text=this.text.substring(t,e);this.sectionIndex=this.sectionIndex.slice(t,e)};xu.prototype.substring=function(t,e){var r=new xu;return r.text=this.text.substring(t,e),r.sectionIndex=this.sectionIndex.slice(t,e),r.sections=this.sections,r};xu.prototype.toString=function(){return this.text};xu.prototype.getMaxScale=
function(){var t=this;return this.sectionIndex.reduce(function(e,r){return Math.max(e,t.sections[r].scale)},0)};xu.prototype.addTextSection=function(t,e){this.text+=t.text;this.sections.push(gu.forText(t.scale,t.fontStack||e));e=this.sections.length-1;for(var n=0;n<t.text.length;++n)this.sectionIndex.push(e)};xu.prototype.addImageSection=function(t){t=t.image?t.image.name:"";if(0!==t.length){var r=this.getNextImageSectionCharCode();r?(this.text+=String.fromCharCode(r),this.sections.push(gu.forImage(t)),
this.sectionIndex.push(this.sections.length-1)):_$jscomp$0("Reached maximum number of images 6401")}else _$jscomp$0("Can't add FormattedSection with an empty image.")};xu.prototype.getNextImageSectionCharCode=function(){return this.imageSectionID?63743<=this.imageSectionID?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)};var wu={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},_u={10:!0,32:!0,38:!0,40:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0},Tu=function(t){function e$jscomp$0(e,
r,n,i){t.call(this,e,r);this.angle=n;void 0!==i&&(this.segment=i)}return t&&(e$jscomp$0.__proto__=t),(e$jscomp$0.prototype=Object.create(t&&t.prototype)).constructor=e$jscomp$0,e$jscomp$0.prototype.clone=function(){return new e$jscomp$0(this.x,this.y,this.angle,this.segment)},e$jscomp$0}(i$jscomp$2);Dn("Anchor",Tu);var Fu=Object.freeze({__proto__:null,getSizeData:Pu,evaluateSizeForFeature:Bu,evaluateSizeForZoom:Vu,SIZE_PACK_FACTOR:128}),Ju=function(t,e,r,n,a,o,s,u,l,p){if(this.boxStartIndex=t.length,
l)e=o.top,r=o.bottom,(n=o.collisionPadding)&&(e-=n[1],r+=n[3]),e=r-e,0<e&&(e=Math.max(10,e),this.circleDiameter=e);else{l=o.top*s-u;var m=o.bottom*s+u,v=o.left*s-u;u=o.right*s+u;o=o.collisionPadding;if(o&&(v-=o[0]*s,l-=o[1]*s,u+=o[2]*s,m+=o[3]*s),p){o=new i$jscomp$2(v,l);s=new i$jscomp$2(u,l);var _=new i$jscomp$2(v,m);m=new i$jscomp$2(u,m);p=p*Math.PI/180;o._rotate(p);s._rotate(p);_._rotate(p);m._rotate(p);v=Math.min(o.x,s.x,_.x,m.x);u=Math.max(o.x,s.x,_.x,m.x);l=Math.min(o.y,s.y,_.y,m.y);m=Math.max(o.y,
s.y,_.y,m.y)}t.emplaceBack(e.x,e.y,v,l,u,m,r,n,a)}this.boxEndIndex=t.length},Hu=function(t,e){if(void 0===t&&(t=[]),void 0===e&&(e=Yu),this.data=t,this.length=this.data.length,this.compare=e,0<this.length)for(t=(this.length>>1)-1;0<=t;t--)this._down(t)};Hu.prototype.push=function(t){this.data.push(t);this.length++;this._up(this.length-1)};Hu.prototype.pop=function(){if(0!==this.length){var t=this.data[0],e=this.data.pop();return this.length--,0<this.length&&(this.data[0]=e,this._down(0)),t}};Hu.prototype.peek=
function(){return this.data[0]};Hu.prototype._up=function(t){for(var e=this.data,r=this.compare,n=e[t];0<t;){var i=t-1>>1,a=e[i];if(0<=r(n,a))break;e[t]=a;t=i}e[t]=n};Hu.prototype._down=function(t){for(var e=this.data,r=this.compare,n=this.length>>1,i=e[t];t<n;){var a=1+(t<<1),o=e[a],s=a+1;if(s<this.length&&0>r(e[s],o)&&(a=s,o=e[s]),0<=r(o,i))break;e[t]=o;t=a}e[t]=i};var tl=Number.POSITIVE_INFINITY,ol=vs.VectorTileFeature.types,sl=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}],cl=function(t){this.layoutVertexArray=
new Ti;this.indexArray=new Ri;this.programConfigurations=t;this.segments=new aa;this.dynamicLayoutVertexArray=new Pi;this.opacityVertexArray=new Bi;this.placedSymbolArray=new $i};cl.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length&&0===this.indexArray.length&&0===this.dynamicLayoutVertexArray.length&&0===this.opacityVertexArray.length};cl.prototype.upload=function(t,e,r,n){this.isEmpty()||(r&&(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,Ls.members),this.indexBuffer=
t.createIndexBuffer(this.indexArray,e),this.dynamicLayoutVertexBuffer=t.createVertexBuffer(this.dynamicLayoutVertexArray,Rs.members,!0),this.opacityVertexBuffer=t.createVertexBuffer(this.opacityVertexArray,sl,!0),this.opacityVertexBuffer.itemSize=1),(r||n)&&this.programConfigurations.upload(t))};cl.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),
this.opacityVertexBuffer.destroy())};Dn("SymbolBuffers",cl);var hl=function(t,e,r){this.layoutVertexArray=new t;this.layoutAttributes=e;this.indexArray=new r;this.segments=new aa;this.collisionVertexArray=new Li};hl.prototype.upload=function(t){this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes);this.indexBuffer=t.createIndexBuffer(this.indexArray);this.collisionVertexBuffer=t.createVertexBuffer(this.collisionVertexArray,Os.members,!0)};hl.prototype.destroy=
function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())};Dn("CollisionBuffers",hl);var fl=function(t$jscomp$0){this.collisionBoxArray=t$jscomp$0.collisionBoxArray;this.zoom=t$jscomp$0.zoom;this.overscaling=t$jscomp$0.overscaling;this.layers=t$jscomp$0.layers;this.layerIds=this.layers.map(function(t){return t.id});this.index=t$jscomp$0.index;this.pixelRatio=t$jscomp$0.pixelRatio;this.sourceLayerIndex=
t$jscomp$0.sourceLayerIndex;this.hasRTLText=this.hasPattern=!1;this.sortKeyRanges=[];this.collisionCircleArray=[];this.placementInvProjMatrix=no([]);this.placementViewportMatrix=no([]);var e=this.layers[0]._unevaluatedLayout._values;this.textSizeData=Pu(this.zoom,e["text-size"]);this.iconSizeData=Pu(this.zoom,e["icon-size"]);e=this.layers[0].layout;var n=e.get("symbol-sort-key"),i=e.get("symbol-z-order");this.sortFeaturesByKey="viewport-y"!==i&&void 0!==n.constantOr(1);this.sortFeaturesByY=("viewport-y"===
i||"auto"===i&&!this.sortFeaturesByKey)&&(e.get("text-allow-overlap")||e.get("icon-allow-overlap")||e.get("text-ignore-placement")||e.get("icon-ignore-placement"));"point"===e.get("symbol-placement")&&(this.writingModes=e.get("text-writing-mode").map(function(t){return vu[t]}));this.stateDependentLayerIds=this.layers.filter(function(t){return t.isStateDependent()}).map(function(t){return t.id});this.sourceID=t$jscomp$0.sourceID};fl.prototype.createArrays=function(){this.text=new cl(new Pa(this.layers,
this.zoom,function(t){return/^text/.test(t)}));this.icon=new cl(new Pa(this.layers,this.zoom,function(t){return/^icon/.test(t)}));this.glyphOffsetArray=new ta;this.lineVertexArray=new ea;this.symbolInstances=new Qi};fl.prototype.calculateGlyphDependencies=function(t,e,r,n,i){for(var a=0;a<t.length;a++)if(e[t.charCodeAt(a)]=!0,(r||n)&&i){var o=Ns[t.charAt(a)];o&&(e[o.charCodeAt(0)]=!0)}};fl.prototype.populate=function(t$jscomp$1,e$jscomp$1,r$jscomp$1){var n$jscomp$0=this.layers[0],i$jscomp$1=n$jscomp$0.layout,
a$jscomp$0=i$jscomp$1.get("text-font"),o$jscomp$0=i$jscomp$1.get("text-field"),s$jscomp$0=i$jscomp$1.get("icon-image");o$jscomp$0=("constant"!==o$jscomp$0.value.kind||o$jscomp$0.value.value instanceof ee&&!o$jscomp$0.value.value.isEmpty()||0<o$jscomp$0.value.value.toString().length)&&("constant"!==a$jscomp$0.value.kind||0<a$jscomp$0.value.value.length);s$jscomp$0="constant"!==s$jscomp$0.value.kind||!!s$jscomp$0.value.value||0<Object.keys(s$jscomp$0.parameters).length;var p$jscomp$0=i$jscomp$1.get("symbol-sort-key");
if(this.features=[],o$jscomp$0||s$jscomp$0){var c$jscomp$0=e$jscomp$1.iconDependencies,h=e$jscomp$1.glyphDependencies;e$jscomp$1=e$jscomp$1.availableImages;for(var y$jscomp$0=new ai(this.zoom),d=0;d<t$jscomp$1.length;d+=1){var v=t$jscomp$1[d],g=v.feature,x=v.id,b=v.index,w=v.sourceLayerIndex;v=n$jscomp$0._featureFilter.needGeometry;var A={type:g.type,id:x,properties:g.properties,geometry:v?La(g):[]};if(n$jscomp$0._featureFilter.filter(y$jscomp$0,A,r$jscomp$1)){v||(A.geometry=La(g));v=void 0;if(o$jscomp$0){var k=
n$jscomp$0.getValueAndResolveTokens("text-field",A,r$jscomp$1,e$jscomp$1);k=ee.factory(k);pl(k)&&(this.hasRTLText=!0);(!this.hasRTLText||"unavailable"===$n||this.hasRTLText&&ii.isParsed())&&(v=qs(k,n$jscomp$0,A))}k=void 0;s$jscomp$0&&(k=n$jscomp$0.getValueAndResolveTokens("icon-image",A,r$jscomp$1,e$jscomp$1),k=k instanceof re?k:re.fromString(k));if(v||k){var M=this.sortFeaturesByKey?p$jscomp$0.evaluate(A,{},r$jscomp$1):void 0;g={id:x,text:v,icon:k,index:b,sourceLayerIndex:w,geometry:La(g),properties:g.properties,
type:ol[g.type],sortKey:M};if(this.features.push(g),k&&(c$jscomp$0[k.name]=!0),v)for(g=a$jscomp$0.evaluate(A,{},r$jscomp$1).join(","),x="map"===i$jscomp$1.get("text-rotation-alignment")&&"point"!==i$jscomp$1.get("symbol-placement"),this.allowVerticalPlacement=this.writingModes&&0<=this.writingModes.indexOf(vu.vertical),b=0,A=v.sections;b<A.length;b+=1)w=A[b],w.image?c$jscomp$0[w.image.name]=!0:(k=Kn(v.toString()),M=w.fontStack||g,M=h[M]=h[M]||{},this.calculateGlyphDependencies(w.text,M,x,this.allowVerticalPlacement,
k))}}}"line"===i$jscomp$1.get("symbol-placement")&&(this.features=function(t$jscomp$0){function o(t,e,i){var a=r$jscomp$0[t];return delete r$jscomp$0[t],r$jscomp$0[e]=a,n[a].geometry[0].pop(),n[a].geometry[0]=n[a].geometry[0].concat(i[0]),a}function s(t,r,i){var a=e$jscomp$0[r];return delete e$jscomp$0[r],e$jscomp$0[t]=a,n[a].geometry[0].shift(),n[a].geometry[0]=i[0].concat(n[a].geometry[0]),a}function u(t,e,r){e=r?e[0][e[0].length-1]:e[0][0];return t+":"+e.x+":"+e.y}for(var e$jscomp$0={},r$jscomp$0=
{},n=[],i$jscomp$0=0,l=0;l<t$jscomp$0.length;l++){var p=t$jscomp$0[l],c=p.geometry;if(p=p.text?p.text.toString():null){var f=u(p,c),y=u(p,c,!0);if(f in r$jscomp$0&&y in e$jscomp$0&&r$jscomp$0[f]!==e$jscomp$0[y]){c=s(f,y,c);var m=o(f,y,n[c].geometry);delete e$jscomp$0[f];delete r$jscomp$0[y];r$jscomp$0[u(p,n[m].geometry,!0)]=m;n[c].geometry=null}else f in r$jscomp$0?o(f,y,c):y in e$jscomp$0?s(f,y,c):(n.push(t$jscomp$0[l]),i$jscomp$0++,e$jscomp$0[f]=i$jscomp$0-1,r$jscomp$0[y]=i$jscomp$0-1)}else n.push(t$jscomp$0[l]),
i$jscomp$0++}return n.filter(function(t){return t.geometry})}(this.features));this.sortFeaturesByKey&&this.features.sort(function(t,e){return t.sortKey-e.sortKey})}};fl.prototype.update=function(t,e,r){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(t,e,this.layers,r),this.icon.programConfigurations.updatePaintArrays(t,e,this.layers,r))};fl.prototype.isEmpty=function(){return 0===this.symbolInstances.length&&!this.hasRTLText};fl.prototype.uploadPending=function(){return!this.uploaded||
this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload};fl.prototype.upload=function(t){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(t),this.iconCollisionBox.upload(t));this.text.upload(t,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload);this.icon.upload(t,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload);this.uploaded=!0};fl.prototype.destroyDebugData=function(){this.textCollisionBox.destroy();
this.iconCollisionBox.destroy()};fl.prototype.destroy=function(){this.text.destroy();this.icon.destroy();this.hasDebugData()&&this.destroyDebugData()};fl.prototype.addToLineVertexArray=function(t,e){var r=this.lineVertexArray.length;if(void 0!==t.segment){for(var n=t.dist(e[t.segment+1]),i=t.dist(e[t.segment]),a={},o=t.segment+1;o<e.length;o++)a[o]={x:e[o].x,y:e[o].y,tileUnitDistanceFromAnchor:n},o<e.length-1&&(n+=e[o+1].dist(e[o]));for(t=t.segment||0;0<=t;t--)a[t]={x:e[t].x,y:e[t].y,tileUnitDistanceFromAnchor:i},
0<t&&(i+=e[t-1].dist(e[t]));for(i=0;i<e.length;i++)t=a[i],this.lineVertexArray.emplaceBack(t.x,t.y,t.tileUnitDistanceFromAnchor)}return{lineStartIndex:r,lineLength:this.lineVertexArray.length-r}};fl.prototype.addSymbols=function(t,e,r,n,i,a,o,s,u,l,p,c){i=t.indexArray;for(var f=t.layoutVertexArray,y=t.segments.prepareSegment(4*e.length,f,i,a.sortKey),d=this.glyphOffsetArray.length,m=y.vertexLength,v=this.allowVerticalPlacement&&o===vu.vertical?Math.PI/2:0,g=a.text&&a.text.sections,x=0;x<e.length;x++){var b=
e[x],w=b.tl,_=b.tr,A=b.bl,S=b.br,k=b.tex,I=b.pixelOffsetTL,z=b.pixelOffsetBR,C=b.minFontScaleX,M=b.minFontScaleY,E=b.glyphOffset,T=b.isSDF;b=b.sectionIndex;var B=y.vertexLength,V=E[1];ul(f,s.x,s.y,w.x,V+w.y,k.x,k.y,r,T,I.x,I.y,C,M);ul(f,s.x,s.y,_.x,V+_.y,k.x+k.w,k.y,r,T,z.x,I.y,C,M);ul(f,s.x,s.y,A.x,V+A.y,k.x,k.y+k.h,r,T,I.x,z.y,C,M);ul(f,s.x,s.y,S.x,V+S.y,k.x+k.w,k.y+k.h,r,T,z.x,z.y,C,M);ll(t.dynamicLayoutVertexArray,s,v);i.emplaceBack(B,B+1,B+2);i.emplaceBack(B+1,B+2,B+3);y.vertexLength+=4;y.primitiveLength+=
2;this.glyphOffsetArray.emplaceBack(E[0]);x!==e.length-1&&b===e[x+1].sectionIndex||t.programConfigurations.populatePaintArrays(f.length,a,a.index,{},c,g&&g[b])}t.placedSymbolArray.emplaceBack(s.x,s.y,d,this.glyphOffsetArray.length-d,m,u,l,s.segment,r?r[0]:0,r?r[1]:0,n[0],n[1],o,0,!1,0,p)};fl.prototype._addCollisionDebugVertex=function(t,e,r,n,i,a){return e.emplaceBack(0,0),t.emplaceBack(r.x,r.y,n,i,Math.round(a.x),Math.round(a.y))};fl.prototype.addCollisionDebugVertices=function(t,e,r,n,a,o,s){var u=
a.segments.prepareSegment(4,a.layoutVertexArray,a.indexArray),l=u.vertexLength,p=a.layoutVertexArray,c=a.collisionVertexArray,h=s.anchorX;s=s.anchorY;this._addCollisionDebugVertex(p,c,o,h,s,new i$jscomp$2(t,e));this._addCollisionDebugVertex(p,c,o,h,s,new i$jscomp$2(r,e));this._addCollisionDebugVertex(p,c,o,h,s,new i$jscomp$2(r,n));this._addCollisionDebugVertex(p,c,o,h,s,new i$jscomp$2(t,n));u.vertexLength+=4;t=a.indexArray;t.emplaceBack(l,l+1);t.emplaceBack(l+1,l+2);t.emplaceBack(l+2,l+3);t.emplaceBack(l+
3,l);u.primitiveLength+=4};fl.prototype.addDebugCollisionBoxes=function(t,e,r,n){for(;t<e;t++){var a=this.collisionBoxArray.get(t);this.addCollisionDebugVertices(a.x1,a.y1,a.x2,a.y2,n?this.textCollisionBox:this.iconCollisionBox,a.anchorPoint,r)}};fl.prototype.generateCollisionDebugBuffers=function(){this.hasDebugData()&&this.destroyDebugData();this.textCollisionBox=new hl(Fi,Us.members,Ki);this.iconCollisionBox=new hl(Fi,Us.members,Ki);for(var t=0;t<this.symbolInstances.length;t++){var e=this.symbolInstances.get(t);
this.addDebugCollisionBoxes(e.textBoxStartIndex,e.textBoxEndIndex,e,!0);this.addDebugCollisionBoxes(e.verticalTextBoxStartIndex,e.verticalTextBoxEndIndex,e,!0);this.addDebugCollisionBoxes(e.iconBoxStartIndex,e.iconBoxEndIndex,e,!1);this.addDebugCollisionBoxes(e.verticalIconBoxStartIndex,e.verticalIconBoxEndIndex,e,!1)}};fl.prototype._deserializeCollisionBoxesForSymbol=function(t,e,r,n,i,a,o,s,u){for(var l={};e<r;){e=t.get(e);l.textBox={x1:e.x1,y1:e.y1,x2:e.x2,y2:e.y2,anchorPointX:e.anchorPointX,anchorPointY:e.anchorPointY};
l.textFeatureIndex=e.featureIndex;break}for(;n<i;){n=t.get(n);l.verticalTextBox={x1:n.x1,y1:n.y1,x2:n.x2,y2:n.y2,anchorPointX:n.anchorPointX,anchorPointY:n.anchorPointY};l.verticalTextFeatureIndex=n.featureIndex;break}for(;a<o;){a=t.get(a);l.iconBox={x1:a.x1,y1:a.y1,x2:a.x2,y2:a.y2,anchorPointX:a.anchorPointX,anchorPointY:a.anchorPointY};l.iconFeatureIndex=a.featureIndex;break}for(;s<u;){t=t.get(s);l.verticalIconBox={x1:t.x1,y1:t.y1,x2:t.x2,y2:t.y2,anchorPointX:t.anchorPointX,anchorPointY:t.anchorPointY};
l.verticalIconFeatureIndex=t.featureIndex;break}return l};fl.prototype.deserializeCollisionBoxes=function(t){this.collisionArrays=[];for(var e=0;e<this.symbolInstances.length;e++){var r=this.symbolInstances.get(e);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(t,r.textBoxStartIndex,r.textBoxEndIndex,r.verticalTextBoxStartIndex,r.verticalTextBoxEndIndex,r.iconBoxStartIndex,r.iconBoxEndIndex,r.verticalIconBoxStartIndex,r.verticalIconBoxEndIndex))}};fl.prototype.hasTextData=function(){return 0<
this.text.segments.get().length};fl.prototype.hasIconData=function(){return 0<this.icon.segments.get().length};fl.prototype.hasDebugData=function(){return this.textCollisionBox&&this.iconCollisionBox};fl.prototype.hasTextCollisionBoxData=function(){return this.hasDebugData()&&0<this.textCollisionBox.segments.get().length};fl.prototype.hasIconCollisionBoxData=function(){return this.hasDebugData()&&0<this.iconCollisionBox.segments.get().length};fl.prototype.addIndicesForPlacedSymbol=function(t,e){var r=
t.placedSymbolArray.get(e);e=r.vertexStartIndex+4*r.numGlyphs;for(r=r.vertexStartIndex;r<e;r+=4)t.indexArray.emplaceBack(r,r+1,r+2),t.indexArray.emplaceBack(r+1,r+2,r+3)};fl.prototype.getSortedSymbolIndexes=function(t$jscomp$0){if(this.sortedAngle===t$jscomp$0&&void 0!==this.symbolInstanceIndexes)return this.symbolInstanceIndexes;var e$jscomp$0=Math.sin(t$jscomp$0);t$jscomp$0=Math.cos(t$jscomp$0);for(var n=[],i=[],a=[],o=0;o<this.symbolInstances.length;++o){a.push(o);var s=this.symbolInstances.get(o);
n.push(0|Math.round(e$jscomp$0*s.anchorX+t$jscomp$0*s.anchorY));i.push(s.featureIndex)}return a.sort(function(t,e){return n[t]-n[e]||i[e]-i[t]}),a};fl.prototype.addToSortKeyRanges=function(t,e){var r=this.sortKeyRanges[this.sortKeyRanges.length-1];r&&r.sortKey===e?r.symbolInstanceEnd=t+1:this.sortKeyRanges.push({sortKey:e,symbolInstanceStart:t,symbolInstanceEnd:t+1})};fl.prototype.sortFeatures=function(t$jscomp$0){var e=this;if(this.sortFeaturesByY&&this.sortedAngle!==t$jscomp$0&&!(1<this.text.segments.get().length||
1<this.icon.segments.get().length)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(t$jscomp$0);this.sortedAngle=t$jscomp$0;this.text.indexArray.clear();this.icon.indexArray.clear();this.featureSortOrder=[];t$jscomp$0=0;for(var n$jscomp$0=this.symbolInstanceIndexes;t$jscomp$0<n$jscomp$0.length;t$jscomp$0+=1){var i=this.symbolInstances.get(n$jscomp$0[t$jscomp$0]);this.featureSortOrder.push(i.featureIndex);[i.rightJustifiedTextSymbolIndex,i.centerJustifiedTextSymbolIndex,i.leftJustifiedTextSymbolIndex].forEach(function(t,
r,n){0<=t&&n.indexOf(t)===r&&e.addIndicesForPlacedSymbol(e.text,t)});0<=i.verticalPlacedTextSymbolIndex&&this.addIndicesForPlacedSymbol(this.text,i.verticalPlacedTextSymbolIndex);0<=i.placedIconSymbolIndex&&this.addIndicesForPlacedSymbol(this.icon,i.placedIconSymbolIndex);0<=i.verticalPlacedIconSymbolIndex&&this.addIndicesForPlacedSymbol(this.icon,i.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray);this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}};
Dn("SymbolBucket",fl,{omit:["layers","collisionBoxArray","features","compareText"]});fl.MAX_GLYPHS=65535;fl.addDynamicAttributes=ll;var yl=new xi({"symbol-placement":new yi(zt.layout_symbol["symbol-placement"]),"symbol-spacing":new yi(zt.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new yi(zt.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new di(zt.layout_symbol["symbol-sort-key"]),"symbol-z-order":new yi(zt.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new yi(zt.layout_symbol["icon-allow-overlap"]),
"icon-ignore-placement":new yi(zt.layout_symbol["icon-ignore-placement"]),"icon-optional":new yi(zt.layout_symbol["icon-optional"]),"icon-rotation-alignment":new yi(zt.layout_symbol["icon-rotation-alignment"]),"icon-size":new di(zt.layout_symbol["icon-size"]),"icon-text-fit":new yi(zt.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new yi(zt.layout_symbol["icon-text-fit-padding"]),"icon-image":new di(zt.layout_symbol["icon-image"]),"icon-rotate":new di(zt.layout_symbol["icon-rotate"]),"icon-padding":new yi(zt.layout_symbol["icon-padding"]),
"icon-keep-upright":new yi(zt.layout_symbol["icon-keep-upright"]),"icon-offset":new di(zt.layout_symbol["icon-offset"]),"icon-anchor":new di(zt.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new yi(zt.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new yi(zt.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new yi(zt.layout_symbol["text-rotation-alignment"]),"text-field":new di(zt.layout_symbol["text-field"]),"text-font":new di(zt.layout_symbol["text-font"]),"text-size":new di(zt.layout_symbol["text-size"]),
"text-max-width":new di(zt.layout_symbol["text-max-width"]),"text-line-height":new yi(zt.layout_symbol["text-line-height"]),"text-letter-spacing":new di(zt.layout_symbol["text-letter-spacing"]),"text-justify":new di(zt.layout_symbol["text-justify"]),"text-radial-offset":new di(zt.layout_symbol["text-radial-offset"]),"text-variable-anchor":new yi(zt.layout_symbol["text-variable-anchor"]),"text-anchor":new di(zt.layout_symbol["text-anchor"]),"text-max-angle":new yi(zt.layout_symbol["text-max-angle"]),
"text-writing-mode":new yi(zt.layout_symbol["text-writing-mode"]),"text-rotate":new di(zt.layout_symbol["text-rotate"]),"text-padding":new yi(zt.layout_symbol["text-padding"]),"text-keep-upright":new yi(zt.layout_symbol["text-keep-upright"]),"text-transform":new di(zt.layout_symbol["text-transform"]),"text-offset":new di(zt.layout_symbol["text-offset"]),"text-allow-overlap":new yi(zt.layout_symbol["text-allow-overlap"]),"text-ignore-placement":new yi(zt.layout_symbol["text-ignore-placement"]),"text-optional":new yi(zt.layout_symbol["text-optional"])}),
dl={paint:new xi({"icon-opacity":new di(zt.paint_symbol["icon-opacity"]),"icon-color":new di(zt.paint_symbol["icon-color"]),"icon-halo-color":new di(zt.paint_symbol["icon-halo-color"]),"icon-halo-width":new di(zt.paint_symbol["icon-halo-width"]),"icon-halo-blur":new di(zt.paint_symbol["icon-halo-blur"]),"icon-translate":new yi(zt.paint_symbol["icon-translate"]),"icon-translate-anchor":new yi(zt.paint_symbol["icon-translate-anchor"]),"text-opacity":new di(zt.paint_symbol["text-opacity"]),"text-color":new di(zt.paint_symbol["text-color"],
{runtimeType:Ot,getOverride:function(t){return t.textColor},hasOverride:function(t){return!!t.textColor}}),"text-halo-color":new di(zt.paint_symbol["text-halo-color"]),"text-halo-width":new di(zt.paint_symbol["text-halo-width"]),"text-halo-blur":new di(zt.paint_symbol["text-halo-blur"]),"text-translate":new yi(zt.paint_symbol["text-translate"]),"text-translate-anchor":new yi(zt.paint_symbol["text-translate-anchor"])}),layout:yl},ml=function(t){this.type=t.property.overrides?t.property.overrides.runtimeType:
Ft;this.defaultValue=t};ml.prototype.evaluate=function(t){if(t.formattedSection){var e=this.defaultValue.property.overrides;if(e&&e.hasOverride(t.formattedSection))return e.getOverride(t.formattedSection)}return t.feature&&t.featureState?this.defaultValue.evaluate(t.feature,t.featureState):this.defaultValue.property.specification.default};ml.prototype.eachChild=function(t){this.defaultValue.isConstant()||t(this.defaultValue.value._styleExpression.expression)};ml.prototype.outputDefined=function(){return!1};
ml.prototype.serialize=function(){return null};Dn("FormatSectionOverride",ml,{omit:["defaultValue"]});var vl=function(t$jscomp$1){function e$jscomp$2(e){t$jscomp$1.call(this,e,dl)}return t$jscomp$1&&(e$jscomp$2.__proto__=t$jscomp$1),(e$jscomp$2.prototype=Object.create(t$jscomp$1&&t$jscomp$1.prototype)).constructor=e$jscomp$2,e$jscomp$2.prototype.recalculate=function(e,r){if(t$jscomp$1.prototype.recalculate.call(this,e,r),"auto"===this.layout.get("icon-rotation-alignment")&&(this.layout._values["icon-rotation-alignment"]=
"point"!==this.layout.get("symbol-placement")?"map":"viewport"),"auto"===this.layout.get("text-rotation-alignment")&&(this.layout._values["text-rotation-alignment"]="point"!==this.layout.get("symbol-placement")?"map":"viewport"),"auto"===this.layout.get("text-pitch-alignment")&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),"auto"===this.layout.get("icon-pitch-alignment")&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),
"point"===this.layout.get("symbol-placement"))if(e=this.layout.get("text-writing-mode")){r=[];for(var a=0;a<e.length;a+=1){var s=e[a];0>r.indexOf(s)&&r.push(s)}this.layout._values["text-writing-mode"]=r}else this.layout._values["text-writing-mode"]=["horizontal"];this._setPaintOverrides()},e$jscomp$2.prototype.getValueAndResolveTokens=function(t$jscomp$0,e$jscomp$1,r$jscomp$0,n){r$jscomp$0=this.layout.get(t$jscomp$0).evaluate(e$jscomp$1,{},r$jscomp$0,n);t$jscomp$0=this._unevaluatedLayout._values[t$jscomp$0];
return t$jscomp$0.isDataDriven()||Nr(t$jscomp$0.value)||!r$jscomp$0?r$jscomp$0:function(t,e$jscomp$0){return e$jscomp$0.replace(/{([^{}]+)}/g,function(e,r){return r in t?String(t[r]):""})}(e$jscomp$1.properties,r$jscomp$0)},e$jscomp$2.prototype.createBucket=function(t){return new fl(t)},e$jscomp$2.prototype.queryRadius=function(){return 0},e$jscomp$2.prototype.queryIntersectsFeature=function(){return!1},e$jscomp$2.prototype._setPaintOverrides=function(){for(var t=0,r=dl.paint.overridableProperties;t<
r.length;t+=1){var n=r[t];if(e$jscomp$2.hasPaintOverride(this.layout,n)){var a=this.paint.get(n);var i=new ml(a);i=new qr(i,a.property.specification);i="constant"===a.value.kind||"source"===a.value.kind?new Gr("source",i):new Zr("composite",i,a.value.zoomStops,a.value._interpolationType);this.paint._values[n]=new hi(a.property,i,a.parameters)}}},e$jscomp$2.prototype._handleOverridablePaintPropertyUpdate=function(t,r,n){return!(!this.layout||r.isDataDriven()||n.isDataDriven())&&e$jscomp$2.hasPaintOverride(this.layout,
t)},e$jscomp$2.hasPaintOverride=function(t$jscomp$0,e$jscomp$0){t$jscomp$0=t$jscomp$0.get("text-field");var n=dl.paint.properties[e$jscomp$0],i=!1,a=function(t){for(var e=0;e<t.length;e+=1)if(n.overrides&&n.overrides.hasOverride(t[e]))return void(i=!0)};if("constant"===t$jscomp$0.value.kind&&t$jscomp$0.value.value instanceof ee)a(t$jscomp$0.value.value.sections);else if("source"===t$jscomp$0.value.kind){var o=function(t){i||(t instanceof se&&ae(t.value)===Nt?a(t.value.sections):t instanceof ce?a(t.sections):
t.eachChild(o))};e$jscomp$0=t$jscomp$0.value;e$jscomp$0._styleExpression&&o(e$jscomp$0._styleExpression.expression)}return i},e$jscomp$2}(bi),gl={paint:new xi({"background-color":new yi(zt.paint_background["background-color"]),"background-pattern":new vi(zt.paint_background["background-pattern"]),"background-opacity":new yi(zt.paint_background["background-opacity"])})},xl=function(t){function e$jscomp$0(e){t.call(this,e,gl)}return t&&(e$jscomp$0.__proto__=t),(e$jscomp$0.prototype=Object.create(t&&
t.prototype)).constructor=e$jscomp$0,e$jscomp$0}(bi),bl={paint:new xi({"raster-opacity":new yi(zt.paint_raster["raster-opacity"]),"raster-hue-rotate":new yi(zt.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new yi(zt.paint_raster["raster-brightness-min"]),"raster-brightness-max":new yi(zt.paint_raster["raster-brightness-max"]),"raster-saturation":new yi(zt.paint_raster["raster-saturation"]),"raster-contrast":new yi(zt.paint_raster["raster-contrast"]),"raster-resampling":new yi(zt.paint_raster["raster-resampling"]),
"raster-fade-duration":new yi(zt.paint_raster["raster-fade-duration"])})},wl=function(t){function e$jscomp$0(e){t.call(this,e,bl)}return t&&(e$jscomp$0.__proto__=t),(e$jscomp$0.prototype=Object.create(t&&t.prototype)).constructor=e$jscomp$0,e$jscomp$0}(bi),_l=function(t$jscomp$0){function e$jscomp$0(e){t$jscomp$0.call(this,e,{});this.implementation=e}return t$jscomp$0&&(e$jscomp$0.__proto__=t$jscomp$0),(e$jscomp$0.prototype=Object.create(t$jscomp$0&&t$jscomp$0.prototype)).constructor=e$jscomp$0,e$jscomp$0.prototype.is3D=
function(){return"3d"===this.implementation.renderingMode},e$jscomp$0.prototype.hasOffscreenPass=function(){return void 0!==this.implementation.prerender},e$jscomp$0.prototype.recalculate=function(){},e$jscomp$0.prototype.updateTransitions=function(){},e$jscomp$0.prototype.hasTransition=function(){},e$jscomp$0.prototype.serialize=function(){},e$jscomp$0.prototype.onAdd=function(t){this.implementation.onAdd&&this.implementation.onAdd(t,t.painter.context.gl)},e$jscomp$0.prototype.onRemove=function(t){this.implementation.onRemove&&
this.implementation.onRemove(t,t.painter.context.gl)},e$jscomp$0}(bi),Al={circle:uo,heatmap:xo,hillshade:wo,fill:ss,"fill-extrusion":Ss,line:Fs,symbol:vl,background:xl,raster:wl},Sl=o$jscomp$2.HTMLImageElement,kl=o$jscomp$2.HTMLCanvasElement,Il=o$jscomp$2.HTMLVideoElement,zl=o$jscomp$2.ImageData,Cl=o$jscomp$2.ImageBitmap,Ml=function(t,e,r,n){this.context=t;this.format=r;this.texture=t.gl.createTexture();this.update(e,n)};Ml.prototype.update=function(t,e,r){var n=t.width,i=t.height,a=!(this.size&&
this.size[0]===n&&this.size[1]===i||r),o=this.context,s=o.gl;(this.useMipmap=!(!e||!e.useMipmap),s.bindTexture(s.TEXTURE_2D,this.texture),o.pixelStoreUnpackFlipY.set(!1),o.pixelStoreUnpack.set(1),o.pixelStoreUnpackPremultiplyAlpha.set(this.format===s.RGBA&&(!e||!1!==e.premultiply)),a)?(this.size=[n,i],t instanceof Sl||t instanceof kl||t instanceof Il||t instanceof zl||Cl&&t instanceof Cl?s.texImage2D(s.TEXTURE_2D,0,this.format,this.format,s.UNSIGNED_BYTE,t):s.texImage2D(s.TEXTURE_2D,0,this.format,
n,i,0,this.format,s.UNSIGNED_BYTE,t.data)):(r=r||{x:0,y:0},e=r.x,r=r.y,t instanceof Sl||t instanceof kl||t instanceof Il||t instanceof zl||Cl&&t instanceof Cl?s.texSubImage2D(s.TEXTURE_2D,0,e,r,s.RGBA,s.UNSIGNED_BYTE,t):s.texSubImage2D(s.TEXTURE_2D,0,e,r,n,i,s.RGBA,s.UNSIGNED_BYTE,t.data));this.useMipmap&&this.isSizePowerOfTwo()&&s.generateMipmap(s.TEXTURE_2D)};Ml.prototype.bind=function(t,e,r){var n=this.context.gl;n.bindTexture(n.TEXTURE_2D,this.texture);r!==n.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||
(r=n.LINEAR);t!==this.filter&&(n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MAG_FILTER,t),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,r||t),this.filter=t);e!==this.wrap&&(n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,e),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,e),this.wrap=e)};Ml.prototype.isSizePowerOfTwo=function(){return this.size[0]===this.size[1]&&0==Math.log(this.size[0])/Math.LN2%1};Ml.prototype.destroy=function(){this.context.gl.deleteTexture(this.texture);this.texture=null};var El=function(t){var e=
this;this._callback=t;this._triggered=!1;"undefined"!=typeof MessageChannel&&(this._channel=new MessageChannel,this._channel.port2.onmessage=function(){e._triggered=!1;e._callback()})};El.prototype.trigger=function(){var t=this;this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(function(){t._triggered=!1;t._callback()},0))};El.prototype.remove=function(){delete this._channel;this._callback=function(){}};var Tl=function(t,e,r){this.target=t;this.parent=
e;this.mapId=r;this.callbacks={};this.tasks={};this.taskQueue=[];this.cancelCallbacks={};m$jscomp$2(["receive","process"],this);this.invoker=new El(this.process);this.target.addEventListener("message",this.receive,!1);this.globalScope=k$jscomp$2()?t:o$jscomp$2};Tl.prototype.send=function(t,e,r,n,i){var a=this;void 0===i&&(i=!1);var o=Math.round(1E18*Math.random()).toString(36).substring(0,10);r&&(this.callbacks[o]=r);var s=C$jscomp$1(this.globalScope)?void 0:[];return this.target.postMessage({id:o,
type:t,hasCallback:!!r,targetMapId:n,mustQueue:i,sourceMapId:this.mapId,data:Un(e,s)},s),{cancel:function(){r&&delete a.callbacks[o];a.target.postMessage({id:o,type:"\x3ccancel\x3e",targetMapId:n,sourceMapId:a.mapId})}}};Tl.prototype.receive=function(t){var e=t.data;!(t=e.id)||e.targetMapId&&this.mapId!==e.targetMapId||("\x3ccancel\x3e"===e.type?(delete this.tasks[t],e=this.cancelCallbacks[t],delete this.cancelCallbacks[t],e&&e()):k$jscomp$2()||e.mustQueue?(this.tasks[t]=e,this.taskQueue.push(t),
this.invoker.trigger()):this.processTask(t,e))};Tl.prototype.process=function(){if(this.taskQueue.length){var t=this.taskQueue.shift(),e=this.tasks[t];delete this.tasks[t];this.taskQueue.length&&this.invoker.trigger();e&&this.processTask(t,e)}};Tl.prototype.processTask=function(t$jscomp$0,e$jscomp$0){var r=this;if("\x3cresponse\x3e"===e$jscomp$0.type){var n$jscomp$0=this.callbacks[t$jscomp$0];delete this.callbacks[t$jscomp$0];n$jscomp$0&&(e$jscomp$0.error?n$jscomp$0(jn(e$jscomp$0.error)):n$jscomp$0(null,
jn(e$jscomp$0.data)))}else{var i=!1,a=C$jscomp$1(this.globalScope)?void 0:[];n$jscomp$0=e$jscomp$0.hasCallback?function(e,n){i=!0;delete r.cancelCallbacks[t$jscomp$0];r.target.postMessage({id:t$jscomp$0,type:"\x3cresponse\x3e",sourceMapId:r.mapId,error:e?Un(e):null,data:Un(n,a)},a)}:function(t){i=!0};var s=null,u=jn(e$jscomp$0.data);this.parent[e$jscomp$0.type]?s=this.parent[e$jscomp$0.type](e$jscomp$0.sourceMapId,u,n$jscomp$0):this.parent.getWorkerSource?(s=e$jscomp$0.type.split("."),s=this.parent.getWorkerSource(e$jscomp$0.sourceMapId,
s[0],u.source)[s[1]](u,n$jscomp$0)):n$jscomp$0(Error("Could not find function "+e$jscomp$0.type));!i&&s&&s.cancel&&(this.cancelCallbacks[t$jscomp$0]=s.cancel)}};Tl.prototype.remove=function(){this.invoker.remove();this.target.removeEventListener("message",this.receive,!1)};var Bl=function(t,e){t&&(e?this.setSouthWest(t).setNorthEast(e):4===t.length?this.setSouthWest([t[0],t[1]]).setNorthEast([t[2],t[3]]):this.setSouthWest(t[0]).setNorthEast(t[1]))};Bl.prototype.setNorthEast=function(t){return this._ne=
t instanceof Vl?new Vl(t.lng,t.lat):Vl.convert(t),this};Bl.prototype.setSouthWest=function(t){return this._sw=t instanceof Vl?new Vl(t.lng,t.lat):Vl.convert(t),this};Bl.prototype.extend=function(t){var e,n=this._sw,i=this._ne;if(t instanceof Vl)var r=e=t;else{if(!(t instanceof Bl))return Array.isArray(t)?4===t.length||t.every(Array.isArray)?this.extend(Bl.convert(t)):this.extend(Vl.convert(t)):this;if(r=t._ne,!(e=t._sw)||!r)return this}return n||i?(n.lng=Math.min(e.lng,n.lng),n.lat=Math.min(e.lat,
n.lat),i.lng=Math.max(r.lng,i.lng),i.lat=Math.max(r.lat,i.lat)):(this._sw=new Vl(e.lng,e.lat),this._ne=new Vl(r.lng,r.lat)),this};Bl.prototype.getCenter=function(){return new Vl((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)};Bl.prototype.getSouthWest=function(){return this._sw};Bl.prototype.getNorthEast=function(){return this._ne};Bl.prototype.getNorthWest=function(){return new Vl(this.getWest(),this.getNorth())};Bl.prototype.getSouthEast=function(){return new Vl(this.getEast(),this.getSouth())};
Bl.prototype.getWest=function(){return this._sw.lng};Bl.prototype.getSouth=function(){return this._sw.lat};Bl.prototype.getEast=function(){return this._ne.lng};Bl.prototype.getNorth=function(){return this._ne.lat};Bl.prototype.toArray=function(){return[this._sw.toArray(),this._ne.toArray()]};Bl.prototype.toString=function(){return"LngLatBounds("+this._sw.toString()+", "+this._ne.toString()+")"};Bl.prototype.isEmpty=function(){return!(this._sw&&this._ne)};Bl.prototype.contains=function(t){var e=Vl.convert(t);
t=e.lng;e=e.lat;var i=this._sw.lng<=t&&t<=this._ne.lng;return this._sw.lng>this._ne.lng&&(i=this._sw.lng>=t&&t>=this._ne.lng),this._sw.lat<=e&&e<=this._ne.lat&&i};Bl.convert=function(t){return!t||t instanceof Bl?t:new Bl(t)};var Vl=function(t,e){if(isNaN(t)||isNaN(e))throw Error("Invalid LngLat object: ("+t+", "+e+")");if(this.lng=+t,this.lat=+e,90<this.lat||-90>this.lat)throw Error("Invalid LngLat latitude value: must be between -90 and 90");};Vl.prototype.wrap=function(){return new Vl(p$jscomp$3(this.lng,
-180,180),this.lat)};Vl.prototype.toArray=function(){return[this.lng,this.lat]};Vl.prototype.toString=function(){return"LngLat("+this.lng+", "+this.lat+")"};Vl.prototype.distanceTo=function(t){var e=Math.PI/180,r=this.lat*e,n=t.lat*e;return 6371008.8*Math.acos(Math.min(Math.sin(r)*Math.sin(n)+Math.cos(r)*Math.cos(n)*Math.cos((t.lng-this.lng)*e),1))};Vl.prototype.toBounds=function(t){void 0===t&&(t=0);t=360*t/40075017;var r=t/Math.cos(Math.PI/180*this.lat);return new Bl(new Vl(this.lng-r,this.lat-
t),new Vl(this.lng+r,this.lat+t))};Vl.convert=function(t){if(t instanceof Vl)return t;if(Array.isArray(t)&&(2===t.length||3===t.length))return new Vl(Number(t[0]),Number(t[1]));if(!Array.isArray(t)&&"object"==typeof t&&null!==t)return new Vl(Number("lng"in t?t.lng:t.lon),Number(t.lat));throw Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: \x3clng\x3e, lat: \x3clat\x3e}, an object {lon: \x3clng\x3e, lat: \x3clat\x3e}, or an array of [\x3clng\x3e, \x3clat\x3e]");
};var Fl=1.27420176E7*Math.PI,jl=function(t,e,r){void 0===r&&(r=0);this.x=+t;this.y=+e;this.z=+r};jl.fromLngLat=function(t,e){void 0===e&&(e=0);t=Vl.convert(t);return new jl(Ll(t.lng),Rl(t.lat),e/(Fl*Math.cos(t.lat*Math.PI/180)))};jl.prototype.toLngLat=function(){return new Vl(360*this.x-180,Ul(this.y))};jl.prototype.toAltitude=function(){return this.z*Fl*Math.cos(Ul(this.y)*Math.PI/180)};jl.prototype.meterInMercatorCoordinateUnits=function(){return 1/Fl*(t=Ul(this.y),1/Math.cos(t*Math.PI/180));var t};
var ql=function(t,e,r){this.z=t;this.x=e;this.y=r;this.key=Gl(0,t,t,e,r)};ql.prototype.equals=function(t){return this.z===t.z&&this.x===t.x&&this.y===t.y};ql.prototype.url=function(t,e){var r,n,i,a,o,s=(n=this.y,i=this.z,a=Pl(256*(r=this.x),256*(n=Math.pow(2,i)-n-1),i),o=Pl(256*(r+1),256*(n+1),i),a[0]+","+a[1]+","+o[0]+","+o[1]),u;r="";for(n=this.z;0<n;n--)r+=(this.x&(u=1<<n-1)?1:0)+(this.y&u?2:0);u=r;return t[(this.x+this.y)%t.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace("{z}",
String(this.z)).replace("{x}",String(this.x)).replace("{y}",String("tms"===e?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",u).replace("{bbox-epsg-3857}",s)};ql.prototype.getTilePoint=function(t){var e=Math.pow(2,this.z);return new i$jscomp$2(8192*(t.x*e-this.x),8192*(t.y*e-this.y))};ql.prototype.toString=function(){return this.z+"/"+this.x+"/"+this.y};var Nl=function(t,e){this.wrap=t;this.canonical=e;this.key=Gl(t,e.z,e.z,e.x,e.y)},Kl=function(t,e,r,n,i){this.overscaledZ=t;this.wrap=e;
this.canonical=new ql(r,+n,+i);this.key=Gl(e,t,r,n,i)};Kl.prototype.equals=function(t){return this.overscaledZ===t.overscaledZ&&this.wrap===t.wrap&&this.canonical.equals(t.canonical)};Kl.prototype.scaledTo=function(t){var e=this.canonical.z-t;return t>this.canonical.z?new Kl(t,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new Kl(t,this.wrap,t,this.canonical.x>>e,this.canonical.y>>e)};Kl.prototype.calculateScaledKey=function(t,e){var r=this.canonical.z-t;return t>this.canonical.z?Gl(this.wrap*
+e,t,this.canonical.z,this.canonical.x,this.canonical.y):Gl(this.wrap*+e,t,t,this.canonical.x>>r,this.canonical.y>>r)};Kl.prototype.isChildOf=function(t){if(t.wrap!==this.wrap)return!1;var e=this.canonical.z-t.canonical.z;return 0===t.overscaledZ||t.overscaledZ<this.overscaledZ&&t.canonical.x===this.canonical.x>>e&&t.canonical.y===this.canonical.y>>e};Kl.prototype.children=function(t){if(this.overscaledZ>=t)return[new Kl(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];
t=this.canonical.z+1;var r=2*this.canonical.x,n=2*this.canonical.y;return[new Kl(t,this.wrap,t,r,n),new Kl(t,this.wrap,t,r+1,n),new Kl(t,this.wrap,t,r,n+1),new Kl(t,this.wrap,t,r+1,n+1)]};Kl.prototype.isLessThan=function(t){return this.wrap<t.wrap||!(this.wrap>t.wrap)&&(this.overscaledZ<t.overscaledZ||!(this.overscaledZ>t.overscaledZ)&&(this.canonical.x<t.canonical.x||!(this.canonical.x>t.canonical.x)&&this.canonical.y<t.canonical.y))};Kl.prototype.wrapped=function(){return new Kl(this.overscaledZ,
0,this.canonical.z,this.canonical.x,this.canonical.y)};Kl.prototype.unwrapTo=function(t){return new Kl(this.overscaledZ,t,this.canonical.z,this.canonical.x,this.canonical.y)};Kl.prototype.overscaleFactor=function(){return Math.pow(2,this.overscaledZ-this.canonical.z)};Kl.prototype.toUnwrapped=function(){return new Nl(this.wrap,this.canonical)};Kl.prototype.toString=function(){return this.overscaledZ+"/"+this.canonical.x+"/"+this.canonical.y};Kl.prototype.getTilePoint=function(t){return this.canonical.getTilePoint(new jl(t.x-
this.wrap,t.y))};Dn("CanonicalTileID",ql);Dn("OverscaledTileID",Kl,{omit:["posMatrix"]});var Zl=function(t,e,r){if(this.uid=t,e.height!==e.width)throw new RangeError("DEM tiles must be square");if(r&&"mapbox"!==r&&"terrarium"!==r)return _$jscomp$0('"'+r+'" is not a valid encoding type. Valid types include "mapbox" and "terrarium".');this.stride=e.height;t=this.dim=e.height-2;this.data=new Uint32Array(e.data.buffer);this.encoding=r||"mapbox";for(e=0;e<t;e++)this.data[this._idx(-1,e)]=this.data[this._idx(0,
e)],this.data[this._idx(t,e)]=this.data[this._idx(t-1,e)],this.data[this._idx(e,-1)]=this.data[this._idx(e,0)],this.data[this._idx(e,t)]=this.data[this._idx(e,t-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)];this.data[this._idx(t,-1)]=this.data[this._idx(t-1,0)];this.data[this._idx(-1,t)]=this.data[this._idx(0,t-1)];this.data[this._idx(t,t)]=this.data[this._idx(t-1,t-1)]};Zl.prototype.get=function(t,e){var r=new Uint8Array(this.data.buffer);t=4*this._idx(t,e);return("terrarium"===this.encoding?
this._unpackTerrarium:this._unpackMapbox)(r[t],r[t+1],r[t+2])};Zl.prototype.getUnpackVector=function(){return"terrarium"===this.encoding?[256,1,1/256,32768]:[6553.6,25.6,.1,1E4]};Zl.prototype._idx=function(t,e){if(-1>t||t>=this.dim+1||-1>e||e>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(e+1)*this.stride+(t+1)};Zl.prototype._unpackMapbox=function(t,e,r){return(65536*t+256*e+r)/10-1E4};Zl.prototype._unpackTerrarium=function(t,e,r){return 256*t+e+r/256-32768};
Zl.prototype.getPixels=function(){return new mo({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))};Zl.prototype.backfillBorder=function(t,e,r){if(this.dim!==t.dim)throw Error("dem dimension mismatch");var n=e*this.dim,i=e*this.dim+this.dim,a=r*this.dim,o=r*this.dim+this.dim;switch(e){case -1:n=i-1;break;case 1:i=n+1}switch(r){case -1:a=o-1;break;case 1:o=a+1}e=-e*this.dim;for(r=-r*this.dim;a<o;a++)for(var p=n;p<i;p++)this.data[this._idx(p,a)]=t.data[this._idx(p+e,a+r)]};Dn("DEMData",
Zl);var Xl=function(t){this._stringToNumber={};this._numberToString=[];for(var e=0;e<t.length;e++){var r=t[e];this._stringToNumber[r]=e;this._numberToString[e]=r}};Xl.prototype.encode=function(t){return this._stringToNumber[t]};Xl.prototype.decode=function(t){return this._numberToString[t]};var Jl=function(t,e,r,n,i){this.type="Feature";this._vectorTileFeature=t;t._z=e;t._x=r;t._y=n;this.properties=t.properties;this.id=i},Hl={geometry:{configurable:!0}};Hl.geometry.get=function(){return void 0===
this._geometry&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry};Hl.geometry.set=function(t){this._geometry=t};Jl.prototype.toJSON=function(){var t={geometry:this.geometry},e;for(e in this)"_geometry"!==e&&"_vectorTileFeature"!==e&&(t[e]=this[e]);return t};Object.defineProperties(Jl.prototype,Hl);var Yl=function(){this.state={};this.stateChanges={};this.deletedStates={}};Yl.prototype.updateState=
function(t,e,r){e=String(e);if(this.stateChanges[t]=this.stateChanges[t]||{},this.stateChanges[t][e]=this.stateChanges[t][e]||{},c$jscomp$4(this.stateChanges[t][e],r),null===this.deletedStates[t])for(var i in this.deletedStates[t]={},this.state[t])i!==e&&(this.deletedStates[t][i]=null);else if(this.deletedStates[t]&&null===this.deletedStates[t][e])for(var a in this.deletedStates[t][e]={},this.state[t][e])r[a]||(this.deletedStates[t][e][a]=null);else for(var o in r)this.deletedStates[t]&&this.deletedStates[t][e]&&
null===this.deletedStates[t][e][o]&&delete this.deletedStates[t][e][o]};Yl.prototype.removeFeatureState=function(t,e,r){if(null!==this.deletedStates[t]){var n=String(e);if(this.deletedStates[t]=this.deletedStates[t]||{},r&&void 0!==e)null!==this.deletedStates[t][n]&&(this.deletedStates[t][n]=this.deletedStates[t][n]||{},this.deletedStates[t][n][r]=null);else if(void 0!==e)if(this.stateChanges[t]&&this.stateChanges[t][n])for(r in this.deletedStates[t][n]={},this.stateChanges[t][n])this.deletedStates[t][n][r]=
null;else this.deletedStates[t][n]=null;else this.deletedStates[t]=null}};Yl.prototype.getState=function(t,e){var r=String(e);r=c$jscomp$4({},(this.state[t]||{})[r],(this.stateChanges[t]||{})[r]);if(null===this.deletedStates[t])return{};if(this.deletedStates[t]){t=this.deletedStates[t][e];if(null===t)return{};for(var a in t)delete r[a]}return r};Yl.prototype.initializeTileState=function(t,e){t.setFeatureState(this.state,e)};Yl.prototype.coalesceChanges=function(t,e){var r={};for(n in this.stateChanges){this.state[n]=
this.state[n]||{};var i={},a;for(a in this.stateChanges[n])this.state[n][a]||(this.state[n][a]={}),c$jscomp$4(this.state[n][a],this.stateChanges[n][a]),i[a]=this.state[n][a];r[n]=i}for(var o in this.deletedStates){this.state[o]=this.state[o]||{};var n={};if(null===this.deletedStates[o])for(var u in this.state[o])n[u]={},this.state[o][u]={};else for(var l in this.deletedStates[o]){if(null===this.deletedStates[o][l])this.state[o][l]={};else for(i=0,a=Object.keys(this.deletedStates[o][l]);i<a.length;i+=
1)delete this.state[o][l][a[i]];n[l]=this.state[o][l]}r[o]=r[o]||{};c$jscomp$4(r[o],n)}if(this.stateChanges={},this.deletedStates={},0!==Object.keys(r).length)for(var f in t)t[f].setFeatureState(r,e)};var $l=function(t,e){this.tileID=t;this.x=t.canonical.x;this.y=t.canonical.y;this.z=t.canonical.z;this.grid=new Pn(8192,16,0);this.grid3D=new Pn(8192,16,0);this.featureIndexArray=new na;this.promoteId=e};$l.prototype.insert=function(t,e,r,n,i,a){t=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(r,
n,i);r=a?this.grid3D:this.grid;for(n=0;n<e.length;n++){i=e[n];a=[1/0,1/0,-1/0,-1/0];for(var c=0;c<i.length;c++){var h=i[c];a[0]=Math.min(a[0],h.x);a[1]=Math.min(a[1],h.y);a[2]=Math.max(a[2],h.x);a[3]=Math.max(a[3],h.y)}8192>a[0]&&8192>a[1]&&0<=a[2]&&0<=a[3]&&r.insert(t,a[0],a[1],a[2],a[3])}};$l.prototype.loadVTLayers=function(){return this.vtLayers||(this.vtLayers=(new vs.VectorTile(new Xs(this.rawTileData))).layers,this.sourceLayerCoder=new Xl(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),
this.vtLayers};$l.prototype.query=function(t,e$jscomp$0,r$jscomp$0,n$jscomp$0){var a$jscomp$0=this;this.loadVTLayers();var o$jscomp$0=t.params||{},s=8192/t.tileSize/t.scale,u$jscomp$0=nn(o$jscomp$0.filter),l=t.queryGeometry,p=t.queryPadding*s,c=Ql(l),h=this.grid.query(c.minX-p,c.minY-p,c.maxX+p,c.maxY+p),f$jscomp$0=Ql(t.cameraQueryGeometry);c=0;for(f$jscomp$0=this.grid3D.query(f$jscomp$0.minX-p,f$jscomp$0.minY-p,f$jscomp$0.maxX+p,f$jscomp$0.maxY+p,function(e,r,n,a){a:{var JSCompiler_inline_result=
t.cameraQueryGeometry;e-=p;r-=p;n+=p;a+=p;for(var o=0;o<JSCompiler_inline_result.length;o+=1){var u=JSCompiler_inline_result[o];if(e<=u.x&&r<=u.y&&n>=u.x&&a>=u.y){JSCompiler_inline_result=!0;break a}}e=[new i$jscomp$2(e,r),new i$jscomp$2(e,a),new i$jscomp$2(n,a),new i$jscomp$2(n,r)];if(2<JSCompiler_inline_result.length)for(r=0;r<e.length;r+=1)if(Ha(JSCompiler_inline_result,e[r])){JSCompiler_inline_result=!0;break a}for(r=0;r<JSCompiler_inline_result.length-1;r++){a=JSCompiler_inline_result[r];n=JSCompiler_inline_result[r+
1];o=e;u=o[0];var i=o[2];a.x<u.x&&n.x<u.x||a.x>i.x&&n.x>i.x||a.y<u.y&&n.y<u.y||a.y>i.y&&n.y>i.y?a=!1:(u=A$jscomp$2(a,n,o[0]),a=u!==A$jscomp$2(a,n,o[1])||u!==A$jscomp$2(a,n,o[2])||u!==A$jscomp$2(a,n,o[3]));if(a){JSCompiler_inline_result=!0;break a}}JSCompiler_inline_result=!1}return JSCompiler_inline_result});c<f$jscomp$0.length;c+=1)h.push(f$jscomp$0[c]);h.sort(tp);var v,g={};c=function(i){i=h[i];if(i!==v){v=i;i=a$jscomp$0.featureIndexArray.get(i);var f=null;a$jscomp$0.loadMatchingFeature(g,i.bucketIndex,
i.sourceLayerIndex,i.featureIndex,u$jscomp$0,o$jscomp$0.layers,o$jscomp$0.availableImages,e$jscomp$0,r$jscomp$0,n$jscomp$0,function(e,r,n){return f||(f=La(e)),r.queryIntersectsFeature(l,e,n,f,a$jscomp$0.z,t.transform,s,t.pixelPosMatrix)})}};for(f$jscomp$0=0;f$jscomp$0<h.length;f$jscomp$0++)c(f$jscomp$0);return g};$l.prototype.loadMatchingFeature=function(t,e,r,n,i,a,o,s,u,l,p){e=this.bucketLayerIDs[e];var JSCompiler_temp;if(!(JSCompiler_temp=!a))a:{for(JSCompiler_temp=0;JSCompiler_temp<a.length;JSCompiler_temp++)if(0<=
e.indexOf(a[JSCompiler_temp])){JSCompiler_temp=!0;break a}JSCompiler_temp=!1}if(JSCompiler_temp&&(JSCompiler_temp=this.sourceLayerCoder.decode(r),r=this.vtLayers[JSCompiler_temp].feature(n),i.filter(new ai(this.tileID.overscaledZ),r)))for(i=this.getId(r,JSCompiler_temp),JSCompiler_temp=0;JSCompiler_temp<e.length;JSCompiler_temp++){var m=e[JSCompiler_temp];if(!(a&&0>a.indexOf(m))){var v=s[m];if(v){var g={};void 0!==i&&l&&(g=l.getState(v.sourceLayer||"_geojsonTileLayer",i));var x=u[m];x.paint=Wl(x.paint,
v.paint,r,g,o);x.layout=Wl(x.layout,v.layout,r,g,o);if(v=!p||p(r,v,g))g=new Jl(r,this.z,this.x,this.y,i),g.layer=x,x=t[m],void 0===x&&(x=t[m]=[]),x.push({featureIndex:n,feature:g,intersectionZ:v})}}}};$l.prototype.lookupSymbolFeatures=function(t,e,r,n,i,a,o,s){var u={};this.loadVTLayers();i=nn(i);for(var p=0;p<t.length;p+=1)this.loadMatchingFeature(u,r,n,t[p],i,a,o,s,e);return u};$l.prototype.hasLayer=function(t){for(var e=0,r=this.bucketLayerIDs;e<r.length;e+=1)for(var n=0,i=r[e];n<i.length;n+=1)if(t===
i[n])return!0;return!1};$l.prototype.getId=function(t,e){var r=t.id;return this.promoteId&&"boolean"==typeof(r=t.properties["string"==typeof this.promoteId?this.promoteId:this.promoteId[e]])&&(r=Number(r)),r};Dn("FeatureIndex",$l,{omit:["rawTileData","sourceLayerCoder"]});var ep=function(t,e){this.tileID=t;this.uid=h$jscomp$2++;this.uses=0;this.tileSize=e;this.buckets={};this.expirationTime=null;this.queryPadding=0;this.hasRTLText=this.hasSymbolBuckets=!1;this.dependencies={};this.expiredRequestCount=
0;this.state="loading"};ep.prototype.registerFadeDuration=function(t){t+=this.timeAdded;t<L$jscomp$1.now()||this.fadeEndTime&&t<this.fadeEndTime||(this.fadeEndTime=t)};ep.prototype.wasRequested=function(){return"errored"===this.state||"loaded"===this.state||"reloading"===this.state};ep.prototype.loadVectorData=function(t$jscomp$2,e$jscomp$1,r$jscomp$0){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",t$jscomp$2){for(var n$jscomp$1 in t$jscomp$2.featureIndex&&(this.latestFeatureIndex=
t$jscomp$2.featureIndex,t$jscomp$2.rawTileData?(this.latestRawTileData=t$jscomp$2.rawTileData,this.latestFeatureIndex.rawTileData=t$jscomp$2.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=t$jscomp$2.collisionBoxArray,this.buckets=function(t$jscomp$1,e$jscomp$0){var r={};if(!e$jscomp$0)return r;for(var n$jscomp$0=function(){var t$jscomp$0=a[i],n=t$jscomp$0.layerIds.map(function(t){return e$jscomp$0.getLayer(t)}).filter(Boolean);
if(0!==n.length){t$jscomp$0.layers=n;t$jscomp$0.stateDependentLayerIds&&(t$jscomp$0.stateDependentLayers=t$jscomp$0.stateDependentLayerIds.map(function(t){return n.filter(function(e){return e.id===t})[0]}));for(var o=0;o<n.length;o+=1)r[n[o].id]=t$jscomp$0}},i=0,a=t$jscomp$1;i<a.length;i+=1)n$jscomp$0();return r}(t$jscomp$2.buckets,e$jscomp$1.style),this.hasSymbolBuckets=!1,this.buckets){var i$jscomp$0=this.buckets[n$jscomp$1];if(i$jscomp$0 instanceof fl){if(this.hasSymbolBuckets=!0,!r$jscomp$0)break;
i$jscomp$0.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(var a$jscomp$0 in this.buckets)if(r$jscomp$0=this.buckets[a$jscomp$0],r$jscomp$0 instanceof fl&&r$jscomp$0.hasRTLText){this.hasRTLText=!0;ii.isLoading()||ii.isLoaded()||"deferred"!==$n||ni();break}for(var s in this.queryPadding=0,this.buckets)a$jscomp$0=this.buckets[s],this.queryPadding=Math.max(this.queryPadding,e$jscomp$1.style.getLayer(s).queryRadius(a$jscomp$0));t$jscomp$2.imageAtlas&&(this.imageAtlas=t$jscomp$2.imageAtlas);
t$jscomp$2.glyphAtlasImage&&(this.glyphAtlasImage=t$jscomp$2.glyphAtlasImage)}else this.collisionBoxArray=new Hi};ep.prototype.unloadVectorData=function(){for(var t in this.buckets)this.buckets[t].destroy();this.buckets={};this.imageAtlasTexture&&this.imageAtlasTexture.destroy();this.imageAtlas&&(this.imageAtlas=null);this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy();this.latestFeatureIndex=null;this.state="unloaded"};ep.prototype.getBucket=function(t){return this.buckets[t.id]};ep.prototype.upload=
function(t){for(var e in this.buckets){var r=this.buckets[e];r.uploadPending()&&r.upload(t)}e=t.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new Ml(t,this.imageAtlas.image,e.RGBA),this.imageAtlas.uploaded=!0);this.glyphAtlasImage&&(this.glyphAtlasTexture=new Ml(t,this.glyphAtlasImage,e.ALPHA),this.glyphAtlasImage=null)};ep.prototype.prepare=function(t){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(t,this.imageAtlasTexture)};ep.prototype.queryRenderedFeatures=function(t,
e,r,n,i,a,o,s,u,l){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:n,cameraQueryGeometry:i,scale:a,tileSize:this.tileSize,pixelPosMatrix:l,transform:s,params:o,queryPadding:this.queryPadding*u},t,e,r):{}};ep.prototype.querySourceFeatures=function(t,e){var r=this.latestFeatureIndex;if(r&&r.rawTileData){var n=r.loadVTLayers(),i=e?e.sourceLayer:"";if(n=n._geojsonTileLayer||n[i]){e=nn(e&&e.filter);var s=this.tileID.canonical,u=s.z,l=s.x;
s=s.y;for(var c={z:u,x:l,y:s},h=0;h<n.length;h++){var f=n.feature(h);if(e.filter(new ai(this.tileID.overscaledZ),f)){var y=r.getId(f,i);f=new Jl(f,u,l,s,y);f.tile=c;t.push(f)}}}}};ep.prototype.hasData=function(){return"loaded"===this.state||"reloading"===this.state||"expired"===this.state};ep.prototype.patternsLoaded=function(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length};ep.prototype.setExpiryData=function(t){var e=this.expirationTime;t.cacheControl?(t=I$jscomp$2(t.cacheControl),
t["max-age"]&&(this.expirationTime=Date.now()+1E3*t["max-age"])):t.expires&&(this.expirationTime=(new Date(t.expires)).getTime());if(this.expirationTime){t=Date.now();var i=!1;this.expirationTime>t?i=!1:e?this.expirationTime<e?i=!0:(e=this.expirationTime-e)?this.expirationTime=t+Math.max(e,3E4):i=!0:i=!0;i?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}};ep.prototype.getExpiryTimeout=function(){if(this.expirationTime)return this.expiredRequestCount?1E3*(1<<Math.min(this.expiredRequestCount-
1,31)):Math.min(this.expirationTime-(new Date).getTime(),Math.pow(2,31)-1)};ep.prototype.setFeatureState=function(t,e){if(this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData&&0!==Object.keys(t).length){var r=this.latestFeatureIndex.loadVTLayers(),n;for(n in this.buckets)if(e.style.hasLayer(n)){var i=this.buckets[n],a=i.layers[0].sourceLayer||"_geojsonTileLayer",o=r[a];a=t[a];o&&a&&0!==Object.keys(a).length&&(i.update(a,o,this.imageAtlas&&this.imageAtlas.patternPositions||{}),(o=e&&e.style&&
e.style.getLayer(n))&&(this.queryPadding=Math.max(this.queryPadding,o.queryRadius(i))))}}};ep.prototype.holdingForFade=function(){return void 0!==this.symbolFadeHoldUntil};ep.prototype.symbolFadeFinished=function(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<L$jscomp$1.now()};ep.prototype.clearFadeHold=function(){this.symbolFadeHoldUntil=void 0};ep.prototype.setHoldDuration=function(t){this.symbolFadeHoldUntil=L$jscomp$1.now()+t};ep.prototype.setDependencies=function(t,e){for(var r=
{},n=0;n<e.length;n+=1)r[e[n]]=!0;this.dependencies[t]=r};ep.prototype.hasDependency=function(t,e){for(var r=0;r<t.length;r+=1){var i=this.dependencies[t[r]];if(i)for(var a=0,o=e;a<o.length;a+=1)if(i[o[a]])return!0}return!1};var rp=o$jscomp$2.performance,np=function(t){this._marks={start:[t.url,"start"].join("#"),end:[t.url,"end"].join("#"),measure:t.url.toString()};rp.mark(this._marks.start)};np.prototype.finish=function(){rp.mark(this._marks.end);var t=rp.getEntriesByName(this._marks.measure);return 0===
t.length&&(rp.measure(this._marks.measure,this._marks.start,this._marks.end),t=rp.getEntriesByName(this._marks.measure),rp.clearMarks(this._marks.start),rp.clearMarks(this._marks.end),rp.clearMeasures(this._marks.measure)),t};t$jscomp$4.Actor=Tl;t$jscomp$4.AlphaImage=yo;t$jscomp$4.CanonicalTileID=ql;t$jscomp$4.CollisionBoxArray=Hi;t$jscomp$4.Color=Wt;t$jscomp$4.DEMData=Zl;t$jscomp$4.DataConstantProperty=yi;t$jscomp$4.DictionaryCoder=Xl;t$jscomp$4.EXTENT=8192;t$jscomp$4.ErrorEvent=kt;t$jscomp$4.EvaluationParameters=
ai;t$jscomp$4.Event=St;t$jscomp$4.Evented=It;t$jscomp$4.FeatureIndex=$l;t$jscomp$4.FillBucket=is;t$jscomp$4.FillExtrusionBucket=ws;t$jscomp$4.ImageAtlas=mu;t$jscomp$4.ImagePosition=yu;t$jscomp$4.LineBucket=Ts;t$jscomp$4.LngLat=Vl;t$jscomp$4.LngLatBounds=Bl;t$jscomp$4.MercatorCoordinate=jl;t$jscomp$4.ONE_EM=24;t$jscomp$4.OverscaledTileID=Kl;t$jscomp$4.Point=i$jscomp$2;t$jscomp$4.Point$1=i$jscomp$2;t$jscomp$4.Properties=xi;t$jscomp$4.Protobuf=Xs;t$jscomp$4.RGBAImage=mo;t$jscomp$4.RequestManager=K$jscomp$0;
t$jscomp$4.RequestPerformance=np;t$jscomp$4.ResourceType=ft;t$jscomp$4.SegmentVector=aa;t$jscomp$4.SourceFeatureState=Yl;t$jscomp$4.StructArrayLayout1ui2=Gi;t$jscomp$4.StructArrayLayout2f1f2i16=Di;t$jscomp$4.StructArrayLayout2i4=Ii;t$jscomp$4.StructArrayLayout3ui6=Ri;t$jscomp$4.StructArrayLayout4i8=zi;t$jscomp$4.SymbolBucket=fl;t$jscomp$4.Texture=Ml;t$jscomp$4.Tile=ep;t$jscomp$4.Transitionable=ui;t$jscomp$4.Uniform1f=ga;t$jscomp$4.Uniform1i=va;t$jscomp$4.Uniform2f=xa;t$jscomp$4.Uniform3f=ba;t$jscomp$4.Uniform4f=
wa;t$jscomp$4.UniformColor=_a;t$jscomp$4.UniformMatrix4f=Sa;t$jscomp$4.UnwrappedTileID=Nl;t$jscomp$4.ValidationError=Ct;t$jscomp$4.WritingMode=vu;t$jscomp$4.ZoomHistory=qn;t$jscomp$4.add=function(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t[2]=e[2]+r[2],t};t$jscomp$4.addDynamicAttributes=ll;t$jscomp$4.asyncAll=function(t$jscomp$1,e$jscomp$0,r){if(!t$jscomp$1.length)return r(null,[]);var n=t$jscomp$1.length,i=Array(t$jscomp$1.length),a=null;t$jscomp$1.forEach(function(t$jscomp$0,o){e$jscomp$0(t$jscomp$0,
function(t,e){t&&(a=t);i[o]=e;0==--n&&r(a,i)})})};t$jscomp$4.bezier=s$jscomp$3;t$jscomp$4.bindAll=m$jscomp$2;t$jscomp$4.browser=L$jscomp$1;t$jscomp$4.cacheEntryPossiblyAdded=function(t){++ct>st&&(t.getActor().send("enforceCacheSizeLimit",ot),ct=0)};t$jscomp$4.clamp=l$jscomp$2;t$jscomp$4.clearTileCache=function(t){var e=o$jscomp$2.caches.delete("mapbox-tiles");t&&e.catch(t).then(function(){return t()})};t$jscomp$4.clipLine=qu;t$jscomp$4.clone=function(t){var e=new ro(16);return e[0]=t[0],e[1]=t[1],
e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e};t$jscomp$4.clone$1=b$jscomp$2;t$jscomp$4.clone$2=function(t){var e=new ro(3);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e};t$jscomp$4.collisionCircleLayout=js;t$jscomp$4.config=R$jscomp$0;t$jscomp$4.create=function(){var t=new ro(16);return ro!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0),t[0]=
1,t[5]=1,t[10]=1,t[15]=1,t};t$jscomp$4.create$1=function(){var t=new ro(9);return ro!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[5]=0,t[6]=0,t[7]=0),t[0]=1,t[4]=1,t[8]=1,t};t$jscomp$4.create$2=function(){var t=new ro(4);return ro!=Float32Array&&(t[1]=0,t[2]=0),t[0]=1,t[3]=1,t};t$jscomp$4.createCommonjsModule=e$jscomp$4;t$jscomp$4.createExpression=Kr;t$jscomp$4.createLayout=Si;t$jscomp$4.createStyleLayer=function(t){return"custom"===t.type?new _l(t):new Al[t.type](t)};t$jscomp$4.cross=function(t,e,r){var n=
e[0],i=e[1];e=e[2];var o=r[0],s=r[1];r=r[2];return t[0]=i*r-e*s,t[1]=e*o-n*r,t[2]=n*s-i*o,t};t$jscomp$4.deepEqual=function t(e,r){if(Array.isArray(e)){if(!Array.isArray(r)||e.length!==r.length)return!1;for(var n=0;n<e.length;n++)if(!t(e[n],r[n]))return!1;return!0}if("object"==typeof e&&null!==e&&null!==r){if("object"!=typeof r||Object.keys(e).length!==Object.keys(r).length)return!1;for(n in e)if(!t(e[n],r[n]))return!1;return!0}return e===r};t$jscomp$4.dot=function(t,e){return t[0]*e[0]+t[1]*e[1]+
t[2]*e[2]};t$jscomp$4.dot$1=function(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]};t$jscomp$4.ease=u$jscomp$3;t$jscomp$4.emitValidationErrors=En;t$jscomp$4.endsWith=v$jscomp$2;t$jscomp$4.enforceCacheSizeLimit=function(t){ut();Q&&Q.then(function(e){e.keys().then(function(r){for(var n=0;n<r.length-t;n++)e.delete(r[n])})})};t$jscomp$4.evaluateSizeForFeature=Bu;t$jscomp$4.evaluateSizeForZoom=Vu;t$jscomp$4.evaluateVariableOffset=el;t$jscomp$4.evented=ei;t$jscomp$4.extend=c$jscomp$4;t$jscomp$4.featureFilter=
nn;t$jscomp$4.filterObject=x$jscomp$2;t$jscomp$4.fromRotation=function(t,e){var r=Math.sin(e);e=Math.cos(e);return t[0]=e,t[1]=r,t[2]=0,t[3]=-r,t[4]=e,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t};t$jscomp$4.getAnchorAlignment=Cu;t$jscomp$4.getAnchorJustification=rl;t$jscomp$4.getArrayBuffer=xt;t$jscomp$4.getImage=wt;t$jscomp$4.getJSON=function(t,e){return gt(c$jscomp$4(t,{type:"json"}),e)};t$jscomp$4.getRTLTextPluginStatus=function(){return $n};t$jscomp$4.getReferrer=dt;t$jscomp$4.getVideo=function(t,e){var i=
o$jscomp$2.document.createElement("video");i.muted=!0;i.onloadstart=function(){e(null,i)};for(var a=0;a<t.length;a++){var s=o$jscomp$2.document.createElement("source");var r=t[a];var n=void 0;(n=o$jscomp$2.document.createElement("a")).href=r;n.protocol===o$jscomp$2.document.location.protocol&&n.host===o$jscomp$2.document.location.host||(i.crossOrigin="Anonymous");s.src=t[a];i.appendChild(s)}return{cancel:function(){}}};t$jscomp$4.identity=no;t$jscomp$4.invert=function(t,e){var r=e[0],n=e[1],i=e[2],
a=e[3],o=e[4],s=e[5],u=e[6],l=e[7],p=e[8],c=e[9],h=e[10],f=e[11],y=e[12],d=e[13],m=e[14];e=e[15];var g=r*s-n*o,x=r*u-i*o,b=r*l-a*o,w=n*u-i*s,_=n*l-a*s,A=i*l-a*u,S=p*d-c*y,k=p*m-h*y,I=p*e-f*y,z=c*m-h*d,C=c*e-f*d,M=h*e-f*m,E=g*M-x*C+b*z+w*I-_*k+A*S;return E?(t[0]=(s*M-u*C+l*z)*(E=1/E),t[1]=(i*C-n*M-a*z)*E,t[2]=(d*A-m*_+e*w)*E,t[3]=(h*_-c*A-f*w)*E,t[4]=(u*I-o*M-l*k)*E,t[5]=(r*M-i*I+a*k)*E,t[6]=(m*b-y*A-e*x)*E,t[7]=(p*A-h*b+f*x)*E,t[8]=(o*C-s*I+l*S)*E,t[9]=(n*I-r*C-a*S)*E,t[10]=(y*_-d*b+e*g)*E,t[11]=
(c*b-p*_-f*g)*E,t[12]=(s*k-o*z-u*S)*E,t[13]=(r*z-n*k+i*S)*E,t[14]=(d*x-y*w-m*g)*E,t[15]=(p*w-c*x+h*g)*E,t):null};t$jscomp$4.isChar=Nn;t$jscomp$4.isMapboxURL=G;t$jscomp$4.keysDifference=function(t,e){var r=[],n;for(n in t)n in e||r.push(n);return r};t$jscomp$4.makeRequest=gt;t$jscomp$4.mapObject=g$jscomp$1;t$jscomp$4.mercatorXfromLng=Ll;t$jscomp$4.mercatorYfromLat=Rl;t$jscomp$4.mercatorZfromAltitude=function(t,e){return t/(Fl*Math.cos(e*Math.PI/180))};t$jscomp$4.mul=io;t$jscomp$4.multiply=io;t$jscomp$4.mvt=
vs;t$jscomp$4.normalize=function(t,e){var r=e[0],n=e[1],i=e[2];r=r*r+n*n+i*i;return 0<r&&(r=1/Math.sqrt(r)),t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t};t$jscomp$4.number=qe;t$jscomp$4.offscreenCanvasSupported=ht;t$jscomp$4.ortho=function(t,e,r,n,i,a,o){var s=1/(e-r),u=1/(n-i),l=1/(a-o);return t[0]=-2*s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*u,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*l,t[11]=0,t[12]=(e+r)*s,t[13]=(i+n)*u,t[14]=(o+a)*l,t[15]=1,t};t$jscomp$4.parseGlyphPBF=function(t){return(new Xs(t)).readFields(pu,
[])};t$jscomp$4.pbf=Xs;t$jscomp$4.performSymbolLayout=function(t$jscomp$2,e$jscomp$2,r$jscomp$1,n$jscomp$1,i$jscomp$1,a$jscomp$2,o$jscomp$1){t$jscomp$2.createArrays();t$jscomp$2.tilePixelRatio=8192/(512*t$jscomp$2.overscaling);t$jscomp$2.compareText={};t$jscomp$2.iconsNeedLinear=!1;var s$jscomp$2=t$jscomp$2.layers[0].layout,u$jscomp$2=t$jscomp$2.layers[0]._unevaluatedLayout._values,l$jscomp$1={};if("composite"===t$jscomp$2.textSizeData.kind){var p$jscomp$2=t$jscomp$2.textSizeData,c$jscomp$3=p$jscomp$2.maxZoom;
l$jscomp$1.compositeTextSizes=[u$jscomp$2["text-size"].possiblyEvaluate(new ai(p$jscomp$2.minZoom),o$jscomp$1),u$jscomp$2["text-size"].possiblyEvaluate(new ai(c$jscomp$3),o$jscomp$1)]}"composite"===t$jscomp$2.iconSizeData.kind&&(p$jscomp$2=t$jscomp$2.iconSizeData,c$jscomp$3=p$jscomp$2.maxZoom,l$jscomp$1.compositeIconSizes=[u$jscomp$2["icon-size"].possiblyEvaluate(new ai(p$jscomp$2.minZoom),o$jscomp$1),u$jscomp$2["icon-size"].possiblyEvaluate(new ai(c$jscomp$3),o$jscomp$1)]);l$jscomp$1.layoutTextSize=
u$jscomp$2["text-size"].possiblyEvaluate(new ai(t$jscomp$2.zoom+1),o$jscomp$1);l$jscomp$1.layoutIconSize=u$jscomp$2["icon-size"].possiblyEvaluate(new ai(t$jscomp$2.zoom+1),o$jscomp$1);l$jscomp$1.textMaxSize=u$jscomp$2["text-size"].possiblyEvaluate(new ai(18));var y$jscomp$1=24*s$jscomp$2.get("text-line-height"),d$jscomp$1="map"===s$jscomp$2.get("text-rotation-alignment")&&"point"!==s$jscomp$2.get("symbol-placement"),m$jscomp$1=s$jscomp$2.get("text-keep-upright"),v$jscomp$1=s$jscomp$2.get("text-size");
u$jscomp$2=function(){var a$jscomp$1=b$jscomp$1[x$jscomp$1],u$jscomp$1=s$jscomp$2.get("text-font").evaluate(a$jscomp$1,{},o$jscomp$1).join(","),p$jscomp$1=v$jscomp$1.evaluate(a$jscomp$1,{},o$jscomp$1),c$jscomp$2=l$jscomp$1.layoutTextSize.evaluate(a$jscomp$1,{},o$jscomp$1),h$jscomp$1=l$jscomp$1.layoutIconSize.evaluate(a$jscomp$1,{},o$jscomp$1),f$jscomp$1={horizontal:{},vertical:void 0},g$jscomp$0=a$jscomp$1.text,w$jscomp$1=[0,0];if(g$jscomp$0){var A$jscomp$1=g$jscomp$0.toString(),S$jscomp$0=24*s$jscomp$2.get("text-letter-spacing").evaluate(a$jscomp$1,
{},o$jscomp$1),k$jscomp$1=function(t){for(var e=0;e<t.length;e+=1)if(n=t[e].charCodeAt(0),Nn.Arabic(n)||Nn["Arabic Supplement"](n)||Nn["Arabic Extended-A"](n)||Nn["Arabic Presentation Forms-A"](n)||Nn["Arabic Presentation Forms-B"](n))return!1;var n;return!0}(A$jscomp$1)?S$jscomp$0:0,I$jscomp$1=s$jscomp$2.get("text-anchor").evaluate(a$jscomp$1,{},o$jscomp$1),z$jscomp$1=s$jscomp$2.get("text-variable-anchor");z$jscomp$1||(w$jscomp$1=(S$jscomp$0=s$jscomp$2.get("text-radial-offset").evaluate(a$jscomp$1,
{},o$jscomp$1))?el(I$jscomp$1,[24*S$jscomp$0,tl]):s$jscomp$2.get("text-offset").evaluate(a$jscomp$1,{},o$jscomp$1).map(function(t){return 24*t}));var M$jscomp$1=d$jscomp$1?"center":s$jscomp$2.get("text-justify").evaluate(a$jscomp$1,{},o$jscomp$1),E$jscomp$0=s$jscomp$2.get("symbol-placement"),T$jscomp$0="point"===E$jscomp$0?24*s$jscomp$2.get("text-max-width").evaluate(a$jscomp$1,{},o$jscomp$1):0;S$jscomp$0=function(){t$jscomp$2.allowVerticalPlacement&&Kn(A$jscomp$1)&&(f$jscomp$1.vertical=bu(g$jscomp$0,
e$jscomp$2,r$jscomp$1,i$jscomp$1,u$jscomp$1,T$jscomp$0,y$jscomp$1,I$jscomp$1,"left",k$jscomp$1,w$jscomp$1,vu.vertical,!0,E$jscomp$0,c$jscomp$2,p$jscomp$1))};if(!d$jscomp$1&&z$jscomp$1){z$jscomp$1="auto"===M$jscomp$1?z$jscomp$1.map(function(t){return rl(t)}):[M$jscomp$1];M$jscomp$1=!1;for(var F$jscomp$1=0;F$jscomp$1<z$jscomp$1.length;F$jscomp$1++){var D$jscomp$1=z$jscomp$1[F$jscomp$1];if(!f$jscomp$1.horizontal[D$jscomp$1])if(M$jscomp$1)f$jscomp$1.horizontal[D$jscomp$1]=f$jscomp$1.horizontal[0];else{var L$jscomp$0=
bu(g$jscomp$0,e$jscomp$2,r$jscomp$1,i$jscomp$1,u$jscomp$1,T$jscomp$0,y$jscomp$1,"center",D$jscomp$1,k$jscomp$1,w$jscomp$1,vu.horizontal,!1,E$jscomp$0,c$jscomp$2,p$jscomp$1);L$jscomp$0&&(f$jscomp$1.horizontal[D$jscomp$1]=L$jscomp$0,M$jscomp$1=1===L$jscomp$0.positionedLines.length)}}S$jscomp$0()}else"auto"===M$jscomp$1&&(M$jscomp$1=rl(I$jscomp$1)),(z$jscomp$1=bu(g$jscomp$0,e$jscomp$2,r$jscomp$1,i$jscomp$1,u$jscomp$1,T$jscomp$0,y$jscomp$1,I$jscomp$1,M$jscomp$1,k$jscomp$1,w$jscomp$1,vu.horizontal,!1,
E$jscomp$0,c$jscomp$2,p$jscomp$1))&&(f$jscomp$1.horizontal[M$jscomp$1]=z$jscomp$1),S$jscomp$0(),Kn(A$jscomp$1)&&d$jscomp$1&&m$jscomp$1&&(f$jscomp$1.vertical=bu(g$jscomp$0,e$jscomp$2,r$jscomp$1,i$jscomp$1,u$jscomp$1,T$jscomp$0,y$jscomp$1,I$jscomp$1,M$jscomp$1,k$jscomp$1,w$jscomp$1,vu.vertical,!1,E$jscomp$0,c$jscomp$2,p$jscomp$1))}S$jscomp$0=void 0;z$jscomp$1=!1;a$jscomp$1.icon&&a$jscomp$1.icon.name&&(M$jscomp$1=n$jscomp$1[a$jscomp$1.icon.name])&&(S$jscomp$0=function(t,e,r){var n=Cu(r);r=e[0]-t.displaySize[0]*
n.horizontalAlign;e=e[1]-t.displaySize[1]*n.verticalAlign;return{image:t,top:e,bottom:e+t.displaySize[1],left:r,right:r+t.displaySize[0]}}(i$jscomp$1[a$jscomp$1.icon.name],s$jscomp$2.get("icon-offset").evaluate(a$jscomp$1,{},o$jscomp$1),s$jscomp$2.get("icon-anchor").evaluate(a$jscomp$1,{},o$jscomp$1)),z$jscomp$1=M$jscomp$1.sdf,void 0===t$jscomp$2.sdfIcons?t$jscomp$2.sdfIcons=M$jscomp$1.sdf:t$jscomp$2.sdfIcons!==M$jscomp$1.sdf&&_$jscomp$0("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),
(M$jscomp$1.pixelRatio!==t$jscomp$2.pixelRatio||0!==s$jscomp$2.get("icon-rotate").constantOr(1))&&(t$jscomp$2.iconsNeedLinear=!0));M$jscomp$1=il(f$jscomp$1.horizontal)||f$jscomp$1.vertical;t$jscomp$2.iconsInText=!!M$jscomp$1&&M$jscomp$1.iconsInText;(M$jscomp$1||S$jscomp$0)&&function(t$jscomp$1,e$jscomp$1,r$jscomp$0,n$jscomp$0,i$jscomp$0,a$jscomp$0,o$jscomp$0,s$jscomp$1,u$jscomp$0,l$jscomp$0,p$jscomp$0){var c$jscomp$1=a$jscomp$0.textMaxSize.evaluate(e$jscomp$1,{});void 0===c$jscomp$1&&(c$jscomp$1=
o$jscomp$0);var h$jscomp$0,f$jscomp$0=t$jscomp$1.layers[0].layout,y$jscomp$0=f$jscomp$0.get("icon-offset").evaluate(e$jscomp$1,{},p$jscomp$0),d$jscomp$0=il(r$jscomp$0.horizontal),m$jscomp$0=o$jscomp$0/24,v$jscomp$0=t$jscomp$1.tilePixelRatio*m$jscomp$0;c$jscomp$1=t$jscomp$1.tilePixelRatio*c$jscomp$1/24;var x$jscomp$0=t$jscomp$1.tilePixelRatio*s$jscomp$1,b$jscomp$0=t$jscomp$1.tilePixelRatio*f$jscomp$0.get("symbol-spacing"),w$jscomp$0=f$jscomp$0.get("text-padding")*t$jscomp$1.tilePixelRatio,A$jscomp$0=
f$jscomp$0.get("icon-padding")*t$jscomp$1.tilePixelRatio;s$jscomp$1=f$jscomp$0.get("text-max-angle")/180*Math.PI;var k$jscomp$0="map"===f$jscomp$0.get("text-rotation-alignment")&&"point"!==f$jscomp$0.get("symbol-placement"),I$jscomp$0="map"===f$jscomp$0.get("icon-rotation-alignment")&&"point"!==f$jscomp$0.get("symbol-placement"),z$jscomp$0=f$jscomp$0.get("symbol-placement"),C$jscomp$0=b$jscomp$0/2,M$jscomp$0=f$jscomp$0.get("icon-text-fit");n$jscomp$0&&"none"!==M$jscomp$0&&(t$jscomp$1.allowVerticalPlacement&&
r$jscomp$0.vertical&&(h$jscomp$0=Eu(n$jscomp$0,r$jscomp$0.vertical,M$jscomp$0,f$jscomp$0.get("icon-text-fit-padding"),y$jscomp$0,m$jscomp$0)),d$jscomp$0&&(n$jscomp$0=Eu(n$jscomp$0,d$jscomp$0,M$jscomp$0,f$jscomp$0.get("icon-text-fit-padding"),y$jscomp$0,m$jscomp$0)));f$jscomp$0=function(s$jscomp$0,c$jscomp$0){0>c$jscomp$0.x||8192<=c$jscomp$0.x||0>c$jscomp$0.y||8192<=c$jscomp$0.y||function(t$jscomp$0,e$jscomp$0,r,n,i,a,o,s,u,l,p,c,h,f,y,d,m,v,g,x,b,w,A,S,k){var I,E,T=t$jscomp$0.addToLineVertexArray(e$jscomp$0,
r),P=0,V=r=0,F=0,D=-1,L=-1,R={},O=pa(""),U=0,j=0;if(void 0===s._unevaluatedLayout.getValue("text-radial-offset")?(U=(I=s.layout.get("text-offset").evaluate(b,{},S).map(function(t){return 24*t}))[0],j=I[1]):(U=24*s.layout.get("text-radial-offset").evaluate(b,{},S),j=tl),t$jscomp$0.allowVerticalPlacement&&n.vertical){I=s.layout.get("text-rotate").evaluate(b,{},S)+90;var M=new Ju(u,e$jscomp$0,l,p,c,n.vertical,h,f,y,I);o&&(E=new Ju(u,e$jscomp$0,l,p,c,o,m,v,y,I))}if(i){var C=s.layout.get("icon-rotate").evaluate(b,
{});P="none"!==s.layout.get("icon-text-fit");D=Nu(i,C,A,P);o=o?Nu(o,C,A,P):void 0;C=new Ju(u,e$jscomp$0,l,p,c,i,m,v,!1,C);P=4*D.length;m=t$jscomp$0.iconSizeData;i=null;"source"===m.kind?32640<(i=[128*s.layout.get("icon-size").evaluate(b,{})])[0]&&_$jscomp$0(t$jscomp$0.layerIds[0]+': Value for "icon-size" is \x3e\x3d 255. Reduce your "icon-size".'):"composite"===m.kind&&(32640<(i=[128*w.compositeIconSizes[0].evaluate(b,{},S),128*w.compositeIconSizes[1].evaluate(b,{},S)])[0]||32640<i[1])&&_$jscomp$0(t$jscomp$0.layerIds[0]+
': Value for "icon-size" is \x3e\x3d 255. Reduce your "icon-size".');t$jscomp$0.addSymbols(t$jscomp$0.icon,D,i,x,g,b,!1,e$jscomp$0,T.lineStartIndex,T.lineLength,-1,S);D=t$jscomp$0.icon.placedSymbolArray.length-1;o&&(r=4*o.length,t$jscomp$0.addSymbols(t$jscomp$0.icon,o,i,x,g,b,vu.vertical,e$jscomp$0,T.lineStartIndex,T.lineLength,-1,S),L=t$jscomp$0.icon.placedSymbolArray.length-1)}for(var H in n.horizontal){g=n.horizontal[H];if(!z){O=pa(g.text);var z=s.layout.get("text-rotate").evaluate(b,{},S);z=new Ju(u,
e$jscomp$0,l,p,c,g,h,f,y,z)}x=1===g.positionedLines.length;if(V+=nl(t$jscomp$0,e$jscomp$0,g,a,s,y,b,d,T,n.vertical?vu.horizontal:vu.horizontalOnly,x?Object.keys(n.horizontal):[H],R,D,w,S),x)break}n.vertical&&(F+=nl(t$jscomp$0,e$jscomp$0,n.vertical,a,s,y,b,d,T,vu.vertical,["vertical"],R,L,w,S));n=z?z.boxStartIndex:t$jscomp$0.collisionBoxArray.length;a=z?z.boxEndIndex:t$jscomp$0.collisionBoxArray.length;s=M?M.boxStartIndex:t$jscomp$0.collisionBoxArray.length;u=M?M.boxEndIndex:t$jscomp$0.collisionBoxArray.length;
p=C?C.boxStartIndex:t$jscomp$0.collisionBoxArray.length;c=C?C.boxEndIndex:t$jscomp$0.collisionBoxArray.length;f=E?E.boxStartIndex:t$jscomp$0.collisionBoxArray.length;y=E?E.boxEndIndex:t$jscomp$0.collisionBoxArray.length;d=function(t,e){return t&&t.circleDiameter?Math.max(t.circleDiameter,e):e};z=d(z,-1);z=d(M,z);z=d(C,z);(M=-1<(z=d(E,z))?1:0)&&(z*=k/24);t$jscomp$0.glyphOffsetArray.length>=fl.MAX_GLYPHS&&_$jscomp$0("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907");
void 0!==b.sortKey&&t$jscomp$0.addToSortKeyRanges(t$jscomp$0.symbolInstances.length,b.sortKey);t$jscomp$0.symbolInstances.emplaceBack(e$jscomp$0.x,e$jscomp$0.y,0<=R.right?R.right:-1,0<=R.center?R.center:-1,0<=R.left?R.left:-1,R.vertical||-1,D,L,O,n,a,s,u,p,c,f,y,l,V,F,P,r,M,0,h,U,j,z)}(t$jscomp$1,c$jscomp$0,s$jscomp$0,r$jscomp$0,n$jscomp$0,i$jscomp$0,h$jscomp$0,t$jscomp$1.layers[0],t$jscomp$1.collisionBoxArray,e$jscomp$1.index,e$jscomp$1.sourceLayerIndex,t$jscomp$1.index,v$jscomp$0,w$jscomp$0,k$jscomp$0,
u$jscomp$0,x$jscomp$0,A$jscomp$0,I$jscomp$0,y$jscomp$0,e$jscomp$1,a$jscomp$0,l$jscomp$0,p$jscomp$0,o$jscomp$0)};if("line"===z$jscomp$0)for(m$jscomp$0=0,z$jscomp$0=qu(e$jscomp$1.geometry,0,0,8192,8192);m$jscomp$0<z$jscomp$0.length;m$jscomp$0+=1){M$jscomp$0=z$jscomp$0[m$jscomp$0];for(var V$jscomp$0=0,F$jscomp$0=ju(M$jscomp$0,b$jscomp$0,s$jscomp$1,r$jscomp$0.vertical||d$jscomp$0,n$jscomp$0,24,c$jscomp$1,t$jscomp$1.overscaling,8192);V$jscomp$0<F$jscomp$0.length;V$jscomp$0+=1){var D$jscomp$0=F$jscomp$0[V$jscomp$0];
d$jscomp$0&&al(t$jscomp$1,d$jscomp$0.text,C$jscomp$0,D$jscomp$0)||f$jscomp$0(M$jscomp$0,D$jscomp$0)}}else if("line-center"===z$jscomp$0)for(b$jscomp$0=0,C$jscomp$0=e$jscomp$1.geometry;b$jscomp$0<C$jscomp$0.length;b$jscomp$0+=1)m$jscomp$0=C$jscomp$0[b$jscomp$0],1<m$jscomp$0.length&&(z$jscomp$0=Uu(m$jscomp$0,s$jscomp$1,r$jscomp$0.vertical||d$jscomp$0,n$jscomp$0,24,c$jscomp$1))&&f$jscomp$0(m$jscomp$0,z$jscomp$0);else if("Polygon"===e$jscomp$1.type)for(d$jscomp$0=0,c$jscomp$1=ts(e$jscomp$1.geometry,0);d$jscomp$0<
c$jscomp$1.length;d$jscomp$0+=1)s$jscomp$1=c$jscomp$1[d$jscomp$0],b$jscomp$0=$u(s$jscomp$1,16),f$jscomp$0(s$jscomp$1[0],new Tu(b$jscomp$0.x,b$jscomp$0.y,0));else if("LineString"===e$jscomp$1.type)for(d$jscomp$0=0,c$jscomp$1=e$jscomp$1.geometry;d$jscomp$0<c$jscomp$1.length;d$jscomp$0+=1)s$jscomp$1=c$jscomp$1[d$jscomp$0],f$jscomp$0(s$jscomp$1,new Tu(s$jscomp$1[0].x,s$jscomp$1[0].y,0));else if("Point"===e$jscomp$1.type)for(d$jscomp$0=0,c$jscomp$1=e$jscomp$1.geometry;d$jscomp$0<c$jscomp$1.length;d$jscomp$0+=
1)for(s$jscomp$1=0,b$jscomp$0=c$jscomp$1[d$jscomp$0];s$jscomp$1<b$jscomp$0.length;s$jscomp$1+=1)C$jscomp$0=b$jscomp$0[s$jscomp$1],f$jscomp$0([C$jscomp$0],new Tu(C$jscomp$0.x,C$jscomp$0.y,0))}(t$jscomp$2,a$jscomp$1,f$jscomp$1,S$jscomp$0,n$jscomp$1,l$jscomp$1,c$jscomp$2,h$jscomp$1,w$jscomp$1,z$jscomp$1,o$jscomp$1)};for(var x$jscomp$1=0,b$jscomp$1=t$jscomp$2.features;x$jscomp$1<b$jscomp$1.length;x$jscomp$1+=1)u$jscomp$2();a$jscomp$2&&t$jscomp$2.generateCollisionDebugBuffers()};t$jscomp$4.perspective=
function(t,e,r,n,i){var a;e=1/Math.tan(e/2);return t[0]=e/r,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=i&&i!==1/0?(t[10]=(i+n)*(a=1/(n-i)),t[14]=2*i*n*a):(t[10]=-1,t[14]=-2*n),t};t$jscomp$4.pick=function(t,e){for(var r={},n=0;n<e.length;n++){var i=e[n];i in t&&(r[i]=t[i])}return r};t$jscomp$4.plugin=ii;t$jscomp$4.polygonIntersectsPolygon=Ua;t$jscomp$4.postMapLoadEvent=at;t$jscomp$4.postTurnstileEvent=nt;t$jscomp$4.potpack=fu;t$jscomp$4.refProperties=
"type source source-layer minzoom maxzoom filter layout".split(" ");t$jscomp$4.register=Dn;t$jscomp$4.registerForPluginStateChange=function(t){return t({pluginStatus:$n,pluginURL:Wn}),ei.on("pluginStateChange",t),t};t$jscomp$4.rotate=function(t,e,r){var n=e[0],i=e[1],a=e[2];e=e[3];var s=Math.sin(r);r=Math.cos(r);return t[0]=n*r+a*s,t[1]=i*r+e*s,t[2]=n*-s+a*r,t[3]=i*-s+e*r,t};t$jscomp$4.rotateX=function(t,e,r){var n=Math.sin(r);r=Math.cos(r);var a=e[4],o=e[5],s=e[6],u=e[7],l=e[8],p=e[9],c=e[10],h=
e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=a*r+l*n,t[5]=o*r+p*n,t[6]=s*r+c*n,t[7]=u*r+h*n,t[8]=l*r-a*n,t[9]=p*r-o*n,t[10]=c*r-s*n,t[11]=h*r-u*n,t};t$jscomp$4.rotateZ=function(t,e,r){var n=Math.sin(r);r=Math.cos(r);var a=e[0],o=e[1],s=e[2],u=e[3],l=e[4],p=e[5],c=e[6],h=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=a*r+l*n,t[1]=o*r+p*n,t[2]=s*r+c*n,t[3]=u*r+
h*n,t[4]=l*r-a*n,t[5]=p*r-o*n,t[6]=c*r-s*n,t[7]=h*r-u*n,t};t$jscomp$4.scale=function(t,e,r){var n=r[0],i=r[1];r=r[2];return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*i,t[5]=e[5]*i,t[6]=e[6]*i,t[7]=e[7]*i,t[8]=e[8]*r,t[9]=e[9]*r,t[10]=e[10]*r,t[11]=e[11]*r,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t};t$jscomp$4.scale$1=function(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t};t$jscomp$4.scale$2=function(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t};t$jscomp$4.setCacheLimits=
function(t,e){ot=t;st=e};t$jscomp$4.setRTLTextPlugin=function(t,e,r){if(void 0===r&&(r=!1),"deferred"===$n||"loading"===$n||"loaded"===$n)throw Error("setRTLTextPlugin cannot be called multiple times.");Wn=L$jscomp$1.resolveURL(t);$n="deferred";Yn=e;ti();r||ni()};t$jscomp$4.sphericalToCartesian=function(t){var e=t[0],r=t[1];t=t[2];return r+=90,r*=Math.PI/180,t*=Math.PI/180,{x:e*Math.cos(r)*Math.sin(t),y:e*Math.sin(r)*Math.sin(t),z:e*Math.cos(t)}};t$jscomp$4.sqrLen=function(t){var e=t[0];t=t[1];return e*
e+t*t};t$jscomp$4.styleSpec=zt;t$jscomp$4.sub=function(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t[2]=e[2]-r[2],t};t$jscomp$4.symbolSize=Fu;t$jscomp$4.transformMat3=function(t,e,r){var n=e[0],i=e[1];e=e[2];return t[0]=n*r[0]+i*r[3]+e*r[6],t[1]=n*r[1]+i*r[4]+e*r[7],t[2]=n*r[2]+i*r[5]+e*r[8],t};t$jscomp$4.transformMat4=so;t$jscomp$4.translate=function(t,e,r){var n,i,a,o,s,u,l,p,c,h,f,y,d=r[0],m=r[1];r=r[2];return e===t?(t[12]=e[0]*d+e[4]*m+e[8]*r+e[12],t[13]=e[1]*d+e[5]*m+e[9]*r+e[13],t[14]=e[2]*
d+e[6]*m+e[10]*r+e[14],t[15]=e[3]*d+e[7]*m+e[11]*r+e[15]):(i=e[1],a=e[2],o=e[3],s=e[4],u=e[5],l=e[6],p=e[7],c=e[8],h=e[9],f=e[10],y=e[11],t[0]=n=e[0],t[1]=i,t[2]=a,t[3]=o,t[4]=s,t[5]=u,t[6]=l,t[7]=p,t[8]=c,t[9]=h,t[10]=f,t[11]=y,t[12]=n*d+s*m+c*r+e[12],t[13]=i*d+u*m+h*r+e[13],t[14]=a*d+l*m+f*r+e[14],t[15]=o*d+p*m+y*r+e[15]),t};t$jscomp$4.triggerPluginCompletionEvent=Qn;t$jscomp$4.uniqueId=function(){return h$jscomp$2++};t$jscomp$4.validateCustomStyleLayer=function(t){var e=[],r=t.id;return void 0===
r&&e.push({message:"layers."+r+': missing required property "id"'}),void 0===t.render&&e.push({message:"layers."+r+': missing required method "render"'}),t.renderingMode&&"2d"!==t.renderingMode&&"3d"!==t.renderingMode&&e.push({message:"layers."+r+': property "renderingMode" must be either "2d" or "3d"'}),e};t$jscomp$4.validateLight=zn;t$jscomp$4.validateStyle=An;t$jscomp$4.values=function(t){var e=[],r;for(r in t)e.push(t[r]);return e};t$jscomp$4.vectorTile=vs;t$jscomp$4.version="1.11.1";t$jscomp$4.warnOnce=
_$jscomp$0;t$jscomp$4.webpSupported=O$jscomp$0;t$jscomp$4.window=o$jscomp$2;t$jscomp$4.wrap=p$jscomp$3});define(["./shared"],function(e$jscomp$2){function t$jscomp$3(e){var r=typeof e;if("number"===r||"boolean"===r||"string"===r||null==e)return JSON.stringify(e);if(Array.isArray(e)){r="[";for(var o=0;o<e.length;o+=1)r+=t$jscomp$3(e[o])+",";return r+"]"}r=Object.keys(e).sort();o="{";for(var l=0;l<r.length;l++)o+=JSON.stringify(r[l])+":"+t$jscomp$3(e[r[l]])+",";return o+"}"}function s$jscomp$2(t,r,
i){r=new e$jscomp$2.EvaluationParameters(r);for(var n=0;n<t.length;n+=1)t[n].recalculate(r,i)}function a$jscomp$2(t$jscomp$0,r){var i$jscomp$0=e$jscomp$2.getArrayBuffer(t$jscomp$0.request,function(t,i,o,n){t?r(t):i&&r(null,{vectorTile:new e$jscomp$2.vectorTile.VectorTile(new e$jscomp$2.pbf(i)),rawData:i,cacheControl:o,expires:n})});return function(){i$jscomp$0.cancel();r()}}function c$jscomp$1(e,t){if(0!==e.length){p$jscomp$0(e[0],t);for(var r=1;r<e.length;r++)p$jscomp$0(e[r],!t)}}function p$jscomp$0(e,
t){for(var r=0,i=0,o=e.length,n=o-1;i<o;n=i++)r+=(e[i][0]-e[n][0])*(e[n][1]+e[i][1]);0<=r!=!!t&&e.reverse()}function y$jscomp$0(e,t){this.options=t||{};this.features=e;this.length=e.length}function x$jscomp$0(e,t){this.id="number"==typeof e.id?e.id:void 0;this.type=e.type;this.rawGeometry=1===e.type?[e.geometry]:e.geometry;this.properties=e.tags;this.extent=t||4096}function I$jscomp$0(t){var r=new e$jscomp$2.pbf,r$jscomp$0;for(r$jscomp$0 in t.layers)r.writeMessage(3,M$jscomp$0,t.layers[r$jscomp$0]);
return r.finish()}function M$jscomp$0(e,t){var r;t.writeVarintField(15,e.version||1);t.writeStringField(1,e.name||"");t.writeVarintField(5,e.extent||4096);var i={keys:[],values:[],keycache:{},valuecache:{}};for(r=0;r<e.length;r++)i.feature=e.feature(r),t.writeMessage(2,b$jscomp$0,i);e=i.keys;for(r=0;r<e.length;r++)t.writeStringField(3,e[r]);i=i.values;for(r=0;r<i.length;r++)t.writeMessage(4,C,i[r])}function b$jscomp$0(e,t){var r=e.feature;void 0!==r.id&&t.writeVarintField(1,r.id);t.writeMessage(2,
_,e);t.writeVarintField(3,r.type);t.writeMessage(4,T,r)}function _(e,t){var r=e.feature,i=e.keys,o=e.values,n=e.keycache;e=e.valuecache;for(var a in r.properties){var l=n[a];void 0===l&&(i.push(a),n[a]=l=i.length-1);t.writeVarint(l);l=r.properties[a];var h=typeof l;"string"!==h&&"boolean"!==h&&"number"!==h&&(l=JSON.stringify(l));h=h+":"+l;var p=e[h];void 0===p&&(o.push(l),e[h]=p=o.length-1);t.writeVarint(p)}}function T(e,t){var r=e.loadGeometry();e=e.type;for(var o=0,n=0,s=r.length,a=0;a<s;a++){var l=
r[a],u=1;1===e&&(u=l.length);t.writeVarint((u<<3)+1);u=3===e?l.length-1:l.length;for(var c=0;c<u;c++){1===c&&1!==e&&t.writeVarint((u-1<<3)+2);var p=l[c].x-o,f=l[c].y-n;t.writeVarint(p<<1^p>>31);t.writeVarint(f<<1^f>>31);o+=p;n+=f}3===e&&t.writeVarint(15)}}function C(e,t){var r=typeof e;"string"===r?t.writeStringField(1,e):"boolean"===r?t.writeBooleanField(7,e):"number"===r&&(0!=e%1?t.writeDoubleField(3,e):0>e?t.writeSVarintField(6,e):t.writeVarintField(5,e))}function D(e,t,r,i){L(e,r,i);L(t,2*r,2*
i);L(t,2*r+1,2*i+1)}function L(e,t,r){var i=e[t];e[t]=e[r];e[r]=i}function A(e,t){e=e.geometry.coordinates;return{x:e[0]/360+.5,y:j(e[1]),zoom:1/0,index:t,parentId:-1}}function B(e){return{type:"Feature",id:e.id,properties:G(e),geometry:{type:"Point",coordinates:[(i=e.x,360*(i-.5)),(t=e.y,r=(180-360*t)*Math.PI/180,360*Math.atan(Math.exp(r))/Math.PI-90)]}};var t,r,i}function G(e){var t=e.numPoints,r=1E4<=t?Math.round(t/1E3)+"k":1E3<=t?Math.round(t/100)/10+"k":t;return V(V({},e.properties),{cluster:!0,
cluster_id:e.id,point_count:t,point_count_abbreviated:r})}function j(e){e=Math.sin(e*Math.PI/180);e=.5-.25*Math.log((1+e)/(1-e))/Math.PI;return 0>e?0:1<e?1:e}function V(e,t){for(var r in t)e[r]=t[r];return e}function X(e){return e.x}function W(e){return e.y}function q(e,t,r,i){e={id:void 0===e?null:e,type:t,geometry:r,tags:i,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};t=e.geometry;r=e.type;if("Point"===r||"MultiPoint"===r||"LineString"===r)U(e,t);else if("Polygon"===r||"MultiLineString"===r)for(r=0;r<
t.length;r++)U(e,t[r]);else if("MultiPolygon"===r)for(r=0;r<t.length;r++)for(i=0;i<t[r].length;i++)U(e,t[r][i]);return e}function U(e,t){for(var r=0;r<t.length;r+=3)e.minX=Math.min(e.minX,t[r]),e.minY=Math.min(e.minY,t[r+1]),e.maxX=Math.max(e.maxX,t[r]),e.maxY=Math.max(e.maxY,t[r+1])}function $(e,t,r,i){if(t.geometry){var o=t.geometry.coordinates,n=t.geometry.type,s=Math.pow(r.tolerance/((1<<r.maxZoom)*r.extent),2),a=[],l=t.id;if(r.promoteId?l=t.properties[r.promoteId]:r.generateId&&(l=i||0),"Point"===
n)H(o,a);else if("MultiPoint"===n)for(var u=0;u<o.length;u++)H(o[u],a);else if("LineString"===n)K(o,a,s,!1);else if("MultiLineString"===n){if(r.lineMetrics){for(u=0;u<o.length;u++)K(o[u],a=[],s,!1),e.push(q(l,"LineString",a,t.properties));return}Q(o,a,s,!1)}else if("Polygon"===n)Q(o,a,s,!0);else{if("MultiPolygon"!==n){if("GeometryCollection"===n){for(u=0;u<t.geometry.geometries.length;u++)$(e,{id:l,geometry:t.geometry.geometries[u],properties:t.properties},r,i);return}throw Error("Input data is not a valid GeoJSON object.");
}for(u=0;u<o.length;u++)r=[],Q(o[u],r,s,!0),a.push(r)}e.push(q(l,n,a,t.properties))}}function H(e,t){t.push(e[0]/360+.5);t.push(te(e[1]));t.push(0)}function K(e$jscomp$0,t$jscomp$1,r$jscomp$1,i$jscomp$1){for(var o$jscomp$0,n$jscomp$0,s$jscomp$1=0,a$jscomp$1=0;a$jscomp$1<e$jscomp$0.length;a$jscomp$1++){var l$jscomp$1=e$jscomp$0[a$jscomp$1][0]/360+.5,u$jscomp$0=te(e$jscomp$0[a$jscomp$1][1]);t$jscomp$1.push(l$jscomp$1);t$jscomp$1.push(u$jscomp$0);t$jscomp$1.push(0);0<a$jscomp$1&&(s$jscomp$1+=i$jscomp$1?
(o$jscomp$0*u$jscomp$0-l$jscomp$1*n$jscomp$0)/2:Math.sqrt(Math.pow(l$jscomp$1-o$jscomp$0,2)+Math.pow(u$jscomp$0-n$jscomp$0,2)));o$jscomp$0=l$jscomp$1;n$jscomp$0=u$jscomp$0}e$jscomp$0=t$jscomp$1.length-3;t$jscomp$1[2]=1;(function e(t$jscomp$0,r$jscomp$0,i$jscomp$0,o){for(var n,s=o,a=i$jscomp$0-r$jscomp$0>>1,l=i$jscomp$0-r$jscomp$0,u=t$jscomp$0[r$jscomp$0],h=t$jscomp$0[r$jscomp$0+1],c=t$jscomp$0[i$jscomp$0],p=t$jscomp$0[i$jscomp$0+1],f=r$jscomp$0+3;f<i$jscomp$0;f+=3){var d=t$jscomp$0[f];var t=t$jscomp$0[f+
1],r=u,i=h,s$jscomp$0=c-r,a$jscomp$0=p-i;if(0!==s$jscomp$0||0!==a$jscomp$0){var l$jscomp$0=((d-r)*s$jscomp$0+(t-i)*a$jscomp$0)/(s$jscomp$0*s$jscomp$0+a$jscomp$0*a$jscomp$0);1<l$jscomp$0?(r=c,i=p):0<l$jscomp$0&&(r+=s$jscomp$0*l$jscomp$0,i+=a$jscomp$0*l$jscomp$0)}d=(s$jscomp$0=d-r)*s$jscomp$0+(a$jscomp$0=t-i)*a$jscomp$0;d>s?(n=f,s=d):d===s&&(s$jscomp$0=Math.abs(f-a),s$jscomp$0<l&&(n=f,l=s$jscomp$0))}s>o&&(3<n-r$jscomp$0&&e(t$jscomp$0,r$jscomp$0,n,o),t$jscomp$0[n+2]=s,3<i$jscomp$0-n&&e(t$jscomp$0,n,
i$jscomp$0,o))})(t$jscomp$1,0,e$jscomp$0,r$jscomp$1);t$jscomp$1[e$jscomp$0+2]=1;t$jscomp$1.size=Math.abs(s$jscomp$1);t$jscomp$1.start=0;t$jscomp$1.end=t$jscomp$1.size}function Q(e,t,r,i){for(var o=0;o<e.length;o++){var n=[];K(e[o],n,r,i);t.push(n)}}function te(e){e=Math.sin(e*Math.PI/180);e=.5-.25*Math.log((1+e)/(1-e))/Math.PI;return 0>e?0:1<e?1:e}function re(e,t,r$jscomp$0,i$jscomp$0,o$jscomp$0,n$jscomp$0,s$jscomp$0,a){if(i$jscomp$0/=t,n$jscomp$0>=(r$jscomp$0/=t)&&s$jscomp$0<i$jscomp$0)return e;
if(s$jscomp$0<r$jscomp$0||n$jscomp$0>=i$jscomp$0)return null;t=[];for(n$jscomp$0=0;n$jscomp$0<e.length;n$jscomp$0++){s$jscomp$0=e[n$jscomp$0];var c=s$jscomp$0.geometry,p=s$jscomp$0.type,f=0===o$jscomp$0?s$jscomp$0.minX:s$jscomp$0.minY,d=0===o$jscomp$0?s$jscomp$0.maxX:s$jscomp$0.maxY;if(f>=r$jscomp$0&&d<i$jscomp$0)t.push(s$jscomp$0);else if(!(d<r$jscomp$0||f>=i$jscomp$0)){f=[];if("Point"===p||"MultiPoint"===p){d=f;for(var r=r$jscomp$0,i=i$jscomp$0,o=o$jscomp$0,n=0;n<c.length;n+=3){var s=c[n+o];s>=
r&&s<=i&&(d.push(c[n]),d.push(c[n+1]),d.push(c[n+2]))}}else if("LineString"===p)oe(c,f,r$jscomp$0,i$jscomp$0,o$jscomp$0,!1,a.lineMetrics);else if("MultiLineString"===p)se(c,f,r$jscomp$0,i$jscomp$0,o$jscomp$0,!1);else if("Polygon"===p)se(c,f,r$jscomp$0,i$jscomp$0,o$jscomp$0,!0);else if("MultiPolygon"===p)for(d=0;d<c.length;d++)r=[],se(c[d],r,r$jscomp$0,i$jscomp$0,o$jscomp$0,!0),r.length&&f.push(r);if(f.length)if(a.lineMetrics&&"LineString"===p)for(d=0;d<f.length;d++)t.push(q(s$jscomp$0.id,p,f[d],s$jscomp$0.tags));
else"LineString"!==p&&"MultiLineString"!==p||(1===f.length?(p="LineString",f=f[0]):p="MultiLineString"),"Point"!==p&&"MultiPoint"!==p||(p=3===f.length?"Point":"MultiPoint"),t.push(q(s$jscomp$0.id,p,f,s$jscomp$0.tags))}}return t.length?t:null}function oe(e$jscomp$0,t,r$jscomp$0,i,o,n,s){for(var a,l,u=ne(e$jscomp$0),h=0===o?le:ue,c=e$jscomp$0.start,p=0;p<e$jscomp$0.length-3;p+=3){var f=e$jscomp$0[p],d=e$jscomp$0[p+1],g=e$jscomp$0[p+2],m=e$jscomp$0[p+3],v=e$jscomp$0[p+4],y=0===o?f:d,x=0===o?m:v,w=!1;
s&&(a=Math.sqrt(Math.pow(f-m,2)+Math.pow(d-v,2)));if(y<r$jscomp$0)x>r$jscomp$0&&(l=h(u,f,d,m,v,r$jscomp$0),s&&(u.start=c+a*l));else if(y>i)x<i&&(l=h(u,f,d,m,v,i),s&&(u.start=c+a*l));else{var e=u,r=d;e.push(f);e.push(r);e.push(g)}x<r$jscomp$0&&y>=r$jscomp$0&&(l=h(u,f,d,m,v,r$jscomp$0),w=!0);x>i&&y<=i&&(l=h(u,f,d,m,v,i),w=!0);!n&&w&&(s&&(u.end=c+a*l),t.push(u),u=ne(e$jscomp$0));s&&(c+=a)}g=e$jscomp$0.length-3;f=e$jscomp$0[g];d=e$jscomp$0[g+1];g=e$jscomp$0[g+2];(y=0===o?f:d)>=r$jscomp$0&&y<=i&&(e$jscomp$0=
u,r$jscomp$0=g,e$jscomp$0.push(f),e$jscomp$0.push(d),e$jscomp$0.push(r$jscomp$0));g=u.length-3;n&&3<=g&&(u[g]!==u[0]||u[g+1]!==u[1])&&(n=u,f=u[1],d=u[2],n.push(u[0]),n.push(f),n.push(d));u.length&&t.push(u)}function ne(e){var t=[];return t.size=e.size,t.start=e.start,t.end=e.end,t}function se(e,t,r,i,o,n){for(var s=0;s<e.length;s++)oe(e[s],t,r,i,o,n,!1)}function le(e,t,r,i,o,n){t=(n-t)/(i-t);return e.push(n),e.push(r+(o-r)*t),e.push(1),t}function ue(e,t,r,i,o,n){r=(n-r)/(o-r);return e.push(t+(i-t)*
r),e.push(n),e.push(1),r}function he(e,t){for(var r=[],i=0;i<e.length;i++){var n=e[i],s=n.type;if("Point"===s||"MultiPoint"===s||"LineString"===s)var o=ce(n.geometry,t);else if("MultiLineString"===s||"Polygon"===s){o=[];for(var a=0;a<n.geometry.length;a++)o.push(ce(n.geometry[a],t))}else if("MultiPolygon"===s)for(o=[],a=0;a<n.geometry.length;a++){for(var l=[],u=0;u<n.geometry[a].length;u++)l.push(ce(n.geometry[a][u],t));o.push(l)}r.push(q(n.id,s,o,n.tags))}return r}function ce(e,t){var r=[];r.size=
e.size;void 0!==e.start&&(r.start=e.start,r.end=e.end);for(var i=0;i<e.length;i+=3)r.push(e[i]+t,e[i+1],e[i+2]);return r}function pe(e,t){if(e.transformed)return e;var r,o,n=1<<e.z,s=e.x,a=e.y;for(r=0;r<e.features.length;r++){var l=e.features[r],u=l.geometry;var i=l.type;if(l.geometry=[],1===i)for(i=0;i<u.length;i+=2)l.geometry.push([Math.round(t*(u[i]*n-s)),Math.round(t*(u[i+1]*n-a))]);else for(i=0;i<u.length;i++){var c=[];for(o=0;o<u[i].length;o+=2)c.push([Math.round(t*(u[i][o]*n-s)),Math.round(t*
(u[i][o+1]*n-a))]);l.geometry.push(c)}}return e.transformed=!0,e}function me(e,t,r,i,o,n){var s=i*i;if(0<i&&t.size<(o?s:i))r.numPoints+=t.length/3;else{for(var a=[],l=0;l<t.length;l+=3)(0===i||t[l+2]>s)&&(r.numSimplified++,a.push(t[l]),a.push(t[l+1])),r.numPoints++;if(o){t=i=0;r=a.length;for(o=r-2;t<r;o=t,t+=2)i+=(a[t]-a[o])*(a[t+1]+a[o+1]);if(0<i===n)for(t=0,r=a.length;t<r/2;t+=2)n=a[t],i=a[t+1],a[t]=a[r-2-t],a[t+1]=a[r-1-t],a[r-2-t]=n,a[r-1-t]=i}e.push(a)}}function ve(e$jscomp$0,t$jscomp$0){var r$jscomp$0=
(t$jscomp$0=this.options=function(e,t){for(var r in t)e[r]=t[r];return e}(Object.create(this.options),t$jscomp$0)).debug;if(r$jscomp$0&&console.time("preprocess data"),0>t$jscomp$0.maxZoom||24<t$jscomp$0.maxZoom)throw Error("maxZoom should be in the 0-24 range");if(t$jscomp$0.promoteId&&t$jscomp$0.generateId)throw Error("promoteId and generateId cannot be used together.");e$jscomp$0=function(e,t){var r=[];if("FeatureCollection"===e.type)for(var i=0;i<e.features.length;i++)$(r,e.features[i],t,i);else $(r,
"Feature"===e.type?e:{geometry:e},t);return r}(e$jscomp$0,t$jscomp$0);this.tiles={};this.tileCoords=[];r$jscomp$0&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",t$jscomp$0.indexMaxZoom,t$jscomp$0.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0);(e$jscomp$0=function(e,t){var r=t.buffer/t.extent,i=e,o=re(e,1,-1-r,r,0,-1,2,t),n=re(e,1,1-r,2+r,0,-1,2,t);return(o||n)&&(i=re(e,1,-r,1+r,0,-1,2,t)||[],o&&(i=he(o,1).concat(i)),n&&(i=i.concat(he(n,
-1)))),i}(e$jscomp$0,t$jscomp$0)).length&&this.splitTile(e$jscomp$0,0,0,0);r$jscomp$0&&(e$jscomp$0.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function xe(e,t){e=e.tileID.canonical;if(!this._geoJSONIndex)return t(null,null);e=this._geoJSONIndex.getTile(e.z,e.x,e.y);if(!e)return t(null,null);e=new g$jscomp$0(e.features);var n=w$jscomp$0(e);0===
n.byteOffset&&n.byteLength===n.buffer.byteLength||(n=new Uint8Array(n));t(null,{vectorTile:e,rawData:n.buffer})}var i$jscomp$2=function(e){this.keyCache={};e&&this.replace(e)};i$jscomp$2.prototype.replace=function(e){this._layerConfigs={};this._layers={};this.update(e,[])};i$jscomp$2.prototype.update=function(t$jscomp$0,i$jscomp$1){for(var o$jscomp$1=this,n$jscomp$0=0;n$jscomp$0<t$jscomp$0.length;n$jscomp$0+=1){var a=t$jscomp$0[n$jscomp$0];this._layerConfigs[a.id]=a;var l$jscomp$0=this._layers[a.id]=
e$jscomp$2.createStyleLayer(a);l$jscomp$0._featureFilter=e$jscomp$2.featureFilter(l$jscomp$0.filter);this.keyCache[a.id]&&delete this.keyCache[a.id]}for(t$jscomp$0=0;t$jscomp$0<i$jscomp$1.length;t$jscomp$0+=1)n$jscomp$0=i$jscomp$1[t$jscomp$0],delete this.keyCache[n$jscomp$0],delete this._layerConfigs[n$jscomp$0],delete this._layers[n$jscomp$0];this.familiesBySource={};i$jscomp$1=0;for(t$jscomp$0=function(e,t){for(var i={},o=0;o<e.length;o++){var JSCompiler_temp;if(!(JSCompiler_temp=t&&t[e[o].id])){JSCompiler_temp=
e[o];for(var i$jscomp$0="",o$jscomp$0=0,n=e$jscomp$2.refProperties;o$jscomp$0<n.length;o$jscomp$0+=1)i$jscomp$0+="/"+t$jscomp$3(JSCompiler_temp[n[o$jscomp$0]]);JSCompiler_temp=i$jscomp$0}t&&(t[e[o].id]=JSCompiler_temp);(i$jscomp$0=i[JSCompiler_temp])||(i$jscomp$0=i[JSCompiler_temp]=[]);i$jscomp$0.push(e[o])}e=[];for(var l in i)e.push(i[l]);return e}(e$jscomp$2.values(this._layerConfigs),this.keyCache);i$jscomp$1<t$jscomp$0.length;i$jscomp$1+=1)if(n$jscomp$0=t$jscomp$0[i$jscomp$1].map(function(e){return o$jscomp$1._layers[e.id]}),
l$jscomp$0=n$jscomp$0[0],"none"!==l$jscomp$0.visibility){var m=l$jscomp$0.source||"";(a=this.familiesBySource[m])||(a=this.familiesBySource[m]={});l$jscomp$0=l$jscomp$0.sourceLayer||"_geojsonTileLayer";(m=a[l$jscomp$0])||(m=a[l$jscomp$0]=[]);m.push(n$jscomp$0)}};var o$jscomp$2=function(t){var r={},i=[];for(o in t){var n=t[o],s=r[o]={},a;for(a in n){var l=n[+a];if(l&&0!==l.bitmap.width&&0!==l.bitmap.height){var u={x:0,y:0,w:l.bitmap.width+2,h:l.bitmap.height+2};i.push(u);s[a]={rect:u,metrics:l.metrics}}}}i=
e$jscomp$2.potpack(i);i=new e$jscomp$2.AlphaImage({width:i.w||1,height:i.h||1});for(var p in t){var o=t[p];for(var d in o)(n=o[+d])&&0!==n.bitmap.width&&0!==n.bitmap.height&&(s=r[p][d].rect,e$jscomp$2.AlphaImage.copy(n.bitmap,i,{x:0,y:0},{x:s.x+1,y:s.y+1},n.bitmap))}this.image=i;this.positions=r};e$jscomp$2.register("GlyphAtlas",o$jscomp$2);var n$jscomp$2=function(t){this.tileID=new e$jscomp$2.OverscaledTileID(t.tileID.overscaledZ,t.tileID.wrap,t.tileID.canonical.z,t.tileID.canonical.x,t.tileID.canonical.y);
this.uid=t.uid;this.zoom=t.zoom;this.pixelRatio=t.pixelRatio;this.tileSize=t.tileSize;this.source=t.source;this.overscaling=this.tileID.overscaleFactor();this.showCollisionBoxes=t.showCollisionBoxes;this.collectResourceTiming=!!t.collectResourceTiming;this.returnDependencies=!!t.returnDependencies;this.promoteId=t.promoteId};n$jscomp$2.prototype.parse=function(t$jscomp$0,r$jscomp$0,i,n$jscomp$0,a){function z(){if(c)return a(c);if(p&&f&&d){var t=new o$jscomp$2(p),r=new e$jscomp$2.ImageAtlas(f,d),n;
for(n in g){var l=g[n];l instanceof e$jscomp$2.SymbolBucket?(s$jscomp$2(l.layers,this.zoom,i),e$jscomp$2.performSymbolLayout(l,p,t.positions,f,r.iconPositions,this.showCollisionBoxes,this.tileID.canonical)):l.hasPattern&&(l instanceof e$jscomp$2.LineBucket||l instanceof e$jscomp$2.FillBucket||l instanceof e$jscomp$2.FillExtrusionBucket)&&(s$jscomp$2(l.layers,this.zoom,i),l.addFeatures(m,this.tileID.canonical,r.patternPositions))}this.status="done";a(null,{buckets:e$jscomp$2.values(g).filter(function(e){return!e.isEmpty()}),
featureIndex:h,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:t.image,imageAtlas:r,glyphMap:this.returnDependencies?p:null,iconMap:this.returnDependencies?f:null,glyphPositions:this.returnDependencies?t.positions:null})}}var l$jscomp$0=this;this.status="parsing";this.data=t$jscomp$0;this.collisionBoxArray=new e$jscomp$2.CollisionBoxArray;var u=new e$jscomp$2.DictionaryCoder(Object.keys(t$jscomp$0.layers).sort()),h=new e$jscomp$2.FeatureIndex(this.tileID,this.promoteId);h.bucketLayerIDs=
[];var c,p,f,d,g={},m={featureIndex:h,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:i};r$jscomp$0=r$jscomp$0.familiesBySource[this.source];for(var y in r$jscomp$0){var x=t$jscomp$0.layers[y];if(x){1===x.version&&e$jscomp$2.warnOnce('Vector tile source "'+this.source+'" layer "'+y+'" does not use vector tile spec v2 and therefore may have some rendering errors.');for(var w=u.encode(y),S=[],I=0;I<x.length;I++){var M=x.feature(I),b=h.getId(M,y);S.push({feature:M,id:b,
index:I,sourceLayerIndex:w})}x=0;for(I=r$jscomp$0[y];x<I.length;x+=1)M=I[x],b=M[0],b.minzoom&&this.zoom<Math.floor(b.minzoom)||b.maxzoom&&this.zoom>=b.maxzoom||"none"!==b.visibility&&(s$jscomp$2(M,this.zoom,i),(g[b.id]=b.createBucket({index:h.bucketLayerIDs.length,layers:M,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:w,sourceID:this.source})).populate(S,m,this.tileID.canonical),h.bucketLayerIDs.push(M.map(function(e){return e.id})))}}t$jscomp$0=
e$jscomp$2.mapObject(m.glyphDependencies,function(e){return Object.keys(e).map(Number)});Object.keys(t$jscomp$0).length?n$jscomp$0.send("getGlyphs",{uid:this.uid,stacks:t$jscomp$0},function(e,t){c||(c=e,p=t,z.call(l$jscomp$0))}):p={};t$jscomp$0=Object.keys(m.iconDependencies);t$jscomp$0.length?n$jscomp$0.send("getImages",{icons:t$jscomp$0,source:this.source,tileID:this.tileID,type:"icons"},function(e,t){c||(c=e,f=t,z.call(l$jscomp$0))}):f={};t$jscomp$0=Object.keys(m.patternDependencies);t$jscomp$0.length?
n$jscomp$0.send("getImages",{icons:t$jscomp$0,source:this.source,tileID:this.tileID,type:"patterns"},function(e,t){c||(c=e,d=t,z.call(l$jscomp$0))}):d={};z.call(this)};var l$jscomp$2=function(e,t,r,i){this.actor=e;this.layerIndex=t;this.availableImages=r;this.loadVectorData=i||a$jscomp$2;this.loading={};this.loaded={}};l$jscomp$2.prototype.loadTile=function(t$jscomp$1,r){var i$jscomp$0=this,o=t$jscomp$1.uid;this.loading||(this.loading={});var s=!!(t$jscomp$1&&t$jscomp$1.request&&t$jscomp$1.request.collectResourceTiming)&&
new e$jscomp$2.RequestPerformance(t$jscomp$1.request),a=this.loading[o]=new n$jscomp$2(t$jscomp$1);a.abort=this.loadVectorData(t$jscomp$1,function(t$jscomp$0,n){if(delete i$jscomp$0.loading[o],t$jscomp$0||!n)return a.status="done",i$jscomp$0.loaded[o]=a,r(t$jscomp$0);var l=n.rawData,u={};n.expires&&(u.expires=n.expires);n.cacheControl&&(u.cacheControl=n.cacheControl);var h={};s&&(t$jscomp$0=s.finish())&&(h.resourceTiming=JSON.parse(JSON.stringify(t$jscomp$0)));a.vectorTile=n.vectorTile;a.parse(n.vectorTile,
i$jscomp$0.layerIndex,i$jscomp$0.availableImages,i$jscomp$0.actor,function(t,i){if(t||!i)return r(t);r(null,e$jscomp$2.extend({rawTileData:l.slice(0)},i,u,h))});i$jscomp$0.loaded=i$jscomp$0.loaded||{};i$jscomp$0.loaded[o]=a})};l$jscomp$2.prototype.reloadTile=function(e$jscomp$0,t){var r=this,i$jscomp$0=this.loaded,o$jscomp$0=e$jscomp$0.uid,n=this;if(i$jscomp$0&&i$jscomp$0[o$jscomp$0]){var s=i$jscomp$0[o$jscomp$0];s.showCollisionBoxes=e$jscomp$0.showCollisionBoxes;e$jscomp$0=function(e,i){var o=s.reloadCallback;
o&&(delete s.reloadCallback,s.parse(s.vectorTile,n.layerIndex,r.availableImages,n.actor,o));t(e,i)};"parsing"===s.status?s.reloadCallback=e$jscomp$0:"done"===s.status&&(s.vectorTile?s.parse(s.vectorTile,this.layerIndex,this.availableImages,this.actor,e$jscomp$0):e$jscomp$0())}};l$jscomp$2.prototype.abortTile=function(e,t){var r=this.loading;e=e.uid;r&&r[e]&&r[e].abort&&(r[e].abort(),delete r[e]);t()};l$jscomp$2.prototype.removeTile=function(e,t){var r=this.loaded;e=e.uid;r&&r[e]&&delete r[e];t()};
var u$jscomp$1=e$jscomp$2.window.ImageBitmap,h$jscomp$0=function(){this.loaded={}};h$jscomp$0.prototype.loadTile=function(t,r){var i=t.uid,o=t.encoding;t=t.rawImageData;t=u$jscomp$1&&t instanceof u$jscomp$1?this.getImageData(t):t;o=new e$jscomp$2.DEMData(i,t,o);this.loaded=this.loaded||{};this.loaded[i]=o;r(null,o)};h$jscomp$0.prototype.getImageData=function(t){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(t.width,t.height),this.offscreenCanvasContext=
this.offscreenCanvas.getContext("2d"));this.offscreenCanvas.width=t.width;this.offscreenCanvas.height=t.height;this.offscreenCanvasContext.drawImage(t,0,0,t.width,t.height);t=this.offscreenCanvasContext.getImageData(-1,-1,t.width+2,t.height+2);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),new e$jscomp$2.RGBAImage({width:t.width,height:t.height},t.data)};h$jscomp$0.prototype.removeTile=function(e){var t=this.loaded;e=e.uid;t&&t[e]&&delete t[e]};
var f$jscomp$0=e$jscomp$2.vectorTile.VectorTileFeature.prototype.toGeoJSON,d$jscomp$0=function(t){this._feature=t;this.extent=e$jscomp$2.EXTENT;this.type=t.type;this.properties=t.tags;"id"in t&&!isNaN(t.id)&&(this.id=parseInt(t.id,10))};d$jscomp$0.prototype.loadGeometry=function(){if(1===this._feature.type){for(var t=[],r=0,i=this._feature.geometry;r<i.length;r+=1){var o=i[r];t.push([new e$jscomp$2.Point$1(o[0],o[1])])}return t}t=[];r=0;for(i=this._feature.geometry;r<i.length;r+=1){o=[];for(var u=
0,h=i[r];u<h.length;u+=1){var c=h[u];o.push(new e$jscomp$2.Point$1(c[0],c[1]))}t.push(o)}return t};d$jscomp$0.prototype.toGeoJSON=function(e,t,r){return f$jscomp$0.call(this,e,t,r)};var g$jscomp$0=function(t){this.layers={_geojsonTileLayer:this};this.name="_geojsonTileLayer";this.extent=e$jscomp$2.EXTENT;this.length=t.length;this._features=t};g$jscomp$0.prototype.feature=function(e){return new d$jscomp$0(this._features[e])};var m$jscomp$0=e$jscomp$2.vectorTile.VectorTileFeature;y$jscomp$0.prototype.feature=
function(e){return new x$jscomp$0(this.features[e],this.options.extent)};x$jscomp$0.prototype.loadGeometry=function(){var t=this.rawGeometry;this.geometry=[];for(var r=0;r<t.length;r++){for(var i=t[r],o=[],n=0;n<i.length;n++)o.push(new e$jscomp$2.Point$1(i[n][0],i[n][1]));this.geometry.push(o)}return this.geometry};x$jscomp$0.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var e=this.geometry,t=1/0,r=-1/0,i=1/0,o=-1/0,n=0;n<e.length;n++)for(var s=e[n],a=0;a<s.length;a++){var l=s[a];
t=Math.min(t,l.x);r=Math.max(r,l.x);i=Math.min(i,l.y);o=Math.max(o,l.y)}return[t,i,r,o]};x$jscomp$0.prototype.toGeoJSON=m$jscomp$0.prototype.toGeoJSON;var w$jscomp$0=I$jscomp$0;w$jscomp$0.fromVectorTileJs=I$jscomp$0;w$jscomp$0.fromGeojsonVt=function(e,t){t=t||{};var r={},i;for(i in e)r[i]=new y$jscomp$0(e[i].features,t),r[i].name=i,r[i].version=t.version,r[i].extent=t.extent;return I$jscomp$0({layers:r})};w$jscomp$0.GeoJSONWrapper=y$jscomp$0;var O=function(e){return e[0]},E=function(e){return e[1]},
F=function(e$jscomp$1,t$jscomp$1,r$jscomp$1,i$jscomp$1,o$jscomp$1){void 0===t$jscomp$1&&(t$jscomp$1=O);void 0===r$jscomp$1&&(r$jscomp$1=E);void 0===i$jscomp$1&&(i$jscomp$1=64);void 0===o$jscomp$1&&(o$jscomp$1=Float64Array);this.nodeSize=i$jscomp$1;this.points=e$jscomp$1;var s$jscomp$1=this.ids=new (65536>e$jscomp$1.length?Uint16Array:Uint32Array)(e$jscomp$1.length);o$jscomp$1=this.coords=new o$jscomp$1(2*e$jscomp$1.length);for(var l$jscomp$0=0;l$jscomp$0<e$jscomp$1.length;l$jscomp$0++)s$jscomp$1[l$jscomp$0]=
l$jscomp$0,o$jscomp$1[2*l$jscomp$0]=t$jscomp$1(e$jscomp$1[l$jscomp$0]),o$jscomp$1[2*l$jscomp$0+1]=r$jscomp$1(e$jscomp$1[l$jscomp$0]);!function e$jscomp$0(t$jscomp$0,r$jscomp$0,i$jscomp$0,o$jscomp$0,n$jscomp$0,s$jscomp$0){if(!(n$jscomp$0-o$jscomp$0<=i$jscomp$0)){var a$jscomp$0=o$jscomp$0+n$jscomp$0>>1;!function e(t,r,i,o,n,s){for(;n>o;){if(600<n-o){var a=n-o+1,l=i-o+1,u=Math.log(a),h=.5*Math.exp(2*u/3);u=.5*Math.sqrt(u*h*(a-h)/a)*(0>l-a/2?-1:1);e(t,r,i,Math.max(o,Math.floor(i-l*h/a+u)),Math.min(n,
Math.floor(i+(a-l)*h/a+u)),s)}a=r[2*i+s];l=o;h=n;D(t,r,o,i);for(r[2*n+s]>a&&D(t,r,o,n);l<h;){D(t,r,l,h);l++;for(h--;r[2*l+s]<a;)l++;for(;r[2*h+s]>a;)h--}r[2*o+s]===a?D(t,r,o,h):D(t,r,++h,n);h<=i&&(o=h+1);i<=h&&(n=h-1)}}(t$jscomp$0,r$jscomp$0,a$jscomp$0,o$jscomp$0,n$jscomp$0,s$jscomp$0%2);e$jscomp$0(t$jscomp$0,r$jscomp$0,i$jscomp$0,o$jscomp$0,a$jscomp$0-1,s$jscomp$0+1);e$jscomp$0(t$jscomp$0,r$jscomp$0,i$jscomp$0,a$jscomp$0+1,n$jscomp$0,s$jscomp$0+1)}}(s$jscomp$1,o$jscomp$1,i$jscomp$1,0,s$jscomp$1.length-
1,0)};F.prototype.range=function(e$jscomp$0,t$jscomp$0,r,i){for(var e=this.ids,t=this.coords,s=this.nodeSize,a,l,u=[0,e.length-1,0],h=[];u.length;){var c=u.pop(),p=u.pop(),f=u.pop();if(p-f<=s)for(c=f;c<=p;c++)l=t[2*c+1],(a=t[2*c])>=e$jscomp$0&&a<=r&&l>=t$jscomp$0&&l<=i&&h.push(e[c]);else{var g=Math.floor((f+p)/2);l=t[2*g+1];(a=t[2*g])>=e$jscomp$0&&a<=r&&l>=t$jscomp$0&&l<=i&&h.push(e[g]);var m=(c+1)%2;(0===c?e$jscomp$0<=a:t$jscomp$0<=l)&&(u.push(f),u.push(g-1),u.push(m));(0===c?r>=a:i>=l)&&(u.push(g+
1),u.push(p),u.push(m))}}return h};F.prototype.within=function(e$jscomp$0,t$jscomp$0,r){for(var e=this.ids,t=this.coords,n=this.nodeSize,s=[0,e.length-1,0],a=[],l=r*r;s.length;){var u=s.pop(),h=s.pop(),c=s.pop();if(h-c<=n)for(u=c;u<=h;u++){c=t[2*u]-e$jscomp$0;var n$jscomp$0=t[2*u+1]-t$jscomp$0;c*c+n$jscomp$0*n$jscomp$0<=l&&a.push(e[u])}else{n$jscomp$0=Math.floor((c+h)/2);var d=t[2*n$jscomp$0],g=t[2*n$jscomp$0+1],o=d-e$jscomp$0,n$jscomp$1=g-t$jscomp$0;o*o+n$jscomp$1*n$jscomp$1<=l&&a.push(e[n$jscomp$0]);
o=(u+1)%2;(0===u?e$jscomp$0-r<=d:t$jscomp$0-r<=g)&&(s.push(c),s.push(n$jscomp$0-1),s.push(o));(0===u?e$jscomp$0+r>=d:t$jscomp$0+r>=g)&&(s.push(n$jscomp$0+1),s.push(h),s.push(o))}}return a};var N={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:function(e){return e}},J=function(e){this.options=V(Object.create(N),e);this.trees=Array(this.options.maxZoom+1)};J.prototype.load=function(e){var t=this.options,r=t.log,i=t.minZoom,o=t.maxZoom;t=t.nodeSize;
r&&console.time("total time");var s="prepare "+e.length+" points";r&&console.time(s);this.points=e;for(var a=[],l=0;l<e.length;l++)e[l].geometry&&a.push(A(e[l],l));this.trees[o+1]=new F(a,X,W,t,Float32Array);r&&console.timeEnd(s);for(e=o;e>=i;e--)o=+Date.now(),a=this._cluster(a,e),this.trees[e]=new F(a,X,W,t,Float32Array),r&&console.log("z%d: %d clusters in %dms",e,a.length,+Date.now()-o);return r&&console.timeEnd("total time"),this};J.prototype.getClusters=function(e,t){var r=((e[0]+180)%360+360)%
360-180,i=Math.max(-90,Math.min(90,e[1])),o=180===e[2]?180:((e[2]+180)%360+360)%360-180,n=Math.max(-90,Math.min(90,e[3]));if(360<=e[2]-e[0])r=-180,o=180;else if(r>o)return r=this.getClusters([r,i,180,n],t),i=this.getClusters([-180,i,o,n],t),r.concat(i);t=this.trees[this._limitZoom(t)];e=[];var h=0;for(i=t.range(r/360+.5,j(n),o/360+.5,j(i));h<i.length;h+=1)o=t.points[i[h]],e.push(o.numPoints?B(o):this.points[o.index]);return e};J.prototype.getChildren=function(e){var t=this._getOriginId(e),r=this._getOriginZoom(e),
o=this.trees[r];if(!o)throw Error("No cluster with the specified id.");var n=o.points[t];if(!n)throw Error("No cluster with the specified id.");t=[];var l=0;for(r=o.within(n.x,n.y,this.options.radius/(this.options.extent*Math.pow(2,r-1)));l<r.length;l+=1)n=o.points[r[l]],n.parentId===e&&t.push(n.numPoints?B(n):this.points[n.index]);if(0===t.length)throw Error("No cluster with the specified id.");return t};J.prototype.getLeaves=function(e,t,r){var i=[];return this._appendLeaves(i,e,t||10,r||0,0),i};
J.prototype.getTile=function(e,t,r){var i=this.trees[this._limitZoom(e)];e=Math.pow(2,e);var n=this.options;n=n.radius/n.extent;var a=(r-n)/e,l=(r+1+n)/e,u={features:[]};return this._addTileFeatures(i.range((t-n)/e,a,(t+1+n)/e,l),i.points,t,r,e,u),0===t&&this._addTileFeatures(i.range(1-n/e,a,1,l),i.points,e,r,e,u),t===e-1&&this._addTileFeatures(i.range(0,a,n/e,l),i.points,-1,r,e,u),u.features.length?u:null};J.prototype.getClusterExpansionZoom=function(e){for(var t=this._getOriginZoom(e)-1;t<=this.options.maxZoom;){e=
this.getChildren(e);if(t++,1!==e.length)break;e=e[0].properties.cluster_id}return t};J.prototype._appendLeaves=function(e,t,r,i,o){var n=0;for(t=this.getChildren(t);n<t.length;n+=1){var a=t[n],l=a.properties;if(l&&l.cluster?o+l.point_count<=i?o+=l.point_count:o=this._appendLeaves(e,l.cluster_id,r,i,o):o<i?o++:e.push(a),e.length===r)break}return o};J.prototype._addTileFeatures=function(e,t,r,i,o,n){for(var s=0;s<e.length;s+=1){var l=t[e[s]],u=l.numPoints,h={type:1,geometry:[[Math.round(this.options.extent*
(l.x*o-r)),Math.round(this.options.extent*(l.y*o-i))]],tags:u?G(l):this.points[l.index].properties},c=void 0;u?c=l.id:this.options.generateId?c=l.index:this.points[l.index].id&&(c=this.points[l.index].id);void 0!==c&&(h.id=c);n.features.push(h)}};J.prototype._limitZoom=function(e){return Math.max(this.options.minZoom,Math.min(+e,this.options.maxZoom+1))};J.prototype._cluster=function(e,t){var r=[],i=this.options,o=i.reduce,n=i.minPoints;i=i.radius/(i.extent*Math.pow(2,t));for(var a=0;a<e.length;a++){var l=
e[a];if(!(l.zoom<=t)){l.zoom=t;for(var u=this.trees[t+1],h=u.within(l.x,l.y,i),c=l.numPoints||1,p=c,f=0,d=h;f<d.length;f+=1){var g=u.points[d[f]];g.zoom>t&&(p+=g.numPoints||1)}if(p>=n){f=l.x*c;d=l.y*c;c=o&&1<c?this._map(l,!0):null;g=(a<<5)+(t+1)+this.points.length;for(var w=0;w<h.length;w+=1){var I=u.points[h[w]];if(!(I.zoom<=t)){I.zoom=t;var M=I.numPoints||1;f+=I.x*M;d+=I.y*M;I.parentId=g;o&&(c||(c=this._map(l,!0)),o(c,this._map(I)))}}l.parentId=g;r.push({x:f/p,y:d/p,zoom:1/0,id:g,parentId:-1,numPoints:p,
properties:c})}else if(r.push(l),1<p)for(l=0,p=h;l<p.length;l+=1)h=u.points[p[l]],h.zoom<=t||(h.zoom=t,r.push(h))}}return r};J.prototype._getOriginId=function(e){return e-this.points.length>>5};J.prototype._getOriginZoom=function(e){return(e-this.points.length)%32};J.prototype._map=function(e,t){if(e.numPoints)return t?V({},e.properties):e.properties;e=this.points[e.index].properties;var i=this.options.map(e);return t&&i===e?V({},i):i};ve.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1E5,
tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0};ve.prototype.splitTile=function(e$jscomp$0,t$jscomp$0,r$jscomp$0,i$jscomp$0,o$jscomp$1,n$jscomp$1,s$jscomp$1){for(var a=[e$jscomp$0,t$jscomp$0,r$jscomp$0,i$jscomp$0],l=this.options,u=l.debug;a.length;){i$jscomp$0=a.pop();r$jscomp$0=a.pop();t$jscomp$0=a.pop();e$jscomp$0=a.pop();var h=1<<t$jscomp$0,c=32*((1<<t$jscomp$0)*i$jscomp$0+r$jscomp$0)+t$jscomp$0,p=this.tiles[c],JSCompiler_temp;if(JSCompiler_temp=!p){1<u&&
console.time("creation");p=this.tiles;JSCompiler_temp=e$jscomp$0;for(var o=l,n=t$jscomp$0===o.maxZoom?0:o.tolerance/((1<<t$jscomp$0)*o.extent),s={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:r$jscomp$0,y:i$jscomp$0,z:t$jscomp$0,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},a$jscomp$0=0;a$jscomp$0<JSCompiler_temp.length;a$jscomp$0++){s.numFeatures++;var c$jscomp$0=void 0,e=s,t=JSCompiler_temp[a$jscomp$0],r=n,i=o,o$jscomp$0=t.geometry,n$jscomp$0=t.type,s$jscomp$0=[];if("Point"===
n$jscomp$0||"MultiPoint"===n$jscomp$0)for(var a$jscomp$1=0;a$jscomp$1<o$jscomp$0.length;a$jscomp$1+=3)s$jscomp$0.push(o$jscomp$0[a$jscomp$1]),s$jscomp$0.push(o$jscomp$0[a$jscomp$1+1]),e.numPoints++,e.numSimplified++;else if("LineString"===n$jscomp$0)me(s$jscomp$0,o$jscomp$0,e,r,!1,!1);else if("MultiLineString"===n$jscomp$0||"Polygon"===n$jscomp$0)for(a$jscomp$1=0;a$jscomp$1<o$jscomp$0.length;a$jscomp$1++)me(s$jscomp$0,o$jscomp$0[a$jscomp$1],e,r,"Polygon"===n$jscomp$0,0===a$jscomp$1);else if("MultiPolygon"===
n$jscomp$0)for(var l$jscomp$0=0;l$jscomp$0<o$jscomp$0.length;l$jscomp$0++){var u$jscomp$0=o$jscomp$0[l$jscomp$0];for(a$jscomp$1=0;a$jscomp$1<u$jscomp$0.length;a$jscomp$1++)me(s$jscomp$0,u$jscomp$0[a$jscomp$1],e,r,!0,0===a$jscomp$1)}if(s$jscomp$0.length){r=t.tags||null;if("LineString"===n$jscomp$0&&i.lineMetrics){for(c$jscomp$0 in r={},t.tags)r[c$jscomp$0]=t.tags[c$jscomp$0];r.mapbox_clip_start=o$jscomp$0.start/o$jscomp$0.size;r.mapbox_clip_end=o$jscomp$0.end/o$jscomp$0.size}c$jscomp$0={geometry:s$jscomp$0,
type:"Polygon"===n$jscomp$0||"MultiPolygon"===n$jscomp$0?3:"LineString"===n$jscomp$0||"MultiLineString"===n$jscomp$0?2:1,tags:r};null!==t.id&&(c$jscomp$0.id=t.id);e.features.push(c$jscomp$0)}e=JSCompiler_temp[a$jscomp$0].minX;t=JSCompiler_temp[a$jscomp$0].minY;c$jscomp$0=JSCompiler_temp[a$jscomp$0].maxX;i=JSCompiler_temp[a$jscomp$0].maxY;e<s.minX&&(s.minX=e);t<s.minY&&(s.minY=t);c$jscomp$0>s.maxX&&(s.maxX=c$jscomp$0);i>s.maxY&&(s.maxY=i)}JSCompiler_temp=(p=p[c]=s,this.tileCoords.push({z:t$jscomp$0,
x:r$jscomp$0,y:i$jscomp$0}),u)}JSCompiler_temp&&(1<u&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",t$jscomp$0,r$jscomp$0,i$jscomp$0,p.numFeatures,p.numPoints,p.numSimplified),console.timeEnd("creation")),c="z"+t$jscomp$0,this.stats[c]=(this.stats[c]||0)+1,this.total++);if(p.source=e$jscomp$0,o$jscomp$1){if(t$jscomp$0===l.maxZoom||t$jscomp$0===o$jscomp$1)continue;c=1<<o$jscomp$1-t$jscomp$0;if(r$jscomp$0!==Math.floor(n$jscomp$1/c)||i$jscomp$0!==Math.floor(s$jscomp$1/c))continue}else if(t$jscomp$0===
l.indexMaxZoom||p.numPoints<=l.indexMaxPoints)continue;if(p.source=null,0!==e$jscomp$0.length)1<u&&console.time("clipping"),a$jscomp$0=.5*l.buffer/l.extent,e=.5-a$jscomp$0,t=.5+a$jscomp$0,c$jscomp$0=1+a$jscomp$0,c=JSCompiler_temp=o=n=null,s=re(e$jscomp$0,h,r$jscomp$0-a$jscomp$0,r$jscomp$0+t,0,p.minX,p.maxX,l),e$jscomp$0=re(e$jscomp$0,h,r$jscomp$0+e,r$jscomp$0+c$jscomp$0,0,p.minX,p.maxX,l),s&&(c=re(s,h,i$jscomp$0-a$jscomp$0,i$jscomp$0+t,1,p.minY,p.maxY,l),JSCompiler_temp=re(s,h,i$jscomp$0+e,i$jscomp$0+
c$jscomp$0,1,p.minY,p.maxY,l)),e$jscomp$0&&(o=re(e$jscomp$0,h,i$jscomp$0-a$jscomp$0,i$jscomp$0+t,1,p.minY,p.maxY,l),n=re(e$jscomp$0,h,i$jscomp$0+e,i$jscomp$0+c$jscomp$0,1,p.minY,p.maxY,l)),1<u&&console.timeEnd("clipping"),a.push(c||[],t$jscomp$0+1,2*r$jscomp$0,2*i$jscomp$0),a.push(JSCompiler_temp||[],t$jscomp$0+1,2*r$jscomp$0,2*i$jscomp$0+1),a.push(o||[],t$jscomp$0+1,2*r$jscomp$0+1,2*i$jscomp$0),a.push(n||[],t$jscomp$0+1,2*r$jscomp$0+1,2*i$jscomp$0+1)}};ve.prototype.getTile=function(e,t,r){var i=
this.options,o=i.extent;i=i.debug;if(0>e||24<e)return null;var s=1<<e;s=t=(t%s+s)%s;s=32*((1<<e)*r+s)+e;if(this.tiles[s])return pe(this.tiles[s],o);1<i&&console.log("drilling down to z%d-%d-%d",e,t,r);for(var l,u=e,h=t,c=r;!l&&0<u;)u--,h=Math.floor(h/2),c=Math.floor(c/2),l=this.tiles[32*((1<<u)*c+h)+u];return l&&l.source?(1<i&&console.log("found parent tile z%d-%d-%d",u,h,c),1<i&&console.time("drilling down"),this.splitTile(l.source,u,h,c,e,t,r),1<i&&console.timeEnd("drilling down"),this.tiles[s]?
pe(this.tiles[s],o):null):null};var we=function(t$jscomp$2){function r$jscomp$2(e,r,i,o){t$jscomp$2.call(this,e,r,i,xe);o&&(this.loadGeoJSON=o)}return t$jscomp$2&&(r$jscomp$2.__proto__=t$jscomp$2),(r$jscomp$2.prototype=Object.create(t$jscomp$2&&t$jscomp$2.prototype)).constructor=r$jscomp$2,r$jscomp$2.prototype.loadData=function(e,t){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0});this._pendingCallback=t;this._pendingLoadDataParams=e;this._state&&"Idle"!==this._state?this._state=
"NeedsLoadData":(this._state="Coalescing",this._loadData())},r$jscomp$2.prototype._loadData=function(){var t$jscomp$1=this;if(this._pendingCallback&&this._pendingLoadDataParams){var r$jscomp$1=this._pendingCallback,i$jscomp$0=this._pendingLoadDataParams;delete this._pendingCallback;delete this._pendingLoadDataParams;var o$jscomp$1=!!(i$jscomp$0&&i$jscomp$0.request&&i$jscomp$0.request.collectResourceTiming)&&new e$jscomp$2.RequestPerformance(i$jscomp$0.request);this.loadGeoJSON(i$jscomp$0,function(n$jscomp$1,
s$jscomp$0){if(n$jscomp$1||!s$jscomp$0)return r$jscomp$1(n$jscomp$1);if("object"!=typeof s$jscomp$0)return r$jscomp$1(Error("Input data given to '"+i$jscomp$0.source+"' is not a valid GeoJSON object."));!function e(t,r){var i=t&&t.type;if("FeatureCollection"===i)for(i=0;i<t.features.length;i++)e(t.features[i],r);else if("GeometryCollection"===i)for(i=0;i<t.geometries.length;i++)e(t.geometries[i],r);else if("Feature"===i)e(t.geometry,r);else if("Polygon"===i)c$jscomp$1(t.coordinates,r);else if("MultiPolygon"===
i)for(i=0;i<t.coordinates.length;i++)c$jscomp$1(t.coordinates[i],r);return t}(s$jscomp$0,!0);try{t$jscomp$1._geoJSONIndex=i$jscomp$0.cluster?(new J(function(t$jscomp$0){var r$jscomp$0=t$jscomp$0.superclusterOptions;t$jscomp$0=t$jscomp$0.clusterProperties;if(!t$jscomp$0||!r$jscomp$0)return r$jscomp$0;for(var o$jscomp$0={},n$jscomp$0={},s={accumulated:null,zoom:0},a={properties:null},l=Object.keys(t$jscomp$0),u=0;u<l.length;u+=1){var c=l[u],p=t$jscomp$0[c],f=p[0];p=e$jscomp$2.createExpression(p[1]);
f=e$jscomp$2.createExpression("string"==typeof f?[f,["accumulated"],["get",c]]:f);o$jscomp$0[c]=p.value;n$jscomp$0[c]=f.value}return r$jscomp$0.map=function(e){a.properties=e;e={};for(var r=0;r<l.length;r+=1){var n=l[r];e[n]=o$jscomp$0[n].evaluate(s,a)}return e},r$jscomp$0.reduce=function(e,t){a.properties=t;for(t=0;t<l.length;t+=1){var o=l[t];s.accumulated=e[o];e[o]=n$jscomp$0[o].evaluate(s,a)}},r$jscomp$0}(i$jscomp$0))).load(s$jscomp$0.features):new ve(s$jscomp$0,i$jscomp$0.geojsonVtOptions)}catch(n$395){return r$jscomp$1(n$395)}t$jscomp$1.loaded=
{};n$jscomp$1={};o$jscomp$1&&(s$jscomp$0=o$jscomp$1.finish())&&(n$jscomp$1.resourceTiming={},n$jscomp$1.resourceTiming[i$jscomp$0.source]=JSON.parse(JSON.stringify(s$jscomp$0)));r$jscomp$1(null,n$jscomp$1)})}},r$jscomp$2.prototype.coalesce=function(){"Coalescing"===this._state?this._state="Idle":"NeedsLoadData"===this._state&&(this._state="Coalescing",this._loadData())},r$jscomp$2.prototype.reloadTile=function(e,r){var i=this.loaded;return i&&i[e.uid]?t$jscomp$2.prototype.reloadTile.call(this,e,r):
this.loadTile(e,r)},r$jscomp$2.prototype.loadGeoJSON=function(t,r){if(t.request)e$jscomp$2.getJSON(t.request,r);else{if("string"!=typeof t.data)return r(Error("Input data given to '"+t.source+"' is not a valid GeoJSON object."));try{return r(null,JSON.parse(t.data))}catch(e$396){return r(Error("Input data given to '"+t.source+"' is not a valid GeoJSON object."))}}},r$jscomp$2.prototype.removeSource=function(e,t){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0});t()},r$jscomp$2.prototype.getClusterExpansionZoom=
function(e,t){try{t(null,this._geoJSONIndex.getClusterExpansionZoom(e.clusterId))}catch(e$397){t(e$397)}},r$jscomp$2.prototype.getClusterChildren=function(e,t){try{t(null,this._geoJSONIndex.getChildren(e.clusterId))}catch(e$398){t(e$398)}},r$jscomp$2.prototype.getClusterLeaves=function(e,t){try{t(null,this._geoJSONIndex.getLeaves(e.clusterId,e.limit,e.offset))}catch(e$399){t(e$399)}},r$jscomp$2}(l$jscomp$2);m$jscomp$0=function(t$jscomp$0){var r=this;this.self=t$jscomp$0;this.actor=new e$jscomp$2.Actor(t$jscomp$0,
this);this.layerIndexes={};this.availableImages={};this.workerSourceTypes={vector:l$jscomp$2,geojson:we};this.workerSources={};this.demWorkerSources={};this.self.registerWorkerSource=function(e,t){if(r.workerSourceTypes[e])throw Error('Worker source with name "'+e+'" already registered.');r.workerSourceTypes[e]=t};this.self.registerRTLTextPlugin=function(t){if(e$jscomp$2.plugin.isParsed())throw Error("RTL text plugin already registered.");e$jscomp$2.plugin.applyArabicShaping=t.applyArabicShaping;
e$jscomp$2.plugin.processBidirectionalText=t.processBidirectionalText;e$jscomp$2.plugin.processStyledBidirectionalText=t.processStyledBidirectionalText}};return m$jscomp$0.prototype.setReferrer=function(e,t){this.referrer=t},m$jscomp$0.prototype.setImages=function(e,t,r){for(var i in this.availableImages[e]=t,this.workerSources[e]){var o=this.workerSources[e][i],n;for(n in o)o[n].availableImages=t}r()},m$jscomp$0.prototype.setLayers=function(e,t,r){this.getLayerIndex(e).replace(t);r()},m$jscomp$0.prototype.updateLayers=
function(e,t,r){this.getLayerIndex(e).update(t.layers,t.removedIds);r()},m$jscomp$0.prototype.loadTile=function(e,t,r){this.getWorkerSource(e,t.type,t.source).loadTile(t,r)},m$jscomp$0.prototype.loadDEMTile=function(e,t,r){this.getDEMWorkerSource(e,t.source).loadTile(t,r)},m$jscomp$0.prototype.reloadTile=function(e,t,r){this.getWorkerSource(e,t.type,t.source).reloadTile(t,r)},m$jscomp$0.prototype.abortTile=function(e,t,r){this.getWorkerSource(e,t.type,t.source).abortTile(t,r)},m$jscomp$0.prototype.removeTile=
function(e,t,r){this.getWorkerSource(e,t.type,t.source).removeTile(t,r)},m$jscomp$0.prototype.removeDEMTile=function(e,t){this.getDEMWorkerSource(e,t.source).removeTile(t)},m$jscomp$0.prototype.removeSource=function(e,t,r){if(this.workerSources[e]&&this.workerSources[e][t.type]&&this.workerSources[e][t.type][t.source]){var i=this.workerSources[e][t.type][t.source];delete this.workerSources[e][t.type][t.source];void 0!==i.removeSource?i.removeSource(t,r):r()}},m$jscomp$0.prototype.loadWorkerSource=
function(e,t,r){try{this.self.importScripts(t.url),r()}catch(e$400){r(e$400.toString())}},m$jscomp$0.prototype.syncRTLPluginState=function(t,r,i){try{e$jscomp$2.plugin.setState(r);var o=e$jscomp$2.plugin.getPluginURL();if(e$jscomp$2.plugin.isLoaded()&&!e$jscomp$2.plugin.isParsed()&&null!=o){this.self.importScripts(o);var n=e$jscomp$2.plugin.isParsed();i(n?void 0:Error("RTL Text Plugin failed to import scripts from "+o),n)}}catch(e$401){i(e$401.toString())}},m$jscomp$0.prototype.getAvailableImages=
function(e){e=this.availableImages[e];return e||(e=[]),e},m$jscomp$0.prototype.getLayerIndex=function(e){var t=this.layerIndexes[e];return t||(t=this.layerIndexes[e]=new i$jscomp$2),t},m$jscomp$0.prototype.getWorkerSource=function(e,t$jscomp$0,r$jscomp$0){var i=this;return this.workerSources[e]||(this.workerSources[e]={}),this.workerSources[e][t$jscomp$0]||(this.workerSources[e][t$jscomp$0]={}),this.workerSources[e][t$jscomp$0][r$jscomp$0]||(this.workerSources[e][t$jscomp$0][r$jscomp$0]=new this.workerSourceTypes[t$jscomp$0]({send:function(t,
r,o){i.actor.send(t,r,o,e)}},this.getLayerIndex(e),this.getAvailableImages(e))),this.workerSources[e][t$jscomp$0][r$jscomp$0]},m$jscomp$0.prototype.getDEMWorkerSource=function(e,t){return this.demWorkerSources[e]||(this.demWorkerSources[e]={}),this.demWorkerSources[e][t]||(this.demWorkerSources[e][t]=new h$jscomp$0),this.demWorkerSources[e][t]},m$jscomp$0.prototype.enforceCacheSizeLimit=function(t,r){e$jscomp$2.enforceCacheSizeLimit(r)},"undefined"!=typeof WorkerGlobalScope&&"undefined"!=typeof self&&
self instanceof WorkerGlobalScope&&(self.worker=new m$jscomp$0(self)),m$jscomp$0});define(["./shared"],function(t$jscomp$2){function r$jscomp$2(t){if(!o$jscomp$3)return t[0];for(var e=0;e<t.length;e++)if(t[e]in o$jscomp$3)return t[e];return t[0]}function m$jscomp$1(t,e,i,o,r,a){this.fontSize=t||24;this.buffer=void 0===e?3:e;this.cutoff=o||.25;this.fontFamily=r||"sans-serif";this.fontWeight=a||"normal";this.radius=i||8;t=this.size=this.fontSize+2*this.buffer;this.canvas=document.createElement("canvas");
this.canvas.width=this.canvas.height=t;this.ctx=this.canvas.getContext("2d");this.ctx.font=this.fontWeight+" "+this.fontSize+"px "+this.fontFamily;this.ctx.textBaseline="middle";this.ctx.fillStyle="black";this.gridOuter=new Float64Array(t*t);this.gridInner=new Float64Array(t*t);this.f=new Float64Array(t);this.d=new Float64Array(t);this.z=new Float64Array(t+1);this.v=new Int16Array(t);this.middle=Math.round(t/2*(0<=navigator.userAgent.indexOf("Gecko/")?1.2:1))}function g$jscomp$1(t,e,i,o,r,a,n){for(var s=
0;s<e;s++){for(var l=0;l<i;l++)o[l]=t[l*e+s];v$jscomp$1(o,r,a,n,i);for(l=0;l<i;l++)t[l*e+s]=r[l]}for(l=0;l<i;l++){for(s=0;s<e;s++)o[s]=t[l*e+s];v$jscomp$1(o,r,a,n,e);for(s=0;s<e;s++)t[l*e+s]=Math.sqrt(r[s])}}function v$jscomp$1(t,e,i,o,r){i[0]=0;o[0]=-1E20;o[1]=1E20;for(var a=1,n=0;a<r;a++){for(var s=(t[a]+a*a-(t[i[n]]+i[n]*i[n]))/(2*a-2*i[n]);s<=o[n];)n--,s=(t[a]+a*a-(t[i[n]]+i[n]*i[n]))/(2*a-2*i[n]);i[++n]=a;o[n]=s;o[n+1]=1E20}for(n=a=0;a<r;a++){for(;o[n+1]<a;)n++;e[a]=(a-i[n])*(a-i[n])+t[i[n]]}}
function I$jscomp$0(e,i,o){var r$jscomp$0=function(r,a){if(r)return o(r);a&&(r=t$jscomp$2.pick(t$jscomp$2.extend(a,e),"tiles minzoom maxzoom attribution mapbox_logo bounds scheme tileSize encoding".split(" ")),a.vector_layers&&(r.vectorLayers=a.vector_layers,r.vectorLayerIds=r.vectorLayers.map(function(t){return t.id})),r.tiles=i.canonicalizeTileset(r,e.url),o(null,r))};return e.url?t$jscomp$2.getJSON(i.transformRequest(i.normalizeSourceURL(e.url),t$jscomp$2.ResourceType.Source),r$jscomp$0):t$jscomp$2.browser.frame(function(){return r$jscomp$0(null,
e)})}function B$jscomp$0(e,i){var o=t$jscomp$2.identity([]);return t$jscomp$2.translate(o,o,[1,1,0]),t$jscomp$2.scale(o,o,[.5*e.width,.5*e.height,1]),t$jscomp$2.multiply(o,o,e.calculatePosMatrix(i.toUnwrapped()))}function O$jscomp$0(t$jscomp$0,e$jscomp$0,i$jscomp$0,o$jscomp$0,r,a$jscomp$0){var n$jscomp$0=function(t,e,i){if(t)for(var o=0;o<t.length;o+=1){var a=e[t[o]];if(a&&a.source===i&&"fill-extrusion"===a.type)return!0}else for(o in e)if(t=e[o],t.source===i&&"fill-extrusion"===t.type)return!0;return!1}(r&&
r.layers,e$jscomp$0,t$jscomp$0.id),s=a$jscomp$0.maxPitchScaleFactor();o$jscomp$0=t$jscomp$0.tilesIn(o$jscomp$0,s,n$jscomp$0);o$jscomp$0.sort(F$jscomp$0);n$jscomp$0=[];for(var u$jscomp$0=0;u$jscomp$0<o$jscomp$0.length;u$jscomp$0+=1){var p$jscomp$0=o$jscomp$0[u$jscomp$0];n$jscomp$0.push({wrappedTileID:p$jscomp$0.tileID.wrapped().key,queryResults:p$jscomp$0.tile.queryRenderedFeatures(e$jscomp$0,i$jscomp$0,t$jscomp$0._state,p$jscomp$0.queryGeometry,p$jscomp$0.cameraQueryGeometry,p$jscomp$0.scale,r,a$jscomp$0,
s,B$jscomp$0(t$jscomp$0.transform,p$jscomp$0.tileID))})}e$jscomp$0=function(t){for(var e={},i={},o=0;o<t.length;o+=1){var a=t[o],n=a.queryResults;a=a.wrappedTileID;a=i[a]=i[a]||{};for(var c in n)for(var u=n[c],h=a[c]=a[c]||{},p=e[c]=e[c]||[],d=0;d<u.length;d+=1){var f=u[d];h[f.featureIndex]||(h[f.featureIndex]=!0,p.push(f))}}return e}(n$jscomp$0);for(var _ in e$jscomp$0)e$jscomp$0[_].forEach(function(e){e=e.feature;var o=t$jscomp$0.getFeatureState(e.layer["source-layer"],e.id);e.source=e.layer.source;
e.layer["source-layer"]&&(e.sourceLayer=e.layer["source-layer"]);e.state=o});return e$jscomp$0}function F$jscomp$0(t,e){t=t.tileID;e=e.tileID;return t.overscaledZ-e.overscaledZ||t.canonical.y-e.canonical.y||t.wrap-e.wrap||t.canonical.x-e.canonical.x}function Mt(t,e){var i=Math.abs(2*t.wrap)-+(0>t.wrap),o=Math.abs(2*e.wrap)-+(0>e.wrap);return t.overscaledZ-e.overscaledZ||o-i||e.canonical.y-t.canonical.y||e.canonical.x-t.canonical.x}function Lt(t){return"raster"===t||"image"===t||"video"===t}function At(){return new t$jscomp$2.window.Worker(Hr.workerUrl)}
function Ut(e,i){var o={},r;for(r in e)"ref"!==r&&(o[r]=e[r]);return t$jscomp$2.refProperties.forEach(function(t){t in i&&(o[t]=i[t])}),o}function Nt(t){t=t.slice();for(var e=Object.create(null),i=0;i<t.length;i++)e[t[i].id]=t[i];for(i=0;i<t.length;i++)"ref"in t[i]&&(t[i]=Ut(t[i],e[t[i].ref]));return t}function Wt(e,i,o,r,a,n){for(var s in i=i||{},e=e||{})e.hasOwnProperty(s)&&(t$jscomp$2.deepEqual(e[s],i[s])||o.push({command:n,args:[r,s,i[s],a]}));for(s in i)i.hasOwnProperty(s)&&!e.hasOwnProperty(s)&&
(t$jscomp$2.deepEqual(e[s],i[s])||o.push({command:n,args:[r,s,i[s],a]}))}function Xt(t){return t.id}function Ht(t,e){return t[e.id]=e,t}function Jt(e,i,o,r,a){var n=t$jscomp$2.create();return i?(t$jscomp$2.scale(n,n,[1/a,1/a,1]),o||t$jscomp$2.rotateZ(n,n,r.angle)):t$jscomp$2.multiply(n,r.labelPlaneMatrix,e),n}function Qt(e,i,o,r,a){return i?(e=t$jscomp$2.clone(e),t$jscomp$2.scale(e,e,[a,a,1]),o||t$jscomp$2.rotateZ(e,e,-r.angle),e):r.glCoordMatrix}function $t(e,i){e=[e.x,e.y,0,1];ue(e,e,i);i=e[3];
return{point:new t$jscomp$2.Point(e[0]/i,e[1]/i),signedDistanceFromCamera:i}}function ie(e,i$jscomp$0,o$jscomp$0,r,a,n,s,l){var c=r?e.textSizeData:e.iconSizeData,u=t$jscomp$2.evaluateSizeForZoom(c,o$jscomp$0.transform.zoom),h=[256/o$jscomp$0.width*2+1,256/o$jscomp$0.height*2+1],p=r?e.text.dynamicLayoutVertexArray:e.icon.dynamicLayoutVertexArray;p.clear();for(var d=e.lineVertexArray,_=r?e.text.placedSymbolArray:e.icon.placedSymbolArray,f=o$jscomp$0.transform.width/o$jscomp$0.transform.height,m=!1,
g=0;g<_.length;g++){var v=_.get(g);if(v.hidden||v.writingMode===t$jscomp$2.WritingMode.vertical&&!m)ce(v.numGlyphs,p);else{m=!1;var y=[v.anchorX,v.anchorY,0,1];t$jscomp$2.transformMat4(y,y,i$jscomp$0);var i=y[0]/y[3],o=y[1]/y[3];if(i>=-h[0]&&i<=h[0]&&o>=-h[1]&&o<=h[1]){m=.5+o$jscomp$0.transform.cameraToCenterDistance/y[3]*.5;y=t$jscomp$2.evaluateSizeForFeature(c,u,v);y=s?y/m:y*m;i=new t$jscomp$2.Point(v.anchorX,v.anchorY);o=$t(i,a).point;var I={},P=ae(v,y,!1,l,i$jscomp$0,a,n,e.glyphOffsetArray,d,
p,o,i,I,f);m=P.useVertical;(P.notEnoughRoom||m||P.needsFlipping&&ae(v,y,!0,l,i$jscomp$0,a,n,e.glyphOffsetArray,d,p,o,i,I,f).notEnoughRoom)&&ce(v.numGlyphs,p)}else ce(v.numGlyphs,p)}}r?e.text.dynamicLayoutVertexBuffer.updateData(p):e.icon.dynamicLayoutVertexBuffer.updateData(p)}function oe(t,e,i,o,r,a,n,s,l,c,u){var h=s.glyphStartIndex+s.numGlyphs,p=s.lineStartIndex,d=s.lineStartIndex+s.lineLength,_=e.getoffsetX(s.glyphStartIndex);e=e.getoffsetX(h-1);_=se(t*_,i,o,r,a,n,s.segment,p,d,l,c,u);return _?
(t=se(t*e,i,o,r,a,n,s.segment,p,d,l,c,u))?{first:_,last:t}:null:null}function re(e,i,o,r){return e===t$jscomp$2.WritingMode.horizontal&&Math.abs(o.y-i.y)>Math.abs(o.x-i.x)*r?{useVertical:!0}:(e===t$jscomp$2.WritingMode.vertical?i.y<o.y:i.x>o.x)?{needsFlipping:!0}:null}function ae(e,i,o,r,a,n,s,l,c,u,h,p,d,_){i/=24;var g=e.lineOffsetX*i,v=e.lineOffsetY*i;if(1<e.numGlyphs){a=e.glyphStartIndex+e.numGlyphs;var x=e.lineStartIndex,b=e.lineStartIndex+e.lineLength,w=oe(i,l,g,v,o,h,p,e,c,n,d);if(!w)return{notEnoughRoom:!0};
var T=$t(w.first.point,s).point;s=$t(w.last.point,s).point;if(r&&!o&&(_=re(e.writingMode,T,s,_)))return _;_=[w.first];for(r=e.glyphStartIndex+1;r<a-1;r++)_.push(se(i*l.getoffsetX(r),g,v,o,h,p,e.segment,x,b,c,n,d));_.push(w.last)}else{if(r&&!o&&(x=$t(p,a).point,b=e.lineStartIndex+e.segment+1,b=new t$jscomp$2.Point(c.getx(b),c.gety(b)),w=$t(b,a),a=0<w.signedDistanceFromCamera?w.point:ne(p,b,x,1,a),_=re(e.writingMode,x,a,_)))return _;e=se(i*l.getoffsetX(e.glyphStartIndex),g,v,o,h,p,e.segment,e.lineStartIndex,
e.lineStartIndex+e.lineLength,c,n,d);if(!e)return{notEnoughRoom:!0};_=[e]}e=0;for(o=_;e<o.length;e+=1)n=o[e],t$jscomp$2.addDynamicAttributes(u,n.point,n.angle);return{}}function ne(t,e,i,o,r){t=$t(t.add(t.sub(e)._unit()),r).point;t=i.sub(t);return i.add(t._mult(o/t.mag()))}function se(e,i,o,r,a,n,s,l,c,u,h,p){var d=r?e-i:e+i;e=0<d?1:-1;i=0;r&&(e*=-1,i=Math.PI);0>e&&(i+=Math.PI);r=0<e?l+s:l+s+1;s=a;var y=0,x=0,b=Math.abs(d);for(d=[];y+x<=b;){if((r+=e)<l||r>=c)return null;if(a=s,d.push(s),void 0===
(s=p[r])){s=new t$jscomp$2.Point(u.getx(r),u.gety(r));var E=$t(s,h);0<E.signedDistanceFromCamera?s=p[r]=E.point:(E=r-e,s=ne(0===y?n:new t$jscomp$2.Point(u.getx(E),u.gety(E)),s,a,b-y+1,h))}y+=x;x=a.dist(s)}l=(b-y)/x;n=s.sub(a);l=n.mult(l)._add(a);l._add(n._unit()._perp()._mult(o*e));o=i+Math.atan2(s.y-a.y,s.x-a.x);return d.push(l),{point:l,angle:o,path:d}}function ce(t,e){for(var i=0;i<t;i++){var o=e.length;e.resize(o+4);e.float32.set(le,3*o)}}function ue(t,e,i){var o=e[0];e=e[1];return t[0]=i[0]*
o+i[4]*e+i[12],t[1]=i[1]*o+i[5]*e+i[13],t[3]=i[3]*o+i[7]*e+i[15],t}function pe(e,i,o){return t$jscomp$2.EXTENT/(e.tileSize*Math.pow(2,o-e.tileID.overscaledZ))*i}function ye(e,i,o,r,a){var n=t$jscomp$2.getAnchorAlignment(e);i*=-(n.horizontalAlign-.5);o*=-(n.verticalAlign-.5);e=t$jscomp$2.evaluateVariableOffset(e,r);return new t$jscomp$2.Point(i+e[0]*a,o+e[1]*a)}function xe(e,i,o,r,a,n){var s=e.x1,l=e.x2,c=e.y1,u=e.y2,h=e.anchorPointX;e=e.anchorPointY;i=new t$jscomp$2.Point(i,o);return r&&i._rotate(a?
n:-n),{x1:s+i.x,y1:c+i.y,x2:l+i.x,y2:u+i.y,anchorPointX:h,anchorPointY:e}}function we(t,e,i,o,r){t.emplaceBack(e?1:0,i?1:0,o||0,r||0);t.emplaceBack(e?1:0,i?1:0,o||0,r||0);t.emplaceBack(e?1:0,i?1:0,o||0,r||0);t.emplaceBack(e?1:0,i?1:0,o||0,r||0)}function De(t){if(0===t.opacity&&!t.placed)return 0;if(1===t.opacity&&t.placed)return 4294967295;var e=t.placed?1:0;t=Math.floor(127*t.opacity);return t*Te+e*Ee+t*Ie+e*Pe+t*Se+e*Ce+t*ze+e}function gi(t$jscomp$0,e$jscomp$0){var i$jscomp$0=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,
o$jscomp$0=e$jscomp$0.match(/attribute ([\w]+) ([\w]+)/g),r$jscomp$0=t$jscomp$0.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),a=e$jscomp$0.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g);r$jscomp$0=a?a.concat(r$jscomp$0):r$jscomp$0;var s={};return{fragmentSource:t$jscomp$0=t$jscomp$0.replace(i$jscomp$0,function(t,e,i,o,r){return s[r]=!0,"define"===e?"\n#ifndef HAS_UNIFORM_u_"+r+"\nvarying "+i+" "+o+" "+r+";\n#else\nuniform "+i+" "+o+" u_"+r+";\n#endif\n":"\n#ifdef HAS_UNIFORM_u_"+r+"\n    "+i+" "+
o+" "+r+" \x3d u_"+r+";\n#endif\n"}),vertexSource:e$jscomp$0=e$jscomp$0.replace(i$jscomp$0,function(t,e,i,o,r){t="float"===o?"vec2":"vec4";var n=r.match(/color/)?"color":t;return s[r]?"define"===e?"\n#ifndef HAS_UNIFORM_u_"+r+"\nuniform lowp float u_"+r+"_t;\nattribute "+i+" "+t+" a_"+r+";\nvarying "+i+" "+o+" "+r+";\n#else\nuniform "+i+" "+o+" u_"+r+";\n#endif\n":"vec4"===n?"\n#ifndef HAS_UNIFORM_u_"+r+"\n    "+r+" \x3d a_"+r+";\n#else\n    "+i+" "+o+" "+r+" \x3d u_"+r+";\n#endif\n":"\n#ifndef HAS_UNIFORM_u_"+
r+"\n    "+r+" \x3d unpack_mix_"+n+"(a_"+r+", u_"+r+"_t);\n#else\n    "+i+" "+o+" "+r+" \x3d u_"+r+";\n#endif\n":"define"===e?"\n#ifndef HAS_UNIFORM_u_"+r+"\nuniform lowp float u_"+r+"_t;\nattribute "+i+" "+t+" a_"+r+";\n#else\nuniform "+i+" "+o+" u_"+r+";\n#endif\n":"vec4"===n?"\n#ifndef HAS_UNIFORM_u_"+r+"\n    "+i+" "+o+" "+r+" \x3d a_"+r+";\n#else\n    "+i+" "+o+" "+r+" \x3d u_"+r+";\n#endif\n":"\n#ifndef HAS_UNIFORM_u_"+r+"\n    "+i+" "+o+" "+r+" \x3d unpack_mix_"+n+"(a_"+r+", u_"+r+"_t);\n#else\n    "+
i+" "+o+" "+r+" \x3d u_"+r+";\n#endif\n"}),staticAttributes:o$jscomp$0,staticUniforms:r$jscomp$0}}function xi(t){for(var e=[],i=0;i<t.length;i++)if(null!==t[i]){var o=t[i].split(" ");e.push(o.pop())}return e}function wi(t,e,i){var o=1/pe(i,1,e.transform.tileZoom),r=Math.pow(2,i.tileID.overscaledZ);e=i.tileSize*Math.pow(2,e.transform.tileZoom)/r;r=e*(i.tileID.canonical.x+i.tileID.wrap*r);e*=i.tileID.canonical.y;return{u_image:0,u_texsize:i.imageAtlasTexture.size,u_scale:[o,t.fromScale,t.toScale],u_fade:t.t,
u_pixel_coord_upper:[r>>16,e>>16],u_pixel_coord_lower:[65535&r,65535&e]}}function Ni(t,e,i){return t.translatePosMatrix(e.tileID.posMatrix,e,i.paint.get("line-translate"),i.paint.get("line-translate-anchor"))}function Yi(e,i,o,r,a,n,s){for(var l=e.context,c=l.gl,u=e.useProgram("collisionBox"),h=[],p=0,d=0,_=0;_<r.length;_++){var f=r[_],m=i.getTile(f),g=m.getBucket(o);if(g){var v=f.posMatrix;0===a[0]&&0===a[1]||(v=e.translatePosMatrix(f.posMatrix,m,a,n));f=s?g.textCollisionBox:g.iconCollisionBox;var x=
g.collisionCircleArray;if(0<x.length){var b=t$jscomp$2.create(),w=v;t$jscomp$2.mul(b,g.placementInvProjMatrix,e.transform.glCoordMatrix);t$jscomp$2.mul(b,b,g.placementViewportMatrix);h.push({circleArray:x,circleOffset:d,transform:w,invTransform:b});d=p+=x.length/4}f&&u.draw(l,c.LINES,It.disabled,Pt.disabled,e.colorModeForRenderPass(),Ct.disabled,Di(v,e.transform,m),o.id,f.layoutVertexBuffer,f.indexBuffer,f.segments,null,e.transform.zoom,null,null,f.collisionVertexBuffer)}}if(s&&h.length){i=e.useProgram("collisionCircle");
r=new t$jscomp$2.StructArrayLayout2f1f2i16;r.resize(4*p);r._trim();for(n=a=0;n<h.length;n+=1)for(s=h[n],u=0;u<s.circleArray.length/4;u++)g=4*u,d=s.circleArray[g+0],_=s.circleArray[g+1],m=s.circleArray[g+2],g=s.circleArray[g+3],r.emplace(a++,d,_,m,g,0),r.emplace(a++,d,_,m,g,1),r.emplace(a++,d,_,m,g,2),r.emplace(a++,d,_,m,g,3);if(!qi||qi.length<2*p){p*=2;a=new t$jscomp$2.StructArrayLayout3ui6;a.resize(p);a._trim();for(n=0;n<p;n++)s=6*n,a.uint16[s+0]=4*n,a.uint16[s+1]=4*n+1,a.uint16[s+2]=4*n+2,a.uint16[s+
3]=4*n+2,a.uint16[s+4]=4*n+3,a.uint16[s+5]=4*n;qi=a}p=l.createIndexBuffer(qi,!0);r=l.createVertexBuffer(r,t$jscomp$2.collisionCircleLayout.members,!0);for(a=0;a<h.length;a+=1)n=h[a],s=e.transform,s={u_matrix:n.transform,u_inv_matrix:n.invTransform,u_camera_to_center_distance:s.cameraToCenterDistance,u_viewport_size:[s.width,s.height]},i.draw(l,c.TRIANGLES,It.disabled,Pt.disabled,e.colorModeForRenderPass(),Ct.disabled,s,o.id,r,p,t$jscomp$2.SegmentVector.simpleSegment(0,2*n.circleOffset,n.circleArray.length,
n.circleArray.length/2),null,e.transform.zoom,null,null,null);r.destroy();p.destroy()}}function eo(e$jscomp$0,i,o,r,a,n,s,l,c,u,h,p){var d=e$jscomp$0.context,_=d.gl,f=e$jscomp$0.transform,m="map"===l,g="map"===c,v=m&&"point"!==o.layout.get("symbol-placement"),y=m&&!g&&!v,x=void 0!==o.layout.get("symbol-sort-key").constantOr(1);c=e$jscomp$0.depthModeForSublayer(0,It.ReadOnly);var w=o.layout.get("text-variable-anchor");l=[];for(var E=0;E<r.length;E+=1){var P=r[E],S=i.getTile(P),C=S.getBucket(o);if(C){var z=
a?C.text:C.icon;if(z&&z.segments.get().length){var D=z.programConfigurations.get(o.id),M=a||C.sdfIcons,L=a?C.textSizeData:C.iconSizeData,A=g||0!==f.pitch;D=e$jscomp$0.useProgram(C.iconsInText&&a?"symbolTextAndIcon":M?"symbolSDF":"symbolIcon",D);var k=t$jscomp$2.evaluateSizeForZoom(L,f.zoom),B=void 0,O=[0,0],F=void 0,U=void 0,N=null,Z=void 0;a?(F=S.glyphAtlasTexture,U=_.LINEAR,B=S.glyphAtlasTexture.size,C.iconsInText&&(O=S.imageAtlasTexture.size,N=S.imageAtlasTexture,Z=A||e$jscomp$0.options.rotating||
e$jscomp$0.options.zooming||"composite"===L.kind||"camera"===L.kind?_.LINEAR:_.NEAREST)):(B=1!==o.layout.get("icon-size").constantOr(0)||C.iconsNeedLinear,F=S.imageAtlasTexture,U=M||e$jscomp$0.options.rotating||e$jscomp$0.options.zooming||B||A?_.LINEAR:_.NEAREST,B=S.imageAtlasTexture.size);var q=pe(S,1,e$jscomp$0.transform.zoom);A=Jt(P.posMatrix,g,m,e$jscomp$0.transform,q);q=Qt(P.posMatrix,g,m,e$jscomp$0.transform,q);var W=w&&C.hasTextData();W="none"!==o.layout.get("icon-text-fit")&&W&&C.hasIconData();
v&&ie(C,P.posMatrix,e$jscomp$0,a,A,q,g,u);P=e$jscomp$0.translatePosMatrix(P.posMatrix,S,n,s);A=v||a&&w||W?Ji:A;S=e$jscomp$0.translatePosMatrix(q,S,n,s,!0);q=M&&0!==o.paint.get(a?"text-halo-width":"icon-halo-width").constantOr(1);C={program:D,buffers:z,uniformValues:M?C.iconsInText?Wi(L.kind,k,y,g,e$jscomp$0,P,A,S,B,O):Gi(L.kind,k,y,g,e$jscomp$0,P,A,S,a,B,!0):Vi(L.kind,k,y,g,e$jscomp$0,P,A,S,a,B),atlasTexture:F,atlasTextureIcon:N,atlasInterpolation:U,atlasInterpolationIcon:Z,isSDF:M,hasHalo:q};if(x)for(M=
0,z=z.segments.get();M<z.length;M+=1)L=z[M],l.push({segments:new t$jscomp$2.SegmentVector([L]),sortKey:L.sortKey,state:C});else l.push({segments:z.segments,sortKey:0,state:C})}}}x&&l.sort(function(t,e){return t.sortKey-e.sortKey});for(i=0;i<l.length;i+=1){r=l[i];a=r.state;if(d.activeTexture.set(_.TEXTURE0),a.atlasTexture.bind(a.atlasInterpolation,_.CLAMP_TO_EDGE),a.atlasTextureIcon&&(d.activeTexture.set(_.TEXTURE1),a.atlasTextureIcon&&a.atlasTextureIcon.bind(a.atlasInterpolationIcon,_.CLAMP_TO_EDGE)),
a.isSDF)n=a.uniformValues,a.hasHalo&&(n.u_is_halo=1,io(a.buffers,r.segments,o,e$jscomp$0,a.program,c,h,p,n)),n.u_is_halo=0;io(a.buffers,r.segments,o,e$jscomp$0,a.program,c,h,p,a.uniformValues)}}function io(t,e,i,o,r,a,n,s,l){var c=o.context;r.draw(c,c.gl.TRIANGLES,a,n,s,Ct.disabled,l,i.id,t.layoutVertexBuffer,t.indexBuffer,e,i.paint,o.transform.zoom,t.programConfigurations.get(i.id),t.dynamicLayoutVertexBuffer,t.opacityVertexBuffer)}function oo(t,e,i,o,r,a,n){var s,l,h,p=t.context.gl,d=i.paint.get("fill-pattern"),
_=d&&d.constantOr(1),f=i.getCrossfadeParameters();n?(l=_&&!i.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",s=p.LINES):(l=_?"fillPattern":"fill",s=p.TRIANGLES);for(var m=0;m<o.length;m+=1){var v=o[m];var c=e.getTile(v);if(!_||c.patternsLoaded()){var x=c.getBucket(i);if(x){var b=x.programConfigurations.get(i.id),w=t.useProgram(l,b);_&&(t.context.activeTexture.set(p.TEXTURE0),c.imageAtlasTexture.bind(p.LINEAR,p.CLAMP_TO_EDGE),b.updatePaintBuffers(f));if((h=d.constantOr(null))&&
c.imageAtlas){var E=c.imageAtlas;var u=E.patternPositions[h.to.toString()];h=E.patternPositions[h.from.toString()];u&&h&&b.setConstantPatternPositions(u,h)}E=t.translatePosMatrix(v.posMatrix,c,i.paint.get("fill-translate"),i.paint.get("fill-translate-anchor"));if(n){u=x.indexBuffer2;h=x.segments2;var C=[p.drawingBufferWidth,p.drawingBufferHeight];c="fillOutlinePattern"===l&&_?t$jscomp$2.extend(t$jscomp$2.extend({u_matrix:E},wi(f,t,c)),{u_world:C}):{u_matrix:E,u_world:C}}else u=x.indexBuffer,h=x.segments,
c=_?t$jscomp$2.extend({u_matrix:E},wi(f,t,c)):{u_matrix:E};w.draw(t.context,s,r,t.stencilModeForClipping(v),a,Ct.disabled,c,i.id,x.layoutVertexBuffer,u,h,i.paint,t.transform.zoom,b)}}}}function ro(t,e,i,o,r,a,n$jscomp$0){for(var s=t.context,l=s.gl,c=i.paint.get("fill-extrusion-pattern"),u=c.constantOr(1),h=i.getCrossfadeParameters(),p=i.paint.get("fill-extrusion-opacity"),d=0;d<o.length;d+=1){var f=o[d],m=e.getTile(f),g=m.getBucket(i);if(g){var v=g.programConfigurations.get(i.id),y=t.useProgram(u?
"fillExtrusionPattern":"fillExtrusion",v);u&&(t.context.activeTexture.set(l.TEXTURE0),m.imageAtlasTexture.bind(l.LINEAR,l.CLAMP_TO_EDGE),v.updatePaintBuffers(h));var x=c.constantOr(null);if(x&&m.imageAtlas){var b=m.imageAtlas,w=b.patternPositions[x.to.toString()];x=b.patternPositions[x.from.toString()];w&&x&&v.setConstantPatternPositions(w,x)}w=t.translatePosMatrix(f.posMatrix,m,i.paint.get("fill-extrusion-translate"),i.paint.get("fill-extrusion-translate-anchor"));x=i.paint.get("fill-extrusion-vertical-gradient");
if(u){b=t;var n=h;m=t$jscomp$2.extend(Ti(w,b,x,p),wi(n,b,m),{u_height_factor:-Math.pow(2,f.overscaledZ)/m.tileSize/8})}else m=Ti(w,t,x,p);y.draw(s,s.gl.TRIANGLES,r,a,n$jscomp$0,Ct.backCCW,m,i.id,g.layoutVertexBuffer,g.indexBuffer,g.segments,i.paint,t.transform.zoom,v)}}}function no(e$jscomp$0,i$jscomp$0,o$jscomp$0,r$jscomp$0,a$jscomp$0,n,s){var l=e$jscomp$0.context,c=l.gl,u=i$jscomp$0.dem;if(u&&u.data){var h=u.dim,p=u.stride,d=u.getPixels();(l.activeTexture.set(c.TEXTURE1),l.pixelStoreUnpackPremultiplyAlpha.set(!1),
i$jscomp$0.demTexture=i$jscomp$0.demTexture||e$jscomp$0.getTileTexture(p),i$jscomp$0.demTexture)?(p=i$jscomp$0.demTexture,p.update(d,{premultiply:!1}),p.bind(c.NEAREST,c.CLAMP_TO_EDGE)):(i$jscomp$0.demTexture=new t$jscomp$2.Texture(l,d,c.RGBA,{premultiply:!1}),i$jscomp$0.demTexture.bind(c.NEAREST,c.CLAMP_TO_EDGE));l.activeTexture.set(c.TEXTURE0);d=i$jscomp$0.fbo;d||(p=new t$jscomp$2.Texture(l,{width:h,height:h,data:null},c.RGBA),p.bind(c.LINEAR,c.CLAMP_TO_EDGE),(d=i$jscomp$0.fbo=l.createFramebuffer(h,
h,!0)).colorAttachment.set(p.texture));l.bindFramebuffer.set(d.framebuffer);l.viewport.set([0,0,h,h]);e$jscomp$0.useProgram("hillshadePrepare").draw(l,c.TRIANGLES,a$jscomp$0,n,s,Ct.disabled,function(e,i,o){var r=i.stride,a=t$jscomp$2.create();return t$jscomp$2.ortho(a,0,t$jscomp$2.EXTENT,-t$jscomp$2.EXTENT,0,0,1),t$jscomp$2.translate(a,a,[0,-t$jscomp$2.EXTENT,0]),{u_matrix:a,u_image:1,u_dimension:[r,r],u_zoom:e.overscaledZ,u_maxzoom:o,u_unpack:i.getUnpackVector()}}(i$jscomp$0.tileID,u,r$jscomp$0),
o$jscomp$0.id,e$jscomp$0.rasterBoundsBuffer,e$jscomp$0.quadTriangleIndexBuffer,e$jscomp$0.rasterBoundsSegments);i$jscomp$0.needsHillshadePrepare=!1}}function mo(e,i,o,r,a,n){e=e.context;var l=e.gl;l.enable(l.SCISSOR_TEST);l.scissor(i*t$jscomp$2.browser.devicePixelRatio,o*t$jscomp$2.browser.devicePixelRatio,r*t$jscomp$2.browser.devicePixelRatio,a*t$jscomp$2.browser.devicePixelRatio);e.clear({color:n});l.disable(l.SCISSOR_TEST)}function Lo(t,e){(!t.duration||t.duration<e.duration)&&(t.duration=e.duration,
t.easing=e.easing)}function Ao(e,i,o){var r=o.maxSpeed,a=o.linearity,n=o.deceleration;e=t$jscomp$2.clamp(e*a/(i/1E3),-r,r);a=Math.abs(e)/(n*a);return{easing:o.easing,duration:1E3*a,amount:a/2*e}}function No(t,e){for(var i={},o=0;o<t.length;o++)i[t[o].identifier]=e[o];return i}function Jo(t,e,i){for(var o=0;o<t.length;o++)if(t[o].identifier===i)return e[o]}function ir(t){return Math.abs(t.y)>Math.abs(t.x)}function nr(t){return t*(2-t)}function mr(t){return t.panDelta&&t.panDelta.mag()||t.zoomDelta||
t.bearingDelta||t.pitchDelta}function Cr(t){t.parentNode&&t.parentNode.removeChild(t)}function Lr(e,i,o){if(e=new t$jscomp$2.LngLat(e.lng,e.lat),i){var r=new t$jscomp$2.LngLat(e.lng-360,e.lat),a=new t$jscomp$2.LngLat(e.lng+360,e.lat),n=o.locationPoint(e).distSqr(i);o.locationPoint(r).distSqr(i)<n?e=r:o.locationPoint(a).distSqr(i)<n&&(e=a)}for(;180<Math.abs(e.lng-o.center.lng);){i=o.locationPoint(e);if(0<=i.x&&0<=i.y&&i.x<=o.width&&i.y<=o.height)break;e.lng>o.center.lng?e.lng-=360:e.lng+=360}return e}
function Rr(t,e,i){t=t.classList;for(var r in Ar)t.remove("mapboxgl-"+i+"-anchor-"+r);t.add("mapboxgl-"+i+"-anchor-"+e)}function qr(t,e,i){var o=i&&i.maxWidth||100,r=t._container.clientHeight/2,a=t.unproject([0,r]);r=t.unproject([o,r]);a=a.distanceTo(r);i&&"imperial"===i.unit?(i=3.2808*a,5280<i?Vr(e,o,i/5280,t._getUIString("ScaleControl.Miles")):Vr(e,o,i,t._getUIString("ScaleControl.Feet"))):i&&"nautical"===i.unit?Vr(e,o,a/1852,t._getUIString("ScaleControl.NauticalMiles")):1E3<=a?Vr(e,o,a/1E3,t._getUIString("ScaleControl.Kilometers")):
Vr(e,o,a,t._getUIString("ScaleControl.Meters"))}function Vr(t,e$jscomp$0,i,o){var a,JSCompiler_temp_const=a=Math.pow(10,(""+Math.floor(i)).length-1);if(10<=(a=i/a))a=10;else if(5<=a)a=5;else if(3<=a)a=3;else if(2<=a)a=2;else if(1<=a)a=1;else{var e=Math.pow(10,Math.ceil(-Math.log(a)/Math.LN10));a=Math.round(a*e)/e}JSCompiler_temp_const*=a;t.style.width=JSCompiler_temp_const/i*e$jscomp$0+"px";t.innerHTML=JSCompiler_temp_const+"\x26nbsp;"+o}var e$jscomp$3=t$jscomp$2.createCommonjsModule(function(t$jscomp$1){function e$jscomp$0(t){return!i$jscomp$1(t)}
function i$jscomp$1(t$jscomp$0){return"undefined"==typeof window||"undefined"==typeof document?"not a browser":Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray?Function.prototype&&Function.prototype.bind?Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&
Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions?"JSON"in window&&"parse"in JSON&&"stringify"in JSON?function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var i=new Blob([""],{type:"text/javascript"});i=URL.createObjectURL(i);try{var e=new Worker(i);var t=!0}catch(e$402){t=!1}return e&&e.terminate(),URL.revokeObjectURL(i),t}()?"Uint8ClampedArray"in window?
ArrayBuffer.isView?function(){var t=document.createElement("canvas");t.width=t.height=1;var e=t.getContext("2d");return e?(e=e.getImageData(0,0,1,1))&&e.width===t.width:!1}()?(void 0===o$jscomp$0[i$jscomp$0=t$jscomp$0&&t$jscomp$0.failIfMajorPerformanceCaveat]&&(o$jscomp$0[i$jscomp$0]=function(t){var i=document.createElement("canvas"),o=Object.create(e$jscomp$0.webGLContextAttributes);t=(o.failIfMajorPerformanceCaveat=t,i.probablySupportsContext?i.probablySupportsContext("webgl",o)||i.probablySupportsContext("experimental-webgl",
o):i.supportsContext?i.supportsContext("webgl",o)||i.supportsContext("experimental-webgl",o):i.getContext("webgl",o)||i.getContext("experimental-webgl",o));if(!t)return!1;i=t.createShader(t.VERTEX_SHADER);return!(!i||t.isContextLost())&&(t.shaderSource(i,"void main() {}"),t.compileShader(i),!0===t.getShaderParameter(i,t.COMPILE_STATUS))}(i$jscomp$0)),o$jscomp$0[i$jscomp$0]?void 0:"insufficient WebGL support"):"insufficient Canvas/getImageData support":"insufficient ArrayBuffer support":"insufficient Uint8ClampedArray support":
"insufficient worker support":"insufficient JSON support":"insufficient Object support":"insufficient Function support":"insufficent Array support";var i$jscomp$0}t$jscomp$1.exports?t$jscomp$1.exports=e$jscomp$0:window&&(window.mapboxgl=window.mapboxgl||{},window.mapboxgl.supported=e$jscomp$0,window.mapboxgl.notSupportedReason=i$jscomp$1);var o$jscomp$0={};e$jscomp$0.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0}}),i$jscomp$6={create:function(e,i,o){e=t$jscomp$2.window.document.createElement(e);
return void 0!==i&&(e.className=i),o&&o.appendChild(e),e},createNS:function(e,i){return t$jscomp$2.window.document.createElementNS(e,i)}},o$jscomp$3=t$jscomp$2.window.document&&t$jscomp$2.window.document.documentElement.style,a$jscomp$2,n$jscomp$2=r$jscomp$2(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]);i$jscomp$6.disableDrag=function(){o$jscomp$3&&n$jscomp$2&&(a$jscomp$2=o$jscomp$3[n$jscomp$2],o$jscomp$3[n$jscomp$2]="none")};i$jscomp$6.enableDrag=function(){o$jscomp$3&&n$jscomp$2&&
(o$jscomp$3[n$jscomp$2]=a$jscomp$2)};var s$jscomp$2=r$jscomp$2(["transform","WebkitTransform"]);i$jscomp$6.setTransform=function(t,e){t.style[s$jscomp$2]=e};var l$jscomp$2=!1;try{var c$jscomp$1=Object.defineProperty({},"passive",{get:function(){l$jscomp$2=!0}});t$jscomp$2.window.addEventListener("test",c$jscomp$1,c$jscomp$1);t$jscomp$2.window.removeEventListener("test",c$jscomp$1,c$jscomp$1)}catch(t$403){l$jscomp$2=!1}i$jscomp$6.addEventListener=function(t,e,i,o){void 0===o&&(o={});t.addEventListener(e,
i,"passive"in o&&l$jscomp$2?o:o.capture)};i$jscomp$6.removeEventListener=function(t,e,i,o){void 0===o&&(o={});t.removeEventListener(e,i,"passive"in o&&l$jscomp$2?o:o.capture)};var u$jscomp$2=function(e){e.preventDefault();e.stopPropagation();t$jscomp$2.window.removeEventListener("click",u$jscomp$2,!0)};i$jscomp$6.suppressClick=function(){t$jscomp$2.window.addEventListener("click",u$jscomp$2,!0);t$jscomp$2.window.setTimeout(function(){t$jscomp$2.window.removeEventListener("click",u$jscomp$2,!0)},0)};
i$jscomp$6.mousePos=function(e,i){var o=e.getBoundingClientRect();return new t$jscomp$2.Point(i.clientX-o.left-e.clientLeft,i.clientY-o.top-e.clientTop)};i$jscomp$6.touchPos=function(e,i){for(var o=e.getBoundingClientRect(),r=[],a=0;a<i.length;a++)r.push(new t$jscomp$2.Point(i[a].clientX-o.left-e.clientLeft,i[a].clientY-o.top-e.clientTop));return r};i$jscomp$6.mouseButton=function(e){return void 0!==t$jscomp$2.window.InstallTrigger&&2===e.button&&e.ctrlKey&&0<=t$jscomp$2.window.navigator.platform.toUpperCase().indexOf("MAC")?
0:e.button};i$jscomp$6.remove=function(t){t.parentNode&&t.parentNode.removeChild(t)};var p$jscomp$1=function(e$jscomp$1){function i$jscomp$0(){e$jscomp$1.call(this);this.images={};this.updatedImages={};this.callbackDispatchedThisFrame={};this.loaded=!1;this.requestors=[];this.patterns={};this.atlasImage=new t$jscomp$2.RGBAImage({width:1,height:1});this.dirty=!0}return e$jscomp$1&&(i$jscomp$0.__proto__=e$jscomp$1),(i$jscomp$0.prototype=Object.create(e$jscomp$1&&e$jscomp$1.prototype)).constructor=i$jscomp$0,
i$jscomp$0.prototype.isLoaded=function(){return this.loaded},i$jscomp$0.prototype.setLoaded=function(t){if(this.loaded!==t&&(this.loaded=t,t)){t=0;for(var i=this.requestors;t<i.length;t+=1){var o=i[t];this._notify(o.ids,o.callback)}this.requestors=[]}},i$jscomp$0.prototype.getImage=function(t){return this.images[t]},i$jscomp$0.prototype.addImage=function(t,e){this._validate(t,e)&&(this.images[t]=e)},i$jscomp$0.prototype._validate=function(e,i){var o=!0;return this._validateStretch(i.stretchX,i.data&&
i.data.width)||(this.fire(new t$jscomp$2.ErrorEvent(Error('Image "'+e+'" has invalid "stretchX" value'))),o=!1),this._validateStretch(i.stretchY,i.data&&i.data.height)||(this.fire(new t$jscomp$2.ErrorEvent(Error('Image "'+e+'" has invalid "stretchY" value'))),o=!1),this._validateContent(i.content,i)||(this.fire(new t$jscomp$2.ErrorEvent(Error('Image "'+e+'" has invalid "content" value'))),o=!1),o},i$jscomp$0.prototype._validateStretch=function(t,e){if(!t)return!0;for(var i=0,o=0;o<t.length;o+=1){var a=
t[o];if(a[0]<i||a[1]<a[0]||e<a[1])return!1;i=a[1]}return!0},i$jscomp$0.prototype._validateContent=function(t,e){return!(t&&(4!==t.length||0>t[0]||e.data.width<t[0]||0>t[1]||e.data.height<t[1]||0>t[2]||e.data.width<t[2]||0>t[3]||e.data.height<t[3]||t[2]<t[0]||t[3]<t[1]))},i$jscomp$0.prototype.updateImage=function(t,e){e.version=this.images[t].version+1;this.images[t]=e;this.updatedImages[t]=!0},i$jscomp$0.prototype.removeImage=function(t){var e=this.images[t];delete this.images[t];delete this.patterns[t];
e.userImage&&e.userImage.onRemove&&e.userImage.onRemove()},i$jscomp$0.prototype.listImages=function(){return Object.keys(this.images)},i$jscomp$0.prototype.getImages=function(t,e){var i=!0;if(!this.isLoaded())for(var o=0;o<t.length;o+=1)this.images[t[o]]||(i=!1);this.isLoaded()||i?this._notify(t,e):this.requestors.push({ids:t,callback:e})},i$jscomp$0.prototype._notify=function(e,i){for(var o={},r=0;r<e.length;r+=1){var n=e[r];this.images[n]||this.fire(new t$jscomp$2.Event("styleimagemissing",{id:n}));
var s=this.images[n];s?o[n]={data:s.data.clone(),pixelRatio:s.pixelRatio,sdf:s.sdf,version:s.version,stretchX:s.stretchX,stretchY:s.stretchY,content:s.content,hasRenderCallback:!(!s.userImage||!s.userImage.render)}:t$jscomp$2.warnOnce('Image "'+n+'" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.')}i(null,o)},i$jscomp$0.prototype.getPixelSize=
function(){var t=this.atlasImage;return{width:t.width,height:t.height}},i$jscomp$0.prototype.getPattern=function(e){var i=this.patterns[e],o=this.getImage(e);if(!o)return null;if(i&&i.position.version===o.version)return i.position;i?i.position.version=o.version:(i={w:o.data.width+2,h:o.data.height+2,x:0,y:0},o=new t$jscomp$2.ImagePosition(i,o),this.patterns[e]={bin:i,position:o});return this._updatePatternAtlas(),this.patterns[e].position},i$jscomp$0.prototype.bind=function(e){var i=e.gl;this.atlasTexture?
this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new t$jscomp$2.Texture(e,this.atlasImage,i.RGBA);this.atlasTexture.bind(i.LINEAR,i.CLAMP_TO_EDGE)},i$jscomp$0.prototype._updatePatternAtlas=function(){var e=[];for(i in this.patterns)e.push(this.patterns[i].bin);e=t$jscomp$2.potpack(e);var i=e.w;var a=e.h;e=this.atlasImage;for(var s in e.resize({width:i||1,height:a||1}),this.patterns){a=this.patterns[s].bin;i=a.x+1;a=a.y+1;var h=this.images[s].data,p=h.width,d=
h.height;t$jscomp$2.RGBAImage.copy(h,e,{x:0,y:0},{x:i,y:a},{width:p,height:d});t$jscomp$2.RGBAImage.copy(h,e,{x:0,y:d-1},{x:i,y:a-1},{width:p,height:1});t$jscomp$2.RGBAImage.copy(h,e,{x:0,y:0},{x:i,y:a+d},{width:p,height:1});t$jscomp$2.RGBAImage.copy(h,e,{x:p-1,y:0},{x:i-1,y:a},{width:1,height:d});t$jscomp$2.RGBAImage.copy(h,e,{x:0,y:0},{x:i+p,y:a},{width:1,height:d})}this.dirty=!0},i$jscomp$0.prototype.beginFrame=function(){this.callbackDispatchedThisFrame={}},i$jscomp$0.prototype.dispatchRenderCallbacks=
function(t$jscomp$0){for(var e=0;e<t$jscomp$0.length;e+=1){var o=t$jscomp$0[e];if(!this.callbackDispatchedThisFrame[o]){this.callbackDispatchedThisFrame[o]=!0;var r=this.images[o],t=r,e$jscomp$0=t.userImage;e$jscomp$0&&e$jscomp$0.render&&e$jscomp$0.render()&&(t.data.replace(new Uint8Array(e$jscomp$0.data.buffer)),!0)&&this.updateImage(o,r)}}},i$jscomp$0}(t$jscomp$2.Evented);m$jscomp$1.prototype.draw=function(t){this.ctx.clearRect(0,0,this.size,this.size);this.ctx.fillText(t,this.buffer,this.middle);
t=this.ctx.getImageData(0,0,this.size,this.size);for(var i=new Uint8ClampedArray(this.size*this.size),o=0;o<this.size*this.size;o++){var r=t.data[4*o+3]/255;this.gridOuter[o]=1===r?0:0===r?1E20:Math.pow(Math.max(0,.5-r),2);this.gridInner[o]=1===r?1E20:0===r?0:Math.pow(Math.max(0,r-.5),2)}g$jscomp$1(this.gridOuter,this.size,this.size,this.f,this.d,this.v,this.z);g$jscomp$1(this.gridInner,this.size,this.size,this.f,this.d,this.v,this.z);for(o=0;o<this.size*this.size;o++)i[o]=Math.max(0,Math.min(255,
Math.round(255-255*((this.gridOuter[o]-this.gridInner[o])/this.radius+this.cutoff))));return i};m$jscomp$1.default=m$jscomp$1;var y$jscomp$1=function(t,e){this.requestManager=t;this.localIdeographFontFamily=e;this.entries={}};y$jscomp$1.prototype.setURL=function(t){this.url=t};y$jscomp$1.prototype.getGlyphs=function(e$jscomp$1,i$jscomp$1){var o$jscomp$0=this,r$jscomp$0=[],a$jscomp$0;for(a$jscomp$0 in e$jscomp$1)for(var n$jscomp$0=0,s$jscomp$0=e$jscomp$1[a$jscomp$0];n$jscomp$0<s$jscomp$0.length;n$jscomp$0+=
1)r$jscomp$0.push({stack:a$jscomp$0,id:s$jscomp$0[n$jscomp$0]});t$jscomp$2.asyncAll(r$jscomp$0,function(t$jscomp$0,e$jscomp$0){var i$jscomp$0=t$jscomp$0.stack,r=t$jscomp$0.id,a=o$jscomp$0.entries[i$jscomp$0];a||(a=o$jscomp$0.entries[i$jscomp$0]={glyphs:{},requests:{},ranges:{}});t$jscomp$0=a.glyphs[r];if(void 0===t$jscomp$0){if(t$jscomp$0=o$jscomp$0._tinySDF(a,i$jscomp$0,r))return a.glyphs[r]=t$jscomp$0,void e$jscomp$0(null,{stack:i$jscomp$0,id:r,glyph:t$jscomp$0});var s=Math.floor(r/256);if(65535<
256*s)e$jscomp$0(Error("glyphs \x3e 65535 not supported"));else if(a.ranges[s])e$jscomp$0(null,{stack:i$jscomp$0,id:r,glyph:t$jscomp$0});else{var l=a.requests[s];l||(l=a.requests[s]=[],y$jscomp$1.loadGlyphRange(i$jscomp$0,s,o$jscomp$0.url,o$jscomp$0.requestManager,function(t,e){if(e){for(var i in e)o$jscomp$0._doesCharSupportLocalGlyph(+i)||(a.glyphs[+i]=e[+i]);a.ranges[s]=!0}i=0;for(var n=l;i<n.length;i+=1)(0,n[i])(t,e);delete a.requests[s]}));l.push(function(t,o){t?e$jscomp$0(t):o&&e$jscomp$0(null,
{stack:i$jscomp$0,id:r,glyph:o[r]||null})})}}else e$jscomp$0(null,{stack:i$jscomp$0,id:r,glyph:t$jscomp$0})},function(t,e){if(t)i$jscomp$1(t);else if(e){t={};for(var r=0;r<e.length;r+=1){var n=e[r],s=n.stack,l=n.id;n=n.glyph;(t[s]||(t[s]={}))[l]=n&&{id:n.id,bitmap:n.bitmap.clone(),metrics:n.metrics}}i$jscomp$1(null,t)}})};y$jscomp$1.prototype._doesCharSupportLocalGlyph=function(e){return!!this.localIdeographFontFamily&&(t$jscomp$2.isChar["CJK Unified Ideographs"](e)||t$jscomp$2.isChar["Hangul Syllables"](e)||
t$jscomp$2.isChar.Hiragana(e)||t$jscomp$2.isChar.Katakana(e))};y$jscomp$1.prototype._tinySDF=function(e,i,o){var r=this.localIdeographFontFamily;if(r&&this._doesCharSupportLocalGlyph(o)){var a=e.tinySDF;a||(a="400",/bold/i.test(i)?a="900":/medium/i.test(i)?a="500":/light/i.test(i)&&(a="200"),a=e.tinySDF=new y$jscomp$1.TinySDF(24,3,8,.25,r,a));return{id:o,bitmap:new t$jscomp$2.AlphaImage({width:30,height:30},a.draw(String.fromCharCode(o))),metrics:{width:24,height:24,left:0,top:-8,advance:24}}}};y$jscomp$1.loadGlyphRange=
function(e$jscomp$0,i$jscomp$0,o,r$jscomp$0,a){i$jscomp$0*=256;var s$jscomp$0=i$jscomp$0+255;e$jscomp$0=r$jscomp$0.transformRequest(r$jscomp$0.normalizeGlyphsURL(o).replace("{fontstack}",e$jscomp$0).replace("{range}",i$jscomp$0+"-"+s$jscomp$0),t$jscomp$2.ResourceType.Glyphs);t$jscomp$2.getArrayBuffer(e$jscomp$0,function(e,i){if(e)a(e);else if(i){e={};var r=0;for(i=t$jscomp$2.parseGlyphPBF(i);r<i.length;r+=1){var s=i[r];e[s.id]=s}a(null,e)}})};y$jscomp$1.TinySDF=m$jscomp$1;var x$jscomp$0=function(){this.specification=
t$jscomp$2.styleSpec.light.position};x$jscomp$0.prototype.possiblyEvaluate=function(e,i){return t$jscomp$2.sphericalToCartesian(e.expression.evaluate(i))};x$jscomp$0.prototype.interpolate=function(e,i,o){return{x:t$jscomp$2.number(e.x,i.x,o),y:t$jscomp$2.number(e.y,i.y,o),z:t$jscomp$2.number(e.z,i.z,o)}};var b$jscomp$0=new t$jscomp$2.Properties({anchor:new t$jscomp$2.DataConstantProperty(t$jscomp$2.styleSpec.light.anchor),position:new x$jscomp$0,color:new t$jscomp$2.DataConstantProperty(t$jscomp$2.styleSpec.light.color),
intensity:new t$jscomp$2.DataConstantProperty(t$jscomp$2.styleSpec.light.intensity)}),w$jscomp$0=function(e$jscomp$0){function i$jscomp$0(i){e$jscomp$0.call(this);this._transitionable=new t$jscomp$2.Transitionable(b$jscomp$0);this.setLight(i);this._transitioning=this._transitionable.untransitioned()}return e$jscomp$0&&(i$jscomp$0.__proto__=e$jscomp$0),(i$jscomp$0.prototype=Object.create(e$jscomp$0&&e$jscomp$0.prototype)).constructor=i$jscomp$0,i$jscomp$0.prototype.getLight=function(){return this._transitionable.serialize()},
i$jscomp$0.prototype.setLight=function(e,i){if(void 0===i&&(i={}),!this._validate(t$jscomp$2.validateLight,e,i))for(var o in e)i=e[o],t$jscomp$2.endsWith(o,"-transition")?this._transitionable.setTransition(o.slice(0,-11),i):this._transitionable.setValue(o,i)},i$jscomp$0.prototype.updateTransitions=function(t){this._transitioning=this._transitionable.transitioned(t,this._transitioning)},i$jscomp$0.prototype.hasTransition=function(){return this._transitioning.hasTransition()},i$jscomp$0.prototype.recalculate=
function(t){this.properties=this._transitioning.possiblyEvaluate(t)},i$jscomp$0.prototype._validate=function(e,i,o){return(!o||!1!==o.validate)&&t$jscomp$2.emitValidationErrors(this,e.call(t$jscomp$2.validateStyle,t$jscomp$2.extend({value:i,style:{glyphs:!0,sprite:!0},styleSpec:t$jscomp$2.styleSpec})))},i$jscomp$0}(t$jscomp$2.Evented),T$jscomp$0=function(t,e){this.width=t;this.height=e;this.nextRow=0;this.data=new Uint8Array(this.width*this.height);this.dashEntry={}};T$jscomp$0.prototype.getDash=
function(t,e){var i=t.join(",")+String(e);return this.dashEntry[i]||(this.dashEntry[i]=this.addDash(t,e)),this.dashEntry[i]};T$jscomp$0.prototype.getDashRanges=function(t,e,i){e=[];var n=!0;e.push({left:1==t.length%2?-t[t.length-1]*i:0,right:t[0]*i,isDash:n,zeroLength:0===t[0]});for(var s=t[0],l=1;l<t.length;l++){var c=t[l];e.push({left:s*i,right:(s+=c)*i,isDash:n=!n,zeroLength:0===c})}return e};T$jscomp$0.prototype.addRoundDash=function(t,e,i){e/=2;for(var r=-i;r<=i;r++)for(var a=this.width*(this.nextRow+
i+r),n=0,s=t[n],l=0;l<this.width;l++){1<l/s.right&&(s=t[++n]);var h=Math.min(Math.abs(l-s.left),Math.abs(l-s.right)),d=r/i*(e+1);s.isDash?(d=e-Math.abs(d),h=Math.sqrt(h*h+d*d)):h=e-Math.sqrt(h*h+d*d);this.data[a+l]=Math.max(0,Math.min(255,h+128))}};T$jscomp$0.prototype.addRegularDash=function(t){for(var e=t.length-1;0<=e;--e){var i=t[e],o=t[e+1];i.zeroLength?t.splice(e,1):o&&o.isDash===i.isDash&&(o.left=i.left,t.splice(e,1))}e=t[0];i=t[t.length-1];e.isDash===i.isDash&&(e.left=i.left-this.width,i.right=
e.right+this.width);e=this.width*this.nextRow;i=0;o=t[i];for(var c=0;c<this.width;c++){1<c/o.right&&(o=t[++i]);var p=Math.min(Math.abs(c-o.left),Math.abs(c-o.right));this.data[e+c]=Math.max(0,Math.min(255,(o.isDash?p:-p)+128))}};T$jscomp$0.prototype.addDash=function(e,i){var o=i?7:0,r=2*o+1;if(this.nextRow+r>this.height)return t$jscomp$2.warnOnce("LineAtlas out of space"),null;for(var a=0,n=0;n<e.length;n++)a+=e[n];0!==a&&(n=this.width/a,e=this.getDashRanges(e,this.width,n),i?this.addRoundDash(e,
n,o):this.addRegularDash(e));i={y:(this.nextRow+o+.5)/this.height,height:2*o/this.height,width:a};return this.nextRow+=r,this.dirty=!0,i};T$jscomp$0.prototype.bind=function(t){t=t.gl;this.texture?(t.bindTexture(t.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,t.texSubImage2D(t.TEXTURE_2D,0,0,0,this.width,this.height,t.ALPHA,t.UNSIGNED_BYTE,this.data))):(this.texture=t.createTexture(),t.bindTexture(t.TEXTURE_2D,this.texture),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.REPEAT),t.texParameteri(t.TEXTURE_2D,
t.TEXTURE_WRAP_T,t.REPEAT),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texImage2D(t.TEXTURE_2D,0,t.ALPHA,this.width,this.height,0,t.ALPHA,t.UNSIGNED_BYTE,this.data))};var E$jscomp$0=function e(i,o){this.workerPool=i;this.actors=[];this.currentActor=0;this.id=t$jscomp$2.uniqueId();i=this.workerPool.acquire(this.id);for(var a=0;a<i.length;a++){var n=new e.Actor(i[a],o,this.id);n.name="Worker "+a;this.actors.push(n)}};E$jscomp$0.prototype.broadcast=
function(e,i,o$jscomp$0){t$jscomp$2.asyncAll(this.actors,function(t,o){t.send(e,i,o)},o$jscomp$0=o$jscomp$0||function(){})};E$jscomp$0.prototype.getActor=function(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]};E$jscomp$0.prototype.remove=function(){this.actors.forEach(function(t){t.remove()});this.actors=[];this.workerPool.release(this.id)};E$jscomp$0.Actor=t$jscomp$2.Actor;var P$jscomp$0=function(e,i,o){this.bounds=t$jscomp$2.LngLatBounds.convert(this.validateBounds(e));
this.minzoom=i||0;this.maxzoom=o||24};P$jscomp$0.prototype.validateBounds=function(t){return Array.isArray(t)&&4===t.length?[Math.max(-180,t[0]),Math.max(-90,t[1]),Math.min(180,t[2]),Math.min(90,t[3])]:[-180,-90,180,90]};P$jscomp$0.prototype.contains=function(e){var i=Math.pow(2,e.z),o=Math.floor(t$jscomp$2.mercatorXfromLng(this.bounds.getWest())*i),r=Math.floor(t$jscomp$2.mercatorYfromLat(this.bounds.getNorth())*i),a=Math.ceil(t$jscomp$2.mercatorXfromLng(this.bounds.getEast())*i);i=Math.ceil(t$jscomp$2.mercatorYfromLat(this.bounds.getSouth())*
i);return e.x>=o&&e.x<a&&e.y>=r&&e.y<i};var S$jscomp$0=function(e$jscomp$0){function i$jscomp$0(i,o,r,a){if(e$jscomp$0.call(this),this.id=i,this.dispatcher=r,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,t$jscomp$2.extend(this,t$jscomp$2.pick(o,["url","scheme","tileSize","promoteId"])),this._options=t$jscomp$2.extend({type:"vector"},o),this._collectResourceTiming=o.collectResourceTiming,512!==this.tileSize)throw Error("vector tile sources must have a tileSize of 512");
this.setEventedParent(a)}return e$jscomp$0&&(i$jscomp$0.__proto__=e$jscomp$0),(i$jscomp$0.prototype=Object.create(e$jscomp$0&&e$jscomp$0.prototype)).constructor=i$jscomp$0,i$jscomp$0.prototype.load=function(){var e=this;this._loaded=!1;this.fire(new t$jscomp$2.Event("dataloading",{dataType:"source"}));this._tileJSONRequest=I$jscomp$0(this._options,this.map._requestManager,function(i,o){e._tileJSONRequest=null;e._loaded=!0;i?e.fire(new t$jscomp$2.ErrorEvent(i)):o&&(t$jscomp$2.extend(e,o),o.bounds&&
(e.tileBounds=new P$jscomp$0(o.bounds,e.minzoom,e.maxzoom)),t$jscomp$2.postTurnstileEvent(o.tiles,e.map._requestManager._customAccessToken),t$jscomp$2.postMapLoadEvent(o.tiles,e.map._getMapId(),e.map._requestManager._skuToken,e.map._requestManager._customAccessToken),e.fire(new t$jscomp$2.Event("data",{dataType:"source",sourceDataType:"metadata"})),e.fire(new t$jscomp$2.Event("data",{dataType:"source",sourceDataType:"content"})))})},i$jscomp$0.prototype.loaded=function(){return this._loaded},i$jscomp$0.prototype.hasTile=
function(t){return!this.tileBounds||this.tileBounds.contains(t.canonical)},i$jscomp$0.prototype.onAdd=function(t){this.map=t;this.load()},i$jscomp$0.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},i$jscomp$0.prototype.serialize=function(){return t$jscomp$2.extend({},this._options)},i$jscomp$0.prototype.loadTile=function(e,i){function a(o,r){return delete e.request,e.aborted?i(null):o&&404!==o.status?i(o):(r&&r.resourceTiming&&(e.resourceTiming=
r.resourceTiming),this.map._refreshExpiredTiles&&r&&e.setExpiryData(r),e.loadVectorData(r,this.map.painter),t$jscomp$2.cacheEntryPossiblyAdded(this.dispatcher),i(null),void(e.reloadCallback&&(this.loadTile(e,e.reloadCallback),e.reloadCallback=null)))}var o$jscomp$0=this.map._requestManager.normalizeTileURL(e.tileID.canonical.url(this.tiles,this.scheme));o$jscomp$0={request:this.map._requestManager.transformRequest(o$jscomp$0,t$jscomp$2.ResourceType.Tile),uid:e.uid,tileID:e.tileID,zoom:e.tileID.overscaledZ,
tileSize:this.tileSize*e.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:t$jscomp$2.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};o$jscomp$0.request.collectResourceTiming=this._collectResourceTiming;e.actor&&"expired"!==e.state?"loading"===e.state?e.reloadCallback=i:e.request=e.actor.send("reloadTile",o$jscomp$0,a.bind(this)):(e.actor=this.dispatcher.getActor(),e.request=e.actor.send("loadTile",o$jscomp$0,a.bind(this)))},i$jscomp$0.prototype.abortTile=
function(t){t.request&&(t.request.cancel(),delete t.request);t.actor&&t.actor.send("abortTile",{uid:t.uid,type:this.type,source:this.id},void 0)},i$jscomp$0.prototype.unloadTile=function(t){t.unloadVectorData();t.actor&&t.actor.send("removeTile",{uid:t.uid,type:this.type,source:this.id},void 0)},i$jscomp$0.prototype.hasTransition=function(){return!1},i$jscomp$0}(t$jscomp$2.Evented),C$jscomp$0=function(e$jscomp$0){function i$jscomp$0(i,o,r,a){e$jscomp$0.call(this);this.id=i;this.dispatcher=r;this.setEventedParent(a);
this.type="raster";this.minzoom=0;this.maxzoom=22;this.roundZoom=!0;this.scheme="xyz";this.tileSize=512;this._loaded=!1;this._options=t$jscomp$2.extend({type:"raster"},o);t$jscomp$2.extend(this,t$jscomp$2.pick(o,["url","scheme","tileSize"]))}return e$jscomp$0&&(i$jscomp$0.__proto__=e$jscomp$0),(i$jscomp$0.prototype=Object.create(e$jscomp$0&&e$jscomp$0.prototype)).constructor=i$jscomp$0,i$jscomp$0.prototype.load=function(){var e=this;this._loaded=!1;this.fire(new t$jscomp$2.Event("dataloading",{dataType:"source"}));
this._tileJSONRequest=I$jscomp$0(this._options,this.map._requestManager,function(i,o){e._tileJSONRequest=null;e._loaded=!0;i?e.fire(new t$jscomp$2.ErrorEvent(i)):o&&(t$jscomp$2.extend(e,o),o.bounds&&(e.tileBounds=new P$jscomp$0(o.bounds,e.minzoom,e.maxzoom)),t$jscomp$2.postTurnstileEvent(o.tiles),t$jscomp$2.postMapLoadEvent(o.tiles,e.map._getMapId(),e.map._requestManager._skuToken),e.fire(new t$jscomp$2.Event("data",{dataType:"source",sourceDataType:"metadata"})),e.fire(new t$jscomp$2.Event("data",
{dataType:"source",sourceDataType:"content"})))})},i$jscomp$0.prototype.loaded=function(){return this._loaded},i$jscomp$0.prototype.onAdd=function(t){this.map=t;this.load()},i$jscomp$0.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},i$jscomp$0.prototype.serialize=function(){return t$jscomp$2.extend({},this._options)},i$jscomp$0.prototype.hasTile=function(t){return!this.tileBounds||this.tileBounds.contains(t.canonical)},i$jscomp$0.prototype.loadTile=
function(e,i){var o=this,r$jscomp$0=this.map._requestManager.normalizeTileURL(e.tileID.canonical.url(this.tiles,this.scheme),this.tileSize);e.request=t$jscomp$2.getImage(this.map._requestManager.transformRequest(r$jscomp$0,t$jscomp$2.ResourceType.Tile),function(r,a){if(delete e.request,e.aborted)e.state="unloaded",i(null);else if(r)e.state="errored",i(r);else if(a){o.map._refreshExpiredTiles&&e.setExpiryData(a);delete a.cacheControl;delete a.expires;r=o.map.painter.context;var s=r.gl;e.texture=o.map.painter.getTileTexture(a.width);
e.texture?e.texture.update(a,{useMipmap:!0}):(e.texture=new t$jscomp$2.Texture(r,a,s.RGBA,{useMipmap:!0}),e.texture.bind(s.LINEAR,s.CLAMP_TO_EDGE,s.LINEAR_MIPMAP_NEAREST),r.extTextureFilterAnisotropic&&s.texParameterf(s.TEXTURE_2D,r.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,r.extTextureFilterAnisotropicMax));e.state="loaded";t$jscomp$2.cacheEntryPossiblyAdded(o.dispatcher);i(null)}})},i$jscomp$0.prototype.abortTile=function(t,e){t.request&&(t.request.cancel(),delete t.request);e()},i$jscomp$0.prototype.unloadTile=
function(t,e){t.texture&&this.map.painter.saveTileTexture(t.texture);e()},i$jscomp$0.prototype.hasTransition=function(){return!1},i$jscomp$0}(t$jscomp$2.Evented),z$jscomp$1=function(e$jscomp$0){function i$jscomp$0(i,o,r,a){e$jscomp$0.call(this,i,o,r,a);this.type="raster-dem";this.maxzoom=22;this._options=t$jscomp$2.extend({type:"raster-dem"},o);this.encoding=o.encoding||"mapbox"}return e$jscomp$0&&(i$jscomp$0.__proto__=e$jscomp$0),(i$jscomp$0.prototype=Object.create(e$jscomp$0&&e$jscomp$0.prototype)).constructor=
i$jscomp$0,i$jscomp$0.prototype.serialize=function(){return{type:"raster-dem",url:this.url,tileSize:this.tileSize,tiles:this.tiles,bounds:this.bounds,encoding:this.encoding}},i$jscomp$0.prototype.loadTile=function(e,i){function r(t,o){t&&(e.state="errored",i(t));o&&(e.dem=o,e.needsHillshadePrepare=!0,e.state="loaded",i(null))}var o$jscomp$0=this.map._requestManager.normalizeTileURL(e.tileID.canonical.url(this.tiles,this.scheme),this.tileSize);e.request=t$jscomp$2.getImage(this.map._requestManager.transformRequest(o$jscomp$0,
t$jscomp$2.ResourceType.Tile),function(o,a){(delete e.request,e.aborted)?(e.state="unloaded",i(null)):o?(e.state="errored",i(o)):a&&(this.map._refreshExpiredTiles&&e.setExpiryData(a),delete a.cacheControl,delete a.expires,o=t$jscomp$2.window.ImageBitmap&&a instanceof t$jscomp$2.window.ImageBitmap&&t$jscomp$2.offscreenCanvasSupported()?a:t$jscomp$2.browser.getImageData(a,1),o={uid:e.uid,coord:e.tileID,source:this.id,rawImageData:o,encoding:this.encoding},e.actor&&"expired"!==e.state||(e.actor=this.dispatcher.getActor(),
e.actor.send("loadDEMTile",o,r.bind(this))))}.bind(this));e.neighboringTiles=this._getNeighboringTiles(e.tileID)},i$jscomp$0.prototype._getNeighboringTiles=function(e){var i=e.canonical,o=Math.pow(2,i.z),r=(i.x-1+o)%o,a=0===i.x?e.wrap-1:e.wrap,n=(i.x+1+o)%o,s=i.x+1===o?e.wrap+1:e.wrap,l={};return l[(new t$jscomp$2.OverscaledTileID(e.overscaledZ,a,i.z,r,i.y)).key]={backfilled:!1},l[(new t$jscomp$2.OverscaledTileID(e.overscaledZ,s,i.z,n,i.y)).key]={backfilled:!1},0<i.y&&(l[(new t$jscomp$2.OverscaledTileID(e.overscaledZ,
a,i.z,r,i.y-1)).key]={backfilled:!1},l[(new t$jscomp$2.OverscaledTileID(e.overscaledZ,e.wrap,i.z,i.x,i.y-1)).key]={backfilled:!1},l[(new t$jscomp$2.OverscaledTileID(e.overscaledZ,s,i.z,n,i.y-1)).key]={backfilled:!1}),i.y+1<o&&(l[(new t$jscomp$2.OverscaledTileID(e.overscaledZ,a,i.z,r,i.y+1)).key]={backfilled:!1},l[(new t$jscomp$2.OverscaledTileID(e.overscaledZ,e.wrap,i.z,i.x,i.y+1)).key]={backfilled:!1},l[(new t$jscomp$2.OverscaledTileID(e.overscaledZ,s,i.z,n,i.y+1)).key]={backfilled:!1}),l},i$jscomp$0.prototype.unloadTile=
function(t){t.demTexture&&this.map.painter.saveTileTexture(t.demTexture);t.fbo&&(t.fbo.destroy(),delete t.fbo);t.dem&&delete t.dem;delete t.neighboringTiles;t.state="unloaded";t.actor&&t.actor.send("removeDEMTile",{uid:t.uid,source:this.id})},i$jscomp$0}(C$jscomp$0),D$jscomp$0=function(e$jscomp$1){function i$jscomp$0(i,o,r,a){e$jscomp$1.call(this);this.id=i;this.type="geojson";this.minzoom=0;this.maxzoom=18;this.tileSize=512;this.reparseOverscaled=this.isTileClipped=!0;this._loaded=this._removed=
!1;this.actor=r.getActor();this.setEventedParent(a);this._data=o.data;this._options=t$jscomp$2.extend({},o);this._collectResourceTiming=o.collectResourceTiming;this._resourceTiming=[];void 0!==o.maxzoom&&(this.maxzoom=o.maxzoom);o.type&&(this.type=o.type);o.attribution&&(this.attribution=o.attribution);this.promoteId=o.promoteId;i=t$jscomp$2.EXTENT/this.tileSize;this.workerOptions=t$jscomp$2.extend({source:this.id,cluster:o.cluster||!1,geojsonVtOptions:{buffer:(void 0!==o.buffer?o.buffer:128)*i,tolerance:(void 0!==
o.tolerance?o.tolerance:.375)*i,extent:t$jscomp$2.EXTENT,maxZoom:this.maxzoom,lineMetrics:o.lineMetrics||!1,generateId:o.generateId||!1},superclusterOptions:{maxZoom:void 0!==o.clusterMaxZoom?Math.min(o.clusterMaxZoom,this.maxzoom-1):this.maxzoom-1,minPoints:Math.max(2,o.clusterMinPoints||2),extent:t$jscomp$2.EXTENT,radius:(o.clusterRadius||50)*i,log:!1,generateId:o.generateId||!1},clusterProperties:o.clusterProperties},o.workerOptions)}return e$jscomp$1&&(i$jscomp$0.__proto__=e$jscomp$1),(i$jscomp$0.prototype=
Object.create(e$jscomp$1&&e$jscomp$1.prototype)).constructor=i$jscomp$0,i$jscomp$0.prototype.load=function(){var e=this;this.fire(new t$jscomp$2.Event("dataloading",{dataType:"source"}));this._updateWorkerData(function(i){i?e.fire(new t$jscomp$2.ErrorEvent(i)):(i={dataType:"source",sourceDataType:"metadata"},e._collectResourceTiming&&e._resourceTiming&&0<e._resourceTiming.length&&(i.resourceTiming=e._resourceTiming,e._resourceTiming=[]),e.fire(new t$jscomp$2.Event("data",i)))})},i$jscomp$0.prototype.onAdd=
function(t){this.map=t;this.load()},i$jscomp$0.prototype.setData=function(e$jscomp$0){var i=this;return this._data=e$jscomp$0,this.fire(new t$jscomp$2.Event("dataloading",{dataType:"source"})),this._updateWorkerData(function(e){e?i.fire(new t$jscomp$2.ErrorEvent(e)):(e={dataType:"source",sourceDataType:"content"},i._collectResourceTiming&&i._resourceTiming&&0<i._resourceTiming.length&&(e.resourceTiming=i._resourceTiming,i._resourceTiming=[]),i.fire(new t$jscomp$2.Event("data",e)))}),this},i$jscomp$0.prototype.getClusterExpansionZoom=
function(t,e){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:t,source:this.id},e),this},i$jscomp$0.prototype.getClusterChildren=function(t,e){return this.actor.send("geojson.getClusterChildren",{clusterId:t,source:this.id},e),this},i$jscomp$0.prototype.getClusterLeaves=function(t,e,i,o){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:t,limit:e,offset:i},o),this},i$jscomp$0.prototype._updateWorkerData=function(e){var i=this;this._loaded=!1;var o=t$jscomp$2.extend({},
this.workerOptions),r$jscomp$0=this._data;"string"==typeof r$jscomp$0?(o.request=this.map._requestManager.transformRequest(t$jscomp$2.browser.resolveURL(r$jscomp$0),t$jscomp$2.ResourceType.Source),o.request.collectResourceTiming=this._collectResourceTiming):o.data=JSON.stringify(r$jscomp$0);this.actor.send(this.type+".loadData",o,function(t,r){i._removed||r&&r.abandoned||(i._loaded=!0,r&&r.resourceTiming&&r.resourceTiming[i.id]&&(i._resourceTiming=r.resourceTiming[i.id].slice(0)),i.actor.send(i.type+
".coalesce",{source:o.source},null),e(t))})},i$jscomp$0.prototype.loaded=function(){return this._loaded},i$jscomp$0.prototype.loadTile=function(e,i){var o=this,r=e.actor?"reloadTile":"loadTile";e.actor=this.actor;e.request=this.actor.send(r,{type:this.type,uid:e.uid,tileID:e.tileID,zoom:e.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:t$jscomp$2.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId},function(t,a){return delete e.request,
e.unloadVectorData(),e.aborted?i(null):t?i(t):(e.loadVectorData(a,o.map.painter,"reloadTile"===r),i(null))})},i$jscomp$0.prototype.abortTile=function(t){t.request&&(t.request.cancel(),delete t.request);t.aborted=!0},i$jscomp$0.prototype.unloadTile=function(t){t.unloadVectorData();this.actor.send("removeTile",{uid:t.uid,type:this.type,source:this.id})},i$jscomp$0.prototype.onRemove=function(){this._removed=!0;this.actor.send("removeSource",{type:this.type,source:this.id})},i$jscomp$0.prototype.serialize=
function(){return t$jscomp$2.extend({},this._options,{type:this.type,data:this._data})},i$jscomp$0.prototype.hasTransition=function(){return!1},i$jscomp$0}(t$jscomp$2.Evented),M$jscomp$0=t$jscomp$2.createLayout([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]),L$jscomp$0=function(e$jscomp$1){function i$jscomp$1(t,i,o,r){e$jscomp$1.call(this);this.id=t;this.dispatcher=o;this.coordinates=i.coordinates;this.type="image";this.minzoom=0;this.maxzoom=22;this.tileSize=
512;this.tiles={};this._loaded=!1;this.setEventedParent(r);this.options=i}return e$jscomp$1&&(i$jscomp$1.__proto__=e$jscomp$1),(i$jscomp$1.prototype=Object.create(e$jscomp$1&&e$jscomp$1.prototype)).constructor=i$jscomp$1,i$jscomp$1.prototype.load=function(e,i){var o=this;this._loaded=!1;this.fire(new t$jscomp$2.Event("dataloading",{dataType:"source"}));this.url=this.options.url;t$jscomp$2.getImage(this.map._requestManager.transformRequest(this.url,t$jscomp$2.ResourceType.Image),function(r,a){o._loaded=
!0;r?o.fire(new t$jscomp$2.ErrorEvent(r)):a&&(o.image=a,e&&(o.coordinates=e),i&&i(),o._finishLoading())})},i$jscomp$1.prototype.loaded=function(){return this._loaded},i$jscomp$1.prototype.updateImage=function(t){var e=this;return this.image&&t.url?(this.options.url=t.url,this.load(t.coordinates,function(){e.texture=null}),this):this},i$jscomp$1.prototype._finishLoading=function(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new t$jscomp$2.Event("data",{dataType:"source",sourceDataType:"metadata"})))},
i$jscomp$1.prototype.onAdd=function(t){this.map=t;this.load()},i$jscomp$1.prototype.setCoordinates=function(e$jscomp$0){var i$jscomp$0=this;this.coordinates=e$jscomp$0;e$jscomp$0=e$jscomp$0.map(t$jscomp$2.MercatorCoordinate.fromLngLat);this.tileID=function(e){for(var i=1/0,o=1/0,r=-1/0,a=-1/0,n=0;n<e.length;n+=1){var l=e[n];i=Math.min(i,l.x);o=Math.min(o,l.y);r=Math.max(r,l.x);a=Math.max(a,l.y)}e=Math.max(0,Math.floor(-Math.log(Math.max(r-i,a-o))/Math.LN2));n=Math.pow(2,e);return new t$jscomp$2.CanonicalTileID(e,
Math.floor((i+r)/2*n),Math.floor((o+a)/2*n))}(e$jscomp$0);this.minzoom=this.maxzoom=this.tileID.z;e$jscomp$0=e$jscomp$0.map(function(t){return i$jscomp$0.tileID.getTilePoint(t)._round()});return this._boundsArray=new t$jscomp$2.StructArrayLayout4i8,this._boundsArray.emplaceBack(e$jscomp$0[0].x,e$jscomp$0[0].y,0,0),this._boundsArray.emplaceBack(e$jscomp$0[1].x,e$jscomp$0[1].y,t$jscomp$2.EXTENT,0),this._boundsArray.emplaceBack(e$jscomp$0[3].x,e$jscomp$0[3].y,0,t$jscomp$2.EXTENT),this._boundsArray.emplaceBack(e$jscomp$0[2].x,
e$jscomp$0[2].y,t$jscomp$2.EXTENT,t$jscomp$2.EXTENT),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new t$jscomp$2.Event("data",{dataType:"source",sourceDataType:"content"})),this},i$jscomp$1.prototype.prepare=function(){if(0!==Object.keys(this.tiles).length&&this.image){var e=this.map.painter.context,i=e.gl,o;for(o in this.boundsBuffer||(this.boundsBuffer=e.createVertexBuffer(this._boundsArray,M$jscomp$0.members)),this.boundsSegments||(this.boundsSegments=t$jscomp$2.SegmentVector.simpleSegment(0,
0,4,2)),this.texture||(this.texture=new t$jscomp$2.Texture(e,this.image,i.RGBA),this.texture.bind(i.LINEAR,i.CLAMP_TO_EDGE)),this.tiles)e=this.tiles[o],"loaded"!==e.state&&(e.state="loaded",e.texture=this.texture)}},i$jscomp$1.prototype.loadTile=function(t,e){this.tileID&&this.tileID.equals(t.tileID.canonical)?(this.tiles[String(t.tileID.wrap)]=t,t.buckets={},e(null)):(t.state="errored",e(null))},i$jscomp$1.prototype.serialize=function(){return{type:"image",url:this.options.url,coordinates:this.coordinates}},
i$jscomp$1.prototype.hasTransition=function(){return!1},i$jscomp$1}(t$jscomp$2.Evented),A$jscomp$0=function(e$jscomp$0){function i$jscomp$1(t,i,o,r){e$jscomp$0.call(this,t,i,o,r);this.roundZoom=!0;this.type="video";this.options=i}return e$jscomp$0&&(i$jscomp$1.__proto__=e$jscomp$0),(i$jscomp$1.prototype=Object.create(e$jscomp$0&&e$jscomp$0.prototype)).constructor=i$jscomp$1,i$jscomp$1.prototype.load=function(){var e=this;this._loaded=!1;var i$jscomp$0=this.options;this.urls=[];var o$jscomp$0=0;for(i$jscomp$0=
i$jscomp$0.urls;o$jscomp$0<i$jscomp$0.length;o$jscomp$0+=1)this.urls.push(this.map._requestManager.transformRequest(i$jscomp$0[o$jscomp$0],t$jscomp$2.ResourceType.Source).url);t$jscomp$2.getVideo(this.urls,function(i,o){e._loaded=!0;i?e.fire(new t$jscomp$2.ErrorEvent(i)):o&&(e.video=o,e.video.loop=!0,e.video.addEventListener("playing",function(){e.map.triggerRepaint()}),e.map&&e.video.play(),e._finishLoading())})},i$jscomp$1.prototype.pause=function(){this.video&&this.video.pause()},i$jscomp$1.prototype.play=
function(){this.video&&this.video.play()},i$jscomp$1.prototype.seek=function(e){if(this.video){var i=this.video.seekable;e<i.start(0)||e>i.end(0)?this.fire(new t$jscomp$2.ErrorEvent(new t$jscomp$2.ValidationError("sources."+this.id,null,"Playback for this video can be set only between the "+i.start(0)+" and "+i.end(0)+"-second mark."))):this.video.currentTime=e}},i$jscomp$1.prototype.getVideo=function(){return this.video},i$jscomp$1.prototype.onAdd=function(t){this.map||(this.map=t,this.load(),this.video&&
(this.video.play(),this.setCoordinates(this.coordinates)))},i$jscomp$1.prototype.prepare=function(){if(!(0===Object.keys(this.tiles).length||2>this.video.readyState)){var e=this.map.painter.context,i=e.gl,o;for(o in this.boundsBuffer||(this.boundsBuffer=e.createVertexBuffer(this._boundsArray,M$jscomp$0.members)),this.boundsSegments||(this.boundsSegments=t$jscomp$2.SegmentVector.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(i.LINEAR,i.CLAMP_TO_EDGE),i.texSubImage2D(i.TEXTURE_2D,
0,0,0,i.RGBA,i.UNSIGNED_BYTE,this.video)):(this.texture=new t$jscomp$2.Texture(e,this.video,i.RGBA),this.texture.bind(i.LINEAR,i.CLAMP_TO_EDGE)),this.tiles)e=this.tiles[o],"loaded"!==e.state&&(e.state="loaded",e.texture=this.texture)}},i$jscomp$1.prototype.serialize=function(){return{type:"video",urls:this.urls,coordinates:this.coordinates}},i$jscomp$1.prototype.hasTransition=function(){return this.video&&!this.video.paused},i$jscomp$1}(L$jscomp$0),R$jscomp$0=function(e$jscomp$0){function i$jscomp$0(i,
o,r,a){e$jscomp$0.call(this,i,o,r,a);o.coordinates?Array.isArray(o.coordinates)&&4===o.coordinates.length&&!o.coordinates.some(function(t$jscomp$0){return!Array.isArray(t$jscomp$0)||2!==t$jscomp$0.length||t$jscomp$0.some(function(t){return"number"!=typeof t})})||this.fire(new t$jscomp$2.ErrorEvent(new t$jscomp$2.ValidationError("sources."+i,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new t$jscomp$2.ErrorEvent(new t$jscomp$2.ValidationError("sources."+
i,null,'missing required property "coordinates"')));o.animate&&"boolean"!=typeof o.animate&&this.fire(new t$jscomp$2.ErrorEvent(new t$jscomp$2.ValidationError("sources."+i,null,'optional "animate" property must be a boolean value')));o.canvas?"string"==typeof o.canvas||o.canvas instanceof t$jscomp$2.window.HTMLCanvasElement||this.fire(new t$jscomp$2.ErrorEvent(new t$jscomp$2.ValidationError("sources."+i,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):
this.fire(new t$jscomp$2.ErrorEvent(new t$jscomp$2.ValidationError("sources."+i,null,'missing required property "canvas"')));this.options=o;this.animate=void 0===o.animate||o.animate}return e$jscomp$0&&(i$jscomp$0.__proto__=e$jscomp$0),(i$jscomp$0.prototype=Object.create(e$jscomp$0&&e$jscomp$0.prototype)).constructor=i$jscomp$0,i$jscomp$0.prototype.load=function(){this._loaded=!0;this.canvas||(this.canvas=this.options.canvas instanceof t$jscomp$2.window.HTMLCanvasElement?this.options.canvas:t$jscomp$2.window.document.getElementById(this.options.canvas));
this.width=this.canvas.width;this.height=this.canvas.height;this._hasInvalidDimensions()?this.fire(new t$jscomp$2.ErrorEvent(Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0;this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())},i$jscomp$0.prototype.getCanvas=function(){return this.canvas},i$jscomp$0.prototype.onAdd=function(t){this.map=t;this.load();this.canvas&&this.animate&&
this.play()},i$jscomp$0.prototype.onRemove=function(){this.pause()},i$jscomp$0.prototype.prepare=function(){var e=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,e=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,e=!0),!this._hasInvalidDimensions()&&0!==Object.keys(this.tiles).length){var i=this.map.painter.context,o=i.gl,r;for(r in this.boundsBuffer||(this.boundsBuffer=i.createVertexBuffer(this._boundsArray,M$jscomp$0.members)),this.boundsSegments||(this.boundsSegments=
t$jscomp$2.SegmentVector.simpleSegment(0,0,4,2)),this.texture?(e||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new t$jscomp$2.Texture(i,this.canvas,o.RGBA,{premultiply:!0}),this.tiles)e=this.tiles[r],"loaded"!==e.state&&(e.state="loaded",e.texture=this.texture)}},i$jscomp$0.prototype.serialize=function(){return{type:"canvas",coordinates:this.coordinates}},i$jscomp$0.prototype.hasTransition=function(){return this._playing},i$jscomp$0.prototype._hasInvalidDimensions=
function(){for(var t=0,e=[this.canvas.width,this.canvas.height];t<e.length;t+=1){var i=e[t];if(isNaN(i)||0>=i)return!0}return!1},i$jscomp$0}(L$jscomp$0),k$jscomp$0={vector:S$jscomp$0,raster:C$jscomp$0,"raster-dem":z$jscomp$1,geojson:D$jscomp$0,video:A$jscomp$0,image:L$jscomp$0,canvas:R$jscomp$0},U$jscomp$0=function(t,e){this.max=t;this.onRemove=e;this.reset()};U$jscomp$0.prototype.reset=function(){for(var t in this.data)for(var e=0,i=this.data[t];e<i.length;e+=1){var o=i[e];o.timeout&&clearTimeout(o.timeout);
this.onRemove(o.value)}return this.data={},this.order=[],this};U$jscomp$0.prototype.add=function(t,e,i){var o=this,r=t.wrapped().key;void 0===this.data[r]&&(this.data[r]=[]);var a={value:e,timeout:void 0};(void 0!==i&&(a.timeout=setTimeout(function(){o.remove(t,a)},i)),this.data[r].push(a),this.order.push(r),this.order.length>this.max)&&(e=this._getAndRemoveByKey(this.order[0]))&&this.onRemove(e);return this};U$jscomp$0.prototype.has=function(t){return t.wrapped().key in this.data};U$jscomp$0.prototype.getAndRemove=
function(t){return this.has(t)?this._getAndRemoveByKey(t.wrapped().key):null};U$jscomp$0.prototype._getAndRemoveByKey=function(t){var e=this.data[t].shift();return e.timeout&&clearTimeout(e.timeout),0===this.data[t].length&&delete this.data[t],this.order.splice(this.order.indexOf(t),1),e.value};U$jscomp$0.prototype.getByKey=function(t){return(t=this.data[t])?t[0].value:null};U$jscomp$0.prototype.get=function(t){return this.has(t)?this.data[t.wrapped().key][0].value:null};U$jscomp$0.prototype.remove=
function(t,e){if(!this.has(t))return this;t=t.wrapped().key;e=void 0===e?0:this.data[t].indexOf(e);var r=this.data[t][e];return this.data[t].splice(e,1),r.timeout&&clearTimeout(r.timeout),0===this.data[t].length&&delete this.data[t],this.onRemove(r.value),this.order.splice(this.order.indexOf(t),1),this};U$jscomp$0.prototype.setMaxSize=function(t){for(this.max=t;this.order.length>this.max;)(t=this._getAndRemoveByKey(this.order[0]))&&this.onRemove(t);return this};U$jscomp$0.prototype.filter=function(t){var e=
[];for(i in this.data)for(var o=0,r=this.data[i];o<r.length;o+=1){var a=r[o];t(a.value)||e.push(a)}for(t=0;t<e.length;t+=1){var i=e[t];this.remove(i.value.tileID,i)}};var N$jscomp$0=function(t,e,i){this.context=t;var o=t.gl;this.buffer=o.createBuffer();this.dynamicDraw=!!i;this.context.unbindVAO();t.bindElementBuffer.set(this.buffer);o.bufferData(o.ELEMENT_ARRAY_BUFFER,e.arrayBuffer,this.dynamicDraw?o.DYNAMIC_DRAW:o.STATIC_DRAW);this.dynamicDraw||delete e.arrayBuffer};N$jscomp$0.prototype.bind=function(){this.context.bindElementBuffer.set(this.buffer)};
N$jscomp$0.prototype.updateData=function(t){var e=this.context.gl;this.context.unbindVAO();this.bind();e.bufferSubData(e.ELEMENT_ARRAY_BUFFER,0,t.arrayBuffer)};N$jscomp$0.prototype.destroy=function(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)};var Z$jscomp$0={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"},j=function(t,e,i,o){this.length=e.length;this.attributes=i;this.itemSize=e.bytesPerElement;
this.dynamicDraw=o;this.context=t;i=t.gl;this.buffer=i.createBuffer();t.bindVertexBuffer.set(this.buffer);i.bufferData(i.ARRAY_BUFFER,e.arrayBuffer,this.dynamicDraw?i.DYNAMIC_DRAW:i.STATIC_DRAW);this.dynamicDraw||delete e.arrayBuffer};j.prototype.bind=function(){this.context.bindVertexBuffer.set(this.buffer)};j.prototype.updateData=function(t){var e=this.context.gl;this.bind();e.bufferSubData(e.ARRAY_BUFFER,0,t.arrayBuffer)};j.prototype.enableAttributes=function(t,e){for(var i=0;i<this.attributes.length;i++){var o=
e.attributes[this.attributes[i].name];void 0!==o&&t.enableVertexAttribArray(o)}};j.prototype.setVertexAttribPointers=function(t,e,i){for(var o=0;o<this.attributes.length;o++){var r=this.attributes[o],a=e.attributes[r.name];void 0!==a&&t.vertexAttribPointer(a,r.components,t[Z$jscomp$0[r.type]],!1,this.itemSize,r.offset+this.itemSize*(i||0))}};j.prototype.destroy=function(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)};var q$jscomp$0=function(t){this.gl=t.gl;this.current=
this.default=this.getDefault();this.dirty=!1};q$jscomp$0.prototype.get=function(){return this.current};q$jscomp$0.prototype.set=function(t){};q$jscomp$0.prototype.getDefault=function(){return this.default};q$jscomp$0.prototype.setDefault=function(){this.set(this.default)};var V$jscomp$0=function(e$jscomp$0){function i(){e$jscomp$0.apply(this,arguments)}return e$jscomp$0&&(i.__proto__=e$jscomp$0),(i.prototype=Object.create(e$jscomp$0&&e$jscomp$0.prototype)).constructor=i,i.prototype.getDefault=function(){return t$jscomp$2.Color.transparent},
i.prototype.set=function(t){var e=this.current;(t.r!==e.r||t.g!==e.g||t.b!==e.b||t.a!==e.a||this.dirty)&&(this.gl.clearColor(t.r,t.g,t.b,t.a),this.current=t,this.dirty=!1)},i}(q$jscomp$0),G=function(t$jscomp$0){function e(){t$jscomp$0.apply(this,arguments)}return t$jscomp$0&&(e.__proto__=t$jscomp$0),(e.prototype=Object.create(t$jscomp$0&&t$jscomp$0.prototype)).constructor=e,e.prototype.getDefault=function(){return 1},e.prototype.set=function(t){(t!==this.current||this.dirty)&&(this.gl.clearDepth(t),
this.current=t,this.dirty=!1)},e}(q$jscomp$0),W$jscomp$0=function(t$jscomp$0){function e(){t$jscomp$0.apply(this,arguments)}return t$jscomp$0&&(e.__proto__=t$jscomp$0),(e.prototype=Object.create(t$jscomp$0&&t$jscomp$0.prototype)).constructor=e,e.prototype.getDefault=function(){return 0},e.prototype.set=function(t){(t!==this.current||this.dirty)&&(this.gl.clearStencil(t),this.current=t,this.dirty=!1)},e}(q$jscomp$0),X$jscomp$0=function(t$jscomp$0){function e$jscomp$0(){t$jscomp$0.apply(this,arguments)}
return t$jscomp$0&&(e$jscomp$0.__proto__=t$jscomp$0),(e$jscomp$0.prototype=Object.create(t$jscomp$0&&t$jscomp$0.prototype)).constructor=e$jscomp$0,e$jscomp$0.prototype.getDefault=function(){return[!0,!0,!0,!0]},e$jscomp$0.prototype.set=function(t){var e=this.current;(t[0]!==e[0]||t[1]!==e[1]||t[2]!==e[2]||t[3]!==e[3]||this.dirty)&&(this.gl.colorMask(t[0],t[1],t[2],t[3]),this.current=t,this.dirty=!1)},e$jscomp$0}(q$jscomp$0),H$jscomp$0=function(t$jscomp$0){function e(){t$jscomp$0.apply(this,arguments)}
return t$jscomp$0&&(e.__proto__=t$jscomp$0),(e.prototype=Object.create(t$jscomp$0&&t$jscomp$0.prototype)).constructor=e,e.prototype.getDefault=function(){return!0},e.prototype.set=function(t){(t!==this.current||this.dirty)&&(this.gl.depthMask(t),this.current=t,this.dirty=!1)},e}(q$jscomp$0),K$jscomp$0=function(t$jscomp$0){function e(){t$jscomp$0.apply(this,arguments)}return t$jscomp$0&&(e.__proto__=t$jscomp$0),(e.prototype=Object.create(t$jscomp$0&&t$jscomp$0.prototype)).constructor=e,e.prototype.getDefault=
function(){return 255},e.prototype.set=function(t){(t!==this.current||this.dirty)&&(this.gl.stencilMask(t),this.current=t,this.dirty=!1)},e}(q$jscomp$0),Y$jscomp$0=function(t$jscomp$0){function e$jscomp$0(){t$jscomp$0.apply(this,arguments)}return t$jscomp$0&&(e$jscomp$0.__proto__=t$jscomp$0),(e$jscomp$0.prototype=Object.create(t$jscomp$0&&t$jscomp$0.prototype)).constructor=e$jscomp$0,e$jscomp$0.prototype.getDefault=function(){return{func:this.gl.ALWAYS,ref:0,mask:255}},e$jscomp$0.prototype.set=function(t){var e=
this.current;(t.func!==e.func||t.ref!==e.ref||t.mask!==e.mask||this.dirty)&&(this.gl.stencilFunc(t.func,t.ref,t.mask),this.current=t,this.dirty=!1)},e$jscomp$0}(q$jscomp$0),J=function(t$jscomp$0){function e$jscomp$0(){t$jscomp$0.apply(this,arguments)}return t$jscomp$0&&(e$jscomp$0.__proto__=t$jscomp$0),(e$jscomp$0.prototype=Object.create(t$jscomp$0&&t$jscomp$0.prototype)).constructor=e$jscomp$0,e$jscomp$0.prototype.getDefault=function(){var t=this.gl;return[t.KEEP,t.KEEP,t.KEEP]},e$jscomp$0.prototype.set=
function(t){var e=this.current;(t[0]!==e[0]||t[1]!==e[1]||t[2]!==e[2]||this.dirty)&&(this.gl.stencilOp(t[0],t[1],t[2]),this.current=t,this.dirty=!1)},e$jscomp$0}(q$jscomp$0),Q=function(t$jscomp$0){function e$jscomp$0(){t$jscomp$0.apply(this,arguments)}return t$jscomp$0&&(e$jscomp$0.__proto__=t$jscomp$0),(e$jscomp$0.prototype=Object.create(t$jscomp$0&&t$jscomp$0.prototype)).constructor=e$jscomp$0,e$jscomp$0.prototype.getDefault=function(){return!1},e$jscomp$0.prototype.set=function(t){if(t!==this.current||
this.dirty){var e=this.gl;t?e.enable(e.STENCIL_TEST):e.disable(e.STENCIL_TEST);this.current=t;this.dirty=!1}},e$jscomp$0}(q$jscomp$0),$=function(t$jscomp$0){function e$jscomp$0(){t$jscomp$0.apply(this,arguments)}return t$jscomp$0&&(e$jscomp$0.__proto__=t$jscomp$0),(e$jscomp$0.prototype=Object.create(t$jscomp$0&&t$jscomp$0.prototype)).constructor=e$jscomp$0,e$jscomp$0.prototype.getDefault=function(){return[0,1]},e$jscomp$0.prototype.set=function(t){var e=this.current;(t[0]!==e[0]||t[1]!==e[1]||this.dirty)&&
(this.gl.depthRange(t[0],t[1]),this.current=t,this.dirty=!1)},e$jscomp$0}(q$jscomp$0),tt=function(t$jscomp$0){function e$jscomp$0(){t$jscomp$0.apply(this,arguments)}return t$jscomp$0&&(e$jscomp$0.__proto__=t$jscomp$0),(e$jscomp$0.prototype=Object.create(t$jscomp$0&&t$jscomp$0.prototype)).constructor=e$jscomp$0,e$jscomp$0.prototype.getDefault=function(){return!1},e$jscomp$0.prototype.set=function(t){if(t!==this.current||this.dirty){var e=this.gl;t?e.enable(e.DEPTH_TEST):e.disable(e.DEPTH_TEST);this.current=
t;this.dirty=!1}},e$jscomp$0}(q$jscomp$0),et=function(t$jscomp$0){function e(){t$jscomp$0.apply(this,arguments)}return t$jscomp$0&&(e.__proto__=t$jscomp$0),(e.prototype=Object.create(t$jscomp$0&&t$jscomp$0.prototype)).constructor=e,e.prototype.getDefault=function(){return this.gl.LESS},e.prototype.set=function(t){(t!==this.current||this.dirty)&&(this.gl.depthFunc(t),this.current=t,this.dirty=!1)},e}(q$jscomp$0),it=function(t$jscomp$0){function e$jscomp$0(){t$jscomp$0.apply(this,arguments)}return t$jscomp$0&&
(e$jscomp$0.__proto__=t$jscomp$0),(e$jscomp$0.prototype=Object.create(t$jscomp$0&&t$jscomp$0.prototype)).constructor=e$jscomp$0,e$jscomp$0.prototype.getDefault=function(){return!1},e$jscomp$0.prototype.set=function(t){if(t!==this.current||this.dirty){var e=this.gl;t?e.enable(e.BLEND):e.disable(e.BLEND);this.current=t;this.dirty=!1}},e$jscomp$0}(q$jscomp$0),ot=function(t$jscomp$0){function e$jscomp$0(){t$jscomp$0.apply(this,arguments)}return t$jscomp$0&&(e$jscomp$0.__proto__=t$jscomp$0),(e$jscomp$0.prototype=
Object.create(t$jscomp$0&&t$jscomp$0.prototype)).constructor=e$jscomp$0,e$jscomp$0.prototype.getDefault=function(){var t=this.gl;return[t.ONE,t.ZERO]},e$jscomp$0.prototype.set=function(t){var e=this.current;(t[0]!==e[0]||t[1]!==e[1]||this.dirty)&&(this.gl.blendFunc(t[0],t[1]),this.current=t,this.dirty=!1)},e$jscomp$0}(q$jscomp$0),rt=function(e$jscomp$0){function i(){e$jscomp$0.apply(this,arguments)}return e$jscomp$0&&(i.__proto__=e$jscomp$0),(i.prototype=Object.create(e$jscomp$0&&e$jscomp$0.prototype)).constructor=
i,i.prototype.getDefault=function(){return t$jscomp$2.Color.transparent},i.prototype.set=function(t){var e=this.current;(t.r!==e.r||t.g!==e.g||t.b!==e.b||t.a!==e.a||this.dirty)&&(this.gl.blendColor(t.r,t.g,t.b,t.a),this.current=t,this.dirty=!1)},i}(q$jscomp$0),at=function(t$jscomp$0){function e(){t$jscomp$0.apply(this,arguments)}return t$jscomp$0&&(e.__proto__=t$jscomp$0),(e.prototype=Object.create(t$jscomp$0&&t$jscomp$0.prototype)).constructor=e,e.prototype.getDefault=function(){return this.gl.FUNC_ADD},
e.prototype.set=function(t){(t!==this.current||this.dirty)&&(this.gl.blendEquation(t),this.current=t,this.dirty=!1)},e}(q$jscomp$0),nt=function(t$jscomp$0){function e$jscomp$0(){t$jscomp$0.apply(this,arguments)}return t$jscomp$0&&(e$jscomp$0.__proto__=t$jscomp$0),(e$jscomp$0.prototype=Object.create(t$jscomp$0&&t$jscomp$0.prototype)).constructor=e$jscomp$0,e$jscomp$0.prototype.getDefault=function(){return!1},e$jscomp$0.prototype.set=function(t){if(t!==this.current||this.dirty){var e=this.gl;t?e.enable(e.CULL_FACE):
e.disable(e.CULL_FACE);this.current=t;this.dirty=!1}},e$jscomp$0}(q$jscomp$0),st=function(t$jscomp$0){function e(){t$jscomp$0.apply(this,arguments)}return t$jscomp$0&&(e.__proto__=t$jscomp$0),(e.prototype=Object.create(t$jscomp$0&&t$jscomp$0.prototype)).constructor=e,e.prototype.getDefault=function(){return this.gl.BACK},e.prototype.set=function(t){(t!==this.current||this.dirty)&&(this.gl.cullFace(t),this.current=t,this.dirty=!1)},e}(q$jscomp$0),lt=function(t$jscomp$0){function e(){t$jscomp$0.apply(this,
arguments)}return t$jscomp$0&&(e.__proto__=t$jscomp$0),(e.prototype=Object.create(t$jscomp$0&&t$jscomp$0.prototype)).constructor=e,e.prototype.getDefault=function(){return this.gl.CCW},e.prototype.set=function(t){(t!==this.current||this.dirty)&&(this.gl.frontFace(t),this.current=t,this.dirty=!1)},e}(q$jscomp$0),ct=function(t$jscomp$0){function e(){t$jscomp$0.apply(this,arguments)}return t$jscomp$0&&(e.__proto__=t$jscomp$0),(e.prototype=Object.create(t$jscomp$0&&t$jscomp$0.prototype)).constructor=
e,e.prototype.getDefault=function(){return null},e.prototype.set=function(t){(t!==this.current||this.dirty)&&(this.gl.useProgram(t),this.current=t,this.dirty=!1)},e}(q$jscomp$0),ut=function(t$jscomp$0){function e(){t$jscomp$0.apply(this,arguments)}return t$jscomp$0&&(e.__proto__=t$jscomp$0),(e.prototype=Object.create(t$jscomp$0&&t$jscomp$0.prototype)).constructor=e,e.prototype.getDefault=function(){return this.gl.TEXTURE0},e.prototype.set=function(t){(t!==this.current||this.dirty)&&(this.gl.activeTexture(t),
this.current=t,this.dirty=!1)},e}(q$jscomp$0),ht=function(t$jscomp$0){function e$jscomp$0(){t$jscomp$0.apply(this,arguments)}return t$jscomp$0&&(e$jscomp$0.__proto__=t$jscomp$0),(e$jscomp$0.prototype=Object.create(t$jscomp$0&&t$jscomp$0.prototype)).constructor=e$jscomp$0,e$jscomp$0.prototype.getDefault=function(){var t=this.gl;return[0,0,t.drawingBufferWidth,t.drawingBufferHeight]},e$jscomp$0.prototype.set=function(t){var e=this.current;(t[0]!==e[0]||t[1]!==e[1]||t[2]!==e[2]||t[3]!==e[3]||this.dirty)&&
(this.gl.viewport(t[0],t[1],t[2],t[3]),this.current=t,this.dirty=!1)},e$jscomp$0}(q$jscomp$0),pt=function(t$jscomp$0){function e$jscomp$0(){t$jscomp$0.apply(this,arguments)}return t$jscomp$0&&(e$jscomp$0.__proto__=t$jscomp$0),(e$jscomp$0.prototype=Object.create(t$jscomp$0&&t$jscomp$0.prototype)).constructor=e$jscomp$0,e$jscomp$0.prototype.getDefault=function(){return null},e$jscomp$0.prototype.set=function(t){if(t!==this.current||this.dirty){var e=this.gl;e.bindFramebuffer(e.FRAMEBUFFER,t);this.current=
t;this.dirty=!1}},e$jscomp$0}(q$jscomp$0),dt=function(t$jscomp$0){function e$jscomp$0(){t$jscomp$0.apply(this,arguments)}return t$jscomp$0&&(e$jscomp$0.__proto__=t$jscomp$0),(e$jscomp$0.prototype=Object.create(t$jscomp$0&&t$jscomp$0.prototype)).constructor=e$jscomp$0,e$jscomp$0.prototype.getDefault=function(){return null},e$jscomp$0.prototype.set=function(t){if(t!==this.current||this.dirty){var e=this.gl;e.bindRenderbuffer(e.RENDERBUFFER,t);this.current=t;this.dirty=!1}},e$jscomp$0}(q$jscomp$0),_t=
function(t$jscomp$0){function e$jscomp$0(){t$jscomp$0.apply(this,arguments)}return t$jscomp$0&&(e$jscomp$0.__proto__=t$jscomp$0),(e$jscomp$0.prototype=Object.create(t$jscomp$0&&t$jscomp$0.prototype)).constructor=e$jscomp$0,e$jscomp$0.prototype.getDefault=function(){return null},e$jscomp$0.prototype.set=function(t){if(t!==this.current||this.dirty){var e=this.gl;e.bindTexture(e.TEXTURE_2D,t);this.current=t;this.dirty=!1}},e$jscomp$0}(q$jscomp$0),ft=function(t$jscomp$0){function e$jscomp$0(){t$jscomp$0.apply(this,
arguments)}return t$jscomp$0&&(e$jscomp$0.__proto__=t$jscomp$0),(e$jscomp$0.prototype=Object.create(t$jscomp$0&&t$jscomp$0.prototype)).constructor=e$jscomp$0,e$jscomp$0.prototype.getDefault=function(){return null},e$jscomp$0.prototype.set=function(t){if(t!==this.current||this.dirty){var e=this.gl;e.bindBuffer(e.ARRAY_BUFFER,t);this.current=t;this.dirty=!1}},e$jscomp$0}(q$jscomp$0),mt=function(t$jscomp$0){function e$jscomp$0(){t$jscomp$0.apply(this,arguments)}return t$jscomp$0&&(e$jscomp$0.__proto__=
t$jscomp$0),(e$jscomp$0.prototype=Object.create(t$jscomp$0&&t$jscomp$0.prototype)).constructor=e$jscomp$0,e$jscomp$0.prototype.getDefault=function(){return null},e$jscomp$0.prototype.set=function(t){var e=this.gl;e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,t);this.current=t;this.dirty=!1},e$jscomp$0}(q$jscomp$0),gt=function(t$jscomp$0){function e$jscomp$0(e){t$jscomp$0.call(this,e);this.vao=e.extVertexArrayObject}return t$jscomp$0&&(e$jscomp$0.__proto__=t$jscomp$0),(e$jscomp$0.prototype=Object.create(t$jscomp$0&&
t$jscomp$0.prototype)).constructor=e$jscomp$0,e$jscomp$0.prototype.getDefault=function(){return null},e$jscomp$0.prototype.set=function(t){this.vao&&(t!==this.current||this.dirty)&&(this.vao.bindVertexArrayOES(t),this.current=t,this.dirty=!1)},e$jscomp$0}(q$jscomp$0),vt=function(t$jscomp$0){function e$jscomp$0(){t$jscomp$0.apply(this,arguments)}return t$jscomp$0&&(e$jscomp$0.__proto__=t$jscomp$0),(e$jscomp$0.prototype=Object.create(t$jscomp$0&&t$jscomp$0.prototype)).constructor=e$jscomp$0,e$jscomp$0.prototype.getDefault=
function(){return 4},e$jscomp$0.prototype.set=function(t){if(t!==this.current||this.dirty){var e=this.gl;e.pixelStorei(e.UNPACK_ALIGNMENT,t);this.current=t;this.dirty=!1}},e$jscomp$0}(q$jscomp$0),yt=function(t$jscomp$0){function e$jscomp$0(){t$jscomp$0.apply(this,arguments)}return t$jscomp$0&&(e$jscomp$0.__proto__=t$jscomp$0),(e$jscomp$0.prototype=Object.create(t$jscomp$0&&t$jscomp$0.prototype)).constructor=e$jscomp$0,e$jscomp$0.prototype.getDefault=function(){return!1},e$jscomp$0.prototype.set=function(t){if(t!==
this.current||this.dirty){var e=this.gl;e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,t);this.current=t;this.dirty=!1}},e$jscomp$0}(q$jscomp$0),xt=function(t$jscomp$0){function e$jscomp$0(){t$jscomp$0.apply(this,arguments)}return t$jscomp$0&&(e$jscomp$0.__proto__=t$jscomp$0),(e$jscomp$0.prototype=Object.create(t$jscomp$0&&t$jscomp$0.prototype)).constructor=e$jscomp$0,e$jscomp$0.prototype.getDefault=function(){return!1},e$jscomp$0.prototype.set=function(t){if(t!==this.current||this.dirty){var e=this.gl;
e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,t);this.current=t;this.dirty=!1}},e$jscomp$0}(q$jscomp$0),bt=function(t){function e$jscomp$0(e,i){t.call(this,e);this.context=e;this.parent=i}return t&&(e$jscomp$0.__proto__=t),(e$jscomp$0.prototype=Object.create(t&&t.prototype)).constructor=e$jscomp$0,e$jscomp$0.prototype.getDefault=function(){return null},e$jscomp$0}(q$jscomp$0),wt=function(t$jscomp$0){function e$jscomp$0(){t$jscomp$0.apply(this,arguments)}return t$jscomp$0&&(e$jscomp$0.__proto__=t$jscomp$0),
(e$jscomp$0.prototype=Object.create(t$jscomp$0&&t$jscomp$0.prototype)).constructor=e$jscomp$0,e$jscomp$0.prototype.setDirty=function(){this.dirty=!0},e$jscomp$0.prototype.set=function(t){if(t!==this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);var e=this.gl;e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,t,0);this.current=t;this.dirty=!1}},e$jscomp$0}(bt),Tt=function(t$jscomp$0){function e$jscomp$0(){t$jscomp$0.apply(this,arguments)}return t$jscomp$0&&(e$jscomp$0.__proto__=
t$jscomp$0),(e$jscomp$0.prototype=Object.create(t$jscomp$0&&t$jscomp$0.prototype)).constructor=e$jscomp$0,e$jscomp$0.prototype.set=function(t){if(t!==this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);var e=this.gl;e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.RENDERBUFFER,t);this.current=t;this.dirty=!1}},e$jscomp$0}(bt),Et=function(t,e,i,o){this.context=t;this.width=e;this.height=i;e=this.framebuffer=t.gl.createFramebuffer();this.colorAttachment=new wt(t,e);o&&
(this.depthAttachment=new Tt(t,e))};Et.prototype.destroy=function(){var t=this.context.gl,e=this.colorAttachment.get();(e&&t.deleteTexture(e),this.depthAttachment)&&(e=this.depthAttachment.get())&&t.deleteRenderbuffer(e);t.deleteFramebuffer(this.framebuffer)};var It=function(t,e,i){this.func=t;this.mask=e;this.range=i};It.ReadOnly=!1;It.ReadWrite=!0;It.disabled=new It(519,It.ReadOnly,[0,1]);var Pt=function(t,e,i,o,r,a){this.test=t;this.ref=e;this.mask=i;this.fail=o;this.depthFail=r;this.pass=a};Pt.disabled=
new Pt({func:519,mask:0},0,0,7680,7680,7680);var St=function(t,e,i){this.blendFunction=t;this.blendColor=e;this.mask=i};St.disabled=new St(St.Replace=[1,0],t$jscomp$2.Color.transparent,[!1,!1,!1,!1]);St.unblended=new St(St.Replace,t$jscomp$2.Color.transparent,[!0,!0,!0,!0]);St.alphaBlended=new St([1,771],t$jscomp$2.Color.transparent,[!0,!0,!0,!0]);var Ct=function(t,e,i){this.enable=t;this.mode=e;this.frontFace=i};Ct.disabled=new Ct(!1,1029,2305);Ct.backCCW=new Ct(!0,1029,2305);var zt=function(t){this.gl=
t;this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object");this.clearColor=new V$jscomp$0(this);this.clearDepth=new G(this);this.clearStencil=new W$jscomp$0(this);this.colorMask=new X$jscomp$0(this);this.depthMask=new H$jscomp$0(this);this.stencilMask=new K$jscomp$0(this);this.stencilFunc=new Y$jscomp$0(this);this.stencilOp=new J(this);this.stencilTest=new Q(this);this.depthRange=new $(this);this.depthTest=new tt(this);this.depthFunc=new et(this);this.blend=new it(this);this.blendFunc=
new ot(this);this.blendColor=new rt(this);this.blendEquation=new at(this);this.cullFace=new nt(this);this.cullFaceSide=new st(this);this.frontFace=new lt(this);this.program=new ct(this);this.activeTexture=new ut(this);this.viewport=new ht(this);this.bindFramebuffer=new pt(this);this.bindRenderbuffer=new dt(this);this.bindTexture=new _t(this);this.bindVertexBuffer=new ft(this);this.bindElementBuffer=new mt(this);this.bindVertexArrayOES=this.extVertexArrayObject&&new gt(this);this.pixelStoreUnpack=
new vt(this);this.pixelStoreUnpackPremultiplyAlpha=new yt(this);this.pixelStoreUnpackFlipY=new xt(this);(this.extTextureFilterAnisotropic=t.getExtension("EXT_texture_filter_anisotropic")||t.getExtension("MOZ_EXT_texture_filter_anisotropic")||t.getExtension("WEBKIT_EXT_texture_filter_anisotropic"))&&(this.extTextureFilterAnisotropicMax=t.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT));(this.extTextureHalfFloat=t.getExtension("OES_texture_half_float"))&&(t.getExtension("OES_texture_half_float_linear"),
this.extRenderToTextureHalfFloat=t.getExtension("EXT_color_buffer_half_float"));this.extTimerQuery=t.getExtension("EXT_disjoint_timer_query")};zt.prototype.setDefault=function(){this.unbindVAO();this.clearColor.setDefault();this.clearDepth.setDefault();this.clearStencil.setDefault();this.colorMask.setDefault();this.depthMask.setDefault();this.stencilMask.setDefault();this.stencilFunc.setDefault();this.stencilOp.setDefault();this.stencilTest.setDefault();this.depthRange.setDefault();this.depthTest.setDefault();
this.depthFunc.setDefault();this.blend.setDefault();this.blendFunc.setDefault();this.blendColor.setDefault();this.blendEquation.setDefault();this.cullFace.setDefault();this.cullFaceSide.setDefault();this.frontFace.setDefault();this.program.setDefault();this.activeTexture.setDefault();this.bindFramebuffer.setDefault();this.pixelStoreUnpack.setDefault();this.pixelStoreUnpackPremultiplyAlpha.setDefault();this.pixelStoreUnpackFlipY.setDefault()};zt.prototype.setDirty=function(){this.clearColor.dirty=
!0;this.clearDepth.dirty=!0;this.clearStencil.dirty=!0;this.colorMask.dirty=!0;this.depthMask.dirty=!0;this.stencilMask.dirty=!0;this.stencilFunc.dirty=!0;this.stencilOp.dirty=!0;this.stencilTest.dirty=!0;this.depthRange.dirty=!0;this.depthTest.dirty=!0;this.depthFunc.dirty=!0;this.blend.dirty=!0;this.blendFunc.dirty=!0;this.blendColor.dirty=!0;this.blendEquation.dirty=!0;this.cullFace.dirty=!0;this.cullFaceSide.dirty=!0;this.frontFace.dirty=!0;this.program.dirty=!0;this.activeTexture.dirty=!0;this.viewport.dirty=
!0;this.bindFramebuffer.dirty=!0;this.bindRenderbuffer.dirty=!0;this.bindTexture.dirty=!0;this.bindVertexBuffer.dirty=!0;this.bindElementBuffer.dirty=!0;this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0);this.pixelStoreUnpack.dirty=!0;this.pixelStoreUnpackPremultiplyAlpha.dirty=!0;this.pixelStoreUnpackFlipY.dirty=!0};zt.prototype.createIndexBuffer=function(t,e){return new N$jscomp$0(this,t,e)};zt.prototype.createVertexBuffer=function(t,e,i){return new j(this,t,e,i)};zt.prototype.createRenderbuffer=
function(t,e,i){var o=this.gl,r=o.createRenderbuffer();return this.bindRenderbuffer.set(r),o.renderbufferStorage(o.RENDERBUFFER,t,e,i),this.bindRenderbuffer.set(null),r};zt.prototype.createFramebuffer=function(t,e,i){return new Et(this,t,e,i)};zt.prototype.clear=function(t){var e=t.color;t=t.depth;var o=this.gl,r=0;e&&(r|=o.COLOR_BUFFER_BIT,this.clearColor.set(e),this.colorMask.set([!0,!0,!0,!0]));void 0!==t&&(r|=o.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(t),this.depthMask.set(!0));
o.clear(r)};zt.prototype.setCullFace=function(t){!1===t.enable?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(t.mode),this.frontFace.set(t.frontFace))};zt.prototype.setDepthMode=function(t){t.func!==this.gl.ALWAYS||t.mask?(this.depthTest.set(!0),this.depthFunc.set(t.func),this.depthMask.set(t.mask),this.depthRange.set(t.range)):this.depthTest.set(!1)};zt.prototype.setStencilMode=function(t){t.test.func!==this.gl.ALWAYS||t.mask?(this.stencilTest.set(!0),this.stencilMask.set(t.mask),
this.stencilOp.set([t.fail,t.depthFail,t.pass]),this.stencilFunc.set({func:t.test.func,ref:t.ref,mask:t.test.mask})):this.stencilTest.set(!1)};zt.prototype.setColorMode=function(e){t$jscomp$2.deepEqual(e.blendFunction,St.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(e.blendFunction),this.blendColor.set(e.blendColor));this.colorMask.set(e.mask)};zt.prototype.unbindVAO=function(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)};var Dt=function(e$jscomp$1){function i$jscomp$1(i$jscomp$0,
o$jscomp$0,r$jscomp$0){var a=this;e$jscomp$1.call(this);this.id=i$jscomp$0;this.dispatcher=r$jscomp$0;this.on("data",function(t){"source"===t.dataType&&"metadata"===t.sourceDataType&&(a._sourceLoaded=!0);a._sourceLoaded&&!a._paused&&"source"===t.dataType&&"content"===t.sourceDataType&&(a.reload(),a.transform&&a.update(a.transform))});this.on("error",function(){a._sourceErrored=!0});this._source=function(e,i,o,r){i=new k$jscomp$0[i.type](e,i,o,r);if(i.id!==e)throw Error("Expected Source id to be "+
e+" instead of "+i.id);return t$jscomp$2.bindAll(["load","abort","unload","serialize","prepare"],i),i}(i$jscomp$0,o$jscomp$0,r$jscomp$0,this);this._tiles={};this._cache=new U$jscomp$0(0,this._unloadTile.bind(this));this._timers={};this._cacheTimers={};this._maxTileCacheSize=null;this._loadedParentTiles={};this._coveredTiles={};this._state=new t$jscomp$2.SourceFeatureState}return e$jscomp$1&&(i$jscomp$1.__proto__=e$jscomp$1),(i$jscomp$1.prototype=Object.create(e$jscomp$1&&e$jscomp$1.prototype)).constructor=
i$jscomp$1,i$jscomp$1.prototype.onAdd=function(t){this._maxTileCacheSize=(this.map=t)?t._maxTileCacheSize:null;this._source&&this._source.onAdd&&this._source.onAdd(t)},i$jscomp$1.prototype.onRemove=function(t){this._source&&this._source.onRemove&&this._source.onRemove(t)},i$jscomp$1.prototype.loaded=function(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;for(var t in this._tiles){var e=this._tiles[t];if("loaded"!==e.state&&"errored"!==e.state)return!1}return!0},
i$jscomp$1.prototype.getSource=function(){return this._source},i$jscomp$1.prototype.pause=function(){this._paused=!0},i$jscomp$1.prototype.resume=function(){if(this._paused){var t=this._shouldReloadOnResume;this._shouldReloadOnResume=this._paused=!1;t&&this.reload();this.transform&&this.update(this.transform)}},i$jscomp$1.prototype._loadTile=function(t,e){return this._source.loadTile(t,e)},i$jscomp$1.prototype._unloadTile=function(t){if(this._source.unloadTile)return this._source.unloadTile(t,function(){})},
i$jscomp$1.prototype._abortTile=function(t){if(this._source.abortTile)return this._source.abortTile(t,function(){})},i$jscomp$1.prototype.serialize=function(){return this._source.serialize()},i$jscomp$1.prototype.prepare=function(t){for(var e in this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null),this._tiles){var i=this._tiles[e];i.upload(t);i.prepare(this.map.style.imageManager)}},i$jscomp$1.prototype.getIds=function(){return t$jscomp$2.values(this._tiles).map(function(t){return t.tileID}).sort(Mt).map(function(t){return t.key})},
i$jscomp$1.prototype.getRenderableIds=function(e$jscomp$0){var i=this,o$jscomp$0=[],r;for(r in this._tiles)this._isIdRenderable(r,e$jscomp$0)&&o$jscomp$0.push(this._tiles[r]);return e$jscomp$0?o$jscomp$0.sort(function(e,o){e=e.tileID;o=o.tileID;var n=(new t$jscomp$2.Point(e.canonical.x,e.canonical.y))._rotate(i.transform.angle),s=(new t$jscomp$2.Point(o.canonical.x,o.canonical.y))._rotate(i.transform.angle);return e.overscaledZ-o.overscaledZ||s.y-n.y||s.x-n.x}).map(function(t){return t.tileID.key}):
o$jscomp$0.map(function(t){return t.tileID}).sort(Mt).map(function(t){return t.key})},i$jscomp$1.prototype.hasRenderableParent=function(t){t=this.findLoadedParent(t,0);return!!t&&this._isIdRenderable(t.tileID.key)},i$jscomp$1.prototype._isIdRenderable=function(t,e){return this._tiles[t]&&this._tiles[t].hasData()&&!this._coveredTiles[t]&&(e||!this._tiles[t].holdingForFade())},i$jscomp$1.prototype.reload=function(){if(this._paused)this._shouldReloadOnResume=!0;else for(var t in this._cache.reset(),
this._tiles)"errored"!==this._tiles[t].state&&this._reloadTile(t,"reloading")},i$jscomp$1.prototype._reloadTile=function(t,e){var i=this._tiles[t];i&&("loading"!==i.state&&(i.state=e),this._loadTile(i,this._tileLoaded.bind(this,i,t,e)))},i$jscomp$1.prototype._tileLoaded=function(e,i,o,r){if(r)return e.state="errored",void(404!==r.status?this._source.fire(new t$jscomp$2.ErrorEvent(r,{tile:e})):this.update(this.transform));e.timeAdded=t$jscomp$2.browser.now();"expired"===o&&(e.refreshedUponExpiration=
!0);this._setTileReloadTimer(i,e);"raster-dem"===this.getSource().type&&e.dem&&this._backfillDEM(e);this._state.initializeTileState(e,this.map?this.map.painter:null);this._source.fire(new t$jscomp$2.Event("data",{dataType:"source",tile:e,coord:e.tileID}))},i$jscomp$1.prototype._backfillDEM=function(t$jscomp$0){function a$jscomp$0(t,e){t.needsHillshadePrepare=!0;var i=e.tileID.canonical.x-t.tileID.canonical.x,o=e.tileID.canonical.y-t.tileID.canonical.y,r=Math.pow(2,t.tileID.canonical.z),a=e.tileID.key;
0===i&&0===o||1<Math.abs(o)||(1<Math.abs(i)&&(1===Math.abs(i+r)?i+=r:1===Math.abs(i-r)&&(i-=r)),e.dem&&t.dem&&(t.dem.backfillBorder(e.dem,i,o),t.neighboringTiles&&t.neighboringTiles[a]&&(t.neighboringTiles[a].backfilled=!0)))}for(var e$jscomp$0=this.getRenderableIds(),i$jscomp$0=0;i$jscomp$0<e$jscomp$0.length;i$jscomp$0++){var o$jscomp$0=e$jscomp$0[i$jscomp$0];t$jscomp$0.neighboringTiles&&t$jscomp$0.neighboringTiles[o$jscomp$0]&&(o$jscomp$0=this.getTileByID(o$jscomp$0),a$jscomp$0(t$jscomp$0,o$jscomp$0),
a$jscomp$0(o$jscomp$0,t$jscomp$0))}},i$jscomp$1.prototype.getTile=function(t){return this.getTileByID(t.key)},i$jscomp$1.prototype.getTileByID=function(t){return this._tiles[t]},i$jscomp$1.prototype._retainLoadedChildren=function(t,e,i,o){for(var r in this._tiles){var a=this._tiles[r];if(!(o[r]||!a.hasData()||a.tileID.overscaledZ<=e||a.tileID.overscaledZ>i)){for(var n=a.tileID;a&&a.tileID.overscaledZ>e+1;){var s=a.tileID.scaledTo(a.tileID.overscaledZ-1);(a=this._tiles[s.key])&&a.hasData()&&(n=s)}for(a=
n;a.overscaledZ>e;)if(t[(a=a.scaledTo(a.overscaledZ-1)).key]){o[n.key]=n;break}}}},i$jscomp$1.prototype.findLoadedParent=function(t,e){if(t.key in this._loadedParentTiles)return(t=this._loadedParentTiles[t.key])&&t.tileID.overscaledZ>=e?t:null;for(var o=t.overscaledZ-1;o>=e;o--){var r=t.scaledTo(o);if(r=this._getLoadedTile(r))return r}},i$jscomp$1.prototype._getLoadedTile=function(t){var e=this._tiles[t.key];return e&&e.hasData()?e:this._cache.getByKey(t.wrapped().key)},i$jscomp$1.prototype.updateCacheSize=
function(t){t=Math.floor((Math.ceil(t.width/this._source.tileSize)+1)*(Math.ceil(t.height/this._source.tileSize)+1)*5);this._cache.setMaxSize("number"==typeof this._maxTileCacheSize?Math.min(this._maxTileCacheSize,t):t)},i$jscomp$1.prototype.handleWrapJump=function(t){var e=Math.round((t-(void 0===this._prevLng?t:this._prevLng))/360);if(this._prevLng=t,e){t={};for(var o in this._tiles){var r=this._tiles[o];r.tileID=r.tileID.unwrapTo(r.tileID.wrap+e);t[r.tileID.key]=r}for(var a in this._tiles=t,this._timers)clearTimeout(this._timers[a]),
delete this._timers[a];for(var n in this._tiles)this._setTileReloadTimer(n,this._tiles[n])}},i$jscomp$1.prototype.update=function(e$jscomp$0){var o=this;if(this.transform=e$jscomp$0,this._sourceLoaded&&!this._paused){var r;this.updateCacheSize(e$jscomp$0);this.handleWrapJump(this.transform.center.lng);this._coveredTiles={};this.used?this._source.tileID?r=e$jscomp$0.getVisibleUnwrappedCoordinates(this._source.tileID).map(function(e){return new t$jscomp$2.OverscaledTileID(e.canonical.z,e.wrap,e.canonical.z,
e.canonical.x,e.canonical.y)}):(r=e$jscomp$0.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}),this._source.hasTile&&(r=r.filter(function(t){return o._source.hasTile(t)}))):r=[];e$jscomp$0=e$jscomp$0.coveringZoomLevel(this._source);var n=Math.max(e$jscomp$0-i$jscomp$1.maxOverzooming,this._source.minzoom),s=Math.max(e$jscomp$0+i$jscomp$1.maxUnderzooming,this._source.minzoom);
r=this._updateRetainedTiles(r,e$jscomp$0);if(Lt(this._source.type)){for(var c={},u={},h=0,p=Object.keys(r);h<p.length;h+=1){var d=p[h],_=r[d],f=this._tiles[d];!f||f.fadeEndTime&&f.fadeEndTime<=t$jscomp$2.browser.now()||((f=this.findLoadedParent(_,n))&&(this._addTile(f.tileID),c[f.tileID.key]=f.tileID),u[d]=_)}for(var g in this._retainLoadedChildren(u,e$jscomp$0,s,r),c)r[g]||(this._coveredTiles[g]=!0,r[g]=c[g])}for(var v in r)this._tiles[v].clearFadeHold();g=0;for(v=t$jscomp$2.keysDifference(this._tiles,
r);g<v.length;g+=1)e$jscomp$0=v[g],n=this._tiles[e$jscomp$0],n.hasSymbolBuckets&&!n.holdingForFade()?n.setHoldDuration(this.map._fadeDuration):n.hasSymbolBuckets&&!n.symbolFadeFinished()||this._removeTile(e$jscomp$0);this._updateLoadedParentTileCache()}},i$jscomp$1.prototype.releaseSymbolFadeTiles=function(){for(var t in this._tiles)this._tiles[t].holdingForFade()&&this._removeTile(t)},i$jscomp$1.prototype._updateRetainedTiles=function(t,e){for(var o={},r={},a=Math.max(e-i$jscomp$1.maxOverzooming,
this._source.minzoom),n=Math.max(e+i$jscomp$1.maxUnderzooming,this._source.minzoom),s={},l=0;l<t.length;l+=1){var u=t[l],h=this._addTile(u);o[u.key]=u;h.hasData()||e<this._source.maxzoom&&(s[u.key]=u)}this._retainLoadedChildren(s,e,n,o);for(n=0;n<t.length;n+=1)if(s=t[n],l=this._tiles[s.key],!l.hasData()){if(e+1>this._source.maxzoom){if(u=s.children(this._source.maxzoom)[0],(h=this.getTile(u))&&h.hasData()){o[u.key]=u;continue}}else if(u=s.children(this._source.maxzoom),o[u[0].key]&&o[u[1].key]&&o[u[2].key]&&
o[u[3].key])continue;u=l.wasRequested();for(h=s.overscaledZ-1;h>=a;--h){var b=s.scaledTo(h);if(r[b.key])break;if(r[b.key]=!0,!(l=this.getTile(b))&&u&&(l=this._addTile(b)),l&&(o[b.key]=b,u=l.wasRequested(),l.hasData()))break}}return o},i$jscomp$1.prototype._updateLoadedParentTileCache=function(){for(var t in this._loadedParentTiles={},this._tiles){for(var e=[],i=void 0,o=this._tiles[t].tileID;0<o.overscaledZ;){if(o.key in this._loadedParentTiles){i=this._loadedParentTiles[o.key];break}e.push(o.key);
o=o.scaledTo(o.overscaledZ-1);if(i=this._getLoadedTile(o))break}for(o=0;o<e.length;o+=1)this._loadedParentTiles[e[o]]=i}},i$jscomp$1.prototype._addTile=function(e){var i=this._tiles[e.key];if(i)return i;(i=this._cache.getAndRemove(e))&&(this._setTileReloadTimer(e.key,i),i.tileID=e,this._state.initializeTileState(i,this.map?this.map.painter:null),this._cacheTimers[e.key]&&(clearTimeout(this._cacheTimers[e.key]),delete this._cacheTimers[e.key],this._setTileReloadTimer(e.key,i)));var o=!!i;return o||
(i=new t$jscomp$2.Tile(e,this._source.tileSize*e.overscaleFactor()),this._loadTile(i,this._tileLoaded.bind(this,i,e.key,i.state))),i?(i.uses++,this._tiles[e.key]=i,o||this._source.fire(new t$jscomp$2.Event("dataloading",{tile:i,coord:i.tileID,dataType:"source"})),i):null},i$jscomp$1.prototype._setTileReloadTimer=function(t,e){var i=this;t in this._timers&&(clearTimeout(this._timers[t]),delete this._timers[t]);(e=e.getExpiryTimeout())&&(this._timers[t]=setTimeout(function(){i._reloadTile(t,"expired");
delete i._timers[t]},e))},i$jscomp$1.prototype._removeTile=function(t){var e=this._tiles[t];e&&(e.uses--,delete this._tiles[t],this._timers[t]&&(clearTimeout(this._timers[t]),delete this._timers[t]),0<e.uses||(e.hasData()&&"reloading"!==e.state?this._cache.add(e.tileID,e,e.getExpiryTimeout()):(e.aborted=!0,this._abortTile(e),this._unloadTile(e))))},i$jscomp$1.prototype.clearTiles=function(){for(var t in this._shouldReloadOnResume=!1,this._paused=!1,this._tiles)this._removeTile(t);this._cache.reset()},
i$jscomp$1.prototype.tilesIn=function(e$jscomp$0,i,o){var r=this,a=[],n=this.transform;if(!n)return a;o=o?n.getCameraQueryGeometry(e$jscomp$0):e$jscomp$0;var l=e$jscomp$0.map(function(t){return n.pointCoordinate(t)}),c=o.map(function(t){return n.pointCoordinate(t)}),u=this.getIds(),h=1/0,p=1/0,d=-1/0,_=-1/0;for(e$jscomp$0=0;e$jscomp$0<c.length;e$jscomp$0+=1)o=c[e$jscomp$0],h=Math.min(h,o.x),p=Math.min(p,o.y),d=Math.max(d,o.x),_=Math.max(_,o.y);e$jscomp$0=function(e){e=r._tiles[u[e]];if(!e.holdingForFade()){var s=
e.tileID,f=Math.pow(2,n.zoom-e.tileID.overscaledZ),m=i*e.queryPadding*t$jscomp$2.EXTENT/e.tileSize/f,g=[s.getTilePoint(new t$jscomp$2.MercatorCoordinate(h,p)),s.getTilePoint(new t$jscomp$2.MercatorCoordinate(d,_))];g[0].x-m<t$jscomp$2.EXTENT&&g[0].y-m<t$jscomp$2.EXTENT&&0<=g[1].x+m&&0<=g[1].y+m&&(m=l.map(function(t){return s.getTilePoint(t)}),g=c.map(function(t){return s.getTilePoint(t)}),a.push({tile:e,tileID:s,queryGeometry:m,cameraQueryGeometry:g,scale:f}))}};for(o=0;o<u.length;o++)e$jscomp$0(o);
return a},i$jscomp$1.prototype.getVisibleCoordinates=function(t$jscomp$0){var e=this;t$jscomp$0=this.getRenderableIds(t$jscomp$0).map(function(t){return e._tiles[t].tileID});for(var o=0;o<t$jscomp$0.length;o+=1){var a=t$jscomp$0[o];a.posMatrix=this.transform.calculatePosMatrix(a.toUnwrapped())}return t$jscomp$0},i$jscomp$1.prototype.hasTransition=function(){if(this._source.hasTransition())return!0;if(Lt(this._source.type))for(var e in this._tiles){var i=this._tiles[e];if(void 0!==i.fadeEndTime&&i.fadeEndTime>=
t$jscomp$2.browser.now())return!0}return!1},i$jscomp$1.prototype.setFeatureState=function(t,e,i){this._state.updateState(t||"_geojsonTileLayer",e,i)},i$jscomp$1.prototype.removeFeatureState=function(t,e,i){this._state.removeFeatureState(t||"_geojsonTileLayer",e,i)},i$jscomp$1.prototype.getFeatureState=function(t,e){return this._state.getState(t||"_geojsonTileLayer",e)},i$jscomp$1.prototype.setDependencies=function(t,e,i){(t=this._tiles[t])&&t.setDependencies(e,i)},i$jscomp$1.prototype.reloadTilesForDependencies=
function(t,e){for(var i$jscomp$0 in this._tiles)this._tiles[i$jscomp$0].hasDependency(t,e)&&this._reloadTile(i$jscomp$0,"reloading");this._cache.filter(function(i){return!i.hasDependency(t,e)})},i$jscomp$1}(t$jscomp$2.Evented);Dt.maxOverzooming=10;Dt.maxUnderzooming=3;var kt=function(){this.active={}};kt.prototype.acquire=function(t){if(!this.workers)for(this.workers=[];this.workers.length<kt.workerCount;)this.workers.push(new At);return this.active[t]=!0,this.workers.slice()};kt.prototype.release=
function(t$jscomp$0){delete this.active[t$jscomp$0];0===this.numActive()&&(this.workers.forEach(function(t){t.terminate()}),this.workers=null)};kt.prototype.isPreloaded=function(){return!!this.active.mapboxgl_preloaded_worker_pool};kt.prototype.numActive=function(){return Object.keys(this.active).length};var Bt;kt.workerCount=Math.max(Math.min(Math.floor(t$jscomp$2.browser.hardwareConcurrency/2),6),1);var Zt={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",
setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight"},Kt=function(t,e){this.reset(t,e)};Kt.prototype.reset=function(t,e){this.points=t||[];this._distances=
[0];for(t=1;t<this.points.length;t++)this._distances[t]=this._distances[t-1]+this.points[t].dist(this.points[t-1]);this.length=this._distances[this._distances.length-1];this.padding=Math.min(e||0,.5*this.length);this.paddedLength=this.length-2*this.padding};Kt.prototype.lerp=function(e){if(1===this.points.length)return this.points[0];e=t$jscomp$2.clamp(e,0,1);for(var i=1,o=this._distances[i],r=e*this.paddedLength+this.padding;o<r&&i<this._distances.length;)o=this._distances[++i];e=i-1;var n=this._distances[e];
o-=n;o=0<o?(r-n)/o:0;return this.points[e].mult(1-o).add(this.points[i].mult(o))};var Yt=function(t,e,i){var o=this.boxCells=[],r=this.circleCells=[];this.xCellCount=Math.ceil(t/i);this.yCellCount=Math.ceil(e/i);for(i=0;i<this.xCellCount*this.yCellCount;i++)o.push([]),r.push([]);this.circleKeys=[];this.boxKeys=[];this.bboxes=[];this.circles=[];this.width=t;this.height=e;this.xScale=this.xCellCount/t;this.yScale=this.yCellCount/e;this.circleUid=this.boxUid=0};Yt.prototype.keysLength=function(){return this.boxKeys.length+
this.circleKeys.length};Yt.prototype.insert=function(t,e,i,o,r){this._forEachCell(e,i,o,r,this._insertBoxCell,this.boxUid++);this.boxKeys.push(t);this.bboxes.push(e);this.bboxes.push(i);this.bboxes.push(o);this.bboxes.push(r)};Yt.prototype.insertCircle=function(t,e,i,o){this._forEachCell(e-o,i-o,e+o,i+o,this._insertCircleCell,this.circleUid++);this.circleKeys.push(t);this.circles.push(e);this.circles.push(i);this.circles.push(o)};Yt.prototype._insertBoxCell=function(t,e,i,o,r,a){this.boxCells[r].push(a)};
Yt.prototype._insertCircleCell=function(t,e,i,o,r,a){this.circleCells[r].push(a)};Yt.prototype._query=function(t,e,i,o,r,a){if(0>i||t>this.width||0>o||e>this.height)return!r&&[];var n=[];if(0>=t&&0>=e&&this.width<=i&&this.height<=o){if(r)return!0;for(t=0;t<this.boxKeys.length;t++)n.push({key:this.boxKeys[t],x1:this.bboxes[4*t],y1:this.bboxes[4*t+1],x2:this.bboxes[4*t+2],y2:this.bboxes[4*t+3]});for(t=0;t<this.circleKeys.length;t++)e=this.circles[3*t],i=this.circles[3*t+1],o=this.circles[3*t+2],n.push({key:this.circleKeys[t],
x1:e-o,y1:i-o,x2:e+o,y2:i+o});return a?n.filter(a):n}return this._forEachCell(t,e,i,o,this._queryCell,n,{hitTest:r,seenUids:{box:{},circle:{}}},a),r?0<n.length:n};Yt.prototype._queryCircle=function(t,e,i,o,r){var a=t-i,n=t+i,s=e-i,l=e+i;if(0>n||a>this.width||0>l||s>this.height)return!o&&[];var c=[];return this._forEachCell(a,s,n,l,this._queryCellCircle,c,{hitTest:o,circle:{x:t,y:e,radius:i},seenUids:{box:{},circle:{}}},r),o?0<c.length:c};Yt.prototype.query=function(t,e,i,o,r){return this._query(t,
e,i,o,!1,r)};Yt.prototype.hitTest=function(t,e,i,o,r){return this._query(t,e,i,o,!0,r)};Yt.prototype.hitTestCircle=function(t,e,i,o){return this._queryCircle(t,e,i,!0,o)};Yt.prototype._queryCell=function(t,e,i,o,r,a,n,s){var l=n.seenUids,c=this.boxCells[r];if(null!==c)for(var u=this.bboxes,h=0;h<c.length;h+=1){var d=c[h];if(!l.box[d]){l.box[d]=!0;var _=4*d;if(t<=u[_+2]&&e<=u[_+3]&&i>=u[_+0]&&o>=u[_+1]&&(!s||s(this.boxKeys[d]))){if(n.hitTest)return a.push(!0),!0;a.push({key:this.boxKeys[d],x1:u[_],
y1:u[_+1],x2:u[_+2],y2:u[_+3]})}}}r=this.circleCells[r];if(null!==r)for(c=this.circles,u=0;u<r.length;u+=1)if(h=r[u],!l.circle[h]){l.circle[h]=!0;var x=3*h;if(this._circleAndRectCollide(c[x],c[x+1],c[x+2],t,e,i,o)&&(!s||s(this.circleKeys[h]))){if(n.hitTest)return a.push(!0),!0;d=c[x];_=c[x+1];x=c[x+2];a.push({key:this.circleKeys[h],x1:d-x,y1:_-x,x2:d+x,y2:_+x})}}};Yt.prototype._queryCellCircle=function(t,e,i,o,r,a,n,s){t=n.circle;n=n.seenUids;e=this.boxCells[r];if(null!==e)for(i=this.bboxes,o=0;o<
e.length;o+=1){var _=e[o];if(!n.box[_]){n.box[_]=!0;var f=4*_;if(this._circleAndRectCollide(t.x,t.y,t.radius,i[f+0],i[f+1],i[f+2],i[f+3])&&(!s||s(this.boxKeys[_])))return a.push(!0),!0}}r=this.circleCells[r];if(null!==r)for(e=this.circles,i=0;i<r.length;i+=1)if(o=r[i],!n.circle[o]&&(n.circle[o]=!0,_=3*o,this._circlesCollide(e[_],e[_+1],e[_+2],t.x,t.y,t.radius)&&(!s||s(this.circleKeys[o]))))return a.push(!0),!0};Yt.prototype._forEachCell=function(t,e,i,o,r,a,n,s){for(var l=this._convertToXCellCoord(t),
c=this._convertToYCellCoord(e),u=this._convertToXCellCoord(i),h=this._convertToYCellCoord(o);l<=u;l++)for(var d=c;d<=h;d++)if(r.call(this,t,e,i,o,this.xCellCount*d+l,a,n,s))return};Yt.prototype._convertToXCellCoord=function(t){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(t*this.xScale)))};Yt.prototype._convertToYCellCoord=function(t){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(t*this.yScale)))};Yt.prototype._circlesCollide=function(t,e,i,o,r,a){t=o-t;e=r-e;i+=a;return i*i>t*
t+e*e};Yt.prototype._circleAndRectCollide=function(t,e,i,o,r,a,n){a=(a-o)/2;t=Math.abs(t-(o+a));if(t>a+i)return!1;n=(n-r)/2;e=Math.abs(e-(r+n));if(e>n+i)return!1;if(t<=a||e<=n)return!0;r=t-a;e-=n;return r*r+e*e<=i*i};var le=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]),he=function(t,e,i){void 0===e&&(e=new Yt(t.width+200,t.height+200,25));void 0===i&&(i=new Yt(t.width+200,t.height+200,25));this.transform=t;this.grid=e;this.ignoredGrid=i;this.pitchfactor=Math.cos(t._pitch)*t.cameraToCenterDistance;
this.screenRightBoundary=t.width+100;this.screenBottomBoundary=t.height+100;this.gridRightBoundary=t.width+200;this.gridBottomBoundary=t.height+200};he.prototype.placeCollisionBox=function(t,e,i,o,r){o=this.projectAndGetPerspectiveRatio(o,t.anchorPointX,t.anchorPointY);var n=i*o.perspectiveRatio;i=t.x1*n+o.point.x;var l=t.y1*n+o.point.y,c=t.x2*n+o.point.x;t=t.y2*n+o.point.y;return!this.isInsideGrid(i,l,c,t)||!e&&this.grid.hitTest(i,l,c,t,r)?{box:[],offscreen:!1}:{box:[i,l,c,t],offscreen:this.isOffscreen(i,
l,c,t)}};he.prototype.placeCollisionCircles=function(e,i,o,r,a,n,s,l,c,u,h,p,d){var _=[],f=new t$jscomp$2.Point(i.anchorX,i.anchorY);n=$t(f,n);n=.5+this.transform.cameraToCenterDistance/n.signedDistanceFromCamera*.5;a=(u?a/n:a*n)/t$jscomp$2.ONE_EM;u=$t(f,s).point;a=oe(a,r,i.lineOffsetX*a,i.lineOffsetY*a,!1,u,f,i,o,s,{});o=i=!1;r=!0;if(a){p=.5*p*n+d;s=new t$jscomp$2.Point(-100,-100);f=new t$jscomp$2.Point(this.screenRightBoundary,this.screenBottomBoundary);d=new Kt;n=a.first;u=a.last;a=[];for(var M=
n.path.length-1;1<=M;M--)a.push(n.path[M]);for(n=1;n<u.path.length;n++)a.push(u.path[n]);n=2.5*p;l&&(a=a.map(function(t){return $t(t,l)}),a=a.some(function(t){return 0>=t.signedDistanceFromCamera})?[]:a.map(function(t){return t.point}));u=[];if(0<a.length){u=a[0].clone();M=a[0].clone();for(var F=1;F<a.length;F++)u.x=Math.min(u.x,a[F].x),u.y=Math.min(u.y,a[F].y),M.x=Math.max(M.x,a[F].x),M.y=Math.max(M.y,a[F].y);u=u.x>=s.x&&M.x<=f.x&&u.y>=s.y&&M.y<=f.y?[a]:M.x<s.x||u.x>f.x||M.y<s.y||u.y>f.y?[]:t$jscomp$2.clipLine([a],
s.x,s.y,f.x,f.y)}s=0;for(f=u;s<f.length;s+=1)for(d.reset(f[s],.25*p),a=d.length<=.5*p?1:Math.ceil(d.paddedLength/n)+1,u=0;u<a;u++){F=d.lerp(u/Math.max(a-1,1));M=F.x+100;F=F.y+100;_.push(M,F,p,0);var X=M-p,H=F-p,K=M+p,Y=F+p;if(r=r&&this.isOffscreen(X,H,K,Y),o=o||this.isInsideGrid(X,H,K,Y),!e&&this.grid.hitTestCircle(M,F,p,h)&&(i=!0,!c))return{circles:[],offscreen:!1,collisionDetected:i}}}return{circles:!c&&i||!o?[]:_,offscreen:r,collisionDetected:i}};he.prototype.queryRenderedSymbols=function(e){if(0===
e.length||0===this.grid.keysLength()&&0===this.ignoredGrid.keysLength())return{};for(var i=[],o=1/0,r=1/0,a=-1/0,n=-1/0,s=0;s<e.length;s+=1){var c=e[s];c=new t$jscomp$2.Point(c.x+100,c.y+100);o=Math.min(o,c.x);r=Math.min(r,c.y);a=Math.max(a,c.x);n=Math.max(n,c.y);i.push(c)}e={};s={};c=0;for(o=this.grid.query(o,r,a,n).concat(this.ignoredGrid.query(o,r,a,n));c<o.length;c+=1)a=o[c],r=a.key,(void 0===e[r.bucketInstanceId]&&(e[r.bucketInstanceId]={}),e[r.bucketInstanceId][r.featureIndex])||(a=[new t$jscomp$2.Point(a.x1,
a.y1),new t$jscomp$2.Point(a.x2,a.y1),new t$jscomp$2.Point(a.x2,a.y2),new t$jscomp$2.Point(a.x1,a.y2)],t$jscomp$2.polygonIntersectsPolygon(i,a)&&(e[r.bucketInstanceId][r.featureIndex]=!0,void 0===s[r.bucketInstanceId]&&(s[r.bucketInstanceId]=[]),s[r.bucketInstanceId].push(r.featureIndex)));return s};he.prototype.insertCollisionBox=function(t,e,i,o,r){(e?this.ignoredGrid:this.grid).insert({bucketInstanceId:i,featureIndex:o,collisionGroupID:r},t[0],t[1],t[2],t[3])};he.prototype.insertCollisionCircles=
function(t,e,i,o,r){e=e?this.ignoredGrid:this.grid;i={bucketInstanceId:i,featureIndex:o,collisionGroupID:r};for(o=0;o<t.length;o+=4)e.insertCircle(i,t[o],t[o+1],t[o+2])};he.prototype.projectAndGetPerspectiveRatio=function(e,i,o){i=[i,o,0,1];return ue(i,i,e),{point:new t$jscomp$2.Point((i[0]/i[3]+1)/2*this.transform.width+100,(-i[1]/i[3]+1)/2*this.transform.height+100),perspectiveRatio:.5+this.transform.cameraToCenterDistance/i[3]*.5}};he.prototype.isOffscreen=function(t,e,i,o){return 100>i||t>=this.screenRightBoundary||
100>o||e>this.screenBottomBoundary};he.prototype.isInsideGrid=function(t,e,i,o){return 0<=i&&t<this.gridRightBoundary&&0<=o&&e<this.gridBottomBoundary};he.prototype.getViewportMatrix=function(){var e=t$jscomp$2.identity([]);return t$jscomp$2.translate(e,e,[-100,-100,0]),e};var de=function(t,e,i,o){this.opacity=t?Math.max(0,Math.min(1,t.opacity+(t.placed?e:-e))):o&&i?1:0;this.placed=i};de.prototype.isHidden=function(){return 0===this.opacity&&!this.placed};var _e=function(t,e,i,o,r){this.text=new de(t?
t.text:null,e,i,r);this.icon=new de(t?t.icon:null,e,o,r)};_e.prototype.isHidden=function(){return this.text.isHidden()&&this.icon.isHidden()};var fe=function(t,e,i){this.text=t;this.icon=e;this.skipFade=i},me=function(){this.invProjMatrix=t$jscomp$2.create();this.viewportMatrix=t$jscomp$2.create();this.circles=[]},ge=function(t,e,i,o,r){this.bucketInstanceId=t;this.featureIndex=e;this.sourceLayerIndex=i;this.bucketIndex=o;this.tileID=r},ve=function(t){this.crossSourceCollisions=t;this.maxGroupID=
0;this.collisionGroups={}};ve.prototype.get=function(t$jscomp$0){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[t$jscomp$0]){var e=++this.maxGroupID;this.collisionGroups[t$jscomp$0]={ID:e,predicate:function(t){return t.collisionGroupID===e}}}return this.collisionGroups[t$jscomp$0]};var be=function(t,e,i,o){this.transform=t.clone();this.collisionIndex=new he(this.transform);this.placements={};this.opacities={};this.variableOffsets={};this.stale=!1;this.commitTime=
0;this.fadeDuration=e;this.retainedQueryData={};this.collisionGroups=new ve(i);this.collisionCircleArrays={};(this.prevPlacement=o)&&(o.prevPlacement=void 0);this.placedOrientations={}};be.prototype.getBucketParts=function(e,i,o,r){var a=o.getBucket(i),n=o.latestFeatureIndex;if(a&&n&&i.id===a.layerIds[0]){i=o.collisionBoxArray;var l=a.layers[0].layout,c=Math.pow(2,this.transform.zoom-o.tileID.overscaledZ),u=o.tileSize/t$jscomp$2.EXTENT,h=this.transform.calculatePosMatrix(o.tileID.toUnwrapped()),p=
"map"===l.get("text-pitch-alignment"),d="map"===l.get("text-rotation-alignment"),_=pe(o,1,this.transform.zoom),f=Jt(h,p,d,this.transform,_),m=null;p&&(p=Qt(h,p,d,this.transform,_),m=t$jscomp$2.multiply([],this.transform.labelPlaneMatrix,p));this.retainedQueryData[a.bucketInstanceId]=new ge(a.bucketInstanceId,n,a.sourceLayerIndex,a.index,o.tileID);o={bucket:a,layout:l,posMatrix:h,textLabelPlaneMatrix:f,labelToScreenMatrix:m,scale:c,textPixelRatio:u,holdingForFade:o.holdingForFade(),collisionBoxArray:i,
partiallyEvaluatedTextSize:t$jscomp$2.evaluateSizeForZoom(a.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(a.sourceID)};if(r)for(r=0,a=a.sortKeyRanges;r<a.length;r+=1)n=a[r],e.push({sortKey:n.sortKey,symbolInstanceStart:n.symbolInstanceStart,symbolInstanceEnd:n.symbolInstanceEnd,parameters:o});else e.push({symbolInstanceStart:0,symbolInstanceEnd:a.symbolInstances.length,parameters:o})}};be.prototype.attemptAnchorPlacement=function(t,e,i,o,r,a,n,s,l,c,u,h,p,d,_){var f,m=
[h.textOffset0,h.textOffset1],g=ye(t,i,o,m,r);e=this.collisionIndex.placeCollisionBox(xe(e,g.x,g.y,a,n,this.transform.angle),u,s,l,c.predicate);if(!_||0!==this.collisionIndex.placeCollisionBox(xe(_,g.x,g.y,a,n,this.transform.angle),u,s,l,c.predicate).box.length)return 0<e.box.length?(this.prevPlacement&&this.prevPlacement.variableOffsets[h.crossTileID]&&this.prevPlacement.placements[h.crossTileID]&&this.prevPlacement.placements[h.crossTileID].text&&(f=this.prevPlacement.variableOffsets[h.crossTileID].anchor),
this.variableOffsets[h.crossTileID]={textOffset:m,width:i,height:o,anchor:t,textBoxScale:r,prevAnchor:f},this.markUsedJustification(p,t,h,d),p.allowVerticalPlacement&&(this.markUsedOrientation(p,d,h),this.placedOrientations[h.crossTileID]=d),{shift:g,placedGlyphBoxes:e}):void 0};be.prototype.placeLayerBucketPart=function(e$jscomp$0,i$jscomp$0,o$jscomp$0){var r$jscomp$0=this,a$jscomp$1=e$jscomp$0.parameters,n=a$jscomp$1.bucket,s$jscomp$0=a$jscomp$1.layout,l=a$jscomp$1.posMatrix,c$jscomp$0=a$jscomp$1.textLabelPlaneMatrix,
u=a$jscomp$1.labelToScreenMatrix,h=a$jscomp$1.textPixelRatio,p$jscomp$0=a$jscomp$1.holdingForFade,d$jscomp$1=a$jscomp$1.collisionBoxArray,_$jscomp$0=a$jscomp$1.partiallyEvaluatedTextSize,f=a$jscomp$1.collisionGroup,m$jscomp$0=s$jscomp$0.get("text-optional"),g=s$jscomp$0.get("icon-optional"),v=s$jscomp$0.get("text-allow-overlap"),y=s$jscomp$0.get("icon-allow-overlap"),x="map"===s$jscomp$0.get("text-rotation-alignment"),b="map"===s$jscomp$0.get("text-pitch-alignment"),w="none"!==s$jscomp$0.get("icon-text-fit");
a$jscomp$1="viewport-y"===s$jscomp$0.get("symbol-z-order");var E=v&&(y||!n.hasIconData()||g),I=y&&(v||!n.hasTextData()||m$jscomp$0);!n.collisionArrays&&d$jscomp$1&&n.deserializeCollisionBoxes(d$jscomp$1);d$jscomp$1=function(e,a$jscomp$0){if(!i$jscomp$0[e.crossTileID])if(p$jscomp$0)r$jscomp$0.placements[e.crossTileID]=new fe(!1,!1,!1);else{var d$jscomp$0,T=!1,P=!1,S=!0,C=null,z={box:null,offscreen:null},D={box:null,offscreen:null},M=null,L=null,A=0,R=0,k=0;a$jscomp$0.textFeatureIndex?A=a$jscomp$0.textFeatureIndex:
e.useRuntimeCollisionCircles&&(A=e.featureIndex);a$jscomp$0.verticalTextFeatureIndex&&(R=a$jscomp$0.verticalTextFeatureIndex);var B=a$jscomp$0.textBox;if(B){var O=function(i){var o=t$jscomp$2.WritingMode.horizontal;n.allowVerticalPlacement&&!i&&r$jscomp$0.prevPlacement&&(i=r$jscomp$0.prevPlacement.placedOrientations[e.crossTileID])&&(r$jscomp$0.placedOrientations[e.crossTileID]=i,r$jscomp$0.markUsedOrientation(n,o=i,e));return o};S=function(i,o){if(n.allowVerticalPlacement&&0<e.numVerticalGlyphVertices&&
a$jscomp$0.verticalTextBox)for(var r=0,s=n.writingModes;r<s.length&&(s[r]===t$jscomp$2.WritingMode.vertical?(z=o(),D=z):z=i(),!(z&&z.box&&z.box.length));r+=1);else z=i()};if(s$jscomp$0.get("text-variable-anchor")){var U=s$jscomp$0.get("text-variable-anchor");if(r$jscomp$0.prevPlacement&&r$jscomp$0.prevPlacement.variableOffsets[e.crossTileID]){var N=r$jscomp$0.prevPlacement.variableOffsets[e.crossTileID];0<U.indexOf(N.anchor)&&(U=U.filter(function(t){return t!==N.anchor})).unshift(N.anchor)}var Z=
function(t,i,o){var a=t.x2-t.x1,s=t.y2-t.y1,c=e.textBoxScale;i=w&&!y?i:null;for(var p={box:[],offscreen:!1},d=v?2*U.length:U.length,_=0;_<d;++_){var m=r$jscomp$0.attemptAnchorPlacement(U[_%U.length],t,a,s,c,x,b,h,l,f,_>=U.length,e,n,o,i);if(m&&(p=m.placedGlyphBoxes)&&p.box&&p.box.length){T=!0;C=m.shift;break}}return p};S(function(){return Z(B,a$jscomp$0.iconBox,t$jscomp$2.WritingMode.horizontal)},function(){var i=a$jscomp$0.verticalTextBox;return n.allowVerticalPlacement&&!(z&&z.box&&z.box.length)&&
0<e.numVerticalGlyphVertices&&i?Z(i,a$jscomp$0.verticalIconBox,t$jscomp$2.WritingMode.vertical):{box:null,offscreen:null}});z&&(T=z.box,S=z.offscreen);S=O(z&&z.box);!T&&r$jscomp$0.prevPlacement&&(O=r$jscomp$0.prevPlacement.variableOffsets[e.crossTileID])&&(r$jscomp$0.variableOffsets[e.crossTileID]=O,r$jscomp$0.markUsedJustification(n,O.anchor,e,S))}else{var V=function(t,i){t=r$jscomp$0.collisionIndex.placeCollisionBox(t,v,h,l,f.predicate);return t&&t.box&&t.box.length&&(r$jscomp$0.markUsedOrientation(n,
i,e),r$jscomp$0.placedOrientations[e.crossTileID]=i),t};S(function(){return V(B,t$jscomp$2.WritingMode.horizontal)},function(){var i=a$jscomp$0.verticalTextBox;return n.allowVerticalPlacement&&0<e.numVerticalGlyphVertices&&i?V(i,t$jscomp$2.WritingMode.vertical):{box:null,offscreen:null}});O(z&&z.box&&z.box.length)}}if(T=(d$jscomp$0=z)&&d$jscomp$0.box&&0<d$jscomp$0.box.length,S=d$jscomp$0&&d$jscomp$0.offscreen,e.useRuntimeCollisionCircles){M=n.text.placedSymbolArray.get(e.centerJustifiedTextSymbolIndex);
O=t$jscomp$2.evaluateSizeForFeature(n.textSizeData,_$jscomp$0,M);var X=s$jscomp$0.get("text-padding");M=r$jscomp$0.collisionIndex.placeCollisionCircles(v,M,n.lineVertexArray,n.glyphOffsetArray,O,l,c$jscomp$0,u,o$jscomp$0,b,f.predicate,e.collisionCircleDiameter,X);T=v||0<M.circles.length&&!M.collisionDetected;S=S&&M.offscreen}if(a$jscomp$0.iconFeatureIndex&&(k=a$jscomp$0.iconFeatureIndex),a$jscomp$0.iconBox)P=function(t){t=w&&C?xe(t,C.x,C.y,x,b,r$jscomp$0.transform.angle):t;return r$jscomp$0.collisionIndex.placeCollisionBox(t,
y,h,l,f.predicate)},P=D&&D.box&&D.box.length&&a$jscomp$0.verticalIconBox?0<(L=P(a$jscomp$0.verticalIconBox)).box.length:0<(L=P(a$jscomp$0.iconBox)).box.length,S=S&&L.offscreen;O=m$jscomp$0||0===e.numHorizontalGlyphVertices&&0===e.numVerticalGlyphVertices;X=g||0===e.numIconVertices;if(O||X?X?O||(P=P&&T):T=P&&T:P=T=P&&T,T&&d$jscomp$0&&d$jscomp$0.box&&r$jscomp$0.collisionIndex.insertCollisionBox(d$jscomp$0.box,s$jscomp$0.get("text-ignore-placement"),n.bucketInstanceId,D&&D.box&&R?R:A,f.ID),P&&L&&r$jscomp$0.collisionIndex.insertCollisionBox(L.box,
s$jscomp$0.get("icon-ignore-placement"),n.bucketInstanceId,k,f.ID),M&&(T&&r$jscomp$0.collisionIndex.insertCollisionCircles(M.circles,s$jscomp$0.get("text-ignore-placement"),n.bucketInstanceId,A,f.ID),o$jscomp$0))for(L=n.bucketInstanceId,d$jscomp$0=r$jscomp$0.collisionCircleArrays[L],void 0===d$jscomp$0&&(d$jscomp$0=r$jscomp$0.collisionCircleArrays[L]=new me),L=0;L<M.circles.length;L+=4)d$jscomp$0.circles.push(M.circles[L+0]),d$jscomp$0.circles.push(M.circles[L+1]),d$jscomp$0.circles.push(M.circles[L+
2]),d$jscomp$0.circles.push(M.collisionDetected?1:0);r$jscomp$0.placements[e.crossTileID]=new fe(T||E,P||I,S||n.justReloaded);i$jscomp$0[e.crossTileID]=!0}};if(a$jscomp$1)for(e$jscomp$0=n.getSortedSymbolIndexes(this.transform.angle),a$jscomp$1=e$jscomp$0.length-1;0<=a$jscomp$1;--a$jscomp$1){var z$jscomp$0=e$jscomp$0[a$jscomp$1];d$jscomp$1(n.symbolInstances.get(z$jscomp$0),n.collisionArrays[z$jscomp$0])}else for(a$jscomp$1=e$jscomp$0.symbolInstanceStart;a$jscomp$1<e$jscomp$0.symbolInstanceEnd;a$jscomp$1++)d$jscomp$1(n.symbolInstances.get(a$jscomp$1),
n.collisionArrays[a$jscomp$1]);o$jscomp$0&&n.bucketInstanceId in this.collisionCircleArrays&&(d$jscomp$1=this.collisionCircleArrays[n.bucketInstanceId],t$jscomp$2.invert(d$jscomp$1.invProjMatrix,l),d$jscomp$1.viewportMatrix=this.collisionIndex.getViewportMatrix());n.justReloaded=!1};be.prototype.markUsedJustification=function(e,i,o,r){i=r===t$jscomp$2.WritingMode.vertical?o.verticalPlacedTextSymbolIndex:{left:o.leftJustifiedTextSymbolIndex,center:o.centerJustifiedTextSymbolIndex,right:o.rightJustifiedTextSymbolIndex}[t$jscomp$2.getAnchorJustification(i)];
r=0;for(var s=[o.leftJustifiedTextSymbolIndex,o.centerJustifiedTextSymbolIndex,o.rightJustifiedTextSymbolIndex,o.verticalPlacedTextSymbolIndex];r<s.length;r+=1){var l=s[r];0<=l&&(e.text.placedSymbolArray.get(l).crossTileID=0<=i&&l!==i?0:o.crossTileID)}};be.prototype.markUsedOrientation=function(e,i,o){var r=i===t$jscomp$2.WritingMode.horizontal||i===t$jscomp$2.WritingMode.horizontalOnly?i:0;i=i===t$jscomp$2.WritingMode.vertical?i:0;for(var n=0,s=[o.leftJustifiedTextSymbolIndex,o.centerJustifiedTextSymbolIndex,
o.rightJustifiedTextSymbolIndex];n<s.length;n+=1)e.text.placedSymbolArray.get(s[n]).placedOrientation=r;o.verticalPlacedTextSymbolIndex&&(e.text.placedSymbolArray.get(o.verticalPlacedTextSymbolIndex).placedOrientation=i)};be.prototype.commit=function(t){this.commitTime=t;this.zoomAtLastRecencyCheck=this.transform.zoom;var e=this.prevPlacement,i=!1;this.prevZoomAdjustment=e?e.zoomAdjustment(this.transform.zoom):0;var o=e?e.symbolFadeChange(t):1,r=e?e.opacities:{},a=e?e.variableOffsets:{},n=e?e.placedOrientations:
{};for(s in this.placements){var l=this.placements[s],c=r[s];c?(this.opacities[s]=new _e(c,o,l.text,l.icon),i=i||l.text!==c.text.placed||l.icon!==c.icon.placed):(this.opacities[s]=new _e(null,o,l.text,l.icon,l.skipFade),i=i||l.text||l.icon)}for(var u in r){var s=r[u];this.opacities[u]||(l=new _e(s,o,!1,!1),l.isHidden()||(this.opacities[u]=l,i=i||s.text.placed||s.icon.placed))}for(var d in a)this.variableOffsets[d]||!this.opacities[d]||this.opacities[d].isHidden()||(this.variableOffsets[d]=a[d]);for(var _ in n)this.placedOrientations[_]||
!this.opacities[_]||this.opacities[_].isHidden()||(this.placedOrientations[_]=n[_]);i?this.lastPlacementChangeTime=t:"number"!=typeof this.lastPlacementChangeTime&&(this.lastPlacementChangeTime=e?e.lastPlacementChangeTime:t)};be.prototype.updateLayerOpacities=function(t,e){for(var i={},o=0;o<e.length;o+=1){var a=e[o],n=a.getBucket(t);n&&a.latestFeatureIndex&&t.id===n.layerIds[0]&&this.updateBucketOpacities(n,i,a.collisionBoxArray)}};be.prototype.updateBucketOpacities=function(e$jscomp$0,i$jscomp$0,
o$jscomp$0){var r=this;e$jscomp$0.hasTextData()&&e$jscomp$0.text.opacityVertexArray.clear();e$jscomp$0.hasIconData()&&e$jscomp$0.icon.opacityVertexArray.clear();e$jscomp$0.hasIconCollisionBoxData()&&e$jscomp$0.iconCollisionBox.collisionVertexArray.clear();e$jscomp$0.hasTextCollisionBoxData()&&e$jscomp$0.textCollisionBox.collisionVertexArray.clear();var a$jscomp$0=e$jscomp$0.layers[0].layout,n=new _e(null,0,!1,!1,!0),s$jscomp$0=a$jscomp$0.get("text-allow-overlap"),l$jscomp$0=a$jscomp$0.get("icon-allow-overlap"),
c=a$jscomp$0.get("text-variable-anchor"),u="map"===a$jscomp$0.get("text-rotation-alignment"),h="map"===a$jscomp$0.get("text-pitch-alignment"),p="none"!==a$jscomp$0.get("icon-text-fit"),d=new _e(null,0,s$jscomp$0&&(l$jscomp$0||!e$jscomp$0.hasIconData()||a$jscomp$0.get("icon-optional")),l$jscomp$0&&(s$jscomp$0||!e$jscomp$0.hasTextData()||a$jscomp$0.get("text-optional")),!0);!e$jscomp$0.collisionArrays&&o$jscomp$0&&(e$jscomp$0.hasIconCollisionBoxData()||e$jscomp$0.hasTextCollisionBoxData())&&e$jscomp$0.deserializeCollisionBoxes(o$jscomp$0);
var _=function(t,e,i){for(var o=0;o<e/4;o++)t.opacityVertexArray.emplaceBack(i)};o$jscomp$0=function(o){var a=e$jscomp$0.symbolInstances.get(o),s=a.numHorizontalGlyphVertices,l=a.numVerticalGlyphVertices,f=a.crossTileID,m=r.opacities[f];i$jscomp$0[f]?m=n:m||(r.opacities[f]=m=d);i$jscomp$0[f]=!0;var g=0<a.numIconVertices,v=r.placedOrientations[a.crossTileID],y=v===t$jscomp$2.WritingMode.vertical,x=v===t$jscomp$2.WritingMode.horizontal||v===t$jscomp$2.WritingMode.horizontalOnly;if(0<s||0<l){var b=De(m.text);
_(e$jscomp$0.text,s,y?Me:b);_(e$jscomp$0.text,l,x?Me:b);var w=m.text.isHidden();[a.rightJustifiedTextSymbolIndex,a.centerJustifiedTextSymbolIndex,a.leftJustifiedTextSymbolIndex].forEach(function(t){0<=t&&(e$jscomp$0.text.placedSymbolArray.get(t).hidden=w||y?1:0)});0<=a.verticalPlacedTextSymbolIndex&&(e$jscomp$0.text.placedSymbolArray.get(a.verticalPlacedTextSymbolIndex).hidden=w||x?1:0);(s=r.variableOffsets[a.crossTileID])&&r.markUsedJustification(e$jscomp$0,s.anchor,a,v);(v=r.placedOrientations[a.crossTileID])&&
(r.markUsedJustification(e$jscomp$0,"left",a,v),r.markUsedOrientation(e$jscomp$0,v,a))}g&&(g=De(m.icon),v=!(p&&a.verticalPlacedIconSymbolIndex&&y),0<=a.placedIconSymbolIndex&&(_(e$jscomp$0.icon,a.numIconVertices,v?g:Me),e$jscomp$0.icon.placedSymbolArray.get(a.placedIconSymbolIndex).hidden=m.icon.isHidden()),0<=a.verticalPlacedIconSymbolIndex&&(_(e$jscomp$0.icon,a.numVerticalIconVertices,v?Me:g),e$jscomp$0.icon.placedSymbolArray.get(a.verticalPlacedIconSymbolIndex).hidden=m.icon.isHidden()));if(e$jscomp$0.hasIconCollisionBoxData()||
e$jscomp$0.hasTextCollisionBoxData())if(o=e$jscomp$0.collisionArrays[o]){a=new t$jscomp$2.Point(0,0);if(o.textBox||o.verticalTextBox)g=!0,c&&((f=r.variableOffsets[f])?(a=ye(f.anchor,f.width,f.height,f.textOffset,f.textBoxScale),u&&a._rotate(h?r.transform.angle:-r.transform.angle)):g=!1),o.textBox&&we(e$jscomp$0.textCollisionBox.collisionVertexArray,m.text.placed,!g||y,a.x,a.y),o.verticalTextBox&&we(e$jscomp$0.textCollisionBox.collisionVertexArray,m.text.placed,!g||x,a.x,a.y);x=!(x||!o.verticalIconBox);
o.iconBox&&we(e$jscomp$0.iconCollisionBox.collisionVertexArray,m.icon.placed,x,p?a.x:0,p?a.y:0);o.verticalIconBox&&we(e$jscomp$0.iconCollisionBox.collisionVertexArray,m.icon.placed,!x,p?a.x:0,p?a.y:0)}};for(a$jscomp$0=0;a$jscomp$0<e$jscomp$0.symbolInstances.length;a$jscomp$0++)o$jscomp$0(a$jscomp$0);if(e$jscomp$0.sortFeatures(this.transform.angle),this.retainedQueryData[e$jscomp$0.bucketInstanceId]&&(this.retainedQueryData[e$jscomp$0.bucketInstanceId].featureSortOrder=e$jscomp$0.featureSortOrder),
e$jscomp$0.hasTextData()&&e$jscomp$0.text.opacityVertexBuffer&&e$jscomp$0.text.opacityVertexBuffer.updateData(e$jscomp$0.text.opacityVertexArray),e$jscomp$0.hasIconData()&&e$jscomp$0.icon.opacityVertexBuffer&&e$jscomp$0.icon.opacityVertexBuffer.updateData(e$jscomp$0.icon.opacityVertexArray),e$jscomp$0.hasIconCollisionBoxData()&&e$jscomp$0.iconCollisionBox.collisionVertexBuffer&&e$jscomp$0.iconCollisionBox.collisionVertexBuffer.updateData(e$jscomp$0.iconCollisionBox.collisionVertexArray),e$jscomp$0.hasTextCollisionBoxData()&&
e$jscomp$0.textCollisionBox.collisionVertexBuffer&&e$jscomp$0.textCollisionBox.collisionVertexBuffer.updateData(e$jscomp$0.textCollisionBox.collisionVertexArray),e$jscomp$0.bucketInstanceId in this.collisionCircleArrays)o$jscomp$0=this.collisionCircleArrays[e$jscomp$0.bucketInstanceId],e$jscomp$0.placementInvProjMatrix=o$jscomp$0.invProjMatrix,e$jscomp$0.placementViewportMatrix=o$jscomp$0.viewportMatrix,e$jscomp$0.collisionCircleArray=o$jscomp$0.circles,delete this.collisionCircleArrays[e$jscomp$0.bucketInstanceId]};
be.prototype.symbolFadeChange=function(t){return 0===this.fadeDuration?1:(t-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment};be.prototype.zoomAdjustment=function(t){return Math.max(0,(this.transform.zoom-t)/1.5)};be.prototype.hasTransitions=function(t){return this.stale||t-this.lastPlacementChangeTime<this.fadeDuration};be.prototype.stillRecent=function(t,e){var i=this.zoomAtLastRecencyCheck===e?1-this.zoomAdjustment(e):1;return this.zoomAtLastRecencyCheck=e,this.commitTime+this.fadeDuration*
i>t};be.prototype.setStale=function(){this.stale=!0};var Te=Math.pow(2,25),Ee=Math.pow(2,24),Ie=Math.pow(2,17),Pe=Math.pow(2,16),Se=Math.pow(2,9),Ce=Math.pow(2,8),ze=Math.pow(2,1),Me=0,Le=function(t){this._sortAcrossTiles="viewport-y"!==t.layout.get("symbol-z-order")&&void 0!==t.layout.get("symbol-sort-key").constantOr(1);this._currentPartIndex=this._currentTileIndex=0;this._seenCrossTileIDs={};this._bucketParts=[]};Le.prototype.continuePlacement=function(t$jscomp$0,e$jscomp$0,i,o,r){for(var a=this._bucketParts;this._currentTileIndex<
t$jscomp$0.length;)if(e$jscomp$0.getBucketParts(a,o,t$jscomp$0[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,r())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,a.sort(function(t,e){return t.sortKey-e.sortKey}));this._currentPartIndex<a.length;)if(e$jscomp$0.placeLayerBucketPart(a[this._currentPartIndex],this._seenCrossTileIDs,i),this._currentPartIndex++,r())return!0;return!1};var Ae=function(t,e,i,o,r,a,n){this.placement=new be(t,r,a,n);this._currentPlacementIndex=
e.length-1;this._forceFullPlacement=i;this._showCollisionBoxes=o;this._done=!1};Ae.prototype.isDone=function(){return this._done};Ae.prototype.continuePlacement=function(e$jscomp$0,i,o){for(var r=this,a=t$jscomp$2.browser.now(),n=function(){var e=t$jscomp$2.browser.now()-a;return!r._forceFullPlacement&&2<e};0<=this._currentPlacementIndex;){var s=i[e$jscomp$0[this._currentPlacementIndex]],l=this.placement.collisionIndex.transform.zoom;if("symbol"===s.type&&(!s.minzoom||s.minzoom<=l)&&(!s.maxzoom||
s.maxzoom>l)){if(this._inProgressLayer||(this._inProgressLayer=new Le(s)),this._inProgressLayer.continuePlacement(o[s.source],this.placement,this._showCollisionBoxes,s,n))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0};Ae.prototype.commit=function(t){return this.placement.commit(t),this.placement};var Re=512/t$jscomp$2.EXTENT/2,ke=function(t,e,i){this.tileID=t;this.indexedSymbolInstances={};this.bucketInstanceId=i;for(i=0;i<e.length;i++){var r=e.get(i),a=r.key;this.indexedSymbolInstances[a]||
(this.indexedSymbolInstances[a]=[]);this.indexedSymbolInstances[a].push({crossTileID:r.crossTileID,coord:this.getScaledCoordinates(r,t)})}};ke.prototype.getScaledCoordinates=function(e,i){var o=Re/Math.pow(2,i.canonical.z-this.tileID.canonical.z);return{x:Math.floor((i.canonical.x*t$jscomp$2.EXTENT+e.anchorX)*o),y:Math.floor((i.canonical.y*t$jscomp$2.EXTENT+e.anchorY)*o)}};ke.prototype.findMatches=function(t,e,i){for(var o=this.tileID.canonical.z<e.canonical.z?1:Math.pow(2,this.tileID.canonical.z-
e.canonical.z),r=0;r<t.length;r++){var a=t.get(r);if(!a.crossTileID){var n=this.indexedSymbolInstances[a.key];if(n)for(var s=this.getScaledCoordinates(a,e),l=0;l<n.length;l+=1){var u=n[l];if(Math.abs(u.coord.x-s.x)<=o&&Math.abs(u.coord.y-s.y)<=o&&!i[u.crossTileID]){i[u.crossTileID]=!0;a.crossTileID=u.crossTileID;break}}}}};var Be=function(){this.maxCrossTileID=0};Be.prototype.generate=function(){return++this.maxCrossTileID};var Oe=function(){this.indexes={};this.usedCrossTileIDs={};this.lng=0};Oe.prototype.handleWrapJump=
function(t){var e=Math.round((t-this.lng)/360);if(0!==e)for(var i in this.indexes){var o=this.indexes[i],r={},a;for(a in o){var n=o[a];n.tileID=n.tileID.unwrapTo(n.tileID.wrap+e);r[n.tileID.key]=n}this.indexes[i]=r}this.lng=t};Oe.prototype.addBucket=function(t,e,i){if(this.indexes[t.overscaledZ]&&this.indexes[t.overscaledZ][t.key]){if(this.indexes[t.overscaledZ][t.key].bucketInstanceId===e.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(t.overscaledZ,this.indexes[t.overscaledZ][t.key])}for(var o=
0;o<e.symbolInstances.length;o++)e.symbolInstances.get(o).crossTileID=0;this.usedCrossTileIDs[t.overscaledZ]||(this.usedCrossTileIDs[t.overscaledZ]={});o=this.usedCrossTileIDs[t.overscaledZ];for(var a in this.indexes){var n=this.indexes[a];if(Number(a)>t.overscaledZ)for(var s in n){var l=n[s];l.tileID.isChildOf(t)&&l.findMatches(e.symbolInstances,t,o)}else(n=n[t.scaledTo(Number(a)).key])&&n.findMatches(e.symbolInstances,t,o)}for(a=0;a<e.symbolInstances.length;a++)s=e.symbolInstances.get(a),s.crossTileID||
(s.crossTileID=i.generate(),o[s.crossTileID]=!0);return void 0===this.indexes[t.overscaledZ]&&(this.indexes[t.overscaledZ]={}),this.indexes[t.overscaledZ][t.key]=new ke(t,e.symbolInstances,e.bucketInstanceId),!0};Oe.prototype.removeBucketCrossTileIDs=function(t,e){for(var i in e.indexedSymbolInstances)for(var o=0,r=e.indexedSymbolInstances[i];o<r.length;o+=1)delete this.usedCrossTileIDs[t][r[o].crossTileID]};Oe.prototype.removeStaleBuckets=function(t){var e=!1,i;for(i in this.indexes){var o=this.indexes[i],
r;for(r in o)t[o[r].bucketInstanceId]||(this.removeBucketCrossTileIDs(i,o[r]),delete o[r],e=!0)}return e};var Fe=function(){this.layerIndexes={};this.crossTileIDs=new Be;this.maxBucketInstanceId=0;this.bucketsInCurrentPlacement={}};Fe.prototype.addLayer=function(t,e,i){var o=this.layerIndexes[t.id];void 0===o&&(o=this.layerIndexes[t.id]=new Oe);var r=!1,a={};o.handleWrapJump(i);for(i=0;i<e.length;i+=1){var l=e[i],c=l.getBucket(t);c&&t.id===c.layerIds[0]&&(c.bucketInstanceId||(c.bucketInstanceId=++this.maxBucketInstanceId),
o.addBucket(l.tileID,c,this.crossTileIDs)&&(r=!0),a[c.bucketInstanceId]=!0)}return o.removeStaleBuckets(a)&&(r=!0),r};Fe.prototype.pruneUnusedLayers=function(t$jscomp$0){var e={},i;for(i in t$jscomp$0.forEach(function(t){e[t]=!0}),this.layerIndexes)e[i]||delete this.layerIndexes[i]};var Ue=function(e,i){return t$jscomp$2.emitValidationErrors(e,i&&i.filter(function(t){return"source.canvas"!==t.identifier}))},Ne=t$jscomp$2.pick(Zt,"addLayer removeLayer setPaintProperty setLayoutProperty setFilter addSource removeSource setLayerZoomRange setLight setTransition setGeoJSONSourceData".split(" ")),
Ze=t$jscomp$2.pick(Zt,["setCenter","setZoom","setBearing","setPitch"]),je=function(){var e={},i=t$jscomp$2.styleSpec.$version,o;for(o in t$jscomp$2.styleSpec.$root){var r,a=t$jscomp$2.styleSpec.$root[o];a.required&&null!=(r="version"===o?i:"array"===a.type?[]:{})&&(e[o]=r)}return e}(),qe=function(e$jscomp$2){function i$jscomp$5(o$jscomp$0,r$jscomp$0){var a=this;void 0===r$jscomp$0&&(r$jscomp$0={});e$jscomp$2.call(this);this.map=o$jscomp$0;this.dispatcher=new E$jscomp$0((Bt||(Bt=new kt),Bt),this);
this.imageManager=new p$jscomp$1;this.imageManager.setEventedParent(this);this.glyphManager=new y$jscomp$1(o$jscomp$0._requestManager,r$jscomp$0.localIdeographFontFamily);this.lineAtlas=new T$jscomp$0(256,512);this.crossTileSymbolIndex=new Fe;this._layers={};this._serializedLayers={};this._order=[];this.sourceCaches={};this.zoomHistory=new t$jscomp$2.ZoomHistory;this._loaded=!1;this._availableImages=[];this._resetUpdates();this.dispatcher.broadcast("setReferrer",t$jscomp$2.getReferrer());var n=this;
this._rtlTextPluginCallback=i$jscomp$5.registerForPluginStateChange(function(e$jscomp$0){n.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:e$jscomp$0.pluginStatus,pluginURL:e$jscomp$0.pluginURL},function(e,i){if(t$jscomp$2.triggerPluginCompletionEvent(e),i&&i.every(function(t){return t}))for(var o in n.sourceCaches)n.sourceCaches[o].reload()})});this.on("data",function(t){if("source"===t.dataType&&"metadata"===t.sourceDataType&&(t=a.sourceCaches[t.sourceId])&&(t=t.getSource())&&t.vectorLayerIds)for(var o in a._layers){var r=
a._layers[o];r.source===t.id&&a._validateLayer(r)}})}return e$jscomp$2&&(i$jscomp$5.__proto__=e$jscomp$2),(i$jscomp$5.prototype=Object.create(e$jscomp$2&&e$jscomp$2.prototype)).constructor=i$jscomp$5,i$jscomp$5.prototype.loadURL=function(e$jscomp$0,i$jscomp$0){var o=this;void 0===i$jscomp$0&&(i$jscomp$0={});this.fire(new t$jscomp$2.Event("dataloading",{dataType:"style"}));var r="boolean"==typeof i$jscomp$0.validate?i$jscomp$0.validate:!t$jscomp$2.isMapboxURL(e$jscomp$0);e$jscomp$0=this.map._requestManager.normalizeStyleURL(e$jscomp$0,
i$jscomp$0.accessToken);e$jscomp$0=this.map._requestManager.transformRequest(e$jscomp$0,t$jscomp$2.ResourceType.Style);this._request=t$jscomp$2.getJSON(e$jscomp$0,function(e,i){o._request=null;e?o.fire(new t$jscomp$2.ErrorEvent(e)):i&&o._load(i,r)})},i$jscomp$5.prototype.loadJSON=function(e,i){var o=this;void 0===i&&(i={});this.fire(new t$jscomp$2.Event("dataloading",{dataType:"style"}));this._request=t$jscomp$2.browser.frame(function(){o._request=null;o._load(e,!1!==i.validate)})},i$jscomp$5.prototype.loadEmpty=
function(){this.fire(new t$jscomp$2.Event("dataloading",{dataType:"style"}));this._load(je,!1)},i$jscomp$5.prototype._load=function(e,i){if(!i||!Ue(this,t$jscomp$2.validateStyle(e))){for(var o in this._loaded=!0,this.stylesheet=e,e.sources)this.addSource(o,e.sources[o],{validate:!1});e.sprite?this._loadSprite(e.sprite):this.imageManager.setLoaded(!0);this.glyphManager.setURL(e.glyphs);e=Nt(this.stylesheet.layers);this._order=e.map(function(t){return t.id});this._layers={};this._serializedLayers={};
for(i=0;i<e.length;i+=1)o=e[i],(o=t$jscomp$2.createStyleLayer(o)).setEventedParent(this,{layer:{id:o.id}}),this._layers[o.id]=o,this._serializedLayers[o.id]=o.serialize();this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order));this.light=new w$jscomp$0(this.stylesheet.light);this.fire(new t$jscomp$2.Event("data",{dataType:"style"}));this.fire(new t$jscomp$2.Event("style.load"))}},i$jscomp$5.prototype._loadSprite=function(e$jscomp$1){var i$jscomp$1=this;this._spriteRequest=function(e$jscomp$0,
i$jscomp$0,o){function u$jscomp$0(){if(n)o(n);else if(r&&a){var e=t$jscomp$2.browser.getImageData(a),i={},s;for(s in r){var l=r[s],c=l.width,u=l.height,h=l.x,p=l.y,d=l.sdf,_=l.pixelRatio,f=l.stretchX,m=l.stretchY;l=l.content;var v=new t$jscomp$2.RGBAImage({width:c,height:u});t$jscomp$2.RGBAImage.copy(e,v,{x:h,y:p},{x:0,y:0},{width:c,height:u});i[s]={data:v,pixelRatio:_,sdf:d,stretchX:f,stretchY:m,content:l}}o(null,i)}}var r,a,n,s$jscomp$0=1<t$jscomp$2.browser.devicePixelRatio?"@2x":"",l$jscomp$0=
t$jscomp$2.getJSON(i$jscomp$0.transformRequest(i$jscomp$0.normalizeSpriteURL(e$jscomp$0,s$jscomp$0,".json"),t$jscomp$2.ResourceType.SpriteJSON),function(t,e){l$jscomp$0=null;n||(n=t,r=e,u$jscomp$0())}),c$jscomp$0=t$jscomp$2.getImage(i$jscomp$0.transformRequest(i$jscomp$0.normalizeSpriteURL(e$jscomp$0,s$jscomp$0,".png"),t$jscomp$2.ResourceType.SpriteImage),function(t,e){c$jscomp$0=null;n||(n=t,a=e,u$jscomp$0())});return{cancel:function(){l$jscomp$0&&(l$jscomp$0.cancel(),l$jscomp$0=null);c$jscomp$0&&
(c$jscomp$0.cancel(),c$jscomp$0=null)}}}(e$jscomp$1,this.map._requestManager,function(e,o){if(i$jscomp$1._spriteRequest=null,e)i$jscomp$1.fire(new t$jscomp$2.ErrorEvent(e));else if(o)for(var r in o)i$jscomp$1.imageManager.addImage(r,o[r]);i$jscomp$1.imageManager.setLoaded(!0);i$jscomp$1._availableImages=i$jscomp$1.imageManager.listImages();i$jscomp$1.dispatcher.broadcast("setImages",i$jscomp$1._availableImages);i$jscomp$1.fire(new t$jscomp$2.Event("data",{dataType:"style"}))})},i$jscomp$5.prototype._validateLayer=
function(e){var i=this.sourceCaches[e.source];if(i){var o=e.sourceLayer;o&&(i=i.getSource(),("geojson"===i.type||i.vectorLayerIds&&-1===i.vectorLayerIds.indexOf(o))&&this.fire(new t$jscomp$2.ErrorEvent(Error('Source layer "'+o+'" does not exist on source "'+i.id+'" as specified by style layer "'+e.id+'"'))))}},i$jscomp$5.prototype.loaded=function(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(var t in this.sourceCaches)if(!this.sourceCaches[t].loaded())return!1;return!!this.imageManager.isLoaded()},
i$jscomp$5.prototype._serializeLayers=function(t){for(var e=[],i=0;i<t.length;i+=1){var r=this._layers[t[i]];"custom"!==r.type&&e.push(r.serialize())}return e},i$jscomp$5.prototype.hasTransitions=function(){if(this.light&&this.light.hasTransition())return!0;for(var t in this.sourceCaches)if(this.sourceCaches[t].hasTransition())return!0;for(var e in this._layers)if(this._layers[e].hasTransition())return!0;return!1},i$jscomp$5.prototype._checkLoaded=function(){if(!this._loaded)throw Error("Style is not done loading");
},i$jscomp$5.prototype.update=function(e){if(this._loaded){var i=this._changed;if(this._changed){var o=Object.keys(this._updatedLayers),r=Object.keys(this._removedLayers);for(a in(o.length||r.length)&&this._updateWorkerLayers(o,r),this._updatedSources)o=this._updatedSources[a],"reload"===o?this._reloadSource(a):"clear"===o&&this._clearSource(a);for(var s in this._updateTilesForChangedImages(),this._updatedPaintProps)this._layers[s].updateTransitions(e);this.light.updateTransitions(e);this._resetUpdates()}for(var l in this.sourceCaches)this.sourceCaches[l].used=
!1;var a=0;for(s=this._order;a<s.length;a+=1)l=this._layers[s[a]],l.recalculate(e,this._availableImages),!l.isHidden(e.zoom)&&l.source&&(this.sourceCaches[l.source].used=!0);this.light.recalculate(e);this.z=e.zoom;i&&this.fire(new t$jscomp$2.Event("data",{dataType:"style"}))}},i$jscomp$5.prototype._updateTilesForChangedImages=function(){var t=Object.keys(this._changedImages);if(t.length){for(var e in this.sourceCaches)this.sourceCaches[e].reloadTilesForDependencies(["icons","patterns"],t);this._changedImages=
{}}},i$jscomp$5.prototype._updateWorkerLayers=function(t,e){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(t),removedIds:e})},i$jscomp$5.prototype._resetUpdates=function(){this._changed=!1;this._updatedLayers={};this._removedLayers={};this._updatedSources={};this._updatedPaintProps={};this._changedImages={}},i$jscomp$5.prototype.setState=function(e$jscomp$1){var i$jscomp$4=this;if(this._checkLoaded(),Ue(this,t$jscomp$2.validateStyle(e$jscomp$1)))return!1;(e$jscomp$1=t$jscomp$2.clone$1(e$jscomp$1)).layers=
Nt(e$jscomp$1.layers);var o$jscomp$2=function(e$jscomp$0,i$jscomp$3){if(!e$jscomp$0)return[{command:Zt.setStyle,args:[i$jscomp$3]}];var o$jscomp$1=[];try{if(!t$jscomp$2.deepEqual(e$jscomp$0.version,i$jscomp$3.version))return[{command:Zt.setStyle,args:[i$jscomp$3]}];t$jscomp$2.deepEqual(e$jscomp$0.center,i$jscomp$3.center)||o$jscomp$1.push({command:Zt.setCenter,args:[i$jscomp$3.center]});t$jscomp$2.deepEqual(e$jscomp$0.zoom,i$jscomp$3.zoom)||o$jscomp$1.push({command:Zt.setZoom,args:[i$jscomp$3.zoom]});
t$jscomp$2.deepEqual(e$jscomp$0.bearing,i$jscomp$3.bearing)||o$jscomp$1.push({command:Zt.setBearing,args:[i$jscomp$3.bearing]});t$jscomp$2.deepEqual(e$jscomp$0.pitch,i$jscomp$3.pitch)||o$jscomp$1.push({command:Zt.setPitch,args:[i$jscomp$3.pitch]});t$jscomp$2.deepEqual(e$jscomp$0.sprite,i$jscomp$3.sprite)||o$jscomp$1.push({command:Zt.setSprite,args:[i$jscomp$3.sprite]});t$jscomp$2.deepEqual(e$jscomp$0.glyphs,i$jscomp$3.glyphs)||o$jscomp$1.push({command:Zt.setGlyphs,args:[i$jscomp$3.glyphs]});t$jscomp$2.deepEqual(e$jscomp$0.transition,
i$jscomp$3.transition)||o$jscomp$1.push({command:Zt.setTransition,args:[i$jscomp$3.transition]});t$jscomp$2.deepEqual(e$jscomp$0.light,i$jscomp$3.light)||o$jscomp$1.push({command:Zt.setLight,args:[i$jscomp$3.light]});var r$jscomp$0={},a$jscomp$0=[];!function(e,i$jscomp$2,o$jscomp$0,r){for(var a in i$jscomp$2=i$jscomp$2||{},e=e||{})if(e.hasOwnProperty(a)&&!i$jscomp$2.hasOwnProperty(a)){var t=a,i=r;o$jscomp$0.push({command:Zt.removeSource,args:[t]});i[t]=!0}for(a in i$jscomp$2)if(i$jscomp$2.hasOwnProperty(a))if(e.hasOwnProperty(a)){if(!t$jscomp$2.deepEqual(e[a],
i$jscomp$2[a])){if(t="geojson"===e[a].type&&"geojson"===i$jscomp$2[a].type)a:{t=void 0;i=e;var i$jscomp$0=i$jscomp$2,o=a;for(t in i[o])if(i[o].hasOwnProperty(t)&&"data"!==t&&!t$jscomp$2.deepEqual(i[o][t],i$jscomp$0[o][t])){t=!1;break a}for(t in i$jscomp$0[o])if(i$jscomp$0[o].hasOwnProperty(t)&&"data"!==t&&!t$jscomp$2.deepEqual(i[o][t],i$jscomp$0[o][t])){t=!1;break a}t=!0}if(t)o$jscomp$0.push({command:Zt.setGeoJSONSourceData,args:[a,i$jscomp$2[a].data]});else{t=a;i=i$jscomp$2;i$jscomp$0=o$jscomp$0;
o=t;var i$jscomp$1=r;i$jscomp$0.push({command:Zt.removeSource,args:[o]});i$jscomp$1[o]=!0;i$jscomp$0.push({command:Zt.addSource,args:[t,i[t]]})}}}else o$jscomp$0.push({command:Zt.addSource,args:[a,i$jscomp$2[a]]})}(e$jscomp$0.sources,i$jscomp$3.sources,a$jscomp$0,r$jscomp$0);var n$jscomp$0=[];e$jscomp$0.layers&&e$jscomp$0.layers.forEach(function(t){r$jscomp$0[t.source]?o$jscomp$1.push({command:Zt.removeLayer,args:[t.id]}):n$jscomp$0.push(t)});o$jscomp$1=o$jscomp$1.concat(a$jscomp$0);(function(e,i,
o){i=i||[];var a,n,s,l,u;var c=(e=e||[]).map(Xt);var p=i.map(Xt);e=e.reduce(Ht,{});var _=i.reduce(Ht,{}),f=c.slice(),m=Object.create(null);for(a=i=0;i<c.length;i++)_.hasOwnProperty(n=c[i])?a++:(o.push({command:Zt.removeLayer,args:[n]}),f.splice(f.indexOf(n,a),1));for(a=i=0;i<p.length;i++)f[f.length-1-i]!==(n=p[p.length-1-i])&&(e.hasOwnProperty(n)?(o.push({command:Zt.removeLayer,args:[n]}),f.splice(f.lastIndexOf(n,f.length-a),1)):a++,o.push({command:Zt.addLayer,args:[_[n],f[f.length-i]]}),f.splice(f.length-
i,0,n),m[n]=!0);for(i=0;i<p.length;i++)if(s=e[n=p[i]],l=_[n],!m[n]&&!t$jscomp$2.deepEqual(s,l))if(t$jscomp$2.deepEqual(s.source,l.source)&&t$jscomp$2.deepEqual(s["source-layer"],l["source-layer"])&&t$jscomp$2.deepEqual(s.type,l.type)){for(u in Wt(s.layout,l.layout,o,n,null,Zt.setLayoutProperty),Wt(s.paint,l.paint,o,n,null,Zt.setPaintProperty),t$jscomp$2.deepEqual(s.filter,l.filter)||o.push({command:Zt.setFilter,args:[n,l.filter]}),t$jscomp$2.deepEqual(s.minzoom,l.minzoom)&&t$jscomp$2.deepEqual(s.maxzoom,
l.maxzoom)||o.push({command:Zt.setLayerZoomRange,args:[n,l.minzoom,l.maxzoom]}),s)s.hasOwnProperty(u)&&"layout"!==u&&"paint"!==u&&"filter"!==u&&"metadata"!==u&&"minzoom"!==u&&"maxzoom"!==u&&(0===u.indexOf("paint.")?Wt(s[u],l[u],o,n,u.slice(6),Zt.setPaintProperty):t$jscomp$2.deepEqual(s[u],l[u])||o.push({command:Zt.setLayerProperty,args:[n,u,l[u]]}));for(u in l)l.hasOwnProperty(u)&&!s.hasOwnProperty(u)&&"layout"!==u&&"paint"!==u&&"filter"!==u&&"metadata"!==u&&"minzoom"!==u&&"maxzoom"!==u&&(0===u.indexOf("paint.")?
Wt(s[u],l[u],o,n,u.slice(6),Zt.setPaintProperty):t$jscomp$2.deepEqual(s[u],l[u])||o.push({command:Zt.setLayerProperty,args:[n,u,l[u]]}))}else o.push({command:Zt.removeLayer,args:[n]}),c=f[f.lastIndexOf(n)+1],o.push({command:Zt.addLayer,args:[l,c]})})(n$jscomp$0,i$jscomp$3.layers,o$jscomp$1)}catch(t$404){console.warn("Unable to compute style diff:",t$404),o$jscomp$1=[{command:Zt.setStyle,args:[i$jscomp$3]}]}return o$jscomp$1}(this.serialize(),e$jscomp$1).filter(function(t){return!(t.command in Ze)});
if(0===o$jscomp$2.length)return!1;var r$jscomp$1=o$jscomp$2.filter(function(t){return!(t.command in Ne)});if(0<r$jscomp$1.length)throw Error("Unimplemented: "+r$jscomp$1.map(function(t){return t.command}).join(", ")+".");return o$jscomp$2.forEach(function(t){"setTransition"!==t.command&&i$jscomp$4[t.command].apply(i$jscomp$4,t.args)}),this.stylesheet=e$jscomp$1,!0},i$jscomp$5.prototype.addImage=function(e,i){if(this.getImage(e))return this.fire(new t$jscomp$2.ErrorEvent(Error("An image with this name already exists.")));
this.imageManager.addImage(e,i);this._availableImages=this.imageManager.listImages();this._changed=this._changedImages[e]=!0;this.fire(new t$jscomp$2.Event("data",{dataType:"style"}))},i$jscomp$5.prototype.updateImage=function(t,e){this.imageManager.updateImage(t,e)},i$jscomp$5.prototype.getImage=function(t){return this.imageManager.getImage(t)},i$jscomp$5.prototype.removeImage=function(e){if(!this.getImage(e))return this.fire(new t$jscomp$2.ErrorEvent(Error("No image with this name exists.")));this.imageManager.removeImage(e);
this._availableImages=this.imageManager.listImages();this._changed=this._changedImages[e]=!0;this.fire(new t$jscomp$2.Event("data",{dataType:"style"}))},i$jscomp$5.prototype.listImages=function(){return this._checkLoaded(),this.imageManager.listImages()},i$jscomp$5.prototype.addSource=function(e,i,o){var r=this;if(void 0===o&&(o={}),this._checkLoaded(),void 0!==this.sourceCaches[e])throw Error("There is already a source with this ID");if(!i.type)throw Error("The type property must be defined, but the only the following properties were given: "+
Object.keys(i).join(", ")+".");if(!(0<=["vector","raster","geojson","video","image"].indexOf(i.type)&&this._validate(t$jscomp$2.validateStyle.source,"sources."+e,i,null,o))){this.map&&this.map._collectResourceTiming&&(i.collectResourceTiming=!0);var a=this.sourceCaches[e]=new Dt(e,i,this.dispatcher);a.style=this;a.setEventedParent(this,function(){return{isSourceLoaded:r.loaded(),source:a.serialize(),sourceId:e}});a.onAdd(this.map);this._changed=!0}},i$jscomp$5.prototype.removeSource=function(e){if(this._checkLoaded(),
void 0===this.sourceCaches[e])throw Error("There is no source with this ID");for(var i in this._layers)if(this._layers[i].source===e)return this.fire(new t$jscomp$2.ErrorEvent(Error('Source "'+e+'" cannot be removed while layer "'+i+'" is using it.')));i=this.sourceCaches[e];delete this.sourceCaches[e];delete this._updatedSources[e];i.fire(new t$jscomp$2.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:e}));i.setEventedParent(null);i.clearTiles();i.onRemove&&i.onRemove(this.map);
this._changed=!0},i$jscomp$5.prototype.setGeoJSONSourceData=function(t,e){this._checkLoaded();this.sourceCaches[t].getSource().setData(e);this._changed=!0},i$jscomp$5.prototype.getSource=function(t){return this.sourceCaches[t]&&this.sourceCaches[t].getSource()},i$jscomp$5.prototype.addLayer=function(e,i,o){void 0===o&&(o={});this._checkLoaded();var r=e.id;if(this.getLayer(r))this.fire(new t$jscomp$2.ErrorEvent(Error('Layer with id "'+r+'" already exists on this map')));else{if("custom"===e.type){if(Ue(this,
t$jscomp$2.validateCustomStyleLayer(e)))return;e=t$jscomp$2.createStyleLayer(e)}else{if("object"==typeof e.source&&(this.addSource(r,e.source),e=t$jscomp$2.clone$1(e),e=t$jscomp$2.extend(e,{source:r})),this._validate(t$jscomp$2.validateStyle.layer,"layers."+r,e,{arrayIndex:-1},o))return;e=t$jscomp$2.createStyleLayer(e);this._validateLayer(e);e.setEventedParent(this,{layer:{id:r}});this._serializedLayers[e.id]=e.serialize()}o=i?this._order.indexOf(i):this._order.length;if(i&&-1===o)this.fire(new t$jscomp$2.ErrorEvent(Error('Layer with id "'+
i+'" does not exist on this map.')));else{if(this._order.splice(o,0,r),this._layerOrderChanged=!0,this._layers[r]=e,this._removedLayers[r]&&e.source&&"custom"!==e.type)i=this._removedLayers[r],delete this._removedLayers[r],i.type!==e.type?this._updatedSources[e.source]="clear":(this._updatedSources[e.source]="reload",this.sourceCaches[e.source].pause());this._updateLayer(e);e.onAdd&&e.onAdd(this.map)}}},i$jscomp$5.prototype.moveLayer=function(e,i){if(this._checkLoaded(),this._changed=!0,this._layers[e]){if(e!==
i){var o=this._order.indexOf(e);this._order.splice(o,1);o=i?this._order.indexOf(i):this._order.length;i&&-1===o?this.fire(new t$jscomp$2.ErrorEvent(Error('Layer with id "'+i+'" does not exist on this map.'))):(this._order.splice(o,0,e),this._layerOrderChanged=!0)}}else this.fire(new t$jscomp$2.ErrorEvent(Error("The layer '"+e+"' does not exist in the map's style and cannot be moved.")))},i$jscomp$5.prototype.removeLayer=function(e){this._checkLoaded();var i=this._layers[e];if(i){i.setEventedParent(null);
var o=this._order.indexOf(e);this._order.splice(o,1);this._changed=this._layerOrderChanged=!0;this._removedLayers[e]=i;delete this._layers[e];delete this._serializedLayers[e];delete this._updatedLayers[e];delete this._updatedPaintProps[e];i.onRemove&&i.onRemove(this.map)}else this.fire(new t$jscomp$2.ErrorEvent(Error("The layer '"+e+"' does not exist in the map's style and cannot be removed.")))},i$jscomp$5.prototype.getLayer=function(t){return this._layers[t]},i$jscomp$5.prototype.hasLayer=function(t){return t in
this._layers},i$jscomp$5.prototype.setLayerZoomRange=function(e,i,o){this._checkLoaded();var r=this.getLayer(e);r?r.minzoom===i&&r.maxzoom===o||(null!=i&&(r.minzoom=i),null!=o&&(r.maxzoom=o),this._updateLayer(r)):this.fire(new t$jscomp$2.ErrorEvent(Error("The layer '"+e+"' does not exist in the map's style and cannot have zoom extent.")))},i$jscomp$5.prototype.setFilter=function(e,i,o){void 0===o&&(o={});this._checkLoaded();var r=this.getLayer(e);if(r){if(!t$jscomp$2.deepEqual(r.filter,i))return null==
i?(r.filter=void 0,void this._updateLayer(r)):void(this._validate(t$jscomp$2.validateStyle.filter,"layers."+r.id+".filter",i,null,o)||(r.filter=t$jscomp$2.clone$1(i),this._updateLayer(r)))}else this.fire(new t$jscomp$2.ErrorEvent(Error("The layer '"+e+"' does not exist in the map's style and cannot be filtered.")))},i$jscomp$5.prototype.getFilter=function(e){return t$jscomp$2.clone$1(this.getLayer(e).filter)},i$jscomp$5.prototype.setLayoutProperty=function(e,i,o,r){void 0===r&&(r={});this._checkLoaded();
var a=this.getLayer(e);a?t$jscomp$2.deepEqual(a.getLayoutProperty(i),o)||(a.setLayoutProperty(i,o,r),this._updateLayer(a)):this.fire(new t$jscomp$2.ErrorEvent(Error("The layer '"+e+"' does not exist in the map's style and cannot be styled.")))},i$jscomp$5.prototype.getLayoutProperty=function(e,i){var o=this.getLayer(e);if(o)return o.getLayoutProperty(i);this.fire(new t$jscomp$2.ErrorEvent(Error("The layer '"+e+"' does not exist in the map's style.")))},i$jscomp$5.prototype.setPaintProperty=function(e,
i,o,r){void 0===r&&(r={});this._checkLoaded();var a=this.getLayer(e);a?t$jscomp$2.deepEqual(a.getPaintProperty(i),o)||(a.setPaintProperty(i,o,r)&&this._updateLayer(a),this._changed=!0,this._updatedPaintProps[e]=!0):this.fire(new t$jscomp$2.ErrorEvent(Error("The layer '"+e+"' does not exist in the map's style and cannot be styled.")))},i$jscomp$5.prototype.getPaintProperty=function(t,e){return this.getLayer(t).getPaintProperty(e)},i$jscomp$5.prototype.setFeatureState=function(e,i){this._checkLoaded();
var o=e.source,r=e.sourceLayer,a=this.sourceCaches[o];void 0!==a?(o=a.getSource().type,"geojson"===o&&r?this.fire(new t$jscomp$2.ErrorEvent(Error("GeoJSON sources cannot have a sourceLayer parameter."))):"vector"!==o||r?(void 0===e.id&&this.fire(new t$jscomp$2.ErrorEvent(Error("The feature id parameter must be provided."))),a.setFeatureState(r,e.id,i)):this.fire(new t$jscomp$2.ErrorEvent(Error("The sourceLayer parameter must be provided for vector source types.")))):this.fire(new t$jscomp$2.ErrorEvent(Error("The source '"+
o+"' does not exist in the map's style.")))},i$jscomp$5.prototype.removeFeatureState=function(e,i){this._checkLoaded();var o=e.source,r=this.sourceCaches[o];if(void 0!==r){o=r.getSource().type;var n="vector"===o?e.sourceLayer:void 0;"vector"!==o||n?i&&"string"!=typeof e.id&&"number"!=typeof e.id?this.fire(new t$jscomp$2.ErrorEvent(Error("A feature id is requred to remove its specific state property."))):r.removeFeatureState(n,e.id,i):this.fire(new t$jscomp$2.ErrorEvent(Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new t$jscomp$2.ErrorEvent(Error("The source '"+
o+"' does not exist in the map's style.")))},i$jscomp$5.prototype.getFeatureState=function(e){this._checkLoaded();var i=e.source,o=e.sourceLayer,r=this.sourceCaches[i];if(void 0!==r){if("vector"!==r.getSource().type||o)return void 0===e.id&&this.fire(new t$jscomp$2.ErrorEvent(Error("The feature id parameter must be provided."))),r.getFeatureState(o,e.id);this.fire(new t$jscomp$2.ErrorEvent(Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new t$jscomp$2.ErrorEvent(Error("The source '"+
i+"' does not exist in the map's style.")))},i$jscomp$5.prototype.getTransition=function(){return t$jscomp$2.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)},i$jscomp$5.prototype.serialize=function(){return t$jscomp$2.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,
glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,sources:t$jscomp$2.mapObject(this.sourceCaches,function(t){return t.serialize()}),layers:this._serializeLayers(this._order)},function(t){return void 0!==t})},i$jscomp$5.prototype._updateLayer=function(t){this._updatedLayers[t.id]=!0;t.source&&!this._updatedSources[t.source]&&"raster"!==this.sourceCaches[t.source].getSource().type&&(this._updatedSources[t.source]="reload",this.sourceCaches[t.source].pause());this._changed=!0},i$jscomp$5.prototype._flattenAndSortRenderedFeatures=
function(t$jscomp$0){for(var o={},r=[],a=this._order.length-1;0<=a;a--){var n=this._order[a];if("fill-extrusion"===this._layers[n].type){o[n]=a;for(var s=0,l=t$jscomp$0;s<l.length;s+=1){var c=l[s][n];if(c)for(var u=0;u<c.length;u+=1)r.push(c[u])}}}r.sort(function(t,e){return e.intersectionZ-t.intersectionZ});a=[];for(n=this._order.length-1;0<=n;n--)if(s=this._order[n],"fill-extrusion"===this._layers[s].type)for(s=r.length-1;0<=s;s--){l=r[s].feature;if(o[l.layer.id]<n)break;a.push(l);r.pop()}else for(l=
0,u=t$jscomp$0;l<u.length;l+=1){var y=u[l][s];if(y)for(c=0;c<y.length;c+=1)a.push(y[c].feature)}return a},i$jscomp$5.prototype.queryRenderedFeatures=function(e$jscomp$1,i$jscomp$1,o$jscomp$2){i$jscomp$1&&i$jscomp$1.filter&&this._validate(t$jscomp$2.validateStyle.filter,"queryRenderedFeatures.filter",i$jscomp$1.filter,null,i$jscomp$1);var r$jscomp$0={};if(i$jscomp$1&&i$jscomp$1.layers){if(!Array.isArray(i$jscomp$1.layers))return this.fire(new t$jscomp$2.ErrorEvent(Error("parameters.layers must be an Array."))),
[];for(var a$jscomp$1=0,n$jscomp$1=i$jscomp$1.layers;a$jscomp$1<n$jscomp$1.length;a$jscomp$1+=1){var s$jscomp$0=n$jscomp$1[a$jscomp$1],l$jscomp$0=this._layers[s$jscomp$0];if(!l$jscomp$0)return this.fire(new t$jscomp$2.ErrorEvent(Error("The layer '"+s$jscomp$0+"' does not exist in the map's style and cannot be queried for features."))),[];r$jscomp$0[l$jscomp$0.source]=!0}}a$jscomp$1=[];for(var u$jscomp$0 in i$jscomp$1.availableImages=this._availableImages,this.sourceCaches)i$jscomp$1.layers&&!r$jscomp$0[u$jscomp$0]||
a$jscomp$1.push(O$jscomp$0(this.sourceCaches[u$jscomp$0],this._layers,this._serializedLayers,e$jscomp$1,i$jscomp$1,o$jscomp$2));return this.placement&&a$jscomp$1.push(function(t$jscomp$0,e$jscomp$0,i$jscomp$0,o$jscomp$1,r,a$jscomp$0,n$jscomp$0){var s={},l=a$jscomp$0.queryRenderedSymbols(o$jscomp$1);o$jscomp$1=[];a$jscomp$0=0;for(var h=Object.keys(l).map(Number);a$jscomp$0<h.length;a$jscomp$0+=1)o$jscomp$1.push(n$jscomp$0[h[a$jscomp$0]]);o$jscomp$1.sort(F$jscomp$0);n$jscomp$0=function(){var i=_[d],
o$jscomp$0=i.featureIndex.lookupSymbolFeatures(l[i.bucketInstanceId],e$jscomp$0,i.bucketIndex,i.sourceLayerIndex,r.filter,r.layers,r.availableImages,t$jscomp$0),a;for(a in o$jscomp$0){var n=s[a]=s[a]||[],c=o$jscomp$0[a];c.sort(function(t,e){var o=i.featureSortOrder;return o?(t=o.indexOf(t.featureIndex),o.indexOf(e.featureIndex)-t):e.featureIndex-t.featureIndex});for(var u=0;u<c.length;u+=1)n.push(c[u])}};for(var d=0,_=o$jscomp$1;d<_.length;d+=1)n$jscomp$0();n$jscomp$0=function(e){s[e].forEach(function(o){o=
o.feature;var a=i$jscomp$0[t$jscomp$0[e].source].getFeatureState(o.layer["source-layer"],o.id);o.source=o.layer.source;o.layer["source-layer"]&&(o.sourceLayer=o.layer["source-layer"]);o.state=a})};for(var m in s)n$jscomp$0(m);return s}(this._layers,this._serializedLayers,this.sourceCaches,e$jscomp$1,i$jscomp$1,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(a$jscomp$1)},i$jscomp$5.prototype.querySourceFeatures=function(e$jscomp$1,i$jscomp$0){i$jscomp$0&&
i$jscomp$0.filter&&this._validate(t$jscomp$2.validateStyle.filter,"querySourceFeatures.filter",i$jscomp$0.filter,null,i$jscomp$0);return(e$jscomp$1=this.sourceCaches[e$jscomp$1])?function(t,e$jscomp$0){for(var i=t.getRenderableIds().map(function(e){return t.getTileByID(e)}),o=[],r={},a=0;a<i.length;a++){var n=i[a],s=n.tileID.canonical.key;r[s]||(r[s]=!0,n.querySourceFeatures(o,e$jscomp$0))}return o}(e$jscomp$1,i$jscomp$0):[]},i$jscomp$5.prototype.addSourceType=function(t,e,o){return i$jscomp$5.getSourceType(t)?
o(Error('A source type called "'+t+'" already exists.')):(i$jscomp$5.setSourceType(t,e),e.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:t,url:e.workerSourceURL},o):o(null,null))},i$jscomp$5.prototype.getLight=function(){return this.light.getLight()},i$jscomp$5.prototype.setLight=function(e,i){void 0===i&&(i={});this._checkLoaded();var o=this.light.getLight(),r=!1,a;for(a in e)if(!t$jscomp$2.deepEqual(e[a],o[a])){r=!0;break}r&&(o={now:t$jscomp$2.browser.now(),transition:t$jscomp$2.extend({duration:300,
delay:0},this.stylesheet.transition)},this.light.setLight(e,i),this.light.updateTransitions(o))},i$jscomp$5.prototype._validate=function(e,i,o,r,a){return void 0===a&&(a={}),(!a||!1!==a.validate)&&Ue(this,e.call(t$jscomp$2.validateStyle,t$jscomp$2.extend({key:i,style:this.serialize(),value:o,styleSpec:t$jscomp$2.styleSpec},r)))},i$jscomp$5.prototype._remove=function(){for(var e in this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=
null),t$jscomp$2.evented.off("pluginStateChange",this._rtlTextPluginCallback),this._layers)this._layers[e].setEventedParent(null);for(var i in this.sourceCaches)this.sourceCaches[i].clearTiles(),this.sourceCaches[i].setEventedParent(null);this.imageManager.setEventedParent(null);this.setEventedParent(null);this.dispatcher.remove()},i$jscomp$5.prototype._clearSource=function(t){this.sourceCaches[t].clearTiles()},i$jscomp$5.prototype._reloadSource=function(t){this.sourceCaches[t].resume();this.sourceCaches[t].reload()},
i$jscomp$5.prototype._updateSources=function(t){for(var e in this.sourceCaches)this.sourceCaches[e].update(t)},i$jscomp$5.prototype._generateCollisionBoxes=function(){for(var t in this.sourceCaches)this._reloadSource(t)},i$jscomp$5.prototype._updatePlacement=function(e$jscomp$0,i,o,r,a){void 0===a&&(a=!1);for(var n=!1,s=!1,l={},c=0,u=this._order;c<u.length;c+=1){var h=this._layers[u[c]];if("symbol"===h.type){if(!l[h.source]){var p=this.sourceCaches[h.source];l[h.source]=p.getRenderableIds(!0).map(function(t){return p.getTileByID(t)}).sort(function(t,
e){return e.tileID.overscaledZ-t.tileID.overscaledZ||(t.tileID.isLessThan(e.tileID)?-1:1)})}h=this.crossTileSymbolIndex.addLayer(h,l[h.source],e$jscomp$0.center.lng);n=n||h}}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((a=a||this._layerOrderChanged||0===o)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(t$jscomp$2.browser.now(),e$jscomp$0.zoom))&&(this.pauseablePlacement=new Ae(e$jscomp$0,this._order,a,i,o,r,this.placement),this._layerOrderChanged=
!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,l),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(t$jscomp$2.browser.now()),s=!0),n&&this.pauseablePlacement.placement.setStale()),s||n)for(e$jscomp$0=0,i=this._order;e$jscomp$0<i.length;e$jscomp$0+=1)o=this._layers[i[e$jscomp$0]],"symbol"===o.type&&this.placement.updateLayerOpacities(o,l[o.source]);return!this.pauseablePlacement.isDone()||
this.placement.hasTransitions(t$jscomp$2.browser.now())},i$jscomp$5.prototype._releaseSymbolFadeTiles=function(){for(var t in this.sourceCaches)this.sourceCaches[t].releaseSymbolFadeTiles()},i$jscomp$5.prototype.getImages=function(t,e,i){this.imageManager.getImages(e.icons,i);this._updateTilesForChangedImages();(t=this.sourceCaches[e.source])&&t.setDependencies(e.tileID.key,e.type,e.icons)},i$jscomp$5.prototype.getGlyphs=function(t,e,i){this.glyphManager.getGlyphs(e.stacks,i)},i$jscomp$5.prototype.getResource=
function(e,i,o){return t$jscomp$2.makeRequest(i,o)},i$jscomp$5}(t$jscomp$2.Evented);qe.getSourceType=function(t){return k$jscomp$0[t]};qe.setSourceType=function(t,e){k$jscomp$0[t]=e};qe.registerForPluginStateChange=t$jscomp$2.registerForPluginStateChange;var Ve=t$jscomp$2.createLayout([{name:"a_pos",type:"Int16",components:2}]),Ge=gi("#ifdef GL_ES\nprecision mediump float;\n#else\n#if !defined(lowp)\n#define lowp\n#endif\n#if !defined(mediump)\n#define mediump\n#endif\n#if !defined(highp)\n#define highp\n#endif\n#endif",
"#ifdef GL_ES\nprecision highp float;\n#else\n#if !defined(lowp)\n#define lowp\n#endif\n#if !defined(mediump)\n#define mediump\n#endif\n#if !defined(highp)\n#define highp\n#endif\n#endif\nvec2 unpack_float(const float packedValue) {int packedIntValue\x3dint(packedValue);int v0\x3dpackedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity\x3dint(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0\n);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor\x3ddecode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor\x3ddecode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset\x3dmod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}"),
We=gi("uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor\x3du_color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor\x3dvec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position\x3du_matrix*vec4(a_pos,0,1);}"),Xe=gi("uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord\x3dmod(v_pos_a,1.0);vec2 pos\x3dmix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1\x3dtexture2D(u_image,pos);vec2 imagecoord_b\x3dmod(v_pos_b,1.0);vec2 pos2\x3dmix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2\x3dtexture2D(u_image,pos2);gl_FragColor\x3dmix(color1,color2,u_mix)*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor\x3dvec4(1.0);\n#endif\n}",
"uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position\x3du_matrix*vec4(a_pos,0,1);v_pos_a\x3dget_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b\x3dget_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),
He=gi("varying vec3 v_data;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude\x3dv_data.xy;float extrude_length\x3dlength(extrude);lowp float antialiasblur\x3dv_data.z;float antialiased_blur\x3d-max(blur,antialiasblur);float opacity_t\x3dsmoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t\x3dstroke_width \x3c 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor\x3dopacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor\x3dvec4(1.0);\n#endif\n}",
"uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvoid main(void) {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude\x3dvec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center\x3dfloor(a_pos*0.5);if (u_pitch_with_map) {vec2 corner_position\x3dcircle_center;if (u_scale_with_map) {corner_position+\x3dextrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center\x3du_matrix*vec4(circle_center,0,1);corner_position+\x3dextrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position\x3du_matrix*vec4(corner_position,0,1);} else {gl_Position\x3du_matrix*vec4(circle_center,0,1);if (u_scale_with_map) {gl_Position.xy+\x3dextrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+\x3dextrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur\x3d1.0/u_device_pixel_ratio/(radius+stroke_width);v_data\x3dvec3(extrude.x,extrude.y,antialiasblur);}"),
Ke=gi("void main() {gl_FragColor\x3dvec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position\x3du_matrix*vec4(a_pos,0,1);}"),Ye=gi("uniform highp float u_intensity;varying vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#define GAUSS_COEF 0.3989422804014327\nvoid main() {\n#pragma mapbox: initialize highp float weight\nfloat d\x3d-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val\x3dweight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor\x3dvec4(val,1.0,1.0,1.0);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor\x3dvec4(1.0);\n#endif\n}",
"uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#pragma mapbox: define mediump float radius\nconst highp float ZERO\x3d1.0/255.0/16.0;\n#define GAUSS_COEF 0.3989422804014327\nvoid main(void) {\n#pragma mapbox: initialize highp float weight\n#pragma mapbox: initialize mediump float radius\nvec2 unscaled_extrude\x3dvec2(mod(a_pos,2.0)*2.0-1.0);float S\x3dsqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude\x3dS*unscaled_extrude;vec2 extrude\x3dv_extrude*radius*u_extrude_scale;vec4 pos\x3dvec4(floor(a_pos*0.5)+extrude,0,1);gl_Position\x3du_matrix*pos;}"),
Je=gi("uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t\x3dtexture2D(u_image,v_pos).r;vec4 color\x3dtexture2D(u_color_ramp,vec2(t,0.5));gl_FragColor\x3dcolor*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor\x3dvec4(0.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position\x3du_matrix*vec4(a_pos*u_world,0,1);v_pos.x\x3da_pos.x;v_pos.y\x3d1.0-a_pos.y;}"),Qe=
gi("varying float v_placed;varying float v_notUsed;void main() {float alpha\x3d0.5;gl_FragColor\x3dvec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed \x3e 0.5) {gl_FragColor\x3dvec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed \x3e 0.5) {gl_FragColor*\x3d.1;}}","attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint\x3du_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance\x3dprojectedPoint.w;highp float collision_perspective_ratio\x3dclamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position\x3du_matrix*vec4(a_pos,0.0,1.0);gl_Position.xy+\x3d(a_extrude+a_shift)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed\x3da_placed.x;v_notUsed\x3da_placed.y;}"),
$e=gi("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha\x3d0.5*min(v_perspective_ratio,1.0);float stroke_radius\x3d0.9*max(v_perspective_ratio,1.0);float distance_to_center\x3dlength(v_extrude);float distance_to_edge\x3dabs(distance_to_center-v_radius);float opacity_t\x3dsmoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color\x3dmix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor\x3dcolor*alpha*opacity_t;}",
"attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart\x3du_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  \x3du_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/\x3drayStart.w;rayEnd.xyz  /\x3drayEnd.w;highp float t\x3d(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos\x3da_pos;float radius\x3da_radius;float collision\x3da_flags.x;float vertexIdx\x3da_flags.y;vec2 quadVertexOffset\x3dvec2(mix(-1.0,1.0,float(vertexIdx \x3e\x3d2.0)),mix(-1.0,1.0,float(vertexIdx \x3e\x3d1.0 \x26\x26 vertexIdx \x3c\x3d2.0)));vec2 quadVertexExtent\x3dquadVertexOffset*radius;vec3 tilePos\x3dtoTilePosition(quadCenterPos);vec4 clipPos\x3du_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance\x3dclipPos.w;highp float collision_perspective_ratio\x3dclamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor\x3d1.2;v_radius\x3dradius;v_extrude\x3dquadVertexExtent*padding_factor;v_perspective_ratio\x3dcollision_perspective_ratio;v_collision\x3dcollision;gl_Position\x3dvec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),
ti=gi("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color\x3dtexture2D(u_overlay,v_uv);gl_FragColor\x3dmix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv\x3da_pos/8192.0;gl_Position\x3du_matrix*vec4(a_pos*u_overlay_scale,0,1);}"),ei=gi("#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\ngl_FragColor\x3dcolor*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor\x3dvec4(1.0);\n#endif\n}",
"attribute vec2 a_pos;uniform mat4 u_matrix;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\ngl_Position\x3du_matrix*vec4(a_pos,0,1);}"),ii=gi("varying vec2 v_pos;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\nfloat dist\x3dlength(v_pos-gl_FragCoord.xy);float alpha\x3d1.0-smoothstep(0.0,1.0,dist);gl_FragColor\x3doutline_color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor\x3dvec4(1.0);\n#endif\n}",
"attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\ngl_Position\x3du_matrix*vec4(a_pos,0,1);v_pos\x3d(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}"),oi=gi("uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a\x3dpattern_from.xy;vec2 pattern_br_a\x3dpattern_from.zw;vec2 pattern_tl_b\x3dpattern_to.xy;vec2 pattern_br_b\x3dpattern_to.zw;vec2 imagecoord\x3dmod(v_pos_a,1.0);vec2 pos\x3dmix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1\x3dtexture2D(u_image,pos);vec2 imagecoord_b\x3dmod(v_pos_b,1.0);vec2 pos2\x3dmix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2\x3dtexture2D(u_image,pos2);float dist\x3dlength(v_pos-gl_FragCoord.xy);float alpha\x3d1.0-smoothstep(0.0,1.0,dist);gl_FragColor\x3dmix(color1,color2,u_fade)*alpha*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor\x3dvec4(1.0);\n#endif\n}",
"uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a\x3dpattern_from.xy;vec2 pattern_br_a\x3dpattern_from.zw;vec2 pattern_tl_b\x3dpattern_to.xy;vec2 pattern_br_b\x3dpattern_to.zw;float tileRatio\x3du_scale.x;float fromScale\x3du_scale.y;float toScale\x3du_scale.z;gl_Position\x3du_matrix*vec4(a_pos,0,1);vec2 display_size_a\x3d(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b\x3d(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a\x3dget_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b\x3dget_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos\x3d(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}"),
ri=gi("uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a\x3dpattern_from.xy;vec2 pattern_br_a\x3dpattern_from.zw;vec2 pattern_tl_b\x3dpattern_to.xy;vec2 pattern_br_b\x3dpattern_to.zw;vec2 imagecoord\x3dmod(v_pos_a,1.0);vec2 pos\x3dmix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1\x3dtexture2D(u_image,pos);vec2 imagecoord_b\x3dmod(v_pos_b,1.0);vec2 pos2\x3dmix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2\x3dtexture2D(u_image,pos2);gl_FragColor\x3dmix(color1,color2,u_fade)*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor\x3dvec4(1.0);\n#endif\n}",
"uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a\x3dpattern_from.xy;vec2 pattern_br_a\x3dpattern_from.zw;vec2 pattern_tl_b\x3dpattern_to.xy;vec2 pattern_br_b\x3dpattern_to.zw;float tileZoomRatio\x3du_scale.x;float fromScale\x3du_scale.y;float toScale\x3du_scale.z;vec2 display_size_a\x3d(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b\x3d(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position\x3du_matrix*vec4(a_pos,0,1);v_pos_a\x3dget_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b\x3dget_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}"),
ai=gi("varying vec4 v_color;void main() {gl_FragColor\x3dv_color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor\x3dvec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec4 v_color;\n#pragma mapbox: define highp float base\n#pragma mapbox: define highp float height\n#pragma mapbox: define highp vec4 color\nvoid main() {\n#pragma mapbox: initialize highp float base\n#pragma mapbox: initialize highp float height\n#pragma mapbox: initialize highp vec4 color\nvec3 normal\x3da_normal_ed.xyz;base\x3dmax(0.0,base);height\x3dmax(0.0,height);float t\x3dmod(normal.x,2.0);gl_Position\x3du_matrix*vec4(a_pos,t \x3e 0.0 ? height : base,1);float colorvalue\x3dcolor.r*0.2126+color.g*0.7152+color.b*0.0722;v_color\x3dvec4(0.0,0.0,0.0,1.0);vec4 ambientlight\x3dvec4(0.03,0.03,0.03,1.0);color+\x3dambientlight;float directional\x3dclamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional\x3dmix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !\x3d0.0) {directional*\x3d((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+\x3dclamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+\x3dclamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+\x3dclamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*\x3du_opacity;}"),
ni=gi("uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a\x3dpattern_from.xy;vec2 pattern_br_a\x3dpattern_from.zw;vec2 pattern_tl_b\x3dpattern_to.xy;vec2 pattern_br_b\x3dpattern_to.zw;vec2 imagecoord\x3dmod(v_pos_a,1.0);vec2 pos\x3dmix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1\x3dtexture2D(u_image,pos);vec2 imagecoord_b\x3dmod(v_pos_b,1.0);vec2 pos2\x3dmix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2\x3dtexture2D(u_image,pos2);vec4 mixedColor\x3dmix(color1,color2,u_fade);gl_FragColor\x3dmixedColor*v_lighting;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor\x3dvec4(1.0);\n#endif\n}",
"uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a\x3dpattern_from.xy;vec2 pattern_br_a\x3dpattern_from.zw;vec2 pattern_tl_b\x3dpattern_to.xy;vec2 pattern_br_b\x3dpattern_to.zw;float tileRatio\x3du_scale.x;float fromScale\x3du_scale.y;float toScale\x3du_scale.z;vec3 normal\x3da_normal_ed.xyz;float edgedistance\x3da_normal_ed.w;vec2 display_size_a\x3d(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b\x3d(pattern_br_b-pattern_tl_b)/pixel_ratio_to;base\x3dmax(0.0,base);height\x3dmax(0.0,height);float t\x3dmod(normal.x,2.0);float z\x3dt \x3e 0.0 ? height : base;gl_Position\x3du_matrix*vec4(a_pos,z,1);vec2 pos\x3dnormal.x\x3d\x3d1.0 \x26\x26 normal.y\x3d\x3d0.0 \x26\x26 normal.z\x3d\x3d16384.0\n? a_pos\n: vec2(edgedistance,z*u_height_factor);v_pos_a\x3dget_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b\x3dget_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting\x3dvec4(0.0,0.0,0.0,1.0);float directional\x3dclamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional\x3dmix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !\x3d0.0) {directional*\x3d((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+\x3dclamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*\x3du_opacity;}"),
si=gi("#ifdef GL_ES\nprecision highp float;\n#endif\nuniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform float u_maxzoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data\x3dtexture2D(u_image,coord)*255.0;data.a\x3d-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon\x3d1.0/u_dimension;float a\x3dgetElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b\x3dgetElevation(v_pos+vec2(0,-epsilon.y),0.0);float c\x3dgetElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d\x3dgetElevation(v_pos+vec2(-epsilon.x,0),0.0);float e\x3dgetElevation(v_pos,0.0);float f\x3dgetElevation(v_pos+vec2(epsilon.x,0),0.0);float g\x3dgetElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h\x3dgetElevation(v_pos+vec2(0,epsilon.y),0.0);float i\x3dgetElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggeration\x3du_zoom \x3c 2.0 ? 0.4 : u_zoom \x3c 4.5 ? 0.35 : 0.3;vec2 deriv\x3dvec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/ pow(2.0,(u_zoom-u_maxzoom)*exaggeration+19.2562-u_zoom);gl_FragColor\x3dclamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor\x3dvec4(1.0);\n#endif\n}",
"uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position\x3du_matrix*vec4(a_pos,0,1);highp vec2 epsilon\x3d1.0/u_dimension;float scale\x3d(u_dimension.x-2.0)/u_dimension.x;v_pos\x3d(a_texture_pos/8192.0)*scale+epsilon;}"),li=gi("uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;\n#define PI 3.141592653589793\nvoid main() {vec4 pixel\x3dtexture2D(u_image,v_pos);vec2 deriv\x3d((pixel.rg*2.0)-1.0);float scaleFactor\x3dcos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope\x3datan(1.25*length(deriv)/scaleFactor);float aspect\x3dderiv.x !\x3d0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y \x3e 0.0 ? 1.0 :-1.0);float intensity\x3du_light.x;float azimuth\x3du_light.y+PI;float base\x3d1.875-intensity*1.75;float maxValue\x3d0.5*PI;float scaledSlope\x3dintensity !\x3d0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent\x3dcos(scaledSlope);vec4 accent_color\x3d(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade\x3dabs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color\x3dmix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor\x3daccent_color*(1.0-shade_color.a)+shade_color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor\x3dvec4(1.0);\n#endif\n}",
"uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position\x3du_matrix*vec4(a_pos,0,1);v_pos\x3da_texture_pos/8192.0;}"),ci=gi("uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nfloat dist\x3dlength(v_normal)*v_width2.s;float blur2\x3d(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha\x3dclamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor\x3dcolor*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor\x3dvec4(1.0);\n#endif\n}",
"\n#define scale 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\nfloat ANTIALIASING\x3d1.0/u_device_pixel_ratio/2.0;vec2 a_extrude\x3da_data.xy-128.0;float a_direction\x3dmod(a_data.z,4.0)-1.0;v_linesofar\x3d(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos\x3dfloor(a_pos_normal*0.5);mediump vec2 normal\x3da_pos_normal-2.0*pos;normal.y\x3dnormal.y*2.0-1.0;v_normal\x3dnormal;gapwidth\x3dgapwidth/2.0;float halfwidth\x3dwidth/2.0;offset\x3d-1.0*offset;float inset\x3dgapwidth+(gapwidth \x3e 0.0 ? ANTIALIASING : 0.0);float outset\x3dgapwidth+halfwidth*(gapwidth \x3e 0.0 ? 2.0 : 1.0)+(halfwidth\x3d\x3d0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist\x3doutset*a_extrude*scale;mediump float u\x3d0.5*a_direction;mediump float t\x3d1.0-abs(u);mediump vec2 offset2\x3doffset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude\x3du_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position\x3du_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective\x3dlength(dist);float extrude_length_with_perspective\x3dlength(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale\x3dextrude_length_without_perspective/extrude_length_with_perspective;v_width2\x3dvec2(outset,inset);}"),
ui=gi("uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp float v_lineprogress;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nfloat dist\x3dlength(v_normal)*v_width2.s;float blur2\x3d(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha\x3dclamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color\x3dtexture2D(u_image,vec2(v_lineprogress,0.5));gl_FragColor\x3dcolor*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor\x3dvec4(1.0);\n#endif\n}",
"\n#define MAX_LINE_DISTANCE 32767.0\n#define scale 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_lineprogress;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\nfloat ANTIALIASING\x3d1.0/u_device_pixel_ratio/2.0;vec2 a_extrude\x3da_data.xy-128.0;float a_direction\x3dmod(a_data.z,4.0)-1.0;v_lineprogress\x3d(floor(a_data.z/4.0)+a_data.w*64.0)*2.0/MAX_LINE_DISTANCE;vec2 pos\x3dfloor(a_pos_normal*0.5);mediump vec2 normal\x3da_pos_normal-2.0*pos;normal.y\x3dnormal.y*2.0-1.0;v_normal\x3dnormal;gapwidth\x3dgapwidth/2.0;float halfwidth\x3dwidth/2.0;offset\x3d-1.0*offset;float inset\x3dgapwidth+(gapwidth \x3e 0.0 ? ANTIALIASING : 0.0);float outset\x3dgapwidth+halfwidth*(gapwidth \x3e 0.0 ? 2.0 : 1.0)+(halfwidth\x3d\x3d0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist\x3doutset*a_extrude*scale;mediump float u\x3d0.5*a_direction;mediump float t\x3d1.0-abs(u);mediump vec2 offset2\x3doffset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude\x3du_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position\x3du_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective\x3dlength(dist);float extrude_length_with_perspective\x3dlength(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale\x3dextrude_length_without_perspective/extrude_length_with_perspective;v_width2\x3dvec2(outset,inset);}"),
hi=gi("uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nvec2 pattern_tl_a\x3dpattern_from.xy;vec2 pattern_br_a\x3dpattern_from.zw;vec2 pattern_tl_b\x3dpattern_to.xy;vec2 pattern_br_b\x3dpattern_to.zw;float tileZoomRatio\x3du_scale.x;float fromScale\x3du_scale.y;float toScale\x3du_scale.z;vec2 display_size_a\x3d(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b\x3d(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a\x3dvec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b\x3dvec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a\x3ddisplay_size_a.y/v_width;float aspect_b\x3ddisplay_size_b.y/v_width;float dist\x3dlength(v_normal)*v_width2.s;float blur2\x3d(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha\x3dclamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a\x3dmod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b\x3dmod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y\x3d0.5*v_normal.y+0.5;vec2 texel_size\x3d1.0/u_texsize;vec2 pos_a\x3dmix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b\x3dmix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color\x3dmix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor\x3dcolor*alpha*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor\x3dvec4(1.0);\n#endif\n}",
"\n#define scale 0.015873016\n#define LINE_DISTANCE_SCALE 2.0\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nfloat ANTIALIASING\x3d1.0/u_device_pixel_ratio/2.0;vec2 a_extrude\x3da_data.xy-128.0;float a_direction\x3dmod(a_data.z,4.0)-1.0;float a_linesofar\x3d(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos\x3dfloor(a_pos_normal*0.5);mediump vec2 normal\x3da_pos_normal-2.0*pos;normal.y\x3dnormal.y*2.0-1.0;v_normal\x3dnormal;gapwidth\x3dgapwidth/2.0;float halfwidth\x3dwidth/2.0;offset\x3d-1.0*offset;float inset\x3dgapwidth+(gapwidth \x3e 0.0 ? ANTIALIASING : 0.0);float outset\x3dgapwidth+halfwidth*(gapwidth \x3e 0.0 ? 2.0 : 1.0)+(halfwidth\x3d\x3d0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist\x3doutset*a_extrude*scale;mediump float u\x3d0.5*a_direction;mediump float t\x3d1.0-abs(u);mediump vec2 offset2\x3doffset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude\x3du_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position\x3du_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective\x3dlength(dist);float extrude_length_with_perspective\x3dlength(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale\x3dextrude_length_without_perspective/extrude_length_with_perspective;v_linesofar\x3da_linesofar;v_width2\x3dvec2(outset,inset);v_width\x3dfloorwidth;}"),
pi=gi("uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\nfloat dist\x3dlength(v_normal)*v_width2.s;float blur2\x3d(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha\x3dclamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a\x3dtexture2D(u_image,v_tex_a).a;float sdfdist_b\x3dtexture2D(u_image,v_tex_b).a;float sdfdist\x3dmix(sdfdist_a,sdfdist_b,u_mix);alpha*\x3dsmoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor\x3dcolor*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor\x3dvec4(1.0);\n#endif\n}",
"\n#define scale 0.015873016\n#define LINE_DISTANCE_SCALE 2.0\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\nfloat ANTIALIASING\x3d1.0/u_device_pixel_ratio/2.0;vec2 a_extrude\x3da_data.xy-128.0;float a_direction\x3dmod(a_data.z,4.0)-1.0;float a_linesofar\x3d(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos\x3dfloor(a_pos_normal*0.5);mediump vec2 normal\x3da_pos_normal-2.0*pos;normal.y\x3dnormal.y*2.0-1.0;v_normal\x3dnormal;gapwidth\x3dgapwidth/2.0;float halfwidth\x3dwidth/2.0;offset\x3d-1.0*offset;float inset\x3dgapwidth+(gapwidth \x3e 0.0 ? ANTIALIASING : 0.0);float outset\x3dgapwidth+halfwidth*(gapwidth \x3e 0.0 ? 2.0 : 1.0)+(halfwidth\x3d\x3d0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist\x3doutset*a_extrude*scale;mediump float u\x3d0.5*a_direction;mediump float t\x3d1.0-abs(u);mediump vec2 offset2\x3doffset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude\x3du_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position\x3du_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective\x3dlength(dist);float extrude_length_with_perspective\x3dlength(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale\x3dextrude_length_without_perspective/extrude_length_with_perspective;v_tex_a\x3dvec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b\x3dvec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2\x3dvec2(outset,inset);}"),
di=gi("uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0\x3dtexture2D(u_image0,v_pos0);vec4 color1\x3dtexture2D(u_image1,v_pos1);if (color0.a \x3e 0.0) {color0.rgb\x3dcolor0.rgb/color0.a;}if (color1.a \x3e 0.0) {color1.rgb\x3dcolor1.rgb/color1.a;}vec4 color\x3dmix(color0,color1,u_fade_t);color.a*\x3du_opacity;vec3 rgb\x3dcolor.rgb;rgb\x3dvec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average\x3d(color.r+color.g+color.b)/3.0;rgb+\x3d(average-rgb)*u_saturation_factor;rgb\x3d(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec\x3dvec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec\x3dvec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor\x3dvec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor\x3dvec4(1.0);\n#endif\n}",
"uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position\x3du_matrix*vec4(a_pos,0,1);v_pos0\x3d(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1\x3d(v_pos0*u_scale_parent)+u_tl_parent;}"),_i=gi("uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\nlowp float alpha\x3dopacity*v_fade_opacity;gl_FragColor\x3dtexture2D(u_texture,v_tex)*alpha;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor\x3dvec4(1.0);\n#endif\n}",
"const float PI\x3d3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\nvec2 a_pos\x3da_pos_offset.xy;vec2 a_offset\x3da_pos_offset.zw;vec2 a_tex\x3da_data.xy;vec2 a_size\x3da_data.zw;float a_size_min\x3dfloor(a_size[0]*0.5);vec2 a_pxoffset\x3da_pixeloffset.xy;vec2 a_minFontScale\x3da_pixeloffset.zw/256.0;highp float segment_angle\x3d-a_projected_pos[2];float size;if (!u_is_size_zoom_constant \x26\x26 !u_is_size_feature_constant) {size\x3dmix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant \x26\x26 !u_is_size_feature_constant) {size\x3da_size_min/128.0;} else {size\x3du_size;}vec4 projectedPoint\x3du_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance\x3dprojectedPoint.w;highp float distance_ratio\x3du_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio\x3dclamp(0.5+0.5*distance_ratio,0.0,4.0);size*\x3dperspective_ratio;float fontScale\x3du_is_text ? size/24.0 : size;highp float symbol_rotation\x3d0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint\x3du_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a\x3dprojectedPoint.xy/projectedPoint.w;vec2 b\x3doffsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation\x3datan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin\x3dsin(segment_angle+symbol_rotation);highp float angle_cos\x3dcos(segment_angle+symbol_rotation);mat2 rotation_matrix\x3dmat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos\x3du_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position\x3du_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0),0.0,1.0);v_tex\x3da_tex/u_texsize;vec2 fade_opacity\x3dunpack_opacity(a_fade_opacity);float fade_change\x3dfade_opacity[1] \x3e 0.5 ? u_fade_change :-u_fade_change;v_fade_opacity\x3dmax(0.0,min(1.0,fade_opacity[0]+fade_change));}"),
fi=gi("#define SDF_PX 8.0\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nfloat EDGE_GAMMA\x3d0.105/u_device_pixel_ratio;vec2 tex\x3dv_data0.xy;float gamma_scale\x3dv_data1.x;float size\x3dv_data1.y;float fade_opacity\x3dv_data1[2];float fontScale\x3du_is_text ? size/24.0 : size;lowp vec4 color\x3dfill_color;highp float gamma\x3dEDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff\x3d(256.0-64.0)/256.0;if (u_is_halo) {color\x3dhalo_color;gamma\x3d(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff\x3d(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist\x3dtexture2D(u_texture,tex).a;highp float gamma_scaled\x3dgamma*gamma_scale;highp float alpha\x3dsmoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor\x3dcolor*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor\x3dvec4(1.0);\n#endif\n}",
"const float PI\x3d3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos\x3da_pos_offset.xy;vec2 a_offset\x3da_pos_offset.zw;vec2 a_tex\x3da_data.xy;vec2 a_size\x3da_data.zw;float a_size_min\x3dfloor(a_size[0]*0.5);vec2 a_pxoffset\x3da_pixeloffset.xy;highp float segment_angle\x3d-a_projected_pos[2];float size;if (!u_is_size_zoom_constant \x26\x26 !u_is_size_feature_constant) {size\x3dmix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant \x26\x26 !u_is_size_feature_constant) {size\x3da_size_min/128.0;} else {size\x3du_size;}vec4 projectedPoint\x3du_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance\x3dprojectedPoint.w;highp float distance_ratio\x3du_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio\x3dclamp(0.5+0.5*distance_ratio,0.0,4.0);size*\x3dperspective_ratio;float fontScale\x3du_is_text ? size/24.0 : size;highp float symbol_rotation\x3d0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint\x3du_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a\x3dprojectedPoint.xy/projectedPoint.w;vec2 b\x3doffsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation\x3datan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin\x3dsin(segment_angle+symbol_rotation);highp float angle_cos\x3dcos(segment_angle+symbol_rotation);mat2 rotation_matrix\x3dmat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos\x3du_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position\x3du_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset),0.0,1.0);float gamma_scale\x3dgl_Position.w;vec2 fade_opacity\x3dunpack_opacity(a_fade_opacity);float fade_change\x3dfade_opacity[1] \x3e 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity\x3dmax(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0\x3da_tex/u_texsize;v_data1\x3dvec3(gamma_scale,size,interpolated_fade_opacity);}"),
mi=gi("#define SDF_PX 8.0\n#define SDF 1.0\n#define ICON 0.0\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nfloat fade_opacity\x3dv_data1[2];if (v_data1.w\x3d\x3dICON) {vec2 tex_icon\x3dv_data0.zw;lowp float alpha\x3dopacity*fade_opacity;gl_FragColor\x3dtexture2D(u_texture_icon,tex_icon)*alpha;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor\x3dvec4(1.0);\n#endif\nreturn;}vec2 tex\x3dv_data0.xy;float EDGE_GAMMA\x3d0.105/u_device_pixel_ratio;float gamma_scale\x3dv_data1.x;float size\x3dv_data1.y;float fontScale\x3dsize/24.0;lowp vec4 color\x3dfill_color;highp float gamma\x3dEDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff\x3d(256.0-64.0)/256.0;if (u_is_halo) {color\x3dhalo_color;gamma\x3d(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff\x3d(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist\x3dtexture2D(u_texture,tex).a;highp float gamma_scaled\x3dgamma*gamma_scale;highp float alpha\x3dsmoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor\x3dcolor*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor\x3dvec4(1.0);\n#endif\n}",
"const float PI\x3d3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;varying vec4 v_data0;varying vec4 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos\x3da_pos_offset.xy;vec2 a_offset\x3da_pos_offset.zw;vec2 a_tex\x3da_data.xy;vec2 a_size\x3da_data.zw;float a_size_min\x3dfloor(a_size[0]*0.5);float is_sdf\x3da_size[0]-2.0*a_size_min;highp float segment_angle\x3d-a_projected_pos[2];float size;if (!u_is_size_zoom_constant \x26\x26 !u_is_size_feature_constant) {size\x3dmix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant \x26\x26 !u_is_size_feature_constant) {size\x3da_size_min/128.0;} else {size\x3du_size;}vec4 projectedPoint\x3du_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance\x3dprojectedPoint.w;highp float distance_ratio\x3du_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio\x3dclamp(0.5+0.5*distance_ratio,0.0,4.0);size*\x3dperspective_ratio;float fontScale\x3dsize/24.0;highp float symbol_rotation\x3d0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint\x3du_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a\x3dprojectedPoint.xy/projectedPoint.w;vec2 b\x3doffsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation\x3datan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin\x3dsin(segment_angle+symbol_rotation);highp float angle_cos\x3dcos(segment_angle+symbol_rotation);mat2 rotation_matrix\x3dmat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos\x3du_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position\x3du_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),0.0,1.0);float gamma_scale\x3dgl_Position.w;vec2 fade_opacity\x3dunpack_opacity(a_fade_opacity);float fade_change\x3dfade_opacity[1] \x3e 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity\x3dmax(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0.xy\x3da_tex/u_texsize;v_data0.zw\x3da_tex/u_texsize_icon;v_data1\x3dvec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}"),
vi=Object.freeze({__proto__:null,prelude:Ge,background:We,backgroundPattern:Xe,circle:He,clippingMask:Ke,heatmap:Ye,heatmapTexture:Je,collisionBox:Qe,collisionCircle:$e,debug:ti,fill:ei,fillOutline:ii,fillOutlinePattern:oi,fillPattern:ri,fillExtrusion:ai,fillExtrusionPattern:ni,hillshadePrepare:si,hillshade:li,line:ci,lineGradient:ui,linePattern:hi,lineSDF:pi,raster:di,symbolIcon:_i,symbolSDF:fi,symbolTextAndIcon:mi}),yi=function(){this.boundLayoutVertexBuffer=this.boundProgram=null;this.boundPaintVertexBuffers=
[];this.vao=this.boundDynamicVertexBuffer=this.boundVertexOffset=this.boundIndexBuffer=null};yi.prototype.bind=function(t,e,i,o,r,a,n,s){this.context=t;for(var l=this.boundPaintVertexBuffers.length!==o.length,c=0;!l&&c<o.length;c++)this.boundPaintVertexBuffers[c]!==o[c]&&(l=!0);t.extVertexArrayObject&&this.vao&&this.boundProgram===e&&this.boundLayoutVertexBuffer===i&&!l&&this.boundIndexBuffer===r&&this.boundVertexOffset===a&&this.boundDynamicVertexBuffer===n&&this.boundDynamicVertexBuffer2===s?(t.bindVertexArrayOES.set(this.vao),
n&&n.bind(),r&&r.dynamicDraw&&r.bind(),s&&s.bind()):this.freshBind(e,i,o,r,a,n,s)};yi.prototype.freshBind=function(t,e,i,o,r,a,n){var l=t.numAttributes,c=this.context,u=c.gl;if(c.extVertexArrayObject)this.vao&&this.destroy(),this.vao=c.extVertexArrayObject.createVertexArrayOES(),c.bindVertexArrayOES.set(this.vao),this.boundProgram=t,this.boundLayoutVertexBuffer=e,this.boundPaintVertexBuffers=i,this.boundIndexBuffer=o,this.boundVertexOffset=r,this.boundDynamicVertexBuffer=a,this.boundDynamicVertexBuffer2=
n;else{var s=c.currentNumAttributes||0;for(var h=l;h<s;h++)u.disableVertexAttribArray(h)}e.enableAttributes(u,t);for(s=0;s<i.length;s+=1)i[s].enableAttributes(u,t);a&&a.enableAttributes(u,t);n&&n.enableAttributes(u,t);e.bind();e.setVertexAttribPointers(u,t,r);for(e=0;e<i.length;e+=1)s=i[e],s.bind(),s.setVertexAttribPointers(u,t,r);a&&(a.bind(),a.setVertexAttribPointers(u,t,r));o&&o.bind();n&&(n.bind(),n.setVertexAttribPointers(u,t,r));c.currentNumAttributes=l};yi.prototype.destroy=function(){this.vao&&
(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)};var bi=function(t,e,i,o,r,a){e=t.gl;this.program=e.createProgram();var s=xi(i.staticAttributes),l=o?o.getBinderAttributes():[];l=s.concat(l);var u=i.staticUniforms?xi(i.staticUniforms):[],h=o?o.getBinderUniforms():[];s=[];var d=0;for(u=u.concat(h);d<u.length;d+=1)h=u[d],0>s.indexOf(h)&&s.push(h);u=o?o.defines():[];a&&u.push("#define OVERDRAW_INSPECTOR;");d=u.concat(Ge.fragmentSource,i.fragmentSource).join("\n");i=u.concat(Ge.vertexSource,
i.vertexSource).join("\n");a=e.createShader(e.FRAGMENT_SHADER);if(e.isContextLost())this.failedToCreate=!0;else if(e.shaderSource(a,d),e.compileShader(a),e.attachShader(this.program,a),d=e.createShader(e.VERTEX_SHADER),e.isContextLost())this.failedToCreate=!0;else{e.shaderSource(d,i);e.compileShader(d);e.attachShader(this.program,d);this.attributes={};i={};this.numAttributes=l.length;for(u=0;u<this.numAttributes;u++)l[u]&&(e.bindAttribLocation(this.program,u,l[u]),this.attributes[l[u]]=u);e.linkProgram(this.program);
e.deleteShader(d);e.deleteShader(a);for(l=0;l<s.length;l++)(a=s[l])&&!i[a]&&(d=e.getUniformLocation(this.program,a))&&(i[a]=d);this.fixedUniforms=r(t,i);this.binderUniforms=o?o.getUniforms(t,i):[]}};bi.prototype.draw=function(t,e,i,o,r,a,n,s,l,c,u,h,p,d,_,f){var m,g=t.gl;if(!this.failedToCreate){for(var v in t.program.set(this.program),t.setDepthMode(i),t.setStencilMode(o),t.setColorMode(r),t.setCullFace(a),this.fixedUniforms)this.fixedUniforms[v].set(n[v]);d&&d.setUniforms(t,this.binderUniforms,
h,{zoom:p});i=(m={},m[g.LINES]=2,m[g.TRIANGLES]=3,m[g.LINE_STRIP]=1,m)[e];m=0;for(u=u.get();m<u.length;m+=1)o=u[m],r=o.vaos||(o.vaos={}),(r[s]||(r[s]=new yi)).bind(t,this,l,d?d.getPaintVertexBuffers():[],c,o.vertexOffset,_,f),g.drawElements(e,o.primitiveLength*i,g.UNSIGNED_SHORT,o.primitiveOffset*i*2)}};var Ti=function(e,i,o,r){var a=i.style.light,n=a.properties.get("position");n=[n.x,n.y,n.z];var l=t$jscomp$2.create$1();"viewport"===a.properties.get("anchor")&&t$jscomp$2.fromRotation(l,-i.transform.angle);
t$jscomp$2.transformMat3(n,n,l);i=a.properties.get("color");return{u_matrix:e,u_lightpos:n,u_lightintensity:a.properties.get("intensity"),u_lightcolor:[i.r,i.g,i.b],u_vertical_gradient:+o,u_opacity:r}},zi=function(e,i,o,r){var s=e.transform;if("map"===r.paint.get("circle-pitch-alignment")){var n=pe(o,1,s.zoom);var a=!0;n=[n,n]}else a=!1,n=s.pixelsToGLUnits;return{u_camera_to_center_distance:s.cameraToCenterDistance,u_scale_with_map:+("map"===r.paint.get("circle-pitch-scale")),u_matrix:e.translatePosMatrix(i.posMatrix,
o,r.paint.get("circle-translate"),r.paint.get("circle-translate-anchor")),u_pitch_with_map:+a,u_device_pixel_ratio:t$jscomp$2.browser.devicePixelRatio,u_extrude_scale:n}},Di=function(t,e,i){var o=pe(i,1,e.zoom),r=Math.pow(2,e.zoom-i.tileID.overscaledZ);i=i.tileID.overscaleFactor();return{u_matrix:t,u_camera_to_center_distance:e.cameraToCenterDistance,u_pixels_to_tile_units:o,u_extrude_scale:[e.pixelsToGLUnits[0]/(o*r),e.pixelsToGLUnits[1]/(o*r)],u_overscale_factor:i}},Li=function(t,e,i){return void 0===
i&&(i=1),{u_matrix:t,u_color:e,u_overlay:0,u_overlay_scale:i}},Ri=function(t,e,i,o){return{u_matrix:t,u_extrude_scale:pe(e,1,i),u_intensity:o}},ki=function(e,i,o){var r=e.transform;return{u_matrix:Ni(e,i,o),u_ratio:1/pe(i,1,r.zoom),u_device_pixel_ratio:t$jscomp$2.browser.devicePixelRatio,u_units_to_pixels:[1/r.pixelsToGLUnits[0],1/r.pixelsToGLUnits[1]]}},qi,Vi=function(t,e,i,o,r,a,n,s,l,c){var u=r.transform;return{u_is_size_zoom_constant:+("constant"===t||"source"===t),u_is_size_feature_constant:+("constant"===
t||"camera"===t),u_size_t:e?e.uSizeT:0,u_size:e?e.uSize:0,u_camera_to_center_distance:u.cameraToCenterDistance,u_pitch:u.pitch/360*2*Math.PI,u_rotate_symbol:+i,u_aspect_ratio:u.width/u.height,u_fade_change:r.options.fadeDuration?r.symbolFadeChange:1,u_matrix:a,u_label_plane_matrix:n,u_coord_matrix:s,u_is_text:+l,u_pitch_with_map:+o,u_texsize:c,u_texture:0}},Gi=function(e,i,o,r,a,n,s,l,c,u,h){var p=a.transform;return t$jscomp$2.extend(Vi(e,i,o,r,a,n,s,l,c,u),{u_gamma_scale:r?Math.cos(p._pitch)*p.cameraToCenterDistance:
1,u_device_pixel_ratio:t$jscomp$2.browser.devicePixelRatio,u_is_halo:+h})},Wi=function(e,i,o,r,a,n,s,l,c,u){return t$jscomp$2.extend(Gi(e,i,o,r,a,n,s,l,!0,c,!0),{u_texsize_icon:u,u_texture_icon:1})},Hi=function(e$jscomp$0,i$jscomp$0,o$jscomp$0,r$jscomp$0,a,n$jscomp$0){return t$jscomp$2.extend(function(t,e,i,o){var r=i.imageManager.getPattern(t.from.toString());t=i.imageManager.getPattern(t.to.toString());var n=i.imageManager.getPixelSize(),c=Math.pow(2,o.tileID.overscaledZ),u=o.tileSize*Math.pow(2,
i.transform.tileZoom)/c;c=u*(o.tileID.canonical.x+o.tileID.wrap*c);u*=o.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:r.tl,u_pattern_br_a:r.br,u_pattern_tl_b:t.tl,u_pattern_br_b:t.br,u_texsize:[n.width,n.height],u_mix:e.t,u_pattern_size_a:r.displaySize,u_pattern_size_b:t.displaySize,u_scale_a:e.fromScale,u_scale_b:e.toScale,u_tile_units_to_pixels:1/pe(o,1,i.transform.tileZoom),u_pixel_coord_upper:[c>>16,u>>16],u_pixel_coord_lower:[65535&c,65535&u]}}(r$jscomp$0,n$jscomp$0,o$jscomp$0,a),{u_matrix:e$jscomp$0,
u_opacity:i$jscomp$0})},Ki={fillExtrusion:function(e,i){return{u_matrix:new t$jscomp$2.UniformMatrix4f(e,i.u_matrix),u_lightpos:new t$jscomp$2.Uniform3f(e,i.u_lightpos),u_lightintensity:new t$jscomp$2.Uniform1f(e,i.u_lightintensity),u_lightcolor:new t$jscomp$2.Uniform3f(e,i.u_lightcolor),u_vertical_gradient:new t$jscomp$2.Uniform1f(e,i.u_vertical_gradient),u_opacity:new t$jscomp$2.Uniform1f(e,i.u_opacity)}},fillExtrusionPattern:function(e,i){return{u_matrix:new t$jscomp$2.UniformMatrix4f(e,i.u_matrix),
u_lightpos:new t$jscomp$2.Uniform3f(e,i.u_lightpos),u_lightintensity:new t$jscomp$2.Uniform1f(e,i.u_lightintensity),u_lightcolor:new t$jscomp$2.Uniform3f(e,i.u_lightcolor),u_vertical_gradient:new t$jscomp$2.Uniform1f(e,i.u_vertical_gradient),u_height_factor:new t$jscomp$2.Uniform1f(e,i.u_height_factor),u_image:new t$jscomp$2.Uniform1i(e,i.u_image),u_texsize:new t$jscomp$2.Uniform2f(e,i.u_texsize),u_pixel_coord_upper:new t$jscomp$2.Uniform2f(e,i.u_pixel_coord_upper),u_pixel_coord_lower:new t$jscomp$2.Uniform2f(e,
i.u_pixel_coord_lower),u_scale:new t$jscomp$2.Uniform3f(e,i.u_scale),u_fade:new t$jscomp$2.Uniform1f(e,i.u_fade),u_opacity:new t$jscomp$2.Uniform1f(e,i.u_opacity)}},fill:function(e,i){return{u_matrix:new t$jscomp$2.UniformMatrix4f(e,i.u_matrix)}},fillPattern:function(e,i){return{u_matrix:new t$jscomp$2.UniformMatrix4f(e,i.u_matrix),u_image:new t$jscomp$2.Uniform1i(e,i.u_image),u_texsize:new t$jscomp$2.Uniform2f(e,i.u_texsize),u_pixel_coord_upper:new t$jscomp$2.Uniform2f(e,i.u_pixel_coord_upper),u_pixel_coord_lower:new t$jscomp$2.Uniform2f(e,
i.u_pixel_coord_lower),u_scale:new t$jscomp$2.Uniform3f(e,i.u_scale),u_fade:new t$jscomp$2.Uniform1f(e,i.u_fade)}},fillOutline:function(e,i){return{u_matrix:new t$jscomp$2.UniformMatrix4f(e,i.u_matrix),u_world:new t$jscomp$2.Uniform2f(e,i.u_world)}},fillOutlinePattern:function(e,i){return{u_matrix:new t$jscomp$2.UniformMatrix4f(e,i.u_matrix),u_world:new t$jscomp$2.Uniform2f(e,i.u_world),u_image:new t$jscomp$2.Uniform1i(e,i.u_image),u_texsize:new t$jscomp$2.Uniform2f(e,i.u_texsize),u_pixel_coord_upper:new t$jscomp$2.Uniform2f(e,
i.u_pixel_coord_upper),u_pixel_coord_lower:new t$jscomp$2.Uniform2f(e,i.u_pixel_coord_lower),u_scale:new t$jscomp$2.Uniform3f(e,i.u_scale),u_fade:new t$jscomp$2.Uniform1f(e,i.u_fade)}},circle:function(e,i){return{u_camera_to_center_distance:new t$jscomp$2.Uniform1f(e,i.u_camera_to_center_distance),u_scale_with_map:new t$jscomp$2.Uniform1i(e,i.u_scale_with_map),u_pitch_with_map:new t$jscomp$2.Uniform1i(e,i.u_pitch_with_map),u_extrude_scale:new t$jscomp$2.Uniform2f(e,i.u_extrude_scale),u_device_pixel_ratio:new t$jscomp$2.Uniform1f(e,
i.u_device_pixel_ratio),u_matrix:new t$jscomp$2.UniformMatrix4f(e,i.u_matrix)}},collisionBox:function(e,i){return{u_matrix:new t$jscomp$2.UniformMatrix4f(e,i.u_matrix),u_camera_to_center_distance:new t$jscomp$2.Uniform1f(e,i.u_camera_to_center_distance),u_pixels_to_tile_units:new t$jscomp$2.Uniform1f(e,i.u_pixels_to_tile_units),u_extrude_scale:new t$jscomp$2.Uniform2f(e,i.u_extrude_scale),u_overscale_factor:new t$jscomp$2.Uniform1f(e,i.u_overscale_factor)}},collisionCircle:function(e,i){return{u_matrix:new t$jscomp$2.UniformMatrix4f(e,
i.u_matrix),u_inv_matrix:new t$jscomp$2.UniformMatrix4f(e,i.u_inv_matrix),u_camera_to_center_distance:new t$jscomp$2.Uniform1f(e,i.u_camera_to_center_distance),u_viewport_size:new t$jscomp$2.Uniform2f(e,i.u_viewport_size)}},debug:function(e,i){return{u_color:new t$jscomp$2.UniformColor(e,i.u_color),u_matrix:new t$jscomp$2.UniformMatrix4f(e,i.u_matrix),u_overlay:new t$jscomp$2.Uniform1i(e,i.u_overlay),u_overlay_scale:new t$jscomp$2.Uniform1f(e,i.u_overlay_scale)}},clippingMask:function(e,i){return{u_matrix:new t$jscomp$2.UniformMatrix4f(e,
i.u_matrix)}},heatmap:function(e,i){return{u_extrude_scale:new t$jscomp$2.Uniform1f(e,i.u_extrude_scale),u_intensity:new t$jscomp$2.Uniform1f(e,i.u_intensity),u_matrix:new t$jscomp$2.UniformMatrix4f(e,i.u_matrix)}},heatmapTexture:function(e,i){return{u_matrix:new t$jscomp$2.UniformMatrix4f(e,i.u_matrix),u_world:new t$jscomp$2.Uniform2f(e,i.u_world),u_image:new t$jscomp$2.Uniform1i(e,i.u_image),u_color_ramp:new t$jscomp$2.Uniform1i(e,i.u_color_ramp),u_opacity:new t$jscomp$2.Uniform1f(e,i.u_opacity)}},
hillshade:function(e,i){return{u_matrix:new t$jscomp$2.UniformMatrix4f(e,i.u_matrix),u_image:new t$jscomp$2.Uniform1i(e,i.u_image),u_latrange:new t$jscomp$2.Uniform2f(e,i.u_latrange),u_light:new t$jscomp$2.Uniform2f(e,i.u_light),u_shadow:new t$jscomp$2.UniformColor(e,i.u_shadow),u_highlight:new t$jscomp$2.UniformColor(e,i.u_highlight),u_accent:new t$jscomp$2.UniformColor(e,i.u_accent)}},hillshadePrepare:function(e,i){return{u_matrix:new t$jscomp$2.UniformMatrix4f(e,i.u_matrix),u_image:new t$jscomp$2.Uniform1i(e,
i.u_image),u_dimension:new t$jscomp$2.Uniform2f(e,i.u_dimension),u_zoom:new t$jscomp$2.Uniform1f(e,i.u_zoom),u_maxzoom:new t$jscomp$2.Uniform1f(e,i.u_maxzoom),u_unpack:new t$jscomp$2.Uniform4f(e,i.u_unpack)}},line:function(e,i){return{u_matrix:new t$jscomp$2.UniformMatrix4f(e,i.u_matrix),u_ratio:new t$jscomp$2.Uniform1f(e,i.u_ratio),u_device_pixel_ratio:new t$jscomp$2.Uniform1f(e,i.u_device_pixel_ratio),u_units_to_pixels:new t$jscomp$2.Uniform2f(e,i.u_units_to_pixels)}},lineGradient:function(e,i){return{u_matrix:new t$jscomp$2.UniformMatrix4f(e,
i.u_matrix),u_ratio:new t$jscomp$2.Uniform1f(e,i.u_ratio),u_device_pixel_ratio:new t$jscomp$2.Uniform1f(e,i.u_device_pixel_ratio),u_units_to_pixels:new t$jscomp$2.Uniform2f(e,i.u_units_to_pixels),u_image:new t$jscomp$2.Uniform1i(e,i.u_image)}},linePattern:function(e,i){return{u_matrix:new t$jscomp$2.UniformMatrix4f(e,i.u_matrix),u_texsize:new t$jscomp$2.Uniform2f(e,i.u_texsize),u_ratio:new t$jscomp$2.Uniform1f(e,i.u_ratio),u_device_pixel_ratio:new t$jscomp$2.Uniform1f(e,i.u_device_pixel_ratio),u_image:new t$jscomp$2.Uniform1i(e,
i.u_image),u_units_to_pixels:new t$jscomp$2.Uniform2f(e,i.u_units_to_pixels),u_scale:new t$jscomp$2.Uniform3f(e,i.u_scale),u_fade:new t$jscomp$2.Uniform1f(e,i.u_fade)}},lineSDF:function(e,i){return{u_matrix:new t$jscomp$2.UniformMatrix4f(e,i.u_matrix),u_ratio:new t$jscomp$2.Uniform1f(e,i.u_ratio),u_device_pixel_ratio:new t$jscomp$2.Uniform1f(e,i.u_device_pixel_ratio),u_units_to_pixels:new t$jscomp$2.Uniform2f(e,i.u_units_to_pixels),u_patternscale_a:new t$jscomp$2.Uniform2f(e,i.u_patternscale_a),u_patternscale_b:new t$jscomp$2.Uniform2f(e,
i.u_patternscale_b),u_sdfgamma:new t$jscomp$2.Uniform1f(e,i.u_sdfgamma),u_image:new t$jscomp$2.Uniform1i(e,i.u_image),u_tex_y_a:new t$jscomp$2.Uniform1f(e,i.u_tex_y_a),u_tex_y_b:new t$jscomp$2.Uniform1f(e,i.u_tex_y_b),u_mix:new t$jscomp$2.Uniform1f(e,i.u_mix)}},raster:function(e,i){return{u_matrix:new t$jscomp$2.UniformMatrix4f(e,i.u_matrix),u_tl_parent:new t$jscomp$2.Uniform2f(e,i.u_tl_parent),u_scale_parent:new t$jscomp$2.Uniform1f(e,i.u_scale_parent),u_buffer_scale:new t$jscomp$2.Uniform1f(e,i.u_buffer_scale),
u_fade_t:new t$jscomp$2.Uniform1f(e,i.u_fade_t),u_opacity:new t$jscomp$2.Uniform1f(e,i.u_opacity),u_image0:new t$jscomp$2.Uniform1i(e,i.u_image0),u_image1:new t$jscomp$2.Uniform1i(e,i.u_image1),u_brightness_low:new t$jscomp$2.Uniform1f(e,i.u_brightness_low),u_brightness_high:new t$jscomp$2.Uniform1f(e,i.u_brightness_high),u_saturation_factor:new t$jscomp$2.Uniform1f(e,i.u_saturation_factor),u_contrast_factor:new t$jscomp$2.Uniform1f(e,i.u_contrast_factor),u_spin_weights:new t$jscomp$2.Uniform3f(e,
i.u_spin_weights)}},symbolIcon:function(e,i){return{u_is_size_zoom_constant:new t$jscomp$2.Uniform1i(e,i.u_is_size_zoom_constant),u_is_size_feature_constant:new t$jscomp$2.Uniform1i(e,i.u_is_size_feature_constant),u_size_t:new t$jscomp$2.Uniform1f(e,i.u_size_t),u_size:new t$jscomp$2.Uniform1f(e,i.u_size),u_camera_to_center_distance:new t$jscomp$2.Uniform1f(e,i.u_camera_to_center_distance),u_pitch:new t$jscomp$2.Uniform1f(e,i.u_pitch),u_rotate_symbol:new t$jscomp$2.Uniform1i(e,i.u_rotate_symbol),u_aspect_ratio:new t$jscomp$2.Uniform1f(e,
i.u_aspect_ratio),u_fade_change:new t$jscomp$2.Uniform1f(e,i.u_fade_change),u_matrix:new t$jscomp$2.UniformMatrix4f(e,i.u_matrix),u_label_plane_matrix:new t$jscomp$2.UniformMatrix4f(e,i.u_label_plane_matrix),u_coord_matrix:new t$jscomp$2.UniformMatrix4f(e,i.u_coord_matrix),u_is_text:new t$jscomp$2.Uniform1i(e,i.u_is_text),u_pitch_with_map:new t$jscomp$2.Uniform1i(e,i.u_pitch_with_map),u_texsize:new t$jscomp$2.Uniform2f(e,i.u_texsize),u_texture:new t$jscomp$2.Uniform1i(e,i.u_texture)}},symbolSDF:function(e,
i){return{u_is_size_zoom_constant:new t$jscomp$2.Uniform1i(e,i.u_is_size_zoom_constant),u_is_size_feature_constant:new t$jscomp$2.Uniform1i(e,i.u_is_size_feature_constant),u_size_t:new t$jscomp$2.Uniform1f(e,i.u_size_t),u_size:new t$jscomp$2.Uniform1f(e,i.u_size),u_camera_to_center_distance:new t$jscomp$2.Uniform1f(e,i.u_camera_to_center_distance),u_pitch:new t$jscomp$2.Uniform1f(e,i.u_pitch),u_rotate_symbol:new t$jscomp$2.Uniform1i(e,i.u_rotate_symbol),u_aspect_ratio:new t$jscomp$2.Uniform1f(e,i.u_aspect_ratio),
u_fade_change:new t$jscomp$2.Uniform1f(e,i.u_fade_change),u_matrix:new t$jscomp$2.UniformMatrix4f(e,i.u_matrix),u_label_plane_matrix:new t$jscomp$2.UniformMatrix4f(e,i.u_label_plane_matrix),u_coord_matrix:new t$jscomp$2.UniformMatrix4f(e,i.u_coord_matrix),u_is_text:new t$jscomp$2.Uniform1i(e,i.u_is_text),u_pitch_with_map:new t$jscomp$2.Uniform1i(e,i.u_pitch_with_map),u_texsize:new t$jscomp$2.Uniform2f(e,i.u_texsize),u_texture:new t$jscomp$2.Uniform1i(e,i.u_texture),u_gamma_scale:new t$jscomp$2.Uniform1f(e,
i.u_gamma_scale),u_device_pixel_ratio:new t$jscomp$2.Uniform1f(e,i.u_device_pixel_ratio),u_is_halo:new t$jscomp$2.Uniform1i(e,i.u_is_halo)}},symbolTextAndIcon:function(e,i){return{u_is_size_zoom_constant:new t$jscomp$2.Uniform1i(e,i.u_is_size_zoom_constant),u_is_size_feature_constant:new t$jscomp$2.Uniform1i(e,i.u_is_size_feature_constant),u_size_t:new t$jscomp$2.Uniform1f(e,i.u_size_t),u_size:new t$jscomp$2.Uniform1f(e,i.u_size),u_camera_to_center_distance:new t$jscomp$2.Uniform1f(e,i.u_camera_to_center_distance),
u_pitch:new t$jscomp$2.Uniform1f(e,i.u_pitch),u_rotate_symbol:new t$jscomp$2.Uniform1i(e,i.u_rotate_symbol),u_aspect_ratio:new t$jscomp$2.Uniform1f(e,i.u_aspect_ratio),u_fade_change:new t$jscomp$2.Uniform1f(e,i.u_fade_change),u_matrix:new t$jscomp$2.UniformMatrix4f(e,i.u_matrix),u_label_plane_matrix:new t$jscomp$2.UniformMatrix4f(e,i.u_label_plane_matrix),u_coord_matrix:new t$jscomp$2.UniformMatrix4f(e,i.u_coord_matrix),u_is_text:new t$jscomp$2.Uniform1i(e,i.u_is_text),u_pitch_with_map:new t$jscomp$2.Uniform1i(e,
i.u_pitch_with_map),u_texsize:new t$jscomp$2.Uniform2f(e,i.u_texsize),u_texsize_icon:new t$jscomp$2.Uniform2f(e,i.u_texsize_icon),u_texture:new t$jscomp$2.Uniform1i(e,i.u_texture),u_texture_icon:new t$jscomp$2.Uniform1i(e,i.u_texture_icon),u_gamma_scale:new t$jscomp$2.Uniform1f(e,i.u_gamma_scale),u_device_pixel_ratio:new t$jscomp$2.Uniform1f(e,i.u_device_pixel_ratio),u_is_halo:new t$jscomp$2.Uniform1i(e,i.u_is_halo)}},background:function(e,i){return{u_matrix:new t$jscomp$2.UniformMatrix4f(e,i.u_matrix),
u_opacity:new t$jscomp$2.Uniform1f(e,i.u_opacity),u_color:new t$jscomp$2.UniformColor(e,i.u_color)}},backgroundPattern:function(e,i){return{u_matrix:new t$jscomp$2.UniformMatrix4f(e,i.u_matrix),u_opacity:new t$jscomp$2.Uniform1f(e,i.u_opacity),u_image:new t$jscomp$2.Uniform1i(e,i.u_image),u_pattern_tl_a:new t$jscomp$2.Uniform2f(e,i.u_pattern_tl_a),u_pattern_br_a:new t$jscomp$2.Uniform2f(e,i.u_pattern_br_a),u_pattern_tl_b:new t$jscomp$2.Uniform2f(e,i.u_pattern_tl_b),u_pattern_br_b:new t$jscomp$2.Uniform2f(e,
i.u_pattern_br_b),u_texsize:new t$jscomp$2.Uniform2f(e,i.u_texsize),u_mix:new t$jscomp$2.Uniform1f(e,i.u_mix),u_pattern_size_a:new t$jscomp$2.Uniform2f(e,i.u_pattern_size_a),u_pattern_size_b:new t$jscomp$2.Uniform2f(e,i.u_pattern_size_b),u_scale_a:new t$jscomp$2.Uniform1f(e,i.u_scale_a),u_scale_b:new t$jscomp$2.Uniform1f(e,i.u_scale_b),u_pixel_coord_upper:new t$jscomp$2.Uniform2f(e,i.u_pixel_coord_upper),u_pixel_coord_lower:new t$jscomp$2.Uniform2f(e,i.u_pixel_coord_lower),u_tile_units_to_pixels:new t$jscomp$2.Uniform1f(e,
i.u_tile_units_to_pixels)}}},Ji=t$jscomp$2.identity(new Float32Array(16)),lo=new t$jscomp$2.Color(1,0,0,1),co=new t$jscomp$2.Color(0,1,0,1),uo=new t$jscomp$2.Color(0,0,1,1),ho=new t$jscomp$2.Color(1,0,1,1),po=new t$jscomp$2.Color(0,1,1,1),vo={symbol:function(e,i$jscomp$0,o$jscomp$1,r$jscomp$1,a$jscomp$1){if("translucent"===e.renderPass){var n=Pt.disabled,s=e.colorModeForRenderPass();if(o$jscomp$1.layout.get("text-variable-anchor")){var a=o$jscomp$1.layout.get("text-rotation-alignment"),n$jscomp$0=
o$jscomp$1.layout.get("text-pitch-alignment"),l=e.transform;a="map"===a;n$jscomp$0="map"===n$jscomp$0;for(var h=0;h<r$jscomp$1.length;h+=1){var d=r$jscomp$1[h],_=i$jscomp$0.getTile(d),f=_.getBucket(o$jscomp$1);if(f&&f.text&&f.text.segments.get().length){var m=t$jscomp$2.evaluateSizeForZoom(f.textSizeData,l.zoom),g=pe(_,1,e.transform.zoom),v=Jt(d.posMatrix,n$jscomp$0,a,e.transform,g),y="none"!==o$jscomp$1.layout.get("icon-text-fit")&&f.hasIconData();if(m){g=a;var o=n$jscomp$0,r=a$jscomp$1,a$jscomp$0=
t$jscomp$2.symbolSize,n$jscomp$1=l;d=d.posMatrix;var c=Math.pow(2,l.zoom-_.tileID.overscaledZ),u=m,h$jscomp$0=y,p=f.text.placedSymbolArray;m=f.text.dynamicLayoutVertexArray;y=f.icon.dynamicLayoutVertexArray;_={};m.clear();for(var m$jscomp$0=0;m$jscomp$0<p.length;m$jscomp$0++){var g$jscomp$0=p.get(m$jscomp$0),v$jscomp$0=g$jscomp$0.hidden||!g$jscomp$0.crossTileID||f.allowVerticalPlacement&&!g$jscomp$0.placedOrientation?null:r[g$jscomp$0.crossTileID];if(v$jscomp$0){var y$jscomp$0=new t$jscomp$2.Point(g$jscomp$0.anchorX,
g$jscomp$0.anchorY),x=$t(y$jscomp$0,o?d:v),b=.5+n$jscomp$1.cameraToCenterDistance/x.signedDistanceFromCamera*.5,w=a$jscomp$0.evaluateSizeForFeature(f.textSizeData,u,g$jscomp$0)*b/t$jscomp$2.ONE_EM;o&&(w*=f.tilePixelRatio/c);b=v$jscomp$0.anchor;var i=v$jscomp$0.width,o$jscomp$0=v$jscomp$0.height,r$jscomp$0=v$jscomp$0.textOffset;v$jscomp$0=v$jscomp$0.textBoxScale;var s$jscomp$0=t$jscomp$2.getAnchorAlignment(b);i*=-(s$jscomp$0.horizontalAlign-.5);o$jscomp$0*=-(s$jscomp$0.verticalAlign-.5);b=t$jscomp$2.evaluateVariableOffset(b,
r$jscomp$0);b=new t$jscomp$2.Point((i/v$jscomp$0+b[0])*w,(o$jscomp$0/v$jscomp$0+b[1])*w);y$jscomp$0=o?$t(y$jscomp$0.add(b),v).point:x.point.add(g?b.rotate(-n$jscomp$1.angle):b);x=f.allowVerticalPlacement&&g$jscomp$0.placedOrientation===t$jscomp$2.WritingMode.vertical?Math.PI/2:0;for(b=0;b<g$jscomp$0.numGlyphs;b++)t$jscomp$2.addDynamicAttributes(m,y$jscomp$0,x);h$jscomp$0&&0<=g$jscomp$0.associatedIconIndex&&(_[g$jscomp$0.associatedIconIndex]={shiftedAnchor:y$jscomp$0,angle:x})}else ce(g$jscomp$0.numGlyphs,
m)}if(h$jscomp$0){y.clear();g=f.icon.placedSymbolArray;for(o=0;o<g.length;o++)if(r=g.get(o),r.hidden)ce(r.numGlyphs,y);else if(a$jscomp$0=_[o])for(n$jscomp$1=0;n$jscomp$1<r.numGlyphs;n$jscomp$1++)t$jscomp$2.addDynamicAttributes(y,a$jscomp$0.shiftedAnchor,a$jscomp$0.angle);else ce(r.numGlyphs,y);f.icon.dynamicLayoutVertexBuffer.updateData(y)}f.text.dynamicLayoutVertexBuffer.updateData(m)}}}}0!==o$jscomp$1.paint.get("icon-opacity").constantOr(1)&&eo(e,i$jscomp$0,o$jscomp$1,r$jscomp$1,!1,o$jscomp$1.paint.get("icon-translate"),
o$jscomp$1.paint.get("icon-translate-anchor"),o$jscomp$1.layout.get("icon-rotation-alignment"),o$jscomp$1.layout.get("icon-pitch-alignment"),o$jscomp$1.layout.get("icon-keep-upright"),n,s);0!==o$jscomp$1.paint.get("text-opacity").constantOr(1)&&eo(e,i$jscomp$0,o$jscomp$1,r$jscomp$1,!0,o$jscomp$1.paint.get("text-translate"),o$jscomp$1.paint.get("text-translate-anchor"),o$jscomp$1.layout.get("text-rotation-alignment"),o$jscomp$1.layout.get("text-pitch-alignment"),o$jscomp$1.layout.get("text-keep-upright"),
n,s);i$jscomp$0.map.showCollisionBoxes&&(Yi(e,i$jscomp$0,o$jscomp$1,r$jscomp$1,o$jscomp$1.paint.get("text-translate"),o$jscomp$1.paint.get("text-translate-anchor"),!0),Yi(e,i$jscomp$0,o$jscomp$1,r$jscomp$1,o$jscomp$1.paint.get("icon-translate"),o$jscomp$1.paint.get("icon-translate-anchor"),!1))}},circle:function(e$jscomp$0,i,o,r){if("translucent"===e$jscomp$0.renderPass){var a=o.paint.get("circle-opacity"),n=o.paint.get("circle-stroke-width"),s=o.paint.get("circle-stroke-opacity"),l=void 0!==o.layout.get("circle-sort-key").constantOr(1);
if(0!==a.constantOr(1)||0!==n.constantOr(1)&&0!==s.constantOr(1)){a=e$jscomp$0.context;n=a.gl;s=e$jscomp$0.depthModeForSublayer(0,It.ReadOnly);for(var p=Pt.disabled,d=e$jscomp$0.colorModeForRenderPass(),_=[],f=0;f<r.length;f++){var m=r[f],g=i.getTile(m),v=g.getBucket(o);if(v){var y=v.programConfigurations.get(o.id);m={programConfiguration:y,program:e$jscomp$0.useProgram("circle",y),layoutVertexBuffer:v.layoutVertexBuffer,indexBuffer:v.indexBuffer,uniformValues:zi(e$jscomp$0,m,g,o)};if(l)for(g=0,v=
v.segments.get();g<v.length;g+=1)y=v[g],_.push({segments:new t$jscomp$2.SegmentVector([y]),sortKey:y.sortKey,state:m});else _.push({segments:v.segments,sortKey:0,state:m})}}l&&_.sort(function(t,e){return t.sortKey-e.sortKey});for(i=0;i<_.length;i+=1)r=_[i],l=r.state,l.program.draw(a,n.TRIANGLES,s,p,d,Ct.disabled,l.uniformValues,o.id,l.layoutVertexBuffer,l.indexBuffer,r.segments,o.paint,e$jscomp$0.transform.zoom,l.programConfiguration)}}},heatmap:function(e$jscomp$1,i$jscomp$1,o$jscomp$1,r$jscomp$1){if(0!==
o$jscomp$1.paint.get("heatmap-opacity"))if("offscreen"===e$jscomp$1.renderPass){var a$jscomp$0=e$jscomp$1.context,n=a$jscomp$0.gl,s=Pt.disabled,l=new St([n.ONE,n.ONE],t$jscomp$2.Color.transparent,[!0,!0,!0,!0]);!function(t,e,i){var o=t.gl;t.activeTexture.set(o.TEXTURE1);t.viewport.set([0,0,e.width/4,e.height/4]);var r=i.heatmapFbo;if(r)o.bindTexture(o.TEXTURE_2D,r.colorAttachment.get()),t.bindFramebuffer.set(r.framebuffer);else{var a=o.createTexture();o.bindTexture(o.TEXTURE_2D,a);o.texParameteri(o.TEXTURE_2D,
o.TEXTURE_WRAP_S,o.CLAMP_TO_EDGE);o.texParameteri(o.TEXTURE_2D,o.TEXTURE_WRAP_T,o.CLAMP_TO_EDGE);o.texParameteri(o.TEXTURE_2D,o.TEXTURE_MIN_FILTER,o.LINEAR);o.texParameteri(o.TEXTURE_2D,o.TEXTURE_MAG_FILTER,o.LINEAR);i=r=i.heatmapFbo=t.createFramebuffer(e.width/4,e.height/4,!1);o=t.gl;o.texImage2D(o.TEXTURE_2D,0,o.RGBA,e.width/4,e.height/4,0,o.RGBA,t.extRenderToTextureHalfFloat?t.extTextureHalfFloat.HALF_FLOAT_OES:o.UNSIGNED_BYTE,null);i.colorAttachment.set(a)}}(a$jscomp$0,e$jscomp$1,o$jscomp$1);
a$jscomp$0.clear({color:t$jscomp$2.Color.transparent});for(var c=0;c<r$jscomp$1.length;c++){var u=r$jscomp$1[c];if(!i$jscomp$1.hasRenderableParent(u)){var h=i$jscomp$1.getTile(u),p=h.getBucket(o$jscomp$1);if(p){var d=p.programConfigurations.get(o$jscomp$1.id);e$jscomp$1.useProgram("heatmap",d).draw(a$jscomp$0,n.TRIANGLES,It.disabled,s,l,Ct.disabled,Ri(u.posMatrix,h,e$jscomp$1.transform.zoom,o$jscomp$1.paint.get("heatmap-intensity")),o$jscomp$1.id,p.layoutVertexBuffer,p.indexBuffer,p.segments,o$jscomp$1.paint,
e$jscomp$1.transform.zoom,d)}}}a$jscomp$0.viewport.set([0,0,e$jscomp$1.width,e$jscomp$1.height])}else"translucent"===e$jscomp$1.renderPass&&(e$jscomp$1.context.setColorMode(e$jscomp$1.colorModeForRenderPass()),function(e$jscomp$0,i$jscomp$0){var o$jscomp$0=e$jscomp$0.context,r$jscomp$0=o$jscomp$0.gl,a=i$jscomp$0.heatmapFbo;a&&(o$jscomp$0.activeTexture.set(r$jscomp$0.TEXTURE0),r$jscomp$0.bindTexture(r$jscomp$0.TEXTURE_2D,a.colorAttachment.get()),o$jscomp$0.activeTexture.set(r$jscomp$0.TEXTURE1),(a=
i$jscomp$0.colorRampTexture)||(a=i$jscomp$0.colorRampTexture=new t$jscomp$2.Texture(o$jscomp$0,i$jscomp$0.colorRamp,r$jscomp$0.RGBA)),a.bind(r$jscomp$0.LINEAR,r$jscomp$0.CLAMP_TO_EDGE),e$jscomp$0.useProgram("heatmapTexture").draw(o$jscomp$0,r$jscomp$0.TRIANGLES,It.disabled,Pt.disabled,e$jscomp$0.colorModeForRenderPass(),Ct.disabled,function(e,i,o,r){o=t$jscomp$2.create();t$jscomp$2.ortho(o,0,e.width,e.height,0,0,1);e=e.context.gl;return{u_matrix:o,u_world:[e.drawingBufferWidth,e.drawingBufferHeight],
u_image:0,u_color_ramp:1,u_opacity:i.paint.get("heatmap-opacity")}}(e$jscomp$0,i$jscomp$0),i$jscomp$0.id,e$jscomp$0.viewportBuffer,e$jscomp$0.quadTriangleIndexBuffer,e$jscomp$0.viewportSegments,i$jscomp$0.paint,e$jscomp$0.transform.zoom))}(e$jscomp$1,o$jscomp$1))},line:function(e,i,o,r$jscomp$1){if("translucent"===e.renderPass){var a=o.paint.get("line-opacity"),n=o.paint.get("line-width");if(0!==a.constantOr(1)&&0!==n.constantOr(1)){a=e.depthModeForSublayer(0,It.ReadOnly);n=e.colorModeForRenderPass();
var c=o.paint.get("line-dasharray"),u=o.paint.get("line-pattern"),h=u.constantOr(1),p=o.paint.get("line-gradient"),d=o.getCrossfadeParameters(),_=h?"linePattern":c?"lineSDF":p?"lineGradient":"line",f=e.context,m=f.gl,g=!0;if(p){f.activeTexture.set(m.TEXTURE0);var v=o.gradientTexture;if(!o.gradient)return;v||(v=o.gradientTexture=new t$jscomp$2.Texture(f,o.gradient,m.RGBA));v.bind(m.LINEAR,m.CLAMP_TO_EDGE)}for(v=0;v<r$jscomp$1.length;v+=1){var b=r$jscomp$1[v],w=i.getTile(b);if(!h||w.patternsLoaded()){var T=
w.getBucket(o);if(T){var E=T.programConfigurations.get(o.id),I=e.context.program.get(),P=e.useProgram(_,E);g=g||P.program!==I;var C=u.constantOr(null);if(C&&w.imageAtlas){var z=w.imageAtlas;I=z.patternPositions[C.to.toString()];C=z.patternPositions[C.from.toString()];I&&C&&E.setConstantPatternPositions(I,C)}if(h){I=e;C=w;z=o;var r=d,a$jscomp$0=I.transform,n$jscomp$0=1/pe(C,1,a$jscomp$0.tileZoom);I={u_matrix:Ni(I,C,z),u_texsize:C.imageAtlasTexture.size,u_ratio:1/pe(C,1,a$jscomp$0.zoom),u_device_pixel_ratio:t$jscomp$2.browser.devicePixelRatio,
u_image:0,u_scale:[n$jscomp$0,r.fromScale,r.toScale],u_fade:r.t,u_units_to_pixels:[1/a$jscomp$0.pixelsToGLUnits[0],1/a$jscomp$0.pixelsToGLUnits[1]]}}else if(c){I=e;C=w;z=o;var r$jscomp$0=c;r=d;a$jscomp$0=I.lineAtlas;n$jscomp$0=1/pe(C,1,I.transform.tileZoom);var l="round"===z.layout.get("line-cap"),c$jscomp$0=a$jscomp$0.getDash(r$jscomp$0.from,l);r$jscomp$0=a$jscomp$0.getDash(r$jscomp$0.to,l);l=c$jscomp$0.width*r.fromScale;var p$jscomp$0=r$jscomp$0.width*r.toScale;I=t$jscomp$2.extend(ki(I,C,z),{u_patternscale_a:[n$jscomp$0/
l,-c$jscomp$0.height/2],u_patternscale_b:[n$jscomp$0/p$jscomp$0,-r$jscomp$0.height/2],u_sdfgamma:a$jscomp$0.width/(256*Math.min(l,p$jscomp$0)*t$jscomp$2.browser.devicePixelRatio)/2,u_image:0,u_tex_y_a:c$jscomp$0.y,u_tex_y_b:r$jscomp$0.y,u_mix:r.t})}else I=p?t$jscomp$2.extend(ki(e,w,o),{u_image:0}):ki(e,w,o);h?(f.activeTexture.set(m.TEXTURE0),w.imageAtlasTexture.bind(m.LINEAR,m.CLAMP_TO_EDGE),E.updatePaintBuffers(d)):c&&(g||e.lineAtlas.dirty)&&(f.activeTexture.set(m.TEXTURE0),e.lineAtlas.bind(f));
P.draw(f,m.TRIANGLES,a,e.stencilModeForClipping(b),n,Ct.disabled,I,o.id,T.layoutVertexBuffer,T.indexBuffer,T.segments,o.paint,e.transform.zoom,E);g=!1}}}}}},fill:function(e,i,o,r){var a=o.paint.get("fill-color"),n=o.paint.get("fill-opacity");if(0!==n.constantOr(1)){var s=e.colorModeForRenderPass(),l=o.paint.get("fill-pattern");a=e.opaquePassEnabledForLayer()&&!l.constantOr(1)&&1===a.constantOr(t$jscomp$2.Color.transparent).a&&1===n.constantOr(0)?"opaque":"translucent";e.renderPass===a&&(a=e.depthModeForSublayer(1,
"opaque"===e.renderPass?It.ReadWrite:It.ReadOnly),oo(e,i,o,r,a,s,!1));"translucent"===e.renderPass&&o.paint.get("fill-antialias")&&(a=e.depthModeForSublayer(o.getPaintProperty("fill-outline-color")?2:0,It.ReadOnly),oo(e,i,o,r,a,s,!0))}},"fill-extrusion":function(t,e,i,o){var r=i.paint.get("fill-extrusion-opacity");if(0!==r&&"translucent"===t.renderPass){var a=new It(t.context.gl.LEQUAL,It.ReadWrite,t.depthRangeFor3D);1!==r||i.paint.get("fill-extrusion-pattern").constantOr(1)?(ro(t,e,i,o,a,Pt.disabled,
St.disabled),ro(t,e,i,o,a,t.stencilModeFor3D(),t.colorModeForRenderPass())):(r=t.colorModeForRenderPass(),ro(t,e,i,o,a,Pt.disabled,r))}},hillshade:function(t,e$jscomp$0,i,o){if("offscreen"===t.renderPass||"translucent"===t.renderPass){var r=t.context,a=e$jscomp$0.getSource().maxzoom,n=t.depthModeForSublayer(0,It.ReadOnly),s=t.colorModeForRenderPass(),l="translucent"===t.renderPass?t.stencilConfigForOverlap(o):[{},o];o=l[0];var u=0;for(l=l[1];u<l.length;u+=1){var p=l[u],d=e$jscomp$0.getTile(p);if(d.needsHillshadePrepare&&
"offscreen"===t.renderPass)no(t,d,i,a,n,Pt.disabled,s);else if("translucent"===t.renderPass){var u$jscomp$0=void 0,c=void 0,l$jscomp$0=void 0,e=t;var h=d;d=i;var r$jscomp$0=n;p=o[p.overscaledZ];var n$jscomp$0=s,s$jscomp$0=e.context,l$jscomp$1=s$jscomp$0.gl,c$jscomp$0=h.fbo;if(c$jscomp$0){var u$jscomp$1=e.useProgram("hillshade");s$jscomp$0.activeTexture.set(l$jscomp$1.TEXTURE0);l$jscomp$1.bindTexture(l$jscomp$1.TEXTURE_2D,c$jscomp$0.colorAttachment.get());c$jscomp$0=d.paint.get("hillshade-shadow-color");
var a$jscomp$0=d.paint.get("hillshade-highlight-color"),n$jscomp$1=d.paint.get("hillshade-accent-color"),s$jscomp$1=d.paint.get("hillshade-illumination-direction")*(Math.PI/180);"viewport"===d.paint.get("hillshade-illumination-anchor")&&(s$jscomp$1-=e.transform.angle);var h$jscomp$0=!e.options.moving;h={u_matrix:e.transform.calculatePosMatrix(h.tileID.toUnwrapped(),h$jscomp$0),u_image:0,u_latrange:(l$jscomp$0=h.tileID,c=Math.pow(2,l$jscomp$0.canonical.z),u$jscomp$0=l$jscomp$0.canonical.y,[(new t$jscomp$2.MercatorCoordinate(0,
u$jscomp$0/c)).toLngLat().lat,(new t$jscomp$2.MercatorCoordinate(0,(u$jscomp$0+1)/c)).toLngLat().lat]),u_light:[d.paint.get("hillshade-exaggeration"),s$jscomp$1],u_shadow:c$jscomp$0,u_highlight:a$jscomp$0,u_accent:n$jscomp$1};u$jscomp$1.draw(s$jscomp$0,l$jscomp$1.TRIANGLES,r$jscomp$0,p,n$jscomp$0,Ct.disabled,h,d.id,e.rasterBoundsBuffer,e.quadTriangleIndexBuffer,e.rasterBoundsSegments)}}}r.viewport.set([0,0,t.width,t.height])}},raster:function(t,e$jscomp$0,i$jscomp$0,o$jscomp$0){if("translucent"===
t.renderPass&&0!==i$jscomp$0.paint.get("raster-opacity")&&o$jscomp$0.length){var r=t.context,a=r.gl,n=e$jscomp$0.getSource(),s=t.useProgram("raster"),l=t.colorModeForRenderPass(),c=n instanceof L$jscomp$0?[{},o$jscomp$0]:t.stencilConfigForOverlap(o$jscomp$0);o$jscomp$0=c[0];c=c[1];for(var p=c[c.length-1].overscaledZ,d=!t.options.moving,_=0;_<c.length;_+=1){var m=c[_],g=t.depthModeForSublayer(m.overscaledZ-p,1===i$jscomp$0.paint.get("raster-opacity")?It.ReadWrite:It.ReadOnly,a.LESS),v=e$jscomp$0.getTile(m),
y=t.transform.calculatePosMatrix(m.toUnwrapped(),d);v.registerFadeDuration(i$jscomp$0.paint.get("raster-fade-duration"));var x=e$jscomp$0.findLoadedParent(m,0);var e=v,i=x,o=e$jscomp$0,a$jscomp$0=t.transform;var b=i$jscomp$0.paint.get("raster-fade-duration");if(0<b){var s$jscomp$0=t$jscomp$2.browser.now(),l$jscomp$0=(s$jscomp$0-e.timeAdded)/b;b=i?(s$jscomp$0-i.timeAdded)/b:-1;o=o.getSource();a$jscomp$0=a$jscomp$0.coveringZoomLevel({tileSize:o.tileSize,roundZoom:o.roundZoom});a$jscomp$0=(a$jscomp$0=
!i||Math.abs(i.tileID.overscaledZ-a$jscomp$0)>Math.abs(e.tileID.overscaledZ-a$jscomp$0))&&e.refreshedUponExpiration?1:t$jscomp$2.clamp(a$jscomp$0?l$jscomp$0:1-b,0,1);b=(e.refreshedUponExpiration&&1<=l$jscomp$0&&(e.refreshedUponExpiration=!1),i?{opacity:1,mix:1-a$jscomp$0}:{opacity:a$jscomp$0,mix:0})}else b={opacity:1,mix:0};l$jscomp$0=i=void 0;e="nearest"===i$jscomp$0.paint.get("raster-resampling")?a.NEAREST:a.LINEAR;r.activeTexture.set(a.TEXTURE0);v.texture.bind(e,a.CLAMP_TO_EDGE,a.LINEAR_MIPMAP_NEAREST);
r.activeTexture.set(a.TEXTURE1);x?(x.texture.bind(e,a.CLAMP_TO_EDGE,a.LINEAR_MIPMAP_NEAREST),i=Math.pow(2,x.tileID.overscaledZ-v.tileID.overscaledZ),l$jscomp$0=[v.tileID.canonical.x*i%1,v.tileID.canonical.y*i%1]):v.texture.bind(e,a.CLAMP_TO_EDGE,a.LINEAR_MIPMAP_NEAREST);x=a$jscomp$0=void 0;e=i$jscomp$0;v=l$jscomp$0||[0,0];i=i||1;l$jscomp$0=b.mix;b=b.opacity*e.paint.get("raster-opacity");o=e.paint.get("raster-brightness-min");s$jscomp$0=e.paint.get("raster-brightness-max");var JSCompiler_temp_const=
(a$jscomp$0=e.paint.get("raster-saturation"),0<a$jscomp$0?1-1/(1.001-a$jscomp$0):-a$jscomp$0);a$jscomp$0=(x=e.paint.get("raster-contrast"),0<x?1/(1-x):1+x);e=e.paint.get("raster-hue-rotate");e*=Math.PI/180;x=Math.sin(e);e=Math.cos(e);y={u_matrix:y,u_tl_parent:v,u_scale_parent:i,u_buffer_scale:1,u_fade_t:l$jscomp$0,u_opacity:b,u_image0:0,u_image1:1,u_brightness_low:o,u_brightness_high:s$jscomp$0,u_saturation_factor:JSCompiler_temp_const,u_contrast_factor:a$jscomp$0,u_spin_weights:[(2*e+1)/3,(-Math.sqrt(3)*
x-e+1)/3,(Math.sqrt(3)*x-e+1)/3]};n instanceof L$jscomp$0?s.draw(r,a.TRIANGLES,g,Pt.disabled,l,Ct.disabled,y,i$jscomp$0.id,n.boundsBuffer,t.quadTriangleIndexBuffer,n.boundsSegments):s.draw(r,a.TRIANGLES,g,o$jscomp$0[m.overscaledZ],l,Ct.disabled,y,i$jscomp$0.id,t.rasterBoundsBuffer,t.quadTriangleIndexBuffer,t.rasterBoundsSegments)}}},background:function(t,e,i){e=i.paint.get("background-color");var r=i.paint.get("background-opacity");if(0!==r){var a=t.context,n=a.gl,s=t.transform,l=s.tileSize,c=i.paint.get("background-pattern");
if(!t.isPatternMissing(c)){var u=!c&&1===e.a&&1===r&&t.opaquePassEnabledForLayer()?"opaque":"translucent";if(t.renderPass===u){var h=Pt.disabled;u=t.depthModeForSublayer(0,"opaque"===u?It.ReadWrite:It.ReadOnly);var d=t.colorModeForRenderPass(),_=t.useProgram(c?"backgroundPattern":"background");s=s.coveringTiles({tileSize:l});c&&(a.activeTexture.set(n.TEXTURE0),t.imageManager.bind(t.context));for(var m=i.getCrossfadeParameters(),g=0;g<s.length;g+=1){var y=s[g],x=t.transform.calculatePosMatrix(y.toUnwrapped());
y=c?Hi(x,r,t,c,{tileID:y,tileSize:l},m):{u_matrix:x,u_opacity:r,u_color:e};_.draw(a,n.TRIANGLES,u,h,d,Ct.disabled,y,i.id,t.tileExtentBuffer,t.quadTriangleIndexBuffer,t.tileExtentSegments)}}}}},debug:function(t,e$jscomp$0,i$jscomp$0){for(var o=0;o<i$jscomp$0.length;o++){var e=t,i=e$jscomp$0,o$jscomp$0=i$jscomp$0[o],r=e.context,a=r.gl,n=o$jscomp$0.posMatrix,s=e.useProgram("debug"),l=It.disabled,c=Pt.disabled,u=e.colorModeForRenderPass();r.activeTexture.set(a.TEXTURE0);e.emptyTexture.bind(a.LINEAR,a.CLAMP_TO_EDGE);
s.draw(r,a.LINE_STRIP,l,c,u,Ct.disabled,Li(n,t$jscomp$2.Color.red),"$debug",e.debugBuffer,e.tileBorderIndexBuffer,e.debugSegments);u=i.getTileByID(o$jscomp$0.key).latestRawTileData;u=Math.floor((u&&u.byteLength||0)/1024);i=i.getTile(o$jscomp$0).tileSize;i=512/Math.min(i,512)*(o$jscomp$0.overscaledZ/e.transform.zoom)*.5;var f=o$jscomp$0.canonical.toString();o$jscomp$0.overscaledZ!==o$jscomp$0.canonical.z&&(f+=" \x3d\x3e "+o$jscomp$0.overscaledZ);o$jscomp$0=f+" "+u+"kb";e.initDebugOverlayCanvas();u=
e.debugOverlayCanvas;f=e.context.gl;var r$jscomp$0=e.debugOverlayCanvas.getContext("2d");r$jscomp$0.clearRect(0,0,u.width,u.height);r$jscomp$0.shadowColor="white";r$jscomp$0.shadowBlur=2;r$jscomp$0.lineWidth=1.5;r$jscomp$0.strokeStyle="white";r$jscomp$0.textBaseline="top";r$jscomp$0.font="bold 36px Open Sans, sans-serif";r$jscomp$0.fillText(o$jscomp$0,5,5);r$jscomp$0.strokeText(o$jscomp$0,5,5);e.debugOverlayTexture.update(u);e.debugOverlayTexture.bind(f.LINEAR,f.CLAMP_TO_EDGE);s.draw(r,a.TRIANGLES,
l,c,St.alphaBlended,Ct.disabled,Li(n,t$jscomp$2.Color.transparent,i),"$debug",e.debugBuffer,e.quadTriangleIndexBuffer,e.debugSegments)}},custom:function(t,e,i){e=t.context;i=i.implementation;if("offscreen"===t.renderPass){var a=i.prerender;a&&(t.setCustomLayerDefaults(),e.setColorMode(t.colorModeForRenderPass()),a.call(i,e.gl,t.transform.customLayerMatrix()),e.setDirty(),t.setBaseState())}else"translucent"===t.renderPass&&(t.setCustomLayerDefaults(),e.setColorMode(t.colorModeForRenderPass()),e.setStencilMode(Pt.disabled),
a="3d"===i.renderingMode?new It(t.context.gl.LEQUAL,It.ReadWrite,t.depthRangeFor3D):t.depthModeForSublayer(0,It.ReadOnly),e.setDepthMode(a),i.render(e.gl,t.transform.customLayerMatrix()),e.setDirty(),t.setBaseState(),e.bindFramebuffer.set(null))}},yo=function(t,e){this.context=new zt(t);this.transform=e;this._tileTextures={};this.setup();this.numSublayers=Dt.maxUnderzooming+Dt.maxOverzooming+1;this.depthEpsilon=1/Math.pow(2,16);this.crossTileSymbolIndex=new Fe;this.gpuTimers={}};yo.prototype.resize=
function(e,i){if(this.width=e*t$jscomp$2.browser.devicePixelRatio,this.height=i*t$jscomp$2.browser.devicePixelRatio,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(e=0,i=this.style._order;e<i.length;e+=1)this.style._layers[i[e]].resize()};yo.prototype.setup=function(){var e=this.context,i=new t$jscomp$2.StructArrayLayout2i4;i.emplaceBack(0,0);i.emplaceBack(t$jscomp$2.EXTENT,0);i.emplaceBack(0,t$jscomp$2.EXTENT);i.emplaceBack(t$jscomp$2.EXTENT,t$jscomp$2.EXTENT);this.tileExtentBuffer=
e.createVertexBuffer(i,Ve.members);this.tileExtentSegments=t$jscomp$2.SegmentVector.simpleSegment(0,0,4,2);i=new t$jscomp$2.StructArrayLayout2i4;i.emplaceBack(0,0);i.emplaceBack(t$jscomp$2.EXTENT,0);i.emplaceBack(0,t$jscomp$2.EXTENT);i.emplaceBack(t$jscomp$2.EXTENT,t$jscomp$2.EXTENT);this.debugBuffer=e.createVertexBuffer(i,Ve.members);this.debugSegments=t$jscomp$2.SegmentVector.simpleSegment(0,0,4,5);i=new t$jscomp$2.StructArrayLayout4i8;i.emplaceBack(0,0,0,0);i.emplaceBack(t$jscomp$2.EXTENT,0,t$jscomp$2.EXTENT,
0);i.emplaceBack(0,t$jscomp$2.EXTENT,0,t$jscomp$2.EXTENT);i.emplaceBack(t$jscomp$2.EXTENT,t$jscomp$2.EXTENT,t$jscomp$2.EXTENT,t$jscomp$2.EXTENT);this.rasterBoundsBuffer=e.createVertexBuffer(i,M$jscomp$0.members);this.rasterBoundsSegments=t$jscomp$2.SegmentVector.simpleSegment(0,0,4,2);i=new t$jscomp$2.StructArrayLayout2i4;i.emplaceBack(0,0);i.emplaceBack(1,0);i.emplaceBack(0,1);i.emplaceBack(1,1);this.viewportBuffer=e.createVertexBuffer(i,Ve.members);this.viewportSegments=t$jscomp$2.SegmentVector.simpleSegment(0,
0,4,2);i=new t$jscomp$2.StructArrayLayout1ui2;i.emplaceBack(0);i.emplaceBack(1);i.emplaceBack(3);i.emplaceBack(2);i.emplaceBack(0);this.tileBorderIndexBuffer=e.createIndexBuffer(i);i=new t$jscomp$2.StructArrayLayout3ui6;i.emplaceBack(0,1,2);i.emplaceBack(2,1,3);this.quadTriangleIndexBuffer=e.createIndexBuffer(i);this.emptyTexture=new t$jscomp$2.Texture(e,{width:1,height:1,data:new Uint8Array([0,0,0,0])},e.gl.RGBA);e=this.context.gl;this.stencilClearMode=new Pt({func:e.ALWAYS,mask:0},0,255,e.ZERO,
e.ZERO,e.ZERO)};yo.prototype.clearStencil=function(){var e=this.context,i=e.gl;this.nextStencilID=1;this.currentStencilSource=void 0;var o=t$jscomp$2.create();t$jscomp$2.ortho(o,0,this.width,this.height,0,0,1);t$jscomp$2.scale(o,o,[i.drawingBufferWidth,i.drawingBufferHeight,0]);this.useProgram("clippingMask").draw(e,i.TRIANGLES,It.disabled,this.stencilClearMode,St.disabled,Ct.disabled,{u_matrix:o},"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)};yo.prototype._renderTileClippingMasks=
function(t,e){if(this.currentStencilSource!==t.source&&t.isTileClipped()&&e&&e.length){this.currentStencilSource=t.source;t=this.context;var o=t.gl;256<this.nextStencilID+e.length&&this.clearStencil();t.setColorMode(St.disabled);t.setDepthMode(It.disabled);var r=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(var a=0;a<e.length;a+=1){var s=e[a],l=this._tileClippingMaskIDs[s.key]=this.nextStencilID++;r.draw(t,o.TRIANGLES,It.disabled,new Pt({func:o.ALWAYS,mask:0},l,255,o.KEEP,o.KEEP,
o.REPLACE),St.disabled,Ct.disabled,{u_matrix:s.posMatrix},"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}};yo.prototype.stencilModeFor3D=function(){this.currentStencilSource=void 0;256<this.nextStencilID+1&&this.clearStencil();var t=this.nextStencilID++,e=this.context.gl;return new Pt({func:e.NOTEQUAL,mask:255},t,255,e.KEEP,e.KEEP,e.REPLACE)};yo.prototype.stencilModeForClipping=function(t){var e=this.context.gl;return new Pt({func:e.EQUAL,mask:255},this._tileClippingMaskIDs[t.key],
0,e.KEEP,e.KEEP,e.REPLACE)};yo.prototype.stencilConfigForOverlap=function(t$jscomp$0){var i=this.context.gl;t$jscomp$0=t$jscomp$0.sort(function(t,e){return e.overscaledZ-t.overscaledZ});var r=t$jscomp$0[t$jscomp$0.length-1].overscaledZ,a=t$jscomp$0[0].overscaledZ-r+1;if(1<a){this.currentStencilSource=void 0;256<this.nextStencilID+a&&this.clearStencil();var e$jscomp$0={};for(var s=0;s<a;s++)e$jscomp$0[s+r]=new Pt({func:i.GEQUAL,mask:255},s+this.nextStencilID,255,i.KEEP,i.KEEP,i.REPLACE);return this.nextStencilID+=
a,[e$jscomp$0,t$jscomp$0]}return[(e$jscomp$0={},e$jscomp$0[r]=Pt.disabled,e$jscomp$0),t$jscomp$0]};yo.prototype.colorModeForRenderPass=function(){var e=this.context.gl;return this._showOverdrawInspector?new St([e.CONSTANT_COLOR,e.ONE],new t$jscomp$2.Color(.125,.125,.125,0),[!0,!0,!0,!0]):"opaque"===this.renderPass?St.unblended:St.alphaBlended};yo.prototype.depthModeForSublayer=function(t,e,i){if(!this.opaquePassEnabledForLayer())return It.disabled;t=1-((1+this.currentLayer)*this.numSublayers+t)*this.depthEpsilon;
return new It(i||this.context.gl.LEQUAL,e,[t,t])};yo.prototype.opaquePassEnabledForLayer=function(){return this.currentLayer<this.opaquePassCutoff};yo.prototype.render=function(e$jscomp$0,i$jscomp$0){var o=this;this.style=e$jscomp$0;this.options=i$jscomp$0;this.lineAtlas=e$jscomp$0.lineAtlas;this.imageManager=e$jscomp$0.imageManager;this.glyphManager=e$jscomp$0.glyphManager;this.symbolFadeChange=e$jscomp$0.placement.symbolFadeChange(t$jscomp$2.browser.now());this.imageManager.beginFrame();var r=this.style._order,
a=this.style.sourceCaches;for(n in a){var s=a[n];s.used&&s.prepare(this.context)}var l,c;var n={};s={};var p={},d;for(d in a){var _=a[d];n[d]=_.getVisibleCoordinates();s[d]=n[d].slice().reverse();p[d]=_.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(d=0;d<r.length;d++)if(this.style._layers[r[d]].is3D()){this.opaquePassCutoff=d;break}this.renderPass="offscreen";for(d=0;d<r.length;d+=1)if(_=this.style._layers[r[d]],_.hasOffscreenPass()&&!_.isHidden(this.transform.zoom)){var y=s[_.source];
("custom"===_.type||y.length)&&this.renderLayer(this,a[_.source],_,y)}this.context.bindFramebuffer.set(null);this.context.clear({color:i$jscomp$0.showOverdrawInspector?t$jscomp$2.Color.black:t$jscomp$2.Color.transparent,depth:1});this.clearStencil();this._showOverdrawInspector=i$jscomp$0.showOverdrawInspector;this.depthRangeFor3D=[0,1-(e$jscomp$0._order.length+2)*this.numSublayers*this.depthEpsilon];this.renderPass="opaque";for(this.currentLayer=r.length-1;0<=this.currentLayer;this.currentLayer--)e$jscomp$0=
this.style._layers[r[this.currentLayer]],i$jscomp$0=a[e$jscomp$0.source],d=n[e$jscomp$0.source],this._renderTileClippingMasks(e$jscomp$0,d),this.renderLayer(this,i$jscomp$0,e$jscomp$0,d);this.renderPass="translucent";for(this.currentLayer=0;this.currentLayer<r.length;this.currentLayer++)e$jscomp$0=this.style._layers[r[this.currentLayer]],i$jscomp$0=a[e$jscomp$0.source],d=("symbol"===e$jscomp$0.type?p:s)[e$jscomp$0.source],this._renderTileClippingMasks(e$jscomp$0,n[e$jscomp$0.source]),this.renderLayer(this,
i$jscomp$0,e$jscomp$0,d);this.options.showTileBoundaries&&(t$jscomp$2.values(this.style._layers).forEach(function(t){t.source&&!t.isHidden(o.transform.zoom)&&(t.source!==(c&&c.id)&&(c=o.style.sourceCaches[t.source]),(!l||l.getSource().maxzoom<c.getSource().maxzoom)&&(l=c))}),l&&vo.debug(this,l,l.getVisibleCoordinates()));this.options.showPadding&&function(t){var e=t.transform.padding;mo(t,0,t.transform.height-(e.top||0)+1.5,t.transform.width,3,lo);mo(t,0,(e.bottom||0)+1.5,t.transform.width,3,co);
mo(t,(e.left||0)-1.5,0,3,t.transform.height,uo);mo(t,t.transform.width-(e.right||0)-1.5,0,3,t.transform.height,ho);var i=t.transform.centerPoint;e=i.x;i=t.transform.height-i.y;mo(t,e-1,i-10,2,20,po);mo(t,e-10,i-1,20,2,po);!0}(this);this.context.setDefault()};yo.prototype.renderLayer=function(t,e,i,o){i.isHidden(this.transform.zoom)||("background"===i.type||"custom"===i.type||o.length)&&(this.id=i.id,this.gpuTimingStart(i),vo[i.type](t,e,i,o,this.style.placement.variableOffsets),this.gpuTimingEnd())};
yo.prototype.gpuTimingStart=function(t){if(this.options.gpuTiming){var e=this.context.extTimerQuery,i=this.gpuTimers[t.id];i||(i=this.gpuTimers[t.id]={calls:0,cpuTime:0,query:e.createQueryEXT()});i.calls++;e.beginQueryEXT(e.TIME_ELAPSED_EXT,i.query)}};yo.prototype.gpuTimingEnd=function(){if(this.options.gpuTiming){var t=this.context.extTimerQuery;t.endQueryEXT(t.TIME_ELAPSED_EXT)}};yo.prototype.collectGpuTimers=function(){var t=this.gpuTimers;return this.gpuTimers={},t};yo.prototype.queryGpuTimers=
function(t){var e={},i;for(i in t){var o=t[i],r=this.context.extTimerQuery,a=r.getQueryObjectEXT(o.query,r.QUERY_RESULT_EXT)/1E6;r.deleteQueryEXT(o.query);e[i]=a}return e};yo.prototype.translatePosMatrix=function(e,i,o,r,a){if(!o[0]&&!o[1])return e;var n=a?"map"===r?this.transform.angle:0:"viewport"===r?-this.transform.angle:0;n&&(r=Math.sin(n),n=Math.cos(n),o=[o[0]*n-o[1]*r,o[0]*r+o[1]*n]);i=[a?o[0]:pe(i,o[0],this.transform.zoom),a?o[1]:pe(i,o[1],this.transform.zoom),0];o=new Float32Array(16);return t$jscomp$2.translate(o,
e,i),o};yo.prototype.saveTileTexture=function(t){var e=this._tileTextures[t.size[0]];e?e.push(t):this._tileTextures[t.size[0]]=[t]};yo.prototype.getTileTexture=function(t){return(t=this._tileTextures[t])&&0<t.length?t.pop():null};yo.prototype.isPatternMissing=function(t){if(!t)return!1;if(!t.from||!t.to)return!0;var e=this.imageManager.getPattern(t.from.toString());t=this.imageManager.getPattern(t.to.toString());return!e||!t};yo.prototype.useProgram=function(t,e){this.cache=this.cache||{};var i=""+
t+(e?e.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"");return this.cache[i]||(this.cache[i]=new bi(this.context,t,vi[t],e,Ki[t],this._showOverdrawInspector)),this.cache[i]};yo.prototype.setCustomLayerDefaults=function(){this.context.unbindVAO();this.context.cullFace.setDefault();this.context.activeTexture.setDefault();this.context.pixelStoreUnpack.setDefault();this.context.pixelStoreUnpackPremultiplyAlpha.setDefault();this.context.pixelStoreUnpackFlipY.setDefault()};yo.prototype.setBaseState=
function(){var t=this.context.gl;this.context.cullFace.set(!1);this.context.viewport.set([0,0,this.width,this.height]);this.context.blendEquation.set(t.FUNC_ADD)};yo.prototype.initDebugOverlayCanvas=function(){null==this.debugOverlayCanvas&&(this.debugOverlayCanvas=t$jscomp$2.window.document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new t$jscomp$2.Texture(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))};yo.prototype.destroy=
function(){this.emptyTexture.destroy();this.debugOverlayTexture&&this.debugOverlayTexture.destroy()};var xo=function(t,e){this.points=t;this.planes=e};xo.fromInvProjectionMatrix=function(e$jscomp$0,i$jscomp$0,o$jscomp$0){var r=Math.pow(2,o$jscomp$0),a=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(function(i){return t$jscomp$2.transformMat4([],i,e$jscomp$0)}).map(function(e){return t$jscomp$2.scale$1([],e,1/e[3]/i$jscomp$0*r)});o$jscomp$0=[[0,1,2],
[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(function(e){var i=t$jscomp$2.sub([],a[e[0]],a[e[1]]),o=t$jscomp$2.sub([],a[e[2]],a[e[1]]);i=t$jscomp$2.normalize([],t$jscomp$2.cross([],i,o));e=-t$jscomp$2.dot(i,a[e[1]]);return i.concat(e)});return new xo(a,o$jscomp$0)};var bo=function(e,i){this.min=e;this.max=i;this.center=t$jscomp$2.scale$2([],t$jscomp$2.add([],this.min,this.max),.5)};bo.prototype.quadrant=function(e){e=[0==e%2,2>e];for(var o=t$jscomp$2.clone$2(this.min),r=t$jscomp$2.clone$2(this.max),
a=0;a<e.length;a++)o[a]=e[a]?this.min[a]:this.center[a],r[a]=e[a]?this.center[a]:this.max[a];return r[2]=this.max[2],new bo(o,r)};bo.prototype.distanceX=function(t){return Math.max(Math.min(this.max[0],t[0]),this.min[0])-t[0]};bo.prototype.distanceY=function(t){return Math.max(Math.min(this.max[1],t[1]),this.min[1])-t[1]};bo.prototype.intersects=function(e){for(var i=[[this.min[0],this.min[1],0,1],[this.max[0],this.min[1],0,1],[this.max[0],this.max[1],0,1],[this.min[0],this.max[1],0,1]],o=!0,r=0;r<
e.planes.length;r++){for(var a=e.planes[r],n=0,s=0;s<i.length;s++)n+=0<=t$jscomp$2.dot$1(a,i[s]);if(0===n)return 0;n!==i.length&&(o=!1)}if(o)return 2;for(i=0;3>i;i++){o=Number.MAX_VALUE;r=-Number.MAX_VALUE;for(a=0;a<e.points.length;a++)n=e.points[a][i]-this.min[i],o=Math.min(o,n),r=Math.max(r,n);if(0>r||o>this.max[i]-this.min[i])return 0}return 1};var wo=function(t,e,i,o){if(void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=0),void 0===o&&(o=0),isNaN(t)||0>t||isNaN(e)||0>e||isNaN(i)||0>i||isNaN(o)||
0>o)throw Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=t;this.bottom=e;this.left=i;this.right=o};wo.prototype.interpolate=function(e,i,o){return null!=i.top&&null!=e.top&&(this.top=t$jscomp$2.number(e.top,i.top,o)),null!=i.bottom&&null!=e.bottom&&(this.bottom=t$jscomp$2.number(e.bottom,i.bottom,o)),null!=i.left&&null!=e.left&&(this.left=t$jscomp$2.number(e.left,i.left,o)),null!=i.right&&null!=e.right&&(this.right=t$jscomp$2.number(e.right,i.right,
o)),this};wo.prototype.getCenter=function(e,i){e=t$jscomp$2.clamp((this.left+e-this.right)/2,0,e);i=t$jscomp$2.clamp((this.top+i-this.bottom)/2,0,i);return new t$jscomp$2.Point(e,i)};wo.prototype.equals=function(t){return this.top===t.top&&this.bottom===t.bottom&&this.left===t.left&&this.right===t.right};wo.prototype.clone=function(){return new wo(this.top,this.bottom,this.left,this.right)};wo.prototype.toJSON=function(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}};var To=
function(e,i,o,r,a){this.tileSize=512;this.maxValidLatitude=85.051129;this._renderWorldCopies=void 0===a||a;this._minZoom=e||0;this._maxZoom=i||22;this._minPitch=null==o?0:o;this._maxPitch=null==r?60:r;this.setMaxBounds();this.height=this.width=0;this._center=new t$jscomp$2.LngLat(0,0);this.angle=this.zoom=0;this._fov=.6435011087932844;this._pitch=0;this._unmodified=!0;this._edgeInsets=new wo;this._posMatrixCache={};this._alignedPosMatrixCache={}},Eo={minZoom:{configurable:!0},maxZoom:{configurable:!0},
minPitch:{configurable:!0},maxPitch:{configurable:!0},renderWorldCopies:{configurable:!0},worldSize:{configurable:!0},centerOffset:{configurable:!0},size:{configurable:!0},bearing:{configurable:!0},pitch:{configurable:!0},fov:{configurable:!0},zoom:{configurable:!0},center:{configurable:!0},padding:{configurable:!0},centerPoint:{configurable:!0},unmodified:{configurable:!0},point:{configurable:!0}};To.prototype.clone=function(){var t=new To(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,
this._renderWorldCopies);return t.tileSize=this.tileSize,t.latRange=this.latRange,t.width=this.width,t.height=this.height,t._center=this._center,t.zoom=this.zoom,t.angle=this.angle,t._fov=this._fov,t._pitch=this._pitch,t._unmodified=this._unmodified,t._edgeInsets=this._edgeInsets.clone(),t._calcMatrices(),t};Eo.minZoom.get=function(){return this._minZoom};Eo.minZoom.set=function(t){this._minZoom!==t&&(this._minZoom=t,this.zoom=Math.max(this.zoom,t))};Eo.maxZoom.get=function(){return this._maxZoom};
Eo.maxZoom.set=function(t){this._maxZoom!==t&&(this._maxZoom=t,this.zoom=Math.min(this.zoom,t))};Eo.minPitch.get=function(){return this._minPitch};Eo.minPitch.set=function(t){this._minPitch!==t&&(this._minPitch=t,this.pitch=Math.max(this.pitch,t))};Eo.maxPitch.get=function(){return this._maxPitch};Eo.maxPitch.set=function(t){this._maxPitch!==t&&(this._maxPitch=t,this.pitch=Math.min(this.pitch,t))};Eo.renderWorldCopies.get=function(){return this._renderWorldCopies};Eo.renderWorldCopies.set=function(t){void 0===
t?t=!0:null===t&&(t=!1);this._renderWorldCopies=t};Eo.worldSize.get=function(){return this.tileSize*this.scale};Eo.centerOffset.get=function(){return this.centerPoint._sub(this.size._div(2))};Eo.size.get=function(){return new t$jscomp$2.Point(this.width,this.height)};Eo.bearing.get=function(){return-this.angle/Math.PI*180};Eo.bearing.set=function(e){e=-t$jscomp$2.wrap(e,-180,180)*Math.PI/180;this.angle!==e&&(this._unmodified=!1,this.angle=e,this._calcMatrices(),this.rotationMatrix=t$jscomp$2.create$2(),
t$jscomp$2.rotate(this.rotationMatrix,this.rotationMatrix,this.angle))};Eo.pitch.get=function(){return this._pitch/Math.PI*180};Eo.pitch.set=function(e){e=t$jscomp$2.clamp(e,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==e&&(this._unmodified=!1,this._pitch=e,this._calcMatrices())};Eo.fov.get=function(){return this._fov/Math.PI*180};Eo.fov.set=function(t){t=Math.max(.01,Math.min(60,t));this._fov!==t&&(this._unmodified=!1,this._fov=t/180*Math.PI,this._calcMatrices())};Eo.zoom.get=function(){return this._zoom};
Eo.zoom.set=function(t){t=Math.min(Math.max(t,this.minZoom),this.maxZoom);this._zoom!==t&&(this._unmodified=!1,this._zoom=t,this.scale=this.zoomScale(t),this.tileZoom=Math.floor(t),this.zoomFraction=t-this.tileZoom,this._constrain(),this._calcMatrices())};Eo.center.get=function(){return this._center};Eo.center.set=function(t){t.lat===this._center.lat&&t.lng===this._center.lng||(this._unmodified=!1,this._center=t,this._constrain(),this._calcMatrices())};Eo.padding.get=function(){return this._edgeInsets.toJSON()};
Eo.padding.set=function(t){this._edgeInsets.equals(t)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,t,1),this._calcMatrices())};Eo.centerPoint.get=function(){return this._edgeInsets.getCenter(this.width,this.height)};To.prototype.isPaddingEqual=function(t){return this._edgeInsets.equals(t)};To.prototype.interpolatePadding=function(t,e,i){this._unmodified=!1;this._edgeInsets.interpolate(t,e,i);this._constrain();this._calcMatrices()};To.prototype.coveringZoomLevel=function(t){t=
(t.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/t.tileSize));return Math.max(0,t)};To.prototype.getVisibleUnwrappedCoordinates=function(e){var i=[new t$jscomp$2.UnwrappedTileID(0,e)];if(this._renderWorldCopies){var o=this.pointCoordinate(new t$jscomp$2.Point(0,0)),r=this.pointCoordinate(new t$jscomp$2.Point(this.width,0)),a=this.pointCoordinate(new t$jscomp$2.Point(this.width,this.height)),n=this.pointCoordinate(new t$jscomp$2.Point(0,this.height)),l=Math.floor(Math.max(o.x,
r.x,a.x,n.x));for(o=Math.floor(Math.min(o.x,r.x,a.x,n.x))-1;o<=l+1;o++)0!==o&&i.push(new t$jscomp$2.UnwrappedTileID(o,e))}return i};To.prototype.coveringTiles=function(e$jscomp$0){var i=this.coveringZoomLevel(e$jscomp$0),o=i;if(void 0!==e$jscomp$0.minzoom&&i<e$jscomp$0.minzoom)return[];void 0!==e$jscomp$0.maxzoom&&i>e$jscomp$0.maxzoom&&(i=e$jscomp$0.maxzoom);var r=t$jscomp$2.MercatorCoordinate.fromLngLat(this.center),a=Math.pow(2,i);r=[a*r.x,a*r.y,0];var s=xo.fromInvProjectionMatrix(this.invProjMatrix,
this.worldSize,i),l=e$jscomp$0.minzoom||0;60>=this.pitch&&.1>this._edgeInsets.top&&(l=i);var c=function(t){return{aabb:new bo([t*a,0,0],[(t+1)*a,a,0]),zoom:0,x:0,y:0,wrap:t,fullyVisible:!1}},u=[],h=[],p=i;e$jscomp$0=e$jscomp$0.reparseOverscaled?o:i;if(this._renderWorldCopies)for(i=1;3>=i;i++)u.push(c(-i)),u.push(c(i));for(u.push(c(0));0<u.length;){c=u.pop();i=c.x;o=c.y;var v=c.fullyVisible;if(!v){v=c.aabb.intersects(s);if(0===v)continue;v=2===v}var x=c.aabb.distanceX(r),b=c.aabb.distanceY(r);x=Math.max(Math.abs(x),
Math.abs(b));if(c.zoom===p||x>3+(1<<p-c.zoom)-2&&c.zoom>=l)h.push({tileID:new t$jscomp$2.OverscaledTileID(c.zoom===p?e$jscomp$0:c.zoom,c.wrap,c.zoom,i,o),distanceSq:t$jscomp$2.sqrLen([r[0]-.5-i,r[1]-.5-o])});else for(x=0;4>x;x++){b=(i<<1)+x%2;var I=(o<<1)+(x>>1);u.push({aabb:c.aabb.quadrant(x),zoom:c.zoom+1,x:b,y:I,wrap:c.wrap,fullyVisible:v})}}return h.sort(function(t,e){return t.distanceSq-e.distanceSq}).map(function(t){return t.tileID})};To.prototype.resize=function(t,e){this.width=t;this.height=
e;this.pixelsToGLUnits=[2/t,-2/e];this._constrain();this._calcMatrices()};Eo.unmodified.get=function(){return this._unmodified};To.prototype.zoomScale=function(t){return Math.pow(2,t)};To.prototype.scaleZoom=function(t){return Math.log(t)/Math.LN2};To.prototype.project=function(e){var i=t$jscomp$2.clamp(e.lat,-this.maxValidLatitude,this.maxValidLatitude);return new t$jscomp$2.Point(t$jscomp$2.mercatorXfromLng(e.lng)*this.worldSize,t$jscomp$2.mercatorYfromLat(i)*this.worldSize)};To.prototype.unproject=
function(e){return(new t$jscomp$2.MercatorCoordinate(e.x/this.worldSize,e.y/this.worldSize)).toLngLat()};Eo.point.get=function(){return this.project(this.center)};To.prototype.setLocationAtPoint=function(e,i){i=this.pointCoordinate(i);var r=this.pointCoordinate(this.centerPoint);e=this.locationCoordinate(e);e=new t$jscomp$2.MercatorCoordinate(e.x-(i.x-r.x),e.y-(i.y-r.y));this.center=this.coordinateLocation(e);this._renderWorldCopies&&(this.center=this.center.wrap())};To.prototype.locationPoint=function(t){return this.coordinatePoint(this.locationCoordinate(t))};
To.prototype.pointLocation=function(t){return this.coordinateLocation(this.pointCoordinate(t))};To.prototype.locationCoordinate=function(e){return t$jscomp$2.MercatorCoordinate.fromLngLat(e)};To.prototype.coordinateLocation=function(t){return t.toLngLat()};To.prototype.pointCoordinate=function(e){var i=[e.x,e.y,0,1];e=[e.x,e.y,1,1];t$jscomp$2.transformMat4(i,i,this.pixelMatrixInverse);t$jscomp$2.transformMat4(e,e,this.pixelMatrixInverse);var r=i[3],a=e[3],n=i[1]/r,s=e[1]/a,l=i[2]/r,c=e[2]/a;l=l===
c?0:(0-l)/(c-l);return new t$jscomp$2.MercatorCoordinate(t$jscomp$2.number(i[0]/r,e[0]/a,l)/this.worldSize,t$jscomp$2.number(n,s,l)/this.worldSize)};To.prototype.coordinatePoint=function(e){e=[e.x*this.worldSize,e.y*this.worldSize,0,1];return t$jscomp$2.transformMat4(e,e,this.pixelMatrix),new t$jscomp$2.Point(e[0]/e[3],e[1]/e[3])};To.prototype.getBounds=function(){return(new t$jscomp$2.LngLatBounds).extend(this.pointLocation(new t$jscomp$2.Point(0,0))).extend(this.pointLocation(new t$jscomp$2.Point(this.width,
0))).extend(this.pointLocation(new t$jscomp$2.Point(this.width,this.height))).extend(this.pointLocation(new t$jscomp$2.Point(0,this.height)))};To.prototype.getMaxBounds=function(){return this.latRange&&2===this.latRange.length&&this.lngRange&&2===this.lngRange.length?new t$jscomp$2.LngLatBounds([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null};To.prototype.setMaxBounds=function(t){t?(this.lngRange=[t.getWest(),t.getEast()],this.latRange=[t.getSouth(),t.getNorth()],this._constrain()):
(this.lngRange=null,this.latRange=[-this.maxValidLatitude,this.maxValidLatitude])};To.prototype.calculatePosMatrix=function(e,i){void 0===i&&(i=!1);var o=e.key,r=i?this._alignedPosMatrixCache:this._posMatrixCache;if(r[o])return r[o];var a=e.canonical,n=this.worldSize/this.zoomScale(a.z);e=a.x+Math.pow(2,a.z)*e.wrap;var l=t$jscomp$2.identity(new Float64Array(16));return t$jscomp$2.translate(l,l,[e*n,a.y*n,0]),t$jscomp$2.scale(l,l,[n/t$jscomp$2.EXTENT,n/t$jscomp$2.EXTENT,1]),t$jscomp$2.multiply(l,i?
this.alignedProjMatrix:this.projMatrix,l),r[o]=new Float32Array(l),r[o]};To.prototype.customLayerMatrix=function(){return this.mercatorMatrix.slice()};To.prototype._constrain=function(){if(this.center&&this.width&&this.height&&!this._constraining){this._constraining=!0;var o,r,a=-90,n=90,s=-180,l=180,c=this.size,u=this._unmodified;if(this.latRange){var h=this.latRange;a=t$jscomp$2.mercatorYfromLat(h[1])*this.worldSize;var e=(n=t$jscomp$2.mercatorYfromLat(h[0])*this.worldSize)-a<c.y?c.y/(n-a):0}if(this.lngRange){h=
this.lngRange;s=t$jscomp$2.mercatorXfromLng(h[0])*this.worldSize;var i=(l=t$jscomp$2.mercatorXfromLng(h[1])*this.worldSize)-s<c.x?c.x/(l-s):0}h=this.point;var _=Math.max(i||0,e||0);if(_)return this.center=this.unproject(new t$jscomp$2.Point(i?(l+s)/2:h.x,e?(n+a)/2:h.y)),this.zoom+=this.scaleZoom(_),this._unmodified=u,void(this._constraining=!1);this.latRange&&(e=h.y,i=c.y/2,e-i<a&&(r=a+i),e+i>n&&(r=n-i));this.lngRange&&(a=h.x,c=c.x/2,a-c<s&&(o=s+c),a+c>l&&(o=l-c));void 0===o&&void 0===r||(this.center=
this.unproject(new t$jscomp$2.Point(void 0!==o?o:h.x,void 0!==r?r:h.y)));this._unmodified=u;this._constraining=!1}};To.prototype._calcMatrices=function(){if(this.height){var e=this.centerOffset;this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height;var o=this._fov*(.5+e.y/this.height);o=Math.sin(o)*this.cameraToCenterDistance/Math.sin(t$jscomp$2.clamp(Math.PI-(Math.PI/2+this._pitch)-o,.01,Math.PI-.01));var a=this.point,n=a.x;a=a.y;var l=1.01*(Math.cos(Math.PI/2-this._pitch)*o+this.cameraToCenterDistance),
c=this.height/50;o=new Float64Array(16);t$jscomp$2.perspective(o,this._fov,this.width/this.height,c,l);o[8]=2*-e.x/this.width;o[9]=2*e.y/this.height;t$jscomp$2.scale(o,o,[1,-1,1]);t$jscomp$2.translate(o,o,[0,0,-this.cameraToCenterDistance]);t$jscomp$2.rotateX(o,o,this._pitch);t$jscomp$2.rotateZ(o,o,this.angle);t$jscomp$2.translate(o,o,[-n,-a,0]);this.mercatorMatrix=t$jscomp$2.scale([],o,[this.worldSize,this.worldSize,this.worldSize]);t$jscomp$2.scale(o,o,[1,1,t$jscomp$2.mercatorZfromAltitude(1,this.center.lat)*
this.worldSize,1]);this.projMatrix=o;this.invProjMatrix=t$jscomp$2.invert([],this.projMatrix);e=this.width%2/2;l=this.height%2/2;c=Math.cos(this.angle);var _=Math.sin(this.angle);n=n-Math.round(n)+c*e+_*l;a=a-Math.round(a)+c*l+_*e;e=new Float64Array(o);if(t$jscomp$2.translate(e,e,[.5<n?n-1:n,.5<a?a-1:a,0]),this.alignedProjMatrix=e,o=t$jscomp$2.create(),t$jscomp$2.scale(o,o,[this.width/2,-this.height/2,1]),t$jscomp$2.translate(o,o,[1,-1,0]),this.labelPlaneMatrix=o,o=t$jscomp$2.create(),t$jscomp$2.scale(o,
o,[1,-1,1]),t$jscomp$2.translate(o,o,[-1,-1,0]),t$jscomp$2.scale(o,o,[2/this.width,2/this.height,1]),this.glCoordMatrix=o,this.pixelMatrix=t$jscomp$2.multiply(new Float64Array(16),this.labelPlaneMatrix,this.projMatrix),!(o=t$jscomp$2.invert(new Float64Array(16),this.pixelMatrix)))throw Error("failed to invert matrix");this.pixelMatrixInverse=o;this._posMatrixCache={};this._alignedPosMatrixCache={}}};To.prototype.maxPitchScaleFactor=function(){if(!this.pixelMatrixInverse)return 1;var e=this.pointCoordinate(new t$jscomp$2.Point(0,
0));e=[e.x*this.worldSize,e.y*this.worldSize,0,1];return t$jscomp$2.transformMat4(e,e,this.pixelMatrix)[3]/this.cameraToCenterDistance};To.prototype.getCameraPoint=function(){return this.centerPoint.add(new t$jscomp$2.Point(0,Math.tan(this._pitch)*(this.cameraToCenterDistance||1)))};To.prototype.getCameraQueryGeometry=function(e){var i=this.getCameraPoint();if(1===e.length)return[e[0],i];var o=i.x,r=i.y,a=i.x;i=i.y;for(var s=0;s<e.length;s+=1){var c=e[s];o=Math.min(o,c.x);r=Math.min(r,c.y);a=Math.max(a,
c.x);i=Math.max(i,c.y)}return[new t$jscomp$2.Point(o,r),new t$jscomp$2.Point(a,r),new t$jscomp$2.Point(a,i),new t$jscomp$2.Point(o,i),new t$jscomp$2.Point(o,r)]};Object.defineProperties(To.prototype,Eo);var Io=function(e){var i,o,r,a;this._hashName=e&&encodeURIComponent(e);t$jscomp$2.bindAll(["_getCurrentHash","_onHashChange","_updateHash"],this);this._updateHash=(i=this._updateHashUnthrottled.bind(this),o=!1,r=null,a=function(){r=null;o&&(i(),r=setTimeout(a,300),o=!1)},function(){return o=!0,r||
a(),r})};Io.prototype.addTo=function(e){return this._map=e,t$jscomp$2.window.addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this};Io.prototype.remove=function(){return t$jscomp$2.window.removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this};Io.prototype.getHashString=function(e$jscomp$0){var i=this._map.getCenter(),o=Math.round(100*this._map.getZoom())/
100,a=Math.pow(10,Math.ceil((o*Math.LN2+Math.log(512/360/.5))/Math.LN10)),n=Math.round(i.lng*a)/a;i=Math.round(i.lat*a)/a;a=this._map.getBearing();var c=this._map.getPitch(),u="";if(u+=e$jscomp$0?"/"+n+"/"+i+"/"+o:o+"/"+i+"/"+n,(a||c)&&(u+="/"+Math.round(10*a)/10),c&&(u+="/"+Math.round(c)),this._hashName){var h=this._hashName,p=!1;e$jscomp$0=t$jscomp$2.window.location.hash.slice(1).split("\x26").map(function(t){var e=t.split("\x3d")[0];return e===h?(p=!0,e+"\x3d"+u):t}).filter(function(t){return t});
return p||e$jscomp$0.push(h+"\x3d"+u),"#"+e$jscomp$0.join("\x26")}return"#"+u};Io.prototype._getCurrentHash=function(){var e,i=this,o=t$jscomp$2.window.location.hash.replace("#","");return this._hashName?(o.split("\x26").map(function(t){return t.split("\x3d")}).forEach(function(t){t[0]===i._hashName&&(e=t)}),(e&&e[1]||"").split("/")):o.split("/")};Io.prototype._onHashChange=function(){var t$jscomp$0=this._getCurrentHash();if(3<=t$jscomp$0.length&&!t$jscomp$0.some(function(t){return isNaN(t)})){var e=
this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(t$jscomp$0[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+t$jscomp$0[2],+t$jscomp$0[1]],zoom:+t$jscomp$0[0],bearing:e,pitch:+(t$jscomp$0[4]||0)}),!0}return!1};Io.prototype._updateHashUnthrottled=function(){var e=this.getHashString();try{t$jscomp$2.window.history.replaceState(t$jscomp$2.window.history.state,"",e)}catch(t$405){}};var Po={linearity:.3,easing:t$jscomp$2.bezier(0,0,.3,1)},So=t$jscomp$2.extend({deceleration:2500,
maxSpeed:1400},Po),Co=t$jscomp$2.extend({deceleration:20,maxSpeed:1400},Po),zo=t$jscomp$2.extend({deceleration:1E3,maxSpeed:360},Po),Do=t$jscomp$2.extend({deceleration:1E3,maxSpeed:90},Po),Mo=function(t){this._map=t;this.clear()};Mo.prototype.clear=function(){this._inertiaBuffer=[]};Mo.prototype.record=function(e){this._drainInertiaBuffer();this._inertiaBuffer.push({time:t$jscomp$2.browser.now(),settings:e})};Mo.prototype._drainInertiaBuffer=function(){for(var e=this._inertiaBuffer,i=t$jscomp$2.browser.now();0<
e.length&&160<i-e[0].time;)e.shift()};Mo.prototype._onMoveEnd=function(e){if(this._drainInertiaBuffer(),!(2>this._inertiaBuffer.length)){for(var JSCompiler_object_inline_zoom_6548=0,JSCompiler_object_inline_bearing_6549=0,JSCompiler_object_inline_pitch_6550=0,JSCompiler_object_inline_pan_6551=new t$jscomp$2.Point(0,0),JSCompiler_object_inline_pinchAround_6552=void 0,JSCompiler_object_inline_around_6553=void 0,o=0,r=this._inertiaBuffer;o<r.length;o+=1){var a=r[o].settings;JSCompiler_object_inline_zoom_6548+=
a.zoomDelta||0;JSCompiler_object_inline_bearing_6549+=a.bearingDelta||0;JSCompiler_object_inline_pitch_6550+=a.pitchDelta||0;a.panDelta&&JSCompiler_object_inline_pan_6551._add(a.panDelta);a.around&&(JSCompiler_object_inline_around_6553=a.around);a.pinchAround&&(JSCompiler_object_inline_pinchAround_6552=a.pinchAround)}r=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time;o={};JSCompiler_object_inline_pan_6551.mag()&&(e=Ao(JSCompiler_object_inline_pan_6551.mag(),r,t$jscomp$2.extend({},
So,e||{})),o.offset=JSCompiler_object_inline_pan_6551.mult(e.amount/JSCompiler_object_inline_pan_6551.mag()),o.center=this._map.transform.center,Lo(o,e));JSCompiler_object_inline_zoom_6548&&(JSCompiler_object_inline_zoom_6548=Ao(JSCompiler_object_inline_zoom_6548,r,Co),o.zoom=this._map.transform.zoom+JSCompiler_object_inline_zoom_6548.amount,Lo(o,JSCompiler_object_inline_zoom_6548));JSCompiler_object_inline_bearing_6549&&(JSCompiler_object_inline_bearing_6549=Ao(JSCompiler_object_inline_bearing_6549,
r,zo),o.bearing=this._map.transform.bearing+t$jscomp$2.clamp(JSCompiler_object_inline_bearing_6549.amount,-179,179),Lo(o,JSCompiler_object_inline_bearing_6549));JSCompiler_object_inline_pitch_6550&&(JSCompiler_object_inline_pitch_6550=Ao(JSCompiler_object_inline_pitch_6550,r,Do),o.pitch=this._map.transform.pitch+JSCompiler_object_inline_pitch_6550.amount,Lo(o,JSCompiler_object_inline_pitch_6550));if(o.zoom||o.bearing)JSCompiler_object_inline_pinchAround_6552=void 0===JSCompiler_object_inline_pinchAround_6552?
JSCompiler_object_inline_around_6553:JSCompiler_object_inline_pinchAround_6552,o.around=JSCompiler_object_inline_pinchAround_6552?this._map.unproject(JSCompiler_object_inline_pinchAround_6552):this._map.getCenter();return this.clear(),t$jscomp$2.extend(o,{noMoveStart:!0})}};var Ro=function(e){function o$jscomp$0(o,r,a,n){void 0===n&&(n={});var s=i$jscomp$6.mousePos(r.getCanvasContainer(),a),l=r.unproject(s);e.call(this,o,t$jscomp$2.extend({point:s,lngLat:l,originalEvent:a},n));this._defaultPrevented=
!1;this.target=r}e&&(o$jscomp$0.__proto__=e);(o$jscomp$0.prototype=Object.create(e&&e.prototype)).constructor=o$jscomp$0;var r$jscomp$0={defaultPrevented:{configurable:!0}};return o$jscomp$0.prototype.preventDefault=function(){this._defaultPrevented=!0},r$jscomp$0.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(o$jscomp$0.prototype,r$jscomp$0),o$jscomp$0}(t$jscomp$2.Event),ko=function(e$jscomp$0){function o$jscomp$1(o$jscomp$0,r,a){var n="touchend"===o$jscomp$0?
a.changedTouches:a.touches;n=i$jscomp$6.touchPos(r.getCanvasContainer(),n);var l=n.map(function(t){return r.unproject(t)}),c=n.reduce(function(t,e,i,o){return t.add(e.div(o.length))},new t$jscomp$2.Point(0,0)),u=r.unproject(c);e$jscomp$0.call(this,o$jscomp$0,{points:n,point:c,lngLats:l,lngLat:u,originalEvent:a});this._defaultPrevented=!1}e$jscomp$0&&(o$jscomp$1.__proto__=e$jscomp$0);(o$jscomp$1.prototype=Object.create(e$jscomp$0&&e$jscomp$0.prototype)).constructor=o$jscomp$1;var r$jscomp$0={defaultPrevented:{configurable:!0}};
return o$jscomp$1.prototype.preventDefault=function(){this._defaultPrevented=!0},r$jscomp$0.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(o$jscomp$1.prototype,r$jscomp$0),o$jscomp$1}(t$jscomp$2.Event),Bo=function(t){function e$jscomp$0(e,i,o){t.call(this,e,{originalEvent:o});this._defaultPrevented=!1}t&&(e$jscomp$0.__proto__=t);(e$jscomp$0.prototype=Object.create(t&&t.prototype)).constructor=e$jscomp$0;var i$jscomp$0={defaultPrevented:{configurable:!0}};return e$jscomp$0.prototype.preventDefault=
function(){this._defaultPrevented=!0},i$jscomp$0.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(e$jscomp$0.prototype,i$jscomp$0),e$jscomp$0}(t$jscomp$2.Event),Oo=function(t,e){this._map=t;this._clickTolerance=e.clickTolerance};Oo.prototype.reset=function(){delete this._mousedownPos};Oo.prototype.wheel=function(t){return this._firePreventable(new Bo(t.type,this._map,t))};Oo.prototype.mousedown=function(t,e){return this._mousedownPos=e,this._firePreventable(new Ro(t.type,
this._map,t))};Oo.prototype.mouseup=function(t){this._map.fire(new Ro(t.type,this._map,t))};Oo.prototype.click=function(t,e){this._mousedownPos&&this._mousedownPos.dist(e)>=this._clickTolerance||this._map.fire(new Ro(t.type,this._map,t))};Oo.prototype.dblclick=function(t){return this._firePreventable(new Ro(t.type,this._map,t))};Oo.prototype.mouseover=function(t){this._map.fire(new Ro(t.type,this._map,t))};Oo.prototype.mouseout=function(t){this._map.fire(new Ro(t.type,this._map,t))};Oo.prototype.touchstart=
function(t){return this._firePreventable(new ko(t.type,this._map,t))};Oo.prototype.touchmove=function(t){this._map.fire(new ko(t.type,this._map,t))};Oo.prototype.touchend=function(t){this._map.fire(new ko(t.type,this._map,t))};Oo.prototype.touchcancel=function(t){this._map.fire(new ko(t.type,this._map,t))};Oo.prototype._firePreventable=function(t){if(this._map.fire(t),t.defaultPrevented)return{}};Oo.prototype.isEnabled=function(){return!0};Oo.prototype.isActive=function(){return!1};Oo.prototype.enable=
function(){};Oo.prototype.disable=function(){};var Fo=function(t){this._map=t};Fo.prototype.reset=function(){this._delayContextMenu=!1;delete this._contextMenuEvent};Fo.prototype.mousemove=function(t){this._map.fire(new Ro(t.type,this._map,t))};Fo.prototype.mousedown=function(){this._delayContextMenu=!0};Fo.prototype.mouseup=function(){this._delayContextMenu=!1;this._contextMenuEvent&&(this._map.fire(new Ro("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)};Fo.prototype.contextmenu=
function(t){this._delayContextMenu?this._contextMenuEvent=t:this._map.fire(new Ro(t.type,this._map,t));this._map.listens("contextmenu")&&t.preventDefault()};Fo.prototype.isEnabled=function(){return!0};Fo.prototype.isActive=function(){return!1};Fo.prototype.enable=function(){};Fo.prototype.disable=function(){};var Uo=function(t,e){this._map=t;this._el=t.getCanvasContainer();this._container=t.getContainer();this._clickTolerance=e.clickTolerance||1};Uo.prototype.isEnabled=function(){return!!this._enabled};
Uo.prototype.isActive=function(){return!!this._active};Uo.prototype.enable=function(){this.isEnabled()||(this._enabled=!0)};Uo.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)};Uo.prototype.mousedown=function(t,e){this.isEnabled()&&t.shiftKey&&0===t.button&&(i$jscomp$6.disableDrag(),this._startPos=this._lastPos=e,this._active=!0)};Uo.prototype.mousemoveWindow=function(t,e){if(this._active&&!(this._lastPos.equals(e)||!this._box&&e.dist(this._startPos)<this._clickTolerance)){var r=
this._startPos;this._lastPos=e;this._box||(this._box=i$jscomp$6.create("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",t));t=Math.min(r.x,e.x);var n=Math.max(r.x,e.x),s=Math.min(r.y,e.y);e=Math.max(r.y,e.y);i$jscomp$6.setTransform(this._box,"translate("+t+"px,"+s+"px)");this._box.style.width=n-t+"px";this._box.style.height=e-s+"px"}};Uo.prototype.mouseupWindow=function(e,o){var r=this;if(this._active&&0===e.button){var a=
this._startPos;if(this.reset(),i$jscomp$6.suppressClick(),a.x!==o.x||a.y!==o.y)return this._map.fire(new t$jscomp$2.Event("boxzoomend",{originalEvent:e})),{cameraAnimation:function(t){return t.fitScreenCoordinates(a,o,r._map.getBearing(),{linear:!0})}};this._fireEvent("boxzoomcancel",e)}};Uo.prototype.keydown=function(t){this._active&&27===t.keyCode&&(this.reset(),this._fireEvent("boxzoomcancel",t))};Uo.prototype.reset=function(){this._active=!1;this._container.classList.remove("mapboxgl-crosshair");
this._box&&(i$jscomp$6.remove(this._box),this._box=null);i$jscomp$6.enableDrag();delete this._startPos;delete this._lastPos};Uo.prototype._fireEvent=function(e,i){return this._map.fire(new t$jscomp$2.Event(e,{originalEvent:i}))};var Zo=function(t){this.reset();this.numTouches=t.numTouches};Zo.prototype.reset=function(){delete this.centroid;delete this.startTime;delete this.touches;this.aborted=!1};Zo.prototype.touchstart=function(e,i,o$jscomp$0){(this.centroid||o$jscomp$0.length>this.numTouches)&&
(this.aborted=!0);if(!this.aborted&&(void 0===this.startTime&&(this.startTime=e.timeStamp),o$jscomp$0.length===this.numTouches)){e=new t$jscomp$2.Point(0,0);for(var o=0;o<i.length;o+=1)e._add(i[o]);this.centroid=e.div(i.length);this.touches=No(o$jscomp$0,i)}};Zo.prototype.touchmove=function(t,e,i){if(!this.aborted&&this.centroid){t=No(i,e);for(var r in this.touches)e=t[r],(!e||30<e.dist(this.touches[r]))&&(this.aborted=!0)}};Zo.prototype.touchend=function(t,e,i){if((!this.centroid||500<t.timeStamp-
this.startTime)&&(this.aborted=!0),0===i.length)if(t=!this.aborted&&this.centroid,this.reset(),t)return t};var jo=function(t){this.singleTap=new Zo(t);this.numTaps=t.numTaps;this.reset()};jo.prototype.reset=function(){this.lastTime=1/0;delete this.lastTap;this.count=0;this.singleTap.reset()};jo.prototype.touchstart=function(t,e,i){this.singleTap.touchstart(t,e,i)};jo.prototype.touchmove=function(t,e,i){this.singleTap.touchmove(t,e,i)};jo.prototype.touchend=function(t,e,i){if(e=this.singleTap.touchend(t,
e,i)){i=500>t.timeStamp-this.lastTime;var a=!this.lastTap||30>this.lastTap.dist(e);if(i&&a||this.reset(),this.count++,this.lastTime=t.timeStamp,this.lastTap=e,this.count===this.numTaps)return this.reset(),e}};var qo=function(){this._zoomIn=new jo({numTouches:1,numTaps:2});this._zoomOut=new jo({numTouches:2,numTaps:1});this.reset()};qo.prototype.reset=function(){this._active=!1;this._zoomIn.reset();this._zoomOut.reset()};qo.prototype.touchstart=function(t,e,i){this._zoomIn.touchstart(t,e,i);this._zoomOut.touchstart(t,
e,i)};qo.prototype.touchmove=function(t,e,i){this._zoomIn.touchmove(t,e,i);this._zoomOut.touchmove(t,e,i)};qo.prototype.touchend=function(t,e$jscomp$0,i){var o=this,r=this._zoomIn.touchend(t,e$jscomp$0,i),a=this._zoomOut.touchend(t,e$jscomp$0,i);return r?(this._active=!0,t.preventDefault(),setTimeout(function(){return o.reset()},0),{cameraAnimation:function(e){return e.easeTo({duration:300,zoom:e.getZoom()+1,around:e.unproject(r)},{originalEvent:t})}}):a?(this._active=!0,t.preventDefault(),setTimeout(function(){return o.reset()},
0),{cameraAnimation:function(e){return e.easeTo({duration:300,zoom:e.getZoom()-1,around:e.unproject(a)},{originalEvent:t})}}):void 0};qo.prototype.touchcancel=function(){this.reset()};qo.prototype.enable=function(){this._enabled=!0};qo.prototype.disable=function(){this._enabled=!1;this.reset()};qo.prototype.isEnabled=function(){return this._enabled};qo.prototype.isActive=function(){return this._active};var Vo={0:1,2:2},Go=function(t){this.reset();this._clickTolerance=t.clickTolerance||1};Go.prototype.reset=
function(){this._moved=this._active=!1;delete this._lastPoint;delete this._eventButton};Go.prototype._correctButton=function(t,e){return!1};Go.prototype._move=function(t,e){return{}};Go.prototype.mousedown=function(t,e){if(!this._lastPoint){var o=i$jscomp$6.mouseButton(t);this._correctButton(t,o)&&(this._lastPoint=e,this._eventButton=o)}};Go.prototype.mousemoveWindow=function(t,e){var i=this._lastPoint;if(i){t.preventDefault();var i$jscomp$0=Vo[this._eventButton];if(void 0===t.buttons||(t.buttons&
i$jscomp$0)!==i$jscomp$0)this.reset();else if(this._moved||!(e.dist(i)<this._clickTolerance))return this._moved=!0,this._lastPoint=e,this._move(i,e)}};Go.prototype.mouseupWindow=function(t){this._lastPoint&&i$jscomp$6.mouseButton(t)===this._eventButton&&(this._moved&&i$jscomp$6.suppressClick(),this.reset())};Go.prototype.enable=function(){this._enabled=!0};Go.prototype.disable=function(){this._enabled=!1;this.reset()};Go.prototype.isEnabled=function(){return this._enabled};Go.prototype.isActive=function(){return this._active};
var Wo=function(t$jscomp$0){function e$jscomp$0(){t$jscomp$0.apply(this,arguments)}return t$jscomp$0&&(e$jscomp$0.__proto__=t$jscomp$0),(e$jscomp$0.prototype=Object.create(t$jscomp$0&&t$jscomp$0.prototype)).constructor=e$jscomp$0,e$jscomp$0.prototype.mousedown=function(e,i){t$jscomp$0.prototype.mousedown.call(this,e,i);this._lastPoint&&(this._active=!0)},e$jscomp$0.prototype._correctButton=function(t,e){return 0===e&&!t.ctrlKey},e$jscomp$0.prototype._move=function(t,e){return{around:e,panDelta:e.sub(t)}},
e$jscomp$0}(Go),Xo=function(t$jscomp$0){function e$jscomp$0(){t$jscomp$0.apply(this,arguments)}return t$jscomp$0&&(e$jscomp$0.__proto__=t$jscomp$0),(e$jscomp$0.prototype=Object.create(t$jscomp$0&&t$jscomp$0.prototype)).constructor=e$jscomp$0,e$jscomp$0.prototype._correctButton=function(t,e){return 0===e&&t.ctrlKey||2===e},e$jscomp$0.prototype._move=function(t,e){if(t=.8*(e.x-t.x))return this._active=!0,{bearingDelta:t}},e$jscomp$0.prototype.contextmenu=function(t){t.preventDefault()},e$jscomp$0}(Go),
Ho=function(t$jscomp$0){function e$jscomp$0(){t$jscomp$0.apply(this,arguments)}return t$jscomp$0&&(e$jscomp$0.__proto__=t$jscomp$0),(e$jscomp$0.prototype=Object.create(t$jscomp$0&&t$jscomp$0.prototype)).constructor=e$jscomp$0,e$jscomp$0.prototype._correctButton=function(t,e){return 0===e&&t.ctrlKey||2===e},e$jscomp$0.prototype._move=function(t,e){if(t=-.5*(e.y-t.y))return this._active=!0,{pitchDelta:t}},e$jscomp$0.prototype.contextmenu=function(t){t.preventDefault()},e$jscomp$0}(Go),Ko=function(t){this._minTouches=
1;this._clickTolerance=t.clickTolerance||1;this.reset()};Ko.prototype.reset=function(){this._active=!1;this._touches={};this._sum=new t$jscomp$2.Point(0,0)};Ko.prototype.touchstart=function(t,e,i){return this._calculateTransform(t,e,i)};Ko.prototype.touchmove=function(t,e,i){if(this._active)return t.preventDefault(),this._calculateTransform(t,e,i)};Ko.prototype.touchend=function(t,e,i){this._calculateTransform(t,e,i);this._active&&i.length<this._minTouches&&this.reset()};Ko.prototype.touchcancel=
function(){this.reset()};Ko.prototype._calculateTransform=function(e,i,o){0<o.length&&(this._active=!0);o=No(o,i);e=new t$jscomp$2.Point(0,0);var n=new t$jscomp$2.Point(0,0);i=0;for(var l in o){var c=o[l],u=this._touches[l];u&&(e._add(c),n._add(c.sub(u)),i++,o[l]=c)}if(this._touches=o,!(i<this._minTouches)&&n.mag())if(l=n.div(i),this._sum._add(l),!(this._sum.mag()<this._clickTolerance))return{around:e.div(i),panDelta:l}};Ko.prototype.enable=function(){this._enabled=!0};Ko.prototype.disable=function(){this._enabled=
!1;this.reset()};Ko.prototype.isEnabled=function(){return this._enabled};Ko.prototype.isActive=function(){return this._active};var Yo=function(){this.reset()};Yo.prototype.reset=function(){this._active=!1;delete this._firstTwoTouches};Yo.prototype._start=function(t){};Yo.prototype._move=function(t,e,i){return{}};Yo.prototype.touchstart=function(t,e,i){this._firstTwoTouches||2>i.length||(this._firstTwoTouches=[i[0].identifier,i[1].identifier],this._start([e[0],e[1]]))};Yo.prototype.touchmove=function(t,
e,i){if(this._firstTwoTouches){t.preventDefault();var o=this._firstTwoTouches,r=o[1];o=Jo(i,e,o[0]);e=Jo(i,e,r);if(o&&e)return i=this._aroundCenter?null:o.add(e).div(2),this._move([o,e],i,t)}};Yo.prototype.touchend=function(t,e,o){if(this._firstTwoTouches){var r=this._firstTwoTouches;t=r[1];r=Jo(o,e,r[0]);e=Jo(o,e,t);r&&e||(this._active&&i$jscomp$6.suppressClick(),this.reset())}};Yo.prototype.touchcancel=function(){this.reset()};Yo.prototype.enable=function(t){this._enabled=!0;this._aroundCenter=
!!t&&"center"===t.around};Yo.prototype.disable=function(){this._enabled=!1;this.reset()};Yo.prototype.isEnabled=function(){return this._enabled};Yo.prototype.isActive=function(){return this._active};var $o=function(t$jscomp$0){function e$jscomp$0(){t$jscomp$0.apply(this,arguments)}return t$jscomp$0&&(e$jscomp$0.__proto__=t$jscomp$0),(e$jscomp$0.prototype=Object.create(t$jscomp$0&&t$jscomp$0.prototype)).constructor=e$jscomp$0,e$jscomp$0.prototype.reset=function(){t$jscomp$0.prototype.reset.call(this);
delete this._distance;delete this._startDistance},e$jscomp$0.prototype._start=function(t){this._startDistance=this._distance=t[0].dist(t[1])},e$jscomp$0.prototype._move=function(t,e){var i=this._distance;if(this._distance=t[0].dist(t[1]),this._active||!(.1>Math.abs(Math.log(this._distance/this._startDistance)/Math.LN2)))return this._active=!0,{zoomDelta:Math.log(this._distance/i)/Math.LN2,pinchAround:e}},e$jscomp$0}(Yo),er=function(t$jscomp$0){function e$jscomp$0(){t$jscomp$0.apply(this,arguments)}
return t$jscomp$0&&(e$jscomp$0.__proto__=t$jscomp$0),(e$jscomp$0.prototype=Object.create(t$jscomp$0&&t$jscomp$0.prototype)).constructor=e$jscomp$0,e$jscomp$0.prototype.reset=function(){t$jscomp$0.prototype.reset.call(this);delete this._minDiameter;delete this._startVector;delete this._vector},e$jscomp$0.prototype._start=function(t){this._startVector=this._vector=t[0].sub(t[1]);this._minDiameter=t[0].dist(t[1])},e$jscomp$0.prototype._move=function(t,e){var i=this._vector;if(this._vector=t[0].sub(t[1]),
this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:180*this._vector.angleWith(i)/Math.PI,pinchAround:e}},e$jscomp$0.prototype._isBelowThreshold=function(t){this._minDiameter=Math.min(this._minDiameter,t.mag());var e=25/(Math.PI*this._minDiameter)*360;t=180*t.angleWith(this._startVector)/Math.PI;return Math.abs(t)<e},e$jscomp$0}(Yo),or=function(t$jscomp$0){function e$jscomp$0(){t$jscomp$0.apply(this,arguments)}return t$jscomp$0&&(e$jscomp$0.__proto__=t$jscomp$0),
(e$jscomp$0.prototype=Object.create(t$jscomp$0&&t$jscomp$0.prototype)).constructor=e$jscomp$0,e$jscomp$0.prototype.reset=function(){t$jscomp$0.prototype.reset.call(this);this._valid=void 0;delete this._firstMove;delete this._lastPoints},e$jscomp$0.prototype._start=function(t){this._lastPoints=t;ir(t[0].sub(t[1]))&&(this._valid=!1)},e$jscomp$0.prototype._move=function(t,e,i){e=t[0].sub(this._lastPoints[0]);var r=t[1].sub(this._lastPoints[1]);if(this._valid=this.gestureBeginsVertically(e,r,i.timeStamp),
this._valid)return this._lastPoints=t,this._active=!0,{pitchDelta:(e.y+r.y)/2*-.5}},e$jscomp$0.prototype.gestureBeginsVertically=function(t,e,i){if(void 0!==this._valid)return this._valid;var o=2<=t.mag(),r=2<=e.mag();if(o||r){if(!o||!r)return void 0===this._firstMove&&(this._firstMove=i),100>i-this._firstMove&&void 0;i=0<t.y==0<e.y;return ir(t)&&ir(e)&&i}},e$jscomp$0}(Yo),ar=function(){this._panStep=100;this._bearingStep=15;this._pitchStep=10};ar.prototype.reset=function(){this._active=!1};ar.prototype.keydown=
function(t){var e=this;if(!(t.altKey||t.ctrlKey||t.metaKey)){var i=0,o=0,r=0,a=0,n=0;switch(t.keyCode){case 61:case 107:case 171:case 187:i=1;break;case 189:case 109:case 173:i=-1;break;case 37:t.shiftKey?o=-1:(t.preventDefault(),a=-1);break;case 39:t.shiftKey?o=1:(t.preventDefault(),a=1);break;case 38:t.shiftKey?r=1:(t.preventDefault(),n=-1);break;case 40:t.shiftKey?r=-1:(t.preventDefault(),n=1);break;default:return}return{cameraAnimation:function(s){var l=s.getZoom();s.easeTo({duration:300,easeId:"keyboardHandler",
easing:nr,zoom:i?Math.round(l)+i*(t.shiftKey?2:1):l,bearing:s.getBearing()+o*e._bearingStep,pitch:s.getPitch()+r*e._pitchStep,offset:[-a*e._panStep,-n*e._panStep],center:s.getCenter()},{originalEvent:t})}}}};ar.prototype.enable=function(){this._enabled=!0};ar.prototype.disable=function(){this._enabled=!1;this.reset()};ar.prototype.isEnabled=function(){return this._enabled};ar.prototype.isActive=function(){return this._active};var sr=function(e,i){this._map=e;this._el=e.getCanvasContainer();this._handler=
i;this._delta=0;this._defaultZoomRate=.01;this._wheelZoomRate=1/450;t$jscomp$2.bindAll(["_onWheel","_onTimeout","_onScrollFrame","_onScrollFinished"],this)};sr.prototype.setZoomRate=function(t){this._defaultZoomRate=t};sr.prototype.setWheelZoomRate=function(t){this._wheelZoomRate=t};sr.prototype.isEnabled=function(){return!!this._enabled};sr.prototype.isActive=function(){return!!this._active||void 0!==this._finishTimeout};sr.prototype.isZooming=function(){return!!this._zooming};sr.prototype.enable=
function(t){this.isEnabled()||(this._enabled=!0,this._aroundCenter=t&&"center"===t.around)};sr.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)};sr.prototype.wheel=function(e){if(this.isEnabled()){var i=e.deltaMode===t$jscomp$2.window.WheelEvent.DOM_DELTA_LINE?40*e.deltaY:e.deltaY,o=t$jscomp$2.browser.now(),r=o-(this._lastWheelEventTime||0);this._lastWheelEventTime=o;0!==i&&0==i%4.000244140625?this._type="wheel":0!==i&&4>Math.abs(i)?this._type="trackpad":400<r?(this._type=null,this._lastValue=
i,this._timeout=setTimeout(this._onTimeout,40,e)):this._type||(this._type=200>Math.abs(r*i)?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,i+=this._lastValue));e.shiftKey&&i&&(i/=4);this._type&&(this._lastWheelEvent=e,this._delta-=i,this._active||this._start(e));e.preventDefault()}};sr.prototype._onTimeout=function(t){this._type="wheel";this._delta-=this._lastValue;this._active||this._start(t)};sr.prototype._start=function(e){this._delta&&(this._frameId&&(this._frameId=
null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout),e=i$jscomp$6.mousePos(this._el,e),this._around=t$jscomp$2.LngLat.convert(this._aroundCenter?this._map.getCenter():this._map.unproject(e)),this._aroundPoint=this._map.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame()))};sr.prototype.renderFrame=function(){return this._onScrollFrame()};sr.prototype._onScrollFrame=
function(){var e=this;if(this._frameId&&(this._frameId=null,this.isActive())){var i=this._map.transform;if(0!==this._delta){var r=2/(1+Math.exp(-Math.abs(this._delta*("wheel"===this._type&&4.000244140625<Math.abs(this._delta)?this._wheelZoomRate:this._defaultZoomRate))));0>this._delta&&0!==r&&(r=1/r);var a="number"==typeof this._targetZoom?i.zoomScale(this._targetZoom):i.scale;this._targetZoom=Math.min(i.maxZoom,Math.max(i.minZoom,i.scaleZoom(a*r)));"wheel"===this._type&&(this._startZoom=i.zoom,this._easing=
this._smoothOutEasing(200));this._delta=0}var n="number"==typeof this._targetZoom?this._targetZoom:i.zoom;var l=this._startZoom,c=this._easing;r=!1;"wheel"===this._type&&l&&c?(a=Math.min((t$jscomp$2.browser.now()-this._lastWheelEventTime)/200,1),c=c(a),n=t$jscomp$2.number(l,n,c),1>a?this._frameId||(this._frameId=!0):r=!0):r=!0;return this._active=!0,r&&(this._active=!1,this._finishTimeout=setTimeout(function(){e._zooming=!1;e._handler._triggerRenderFrame();delete e._targetZoom;delete e._finishTimeout},
200)),{noInertia:!0,needsRenderFrame:!r,zoomDelta:n-i.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}};sr.prototype._smoothOutEasing=function(e){var i=t$jscomp$2.ease;if(this._prevEase){i=this._prevEase;var r=(t$jscomp$2.browser.now()-i.start)/i.duration;i=i.easing(r+.01)-i.easing(r);i=.27/Math.sqrt(i*i+1E-4)*.01;i=t$jscomp$2.bezier(i,Math.sqrt(.0729-i*i),.25,1)}return this._prevEase={start:t$jscomp$2.browser.now(),duration:e,easing:i},i};sr.prototype.reset=function(){this._active=
!1};var lr=function(t,e){this._clickZoom=t;this._tapZoom=e};lr.prototype.enable=function(){this._clickZoom.enable();this._tapZoom.enable()};lr.prototype.disable=function(){this._clickZoom.disable();this._tapZoom.disable()};lr.prototype.isEnabled=function(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()};lr.prototype.isActive=function(){return this._clickZoom.isActive()||this._tapZoom.isActive()};var cr=function(){this.reset()};cr.prototype.reset=function(){this._active=!1};cr.prototype.dblclick=
function(t,e){return t.preventDefault(),{cameraAnimation:function(i){i.easeTo({duration:300,zoom:i.getZoom()+(t.shiftKey?-1:1),around:i.unproject(e)},{originalEvent:t})}}};cr.prototype.enable=function(){this._enabled=!0};cr.prototype.disable=function(){this._enabled=!1;this.reset()};cr.prototype.isEnabled=function(){return this._enabled};cr.prototype.isActive=function(){return this._active};var ur=function(){this._tap=new jo({numTouches:1,numTaps:1});this.reset()};ur.prototype.reset=function(){this._active=
!1;delete this._swipePoint;delete this._swipeTouch;delete this._tapTime;this._tap.reset()};ur.prototype.touchstart=function(t,e,i){this._swipePoint||(this._tapTime&&500<t.timeStamp-this._tapTime&&this.reset(),this._tapTime?0<i.length&&(this._swipePoint=e[0],this._swipeTouch=i[0].identifier):this._tap.touchstart(t,e,i))};ur.prototype.touchmove=function(t,e,i){if(this._tapTime){if(this._swipePoint&&i[0].identifier===this._swipeTouch)return e=e[0],i=e.y-this._swipePoint.y,this._swipePoint=e,t.preventDefault(),
this._active=!0,{zoomDelta:i/128}}else this._tap.touchmove(t,e,i)};ur.prototype.touchend=function(t,e,i){this._tapTime?this._swipePoint&&0===i.length&&this.reset():this._tap.touchend(t,e,i)&&(this._tapTime=t.timeStamp)};ur.prototype.touchcancel=function(){this.reset()};ur.prototype.enable=function(){this._enabled=!0};ur.prototype.disable=function(){this._enabled=!1;this.reset()};ur.prototype.isEnabled=function(){return this._enabled};ur.prototype.isActive=function(){return this._active};var hr=function(t,
e,i){this._el=t;this._mousePan=e;this._touchPan=i};hr.prototype.enable=function(t){this._inertiaOptions=t||{};this._mousePan.enable();this._touchPan.enable();this._el.classList.add("mapboxgl-touch-drag-pan")};hr.prototype.disable=function(){this._mousePan.disable();this._touchPan.disable();this._el.classList.remove("mapboxgl-touch-drag-pan")};hr.prototype.isEnabled=function(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()};hr.prototype.isActive=function(){return this._mousePan.isActive()||
this._touchPan.isActive()};var pr=function(t,e,i){this._pitchWithRotate=t.pitchWithRotate;this._mouseRotate=e;this._mousePitch=i};pr.prototype.enable=function(){this._mouseRotate.enable();this._pitchWithRotate&&this._mousePitch.enable()};pr.prototype.disable=function(){this._mouseRotate.disable();this._mousePitch.disable()};pr.prototype.isEnabled=function(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())};pr.prototype.isActive=function(){return this._mouseRotate.isActive()||
this._mousePitch.isActive()};var dr=function(t,e,i,o){this._el=t;this._touchZoom=e;this._touchRotate=i;this._tapDragZoom=o;this._rotationDisabled=!1;this._enabled=!0};dr.prototype.enable=function(t){this._touchZoom.enable(t);this._rotationDisabled||this._touchRotate.enable(t);this._tapDragZoom.enable();this._el.classList.add("mapboxgl-touch-zoom-rotate")};dr.prototype.disable=function(){this._touchZoom.disable();this._touchRotate.disable();this._tapDragZoom.disable();this._el.classList.remove("mapboxgl-touch-zoom-rotate")};
dr.prototype.isEnabled=function(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()};dr.prototype.isActive=function(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()};dr.prototype.disableRotation=function(){this._rotationDisabled=!0;this._touchRotate.disable()};dr.prototype.enableRotation=function(){this._rotationDisabled=!1;this._touchZoom.isEnabled()&&this._touchRotate.enable()};
var _r=function(t){return t.zoom||t.drag||t.pitch||t.rotate},fr=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e}(t$jscomp$2.Event),gr=function(e,o){this._map=e;this._el=this._map.getCanvasContainer();this._handlers=[];this._handlersById={};this._changes=[];this._inertia=new Mo(e);this._bearingSnap=o.bearingSnap;this._previousActiveHandlers={};this._eventsInProgress={};this._addDefaultHandlers(o);t$jscomp$2.bindAll(["handleEvent",
"handleWindowEvent"],this);e=this._el;this._listeners=[[e,"touchstart",{passive:!0}],[e,"touchmove",{passive:!1}],[e,"touchend",void 0],[e,"touchcancel",void 0],[e,"mousedown",void 0],[e,"mousemove",void 0],[e,"mouseup",void 0],[t$jscomp$2.window.document,"mousemove",{capture:!0}],[t$jscomp$2.window.document,"mouseup",void 0],[e,"mouseover",void 0],[e,"mouseout",void 0],[e,"dblclick",void 0],[e,"click",void 0],[e,"keydown",{capture:!1}],[e,"keyup",void 0],[e,"wheel",{passive:!1}],[e,"contextmenu",
void 0],[t$jscomp$2.window,"blur",void 0]];e=0;for(o=this._listeners;e<o.length;e+=1){var s=o[e],l=s[0];i$jscomp$6.addEventListener(l,s[1],l===t$jscomp$2.window.document?this.handleWindowEvent:this.handleEvent,s[2])}};gr.prototype.destroy=function(){for(var e=0,o=this._listeners;e<o.length;e+=1){var r=o[e],a=r[0];i$jscomp$6.removeEventListener(a,r[1],a===t$jscomp$2.window.document?this.handleWindowEvent:this.handleEvent,r[2])}};gr.prototype._addDefaultHandlers=function(t){var e=this._map,i=e.getCanvasContainer();
this._add("mapEvent",new Oo(e,t));var o=e.boxZoom=new Uo(e,t);this._add("boxZoom",o);o=new qo;var a=new cr;e.doubleClickZoom=new lr(a,o);this._add("tapZoom",o);this._add("clickZoom",a);o=new ur;this._add("tapDragZoom",o);a=e.touchPitch=new or;this._add("touchPitch",a);a=new Xo(t);var c=new Ho(t);e.dragRotate=new pr(t,a,c);this._add("mouseRotate",a,["mousePitch"]);this._add("mousePitch",c,["mouseRotate"]);a=new Wo(t);c=new Ko(t);e.dragPan=new hr(i,a,c);this._add("mousePan",a);this._add("touchPan",
c,["touchZoom","touchRotate"]);a=new er;c=new $o;e.touchZoomRotate=new dr(i,c,a,o);this._add("touchRotate",a,["touchPan","touchZoom"]);this._add("touchZoom",c,["touchPan","touchRotate"]);i=e.scrollZoom=new sr(e,this);this._add("scrollZoom",i,["mousePan"]);i=e.keyboard=new ar;this._add("keyboard",i);this._add("blockableMapEvent",new Fo(e));i=0;for(o="boxZoom doubleClickZoom tapDragZoom touchPitch dragRotate dragPan touchZoomRotate scrollZoom keyboard".split(" ");i<o.length;i+=1)a=o[i],t.interactive&&
t[a]&&e[a].enable(t[a])};gr.prototype._add=function(t,e,i){this._handlers.push({handlerName:t,handler:e,allowed:i});this._handlersById[t]=e};gr.prototype.stop=function(){if(!this._updatingCamera){for(var t=0,e=this._handlers;t<e.length;t+=1)e[t].handler.reset();this._inertia.clear();this._fireEvents({},{});this._changes=[]}};gr.prototype.isActive=function(){for(var t=0,e=this._handlers;t<e.length;t+=1)if(e[t].handler.isActive())return!0;return!1};gr.prototype.isZooming=function(){return!!this._eventsInProgress.zoom||
this._map.scrollZoom.isZooming()};gr.prototype.isRotating=function(){return!!this._eventsInProgress.rotate};gr.prototype.isMoving=function(){return!!_r(this._eventsInProgress)||this.isZooming()};gr.prototype._blockedByActive=function(t,e,i){for(var o in t)if(o!==i&&(!e||0>e.indexOf(o)))return!0;return!1};gr.prototype.handleWindowEvent=function(t){this.handleEvent(t,t.type+"Window")};gr.prototype._getMapTouches=function(t){for(var e=[],i=0;i<t.length;i+=1){var r=t[i];this._el.contains(r.target)&&e.push(r)}return e};
gr.prototype.handleEvent=function(t,e){if("blur"!==t.type){this._updatingCamera=!0;for(var o="renderFrame"===t.type?void 0:t,r={needsRenderFrame:!1},a={},n={},s=t.touches?this._getMapTouches(t.touches):void 0,l=s?i$jscomp$6.touchPos(this._el,s):i$jscomp$6.mousePos(this._el,t),c=0,u=this._handlers;c<u.length;c+=1){var h=u[c],p=h.handlerName,d=h.handler;h=h.allowed;if(d.isEnabled()){var f=void 0;this._blockedByActive(n,h,p)?d.reset():d[e||t.type]&&(f=d[e||t.type](t,l,s),this.mergeHandlerResult(r,a,
f,p,o),f&&f.needsRenderFrame&&this._triggerRenderFrame());(f||d.isActive())&&(n[p]=d)}}t={};for(var g in this._previousActiveHandlers)n[g]||(t[g]=o);this._previousActiveHandlers=n;(Object.keys(t).length||mr(r))&&(this._changes.push([r,a,t]),this._triggerRenderFrame());(Object.keys(n).length||mr(r))&&this._map._stop(!0);this._updatingCamera=!1;(o=r.cameraAnimation)&&(this._inertia.clear(),this._fireEvents({},{}),this._changes=[],o(this._map))}else this.stop()};gr.prototype.mergeHandlerResult=function(e,
i,o,r,a){o&&(t$jscomp$2.extend(e,o),e={handlerName:r,originalEvent:o.originalEvent||a},void 0!==o.zoomDelta&&(i.zoom=e),void 0!==o.panDelta&&(i.drag=e),void 0!==o.pitchDelta&&(i.pitch=e),void 0!==o.bearingDelta&&(i.rotate=e))};gr.prototype._applyChanges=function(){for(var e={},i={},o={},r=0,a=this._changes;r<a.length;r+=1){var n=a[r],s=n[0],l=n[1];n=n[2];s.panDelta&&(e.panDelta=(e.panDelta||new t$jscomp$2.Point(0,0))._add(s.panDelta));s.zoomDelta&&(e.zoomDelta=(e.zoomDelta||0)+s.zoomDelta);s.bearingDelta&&
(e.bearingDelta=(e.bearingDelta||0)+s.bearingDelta);s.pitchDelta&&(e.pitchDelta=(e.pitchDelta||0)+s.pitchDelta);void 0!==s.around&&(e.around=s.around);void 0!==s.pinchAround&&(e.pinchAround=s.pinchAround);s.noInertia&&(e.noInertia=s.noInertia);t$jscomp$2.extend(i,l);t$jscomp$2.extend(o,n)}this._updateMapTransform(e,i,o);this._changes=[]};gr.prototype._updateMapTransform=function(t,e,i){var o=this._map,r=o.transform;if(!mr(t))return this._fireEvents(e,i);var a=t.panDelta,n=t.zoomDelta,s=t.bearingDelta,
l=t.pitchDelta,c=t.around,u=t.pinchAround;void 0!==u&&(c=u);o._stop(!0);c=c||o.transform.centerPoint;o=r.pointLocation(a?c.sub(a):c);s&&(r.bearing+=s);l&&(r.pitch+=l);n&&(r.zoom+=n);r.setLocationAtPoint(o,c);this._map._update();t.noInertia||this._inertia.record(t);this._fireEvents(e,i)};gr.prototype._fireEvents=function(e,i){var o=this,r=_r(this._eventsInProgress),a=_r(e),n={};for(s in e)this._eventsInProgress[s]||(n[s+"start"]=e[s].originalEvent),this._eventsInProgress[s]=e[s];for(var l in!r&&a&&
this._fireEvent("movestart",a.originalEvent),n)this._fireEvent(l,n[l]);for(var c in e.rotate&&(this._bearingChanged=!0),a&&this._fireEvent("move",a.originalEvent),e)this._fireEvent(c,e[c].originalEvent);var u;e={};for(var p in this._eventsInProgress){var s=this._eventsInProgress[p];n=s.handlerName;s=s.originalEvent;this._handlersById[n].isActive()||(delete this._eventsInProgress[p],e[p+"end"]=u=i[n]||s)}for(var m in e)this._fireEvent(m,e[m]);i=_r(this._eventsInProgress);!r&&!a||i||(this._updatingCamera=
!0,r=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),a=function(t){return 0!==t&&-o._bearingSnap<t&&t<o._bearingSnap},r?(a(r.bearing||this._map.getBearing())&&(r.bearing=0),this._map.easeTo(r,{originalEvent:u})):(this._map.fire(new t$jscomp$2.Event("moveend",{originalEvent:u})),a(this._map.getBearing())&&this._map.resetNorth()),this._updatingCamera=this._bearingChanged=!1)};gr.prototype._fireEvent=function(e,i){this._map.fire(new t$jscomp$2.Event(e,i?{originalEvent:i}:{}))};gr.prototype._requestFrame=
function(){var t=this;return this._map.triggerRepaint(),this._map._renderTaskQueue.add(function(e){delete t._frameId;t.handleEvent(new fr("renderFrame",{timeStamp:e}));t._applyChanges()})};gr.prototype._triggerRenderFrame=function(){void 0===this._frameId&&(this._frameId=this._requestFrame())};var vr=function(e$jscomp$1){function i$jscomp$0(i,o){e$jscomp$1.call(this);this._zooming=this._moving=!1;this.transform=i;this._bearingSnap=o.bearingSnap;t$jscomp$2.bindAll(["_renderFrameCallback"],this)}return e$jscomp$1&&
(i$jscomp$0.__proto__=e$jscomp$1),(i$jscomp$0.prototype=Object.create(e$jscomp$1&&e$jscomp$1.prototype)).constructor=i$jscomp$0,i$jscomp$0.prototype.getCenter=function(){return new t$jscomp$2.LngLat(this.transform.center.lng,this.transform.center.lat)},i$jscomp$0.prototype.setCenter=function(t,e){return this.jumpTo({center:t},e)},i$jscomp$0.prototype.panBy=function(e,i,o){return e=t$jscomp$2.Point.convert(e).mult(-1),this.panTo(this.transform.center,t$jscomp$2.extend({offset:e},i),o)},i$jscomp$0.prototype.panTo=
function(e,i,o){return this.easeTo(t$jscomp$2.extend({center:e},i),o)},i$jscomp$0.prototype.getZoom=function(){return this.transform.zoom},i$jscomp$0.prototype.setZoom=function(t,e){return this.jumpTo({zoom:t},e),this},i$jscomp$0.prototype.zoomTo=function(e,i,o){return this.easeTo(t$jscomp$2.extend({zoom:e},i),o)},i$jscomp$0.prototype.zoomIn=function(t,e){return this.zoomTo(this.getZoom()+1,t,e),this},i$jscomp$0.prototype.zoomOut=function(t,e){return this.zoomTo(this.getZoom()-1,t,e),this},i$jscomp$0.prototype.getBearing=
function(){return this.transform.bearing},i$jscomp$0.prototype.setBearing=function(t,e){return this.jumpTo({bearing:t},e),this},i$jscomp$0.prototype.getPadding=function(){return this.transform.padding},i$jscomp$0.prototype.setPadding=function(t,e){return this.jumpTo({padding:t},e),this},i$jscomp$0.prototype.rotateTo=function(e,i,o){return this.easeTo(t$jscomp$2.extend({bearing:e},i),o)},i$jscomp$0.prototype.resetNorth=function(e,i){return this.rotateTo(0,t$jscomp$2.extend({duration:1E3},e),i),this},
i$jscomp$0.prototype.resetNorthPitch=function(e,i){return this.easeTo(t$jscomp$2.extend({bearing:0,pitch:0,duration:1E3},e),i),this},i$jscomp$0.prototype.snapToNorth=function(t,e){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(t,e):this},i$jscomp$0.prototype.getPitch=function(){return this.transform.pitch},i$jscomp$0.prototype.setPitch=function(t,e){return this.jumpTo({pitch:t},e),this},i$jscomp$0.prototype.cameraForBounds=function(e,i){return e=t$jscomp$2.LngLatBounds.convert(e),
this._cameraForBoxAndBearing(e.getNorthWest(),e.getSouthEast(),0,i)},i$jscomp$0.prototype._cameraForBoxAndBearing=function(e,i,o,r){var a={top:0,bottom:0,right:0,left:0};if("number"==typeof(r=t$jscomp$2.extend({padding:a,offset:[0,0],maxZoom:this.transform.maxZoom},r)).padding){var n=r.padding;r.padding={top:n,bottom:n,right:n,left:n}}r.padding=t$jscomp$2.extend(a,r.padding);a=this.transform;n=a.padding;e=a.project(t$jscomp$2.LngLat.convert(e));i=a.project(t$jscomp$2.LngLat.convert(i));var h=e.rotate(-o*
Math.PI/180),p=i.rotate(-o*Math.PI/180),d=new t$jscomp$2.Point(Math.max(h.x,p.x),Math.max(h.y,p.y));h=new t$jscomp$2.Point(Math.min(h.x,p.x),Math.min(h.y,p.y));h=d.sub(h);d=(a.width-(n.left+n.right+r.padding.left+r.padding.right))/h.x;n=(a.height-(n.top+n.bottom+r.padding.top+r.padding.bottom))/h.y;if(!(0>n||0>d))return n=Math.min(a.scaleZoom(a.scale*Math.min(d,n)),r.maxZoom),d=t$jscomp$2.Point.convert(r.offset),r=(new t$jscomp$2.Point(d.x+(r.padding.left-r.padding.right)/2,d.y+(r.padding.top-r.padding.bottom)/
2)).mult(a.scale/a.zoomScale(n)),{center:a.unproject(e.add(i).div(2).sub(r)),zoom:n,bearing:o};t$jscomp$2.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.")},i$jscomp$0.prototype.fitBounds=function(t,e,i){return this._fitInternal(this.cameraForBounds(t,e),e,i)},i$jscomp$0.prototype.fitScreenCoordinates=function(e,i,o,r,a){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(t$jscomp$2.Point.convert(e)),this.transform.pointLocation(t$jscomp$2.Point.convert(i)),
o,r),r,a)},i$jscomp$0.prototype._fitInternal=function(e,i,o){return e?(delete (i=t$jscomp$2.extend(e,i)).padding,i.linear?this.easeTo(i,o):this.flyTo(i,o)):this},i$jscomp$0.prototype.jumpTo=function(e,i){this.stop();var o=this.transform,r=!1,a=!1,n=!1;return"zoom"in e&&o.zoom!==+e.zoom&&(r=!0,o.zoom=+e.zoom),void 0!==e.center&&(o.center=t$jscomp$2.LngLat.convert(e.center)),"bearing"in e&&o.bearing!==+e.bearing&&(a=!0,o.bearing=+e.bearing),"pitch"in e&&o.pitch!==+e.pitch&&(n=!0,o.pitch=+e.pitch),null==
e.padding||o.isPaddingEqual(e.padding)||(o.padding=e.padding),this.fire(new t$jscomp$2.Event("movestart",i)).fire(new t$jscomp$2.Event("move",i)),r&&this.fire(new t$jscomp$2.Event("zoomstart",i)).fire(new t$jscomp$2.Event("zoom",i)).fire(new t$jscomp$2.Event("zoomend",i)),a&&this.fire(new t$jscomp$2.Event("rotatestart",i)).fire(new t$jscomp$2.Event("rotate",i)).fire(new t$jscomp$2.Event("rotateend",i)),n&&this.fire(new t$jscomp$2.Event("pitchstart",i)).fire(new t$jscomp$2.Event("pitch",i)).fire(new t$jscomp$2.Event("pitchend",
i)),this.fire(new t$jscomp$2.Event("moveend",i))},i$jscomp$0.prototype.easeTo=function(e$jscomp$0,i){var o=this;this._stop(!1,e$jscomp$0.easeId);(!1===(e$jscomp$0=t$jscomp$2.extend({offset:[0,0],duration:500,easing:t$jscomp$2.ease},e$jscomp$0)).animate||!e$jscomp$0.essential&&t$jscomp$2.browser.prefersReducedMotion)&&(e$jscomp$0.duration=0);var r=this.transform,a=this.getZoom(),n=this.getBearing(),s=this.getPitch(),l=this.getPadding(),c="zoom"in e$jscomp$0?+e$jscomp$0.zoom:a,u="bearing"in e$jscomp$0?
this._normalizeBearing(e$jscomp$0.bearing,n):n,h="pitch"in e$jscomp$0?+e$jscomp$0.pitch:s,p="padding"in e$jscomp$0?e$jscomp$0.padding:r.padding,d=t$jscomp$2.Point.convert(e$jscomp$0.offset),_=r.centerPoint.add(d),f$jscomp$0=r.pointLocation(_),m=t$jscomp$2.LngLat.convert(e$jscomp$0.center||f$jscomp$0);this._normalizeCenter(m);var g,v,y=r.project(f$jscomp$0),x=r.project(m).sub(y),b=r.zoomScale(c-a);e$jscomp$0.around&&(g=t$jscomp$2.LngLat.convert(e$jscomp$0.around),v=r.locationPoint(g));f$jscomp$0={moving:this._moving,
zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||c!==a,this._rotating=this._rotating||n!==u,this._pitching=this._pitching||h!==s,this._padding=!r.isPaddingEqual(p),this._easeId=e$jscomp$0.easeId,this._prepareEase(i,e$jscomp$0.noMoveStart,f$jscomp$0),clearTimeout(this._easeEndTimeoutID),this._ease(function(e){if(o._zooming&&(r.zoom=t$jscomp$2.number(a,c,e)),o._rotating&&(r.bearing=t$jscomp$2.number(n,u,e)),o._pitching&&(r.pitch=t$jscomp$2.number(s,
h,e)),o._padding&&(r.interpolatePadding(l,p,e),_=r.centerPoint.add(d)),g)r.setLocationAtPoint(g,v);else{var f=r.zoomScale(r.zoom-a);e=r.unproject(y.add(x.mult(e*Math.pow(c>a?Math.min(2,b):Math.max(.5,b),1-e))).mult(f));r.setLocationAtPoint(r.renderWorldCopies?e.wrap():e,_)}o._fireMoveEvents(i)},function(t){o._afterEase(i,t)},e$jscomp$0),this},i$jscomp$0.prototype._prepareEase=function(e,i,o){void 0===o&&(o={});this._moving=!0;i||o.moving||this.fire(new t$jscomp$2.Event("movestart",e));this._zooming&&
!o.zooming&&this.fire(new t$jscomp$2.Event("zoomstart",e));this._rotating&&!o.rotating&&this.fire(new t$jscomp$2.Event("rotatestart",e));this._pitching&&!o.pitching&&this.fire(new t$jscomp$2.Event("pitchstart",e))},i$jscomp$0.prototype._fireMoveEvents=function(e){this.fire(new t$jscomp$2.Event("move",e));this._zooming&&this.fire(new t$jscomp$2.Event("zoom",e));this._rotating&&this.fire(new t$jscomp$2.Event("rotate",e));this._pitching&&this.fire(new t$jscomp$2.Event("pitch",e))},i$jscomp$0.prototype._afterEase=
function(e,i){if(!this._easeId||!i||this._easeId!==i){delete this._easeId;i=this._zooming;var r=this._rotating,a=this._pitching;this._padding=this._pitching=this._rotating=this._zooming=this._moving=!1;i&&this.fire(new t$jscomp$2.Event("zoomend",e));r&&this.fire(new t$jscomp$2.Event("rotateend",e));a&&this.fire(new t$jscomp$2.Event("pitchend",e));this.fire(new t$jscomp$2.Event("moveend",e))}},i$jscomp$0.prototype.flyTo=function(e$jscomp$0,i){function C(t){t=(T*T-w*w+(t?-1:1)*S*S*E*E)/(2*(t?T:w)*S*
E);return Math.log(Math.sqrt(t*t+1)-t)}function D(t){return(Math.exp(t)+Math.exp(-t))/2}var o=this;if(!e$jscomp$0.essential&&t$jscomp$2.browser.prefersReducedMotion)return e$jscomp$0=t$jscomp$2.pick(e$jscomp$0,["center","zoom","bearing","pitch","around"]),this.jumpTo(e$jscomp$0,i);this.stop();e$jscomp$0=t$jscomp$2.extend({offset:[0,0],speed:1.2,curve:1.42,easing:t$jscomp$2.ease},e$jscomp$0);var a=this.transform,n=this.getZoom(),s=this.getBearing(),l=this.getPitch(),c=this.getPadding(),u="zoom"in e$jscomp$0?
t$jscomp$2.clamp(+e$jscomp$0.zoom,a.minZoom,a.maxZoom):n,h="bearing"in e$jscomp$0?this._normalizeBearing(e$jscomp$0.bearing,s):s,p="pitch"in e$jscomp$0?+e$jscomp$0.pitch:l,d="padding"in e$jscomp$0?e$jscomp$0.padding:a.padding,_$jscomp$0=a.zoomScale(u-n),f=t$jscomp$2.Point.convert(e$jscomp$0.offset),m=a.centerPoint.add(f),g=a.pointLocation(m),v=t$jscomp$2.LngLat.convert(e$jscomp$0.center||g);this._normalizeCenter(v);var y=a.project(g),x=a.project(v).sub(y),b=e$jscomp$0.curve,w=Math.max(a.width,a.height),
T=w/_$jscomp$0,E=x.mag();"minZoom"in e$jscomp$0&&(_$jscomp$0=t$jscomp$2.clamp(Math.min(e$jscomp$0.minZoom,n,u),a.minZoom,a.maxZoom),_$jscomp$0=w/a.zoomScale(_$jscomp$0-n),b=Math.sqrt(_$jscomp$0/E*2));var S=b*b,M=C(0),L=function(t){return D(M)/D(M+b*t)},A=function(t){var JSCompiler_temp_const=D(M);t=e=M+b*t;return w*((JSCompiler_temp_const*((Math.exp(t)-Math.exp(-t))/2/D(e))-(Math.exp(M)-Math.exp(-M))/2)/S)/E;var e},R=(C(1)-M)/b;if(1E-6>Math.abs(E)||!isFinite(R)){if(1E-6>Math.abs(w-T))return this.easeTo(e$jscomp$0,
i);var k=T<w?-1:1;R=Math.abs(Math.log(T/w))/b;A=function(){return 0};L=function(t){return Math.exp(k*b*t)}}return e$jscomp$0.duration="duration"in e$jscomp$0?+e$jscomp$0.duration:1E3*R/("screenSpeed"in e$jscomp$0?+e$jscomp$0.screenSpeed/b:+e$jscomp$0.speed),e$jscomp$0.maxDuration&&e$jscomp$0.duration>e$jscomp$0.maxDuration&&(e$jscomp$0.duration=0),this._zooming=!0,this._rotating=s!==h,this._pitching=p!==l,this._padding=!a.isPaddingEqual(d),this._prepareEase(i,!1),this._ease(function(e){var r=e*R,
_=1/L(r);a.zoom=1===e?u:n+a.scaleZoom(_);o._rotating&&(a.bearing=t$jscomp$2.number(s,h,e));o._pitching&&(a.pitch=t$jscomp$2.number(l,p,e));o._padding&&(a.interpolatePadding(c,d,e),m=a.centerPoint.add(f));e=1===e?v:a.unproject(y.add(x.mult(A(r))).mult(_));a.setLocationAtPoint(a.renderWorldCopies?e.wrap():e,m);o._fireMoveEvents(i)},function(){return o._afterEase(i)},e$jscomp$0),this},i$jscomp$0.prototype.isEasing=function(){return!!this._easeFrameId},i$jscomp$0.prototype.stop=function(){return this._stop()},
i$jscomp$0.prototype._stop=function(t,e){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){var i=this._onEaseEnd;delete this._onEaseEnd;i.call(this,e)}t||(t=this.handlers)&&t.stop();return this},i$jscomp$0.prototype._ease=function(e,i,o){!1===o.animate||0===o.duration?(e(1),i()):(this._easeStart=t$jscomp$2.browser.now(),this._easeOptions=o,this._onEaseFrame=e,this._onEaseEnd=i,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))},
i$jscomp$0.prototype._renderFrameCallback=function(){var e=Math.min((t$jscomp$2.browser.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(e));1>e?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},i$jscomp$0.prototype._normalizeBearing=function(e,i){e=t$jscomp$2.wrap(e,-180,180);var o=Math.abs(e-i);return Math.abs(e-360-i)<o&&(e-=360),Math.abs(e+360-i)<o&&(e+=360),e},i$jscomp$0.prototype._normalizeCenter=function(t){var e=
this.transform;e.renderWorldCopies&&!e.lngRange&&(e=t.lng-e.center.lng,t.lng+=180<e?-360:-180>e?360:0)},i$jscomp$0}(t$jscomp$2.Evented),yr=function(e){void 0===e&&(e={});this.options=e;t$jscomp$2.bindAll(["_updateEditLink","_updateData","_updateCompact"],this)};yr.prototype.getDefaultPosition=function(){return"bottom-right"};yr.prototype.onAdd=function(t){var e=this.options&&this.options.compact;return this._map=t,this._container=i$jscomp$6.create("div","mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._innerContainer=
i$jscomp$6.create("div","mapboxgl-ctrl-attrib-inner",this._container),e&&this._container.classList.add("mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("moveend",this._updateEditLink),void 0===e&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container};yr.prototype.onRemove=function(){i$jscomp$6.remove(this._container);this._map.off("styledata",this._updateData);
this._map.off("sourcedata",this._updateData);this._map.off("moveend",this._updateEditLink);this._map.off("resize",this._updateCompact);this._attribHTML=this._map=void 0};yr.prototype._updateEditLink=function(){var e$jscomp$0=this._editLink;e$jscomp$0||(e$jscomp$0=this._editLink=this._container.querySelector(".mapbox-improve-map"));var i=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:this._map._requestManager._customAccessToken||t$jscomp$2.config.ACCESS_TOKEN}];
if(e$jscomp$0){var o$jscomp$0=i.reduce(function(t,e,o){return e.value&&(t+=e.key+"\x3d"+e.value+(o<i.length-1?"\x26":"")),t},"?");e$jscomp$0.href=t$jscomp$2.config.FEEDBACK_URL+"/"+o$jscomp$0+(this._map._hash?this._map._hash.getHashString(!0):"");e$jscomp$0.rel="noopener nofollow"}};yr.prototype._updateData=function(t){!t||"metadata"!==t.sourceDataType&&"style"!==t.dataType||(this._updateAttributions(),this._updateEditLink())};yr.prototype._updateAttributions=function(){if(this._map.style){var t$jscomp$0=
[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?t$jscomp$0=t$jscomp$0.concat(this.options.customAttribution.map(function(t){return"string"!=typeof t?"":t})):"string"==typeof this.options.customAttribution&&t$jscomp$0.push(this.options.customAttribution)),this._map.style.stylesheet){var e$jscomp$0=this._map.style.stylesheet;this.styleOwner=e$jscomp$0.owner;this.styleId=e$jscomp$0.id}e$jscomp$0=this._map.style.sourceCaches;for(var o in e$jscomp$0){var r=e$jscomp$0[o];
r.used&&(r=r.getSource(),r.attribution&&0>t$jscomp$0.indexOf(r.attribution)&&t$jscomp$0.push(r.attribution))}t$jscomp$0.sort(function(t,e){return t.length-e.length});o=(t$jscomp$0=t$jscomp$0.filter(function(e,i){for(i+=1;i<t$jscomp$0.length;i++)if(0<=t$jscomp$0[i].indexOf(e))return!1;return!0})).join(" | ");o!==this._attribHTML&&(this._attribHTML=o,t$jscomp$0.length?(this._innerContainer.innerHTML=o,this._container.classList.remove("mapboxgl-attrib-empty")):this._container.classList.add("mapboxgl-attrib-empty"),
this._editLink=null)}};yr.prototype._updateCompact=function(){640>=this._map.getCanvasContainer().offsetWidth?this._container.classList.add("mapboxgl-compact"):this._container.classList.remove("mapboxgl-compact")};var xr=function(){t$jscomp$2.bindAll(["_updateLogo"],this);t$jscomp$2.bindAll(["_updateCompact"],this)};xr.prototype.onAdd=function(t){this._map=t;this._container=i$jscomp$6.create("div","mapboxgl-ctrl");t=i$jscomp$6.create("a","mapboxgl-ctrl-logo");return t.target="_blank",t.rel="noopener nofollow",
t.href="https://www.mapbox.com/",t.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),t.setAttribute("rel","noopener nofollow"),this._container.appendChild(t),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._map.on("resize",this._updateCompact),this._updateCompact(),this._container};xr.prototype.onRemove=function(){i$jscomp$6.remove(this._container);this._map.off("sourcedata",this._updateLogo);this._map.off("resize",this._updateCompact)};
xr.prototype.getDefaultPosition=function(){return"bottom-left"};xr.prototype._updateLogo=function(t){t&&"metadata"!==t.sourceDataType||(this._container.style.display=this._logoRequired()?"block":"none")};xr.prototype._logoRequired=function(){if(this._map.style){var t=this._map.style.sourceCaches,e;for(e in t)if(t[e].getSource().mapbox_logo)return!0;return!1}};xr.prototype._updateCompact=function(){var t=this._container.children;t.length&&(t=t[0],250>this._map.getCanvasContainer().offsetWidth?t.classList.add("mapboxgl-compact"):
t.classList.remove("mapboxgl-compact"))};var br=function(){this._queue=[];this._id=0;this._currentlyRunning=this._cleared=!1};br.prototype.add=function(t){var e=++this._id;return this._queue.push({callback:t,id:e,cancelled:!1}),e};br.prototype.remove=function(t){var e=this._currentlyRunning,i=0;for(e=e?this._queue.concat(e):this._queue;i<e.length;i+=1){var r=e[i];if(r.id===t)return void(r.cancelled=!0)}};br.prototype.run=function(t){void 0===t&&(t=0);var e=this._currentlyRunning=this._queue;this._queue=
[];for(var i=0;i<e.length;i+=1){var r=e[i];if(!r.cancelled&&(r.callback(t),this._cleared))break}this._currentlyRunning=this._cleared=!1};br.prototype.clear=function(){this._currentlyRunning&&(this._cleared=!0);this._queue=[]};var wr={"FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","NavigationControl.ResetBearing":"Reset bearing to north",
"NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm"},Tr=t$jscomp$2.window.HTMLImageElement,Er=t$jscomp$2.window.HTMLElement,Ir=t$jscomp$2.window.ImageBitmap,Pr={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,
touchZoomRotate:!0,touchPitch:!0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",transformRequest:null,accessToken:null,fadeDuration:300,crossSourceCollisions:!0},Sr=function(o$jscomp$1){function r$jscomp$0(e$jscomp$0){var i=this;if(null!=(e$jscomp$0=t$jscomp$2.extend({},Pr,e$jscomp$0)).minZoom&&
null!=e$jscomp$0.maxZoom&&e$jscomp$0.minZoom>e$jscomp$0.maxZoom)throw Error("maxZoom must be greater than or equal to minZoom");if(null!=e$jscomp$0.minPitch&&null!=e$jscomp$0.maxPitch&&e$jscomp$0.minPitch>e$jscomp$0.maxPitch)throw Error("maxPitch must be greater than or equal to minPitch");if(null!=e$jscomp$0.minPitch&&0>e$jscomp$0.minPitch)throw Error("minPitch must be greater than or equal to 0");if(null!=e$jscomp$0.maxPitch&&60<e$jscomp$0.maxPitch)throw Error("maxPitch must be less than or equal to 60");
var r=new To(e$jscomp$0.minZoom,e$jscomp$0.maxZoom,e$jscomp$0.minPitch,e$jscomp$0.maxPitch,e$jscomp$0.renderWorldCopies);if(o$jscomp$1.call(this,r,e$jscomp$0),this._interactive=e$jscomp$0.interactive,this._maxTileCacheSize=e$jscomp$0.maxTileCacheSize,this._failIfMajorPerformanceCaveat=e$jscomp$0.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=e$jscomp$0.preserveDrawingBuffer,this._antialias=e$jscomp$0.antialias,this._trackResize=e$jscomp$0.trackResize,this._bearingSnap=e$jscomp$0.bearingSnap,
this._refreshExpiredTiles=e$jscomp$0.refreshExpiredTiles,this._fadeDuration=e$jscomp$0.fadeDuration,this._crossSourceCollisions=e$jscomp$0.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=e$jscomp$0.collectResourceTiming,this._renderTaskQueue=new br,this._controls=[],this._mapId=t$jscomp$2.uniqueId(),this._locale=t$jscomp$2.extend({},wr,e$jscomp$0.locale),this._requestManager=new t$jscomp$2.RequestManager(e$jscomp$0.transformRequest,e$jscomp$0.accessToken),"string"==typeof e$jscomp$0.container){if(this._container=
t$jscomp$2.window.document.getElementById(e$jscomp$0.container),!this._container)throw Error("Container '"+e$jscomp$0.container+"' not found.");}else{if(!(e$jscomp$0.container instanceof Er))throw Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=e$jscomp$0.container}if(e$jscomp$0.maxBounds&&this.setMaxBounds(e$jscomp$0.maxBounds),t$jscomp$2.bindAll(["_onWindowOnline","_onWindowResize","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),
void 0===this.painter)throw Error("Failed to initialize WebGL.");this.on("move",function(){return i._update(!1)});this.on("moveend",function(){return i._update(!1)});this.on("zoom",function(){return i._update(!0)});void 0!==t$jscomp$2.window&&(t$jscomp$2.window.addEventListener("online",this._onWindowOnline,!1),t$jscomp$2.window.addEventListener("resize",this._onWindowResize,!1));this.handlers=new gr(this,e$jscomp$0);(this._hash=e$jscomp$0.hash&&(new Io("string"==typeof e$jscomp$0.hash&&e$jscomp$0.hash||
void 0)).addTo(this))&&this._hash._onHashChange()||(this.jumpTo({center:e$jscomp$0.center,zoom:e$jscomp$0.zoom,bearing:e$jscomp$0.bearing,pitch:e$jscomp$0.pitch}),e$jscomp$0.bounds&&(this.resize(),this.fitBounds(e$jscomp$0.bounds,t$jscomp$2.extend({},e$jscomp$0.fitBoundsOptions,{duration:0}))));this.resize();this._localIdeographFontFamily=e$jscomp$0.localIdeographFontFamily;e$jscomp$0.style&&this.setStyle(e$jscomp$0.style,{localIdeographFontFamily:e$jscomp$0.localIdeographFontFamily});e$jscomp$0.attributionControl&&
this.addControl(new yr({customAttribution:e$jscomp$0.customAttribution}));this.addControl(new xr,e$jscomp$0.logoPosition);this.on("style.load",function(){i.transform.unmodified&&i.jumpTo(i.style.stylesheet)});this.on("data",function(e){i._update("style"===e.dataType);i.fire(new t$jscomp$2.Event(e.dataType+"data",e))});this.on("dataloading",function(e){i.fire(new t$jscomp$2.Event(e.dataType+"dataloading",e))})}o$jscomp$1&&(r$jscomp$0.__proto__=o$jscomp$1);(r$jscomp$0.prototype=Object.create(o$jscomp$1&&
o$jscomp$1.prototype)).constructor=r$jscomp$0;var a$jscomp$0={showTileBoundaries:{configurable:!0},showPadding:{configurable:!0},showCollisionBoxes:{configurable:!0},showOverdrawInspector:{configurable:!0},repaint:{configurable:!0},vertices:{configurable:!0},version:{configurable:!0}};return r$jscomp$0.prototype._getMapId=function(){return this._mapId},r$jscomp$0.prototype.addControl=function(e,i){if(void 0===i&&e.getDefaultPosition&&(i=e.getDefaultPosition()),void 0===i&&(i="top-right"),!e||!e.onAdd)return this.fire(new t$jscomp$2.ErrorEvent(Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));
var o=e.onAdd(this);this._controls.push(e);e=this._controlPositions[i];return-1!==i.indexOf("bottom")?e.insertBefore(o,e.firstChild):e.appendChild(o),this},r$jscomp$0.prototype.removeControl=function(e){if(!e||!e.onRemove)return this.fire(new t$jscomp$2.ErrorEvent(Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));var i=this._controls.indexOf(e);return-1<i&&this._controls.splice(i,1),e.onRemove(this),this},r$jscomp$0.prototype.resize=function(e){var i=
this._containerDimensions(),o=i[0];i=i[1];this._resizeCanvas(o,i);this.transform.resize(o,i);this.painter.resize(o,i);o=!this._moving;return o&&(this.stop(),this.fire(new t$jscomp$2.Event("movestart",e)).fire(new t$jscomp$2.Event("move",e))),this.fire(new t$jscomp$2.Event("resize",e)),o&&this.fire(new t$jscomp$2.Event("moveend",e)),this},r$jscomp$0.prototype.getBounds=function(){return this.transform.getBounds()},r$jscomp$0.prototype.getMaxBounds=function(){return this.transform.getMaxBounds()},r$jscomp$0.prototype.setMaxBounds=
function(e){return this.transform.setMaxBounds(t$jscomp$2.LngLatBounds.convert(e)),this._update()},r$jscomp$0.prototype.setMinZoom=function(t){if(-2<=(t=null==t?-2:t)&&t<=this.transform.maxZoom)return this.transform.minZoom=t,this._update(),this.getZoom()<t&&this.setZoom(t),this;throw Error("minZoom must be between -2 and the current maxZoom, inclusive");},r$jscomp$0.prototype.getMinZoom=function(){return this.transform.minZoom},r$jscomp$0.prototype.setMaxZoom=function(t){if((t=null==t?22:t)>=this.transform.minZoom)return this.transform.maxZoom=
t,this._update(),this.getZoom()>t&&this.setZoom(t),this;throw Error("maxZoom must be greater than the current minZoom");},r$jscomp$0.prototype.getMaxZoom=function(){return this.transform.maxZoom},r$jscomp$0.prototype.setMinPitch=function(t){if(0>(t=null==t?0:t))throw Error("minPitch must be greater than or equal to 0");if(0<=t&&t<=this.transform.maxPitch)return this.transform.minPitch=t,this._update(),this.getPitch()<t&&this.setPitch(t),this;throw Error("minPitch must be between 0 and the current maxPitch, inclusive");
},r$jscomp$0.prototype.getMinPitch=function(){return this.transform.minPitch},r$jscomp$0.prototype.setMaxPitch=function(t){if(60<(t=null==t?60:t))throw Error("maxPitch must be less than or equal to 60");if(t>=this.transform.minPitch)return this.transform.maxPitch=t,this._update(),this.getPitch()>t&&this.setPitch(t),this;throw Error("maxPitch must be greater than the current minPitch");},r$jscomp$0.prototype.getMaxPitch=function(){return this.transform.maxPitch},r$jscomp$0.prototype.getRenderWorldCopies=
function(){return this.transform.renderWorldCopies},r$jscomp$0.prototype.setRenderWorldCopies=function(t){return this.transform.renderWorldCopies=t,this._update()},r$jscomp$0.prototype.project=function(e){return this.transform.locationPoint(t$jscomp$2.LngLat.convert(e))},r$jscomp$0.prototype.unproject=function(e){return this.transform.pointLocation(t$jscomp$2.Point.convert(e))},r$jscomp$0.prototype.isMoving=function(){return this._moving||this.handlers.isMoving()},r$jscomp$0.prototype.isZooming=function(){return this._zooming||
this.handlers.isZooming()},r$jscomp$0.prototype.isRotating=function(){return this._rotating||this.handlers.isRotating()},r$jscomp$0.prototype._createDelegatedListener=function(t$jscomp$0,e$jscomp$0,i){var o$jscomp$0,r=this;if("mouseenter"===t$jscomp$0||"mouseover"===t$jscomp$0){var a=!1;return{layer:e$jscomp$0,listener:i,delegates:{mousemove:function(o){var n=r.getLayer(e$jscomp$0)?r.queryRenderedFeatures(o.point,{layers:[e$jscomp$0]}):[];n.length?a||(a=!0,i.call(r,new Ro(t$jscomp$0,r,o.originalEvent,
{features:n}))):a=!1},mouseout:function(){a=!1}}}}if("mouseleave"===t$jscomp$0||"mouseout"===t$jscomp$0){var n$jscomp$0=!1;return{layer:e$jscomp$0,listener:i,delegates:{mousemove:function(o){(r.getLayer(e$jscomp$0)?r.queryRenderedFeatures(o.point,{layers:[e$jscomp$0]}):[]).length?n$jscomp$0=!0:n$jscomp$0&&(n$jscomp$0=!1,i.call(r,new Ro(t$jscomp$0,r,o.originalEvent)))},mouseout:function(e){n$jscomp$0&&(n$jscomp$0=!1,i.call(r,new Ro(t$jscomp$0,r,e.originalEvent)))}}}}return{layer:e$jscomp$0,listener:i,
delegates:(o$jscomp$0={},o$jscomp$0[t$jscomp$0]=function(t){var o=r.getLayer(e$jscomp$0)?r.queryRenderedFeatures(t.point,{layers:[e$jscomp$0]}):[];o.length&&(t.features=o,i.call(r,t),delete t.features)},o$jscomp$0)}},r$jscomp$0.prototype.on=function(t,e,i){if(void 0===i)return o$jscomp$1.prototype.on.call(this,t,e);e=this._createDelegatedListener(t,e,i);for(var a in this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[t]=this._delegatedListeners[t]||[],this._delegatedListeners[t].push(e),
e.delegates)this.on(a,e.delegates[a]);return this},r$jscomp$0.prototype.once=function(t,e,i){if(void 0===i)return o$jscomp$1.prototype.once.call(this,t,e);t=this._createDelegatedListener(t,e,i);for(var a in t.delegates)this.once(a,t.delegates[a]);return this},r$jscomp$0.prototype.off=function(t,e,i){if(void 0===i)e=o$jscomp$1.prototype.off.call(this,t,e);else{if(this._delegatedListeners&&this._delegatedListeners[t])a:{t=this._delegatedListeners[t];for(var n=0;n<t.length;n++){var s=t[n];if(s.layer===
e&&s.listener===i){for(var l in s.delegates)this.off(l,s.delegates[l]);t.splice(n,1);break a}}}e=this}return e},r$jscomp$0.prototype.queryRenderedFeatures=function(e,i){if(!this.style)return[];if(void 0!==i||void 0===e||e instanceof t$jscomp$2.Point||Array.isArray(e)||(i=e,e=void 0),i=i||{},(e=e||[[0,0],[this.transform.width,this.transform.height]])instanceof t$jscomp$2.Point||"number"==typeof e[0])var o=[t$jscomp$2.Point.convert(e)];else o=t$jscomp$2.Point.convert(e[0]),e=t$jscomp$2.Point.convert(e[1]),
o=[o,new t$jscomp$2.Point(e.x,o.y),e,new t$jscomp$2.Point(o.x,e.y),o];return this.style.queryRenderedFeatures(o,i,this.transform)},r$jscomp$0.prototype.querySourceFeatures=function(t,e){return this.style.querySourceFeatures(t,e)},r$jscomp$0.prototype.setStyle=function(e,i){return!1!==(i=t$jscomp$2.extend({},{localIdeographFontFamily:this._localIdeographFontFamily},i)).diff&&i.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&e?(this._diffStyle(e,i),this):(this._localIdeographFontFamily=
i.localIdeographFontFamily,this._updateStyle(e,i))},r$jscomp$0.prototype._getUIString=function(t){var e=this._locale[t];if(null==e)throw Error("Missing UI string '"+t+"'");return e},r$jscomp$0.prototype._updateStyle=function(t,e){return this.style&&(this.style.setEventedParent(null),this.style._remove()),t?(this.style=new qe(this,e||{}),this.style.setEventedParent(this,{style:this.style}),"string"==typeof t?this.style.loadURL(t):this.style.loadJSON(t),this):(delete this.style,this)},r$jscomp$0.prototype._lazyInitEmptyStyle=
function(){this.style||(this.style=new qe(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())},r$jscomp$0.prototype._diffStyle=function(e$jscomp$0,i){var o=this;"string"==typeof e$jscomp$0?(e$jscomp$0=this._requestManager.normalizeStyleURL(e$jscomp$0),e$jscomp$0=this._requestManager.transformRequest(e$jscomp$0,t$jscomp$2.ResourceType.Style),t$jscomp$2.getJSON(e$jscomp$0,function(e,r){e?o.fire(new t$jscomp$2.ErrorEvent(e)):r&&o._updateDiff(r,i)})):"object"==typeof e$jscomp$0&&
this._updateDiff(e$jscomp$0,i)},r$jscomp$0.prototype._updateDiff=function(e,i){try{this.style.setState(e)&&this._update(!0)}catch(o$406){t$jscomp$2.warnOnce("Unable to perform style diff: "+(o$406.message||o$406.error||o$406)+".  Rebuilding the style from scratch."),this._updateStyle(e,i)}},r$jscomp$0.prototype.getStyle=function(){if(this.style)return this.style.serialize()},r$jscomp$0.prototype.isStyleLoaded=function(){return this.style?this.style.loaded():t$jscomp$2.warnOnce("There is no style added to the map.")},
r$jscomp$0.prototype.addSource=function(t,e){return this._lazyInitEmptyStyle(),this.style.addSource(t,e),this._update(!0)},r$jscomp$0.prototype.isSourceLoaded=function(e){var i=this.style&&this.style.sourceCaches[e];if(void 0!==i)return i.loaded();this.fire(new t$jscomp$2.ErrorEvent(Error("There is no source with ID '"+e+"'")))},r$jscomp$0.prototype.areTilesLoaded=function(){var t=this.style&&this.style.sourceCaches,e;for(e in t){var i=t[e]._tiles,o;for(o in i){var r=i[o];if("loaded"!==r.state&&"errored"!==
r.state)return!1}}return!0},r$jscomp$0.prototype.addSourceType=function(t,e,i){return this._lazyInitEmptyStyle(),this.style.addSourceType(t,e,i)},r$jscomp$0.prototype.removeSource=function(t){return this.style.removeSource(t),this._update(!0)},r$jscomp$0.prototype.getSource=function(t){return this.style.getSource(t)},r$jscomp$0.prototype.addImage=function(e,i,o){void 0===o&&(o={});var r=o.pixelRatio;void 0===r&&(r=1);var a=o.sdf;void 0===a&&(a=!1);var n=o.stretchX,s=o.stretchY;o=o.content;if(this._lazyInitEmptyStyle(),
i instanceof Tr||Ir&&i instanceof Ir)i=t$jscomp$2.browser.getImageData(i),this.style.addImage(e,{data:new t$jscomp$2.RGBAImage({width:i.width,height:i.height},i.data),pixelRatio:r,stretchX:n,stretchY:s,content:o,sdf:a,version:0});else{if(void 0===i.width||void 0===i.height)return this.fire(new t$jscomp$2.ErrorEvent(Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));
this.style.addImage(e,{data:new t$jscomp$2.RGBAImage({width:i.width,height:i.height},new Uint8Array(i.data)),pixelRatio:r,stretchX:n,stretchY:s,content:o,sdf:a,version:0,userImage:i});i.onAdd&&i.onAdd(this,e)}},r$jscomp$0.prototype.updateImage=function(e,i){var o=this.style.getImage(e);if(!o)return this.fire(new t$jscomp$2.ErrorEvent(Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));var r=i instanceof Tr||Ir&&i instanceof Ir?t$jscomp$2.browser.getImageData(i):
i,a=r.width,n=r.height;r=r.data;return void 0===a||void 0===n?this.fire(new t$jscomp$2.ErrorEvent(Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`"))):a!==o.data.width||n!==o.data.height?this.fire(new t$jscomp$2.ErrorEvent(Error("The width and height of the updated image must be that same as the previous version of the image"))):(o.data.replace(r,
!(i instanceof Tr||Ir&&i instanceof Ir)),void this.style.updateImage(e,o))},r$jscomp$0.prototype.hasImage=function(e){return e?!!this.style.getImage(e):(this.fire(new t$jscomp$2.ErrorEvent(Error("Missing required image id"))),!1)},r$jscomp$0.prototype.removeImage=function(t){this.style.removeImage(t)},r$jscomp$0.prototype.loadImage=function(e,i){t$jscomp$2.getImage(this._requestManager.transformRequest(e,t$jscomp$2.ResourceType.Image),i)},r$jscomp$0.prototype.listImages=function(){return this.style.listImages()},
r$jscomp$0.prototype.addLayer=function(t,e){return this._lazyInitEmptyStyle(),this.style.addLayer(t,e),this._update(!0)},r$jscomp$0.prototype.moveLayer=function(t,e){return this.style.moveLayer(t,e),this._update(!0)},r$jscomp$0.prototype.removeLayer=function(t){return this.style.removeLayer(t),this._update(!0)},r$jscomp$0.prototype.getLayer=function(t){return this.style.getLayer(t)},r$jscomp$0.prototype.setLayerZoomRange=function(t,e,i){return this.style.setLayerZoomRange(t,e,i),this._update(!0)},
r$jscomp$0.prototype.setFilter=function(t,e,i){return void 0===i&&(i={}),this.style.setFilter(t,e,i),this._update(!0)},r$jscomp$0.prototype.getFilter=function(t){return this.style.getFilter(t)},r$jscomp$0.prototype.setPaintProperty=function(t,e,i,o){return void 0===o&&(o={}),this.style.setPaintProperty(t,e,i,o),this._update(!0)},r$jscomp$0.prototype.getPaintProperty=function(t,e){return this.style.getPaintProperty(t,e)},r$jscomp$0.prototype.setLayoutProperty=function(t,e,i,o){return void 0===o&&(o=
{}),this.style.setLayoutProperty(t,e,i,o),this._update(!0)},r$jscomp$0.prototype.getLayoutProperty=function(t,e){return this.style.getLayoutProperty(t,e)},r$jscomp$0.prototype.setLight=function(t,e){return void 0===e&&(e={}),this._lazyInitEmptyStyle(),this.style.setLight(t,e),this._update(!0)},r$jscomp$0.prototype.getLight=function(){return this.style.getLight()},r$jscomp$0.prototype.setFeatureState=function(t,e){return this.style.setFeatureState(t,e),this._update()},r$jscomp$0.prototype.removeFeatureState=
function(t,e){return this.style.removeFeatureState(t,e),this._update()},r$jscomp$0.prototype.getFeatureState=function(t){return this.style.getFeatureState(t)},r$jscomp$0.prototype.getContainer=function(){return this._container},r$jscomp$0.prototype.getCanvasContainer=function(){return this._canvasContainer},r$jscomp$0.prototype.getCanvas=function(){return this._canvas},r$jscomp$0.prototype._containerDimensions=function(){var t=0,e=0;return this._container&&(t=this._container.clientWidth||400,e=this._container.clientHeight||
300),[t,e]},r$jscomp$0.prototype._detectMissingCSS=function(){"rgb(250, 128, 114)"!==t$jscomp$2.window.getComputedStyle(this._missingCSSCanary).getPropertyValue("background-color")&&t$jscomp$2.warnOnce("This page appears to be missing CSS declarations for Mapbox GL JS, which may cause the map to display incorrectly. Please ensure your page includes mapbox-gl.css, as described in https://www.mapbox.com/mapbox-gl-js/api/.")},r$jscomp$0.prototype._setupContainer=function(){var t$jscomp$0=this._container;
t$jscomp$0.classList.add("mapboxgl-map");(this._missingCSSCanary=i$jscomp$6.create("div","mapboxgl-canary",t$jscomp$0)).style.visibility="hidden";this._detectMissingCSS();var e=this._canvasContainer=i$jscomp$6.create("div","mapboxgl-canvas-container",t$jscomp$0);this._interactive&&e.classList.add("mapboxgl-interactive");this._canvas=i$jscomp$6.create("canvas","mapboxgl-canvas",e);this._canvas.addEventListener("webglcontextlost",this._contextLost,!1);this._canvas.addEventListener("webglcontextrestored",
this._contextRestored,!1);this._canvas.setAttribute("tabindex","0");this._canvas.setAttribute("aria-label","Map");e=this._containerDimensions();this._resizeCanvas(e[0],e[1]);var r=this._controlContainer=i$jscomp$6.create("div","mapboxgl-control-container",t$jscomp$0),a=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(function(t){a[t]=i$jscomp$6.create("div","mapboxgl-ctrl-"+t,r)})},r$jscomp$0.prototype._resizeCanvas=function(e,i){var o=t$jscomp$2.browser.devicePixelRatio||
1;this._canvas.width=o*e;this._canvas.height=o*i;this._canvas.style.width=e+"px";this._canvas.style.height=i+"px"},r$jscomp$0.prototype._setupPainter=function(){var i=t$jscomp$2.extend({},e$jscomp$3.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1});(i=this._canvas.getContext("webgl",i)||this._canvas.getContext("experimental-webgl",i))?(this.painter=new yo(i,this.transform),t$jscomp$2.webpSupported.testSupport(i)):
this.fire(new t$jscomp$2.ErrorEvent(Error("Failed to initialize WebGL")))},r$jscomp$0.prototype._contextLost=function(e){e.preventDefault();this._frame&&(this._frame.cancel(),this._frame=null);this.fire(new t$jscomp$2.Event("webglcontextlost",{originalEvent:e}))},r$jscomp$0.prototype._contextRestored=function(e){this._setupPainter();this.resize();this._update();this.fire(new t$jscomp$2.Event("webglcontextrestored",{originalEvent:e}))},r$jscomp$0.prototype.loaded=function(){return!this._styleDirty&&
!this._sourcesDirty&&!!this.style&&this.style.loaded()},r$jscomp$0.prototype._update=function(t){return this.style?(this._styleDirty=this._styleDirty||t,this._sourcesDirty=!0,this.triggerRepaint(),this):this},r$jscomp$0.prototype._requestRenderFrame=function(t){return this._update(),this._renderTaskQueue.add(t)},r$jscomp$0.prototype._cancelRenderFrame=function(t){this._renderTaskQueue.remove(t)},r$jscomp$0.prototype._render=function(e$jscomp$0){var i,o=this,r=0,a=this.painter.context.extTimerQuery;
if(this.listens("gpu-timing-frame")&&(i=a.createQueryEXT(),a.beginQueryEXT(a.TIME_ELAPSED_EXT,i),r=t$jscomp$2.browser.now()),this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(e$jscomp$0),!this._removed){e$jscomp$0=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;var s=this.transform.zoom,l=t$jscomp$2.browser.now();this.style.zoomHistory.update(s,l);s=new t$jscomp$2.EvaluationParameters(s,{now:l,fadeDuration:this._fadeDuration,zoomHistory:this.style.zoomHistory,
transition:this.style.getTransition()});l=s.crossFadingFactor();1===l&&l===this._crossFadingFactor||(e$jscomp$0=!0,this._crossFadingFactor=l);this.style.update(s)}if(this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,this._fadeDuration,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,
rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:this._fadeDuration,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer")}),this.fire(new t$jscomp$2.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,this.fire(new t$jscomp$2.Event("load"))),this.style&&(this.style.hasTransitions()||e$jscomp$0)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),this.listens("gpu-timing-frame")){var h=
t$jscomp$2.browser.now()-r;a.endQueryEXT(a.TIME_ELAPSED_EXT,i);setTimeout(function(){var e=a.getQueryObjectEXT(i,a.QUERY_RESULT_EXT)/1E6;a.deleteQueryEXT(i);o.fire(new t$jscomp$2.Event("gpu-timing-frame",{cpuTime:h,gpuTime:e}))},50)}if(this.listens("gpu-timing-layer")){var p=this.painter.collectGpuTimers();setTimeout(function(){var e=o.painter.queryGpuTimers(p);o.fire(new t$jscomp$2.Event("gpu-timing-layer",{layerTimes:e}))},50)}r=this._sourcesDirty||this._styleDirty||this._placementDirty;return r||
this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new t$jscomp$2.Event("idle")),!this._loaded||this._fullyLoaded||r||(this._fullyLoaded=!0),this}},r$jscomp$0.prototype.remove=function(){this._hash&&this._hash.remove();for(var e=0,i=this._controls;e<i.length;e+=1)i[e].onRemove(this);this._controls=[];this._frame&&(this._frame.cancel(),this._frame=null);this._renderTaskQueue.clear();this.painter.destroy();this.handlers.destroy();delete this.handlers;this.setStyle(null);
void 0!==t$jscomp$2.window&&(t$jscomp$2.window.removeEventListener("resize",this._onWindowResize,!1),t$jscomp$2.window.removeEventListener("online",this._onWindowOnline,!1));(e=this.painter.context.gl.getExtension("WEBGL_lose_context"))&&e.loseContext();Cr(this._canvasContainer);Cr(this._controlContainer);Cr(this._missingCSSCanary);this._container.classList.remove("mapboxgl-map");this._removed=!0;this.fire(new t$jscomp$2.Event("remove"))},r$jscomp$0.prototype.triggerRepaint=function(){var e=this;
this.style&&!this._frame&&(this._frame=t$jscomp$2.browser.frame(function(t){e._frame=null;e._render(t)}))},r$jscomp$0.prototype._onWindowOnline=function(){this._update()},r$jscomp$0.prototype._onWindowResize=function(t){this._trackResize&&this.resize({originalEvent:t})._update()},a$jscomp$0.showTileBoundaries.get=function(){return!!this._showTileBoundaries},a$jscomp$0.showTileBoundaries.set=function(t){this._showTileBoundaries!==t&&(this._showTileBoundaries=t,this._update())},a$jscomp$0.showPadding.get=
function(){return!!this._showPadding},a$jscomp$0.showPadding.set=function(t){this._showPadding!==t&&(this._showPadding=t,this._update())},a$jscomp$0.showCollisionBoxes.get=function(){return!!this._showCollisionBoxes},a$jscomp$0.showCollisionBoxes.set=function(t){this._showCollisionBoxes!==t&&(this._showCollisionBoxes=t,t?this.style._generateCollisionBoxes():this._update())},a$jscomp$0.showOverdrawInspector.get=function(){return!!this._showOverdrawInspector},a$jscomp$0.showOverdrawInspector.set=function(t){this._showOverdrawInspector!==
t&&(this._showOverdrawInspector=t,this._update())},a$jscomp$0.repaint.get=function(){return!!this._repaint},a$jscomp$0.repaint.set=function(t){this._repaint!==t&&(this._repaint=t,this.triggerRepaint())},a$jscomp$0.vertices.get=function(){return!!this._vertices},a$jscomp$0.vertices.set=function(t){this._vertices=t;this._update()},r$jscomp$0.prototype._setCacheLimits=function(e,i){t$jscomp$2.setCacheLimits(e,i)},a$jscomp$0.version.get=function(){return t$jscomp$2.version},Object.defineProperties(r$jscomp$0.prototype,
a$jscomp$0),r$jscomp$0}(vr),zr={showCompass:!0,showZoom:!0,visualizePitch:!1},Dr=function(e){var o=this;this.options=t$jscomp$2.extend({},zr,e);this._container=i$jscomp$6.create("div","mapboxgl-ctrl mapboxgl-ctrl-group");this._container.addEventListener("contextmenu",function(t){return t.preventDefault()});this.options.showZoom&&(t$jscomp$2.bindAll(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("mapboxgl-ctrl-zoom-in",function(t){return o._map.zoomIn({},{originalEvent:t})}),
i$jscomp$6.create("span","mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden",!0),this._zoomOutButton=this._createButton("mapboxgl-ctrl-zoom-out",function(t){return o._map.zoomOut({},{originalEvent:t})}),i$jscomp$6.create("span","mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden",!0));this.options.showCompass&&(t$jscomp$2.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("mapboxgl-ctrl-compass",function(t){o.options.visualizePitch?o._map.resetNorthPitch({},
{originalEvent:t}):o._map.resetNorth({},{originalEvent:t})}),this._compassIcon=i$jscomp$6.create("span","mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden",!0))};Dr.prototype._updateZoomButtons=function(){var t=this._map.getZoom();this._zoomInButton.disabled=t===this._map.getMaxZoom();this._zoomOutButton.disabled=t===this._map.getMinZoom()};Dr.prototype._rotateCompassArrow=function(){this._compassIcon.style.transform=this.options.visualizePitch?"scale("+1/Math.pow(Math.cos(Math.PI/
180*this._map.transform.pitch),.5)+") rotateX("+this._map.transform.pitch+"deg) rotateZ("+180/Math.PI*this._map.transform.angle+"deg)":"rotate("+180/Math.PI*this._map.transform.angle+"deg)"};Dr.prototype.onAdd=function(t){return this._map=t,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,
"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new Mr(this._map,this._compass,this.options.visualizePitch)),this._container};Dr.prototype.onRemove=function(){i$jscomp$6.remove(this._container);this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons);this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",
this._rotateCompassArrow),this._handler.off(),delete this._handler);delete this._map};Dr.prototype._createButton=function(t,e){t=i$jscomp$6.create("button",t,this._container);return t.type="button",t.addEventListener("click",e),t};Dr.prototype._setButtonTitle=function(t,e){e=this._map._getUIString("NavigationControl."+e);t.title=e;t.setAttribute("aria-label",e)};var Mr=function(e,o,r){void 0===r&&(r=!1);this._clickTolerance=10;this.element=o;this.mouseRotate=new Xo({clickTolerance:e.dragRotate._mouseRotate._clickTolerance});
this.map=e;r&&(this.mousePitch=new Ho({clickTolerance:e.dragRotate._mousePitch._clickTolerance}));t$jscomp$2.bindAll("mousedown mousemove mouseup touchstart touchmove touchend reset".split(" "),this);i$jscomp$6.addEventListener(o,"mousedown",this.mousedown);i$jscomp$6.addEventListener(o,"touchstart",this.touchstart,{passive:!1});i$jscomp$6.addEventListener(o,"touchmove",this.touchmove);i$jscomp$6.addEventListener(o,"touchend",this.touchend);i$jscomp$6.addEventListener(o,"touchcancel",this.reset)};
Mr.prototype.down=function(t,e){this.mouseRotate.mousedown(t,e);this.mousePitch&&this.mousePitch.mousedown(t,e);i$jscomp$6.disableDrag()};Mr.prototype.move=function(t,e){var i=this.map,o=this.mouseRotate.mousemoveWindow(t,e);(o&&o.bearingDelta&&i.setBearing(i.getBearing()+o.bearingDelta),this.mousePitch)&&(t=this.mousePitch.mousemoveWindow(t,e))&&t.pitchDelta&&i.setPitch(i.getPitch()+t.pitchDelta)};Mr.prototype.off=function(){var t=this.element;i$jscomp$6.removeEventListener(t,"mousedown",this.mousedown);
i$jscomp$6.removeEventListener(t,"touchstart",this.touchstart,{passive:!1});i$jscomp$6.removeEventListener(t,"touchmove",this.touchmove);i$jscomp$6.removeEventListener(t,"touchend",this.touchend);i$jscomp$6.removeEventListener(t,"touchcancel",this.reset);this.offTemp()};Mr.prototype.offTemp=function(){i$jscomp$6.enableDrag();i$jscomp$6.removeEventListener(t$jscomp$2.window,"mousemove",this.mousemove);i$jscomp$6.removeEventListener(t$jscomp$2.window,"mouseup",this.mouseup)};Mr.prototype.mousedown=
function(e){this.down(t$jscomp$2.extend({},e,{ctrlKey:!0,preventDefault:function(){return e.preventDefault()}}),i$jscomp$6.mousePos(this.element,e));i$jscomp$6.addEventListener(t$jscomp$2.window,"mousemove",this.mousemove);i$jscomp$6.addEventListener(t$jscomp$2.window,"mouseup",this.mouseup)};Mr.prototype.mousemove=function(t){this.move(t,i$jscomp$6.mousePos(this.element,t))};Mr.prototype.mouseup=function(t){this.mouseRotate.mouseupWindow(t);this.mousePitch&&this.mousePitch.mouseupWindow(t);this.offTemp()};
Mr.prototype.touchstart=function(t){1!==t.targetTouches.length?this.reset():(this._startPos=this._lastPos=i$jscomp$6.touchPos(this.element,t.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:function(){return t.preventDefault()}},this._startPos))};Mr.prototype.touchmove=function(t){1!==t.targetTouches.length?this.reset():(this._lastPos=i$jscomp$6.touchPos(this.element,t.targetTouches)[0],this.move({preventDefault:function(){return t.preventDefault()}},this._lastPos))};
Mr.prototype.touchend=function(t){0===t.targetTouches.length&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click();this.reset()};Mr.prototype.reset=function(){this.mouseRotate.reset();this.mousePitch&&this.mousePitch.reset();delete this._startPos;delete this._lastPos;this.offTemp()};var Ar={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)",
"bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"},kr,Br=function(e$jscomp$0){function o$jscomp$0(o,r){var a=this;if(e$jscomp$0.call(this),(o instanceof t$jscomp$2.window.HTMLElement||r)&&(o=t$jscomp$2.extend({element:o},r)),t$jscomp$2.bindAll("_update _onMove _onUp _addDragHandler _onMapClick _onKeyPress".split(" "),this),this._anchor=o&&o.anchor||"center",this._color=o&&o.color||"#3FB1CE",this._scale=o&&o.scale||1,this._draggable=o&&o.draggable||!1,this._state=
"inactive",this._rotation=o&&o.rotation||0,this._rotationAlignment=o&&o.rotationAlignment||"auto",this._pitchAlignment=o&&o.pitchAlignment&&"auto"!==o.pitchAlignment?o.pitchAlignment:this._rotationAlignment,o&&o.element)this._element=o.element,this._offset=t$jscomp$2.Point.convert(o&&o.offset||[0,0]);else{this._defaultMarker=!0;this._element=i$jscomp$6.create("div");this._element.setAttribute("aria-label","Map marker");r=i$jscomp$6.createNS("http://www.w3.org/2000/svg","svg");r.setAttributeNS(null,
"display","block");r.setAttributeNS(null,"height","41px");r.setAttributeNS(null,"width","27px");r.setAttributeNS(null,"viewBox","0 0 27 41");var s=i$jscomp$6.createNS("http://www.w3.org/2000/svg","g");s.setAttributeNS(null,"stroke","none");s.setAttributeNS(null,"stroke-width","1");s.setAttributeNS(null,"fill","none");s.setAttributeNS(null,"fill-rule","evenodd");s=i$jscomp$6.createNS("http://www.w3.org/2000/svg","g");s.setAttributeNS(null,"fill-rule","nonzero");var c=i$jscomp$6.createNS("http://www.w3.org/2000/svg",
"g");c.setAttributeNS(null,"transform","translate(3.0, 29.0)");c.setAttributeNS(null,"fill","#000000");for(var u=0,h=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];u<h.length;u+=1){var p=h[u],d=i$jscomp$6.createNS("http://www.w3.org/2000/svg","ellipse");d.setAttributeNS(null,"opacity","0.04");d.setAttributeNS(null,"cx","10.5");
d.setAttributeNS(null,"cy","5.80029008");d.setAttributeNS(null,"rx",p.rx);d.setAttributeNS(null,"ry",p.ry);c.appendChild(d)}u=i$jscomp$6.createNS("http://www.w3.org/2000/svg","g");u.setAttributeNS(null,"fill",this._color);h=i$jscomp$6.createNS("http://www.w3.org/2000/svg","path");h.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z");
u.appendChild(h);h=i$jscomp$6.createNS("http://www.w3.org/2000/svg","g");h.setAttributeNS(null,"opacity","0.25");h.setAttributeNS(null,"fill","#000000");p=i$jscomp$6.createNS("http://www.w3.org/2000/svg","path");p.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z");
h.appendChild(p);p=i$jscomp$6.createNS("http://www.w3.org/2000/svg","g");p.setAttributeNS(null,"transform","translate(6.0, 7.0)");p.setAttributeNS(null,"fill","#FFFFFF");d=i$jscomp$6.createNS("http://www.w3.org/2000/svg","g");d.setAttributeNS(null,"transform","translate(8.0, 8.0)");var x=i$jscomp$6.createNS("http://www.w3.org/2000/svg","circle");x.setAttributeNS(null,"fill","#000000");x.setAttributeNS(null,"opacity","0.25");x.setAttributeNS(null,"cx","5.5");x.setAttributeNS(null,"cy","5.5");x.setAttributeNS(null,
"r","5.4999962");var b=i$jscomp$6.createNS("http://www.w3.org/2000/svg","circle");b.setAttributeNS(null,"fill","#FFFFFF");b.setAttributeNS(null,"cx","5.5");b.setAttributeNS(null,"cy","5.5");b.setAttributeNS(null,"r","5.4999962");d.appendChild(x);d.appendChild(b);s.appendChild(c);s.appendChild(u);s.appendChild(h);s.appendChild(p);s.appendChild(d);r.appendChild(s);r.setAttributeNS(null,"height",41*this._scale+"px");r.setAttributeNS(null,"width",27*this._scale+"px");this._element.appendChild(r);this._offset=
t$jscomp$2.Point.convert(o&&o.offset||[0,-14])}this._element.classList.add("mapboxgl-marker");this._element.addEventListener("dragstart",function(t){t.preventDefault()});this._element.addEventListener("mousedown",function(t){t.preventDefault()});this._element.addEventListener("focus",function(){var t=a._map.getContainer();t.scrollTop=0;t.scrollLeft=0});Rr(this._element,this._anchor,"marker");this._popup=null}return e$jscomp$0&&(o$jscomp$0.__proto__=e$jscomp$0),(o$jscomp$0.prototype=Object.create(e$jscomp$0&&
e$jscomp$0.prototype)).constructor=o$jscomp$0,o$jscomp$0.prototype.addTo=function(t){return this.remove(),this._map=t,t.getCanvasContainer().appendChild(this._element),t.on("move",this._update),t.on("moveend",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this},o$jscomp$0.prototype.remove=function(){return this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",
this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),i$jscomp$6.remove(this._element),this._popup&&this._popup.remove(),this},o$jscomp$0.prototype.getLngLat=function(){return this._lngLat},o$jscomp$0.prototype.setLngLat=function(e){return this._lngLat=t$jscomp$2.LngLat.convert(e),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),
this._update(),this},o$jscomp$0.prototype.getElement=function(){return this._element},o$jscomp$0.prototype.setPopup=function(t){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),t){if(!("offset"in t.options)){var e=Math.sqrt(Math.pow(13.5,2)/2);t.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[e,-1*(24.6+
e)],"bottom-right":[-e,-1*(24.6+e)],left:[13.5,-24.6],right:[-13.5,-24.6]}:this._offset}this._popup=t;this._lngLat&&this._popup.setLngLat(this._lngLat);(this._originalTabIndex=this._element.getAttribute("tabindex"))||this._element.setAttribute("tabindex","0");this._element.addEventListener("keypress",this._onKeyPress)}return this},o$jscomp$0.prototype._onKeyPress=function(t){var e=t.code;t=t.charCode||t.keyCode;"Space"!==e&&"Enter"!==e&&32!==t&&13!==t||this.togglePopup()},o$jscomp$0.prototype._onMapClick=
function(t){t=t.originalEvent.target;var i=this._element;this._popup&&(t===i||i.contains(t))&&this.togglePopup()},o$jscomp$0.prototype.getPopup=function(){return this._popup},o$jscomp$0.prototype.togglePopup=function(){var t=this._popup;return t?(t.isOpen()?t.remove():t.addTo(this._map),this):this},o$jscomp$0.prototype._update=function(t){if(this._map){this._map.transform.renderWorldCopies&&(this._lngLat=Lr(this._lngLat,this._pos,this._map.transform));this._pos=this._map.project(this._lngLat)._add(this._offset);
var e="";"viewport"===this._rotationAlignment||"auto"===this._rotationAlignment?e="rotateZ("+this._rotation+"deg)":"map"===this._rotationAlignment&&(e="rotateZ("+(this._rotation-this._map.getBearing())+"deg)");var o="";"viewport"===this._pitchAlignment||"auto"===this._pitchAlignment?o="rotateX(0deg)":"map"===this._pitchAlignment&&(o="rotateX("+this._map.getPitch()+"deg)");t&&"moveend"!==t.type||(this._pos=this._pos.round());i$jscomp$6.setTransform(this._element,Ar[this._anchor]+" translate("+this._pos.x+
"px, "+this._pos.y+"px) "+o+" "+e)}},o$jscomp$0.prototype.getOffset=function(){return this._offset},o$jscomp$0.prototype.setOffset=function(e){return this._offset=t$jscomp$2.Point.convert(e),this._update(),this},o$jscomp$0.prototype._onMove=function(e){this._pos=e.point.sub(this._positionDelta);this._lngLat=this._map.unproject(this._pos);this.setLngLat(this._lngLat);this._element.style.pointerEvents="none";"pending"===this._state&&(this._state="active",this.fire(new t$jscomp$2.Event("dragstart")));
this.fire(new t$jscomp$2.Event("drag"))},o$jscomp$0.prototype._onUp=function(){this._element.style.pointerEvents="auto";this._positionDelta=null;this._map.off("mousemove",this._onMove);this._map.off("touchmove",this._onMove);"active"===this._state&&this.fire(new t$jscomp$2.Event("dragend"));this._state="inactive"},o$jscomp$0.prototype._addDragHandler=function(t){this._element.contains(t.originalEvent.target)&&(t.preventDefault(),this._positionDelta=t.point.sub(this._pos).add(this._offset),this._state=
"pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},o$jscomp$0.prototype.setDraggable=function(t){return this._draggable=!!t,this._map&&(t?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this},o$jscomp$0.prototype.isDraggable=function(){return this._draggable},
o$jscomp$0.prototype.setRotation=function(t){return this._rotation=t||0,this._update(),this},o$jscomp$0.prototype.getRotation=function(){return this._rotation},o$jscomp$0.prototype.setRotationAlignment=function(t){return this._rotationAlignment=t||"auto",this._update(),this},o$jscomp$0.prototype.getRotationAlignment=function(){return this._rotationAlignment},o$jscomp$0.prototype.setPitchAlignment=function(t){return this._pitchAlignment=t&&"auto"!==t?t:this._rotationAlignment,this._update(),this},
o$jscomp$0.prototype.getPitchAlignment=function(){return this._pitchAlignment},o$jscomp$0}(t$jscomp$2.Evented),Or={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6E3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0},Fr=0,Ur=!1,Nr=function(e$jscomp$1){function o$jscomp$0(i){e$jscomp$1.call(this);this.options=t$jscomp$2.extend({},Or,i);t$jscomp$2.bindAll("_onSuccess _onError _onZoom _finish _setupUI _updateCamera _updateMarker".split(" "),this)}
return e$jscomp$1&&(o$jscomp$0.__proto__=e$jscomp$1),(o$jscomp$0.prototype=Object.create(e$jscomp$1&&e$jscomp$1.prototype)).constructor=o$jscomp$0,o$jscomp$0.prototype.onAdd=function(e){var o;return this._map=e,this._container=i$jscomp$6.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),o=this._setupUI,void 0!==kr?o(kr):void 0!==t$jscomp$2.window.navigator.permissions?t$jscomp$2.window.navigator.permissions.query({name:"geolocation"}).then(function(t){o(kr="denied"!==t.state)}):o(kr=!!t$jscomp$2.window.navigator.geolocation),
this._container},o$jscomp$0.prototype.onRemove=function(){void 0!==this._geolocationWatchID&&(t$jscomp$2.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0);this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove();this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove();i$jscomp$6.remove(this._container);this._map.off("zoom",this._onZoom);this._map=void 0;Fr=0;Ur=!1},o$jscomp$0.prototype._isOutOfMapMaxBounds=
function(t){var e=this._map.getMaxBounds();t=t.coords;return e&&(t.longitude<e.getWest()||t.longitude>e.getEast()||t.latitude<e.getSouth()||t.latitude>e.getNorth())},o$jscomp$0.prototype._setErrorState=function(){switch(this._watchState){case "WAITING_ACTIVE":this._watchState="ACTIVE_ERROR";this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active");this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case "ACTIVE_LOCK":this._watchState="ACTIVE_ERROR";this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active");
this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break;case "BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting")}},o$jscomp$0.prototype._onSuccess=function(e){if(this._map){if(this._isOutOfMapMaxBounds(e))return this._setErrorState(),
this.fire(new t$jscomp$2.Event("outofmaxbounds",e)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=e,this._watchState){case "WAITING_ACTIVE":case "ACTIVE_LOCK":case "ACTIVE_ERROR":this._watchState="ACTIVE_LOCK";this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting");this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error");this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case "BACKGROUND":case "BACKGROUND_ERROR":this._watchState=
"BACKGROUND",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background")}this.options.showUserLocation&&"OFF"!==this._watchState&&this._updateMarker(e);this.options.trackUserLocation&&"ACTIVE_LOCK"!==this._watchState||this._updateCamera(e);this.options.showUserLocation&&this._dotElement.classList.remove("mapboxgl-user-location-dot-stale");
this.fire(new t$jscomp$2.Event("geolocate",e));this._finish()}},o$jscomp$0.prototype._updateCamera=function(e){var i=new t$jscomp$2.LngLat(e.coords.longitude,e.coords.latitude);e=e.coords.accuracy;var r=this._map.getBearing();r=t$jscomp$2.extend({bearing:r},this.options.fitBoundsOptions);this._map.fitBounds(i.toBounds(e),r,{geolocateSource:!0})},o$jscomp$0.prototype._updateMarker=function(e){if(e){var i=new t$jscomp$2.LngLat(e.coords.longitude,e.coords.latitude);this._accuracyCircleMarker.setLngLat(i).addTo(this._map);
this._userLocationDotMarker.setLngLat(i).addTo(this._map);this._accuracy=e.coords.accuracy;this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},o$jscomp$0.prototype._updateCircleRadius=function(){var t=this._map._container.clientHeight/2,e=this._map.unproject([0,t]);t=this._map.unproject([1,t]);e=e.distanceTo(t);e=Math.ceil(2*this._accuracy/e);this._circleElement.style.width=e+"px";
this._circleElement.style.height=e+"px"},o$jscomp$0.prototype._onZoom=function(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},o$jscomp$0.prototype._onError=function(e){if(this._map){if(this.options.trackUserLocation)if(1===e.code){this._watchState="OFF";this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting");this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active");this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error");
this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background");this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error");this._geolocateButton.disabled=!0;var i=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=i;this._geolocateButton.setAttribute("aria-label",i);void 0!==this._geolocationWatchID&&this._clearWatch()}else{if(3===e.code&&Ur)return;this._setErrorState()}"OFF"!==this._watchState&&this.options.showUserLocation&&
this._dotElement.classList.add("mapboxgl-user-location-dot-stale");this.fire(new t$jscomp$2.Event("error",e));this._finish()}},o$jscomp$0.prototype._finish=function(){this._timeoutId&&clearTimeout(this._timeoutId);this._timeoutId=void 0},o$jscomp$0.prototype._setupUI=function(e$jscomp$0){var o=this;(this._container.addEventListener("contextmenu",function(t){return t.preventDefault()}),this._geolocateButton=i$jscomp$6.create("button","mapboxgl-ctrl-geolocate",this._container),i$jscomp$6.create("span",
"mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden",!0),this._geolocateButton.type="button",!1===e$jscomp$0)?(t$jscomp$2.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled."),e$jscomp$0=this._map._getUIString("GeolocateControl.LocationNotAvailable"),this._geolocateButton.disabled=!0,this._geolocateButton.title=e$jscomp$0,this._geolocateButton.setAttribute("aria-label",e$jscomp$0)):(e$jscomp$0=this._map._getUIString("GeolocateControl.FindMyLocation"),
this._geolocateButton.title=e$jscomp$0,this._geolocateButton.setAttribute("aria-label",e$jscomp$0));this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF");this.options.showUserLocation&&(this._dotElement=i$jscomp$6.create("div","mapboxgl-user-location-dot"),this._userLocationDotMarker=new Br(this._dotElement),this._circleElement=i$jscomp$6.create("div","mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new Br({element:this._circleElement,
pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom));this._geolocateButton.addEventListener("click",this.trigger.bind(this));this._setup=!0;this.options.trackUserLocation&&this._map.on("movestart",function(e){e.geolocateSource||"ACTIVE_LOCK"!==o._watchState||e.originalEvent&&"resize"===e.originalEvent.type||(o._watchState="BACKGROUND",o._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"),o._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),
o.fire(new t$jscomp$2.Event("trackuserlocationend")))})},o$jscomp$0.prototype.trigger=function(){if(!this._setup)return t$jscomp$2.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case "OFF":this._watchState="WAITING_ACTIVE";this.fire(new t$jscomp$2.Event("trackuserlocationstart"));break;case "WAITING_ACTIVE":case "ACTIVE_LOCK":case "ACTIVE_ERROR":case "BACKGROUND_ERROR":Fr--;Ur=!1;this._watchState="OFF";this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting");
this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active");this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error");this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background");this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error");this.fire(new t$jscomp$2.Event("trackuserlocationend"));break;case "BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&
this._updateCamera(this._lastKnownPosition),this.fire(new t$jscomp$2.Event("trackuserlocationstart"))}switch(this._watchState){case "WAITING_ACTIVE":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case "ACTIVE_LOCK":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case "ACTIVE_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");
break;case "BACKGROUND":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;case "BACKGROUND_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error")}if("OFF"===this._watchState&&void 0!==this._geolocationWatchID)this._clearWatch();else if(void 0===this._geolocationWatchID){var e;this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");this._geolocateButton.setAttribute("aria-pressed",
"true");1<++Fr?(e={maximumAge:6E5,timeout:0},Ur=!0):(e=this.options.positionOptions,Ur=!1);this._geolocationWatchID=t$jscomp$2.window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,e)}}else t$jscomp$2.window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1E4);return!0},o$jscomp$0.prototype._clearWatch=function(){t$jscomp$2.window.navigator.geolocation.clearWatch(this._geolocationWatchID);
this._geolocationWatchID=void 0;this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting");this._geolocateButton.setAttribute("aria-pressed","false");this.options.showUserLocation&&this._updateMarker(null)},o$jscomp$0}(t$jscomp$2.Evented),Zr={maxWidth:100,unit:"metric"},jr=function(e){this.options=t$jscomp$2.extend({},Zr,e);t$jscomp$2.bindAll(["_onMove","setUnit"],this)};jr.prototype.getDefaultPosition=function(){return"bottom-left"};jr.prototype._onMove=function(){qr(this._map,this._container,
this.options)};jr.prototype.onAdd=function(t){return this._map=t,this._container=i$jscomp$6.create("div","mapboxgl-ctrl mapboxgl-ctrl-scale",t.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container};jr.prototype.onRemove=function(){i$jscomp$6.remove(this._container);this._map.off("move",this._onMove);this._map=void 0};jr.prototype.setUnit=function(t){this.options.unit=t;qr(this._map,this._container,this.options)};var Gr=function(e){this._fullscreen=!1;e&&e.container&&(e.container instanceof
t$jscomp$2.window.HTMLElement?this._container=e.container:t$jscomp$2.warnOnce("Full screen control 'container' must be a DOM element."));t$jscomp$2.bindAll(["_onClickFullscreen","_changeIcon"],this);"onfullscreenchange"in t$jscomp$2.window.document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in t$jscomp$2.window.document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in t$jscomp$2.window.document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in
t$jscomp$2.window.document&&(this._fullscreenchange="MSFullscreenChange")};Gr.prototype.onAdd=function(e){return this._map=e,this._container||(this._container=this._map.getContainer()),this._controlContainer=i$jscomp$6.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",t$jscomp$2.warnOnce("This device does not support fullscreen mode.")),this._controlContainer};Gr.prototype.onRemove=function(){i$jscomp$6.remove(this._controlContainer);
this._map=null;t$jscomp$2.window.document.removeEventListener(this._fullscreenchange,this._changeIcon)};Gr.prototype._checkFullscreenSupport=function(){return!!(t$jscomp$2.window.document.fullscreenEnabled||t$jscomp$2.window.document.mozFullScreenEnabled||t$jscomp$2.window.document.msFullscreenEnabled||t$jscomp$2.window.document.webkitFullscreenEnabled)};Gr.prototype._setupUI=function(){var e=this._fullscreenButton=i$jscomp$6.create("button","mapboxgl-ctrl-fullscreen",this._controlContainer);i$jscomp$6.create("span",
"mapboxgl-ctrl-icon",e).setAttribute("aria-hidden",!0);e.type="button";this._updateTitle();this._fullscreenButton.addEventListener("click",this._onClickFullscreen);t$jscomp$2.window.document.addEventListener(this._fullscreenchange,this._changeIcon)};Gr.prototype._updateTitle=function(){var t=this._getTitle();this._fullscreenButton.setAttribute("aria-label",t);this._fullscreenButton.title=t};Gr.prototype._getTitle=function(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":
"FullscreenControl.Enter")};Gr.prototype._isFullscreen=function(){return this._fullscreen};Gr.prototype._changeIcon=function(){(t$jscomp$2.window.document.fullscreenElement||t$jscomp$2.window.document.mozFullScreenElement||t$jscomp$2.window.document.webkitFullscreenElement||t$jscomp$2.window.document.msFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),
this._updateTitle())};Gr.prototype._onClickFullscreen=function(){this._isFullscreen()?t$jscomp$2.window.document.exitFullscreen?t$jscomp$2.window.document.exitFullscreen():t$jscomp$2.window.document.mozCancelFullScreen?t$jscomp$2.window.document.mozCancelFullScreen():t$jscomp$2.window.document.msExitFullscreen?t$jscomp$2.window.document.msExitFullscreen():t$jscomp$2.window.document.webkitCancelFullScreen&&t$jscomp$2.window.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():
this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()};var Wr={closeButton:!0,closeOnClick:!0,className:"",maxWidth:"240px"},Xr=function(e$jscomp$1){function o$jscomp$1(i){e$jscomp$1.call(this);this.options=t$jscomp$2.extend(Object.create(Wr),i);t$jscomp$2.bindAll("_update _onClose remove _onMouseMove _onMouseUp _onDrag".split(" "),
this)}return e$jscomp$1&&(o$jscomp$1.__proto__=e$jscomp$1),(o$jscomp$1.prototype=Object.create(e$jscomp$1&&e$jscomp$1.prototype)).constructor=o$jscomp$1,o$jscomp$1.prototype.addTo=function(e){return this._map&&this.remove(),this._map=e,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),
this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")):this._map.on("move",this._update),this.fire(new t$jscomp$2.Event("open")),this},o$jscomp$1.prototype.isOpen=function(){return!!this._map},o$jscomp$1.prototype.remove=function(){return this._content&&i$jscomp$6.remove(this._content),this._container&&(i$jscomp$6.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),
this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),delete this._map),this.fire(new t$jscomp$2.Event("close")),this},o$jscomp$1.prototype.getLngLat=function(){return this._lngLat},o$jscomp$1.prototype.setLngLat=function(e){return this._lngLat=t$jscomp$2.LngLat.convert(e),this._pos=null,this._trackPointer=!1,this._update(),
this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.remove("mapboxgl-track-pointer")),this},o$jscomp$1.prototype.trackPointer=function(){return this._trackPointer=!0,this._pos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),
this._map._canvasContainer.classList.add("mapboxgl-track-pointer")),this},o$jscomp$1.prototype.getElement=function(){return this._container},o$jscomp$1.prototype.setText=function(e){return this.setDOMContent(t$jscomp$2.window.document.createTextNode(e))},o$jscomp$1.prototype.setHTML=function(e){var o=t$jscomp$2.window.document.createDocumentFragment(),r=t$jscomp$2.window.document.createElement("body");for(r.innerHTML=e;e=r.firstChild;)o.appendChild(e);return this.setDOMContent(o)},o$jscomp$1.prototype.getMaxWidth=
function(){return this._container&&this._container.style.maxWidth},o$jscomp$1.prototype.setMaxWidth=function(t){return this.options.maxWidth=t,this._update(),this},o$jscomp$1.prototype.setDOMContent=function(t){return this._createContent(),this._content.appendChild(t),this._update(),this},o$jscomp$1.prototype.addClassName=function(t){this._container&&this._container.classList.add(t)},o$jscomp$1.prototype.removeClassName=function(t){this._container&&this._container.classList.remove(t)},o$jscomp$1.prototype.toggleClassName=
function(t){if(this._container)return this._container.classList.toggle(t)},o$jscomp$1.prototype._createContent=function(){this._content&&i$jscomp$6.remove(this._content);this._content=i$jscomp$6.create("div","mapboxgl-popup-content",this._container);this.options.closeButton&&(this._closeButton=i$jscomp$6.create("button","mapboxgl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="\x26#215;",this._closeButton.addEventListener("click",
this._onClose))},o$jscomp$1.prototype._onMouseUp=function(t){this._update(t.point)},o$jscomp$1.prototype._onMouseMove=function(t){this._update(t.point)},o$jscomp$1.prototype._onDrag=function(t){this._update(t.point)},o$jscomp$1.prototype._update=function(e$jscomp$0){var o$jscomp$0=this;if(this._map&&(this._lngLat||this._trackPointer)&&this._content&&(this._container||(this._container=i$jscomp$6.create("div","mapboxgl-popup",this._map.getContainer()),this._tip=i$jscomp$6.create("div","mapboxgl-popup-tip",
this._container),this._container.appendChild(this._content),this.options.className&&this.options.className.split(" ").forEach(function(t){return o$jscomp$0._container.classList.add(t)}),this._trackPointer&&this._container.classList.add("mapboxgl-popup-track-pointer")),this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._map.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=Lr(this._lngLat,this._pos,
this._map.transform)),!this._trackPointer||e$jscomp$0)){e$jscomp$0=this._pos=this._trackPointer&&e$jscomp$0?e$jscomp$0:this._map.project(this._lngLat);var a=this.options.anchor,n=function e(i){if(i){if("number"==typeof i){var o=Math.round(Math.sqrt(.5*Math.pow(i,2)));return{center:new t$jscomp$2.Point(0,0),top:new t$jscomp$2.Point(0,i),"top-left":new t$jscomp$2.Point(o,o),"top-right":new t$jscomp$2.Point(-o,o),bottom:new t$jscomp$2.Point(0,-i),"bottom-left":new t$jscomp$2.Point(o,-o),"bottom-right":new t$jscomp$2.Point(-o,
-o),left:new t$jscomp$2.Point(i,0),right:new t$jscomp$2.Point(-i,0)}}return i instanceof t$jscomp$2.Point||Array.isArray(i)?(i=t$jscomp$2.Point.convert(i),{center:i,top:i,"top-left":i,"top-right":i,bottom:i,"bottom-left":i,"bottom-right":i,left:i,right:i}):{center:t$jscomp$2.Point.convert(i.center||[0,0]),top:t$jscomp$2.Point.convert(i.top||[0,0]),"top-left":t$jscomp$2.Point.convert(i["top-left"]||[0,0]),"top-right":t$jscomp$2.Point.convert(i["top-right"]||[0,0]),bottom:t$jscomp$2.Point.convert(i.bottom||
[0,0]),"bottom-left":t$jscomp$2.Point.convert(i["bottom-left"]||[0,0]),"bottom-right":t$jscomp$2.Point.convert(i["bottom-right"]||[0,0]),left:t$jscomp$2.Point.convert(i.left||[0,0]),right:t$jscomp$2.Point.convert(i.right||[0,0])}}return e(new t$jscomp$2.Point(0,0))}(this.options.offset);if(!a){a=this._container.offsetWidth;var s=this._container.offsetHeight;s=e$jscomp$0.y+n.bottom.y<s?["top"]:e$jscomp$0.y>this._map.transform.height-s?["bottom"]:[];e$jscomp$0.x<a/2?s.push("left"):e$jscomp$0.x>this._map.transform.width-
a/2&&s.push("right");a=0===s.length?"bottom":s.join("-")}e$jscomp$0=e$jscomp$0.add(n[a]).round();i$jscomp$6.setTransform(this._container,Ar[a]+" translate("+e$jscomp$0.x+"px,"+e$jscomp$0.y+"px)");Rr(this._container,a,"popup")}},o$jscomp$1.prototype._onClose=function(){this.remove()},o$jscomp$1}(t$jscomp$2.Evented),Hr={version:t$jscomp$2.version,supported:e$jscomp$3,setRTLTextPlugin:t$jscomp$2.setRTLTextPlugin,getRTLTextPluginStatus:t$jscomp$2.getRTLTextPluginStatus,Map:Sr,NavigationControl:Dr,GeolocateControl:Nr,
AttributionControl:yr,ScaleControl:jr,FullscreenControl:Gr,Popup:Xr,Marker:Br,Style:qe,LngLat:t$jscomp$2.LngLat,LngLatBounds:t$jscomp$2.LngLatBounds,Point:t$jscomp$2.Point,MercatorCoordinate:t$jscomp$2.MercatorCoordinate,Evented:t$jscomp$2.Evented,config:t$jscomp$2.config,prewarm:function(){(Bt||(Bt=new kt),Bt).acquire("mapboxgl_preloaded_worker_pool")},clearPrewarmedResources:function(){var t=Bt;t&&(t.isPreloaded()&&1===t.numActive()?(t.release("mapboxgl_preloaded_worker_pool"),Bt=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},
get accessToken(){return t$jscomp$2.config.ACCESS_TOKEN},set accessToken(e){t$jscomp$2.config.ACCESS_TOKEN=e},get baseApiUrl(){return t$jscomp$2.config.API_URL},set baseApiUrl(e){t$jscomp$2.config.API_URL=e},get workerCount(){return kt.workerCount},set workerCount(t){kt.workerCount=t},get maxParallelImageRequests(){return t$jscomp$2.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(e){t$jscomp$2.config.MAX_PARALLEL_IMAGE_REQUESTS=e},clearStorage:function(e){t$jscomp$2.clearTileCache(e)},
workerUrl:""};return Hr});return mapboxgl})}
//# sourceMappingURL=module$node_modules$mapbox_gl$dist$mapbox_gl.js.map
