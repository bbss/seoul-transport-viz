{
"version":3,
"file":"module$node_modules$$deck_DOT_gl$aggregation_layers$dist$es5$utils$cpu_aggregator.js",
"lineCount":22,
"mappings":"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",
"sources":["node_modules/@deck_DOT_gl/aggregation-layers/dist/es5/utils/cpu-aggregator.js"],
"sourcesContent":["shadow$provide[\"module$node_modules$$deck_DOT_gl$aggregation_layers$dist$es5$utils$cpu_aggregator\"] = function(global,require,module,exports) {\n\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\n\nvar _typeof2 = _interopRequireDefault(require(\"@babel/runtime/helpers/typeof\"));\n\nvar _defineProperty2 = _interopRequireDefault(require(\"@babel/runtime/helpers/defineProperty\"));\n\nvar _classCallCheck2 = _interopRequireDefault(require(\"@babel/runtime/helpers/classCallCheck\"));\n\nvar _createClass2 = _interopRequireDefault(require(\"@babel/runtime/helpers/createClass\"));\n\nvar _binSorter = _interopRequireDefault(require(\"./bin-sorter\"));\n\nvar _scaleUtils = require(\"./scale-utils\");\n\nvar _aggregationOperationUtils = require(\"./aggregation-operation-utils\");\n\nfunction nop() {}\n\nvar dimensionSteps = ['getBins', 'getDomain', 'getScaleFunc'];\nvar _defaultDimensions = [{\n  key: 'fillColor',\n  accessor: 'getFillColor',\n  pickingInfo: 'colorValue',\n  getBins: {\n    triggers: {\n      value: {\n        prop: 'getColorValue',\n        updateTrigger: 'getColorValue'\n      },\n      weight: {\n        prop: 'getColorWeight',\n        updateTrigger: 'getColorWeight'\n      },\n      aggregation: {\n        prop: 'colorAggregation'\n      },\n      filterData: {\n        prop: '_filterData',\n        updateTrigger: '_filterData'\n      }\n    }\n  },\n  getDomain: {\n    triggers: {\n      lowerPercentile: {\n        prop: 'lowerPercentile'\n      },\n      upperPercentile: {\n        prop: 'upperPercentile'\n      },\n      scaleType: {\n        prop: 'colorScaleType'\n      }\n    }\n  },\n  getScaleFunc: {\n    triggers: {\n      domain: {\n        prop: 'colorDomain'\n      },\n      range: {\n        prop: 'colorRange'\n      }\n    },\n    onSet: {\n      props: 'onSetColorDomain'\n    }\n  },\n  nullValue: [0, 0, 0, 0]\n}, {\n  key: 'elevation',\n  accessor: 'getElevation',\n  pickingInfo: 'elevationValue',\n  getBins: {\n    triggers: {\n      value: {\n        prop: 'getElevationValue',\n        updateTrigger: 'getElevationValue'\n      },\n      weight: {\n        prop: 'getElevationWeight',\n        updateTrigger: 'getElevationWeight'\n      },\n      aggregation: {\n        prop: 'elevationAggregation'\n      },\n      filterData: {\n        prop: '_filterData',\n        updateTrigger: '_filterData'\n      }\n    }\n  },\n  getDomain: {\n    triggers: {\n      lowerPercentile: {\n        prop: 'elevationLowerPercentile'\n      },\n      upperPercentile: {\n        prop: 'elevationUpperPercentile'\n      },\n      scaleType: {\n        prop: 'elevationScaleType'\n      }\n    }\n  },\n  getScaleFunc: {\n    triggers: {\n      domain: {\n        prop: 'elevationDomain'\n      },\n      range: {\n        prop: 'elevationRange'\n      }\n    },\n    onSet: {\n      props: 'onSetElevationDomain'\n    }\n  },\n  nullValue: -1\n}];\n\nvar defaultGetCellSize = function defaultGetCellSize(props) {\n  return props.cellSize;\n};\n\nvar CPUAggregator = function () {\n  function CPUAggregator(opts) {\n    (0, _classCallCheck2[\"default\"])(this, CPUAggregator);\n    this.state = {\n      layerData: {},\n      dimensions: {}\n    };\n    this.changeFlags = {};\n    this.dimensionUpdaters = {};\n    this._getCellSize = opts.getCellSize || defaultGetCellSize;\n    this._getAggregator = opts.getAggregator;\n\n    this._addDimension(opts.dimensions || _defaultDimensions);\n  }\n\n  (0, _createClass2[\"default\"])(CPUAggregator, [{\n    key: \"updateState\",\n    value: function updateState(opts, aggregationParams) {\n      var oldProps = opts.oldProps,\n          props = opts.props,\n          changeFlags = opts.changeFlags;\n      this.updateGetValueFuncs(oldProps, props, changeFlags);\n      var reprojectNeeded = this.needsReProjectPoints(oldProps, props, changeFlags);\n      var aggregationDirty = false;\n\n      if (changeFlags.dataChanged || reprojectNeeded) {\n        this.getAggregatedData(props, aggregationParams);\n        aggregationDirty = true;\n      } else {\n        var dimensionChanges = this.getDimensionChanges(oldProps, props, changeFlags) || [];\n        dimensionChanges.forEach(function (f) {\n          return typeof f === 'function' && f();\n        });\n        aggregationDirty = true;\n      }\n\n      this.setState({\n        aggregationDirty: aggregationDirty\n      });\n      return this.state;\n    }\n  }, {\n    key: \"setState\",\n    value: function setState(updateObject) {\n      this.state = Object.assign({}, this.state, updateObject);\n    }\n  }, {\n    key: \"setDimensionState\",\n    value: function setDimensionState(key, updateObject) {\n      this.setState({\n        dimensions: Object.assign({}, this.state.dimensions, (0, _defineProperty2[\"default\"])({}, key, Object.assign({}, this.state.dimensions[key], updateObject)))\n      });\n    }\n  }, {\n    key: \"normalizeResult\",\n    value: function normalizeResult() {\n      var result = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n      if (result.hexagons) {\n        return Object.assign({\n          data: result.hexagons\n        }, result);\n      } else if (result.layerData) {\n        return Object.assign({\n          data: result.layerData\n        }, result);\n      }\n\n      return result;\n    }\n  }, {\n    key: \"getAggregatedData\",\n    value: function getAggregatedData(props, aggregationParams) {\n      var aggregator = this._getAggregator(props);\n\n      var result = aggregator(props, aggregationParams);\n      this.setState({\n        layerData: this.normalizeResult(result)\n      });\n      this.changeFlags = {\n        layerData: true\n      };\n      this.getSortedBins(props);\n    }\n  }, {\n    key: \"updateGetValueFuncs\",\n    value: function updateGetValueFuncs(oldProps, props, changeFlags) {\n      for (var key in this.dimensionUpdaters) {\n        var _this$dimensionUpdate = this.dimensionUpdaters[key].getBins.triggers,\n            value = _this$dimensionUpdate.value,\n            weight = _this$dimensionUpdate.weight,\n            aggregation = _this$dimensionUpdate.aggregation;\n        var getValue = props[value.prop];\n        var getValueChanged = this.needUpdateDimensionStep(this.dimensionUpdaters[key].getBins, oldProps, props, changeFlags);\n\n        if (getValueChanged && getValue === null) {\n          getValue = (0, _aggregationOperationUtils.getValueFunc)(props[aggregation.prop], props[weight.prop]);\n        }\n\n        if (getValue) {\n          this.setDimensionState(key, {\n            getValue: getValue\n          });\n        }\n      }\n    }\n  }, {\n    key: \"needsReProjectPoints\",\n    value: function needsReProjectPoints(oldProps, props, changeFlags) {\n      return this._getCellSize(oldProps) !== this._getCellSize(props) || this._getAggregator(oldProps) !== this._getAggregator(props) || changeFlags.updateTriggersChanged && (changeFlags.updateTriggersChanged.all || changeFlags.updateTriggersChanged.getPosition);\n    }\n  }, {\n    key: \"addDimension\",\n    value: function addDimension(dimensions) {\n      this._addDimension(dimensions);\n    }\n  }, {\n    key: \"_addDimension\",\n    value: function _addDimension() {\n      var _this = this;\n\n      var dimensions = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n      dimensions.forEach(function (dimension) {\n        var key = dimension.key;\n        _this.dimensionUpdaters[key] = _this.getDimensionUpdaters(dimension);\n        _this.state.dimensions[key] = {\n          getValue: null,\n          domain: null,\n          sortedBins: null,\n          scaleFunc: nop\n        };\n      });\n    }\n  }, {\n    key: \"getDimensionUpdaters\",\n    value: function getDimensionUpdaters(_ref) {\n      var key = _ref.key,\n          accessor = _ref.accessor,\n          pickingInfo = _ref.pickingInfo,\n          getBins = _ref.getBins,\n          getDomain = _ref.getDomain,\n          getScaleFunc = _ref.getScaleFunc,\n          nullValue = _ref.nullValue;\n      return {\n        key: key,\n        accessor: accessor,\n        pickingInfo: pickingInfo,\n        getBins: Object.assign({\n          updater: this.getDimensionSortedBins\n        }, getBins),\n        getDomain: Object.assign({\n          updater: this.getDimensionValueDomain\n        }, getDomain),\n        getScaleFunc: Object.assign({\n          updater: this.getDimensionScale\n        }, getScaleFunc),\n        attributeAccessor: this.getSubLayerDimensionAttribute(key, nullValue)\n      };\n    }\n  }, {\n    key: \"needUpdateDimensionStep\",\n    value: function needUpdateDimensionStep(dimensionStep, oldProps, props, changeFlags) {\n      return Object.values(dimensionStep.triggers).some(function (item) {\n        if (item.updateTrigger) {\n          return changeFlags.updateTriggersChanged && (changeFlags.updateTriggersChanged.all || changeFlags.updateTriggersChanged[item.updateTrigger]);\n        }\n\n        return oldProps[item.prop] !== props[item.prop];\n      });\n    }\n  }, {\n    key: \"getDimensionChanges\",\n    value: function getDimensionChanges(oldProps, props, changeFlags) {\n      var _this2 = this;\n\n      var updaters = [];\n\n      var _loop = function _loop(key) {\n        var needUpdate = dimensionSteps.find(function (step) {\n          return _this2.needUpdateDimensionStep(_this2.dimensionUpdaters[key][step], oldProps, props, changeFlags);\n        });\n\n        if (needUpdate) {\n          updaters.push(_this2.dimensionUpdaters[key][needUpdate].updater.bind(_this2, props, _this2.dimensionUpdaters[key]));\n        }\n      };\n\n      for (var key in this.dimensionUpdaters) {\n        _loop(key);\n      }\n\n      return updaters.length ? updaters : null;\n    }\n  }, {\n    key: \"getUpdateTriggers\",\n    value: function getUpdateTriggers(props) {\n      var _this3 = this;\n\n      var _updateTriggers = props.updateTriggers || {};\n\n      var updateTriggers = {};\n\n      var _loop2 = function _loop2(key) {\n        var accessor = _this3.dimensionUpdaters[key].accessor;\n        updateTriggers[accessor] = {};\n        dimensionSteps.forEach(function (step) {\n          Object.values(_this3.dimensionUpdaters[key][step].triggers).forEach(function (_ref2) {\n            var prop = _ref2.prop,\n                updateTrigger = _ref2.updateTrigger;\n\n            if (updateTrigger) {\n              var fromProp = _updateTriggers[updateTrigger];\n\n              if ((0, _typeof2[\"default\"])(fromProp) === 'object' && !Array.isArray(fromProp)) {\n                Object.assign(updateTriggers[accessor], fromProp);\n              } else if (fromProp !== undefined) {\n                updateTriggers[accessor][prop] = fromProp;\n              }\n            } else {\n              updateTriggers[accessor][prop] = props[prop];\n            }\n          });\n        });\n      };\n\n      for (var key in this.dimensionUpdaters) {\n        _loop2(key);\n      }\n\n      return updateTriggers;\n    }\n  }, {\n    key: \"getSortedBins\",\n    value: function getSortedBins(props) {\n      for (var key in this.dimensionUpdaters) {\n        this.getDimensionSortedBins(props, this.dimensionUpdaters[key]);\n      }\n    }\n  }, {\n    key: \"getDimensionSortedBins\",\n    value: function getDimensionSortedBins(props, dimensionUpdater) {\n      var key = dimensionUpdater.key;\n      var getValue = this.state.dimensions[key].getValue;\n      var sortedBins = new _binSorter[\"default\"](this.state.layerData.data || [], {\n        getValue: getValue,\n        filterData: props._filterData\n      });\n      this.setDimensionState(key, {\n        sortedBins: sortedBins\n      });\n      this.getDimensionValueDomain(props, dimensionUpdater);\n    }\n  }, {\n    key: \"getDimensionValueDomain\",\n    value: function getDimensionValueDomain(props, dimensionUpdater) {\n      var getDomain = dimensionUpdater.getDomain,\n          key = dimensionUpdater.key;\n      var _getDomain$triggers = getDomain.triggers,\n          lowerPercentile = _getDomain$triggers.lowerPercentile,\n          upperPercentile = _getDomain$triggers.upperPercentile,\n          scaleType = _getDomain$triggers.scaleType;\n      var valueDomain = this.state.dimensions[key].sortedBins.getValueDomainByScale(props[scaleType.prop], [props[lowerPercentile.prop], props[upperPercentile.prop]]);\n      this.setDimensionState(key, {\n        valueDomain: valueDomain\n      });\n      this.getDimensionScale(props, dimensionUpdater);\n    }\n  }, {\n    key: \"getDimensionScale\",\n    value: function getDimensionScale(props, dimensionUpdater) {\n      var key = dimensionUpdater.key,\n          getScaleFunc = dimensionUpdater.getScaleFunc,\n          getDomain = dimensionUpdater.getDomain;\n      var _getScaleFunc$trigger = getScaleFunc.triggers,\n          domain = _getScaleFunc$trigger.domain,\n          range = _getScaleFunc$trigger.range;\n      var scaleType = getDomain.triggers.scaleType;\n      var onSet = getScaleFunc.onSet;\n      var dimensionRange = props[range.prop];\n      var dimensionDomain = props[domain.prop] || this.state.dimensions[key].valueDomain;\n      var getScaleFunction = (0, _scaleUtils.getScaleFunctionByScaleType)(scaleType && props[scaleType.prop]);\n      var scaleFunc = getScaleFunction(dimensionDomain, dimensionRange);\n\n      if ((0, _typeof2[\"default\"])(onSet) === 'object' && typeof props[onSet.props] === 'function') {\n        props[onSet.props](scaleFunc.domain());\n      }\n\n      this.setDimensionState(key, {\n        scaleFunc: scaleFunc\n      });\n    }\n  }, {\n    key: \"getSubLayerDimensionAttribute\",\n    value: function getSubLayerDimensionAttribute(key, nullValue) {\n      var _this4 = this;\n\n      return function (cell) {\n        var _this4$state$dimensio = _this4.state.dimensions[key],\n            sortedBins = _this4$state$dimensio.sortedBins,\n            scaleFunc = _this4$state$dimensio.scaleFunc;\n        var bin = sortedBins.binMap[cell.index];\n\n        if (bin && bin.counts === 0) {\n          return nullValue;\n        }\n\n        var cv = bin && bin.value;\n        var domain = scaleFunc.domain();\n        var isValueInDomain = cv >= domain[0] && cv <= domain[domain.length - 1];\n        return isValueInDomain ? scaleFunc(cv) : nullValue;\n      };\n    }\n  }, {\n    key: \"getSubLayerAccessors\",\n    value: function getSubLayerAccessors(props) {\n      var accessors = {};\n\n      for (var key in this.dimensionUpdaters) {\n        var accessor = this.dimensionUpdaters[key].accessor;\n        accessors[accessor] = this.getSubLayerDimensionAttribute(props, key);\n      }\n\n      return accessors;\n    }\n  }, {\n    key: \"getPickingInfo\",\n    value: function getPickingInfo(_ref3) {\n      var info = _ref3.info;\n      var isPicked = info.picked && info.index > -1;\n      var object = null;\n\n      if (isPicked) {\n        var cell = this.state.layerData.data[info.index];\n        var binInfo = {};\n\n        for (var key in this.dimensionUpdaters) {\n          var pickingInfo = this.dimensionUpdaters[key].pickingInfo;\n          var sortedBins = this.state.dimensions[key].sortedBins;\n          var value = sortedBins.binMap[cell.index] && sortedBins.binMap[cell.index].value;\n          binInfo[pickingInfo] = value;\n        }\n\n        object = Object.assign(binInfo, cell, {\n          points: cell.filteredPoints || cell.points\n        });\n      }\n\n      return Object.assign(info, {\n        picked: Boolean(object),\n        object: object\n      });\n    }\n  }, {\n    key: \"getAccessor\",\n    value: function getAccessor(dimensionKey) {\n      if (!this.dimensionUpdaters.hasOwnProperty(dimensionKey)) {\n        return nop;\n      }\n\n      return this.dimensionUpdaters[dimensionKey].attributeAccessor;\n    }\n  }], [{\n    key: \"defaultDimensions\",\n    value: function defaultDimensions() {\n      return _defaultDimensions;\n    }\n  }]);\n  return CPUAggregator;\n}();\n\nexports[\"default\"] = CPUAggregator;\n//# sourceMappingURL=cpu-aggregator.js.map\n};"],
"names":["shadow$provide","global","require","module","exports","nop","_interopRequireDefault","Object","defineProperty","value","_typeof2","_defineProperty2","_classCallCheck2","_createClass2","_binSorter","_scaleUtils","_aggregationOperationUtils","dimensionSteps","_defaultDimensions","key","accessor","pickingInfo","getBins","triggers","prop","updateTrigger","weight","aggregation","filterData","getDomain","lowerPercentile","upperPercentile","scaleType","getScaleFunc","domain","range","onSet","props","nullValue","defaultGetCellSize","cellSize","CPUAggregator","opts","state","layerData","dimensions","changeFlags","dimensionUpdaters","_getCellSize","getCellSize","_getAggregator","getAggregator","_addDimension","updateState","aggregationParams","oldProps","updateGetValueFuncs","reprojectNeeded","needsReProjectPoints","dataChanged","getAggregatedData","forEach","getDimensionChanges","f","setState","aggregationDirty","updateObject","assign","setDimensionState","normalizeResult","result","arguments","length","undefined","hexagons","data","aggregator","getSortedBins","_this$dimensionUpdate","getValue","needUpdateDimensionStep","getValueChanged","getValueFunc","updateTriggersChanged","all","getPosition","addDimension","_this","dimension","getDimensionUpdaters","sortedBins","scaleFunc","_ref","updater","getDimensionSortedBins","getDimensionValueDomain","getDimensionScale","attributeAccessor","getSubLayerDimensionAttribute","dimensionStep","values","some","item","_this2","updaters","_loop","needUpdate","find","step","push","bind","getUpdateTriggers","_this3","_updateTriggers","updateTriggers","_loop2","_ref2","fromProp","Array","isArray","dimensionUpdater","_filterData","_getDomain$triggers","valueDomain","getValueDomainByScale","_getScaleFunc$trigger","dimensionRange","dimensionDomain","getScaleFunction","getScaleFunctionByScaleType","_this4","cell","_this4$state$dimensio","bin","binMap","index","counts","cv","getSubLayerAccessors","accessors","getPickingInfo","_ref3","info","object","picked","binInfo","points","filteredPoints","getAccessor","dimensionKey","hasOwnProperty","defaultDimensions"]
}
