shadow$provide.module$node_modules$$luma_DOT_gl$engine$dist$es5$animation$timeline=function(global,require,module,exports){global=require("module$node_modules$$babel$runtime$helpers$interopRequireDefault");Object.defineProperty(exports,"__esModule",{value:!0});exports.Timeline=void 0;var _slicedToArray2=global(require("module$node_modules$$babel$runtime$helpers$slicedToArray")),_classCallCheck2=global(require("module$node_modules$$babel$runtime$helpers$classCallCheck")),_createClass2=global(require("module$node_modules$$babel$runtime$helpers$createClass")),
channelHandles=1,animationHandles=1;require=function(){function Timeline(){(0,_classCallCheck2["default"])(this,Timeline);this.time=0;this.channels=new Map;this.animations=new Map;this.playing=!1;this.lastEngineTime=-1}(0,_createClass2["default"])(Timeline,[{key:"addChannel",value:function(props){var _props$delay=props.delay,_props$duration=props.duration;_props$duration=void 0===_props$duration?Number.POSITIVE_INFINITY:_props$duration;var _props$rate=props.rate,_props$repeat=props.repeat;props=channelHandles++;
_props$delay={time:0,delay:void 0===_props$delay?0:_props$delay,duration:_props$duration,rate:void 0===_props$rate?1:_props$rate,repeat:void 0===_props$repeat?1:_props$repeat};this._setChannelTime(_props$delay,this.time);this.channels.set(props,_props$delay);return props}},{key:"removeChannel",value:function(handle){this.channels["delete"](handle);var _iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _iterator=this.animations[Symbol.iterator](),_step;!(_iteratorNormalCompletion=
(_step=_iterator.next()).done);_iteratorNormalCompletion=!0){var _step$value=(0,_slicedToArray2["default"])(_step.value,2),animationHandle=_step$value[0];_step$value[1].channel===handle&&this.detachAnimation(animationHandle)}}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{if(!_iteratorNormalCompletion&&null!=_iterator["return"])_iterator["return"]()}finally{if(_didIteratorError)throw _iteratorError;}}}},{key:"isFinished",value:function(handle){handle=this.channels.get(handle);return void 0===
handle?!1:this.time>=handle.delay+handle.duration*handle.repeat}},{key:"getTime",value:function(handle){if(void 0===handle)return this.time;handle=this.channels.get(handle);return void 0===handle?-1:handle.time}},{key:"setTime",value:function(time){this.time=Math.max(0,time);time=this.channels.values();var _iteratorNormalCompletion2=!0,_didIteratorError2=!1,_iteratorError2=void 0;try{for(var _iterator2=time[Symbol.iterator](),_step2;!(_iteratorNormalCompletion2=(_step2=_iterator2.next()).done);_iteratorNormalCompletion2=
!0)this._setChannelTime(_step2.value,this.time)}catch(err){_didIteratorError2=!0,_iteratorError2=err}finally{try{if(!_iteratorNormalCompletion2&&null!=_iterator2["return"])_iterator2["return"]()}finally{if(_didIteratorError2)throw _iteratorError2;}}_iterator2=this.animations.values();_step2=!0;time=!1;_iteratorNormalCompletion2=void 0;try{for(var _iterator3=_iterator2[Symbol.iterator](),_step3;!(_step2=(_step3=_iterator3.next()).done);_step2=!0){var animationData=_step3.value;animationData.animation.setTime(this.getTime(animationData.channel))}}catch(err$387){time=
!0,_iteratorNormalCompletion2=err$387}finally{try{if(!_step2&&null!=_iterator3["return"])_iterator3["return"]()}finally{if(time)throw _iteratorNormalCompletion2;}}}},{key:"play",value:function(){this.playing=!0}},{key:"pause",value:function(){this.playing=!1;this.lastEngineTime=-1}},{key:"reset",value:function(){this.setTime(0)}},{key:"attachAnimation",value:function(animation,channelHandle){var animationHandle=animationHandles++;this.animations.set(animationHandle,{animation:animation,channel:channelHandle});
animation.setTime(this.getTime(channelHandle));return animationHandle}},{key:"detachAnimation",value:function(handle){this.animations["delete"](handle)}},{key:"update",value:function(engineTime){this.playing&&(-1===this.lastEngineTime&&(this.lastEngineTime=engineTime),this.setTime(this.time+(engineTime-this.lastEngineTime)),this.lastEngineTime=engineTime)}},{key:"_setChannelTime",value:function(channel,time){time-=channel.delay;time>=channel.duration*channel.repeat?channel.time=channel.duration*channel.rate:
(channel.time=Math.max(0,time)%channel.duration,channel.time*=channel.rate)}}]);return Timeline}();exports.Timeline=require}
//# sourceMappingURL=module$node_modules$$luma_DOT_gl$engine$dist$es5$animation$timeline.js.map
