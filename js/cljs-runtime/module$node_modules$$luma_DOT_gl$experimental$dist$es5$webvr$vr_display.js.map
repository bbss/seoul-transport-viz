{
"version":3,
"file":"module$node_modules$$luma_DOT_gl$experimental$dist$es5$webvr$vr_display.js",
"lineCount":10,
"mappings":"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",
"sources":["node_modules/@luma_DOT_gl/experimental/dist/es5/webvr/vr-display.js"],
"sourcesContent":["shadow$provide[\"module$node_modules$$luma_DOT_gl$experimental$dist$es5$webvr$vr_display\"] = function(global,require,module,exports) {\n\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\n\nvar _regenerator = _interopRequireDefault(require(\"@babel/runtime/regenerator\"));\n\nvar _asyncToGenerator2 = _interopRequireDefault(require(\"@babel/runtime/helpers/asyncToGenerator\"));\n\nvar _classCallCheck2 = _interopRequireDefault(require(\"@babel/runtime/helpers/classCallCheck\"));\n\nvar _possibleConstructorReturn2 = _interopRequireDefault(require(\"@babel/runtime/helpers/possibleConstructorReturn\"));\n\nvar _assertThisInitialized2 = _interopRequireDefault(require(\"@babel/runtime/helpers/assertThisInitialized\"));\n\nvar _getPrototypeOf2 = _interopRequireDefault(require(\"@babel/runtime/helpers/getPrototypeOf\"));\n\nvar _get2 = _interopRequireDefault(require(\"@babel/runtime/helpers/get\"));\n\nvar _createClass2 = _interopRequireDefault(require(\"@babel/runtime/helpers/createClass\"));\n\nvar _inherits2 = _interopRequireDefault(require(\"@babel/runtime/helpers/inherits\"));\n\nvar _webgl = require(\"@luma.gl/webgl\");\n\nvar _display = _interopRequireDefault(require(\"./display\"));\n\nvar _vrButton = require(\"./vr-button\");\n\nvar VRDisplay = function (_Display) {\n  (0, _inherits2[\"default\"])(VRDisplay, _Display);\n  (0, _createClass2[\"default\"])(VRDisplay, null, [{\n    key: \"isSupported\",\n    value: function isSupported() {\n      return typeof navigator !== 'undefined' && 'getVRDisplays' in navigator && 'VRFrameData' in window;\n    }\n  }]);\n\n  function VRDisplay(props) {\n    var _this;\n\n    (0, _classCallCheck2[\"default\"])(this, VRDisplay);\n    _this = (0, _possibleConstructorReturn2[\"default\"])(this, (0, _getPrototypeOf2[\"default\"])(VRDisplay).call(this, props));\n    _this._vrSupported = VRDisplay.isSupported();\n\n    if (_this._vrSupported) {\n      _this.vrFrameData = new window.VRFrameData();\n      _this.vrPresenting = false;\n      _this.vrFrame = false;\n      window.addEventListener('vrdisplaypresentchange', _this._vrDisplayPresentChange.bind((0, _assertThisInitialized2[\"default\"])(_this)));\n    }\n\n    return _this;\n  }\n\n  (0, _createClass2[\"default\"])(VRDisplay, [{\n    key: \"delete\",\n    value: function _delete() {\n      (0, _get2[\"default\"])((0, _getPrototypeOf2[\"default\"])(VRDisplay.prototype), \"delete\", this).call(this);\n\n      this._removeVRButton();\n    }\n  }, {\n    key: \"getViews\",\n    value: function getViews(options) {\n      if (this._vrSupported) {\n        this._addVRButton();\n      }\n\n      if (this.vrPresenting && this.vrFrame) {\n        this.vrDisplay.getFrameData(this.vrFrameData);\n        var _this$vrFrameData = this.vrFrameData,\n            leftProjectionMatrix = _this$vrFrameData.leftProjectionMatrix,\n            leftViewMatrix = _this$vrFrameData.leftViewMatrix,\n            rightProjectionMatrix = _this$vrFrameData.rightProjectionMatrix,\n            rightViewMatrix = _this$vrFrameData.rightViewMatrix;\n        var width = options.width,\n            height = options.height;\n        return [{\n          displayEye: 'left',\n          projectionMatrix: leftProjectionMatrix,\n          viewMatrix: leftViewMatrix,\n          params: {\n            viewport: [0, 0, width * 0.5, height],\n            scissor: [0, 0, width * 0.5, height],\n            scissorTest: true\n          }\n        }, {\n          displayEye: 'right',\n          projectionMatrix: rightProjectionMatrix,\n          viewMatrix: rightViewMatrix,\n          params: {\n            viewport: [width * 0.5, 0, width * 0.5, height],\n            scissor: [width * 0.5, 0, width * 0.5, height],\n            scissorTest: true\n          }\n        }];\n      }\n\n      return (0, _get2[\"default\"])((0, _getPrototypeOf2[\"default\"])(VRDisplay.prototype), \"getViews\", this).call(this, options);\n    }\n  }, {\n    key: \"submitFrame\",\n    value: function submitFrame() {\n      if (this.vrPresenting && this.vrFrame) {\n        this.vrDisplay.submitFrame();\n        return true;\n      }\n\n      return false;\n    }\n  }, {\n    key: \"requestAnimationFrame\",\n    value: function requestAnimationFrame(renderFrame) {\n      var _this2 = this;\n\n      if (this.vrPresenting) {\n        this.vrDisplay.requestAnimationFrame(function () {\n          _this2.vrFrame = true;\n          renderFrame();\n          _this2.vrFrame = false;\n        });\n        return true;\n      }\n\n      return false;\n    }\n  }, {\n    key: \"_addVRButton\",\n    value: function () {\n      var _addVRButton2 = (0, _asyncToGenerator2[\"default\"])(_regenerator[\"default\"].mark(function _callee() {\n        var _this3 = this;\n\n        var canvas, displays;\n        return _regenerator[\"default\"].wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                if (!this.vrButton) {\n                  _context.next = 2;\n                  break;\n                }\n\n                return _context.abrupt(\"return\");\n\n              case 2:\n                canvas = this._getCanvas();\n\n                if (canvas) {\n                  _context.next = 5;\n                  break;\n                }\n\n                return _context.abrupt(\"return\");\n\n              case 5:\n                _context.next = 7;\n                return navigator.getVRDisplays();\n\n              case 7:\n                displays = _context.sent;\n\n                if (displays && displays.length) {\n                  _webgl.log.info(2, 'Found VR Displays', displays)();\n\n                  this.vrDisplay = displays[0];\n                  this.vrButton = (0, _vrButton.createEnterVRButton)({\n                    canvas: canvas,\n                    title: \"Enter VR (\".concat(this.vrDisplay.displayName, \")\")\n                  });\n\n                  this.vrButton.onclick = function () {\n                    return _this3._startDisplay();\n                  };\n                }\n\n              case 9:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function _addVRButton() {\n        return _addVRButton2.apply(this, arguments);\n      }\n\n      return _addVRButton;\n    }()\n  }, {\n    key: \"_getCanvas\",\n    value: function _getCanvas() {\n      return this.animationLoop.canvas || this.animationLoop.gl && this.animationLoop.gl.canvas;\n    }\n  }, {\n    key: \"_removeVRButton\",\n    value: function _removeVRButton() {\n      if (this.vrButton) {}\n    }\n  }, {\n    key: \"_startDisplay\",\n    value: function _startDisplay() {\n      this.vrDisplay.requestPresent([{\n        source: this._getCanvas()\n      }]);\n    }\n  }, {\n    key: \"_vrDisplayPresentChange\",\n    value: function _vrDisplayPresentChange() {\n      if (this.vrDisplay.isPresenting) {\n        _webgl.log.info(2, 'Entering VR')();\n\n        this.vrPresenting = true;\n        this.vrButton.style.display = 'none';\n      } else {\n        _webgl.log.info(2, 'Exiting VR')();\n\n        this.vrPresenting = false;\n        this.vrButton.style.display = 'block';\n      }\n    }\n  }]);\n  return VRDisplay;\n}(_display[\"default\"]);\n\nexports[\"default\"] = VRDisplay;\n//# sourceMappingURL=vr-display.js.map\n};"],
"names":["shadow$provide","global","require","module","exports","_interopRequireDefault","Object","defineProperty","value","_regenerator","_asyncToGenerator2","_classCallCheck2","_possibleConstructorReturn2","_assertThisInitialized2","_getPrototypeOf2","_get2","_createClass2","_inherits2","_webgl","_display","_vrButton","VRDisplay","_Display","props","_this","call","_vrSupported","isSupported","vrFrameData","window","VRFrameData","vrPresenting","vrFrame","addEventListener","_vrDisplayPresentChange","bind","key","navigator","_delete","prototype","_removeVRButton","getViews","options","_addVRButton","vrDisplay","getFrameData","_this$vrFrameData","width","height","displayEye","projectionMatrix","leftProjectionMatrix","viewMatrix","leftViewMatrix","params","viewport","scissor","scissorTest","rightProjectionMatrix","rightViewMatrix","submitFrame","requestAnimationFrame","renderFrame","_this2","_addVRButton2","mark","_callee","_this3","canvas","displays","wrap","_callee$","_context","prev","next","vrButton","abrupt","_getCanvas","getVRDisplays","sent","length","log","info","createEnterVRButton","title","concat","displayName","onclick","this.vrButton.onclick","_startDisplay","stop","apply","arguments","animationLoop","gl","requestPresent","source","isPresenting","style","display"]
}
