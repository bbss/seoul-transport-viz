{
"version":3,
"file":"module$node_modules$$luma_DOT_gl$engine$dist$es5$transform$transform.js",
"lineCount":14,
"mappings":"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",
"sources":["node_modules/@luma_DOT_gl/engine/dist/es5/transform/transform.js"],
"sourcesContent":["shadow$provide[\"module$node_modules$$luma_DOT_gl$engine$dist$es5$transform$transform\"] = function(global,require,module,exports) {\n\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\n\nvar _classCallCheck2 = _interopRequireDefault(require(\"@babel/runtime/helpers/classCallCheck\"));\n\nvar _createClass2 = _interopRequireDefault(require(\"@babel/runtime/helpers/createClass\"));\n\nvar _shadertools = require(\"@luma.gl/shadertools\");\n\nvar _bufferTransform = _interopRequireDefault(require(\"./buffer-transform\"));\n\nvar _textureTransform = _interopRequireDefault(require(\"./texture-transform\"));\n\nvar _gltools = require(\"@luma.gl/gltools\");\n\nvar _webgl = require(\"@luma.gl/webgl\");\n\nvar _model = _interopRequireDefault(require(\"../lib/model\"));\n\nvar Transform = function () {\n  (0, _createClass2[\"default\"])(Transform, null, [{\n    key: \"isSupported\",\n    value: function isSupported(gl) {\n      return (0, _gltools.isWebGL2)(gl);\n    }\n  }]);\n\n  function Transform(gl) {\n    var props = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    (0, _classCallCheck2[\"default\"])(this, Transform);\n    this.gl = gl;\n    this.model = null;\n    this.elementCount = 0;\n    this.bufferTransform = null;\n    this.textureTransform = null;\n    this.elementIDBuffer = null;\n\n    this._initialize(props);\n\n    Object.seal(this);\n  }\n\n  (0, _createClass2[\"default\"])(Transform, [{\n    key: \"delete\",\n    value: function _delete() {\n      var model = this.model,\n          bufferTransform = this.bufferTransform,\n          textureTransform = this.textureTransform;\n\n      if (model) {\n        model[\"delete\"]();\n      }\n\n      if (bufferTransform) {\n        bufferTransform[\"delete\"]();\n      }\n\n      if (textureTransform) {\n        textureTransform[\"delete\"]();\n      }\n    }\n  }, {\n    key: \"run\",\n    value: function run() {\n      var opts = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      var _opts$clearRenderTarg = opts.clearRenderTarget,\n          clearRenderTarget = _opts$clearRenderTarg === void 0 ? true : _opts$clearRenderTarg;\n\n      var updatedOpts = this._updateDrawOptions(opts);\n\n      if (clearRenderTarget && updatedOpts.framebuffer) {\n        updatedOpts.framebuffer.clear({\n          color: true\n        });\n      }\n\n      this.model.transform(updatedOpts);\n    }\n  }, {\n    key: \"swap\",\n    value: function swap() {\n      var swapped = false;\n      var resourceTransforms = [this.bufferTransform, this.textureTransform].filter(Boolean);\n      var _iteratorNormalCompletion = true;\n      var _didIteratorError = false;\n      var _iteratorError = undefined;\n\n      try {\n        for (var _iterator = resourceTransforms[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n          var resourceTransform = _step.value;\n          swapped = swapped || resourceTransform.swap();\n        }\n      } catch (err) {\n        _didIteratorError = true;\n        _iteratorError = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion && _iterator[\"return\"] != null) {\n            _iterator[\"return\"]();\n          }\n        } finally {\n          if (_didIteratorError) {\n            throw _iteratorError;\n          }\n        }\n      }\n\n      (0, _webgl.assert)(swapped, 'Nothing to swap');\n    }\n  }, {\n    key: \"getBuffer\",\n    value: function getBuffer() {\n      var varyingName = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;\n      return this.bufferTransform && this.bufferTransform.getBuffer(varyingName);\n    }\n  }, {\n    key: \"getData\",\n    value: function getData() {\n      var opts = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      var resourceTransforms = [this.bufferTransform, this.textureTransform].filter(Boolean);\n      var _iteratorNormalCompletion2 = true;\n      var _didIteratorError2 = false;\n      var _iteratorError2 = undefined;\n\n      try {\n        for (var _iterator2 = resourceTransforms[Symbol.iterator](), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {\n          var resourceTransform = _step2.value;\n          var data = resourceTransform.getData(opts);\n\n          if (data) {\n            return data;\n          }\n        }\n      } catch (err) {\n        _didIteratorError2 = true;\n        _iteratorError2 = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion2 && _iterator2[\"return\"] != null) {\n            _iterator2[\"return\"]();\n          }\n        } finally {\n          if (_didIteratorError2) {\n            throw _iteratorError2;\n          }\n        }\n      }\n\n      return null;\n    }\n  }, {\n    key: \"getFramebuffer\",\n    value: function getFramebuffer() {\n      return this.textureTransform && this.textureTransform.getFramebuffer();\n    }\n  }, {\n    key: \"update\",\n    value: function update() {\n      var opts = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n      if ('elementCount' in opts) {\n        this.model.setVertexCount(opts.elementCount);\n      }\n\n      var resourceTransforms = [this.bufferTransform, this.textureTransform].filter(Boolean);\n      var _iteratorNormalCompletion3 = true;\n      var _didIteratorError3 = false;\n      var _iteratorError3 = undefined;\n\n      try {\n        for (var _iterator3 = resourceTransforms[Symbol.iterator](), _step3; !(_iteratorNormalCompletion3 = (_step3 = _iterator3.next()).done); _iteratorNormalCompletion3 = true) {\n          var resourceTransform = _step3.value;\n          resourceTransform.update(opts);\n        }\n      } catch (err) {\n        _didIteratorError3 = true;\n        _iteratorError3 = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion3 && _iterator3[\"return\"] != null) {\n            _iterator3[\"return\"]();\n          }\n        } finally {\n          if (_didIteratorError3) {\n            throw _iteratorError3;\n          }\n        }\n      }\n    }\n  }, {\n    key: \"_initialize\",\n    value: function _initialize() {\n      var props = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      var gl = this.gl;\n\n      this._buildResourceTransforms(gl, props);\n\n      props = this._updateModelProps(props);\n      this.model = new _model[\"default\"](gl, Object.assign({}, props, {\n        fs: props.fs || (0, _shadertools.getPassthroughFS)({\n          version: (0, _webgl.getShaderVersion)(props.vs)\n        }),\n        id: props.id || 'transform-model',\n        drawMode: props.drawMode || 0,\n        vertexCount: props.elementCount\n      }));\n      this.bufferTransform && this.bufferTransform.setupResources({\n        model: this.model\n      });\n    }\n  }, {\n    key: \"_updateModelProps\",\n    value: function _updateModelProps(props) {\n      var updatedProps = Object.assign({}, props);\n      var resourceTransforms = [this.bufferTransform, this.textureTransform].filter(Boolean);\n      var _iteratorNormalCompletion4 = true;\n      var _didIteratorError4 = false;\n      var _iteratorError4 = undefined;\n\n      try {\n        for (var _iterator4 = resourceTransforms[Symbol.iterator](), _step4; !(_iteratorNormalCompletion4 = (_step4 = _iterator4.next()).done); _iteratorNormalCompletion4 = true) {\n          var resourceTransform = _step4.value;\n          updatedProps = resourceTransform.updateModelProps(updatedProps);\n        }\n      } catch (err) {\n        _didIteratorError4 = true;\n        _iteratorError4 = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion4 && _iterator4[\"return\"] != null) {\n            _iterator4[\"return\"]();\n          }\n        } finally {\n          if (_didIteratorError4) {\n            throw _iteratorError4;\n          }\n        }\n      }\n\n      return updatedProps;\n    }\n  }, {\n    key: \"_buildResourceTransforms\",\n    value: function _buildResourceTransforms(gl, props) {\n      if (canCreateBufferTransform(props)) {\n        this.bufferTransform = new _bufferTransform[\"default\"](gl, props);\n      }\n\n      if (canCreateTextureTransform(props)) {\n        this.textureTransform = new _textureTransform[\"default\"](gl, props);\n      }\n\n      (0, _webgl.assert)(this.bufferTransform || this.textureTransform, 'must provide source/feedback buffers or source/target textures');\n    }\n  }, {\n    key: \"_updateDrawOptions\",\n    value: function _updateDrawOptions(opts) {\n      var updatedOpts = Object.assign({}, opts);\n      var resourceTransforms = [this.bufferTransform, this.textureTransform].filter(Boolean);\n      var _iteratorNormalCompletion5 = true;\n      var _didIteratorError5 = false;\n      var _iteratorError5 = undefined;\n\n      try {\n        for (var _iterator5 = resourceTransforms[Symbol.iterator](), _step5; !(_iteratorNormalCompletion5 = (_step5 = _iterator5.next()).done); _iteratorNormalCompletion5 = true) {\n          var resourceTransform = _step5.value;\n          updatedOpts = Object.assign(updatedOpts, resourceTransform.getDrawOptions(updatedOpts));\n        }\n      } catch (err) {\n        _didIteratorError5 = true;\n        _iteratorError5 = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion5 && _iterator5[\"return\"] != null) {\n            _iterator5[\"return\"]();\n          }\n        } finally {\n          if (_didIteratorError5) {\n            throw _iteratorError5;\n          }\n        }\n      }\n\n      return updatedOpts;\n    }\n  }]);\n  return Transform;\n}();\n\nexports[\"default\"] = Transform;\n\nfunction canCreateBufferTransform(props) {\n  if (!(0, _webgl.isObjectEmpty)(props.feedbackBuffers) || !(0, _webgl.isObjectEmpty)(props.feedbackMap) || props.varyings && props.varyings.length > 0) {\n    return true;\n  }\n\n  return false;\n}\n\nfunction canCreateTextureTransform(props) {\n  if (!(0, _webgl.isObjectEmpty)(props._sourceTextures) || props._targetTexture || props._targetTextureVarying) {\n    return true;\n  }\n\n  return false;\n}\n//# sourceMappingURL=transform.js.map\n};"],
"names":["shadow$provide","global","require","module","exports","_interopRequireDefault","Object","defineProperty","value","_classCallCheck2","_createClass2","_shadertools","_bufferTransform","_textureTransform","_gltools","_webgl","_model","Transform","gl","props","arguments","length","undefined","model","elementCount","elementIDBuffer","textureTransform","bufferTransform","_initialize","seal","key","isSupported","isWebGL2","_delete","run","opts","_opts$clearRenderTarg","clearRenderTarget","updatedOpts","_updateDrawOptions","framebuffer","clear","color","transform","swap","swapped","resourceTransforms","filter","Boolean","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_iterator","Symbol","iterator","_step","done","next","resourceTransform","err","assert","getBuffer","varyingName","getData","_iteratorNormalCompletion2","_didIteratorError2","_iteratorError2","_iterator2","_step2","data","getFramebuffer","update","setVertexCount","_iteratorNormalCompletion3","_didIteratorError3","_iteratorError3","_iterator3","_step3","_buildResourceTransforms","_updateModelProps","assign","fs","getPassthroughFS","version","getShaderVersion","vs","id","drawMode","vertexCount","setupResources","updatedProps","_iteratorNormalCompletion4","_didIteratorError4","_iteratorError4","_iterator4","_step4","updateModelProps","isObjectEmpty","feedbackBuffers","feedbackMap","varyings","_sourceTextures","_targetTexture","_targetTextureVarying","_iteratorNormalCompletion5","_didIteratorError5","_iteratorError5","_iterator5","_step5","getDrawOptions"]
}
