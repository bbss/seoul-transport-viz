{
"version":3,
"file":"module$node_modules$$math_DOT_gl$culling$dist$es5$lib$culling_volume.js",
"lineCount":9,
"mappings":"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",
"sources":["node_modules/@math_DOT_gl/culling/dist/es5/lib/culling-volume.js"],
"sourcesContent":["shadow$provide[\"module$node_modules$$math_DOT_gl$culling$dist$es5$lib$culling_volume\"] = function(global,require,module,exports) {\n\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\n\nvar _classCallCheck2 = _interopRequireDefault(require(\"@babel/runtime/helpers/classCallCheck\"));\n\nvar _createClass2 = _interopRequireDefault(require(\"@babel/runtime/helpers/createClass\"));\n\nvar _core = require(\"@math.gl/core\");\n\nvar _constants = require(\"../constants\");\n\nvar _plane = _interopRequireDefault(require(\"./plane\"));\n\nvar faces = [new _core.Vector3([1, 0, 0]), new _core.Vector3([0, 1, 0]), new _core.Vector3([0, 0, 1])];\nvar scratchPlaneCenter = new _core.Vector3();\nvar scratchPlaneNormal = new _core.Vector3();\nvar scratchPlane = new _plane[\"default\"](new _core.Vector3(1.0, 0.0, 0.0), 0.0);\n\nvar CullingVolume = function () {\n  (0, _createClass2[\"default\"])(CullingVolume, null, [{\n    key: \"MASK_OUTSIDE\",\n    get: function get() {\n      return 0xffffffff;\n    }\n  }, {\n    key: \"MASK_INSIDE\",\n    get: function get() {\n      return 0x00000000;\n    }\n  }, {\n    key: \"MASK_INDETERMINATE\",\n    get: function get() {\n      return 0x7fffffff;\n    }\n  }]);\n\n  function CullingVolume() {\n    var planes = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n    (0, _classCallCheck2[\"default\"])(this, CullingVolume);\n    this.planes = planes;\n    (0, _core.assert)(this.planes.every(function (plane) {\n      return plane instanceof _plane[\"default\"];\n    }));\n  }\n\n  (0, _createClass2[\"default\"])(CullingVolume, [{\n    key: \"fromBoundingSphere\",\n    value: function fromBoundingSphere(boundingSphere) {\n      this.planes.length = 2 * faces.length;\n      var center = boundingSphere.center;\n      var radius = boundingSphere.radius;\n      var planeIndex = 0;\n      var _iteratorNormalCompletion = true;\n      var _didIteratorError = false;\n      var _iteratorError = undefined;\n\n      try {\n        for (var _iterator = faces[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n          var faceNormal = _step.value;\n          var plane0 = this.planes[planeIndex];\n          var plane1 = this.planes[planeIndex + 1];\n\n          if (!plane0) {\n            plane0 = this.planes[planeIndex] = new _plane[\"default\"]();\n          }\n\n          if (!plane1) {\n            plane1 = this.planes[planeIndex + 1] = new _plane[\"default\"]();\n          }\n\n          var plane0Center = scratchPlaneCenter.copy(faceNormal).scale(-radius).add(center);\n          var plane0Distance = -faceNormal.dot(plane0Center);\n          plane0.fromPointNormal(plane0Center, faceNormal);\n          var plane1Center = scratchPlaneCenter.copy(faceNormal).scale(radius).add(center);\n          var negatedFaceNormal = scratchPlaneNormal.copy(faceNormal).negate();\n          var plane1Distance = -negatedFaceNormal.dot(plane1Center);\n          plane1.fromPointNormal(plane1Center, negatedFaceNormal);\n          planeIndex += 2;\n        }\n      } catch (err) {\n        _didIteratorError = true;\n        _iteratorError = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion && _iterator[\"return\"] != null) {\n            _iterator[\"return\"]();\n          }\n        } finally {\n          if (_didIteratorError) {\n            throw _iteratorError;\n          }\n        }\n      }\n\n      return this;\n    }\n  }, {\n    key: \"computeVisibility\",\n    value: function computeVisibility(boundingVolume) {\n      (0, _core.assert)(boundingVolume);\n      var intersect = _constants.INTERSECTION.INSIDE;\n      var _iteratorNormalCompletion2 = true;\n      var _didIteratorError2 = false;\n      var _iteratorError2 = undefined;\n\n      try {\n        for (var _iterator2 = this.planes[Symbol.iterator](), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {\n          var plane = _step2.value;\n          var result = boundingVolume.intersectPlane(plane);\n\n          switch (result) {\n            case _constants.INTERSECTION.OUTSIDE:\n              return _constants.INTERSECTION.OUTSIDE;\n\n            case _constants.INTERSECTION.INTERSECTING:\n              intersect = _constants.INTERSECTION.INTERSECTING;\n              break;\n\n            default:\n          }\n        }\n      } catch (err) {\n        _didIteratorError2 = true;\n        _iteratorError2 = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion2 && _iterator2[\"return\"] != null) {\n            _iterator2[\"return\"]();\n          }\n        } finally {\n          if (_didIteratorError2) {\n            throw _iteratorError2;\n          }\n        }\n      }\n\n      return intersect;\n    }\n  }, {\n    key: \"computeVisibilityWithPlaneMask\",\n    value: function computeVisibilityWithPlaneMask(boundingVolume, parentPlaneMask) {\n      (0, _core.assert)(boundingVolume, 'boundingVolume is required.');\n      (0, _core.assert)(Number.isFinite(parentPlaneMask), 'parentPlaneMask is required.');\n\n      if (parentPlaneMask === CullingVolume.MASK_OUTSIDE || parentPlaneMask === CullingVolume.MASK_INSIDE) {\n        return parentPlaneMask;\n      }\n\n      var mask = CullingVolume.MASK_INSIDE;\n      var planes = this.planes;\n\n      for (var k = 0; k < this.planes.length; ++k) {\n        var flag = k < 31 ? 1 << k : 0;\n\n        if (k < 31 && (parentPlaneMask & flag) === 0) {\n          continue;\n        }\n\n        var plane = planes[k];\n        var result = boundingVolume.intersectPlane(plane);\n\n        if (result === _constants.INTERSECTION.OUTSIDE) {\n          return CullingVolume.MASK_OUTSIDE;\n        } else if (result === _constants.INTERSECTION.INTERSECTING) {\n          mask |= flag;\n        }\n      }\n\n      return mask;\n    }\n  }]);\n  return CullingVolume;\n}();\n\nexports[\"default\"] = CullingVolume;\n//# sourceMappingURL=culling-volume.js.map\n};"],
"names":["shadow$provide","global","require","module","exports","_interopRequireDefault","Object","defineProperty","value","_classCallCheck2","_createClass2","_core","_constants","_plane","faces","Vector3","scratchPlaneCenter","scratchPlaneNormal","CullingVolume","planes","arguments","length","undefined","assert","every","plane","key","get","fromBoundingSphere","boundingSphere","center","radius","planeIndex","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_iterator","Symbol","iterator","_step","done","next","faceNormal","plane0","plane1","plane0Center","copy","scale","add","dot","fromPointNormal","plane1Center","negatedFaceNormal","negate","err","computeVisibility","boundingVolume","intersect","INTERSECTION","INSIDE","_iteratorNormalCompletion2","_didIteratorError2","_iteratorError2","_iterator2","_step2","intersectPlane","result","OUTSIDE","INTERSECTING","computeVisibilityWithPlaneMask","parentPlaneMask","Number","isFinite","MASK_OUTSIDE","MASK_INSIDE","mask","k","flag"]
}
