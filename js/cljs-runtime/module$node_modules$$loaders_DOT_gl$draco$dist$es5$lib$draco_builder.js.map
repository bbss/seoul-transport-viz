{
"version":3,
"file":"module$node_modules$$loaders_DOT_gl$draco$dist$es5$lib$draco_builder.js",
"lineCount":15,
"mappings":"AAAAA,cAAA,qEAAA,CAAyF,QAAQ,CAACC,MAAD,CAAQC,OAAR,CAAgBC,MAAhB,CAAuBC,OAAvB,CAAgC,CAkBjIC,QAASA,QAAO,CAACC,MAAD,CAASC,cAAT,CAAyB,CAAE,IAAIC,KAAOC,MAAAD,KAAA,CAAYF,MAAZ,CAAqB,IAAIG,MAAAC,sBAAJ,CAAkC,CAAE,IAAIC,QAAUF,MAAAC,sBAAA,CAA6BJ,MAA7B,CAA0CC,eAAJ,GAAoBI,OAApB,CAA8BA,OAAAC,OAAA,CAAe,QAAS,CAACC,GAAD,CAAM,CAAE,MAAOJ,OAAAK,yBAAA,CAAgCR,MAAhC,CAAwCO,GAAxC,CAAAE,WAAT,CAA9B,CAA9B,CAAkIP,KAAAQ,KAAAC,MAAA,CAAgBT,IAAhB,CAAsBG,OAAtB,CAAxL,CAA0N,MAAOH,KAArS,CAEzCU,QAASA,cAAa,CAACC,MAAD,CAAS,CAAE,IAAK,IAAIC,EAAI,CAAb,CAAgBA,CAAhB,CAAoBC,SAAAC,OAApB,CAAsCF,CAAA,EAAtC,CAA2C,CAAE,IAAIG;AAAyB,IAAhB,EAAAF,SAAA,CAAUD,CAAV,CAAA,CAAuBC,SAAA,CAAUD,CAAV,CAAvB,CAAsC,EAAQA,EAAJ,CAAQ,CAAR,CAAaf,OAAA,CAAQI,MAAA,CAAOc,MAAP,CAAR,CAAwB,CAAA,CAAxB,CAAAC,QAAA,CAAsC,QAAS,CAACC,GAAD,CAAM,CAAE,CAAC,CAAA,CAAGC,gBAAA,CAAiB,SAAjB,CAAJ,EAAiCP,MAAjC,CAAyCM,GAAzC,CAA8CF,MAAA,CAAOE,GAAP,CAA9C,CAAF,CAArD,CAAb,CAA+IhB,MAAAkB,0BAAJ,CAAwClB,MAAAmB,iBAAA,CAAwBT,MAAxB,CAAgCV,MAAAkB,0BAAA,CAAiCJ,MAAjC,CAAhC,CAAxC,CAA4HlB,OAAA,CAAQI,MAAA,CAAOc,MAAP,CAAR,CAAAC,QAAA,CAAgC,QAAS,CAACC,GAAD,CAAM,CAAEhB,MAAAoB,eAAA,CAAsBV,MAAtB,CAA8BM,GAA9B,CAAmChB,MAAAK,yBAAA,CAAgCS,MAAhC,CAAwCE,GAAxC,CAAnC,CAAF,CAA/C,CAAhU,CAA2c,MAAON,OAA/f,CAS/BW,QAASA,KAAI,EAAG,EAEhBC,QAASA,4BAA2B,CAACC,SAAD,CAAY,CAK9C,IAJA,IAAIC,WAAaD,SAAAE,KAAA,EAAjB,CACIC;AAAe,IAAIC,WAAJ,CAAgBH,UAAhB,CADnB,CAEII,WAAa,IAAIC,SAAJ,CAAcH,YAAd,CAFjB,CAISf,EAAI,CAAb,CAAgBA,CAAhB,CAAoBa,UAApB,CAAgC,EAAEb,CAAlC,CACEiB,UAAA,CAAWjB,CAAX,CAAA,CAAgBY,SAAAO,SAAA,CAAmBnB,CAAnB,CAGlB,OAAOe,aATuC,CA5B5CK,MAAAA,CAAyBtC,OAAA,CAAQ,kEAAR,CAE7BO,OAAAoB,eAAA,CAAsBzB,OAAtB,CAA+B,YAA/B,CAA6C,CAC3CqC,MAAO,CAAA,CADoC,CAA7C,CAGArC,QAAA,CAAQ,SAAR,CAAA,CAAqB,IAAK,EAE1B,KAAIsC,oBAAsBF,MAAA,CAAuBtC,OAAA,CAAQ,8DAAR,CAAvB,CAA1B,CAEIwB,iBAAmBc,MAAA,CAAuBtC,OAAA,CAAQ,2DAAR,CAAvB,CAFvB;AAIIyC,iBAAmBH,MAAA,CAAuBtC,OAAA,CAAQ,2DAAR,CAAvB,CAJvB,CAMI0C,cAAgBJ,MAAA,CAAuBtC,OAAA,CAAQ,wDAAR,CAAvB,CANpB,CAYI2C,iCAAmC,CACrCC,SAAU,UAD2B,CAErCC,OAAQ,QAF6B,CAGrCC,QAAS,OAH4B,CAIrCC,WAAY,WAJyB,CAqBnCC,QAAAA,CAAe,QAAS,EAAG,CAC7BA,QAASA,aAAY,CAACC,KAAD,CAAQ,CAC3B,IAAIC,QAA6B,CAAnB,CAAA/B,SAAAC,OAAA,EAAyC+B,IAAAA,EAAzC,GAAwBhC,SAAA,CAAU,CAAV,CAAxB,CAAqDA,SAAA,CAAU,CAAV,CAArD,CAAoE,EAClF,EAAC,CAAA,CAAGsB,gBAAA,CAAiB,SAAjB,CAAJ,EAAiC,IAAjC,CAAuCO,YAAvC,CACA,KAAAC,MAAA,CAAaA,KACb,KAAAG,aAAA,CAAoB,IAAI,IAAAH,MAAAI,QACxB;IAAAC,iBAAA,CAAwB,IAAI,IAAAL,MAAAM,YAC5B,KAAAC,IAAA,CAAWN,OAAAM,IAAX,EAA0B5B,IANC,CAS7B,CAAC,CAAA,CAAGc,aAAA,CAAc,SAAd,CAAJ,EAA8BM,YAA9B,CAA4C,CAAC,CAC3CzB,IAAK,SADsC,CAE3CgB,MAAOkB,QAAgB,EAAG,CACxB,IAAAC,qBAAA,CAA0B,IAAAJ,iBAA1B,CACA,KAAAI,qBAAA,CAA0B,IAAAN,aAA1B,CAGA,KAAAH,MAAA,CADA,IAAAG,aACA,CAFA,IAAAE,iBAEA,CAFwB,IAHA,CAFiB,CAAD,CASzC,CACD/B,IAAK,sBADJ,CAEDgB,MAAOmB,QAA6B,CAACtD,MAAD,CAAS,CACvCA,MAAJ,EACE,IAAA6C,MAAAQ,QAAA,CAAmBrD,MAAnB,CAFyC,CAF5C,CATyC,CAgBzC,CACDmB,IAAK,YADJ,CAEDgB,MAAOoB,QAAmB,CAACC,IAAD,CAAOV,OAAP,CAAgB,CACxC,IAAAW,YAAA,CAAiBX,OAAjB,CAEA,OAAOA,QAAAY,WAAA,CAAqB,IAAAC,kBAAA,CAAuBH,IAAvB,CAArB;AAAoD,IAAAI,YAAA,CAAiBJ,IAAjB,CAHnB,CAFzC,CAhByC,CAuBzC,CACDrC,IAAK,wBADJ,CAEDgB,MAAO0B,QAA+B,CAACL,IAAD,CAAO,CAC3C,IAAIM,WAAalD,aAAA,CAAcA,aAAA,CAAc,EAAd,CAAkB4C,IAAlB,CAAd,CAAuCA,IAAAM,WAAvC,CAEbN,KAAAO,QAAJ,GACED,UAAAC,QADF,CACuBP,IAAAO,QADvB,CAIA,OAAOD,WAPoC,CAF5C,CAvByC,CAkCzC,CACD3C,IAAK,mBADJ,CAEDgB,MAAOwB,QAA0B,CAACD,UAAD,CAAa,CACxCI,UAAAA,CAAa,IAAAD,uBAAA,CAA4BH,UAA5B,CAEbM,WAAAA,CAAkB,IAAAC,uBAAA,CAA4BH,UAA5B,CAEtB,KAAIpC,UAAY,IAAI,IAAAmB,MAAAqB,eAEpB,IAAI,CACF,IAAIC,WAAa,IAAAnB,aAAAoB,8BAAA,CAAgDJ,UAAhD,CAAiE,CAAA,CAAjE,CAAwEtC,SAAxE,CAEjB;GAAI,EAAe,CAAf,CAAEyC,UAAF,CAAJ,CACE,KAAUE,MAAJ,CAAU,wBAAV,CAAN,CAGF,IAAAjB,IAAA,CAAS,gBAAAkB,OAAA,CAAwBN,UAAAO,WAAA,EAAxB,CAAsD,wBAAtD,CAAAD,OAAA,CAAuFN,UAAAQ,eAAA,EAAvF,CAAyH,mBAAzH,CAAAF,OAAA,CAAqJH,UAArJ,CAAiK,QAAjK,CAAT,CACA,OAAO1C,4BAAA,CAA4BC,SAA5B,CARL,CAAJ,OASU,CACR,IAAA4B,qBAAA,CAA0B5B,SAA1B,CACA,CAAA,IAAA4B,qBAAA,CAA0BU,UAA1B,CAFQ,CAhBkC,CAF7C,CAlCyC,CAyDzC,CACD7C,IAAK,aADJ,CAEDgB,MAAOyB,QAAoB,CAACJ,IAAD,CAAO,CAC5BM,IAAAA,CAAa,IAAAD,uBAAA,CAA4BL,IAA5B,CAEbiB,KAAAA,CAAY,IAAAC,iBAAA,CAAsBZ,IAAtB,CAEhB,KAAIpC,UAAY,IAAI,IAAAmB,MAAAqB,eAEpB;GAAI,CACF,IAAIC,WAAa,IAAAnB,aAAA2B,wBAAA,CAA0CF,IAA1C,CAAqD/C,SAArD,CAEjB,IAAkB,CAAlB,EAAIyC,UAAJ,CACE,KAAUE,MAAJ,CAAU,wBAAV,CAAN,CAGF,IAAAjB,IAAA,CAAS,gBAAAkB,OAAA,CAAwBG,IAAAF,WAAA,EAAxB,CAAgD,wBAAhD,CAAAD,OAAA,CAAiFG,IAAAD,eAAA,EAAjF,CAA6G,mBAA7G,CAAAF,OAAA,CAAyIH,UAAzI,CAAqJ,QAArJ,CAAT,CACA,OAAO1C,4BAAA,CAA4BC,SAA5B,CARL,CAAJ,OASU,CACR,IAAA4B,qBAAA,CAA0B5B,SAA1B,CACA,CAAA,IAAA4B,qBAAA,CAA0BmB,IAA1B,CAFQ,CAhBsB,CAFjC,CAzDyC,CAgFzC,CACDtD,IAAK,aADJ,CAEDgB,MAAOsB,QAAoB,CAACX,OAAD,CAAU,CACnC,GAAI,OAAJ,EAAeA,QAAf,CAAwB,CACtB,IAAI8B,kBAEJC;CAACD,kBAADC,CAAsB,IAAA7B,aAAtB6B,iBAAAlE,MAAA,CAA+DiE,kBAA/D,CAAmF,CAAC,CAAA,CAAGxC,mBAAA,CAAoB,SAApB,CAAJ,EAAoCU,OAAAgC,MAApC,CAAnF,CAHsB,CAMpB,QAAJ,EAAgBhC,QAAhB,EAEE,IAAAE,aAAA+B,kBAAA,CADkB,IAAAlC,MAAAmC,CAAWlC,OAAAmC,OAAXD,CAClB,CAGF,IAAI,cAAJ,EAAsBlC,QAAtB,CACE,IAAKoC,IAAIA,SAAT,GAAsBpC,QAAAqC,aAAtB,CAGE,IAAAnC,aAAAoC,yBAAA,CADoB,IAAAvC,MAAAwC,CAAWH,SAAXG,CACpB,CAFWvC,OAAAqC,aAAAG,CAAqBJ,SAArBI,CAEX,CAhB+B,CAFpC,CAhFyC,CAsGzC,CACDnE,IAAK,kBADJ,CAEDgB,MAAOuC,QAAyB,CAACZ,UAAD,CAAa,CAC3C,IAAIW,UAAY,IAAI,IAAA5B,MAAA0C,KAEpB,IAAI,CACF,IAAIC,UAAY,IAAAC,sBAAA,CAA2B3B,UAA3B,CAEhB;GAAI,CAAC0B,SAAL,CACE,KAAUnB,MAAJ,CAAU,WAAV,CAAN,CAGF,IAAIqB,YAAcF,SAAAxE,OAAd0E,CAAiC,CAErC,KAASC,aAAT,GAA0B7B,WAA1B,CAAsC,CACpC,IAAIoB,UAAYpB,UAAA,CAAW6B,aAAX,CAChB,KAAAA,cAAgBpD,gCAAA,CAAiCoD,aAAjC,CAAhBA,EAAmEA,aAEnE,KAAAC,oBAAA,CAAyBnB,SAAzB,CAAoCkB,aAApC,CAAmDT,SAAnD,CAA8DQ,WAA9D,CAJoC,CATpC,CAeF,MAAOG,KAAP,CAAc,CAEd,KADA,KAAAvC,qBAAA,CAA0BmB,SAA1B,CACMoB,CAAAA,KAAN,CAFc,CAKhB,MAAOpB,UAvBoC,CAF5C,CAtGyC,CAiIzC,CACDtD,IAAK,wBADJ,CAEDgB,MAAO8B,QAA+B,CAACH,UAAD,CAAa,CACjD,IAAIE,gBAAkB,IAAI,IAAAnB,MAAAiD,WAE1B,IAAI,CACF,IAAIN;AAAY,IAAAC,sBAAA,CAA2B3B,UAA3B,CAEhB,IAAI,CAAC0B,SAAL,CACE,KAAUnB,MAAJ,CAAU,WAAV,CAAN,CAGF,IAAIqB,YAAcF,SAAAxE,OAAd0E,CAAiC,CAErC,KAASC,aAAT,GAA0B7B,WAA1B,CAAsC,CACpC,IAAIoB,UAAYpB,UAAA,CAAW6B,aAAX,CAChB,KAAAA,cAAgBpD,gCAAA,CAAiCoD,aAAjC,CAAhBA,EAAmEA,aAEnE,KAAAC,oBAAA,CAAyB5B,eAAzB,CAA0C2B,aAA1C,CAAyDT,SAAzD,CAAoEQ,WAApE,CAJoC,CATpC,CAeF,MAAOG,KAAP,CAAc,CAEd,KADA,KAAAvC,qBAAA,CAA0BU,eAA1B,CACM6B,CAAAA,KAAN,CAFc,CAKhB,MAAO7B,gBAvB0C,CAFlD,CAjIyC,CA4JzC,CACD7C,IAAK,qBADJ,CAEDgB,MAAOyD,QAA4B,CAACnB,SAAD,CAAYkB,aAAZ;AAA2BT,SAA3B,CAAsCQ,WAAtC,CAAmD,CACpF,GAAK5D,WAAAiE,OAAA,CAAmBb,SAAnB,CAAL,CAAA,CAIA,IAAIc,mBAAqB,IAAAC,uBAAA,CAA4BN,aAA5B,CAA2CT,SAA3C,CAAzB,CAEItD,KAAOsD,SAAAlE,OAAPY,CAA0B8D,WAE9B,IAA2B,SAA3B,GAAIM,kBAAJ,CACME,WAEJ,CAFehB,SAAAlE,OAEf,CAFkC,CAElC,CADA,IAAAoC,IAAA,CAAS,mBAAAkB,OAAA,CAA2BqB,aAA3B,CAA0C,SAA1C,CAAArB,OAAA,CAA4D4B,WAA5D,CAAT,CACA,CAAA,IAAAhD,iBAAAiD,eAAA,CAAqC1B,SAArC,CAAgDyB,WAAhD,CAA0DhB,SAA1D,CAHF,KASA,QAFA,IAAA9B,IAAA,CAAS,mBAAAkB,OAAA,CAA2BqB,aAA3B,CAA0C,SAA1C,CAAArB,OAAA,CAA4D1C,IAA5D,CAAT,CAEQwE,CAAAlB,SAAAmB,YAAAD,KAAR,EACE,KAAK,WAAL,CACE,IAAAlD,iBAAAoD,iBAAA,CAAuC7B,SAAvC;AAAkDuB,kBAAlD,CAAsEN,WAAtE,CAAmF9D,IAAnF,CAAyFsD,SAAzF,CACA,MAEF,MAAK,YAAL,CACE,IAAAhC,iBAAAqD,kBAAA,CAAwC9B,SAAxC,CAAmDuB,kBAAnD,CAAuEN,WAAvE,CAAoF9D,IAApF,CAA0FsD,SAA1F,CACA,MAEF,MAAK,YAAL,CACE,IAAAhC,iBAAAsD,kBAAA,CAAwC/B,SAAxC,CAAmDuB,kBAAnD,CAAuEN,WAAvE,CAAoF9D,IAApF,CAA0FsD,SAA1F,CACA,MAEF,MAAK,YAAL,CACA,KAAK,mBAAL,CACE,IAAAhC,iBAAAuD,kBAAA,CAAwChC,SAAxC,CAAmDuB,kBAAnD,CAAuEN,WAAvE,CAAoF9D,IAApF,CAA0FsD,SAA1F,CACA,MAEF,MAAK,aAAL,CACE,IAAAhC,iBAAAwD,mBAAA,CAAyCjC,SAAzC;AAAoDuB,kBAApD,CAAwEN,WAAxE,CAAqF9D,IAArF,CAA2FsD,SAA3F,CACA,MAEF,MAAK,aAAL,CACE,IAAAhC,iBAAAyD,mBAAA,CAAyClC,SAAzC,CAAoDuB,kBAApD,CAAwEN,WAAxE,CAAqF9D,IAArF,CAA2FsD,SAA3F,CACA,MAGF,SACE,IAAAhC,iBAAA0D,kBAAA,CAAwCnC,SAAxC,CAAmDuB,kBAAnD,CAAuEN,WAAvE,CAAoF9D,IAApF,CAA0FsD,SAA1F,CA5BJ,CAjBA,CADoF,CAFrF,CA5JyC,CA+MzC,CACD/D,IAAK,wBADJ,CAEDgB,MAAO8D,QAA+B,CAACN,aAAD,CAAgBT,SAAhB,CAA2B,CAC/D,OAAQS,aAAAkB,YAAA,EAAR,EACE,KAAK,SAAL,CACE,MAAO,SAET,MAAK,UAAL,CACA,KAAK,WAAL,CACA,KAAK,UAAL,CACE,MAAO,KAAAhE,MAAAL,SAET,MAAK,QAAL,CACA,KAAK,SAAL,CACE,MAAO,KAAAK,MAAAJ,OAET;KAAK,OAAL,CACA,KAAK,QAAL,CACE,MAAO,KAAAI,MAAAiE,MAET,MAAK,UAAL,CACA,KAAK,WAAL,CACE,MAAO,KAAAjE,MAAAkE,UAET,SACE,MAAO,KAAAlE,MAAAmE,QAtBX,CAD+D,CAFhE,CA/MyC,CA2OzC,CACD7F,IAAK,uBADJ,CAEDgB,MAAOsD,QAA8B,CAAC3B,UAAD,CAAa,CAChD,IAAK6B,IAAIA,aAAT,GAA0B7B,WAA1B,CAAsC,CACpC,IAAIoB,UAAYpB,UAAA,CAAW6B,aAAX,CAIhB,IAFgB,IAAAM,uBAAAgB,CAA4BtB,aAA5BsB,CAA2C/B,SAA3C+B,CAEhB,GAAkB,IAAApE,MAAAL,SAAlB,CACE,MAAO0C,UAN2B,CAUtC,MAAO,KAXyC,CAFjD,CA3OyC,CAA5C,CA2PA,OAAOtC,aArQsB,CAAZ,EAwQnB9C,QAAA,CAAQ,SAAR,CAAA,CAAqB8C,OAnT4G;",
"sources":["node_modules/@loaders_DOT_gl/draco/dist/es5/lib/draco-builder.js"],
"sourcesContent":["shadow$provide[\"module$node_modules$$loaders_DOT_gl$draco$dist$es5$lib$draco_builder\"] = function(global,require,module,exports) {\n\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\n\nvar _toConsumableArray2 = _interopRequireDefault(require(\"@babel/runtime/helpers/toConsumableArray\"));\n\nvar _defineProperty2 = _interopRequireDefault(require(\"@babel/runtime/helpers/defineProperty\"));\n\nvar _classCallCheck2 = _interopRequireDefault(require(\"@babel/runtime/helpers/classCallCheck\"));\n\nvar _createClass2 = _interopRequireDefault(require(\"@babel/runtime/helpers/createClass\"));\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { (0, _defineProperty2[\"default\"])(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nvar GLTF_TO_DRACO_ATTRIBUTE_NAME_MAP = {\n  POSITION: 'POSITION',\n  NORMAL: 'NORMAL',\n  COLOR_0: 'COLOR',\n  TEXCOORD_0: 'TEX_COORD'\n};\n\nfunction noop() {}\n\nfunction dracoInt8ArrayToArrayBuffer(dracoData) {\n  var byteLength = dracoData.size();\n  var outputBuffer = new ArrayBuffer(byteLength);\n  var outputData = new Int8Array(outputBuffer);\n\n  for (var i = 0; i < byteLength; ++i) {\n    outputData[i] = dracoData.GetValue(i);\n  }\n\n  return outputBuffer;\n}\n\nvar DracoBuilder = function () {\n  function DracoBuilder(draco) {\n    var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    (0, _classCallCheck2[\"default\"])(this, DracoBuilder);\n    this.draco = draco;\n    this.dracoEncoder = new this.draco.Encoder();\n    this.dracoMeshBuilder = new this.draco.MeshBuilder();\n    this.log = options.log || noop;\n  }\n\n  (0, _createClass2[\"default\"])(DracoBuilder, [{\n    key: \"destroy\",\n    value: function destroy() {\n      this.destroyEncodedObject(this.dracoMeshBuilder);\n      this.destroyEncodedObject(this.dracoEncoder);\n      this.dracoMeshBuilder = null;\n      this.dracoEncoder = null;\n      this.draco = null;\n    }\n  }, {\n    key: \"destroyEncodedObject\",\n    value: function destroyEncodedObject(object) {\n      if (object) {\n        this.draco.destroy(object);\n      }\n    }\n  }, {\n    key: \"encodeSync\",\n    value: function encodeSync(mesh, options) {\n      this._setOptions(options);\n\n      return options.pointcloud ? this._encodePointCloud(mesh) : this._encodeMesh(mesh);\n    }\n  }, {\n    key: \"_getAttributesFromMesh\",\n    value: function _getAttributesFromMesh(mesh) {\n      var attributes = _objectSpread(_objectSpread({}, mesh), mesh.attributes);\n\n      if (mesh.indices) {\n        attributes.indices = mesh.indices;\n      }\n\n      return attributes;\n    }\n  }, {\n    key: \"_encodePointCloud\",\n    value: function _encodePointCloud(pointcloud) {\n      var attributes = this._getAttributesFromMesh(pointcloud);\n\n      var dracoPointCloud = this._createDracoPointCloud(attributes);\n\n      var dracoData = new this.draco.DracoInt8Array();\n\n      try {\n        var encodedLen = this.dracoEncoder.EncodePointCloudToDracoBuffer(dracoPointCloud, false, dracoData);\n\n        if (!(encodedLen > 0)) {\n          throw new Error('Draco encoding failed.');\n        }\n\n        this.log(\"DRACO encoded \".concat(dracoPointCloud.num_points(), \" points\\n        with \").concat(dracoPointCloud.num_attributes(), \" attributes into \").concat(encodedLen, \" bytes\"));\n        return dracoInt8ArrayToArrayBuffer(dracoData);\n      } finally {\n        this.destroyEncodedObject(dracoData);\n        this.destroyEncodedObject(dracoPointCloud);\n      }\n    }\n  }, {\n    key: \"_encodeMesh\",\n    value: function _encodeMesh(mesh) {\n      var attributes = this._getAttributesFromMesh(mesh);\n\n      var dracoMesh = this._createDracoMesh(attributes);\n\n      var dracoData = new this.draco.DracoInt8Array();\n\n      try {\n        var encodedLen = this.dracoEncoder.EncodeMeshToDracoBuffer(dracoMesh, dracoData);\n\n        if (encodedLen <= 0) {\n          throw new Error('Draco encoding failed.');\n        }\n\n        this.log(\"DRACO encoded \".concat(dracoMesh.num_points(), \" points\\n        with \").concat(dracoMesh.num_attributes(), \" attributes into \").concat(encodedLen, \" bytes\"));\n        return dracoInt8ArrayToArrayBuffer(dracoData);\n      } finally {\n        this.destroyEncodedObject(dracoData);\n        this.destroyEncodedObject(dracoMesh);\n      }\n    }\n  }, {\n    key: \"_setOptions\",\n    value: function _setOptions(options) {\n      if ('speed' in options) {\n        var _this$dracoEncoder;\n\n        (_this$dracoEncoder = this.dracoEncoder).SetSpeedOptions.apply(_this$dracoEncoder, (0, _toConsumableArray2[\"default\"])(options.speed));\n      }\n\n      if ('method' in options) {\n        var dracoMethod = this.draco[options.method];\n        this.dracoEncoder.SetEncodingMethod(dracoMethod);\n      }\n\n      if ('quantization' in options) {\n        for (var attribute in options.quantization) {\n          var bits = options.quantization[attribute];\n          var dracoPosition = this.draco[attribute];\n          this.dracoEncoder.SetAttributeQuantization(dracoPosition, bits);\n        }\n      }\n    }\n  }, {\n    key: \"_createDracoMesh\",\n    value: function _createDracoMesh(attributes) {\n      var dracoMesh = new this.draco.Mesh();\n\n      try {\n        var positions = this._getPositionAttribute(attributes);\n\n        if (!positions) {\n          throw new Error('positions');\n        }\n\n        var vertexCount = positions.length / 3;\n\n        for (var attributeName in attributes) {\n          var attribute = attributes[attributeName];\n          attributeName = GLTF_TO_DRACO_ATTRIBUTE_NAME_MAP[attributeName] || attributeName;\n\n          this._addAttributeToMesh(dracoMesh, attributeName, attribute, vertexCount);\n        }\n      } catch (error) {\n        this.destroyEncodedObject(dracoMesh);\n        throw error;\n      }\n\n      return dracoMesh;\n    }\n  }, {\n    key: \"_createDracoPointCloud\",\n    value: function _createDracoPointCloud(attributes) {\n      var dracoPointCloud = new this.draco.PointCloud();\n\n      try {\n        var positions = this._getPositionAttribute(attributes);\n\n        if (!positions) {\n          throw new Error('positions');\n        }\n\n        var vertexCount = positions.length / 3;\n\n        for (var attributeName in attributes) {\n          var attribute = attributes[attributeName];\n          attributeName = GLTF_TO_DRACO_ATTRIBUTE_NAME_MAP[attributeName] || attributeName;\n\n          this._addAttributeToMesh(dracoPointCloud, attributeName, attribute, vertexCount);\n        }\n      } catch (error) {\n        this.destroyEncodedObject(dracoPointCloud);\n        throw error;\n      }\n\n      return dracoPointCloud;\n    }\n  }, {\n    key: \"_addAttributeToMesh\",\n    value: function _addAttributeToMesh(dracoMesh, attributeName, attribute, vertexCount) {\n      if (!ArrayBuffer.isView(attribute)) {\n        return;\n      }\n\n      var dracoAttributeType = this._getDracoAttributeType(attributeName, attribute);\n\n      var size = attribute.length / vertexCount;\n\n      if (dracoAttributeType === 'indices') {\n        var numFaces = attribute.length / 3;\n        this.log(\"Adding attribute \".concat(attributeName, \", size \").concat(numFaces));\n        this.dracoMeshBuilder.AddFacesToMesh(dracoMesh, numFaces, attribute);\n        return;\n      }\n\n      this.log(\"Adding attribute \".concat(attributeName, \", size \").concat(size));\n\n      switch (attribute.constructor.name) {\n        case 'Int8Array':\n          this.dracoMeshBuilder.AddInt8Attribute(dracoMesh, dracoAttributeType, vertexCount, size, attribute);\n          break;\n\n        case 'Int16Array':\n          this.dracoMeshBuilder.AddInt16Attribute(dracoMesh, dracoAttributeType, vertexCount, size, attribute);\n          break;\n\n        case 'Int32Array':\n          this.dracoMeshBuilder.AddInt32Attribute(dracoMesh, dracoAttributeType, vertexCount, size, attribute);\n          break;\n\n        case 'Uint8Array':\n        case 'Uint8ClampedArray':\n          this.dracoMeshBuilder.AddUInt8Attribute(dracoMesh, dracoAttributeType, vertexCount, size, attribute);\n          break;\n\n        case 'Uint16Array':\n          this.dracoMeshBuilder.AddUInt16Attribute(dracoMesh, dracoAttributeType, vertexCount, size, attribute);\n          break;\n\n        case 'Uint32Array':\n          this.dracoMeshBuilder.AddUInt32Attribute(dracoMesh, dracoAttributeType, vertexCount, size, attribute);\n          break;\n\n        case 'Float32Array':\n        default:\n          this.dracoMeshBuilder.AddFloatAttribute(dracoMesh, dracoAttributeType, vertexCount, size, attribute);\n      }\n    }\n  }, {\n    key: \"_getDracoAttributeType\",\n    value: function _getDracoAttributeType(attributeName, attribute) {\n      switch (attributeName.toLowerCase()) {\n        case 'indices':\n          return 'indices';\n\n        case 'position':\n        case 'positions':\n        case 'vertices':\n          return this.draco.POSITION;\n\n        case 'normal':\n        case 'normals':\n          return this.draco.NORMAL;\n\n        case 'color':\n        case 'colors':\n          return this.draco.COLOR;\n\n        case 'texCoord':\n        case 'texCoords':\n          return this.draco.TEX_COORD;\n\n        default:\n          return this.draco.GENERIC;\n      }\n    }\n  }, {\n    key: \"_getPositionAttribute\",\n    value: function _getPositionAttribute(attributes) {\n      for (var attributeName in attributes) {\n        var attribute = attributes[attributeName];\n\n        var dracoType = this._getDracoAttributeType(attributeName, attribute);\n\n        if (dracoType === this.draco.POSITION) {\n          return attribute;\n        }\n      }\n\n      return null;\n    }\n  }]);\n  return DracoBuilder;\n}();\n\nexports[\"default\"] = DracoBuilder;\n//# sourceMappingURL=draco-builder.js.map\n};"],
"names":["shadow$provide","global","require","module","exports","ownKeys","object","enumerableOnly","keys","Object","getOwnPropertySymbols","symbols","filter","sym","getOwnPropertyDescriptor","enumerable","push","apply","_objectSpread","target","i","arguments","length","source","forEach","key","_defineProperty2","getOwnPropertyDescriptors","defineProperties","defineProperty","noop","dracoInt8ArrayToArrayBuffer","dracoData","byteLength","size","outputBuffer","ArrayBuffer","outputData","Int8Array","GetValue","_interopRequireDefault","value","_toConsumableArray2","_classCallCheck2","_createClass2","GLTF_TO_DRACO_ATTRIBUTE_NAME_MAP","POSITION","NORMAL","COLOR_0","TEXCOORD_0","DracoBuilder","draco","options","undefined","dracoEncoder","Encoder","dracoMeshBuilder","MeshBuilder","log","destroy","destroyEncodedObject","encodeSync","mesh","_setOptions","pointcloud","_encodePointCloud","_encodeMesh","_getAttributesFromMesh","attributes","indices","dracoPointCloud","_createDracoPointCloud","DracoInt8Array","encodedLen","EncodePointCloudToDracoBuffer","Error","concat","num_points","num_attributes","dracoMesh","_createDracoMesh","EncodeMeshToDracoBuffer","_this$dracoEncoder","SetSpeedOptions","speed","SetEncodingMethod","dracoMethod","method","attribute","quantization","SetAttributeQuantization","dracoPosition","bits","Mesh","positions","_getPositionAttribute","vertexCount","attributeName","_addAttributeToMesh","error","PointCloud","isView","dracoAttributeType","_getDracoAttributeType","numFaces","AddFacesToMesh","name","constructor","AddInt8Attribute","AddInt16Attribute","AddInt32Attribute","AddUInt8Attribute","AddUInt16Attribute","AddUInt32Attribute","AddFloatAttribute","toLowerCase","COLOR","TEX_COORD","GENERIC","dracoType"]
}
