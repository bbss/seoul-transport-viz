{
"version":3,
"file":"module$node_modules$$loaders_DOT_gl$tiles$dist$es5$tileset$helpers$frame_state.js",
"lineCount":5,
"mappings":"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",
"sources":["node_modules/@loaders_DOT_gl/tiles/dist/es5/tileset/helpers/frame-state.js"],
"sourcesContent":["shadow$provide[\"module$node_modules$$loaders_DOT_gl$tiles$dist$es5$tileset$helpers$frame_state\"] = function(global,require,module,exports) {\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.getFrameState = getFrameState;\n\nvar _core = require(\"@math.gl/core\");\n\nvar _culling = require(\"@math.gl/culling\");\n\nvar _geospatial = require(\"@math.gl/geospatial\");\n\nvar scratchVector = new _core.Vector3();\nvar scratchPosition = new _core.Vector3();\nvar cullingVolume = new _culling.CullingVolume([new _culling.Plane(), new _culling.Plane(), new _culling.Plane(), new _culling.Plane(), new _culling.Plane(), new _culling.Plane()]);\n\nfunction getFrameState(viewport, frameNumber) {\n  var cameraDirection = viewport.cameraDirection,\n      cameraUp = viewport.cameraUp,\n      height = viewport.height;\n  var metersPerUnit = viewport.distanceScales.metersPerUnit;\n  var viewportCenterCartographic = [viewport.longitude, viewport.latitude, 0];\n\n  var viewportCenterCartesian = _geospatial.Ellipsoid.WGS84.cartographicToCartesian(viewportCenterCartographic, new _core.Vector3());\n\n  var enuToFixedTransform = _geospatial.Ellipsoid.WGS84.eastNorthUpToFixedFrame(viewportCenterCartesian);\n\n  var cameraPositionCartographic = viewport.unprojectPosition(viewport.cameraPosition);\n\n  var cameraPositionCartesian = _geospatial.Ellipsoid.WGS84.cartographicToCartesian(cameraPositionCartographic, new _core.Vector3());\n\n  var cameraDirectionCartesian = new _core.Vector3(enuToFixedTransform.transformAsVector(new _core.Vector3(cameraDirection).scale(metersPerUnit))).normalize();\n  var cameraUpCartesian = new _core.Vector3(enuToFixedTransform.transformAsVector(new _core.Vector3(cameraUp).scale(metersPerUnit))).normalize();\n  commonSpacePlanesToWGS84(viewport, viewportCenterCartesian);\n  return {\n    camera: {\n      position: cameraPositionCartesian,\n      direction: cameraDirectionCartesian,\n      up: cameraUpCartesian\n    },\n    viewport: viewport,\n    height: height,\n    cullingVolume: cullingVolume,\n    frameNumber: frameNumber,\n    sseDenominator: 1.15\n  };\n}\n\nfunction commonSpacePlanesToWGS84(viewport, viewportCenterCartesian) {\n  var frustumPlanes = viewport.getFrustumPlanes();\n  var i = 0;\n\n  for (var dir in frustumPlanes) {\n    var plane = frustumPlanes[dir];\n    var distanceToCenter = plane.normal.dot(viewport.center);\n    scratchPosition.copy(plane.normal).scale(plane.distance - distanceToCenter).add(viewport.center);\n    var cartographicPos = viewport.unprojectPosition(scratchPosition);\n\n    var cartesianPos = _geospatial.Ellipsoid.WGS84.cartographicToCartesian(cartographicPos, new _core.Vector3());\n\n    cullingVolume.planes[i++].fromPointNormal(cartesianPos, scratchVector.copy(viewportCenterCartesian).subtract(cartesianPos));\n  }\n}\n//# sourceMappingURL=frame-state.js.map\n};"],
"names":["shadow$provide","global","require","module","exports","Object","defineProperty","value","getFrameState","viewport","frameNumber","cameraDirection","cameraUp","height","metersPerUnit","distanceScales","viewportCenterCartesian","_geospatial","Ellipsoid","WGS84","cartographicToCartesian","viewportCenterCartographic","longitude","latitude","_core","Vector3","enuToFixedTransform","eastNorthUpToFixedFrame","cameraPositionCartographic","unprojectPosition","cameraPosition","cameraPositionCartesian","cameraDirectionCartesian","normalize","transformAsVector","scale","cameraUpCartesian","frustumPlanes","getFrustumPlanes","i","dir","plane","distanceToCenter","normal","dot","center","scratchPosition","copy","distance","add","cartographicPos","cartesianPos","cullingVolume","planes","fromPointNormal","scratchVector","subtract","camera","position","direction","up","sseDenominator","_culling","CullingVolume","Plane"]
}
