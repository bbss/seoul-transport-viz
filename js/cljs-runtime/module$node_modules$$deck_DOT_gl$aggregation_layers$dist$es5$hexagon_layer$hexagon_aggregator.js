shadow$provide.module$node_modules$$deck_DOT_gl$aggregation_layers$dist$es5$hexagon_layer$hexagon_aggregator=function(global,require,module,exports){function getPointsCenter(data,aggregationParams){var attributes=aggregationParams.attributes;aggregationParams=attributes.positions.value;attributes=attributes.positions.getAccessor().size;var minX=Infinity,minY=Infinity,maxX=-Infinity,maxY=-Infinity,i;for(i=0;i<attributes*data.length;i+=attributes){var x=aggregationParams[i],y=aggregationParams[i+1];
Number.isFinite(x)&&Number.isFinite(y)&&(minX=Math.min(x,minX),maxX=Math.max(x,maxX),minY=Math.min(y,minY),maxY=Math.max(y,maxY))}return[minX,minY,maxX,maxY].every(Number.isFinite)?[(minX+maxX)/2,(minY+maxY)/2]:null}function getRadiusInCommon(radius,viewport,center){viewport=viewport.getDistanceScales(center).unitsPerMeter;return radius*viewport[0]}Object.defineProperty(exports,"__esModule",{value:!0});exports.pointToHexbin=function(props,aggregationParams){var data=props.data;props=props.radius;
var viewport=aggregationParams.viewport,attributes=aggregationParams.attributes;aggregationParams=data.length?getPointsCenter(data,aggregationParams):null;aggregationParams=getRadiusInCommon(props,viewport,aggregationParams);props=[];var _createIterable=(0,_core.createIterable)(data);data=_createIterable.iterable;_createIterable=_createIterable.objectInfo;var positions=attributes.positions.value;attributes=attributes.positions.getAccessor().size;var _iteratorNormalCompletion=!0,_didIteratorError=
!1,_iteratorError=void 0;try{for(var _iterator=data[Symbol.iterator](),_step;!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0){var object=_step.value;_createIterable.index++;var posIndex=_createIterable.index*attributes,position=[positions[posIndex],positions[posIndex+1]];Number.isFinite(position[0])&&Number.isFinite(position[1])?props.push(Object.assign({screenCoord:viewport.projectFlat(position)},object)):_core.log.warn("HexagonLayer: invalid position")()}}catch(err){_didIteratorError=
!0,_iteratorError=err}finally{try{if(!_iteratorNormalCompletion&&null!=_iterator["return"])_iterator["return"]()}finally{if(_didIteratorError)throw _iteratorError;}}return{hexagons:(0,_d3Hexbin.hexbin)().radius(aggregationParams).x(function(d){return d.screenCoord[0]}).y(function(d){return d.screenCoord[1]})(props).map(function(hex,index){return{position:viewport.unprojectFlat([hex.x,hex.y]),points:hex,index:index}}),radiusCommon:aggregationParams}};exports.getPointsCenter=getPointsCenter;exports.getRadiusInCommon=
getRadiusInCommon;var _d3Hexbin=require("module$node_modules$d3_hexbin$build$d3_hexbin"),_core=require("module$node_modules$$deck_DOT_gl$core$dist$es5$index")}
//# sourceMappingURL=module$node_modules$$deck_DOT_gl$aggregation_layers$dist$es5$hexagon_layer$hexagon_aggregator.js.map
