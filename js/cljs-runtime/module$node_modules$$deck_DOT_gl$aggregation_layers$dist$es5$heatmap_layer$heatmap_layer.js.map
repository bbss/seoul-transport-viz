{
"version":3,
"file":"module$node_modules$$deck_DOT_gl$aggregation_layers$dist$es5$heatmap_layer$heatmap_layer.js",
"lineCount":32,
"mappings":"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",
"sources":["node_modules/@deck_DOT_gl/aggregation-layers/dist/es5/heatmap-layer/heatmap-layer.js"],
"sourcesContent":["shadow$provide[\"module$node_modules$$deck_DOT_gl$aggregation_layers$dist$es5$heatmap_layer$heatmap_layer\"] = function(global,require,module,exports) {\n\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\n\nvar _slicedToArray2 = _interopRequireDefault(require(\"@babel/runtime/helpers/slicedToArray\"));\n\nvar _classCallCheck2 = _interopRequireDefault(require(\"@babel/runtime/helpers/classCallCheck\"));\n\nvar _createClass2 = _interopRequireDefault(require(\"@babel/runtime/helpers/createClass\"));\n\nvar _possibleConstructorReturn2 = _interopRequireDefault(require(\"@babel/runtime/helpers/possibleConstructorReturn\"));\n\nvar _getPrototypeOf2 = _interopRequireDefault(require(\"@babel/runtime/helpers/getPrototypeOf\"));\n\nvar _get2 = _interopRequireDefault(require(\"@babel/runtime/helpers/get\"));\n\nvar _inherits2 = _interopRequireDefault(require(\"@babel/runtime/helpers/inherits\"));\n\nvar _defineProperty2 = _interopRequireDefault(require(\"@babel/runtime/helpers/defineProperty\"));\n\nvar _heatmapLayerUtils = require(\"./heatmap-layer-utils\");\n\nvar _core = require(\"@luma.gl/core\");\n\nvar _core2 = require(\"@deck.gl/core\");\n\nvar _triangleLayer = _interopRequireDefault(require(\"./triangle-layer\"));\n\nvar _aggregationLayer = _interopRequireDefault(require(\"../aggregation-layer\"));\n\nvar _colorUtils = require(\"../utils/color-utils\");\n\nvar _weightsVs = _interopRequireDefault(require(\"./weights-vs.glsl\"));\n\nvar _weightsFs = _interopRequireDefault(require(\"./weights-fs.glsl\"));\n\nvar _maxVs = _interopRequireDefault(require(\"./max-vs.glsl\"));\n\nvar _parameters;\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { (0, _defineProperty2[\"default\"])(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nvar RESOLUTION = 2;\nvar SIZE_2K = 2048;\nvar ZOOM_DEBOUNCE = 500;\nvar TEXTURE_OPTIONS = {\n  mipmaps: false,\n  parameters: (_parameters = {}, (0, _defineProperty2[\"default\"])(_parameters, 10240, 9729), (0, _defineProperty2[\"default\"])(_parameters, 10241, 9729), (0, _defineProperty2[\"default\"])(_parameters, 10242, 33071), (0, _defineProperty2[\"default\"])(_parameters, 10243, 33071), _parameters),\n  dataFormat: 6408\n};\nvar DEFAULT_COLOR_DOMAIN = [0, 0];\nvar defaultProps = {\n  getPosition: {\n    type: 'accessor',\n    value: function value(x) {\n      return x.position;\n    }\n  },\n  getWeight: {\n    type: 'accessor',\n    value: 1\n  },\n  intensity: {\n    type: 'number',\n    min: 0,\n    value: 1\n  },\n  radiusPixels: {\n    type: 'number',\n    min: 1,\n    max: 100,\n    value: 50\n  },\n  colorRange: _colorUtils.defaultColorRange,\n  threshold: {\n    type: 'number',\n    min: 0,\n    max: 1,\n    value: 0.05\n  },\n  colorDomain: {\n    type: 'array',\n    value: null,\n    optional: true\n  }\n};\nvar REQUIRED_FEATURES = [_core.FEATURES.BLEND_EQUATION_MINMAX, _core.FEATURES.TEXTURE_FLOAT];\nvar DIMENSIONS = {\n  data: {\n    props: ['radiusPixels']\n  }\n};\n\nvar HeatmapLayer = function (_AggregationLayer) {\n  (0, _inherits2[\"default\"])(HeatmapLayer, _AggregationLayer);\n\n  function HeatmapLayer() {\n    (0, _classCallCheck2[\"default\"])(this, HeatmapLayer);\n    return (0, _possibleConstructorReturn2[\"default\"])(this, (0, _getPrototypeOf2[\"default\"])(HeatmapLayer).apply(this, arguments));\n  }\n\n  (0, _createClass2[\"default\"])(HeatmapLayer, [{\n    key: \"initializeState\",\n    value: function initializeState() {\n      var gl = this.context.gl;\n\n      if (!(0, _core.hasFeatures)(gl, REQUIRED_FEATURES)) {\n        this.setState({\n          supported: false\n        });\n\n        _core2.log.error(\"HeatmapLayer: \".concat(this.id, \" is not supported on this browser\"))();\n\n        return;\n      }\n\n      (0, _get2[\"default\"])((0, _getPrototypeOf2[\"default\"])(HeatmapLayer.prototype), \"initializeState\", this).call(this, DIMENSIONS);\n      this.setState({\n        supported: true\n      });\n\n      this._setupTextureParams();\n\n      this._setupAttributes();\n\n      this._setupResources();\n    }\n  }, {\n    key: \"shouldUpdateState\",\n    value: function shouldUpdateState(_ref) {\n      var changeFlags = _ref.changeFlags;\n      return changeFlags.somethingChanged;\n    }\n  }, {\n    key: \"updateState\",\n    value: function updateState(opts) {\n      if (!this.state.supported) {\n        return;\n      }\n\n      (0, _get2[\"default\"])((0, _getPrototypeOf2[\"default\"])(HeatmapLayer.prototype), \"updateState\", this).call(this, opts);\n      var props = opts.props,\n          oldProps = opts.oldProps;\n\n      var changeFlags = this._getChangeFlags(opts);\n\n      if (changeFlags.viewportChanged) {\n        changeFlags.boundsChanged = this._updateBounds();\n      }\n\n      if (changeFlags.dataChanged || changeFlags.boundsChanged) {\n        this._updateWeightmap();\n      } else if (changeFlags.viewportZoomChanged) {\n        this._debouncedUpdateWeightmap();\n      }\n\n      if (props.colorRange !== oldProps.colorRange) {\n        this._updateColorTexture(opts);\n      }\n\n      if (changeFlags.viewportChanged) {\n        this._updateTextureRenderingBounds();\n      }\n\n      if (oldProps.colorDomain !== props.colorDomain || changeFlags.viewportChanged) {\n        var viewport = this.context.viewport;\n        var weightsScale = this.state.weightsScale;\n        var domainScale = (viewport ? 1024 / viewport.scale : 1) * weightsScale;\n        var colorDomain = props.colorDomain ? props.colorDomain.map(function (x) {\n          return x * domainScale;\n        }) : DEFAULT_COLOR_DOMAIN;\n\n        if (colorDomain[1] > 0 && weightsScale < 1) {\n          var max = Math.min(colorDomain[1], 1);\n          colorDomain[0] *= max / colorDomain[1];\n          colorDomain[1] = max;\n        }\n\n        this.setState({\n          colorDomain: colorDomain\n        });\n      }\n\n      this.setState({\n        zoom: opts.context.viewport.zoom\n      });\n    }\n  }, {\n    key: \"renderLayers\",\n    value: function renderLayers() {\n      if (!this.state.supported) {\n        return [];\n      }\n\n      var _this$state = this.state,\n          weightsTexture = _this$state.weightsTexture,\n          triPositionBuffer = _this$state.triPositionBuffer,\n          triTexCoordBuffer = _this$state.triTexCoordBuffer,\n          maxWeightsTexture = _this$state.maxWeightsTexture,\n          colorTexture = _this$state.colorTexture,\n          colorDomain = _this$state.colorDomain;\n      var _this$props = this.props,\n          updateTriggers = _this$props.updateTriggers,\n          intensity = _this$props.intensity,\n          threshold = _this$props.threshold;\n      var TriangleLayerClass = this.getSubLayerClass('triangle', _triangleLayer[\"default\"]);\n      return new TriangleLayerClass(this.getSubLayerProps({\n        id: 'triangle-layer',\n        updateTriggers: updateTriggers\n      }), {\n        data: {\n          attributes: {\n            positions: triPositionBuffer,\n            texCoords: triTexCoordBuffer\n          }\n        },\n        vertexCount: 4,\n        maxTexture: maxWeightsTexture,\n        colorTexture: colorTexture,\n        texture: weightsTexture,\n        intensity: intensity,\n        threshold: threshold,\n        colorDomain: colorDomain\n      });\n    }\n  }, {\n    key: \"finalizeState\",\n    value: function finalizeState() {\n      (0, _get2[\"default\"])((0, _getPrototypeOf2[\"default\"])(HeatmapLayer.prototype), \"finalizeState\", this).call(this);\n      var _this$state2 = this.state,\n          weightsTransform = _this$state2.weightsTransform,\n          weightsTexture = _this$state2.weightsTexture,\n          maxWeightTransform = _this$state2.maxWeightTransform,\n          maxWeightsTexture = _this$state2.maxWeightsTexture,\n          triPositionBuffer = _this$state2.triPositionBuffer,\n          triTexCoordBuffer = _this$state2.triTexCoordBuffer,\n          colorTexture = _this$state2.colorTexture,\n          updateTimer = _this$state2.updateTimer;\n      weightsTransform && weightsTransform[\"delete\"]();\n      weightsTexture && weightsTexture[\"delete\"]();\n      maxWeightTransform && maxWeightTransform[\"delete\"]();\n      maxWeightsTexture && maxWeightsTexture[\"delete\"]();\n      triPositionBuffer && triPositionBuffer[\"delete\"]();\n      triTexCoordBuffer && triTexCoordBuffer[\"delete\"]();\n      colorTexture && colorTexture[\"delete\"]();\n      updateTimer && clearTimeout(updateTimer);\n    }\n  }, {\n    key: \"_getAttributeManager\",\n    value: function _getAttributeManager() {\n      return new _core2.AttributeManager(this.context.gl, {\n        id: this.props.id,\n        stats: this.context.stats\n      });\n    }\n  }, {\n    key: \"_getChangeFlags\",\n    value: function _getChangeFlags(opts) {\n      var changeFlags = {};\n      var dimensions = this.state.dimensions;\n      changeFlags.dataChanged = this.isAttributeChanged() || this.isAggregationDirty(opts, {\n        compareAll: true,\n        dimension: dimensions.data\n      });\n      changeFlags.viewportChanged = opts.changeFlags.viewportChanged;\n      var zoom = this.state.zoom;\n\n      if (!opts.context.viewport || opts.context.viewport.zoom !== zoom) {\n        changeFlags.viewportZoomChanged = true;\n      }\n\n      return changeFlags;\n    }\n  }, {\n    key: \"_createTextures\",\n    value: function _createTextures() {\n      var gl = this.context.gl;\n      var _this$state3 = this.state,\n          textureSize = _this$state3.textureSize,\n          format = _this$state3.format,\n          type = _this$state3.type;\n      this.setState({\n        weightsTexture: new _core.Texture2D(gl, _objectSpread({\n          width: textureSize,\n          height: textureSize,\n          format: format,\n          type: type\n        }, TEXTURE_OPTIONS)),\n        maxWeightsTexture: new _core.Texture2D(gl, _objectSpread({\n          format: format,\n          type: type\n        }, TEXTURE_OPTIONS))\n      });\n    }\n  }, {\n    key: \"_setupAttributes\",\n    value: function _setupAttributes() {\n      var attributeManager = this.getAttributeManager();\n      attributeManager.add({\n        positions: {\n          size: 3,\n          accessor: 'getPosition'\n        },\n        weights: {\n          size: 1,\n          accessor: 'getWeight'\n        }\n      });\n      this.setState({\n        positionAttributeName: 'positions'\n      });\n    }\n  }, {\n    key: \"_setupTextureParams\",\n    value: function _setupTextureParams() {\n      var gl = this.context.gl;\n      var textureSize = Math.min(SIZE_2K, (0, _core.getParameters)(gl, 3379));\n      var floatTargetSupport = (0, _core.hasFeatures)(gl, _core.FEATURES.COLOR_ATTACHMENT_RGBA32F);\n\n      var _getTextureParams = (0, _heatmapLayerUtils.getTextureParams)({\n        gl: gl,\n        floatTargetSupport: floatTargetSupport\n      }),\n          format = _getTextureParams.format,\n          type = _getTextureParams.type;\n\n      var weightsScale = floatTargetSupport ? 1 : 1 / 255;\n      this.setState({\n        textureSize: textureSize,\n        format: format,\n        type: type,\n        weightsScale: weightsScale\n      });\n\n      if (!floatTargetSupport) {\n        _core2.log.warn(\"HeatmapLayer: \".concat(this.id, \" rendering to float texture not supported, fallingback to low precession format\"))();\n      }\n    }\n  }, {\n    key: \"_createWeightsTransform\",\n    value: function _createWeightsTransform() {\n      var shaderOptions = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      var gl = this.context.gl;\n      var weightsTransform = this.state.weightsTransform;\n      var weightsTexture = this.state.weightsTexture;\n\n      if (weightsTransform) {\n        weightsTransform[\"delete\"]();\n      }\n\n      var shaders = (0, _core2._mergeShaders)({\n        vs: _weightsVs[\"default\"],\n        _fs: _weightsFs[\"default\"],\n        modules: [_core2.project32]\n      }, shaderOptions);\n      weightsTransform = new _core.Transform(gl, _objectSpread({\n        id: \"\".concat(this.id, \"-weights-transform\"),\n        elementCount: 1,\n        _targetTexture: weightsTexture,\n        _targetTextureVarying: 'weightsTexture'\n      }, shaders));\n      this.setState({\n        weightsTransform: weightsTransform\n      });\n    }\n  }, {\n    key: \"_setupResources\",\n    value: function _setupResources() {\n      var gl = this.context.gl;\n\n      this._createTextures();\n\n      var _this$state4 = this.state,\n          textureSize = _this$state4.textureSize,\n          weightsTexture = _this$state4.weightsTexture,\n          maxWeightsTexture = _this$state4.maxWeightsTexture;\n\n      this._createWeightsTransform();\n\n      var maxWeightTransform = new _core.Transform(gl, {\n        id: \"\".concat(this.id, \"-max-weights-transform\"),\n        _sourceTextures: {\n          inTexture: weightsTexture\n        },\n        _targetTexture: maxWeightsTexture,\n        _targetTextureVarying: 'outTexture',\n        vs: _maxVs[\"default\"],\n        elementCount: textureSize * textureSize\n      });\n      this.setState({\n        weightsTexture: weightsTexture,\n        maxWeightsTexture: maxWeightsTexture,\n        maxWeightTransform: maxWeightTransform,\n        zoom: null,\n        triPositionBuffer: new _core.Buffer(gl, {\n          byteLength: 48,\n          accessor: {\n            size: 3\n          }\n        }),\n        triTexCoordBuffer: new _core.Buffer(gl, {\n          byteLength: 48,\n          accessor: {\n            size: 2\n          }\n        })\n      });\n    }\n  }, {\n    key: \"updateShaders\",\n    value: function updateShaders(shaderOptions) {\n      this._createWeightsTransform(shaderOptions);\n    }\n  }, {\n    key: \"_updateMaxWeightValue\",\n    value: function _updateMaxWeightValue() {\n      var maxWeightTransform = this.state.maxWeightTransform;\n      maxWeightTransform.run({\n        parameters: {\n          blend: true,\n          depthTest: false,\n          blendFunc: [1, 1],\n          blendEquation: 32776\n        }\n      });\n    }\n  }, {\n    key: \"_updateBounds\",\n    value: function _updateBounds() {\n      var forceUpdate = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n      var viewport = this.context.viewport;\n      var viewportCorners = [viewport.unproject([0, 0]), viewport.unproject([viewport.width, 0]), viewport.unproject([viewport.width, viewport.height]), viewport.unproject([0, viewport.height])];\n      var visibleWorldBounds = (0, _heatmapLayerUtils.getBounds)(viewportCorners);\n      var newState = {\n        visibleWorldBounds: visibleWorldBounds,\n        viewportCorners: viewportCorners\n      };\n      var boundsChanged = false;\n\n      if (forceUpdate || !this.state.worldBounds || !(0, _heatmapLayerUtils.boundsContain)(this.state.worldBounds, visibleWorldBounds)) {\n        var scaledCommonBounds = this._worldToCommonBounds(visibleWorldBounds);\n\n        var worldBounds = this._commonToWorldBounds(scaledCommonBounds);\n\n        if (this.props.coordinateSystem === _core2.COORDINATE_SYSTEM.LNGLAT) {\n          worldBounds[1] = Math.max(worldBounds[1], -85.051129);\n          worldBounds[3] = Math.min(worldBounds[3], 85.051129);\n          worldBounds[0] = Math.max(worldBounds[0], -360);\n          worldBounds[2] = Math.min(worldBounds[2], 360);\n        }\n\n        var normalizedCommonBounds = this._worldToCommonBounds(worldBounds);\n\n        newState.worldBounds = worldBounds;\n        newState.normalizedCommonBounds = normalizedCommonBounds;\n        boundsChanged = true;\n      }\n\n      this.setState(newState);\n      return boundsChanged;\n    }\n  }, {\n    key: \"_updateTextureRenderingBounds\",\n    value: function _updateTextureRenderingBounds() {\n      var _this$state5 = this.state,\n          triPositionBuffer = _this$state5.triPositionBuffer,\n          triTexCoordBuffer = _this$state5.triTexCoordBuffer,\n          normalizedCommonBounds = _this$state5.normalizedCommonBounds,\n          viewportCorners = _this$state5.viewportCorners;\n      var viewport = this.context.viewport;\n      triPositionBuffer.subData((0, _heatmapLayerUtils.packVertices)(viewportCorners, 3));\n      var textureBounds = viewportCorners.map(function (p) {\n        return (0, _heatmapLayerUtils.getTextureCoordinates)(viewport.projectPosition(p), normalizedCommonBounds);\n      });\n      triTexCoordBuffer.subData((0, _heatmapLayerUtils.packVertices)(textureBounds, 2));\n    }\n  }, {\n    key: \"_updateColorTexture\",\n    value: function _updateColorTexture(opts) {\n      var colorRange = opts.props.colorRange;\n      var colorTexture = this.state.colorTexture;\n      var colors = (0, _colorUtils.colorRangeToFlatArray)(colorRange, true);\n\n      if (colorTexture) {\n        colorTexture.setImageData({\n          data: colors,\n          width: colorRange.length\n        });\n      } else {\n        colorTexture = new _core.Texture2D(this.context.gl, _objectSpread({\n          data: colors,\n          width: colorRange.length,\n          height: 1,\n          format: (0, _core.isWebGL2)(this.context.gl) ? 34836 : 6408,\n          type: 5126\n        }, TEXTURE_OPTIONS));\n      }\n\n      this.setState({\n        colorTexture: colorTexture\n      });\n    }\n  }, {\n    key: \"_updateWeightmap\",\n    value: function _updateWeightmap() {\n      var _weightsTexture$setPa;\n\n      var radiusPixels = this.props.radiusPixels;\n      var _this$state6 = this.state,\n          weightsTransform = _this$state6.weightsTransform,\n          worldBounds = _this$state6.worldBounds,\n          textureSize = _this$state6.textureSize,\n          weightsTexture = _this$state6.weightsTexture,\n          weightsScale = _this$state6.weightsScale;\n\n      var commonBounds = this._worldToCommonBounds(worldBounds, {\n        useLayerCoordinateSystem: true\n      });\n\n      var uniforms = {\n        radiusPixels: radiusPixels,\n        commonBounds: commonBounds,\n        textureWidth: textureSize,\n        weightsScale: weightsScale\n      };\n      weightsTransform.update({\n        elementCount: this.getNumInstances()\n      });\n      weightsTransform.run({\n        uniforms: uniforms,\n        parameters: {\n          blend: true,\n          depthTest: false,\n          blendFunc: [1, 1],\n          blendEquation: 32774\n        },\n        clearRenderTarget: true,\n        attributes: this.getAttributes(),\n        moduleSettings: this.getModuleSettings()\n      });\n\n      this._updateMaxWeightValue();\n\n      weightsTexture.setParameters((_weightsTexture$setPa = {}, (0, _defineProperty2[\"default\"])(_weightsTexture$setPa, 10240, 9729), (0, _defineProperty2[\"default\"])(_weightsTexture$setPa, 10241, 9729), _weightsTexture$setPa));\n      this.setState({\n        lastUpdate: Date.now()\n      });\n    }\n  }, {\n    key: \"_debouncedUpdateWeightmap\",\n    value: function _debouncedUpdateWeightmap() {\n      var fromTimer = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n      var updateTimer = this.state.updateTimer;\n      var timeSinceLastUpdate = Date.now() - this.state.lastUpdate;\n\n      if (fromTimer) {\n        updateTimer = null;\n      }\n\n      if (timeSinceLastUpdate >= ZOOM_DEBOUNCE) {\n        this._updateBounds(true);\n\n        this._updateWeightmap();\n\n        this._updateTextureRenderingBounds();\n      } else if (!updateTimer) {\n        updateTimer = setTimeout(this._debouncedUpdateWeightmap.bind(this, true), ZOOM_DEBOUNCE - timeSinceLastUpdate);\n      }\n\n      this.setState({\n        updateTimer: updateTimer\n      });\n    }\n  }, {\n    key: \"_worldToCommonBounds\",\n    value: function _worldToCommonBounds(worldBounds) {\n      var opts = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n      var _opts$useLayerCoordin = opts.useLayerCoordinateSystem,\n          useLayerCoordinateSystem = _opts$useLayerCoordin === void 0 ? false : _opts$useLayerCoordin;\n\n      var _worldBounds = (0, _slicedToArray2[\"default\"])(worldBounds, 4),\n          minLong = _worldBounds[0],\n          minLat = _worldBounds[1],\n          maxLong = _worldBounds[2],\n          maxLat = _worldBounds[3];\n\n      var viewport = this.context.viewport;\n      var textureSize = this.state.textureSize;\n      var size = textureSize * RESOLUTION / viewport.scale;\n      var bottomLeftCommon;\n      var topRightCommon;\n\n      if (useLayerCoordinateSystem) {\n        bottomLeftCommon = this.projectPosition([minLong, minLat, 0]);\n        topRightCommon = this.projectPosition([maxLong, maxLat, 0]);\n      } else {\n        bottomLeftCommon = viewport.projectPosition([minLong, minLat, 0]);\n        topRightCommon = viewport.projectPosition([maxLong, maxLat, 0]);\n      }\n\n      var commonBounds = bottomLeftCommon.slice(0, 2).concat(topRightCommon.slice(0, 2));\n      commonBounds = (0, _heatmapLayerUtils.scaleToAspectRatio)(commonBounds, size, size);\n      return commonBounds;\n    }\n  }, {\n    key: \"_commonToWorldBounds\",\n    value: function _commonToWorldBounds(commonBounds) {\n      var _commonBounds = (0, _slicedToArray2[\"default\"])(commonBounds, 4),\n          xMin = _commonBounds[0],\n          yMin = _commonBounds[1],\n          xMax = _commonBounds[2],\n          yMax = _commonBounds[3];\n\n      var viewport = this.context.viewport;\n      var bottomLeftWorld = viewport.unprojectPosition([xMin, yMin]);\n      var topRightWorld = viewport.unprojectPosition([xMax, yMax]);\n      return bottomLeftWorld.slice(0, 2).concat(topRightWorld.slice(0, 2));\n    }\n  }]);\n  return HeatmapLayer;\n}(_aggregationLayer[\"default\"]);\n\nexports[\"default\"] = HeatmapLayer;\nHeatmapLayer.layerName = 'HeatmapLayer';\nHeatmapLayer.defaultProps = defaultProps;\n//# sourceMappingURL=heatmap-layer.js.map\n};"],
"names":["shadow$provide","global","require","module","exports","ownKeys","object","enumerableOnly","keys","Object","getOwnPropertySymbols","symbols","filter","sym","getOwnPropertyDescriptor","enumerable","push","apply","_objectSpread","target","i","arguments","length","source","forEach","key","_defineProperty2","getOwnPropertyDescriptors","defineProperties","defineProperty","_interopRequireDefault","value","_slicedToArray2","_classCallCheck2","_createClass2","_possibleConstructorReturn2","_getPrototypeOf2","_get2","_inherits2","_heatmapLayerUtils","_core","_core2","_triangleLayer","_aggregationLayer","_colorUtils","_weightsVs","_weightsFs","_maxVs","_parameters","TEXTURE_OPTIONS","mipmaps","parameters","dataFormat","DEFAULT_COLOR_DOMAIN","defaultProps","getPosition","type","x","position","getWeight","intensity","min","radiusPixels","max","colorRange","defaultColorRange","threshold","colorDomain","optional","REQUIRED_FEATURES","FEATURES","BLEND_EQUATION_MINMAX","TEXTURE_FLOAT","DIMENSIONS","data","props","HeatmapLayer","_AggregationLayer","initializeState","gl","context","hasFeatures","prototype","call","setState","supported","_setupTextureParams","_setupAttributes","_setupResources","log","error","concat","id","shouldUpdateState","_ref","changeFlags","somethingChanged","updateState","opts","state","oldProps","_getChangeFlags","viewportChanged","boundsChanged","_updateBounds","dataChanged","_updateWeightmap","viewportZoomChanged","_debouncedUpdateWeightmap","_updateColorTexture","_updateTextureRenderingBounds","viewport","weightsScale","domainScale","scale","map","Math","zoom","renderLayers","_this$state","weightsTexture","triPositionBuffer","triTexCoordBuffer","maxWeightsTexture","colorTexture","_this$props","updateTriggers","getSubLayerClass","TriangleLayerClass","getSubLayerProps","attributes","positions","texCoords","vertexCount","maxTexture","texture","finalizeState","_this$state2","weightsTransform","maxWeightTransform","updateTimer","clearTimeout","_getAttributeManager","AttributeManager","stats","dimensions","isAttributeChanged","isAggregationDirty","compareAll","dimension","_createTextures","_this$state3","textureSize","format","Texture2D","width","height","getAttributeManager","attributeManager","add","size","accessor","weights","positionAttributeName","SIZE_2K","getParameters","floatTargetSupport","COLOR_ATTACHMENT_RGBA32F","_getTextureParams","getTextureParams","warn","_createWeightsTransform","shaderOptions","undefined","shaders","_mergeShaders","vs","_fs","modules","project32","Transform","elementCount","_targetTexture","_targetTextureVarying","_this$state4","_sourceTextures","inTexture","Buffer","byteLength","updateShaders","_updateMaxWeightValue","run","blend","depthTest","blendFunc","blendEquation","forceUpdate","viewportCorners","unproject","visibleWorldBounds","getBounds","newState","worldBounds","boundsContain","scaledCommonBounds","_worldToCommonBounds","_commonToWorldBounds","coordinateSystem","COORDINATE_SYSTEM","LNGLAT","normalizedCommonBounds","_this$state5","subData","packVertices","textureBounds","p","getTextureCoordinates","projectPosition","colors","colorRangeToFlatArray","setImageData","isWebGL2","_weightsTexture$setPa","_this$state6","commonBounds","useLayerCoordinateSystem","uniforms","textureWidth","update","getNumInstances","clearRenderTarget","getAttributes","moduleSettings","getModuleSettings","setParameters","lastUpdate","Date","now","fromTimer","timeSinceLastUpdate","ZOOM_DEBOUNCE","setTimeout","bind","_opts$useLayerCoordin","_worldBounds","minLong","minLat","maxLong","maxLat","RESOLUTION","bottomLeftCommon","topRightCommon","slice","scaleToAspectRatio","_commonBounds","xMax","yMax","bottomLeftWorld","unprojectPosition","xMin","yMin","topRightWorld","layerName"]
}
