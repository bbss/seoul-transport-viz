{
"version":3,
"file":"module$node_modules$$deck_DOT_gl$geo_layers$dist$es5$mvt_layer$mvt_layer.js",
"lineCount":8,
"mappings":"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",
"sources":["node_modules/@deck_DOT_gl/geo-layers/dist/es5/mvt-layer/mvt-layer.js"],
"sourcesContent":["shadow$provide[\"module$node_modules$$deck_DOT_gl$geo_layers$dist$es5$mvt_layer$mvt_layer\"] = function(global,require,module,exports) {\n\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\n\nvar _toConsumableArray2 = _interopRequireDefault(require(\"@babel/runtime/helpers/toConsumableArray\"));\n\nvar _classCallCheck2 = _interopRequireDefault(require(\"@babel/runtime/helpers/classCallCheck\"));\n\nvar _createClass2 = _interopRequireDefault(require(\"@babel/runtime/helpers/createClass\"));\n\nvar _possibleConstructorReturn2 = _interopRequireDefault(require(\"@babel/runtime/helpers/possibleConstructorReturn\"));\n\nvar _getPrototypeOf2 = _interopRequireDefault(require(\"@babel/runtime/helpers/getPrototypeOf\"));\n\nvar _get2 = _interopRequireDefault(require(\"@babel/runtime/helpers/get\"));\n\nvar _inherits2 = _interopRequireDefault(require(\"@babel/runtime/helpers/inherits\"));\n\nvar _math = require(\"math.gl\");\n\nvar _mvt = require(\"@loaders.gl/mvt\");\n\nvar _core = require(\"@loaders.gl/core\");\n\nvar _core2 = require(\"@deck.gl/core\");\n\nvar _tileLayer = _interopRequireDefault(require(\"../tile-layer/tile-layer\"));\n\nvar _utils = require(\"../tile-layer/utils\");\n\nvar _clipExtension = _interopRequireDefault(require(\"./clip-extension\"));\n\nvar WORLD_SIZE = 512;\nvar defaultProps = {\n  uniqueIdProperty: {\n    type: 'string',\n    value: ''\n  },\n  highlightedFeatureId: null\n};\n\nvar MVTLayer = function (_TileLayer) {\n  (0, _inherits2[\"default\"])(MVTLayer, _TileLayer);\n\n  function MVTLayer() {\n    (0, _classCallCheck2[\"default\"])(this, MVTLayer);\n    return (0, _possibleConstructorReturn2[\"default\"])(this, (0, _getPrototypeOf2[\"default\"])(MVTLayer).apply(this, arguments));\n  }\n\n  (0, _createClass2[\"default\"])(MVTLayer, [{\n    key: \"getTileData\",\n    value: function getTileData(tile) {\n      var url = (0, _utils.getURLFromTemplate)(this.props.data, tile);\n\n      if (!url) {\n        return Promise.reject('Invalid URL');\n      }\n\n      return (0, _core.load)(url, _mvt.MVTLoader, this.getLoadOptions());\n    }\n  }, {\n    key: \"renderSubLayers\",\n    value: function renderSubLayers(props) {\n      var tile = props.tile;\n      var worldScale = Math.pow(2, tile.z);\n      var xScale = WORLD_SIZE / worldScale;\n      var yScale = -xScale;\n      var xOffset = WORLD_SIZE * tile.x / worldScale;\n      var yOffset = WORLD_SIZE * (1 - tile.y / worldScale);\n      var modelMatrix = new _math.Matrix4().scale([xScale, yScale, 1]);\n      props.autoHighlight = false;\n      props.modelMatrix = modelMatrix;\n      props.coordinateOrigin = [xOffset, yOffset, 0];\n      props.coordinateSystem = _core2.COORDINATE_SYSTEM.CARTESIAN;\n      props.extensions = [].concat((0, _toConsumableArray2[\"default\"])(props.extensions || []), [new _clipExtension[\"default\"]()]);\n      return (0, _get2[\"default\"])((0, _getPrototypeOf2[\"default\"])(MVTLayer.prototype), \"renderSubLayers\", this).call(this, props);\n    }\n  }, {\n    key: \"onHover\",\n    value: function onHover(info, pickingEvent) {\n      var _this$props = this.props,\n          uniqueIdProperty = _this$props.uniqueIdProperty,\n          autoHighlight = _this$props.autoHighlight;\n\n      if (autoHighlight) {\n        var hoveredFeatureId = this.state.hoveredFeatureId;\n        var hoveredFeature = info.object;\n        var newHoveredFeatureId;\n\n        if (hoveredFeature) {\n          newHoveredFeatureId = getFeatureUniqueId(hoveredFeature, uniqueIdProperty);\n        }\n\n        if (hoveredFeatureId !== newHoveredFeatureId) {\n          this.setState({\n            hoveredFeatureId: newHoveredFeatureId\n          });\n        }\n      }\n\n      return (0, _get2[\"default\"])((0, _getPrototypeOf2[\"default\"])(MVTLayer.prototype), \"onHover\", this).call(this, info, pickingEvent);\n    }\n  }, {\n    key: \"getHighlightedObjectIndex\",\n    value: function getHighlightedObjectIndex(tile) {\n      var hoveredFeatureId = this.state.hoveredFeatureId;\n      var _this$props2 = this.props,\n          uniqueIdProperty = _this$props2.uniqueIdProperty,\n          highlightedFeatureId = _this$props2.highlightedFeatureId;\n      var data = tile.data;\n      var isFeatureIdPresent = isFeatureIdDefined(hoveredFeatureId) || isFeatureIdDefined(highlightedFeatureId);\n\n      if (!isFeatureIdPresent || !Array.isArray(data)) {\n        return -1;\n      }\n\n      var featureIdToHighlight = isFeatureIdDefined(highlightedFeatureId) ? highlightedFeatureId : hoveredFeatureId;\n      return data.findIndex(function (feature) {\n        return getFeatureUniqueId(feature, uniqueIdProperty) === featureIdToHighlight;\n      });\n    }\n  }]);\n  return MVTLayer;\n}(_tileLayer[\"default\"]);\n\nexports[\"default\"] = MVTLayer;\n\nfunction getFeatureUniqueId(feature, uniqueIdProperty) {\n  if (uniqueIdProperty) {\n    return feature.properties[uniqueIdProperty];\n  }\n\n  if ('id' in feature) {\n    return feature.id;\n  }\n\n  return -1;\n}\n\nfunction isFeatureIdDefined(value) {\n  return value !== undefined && value !== null && value !== '';\n}\n\nMVTLayer.layerName = 'MVTLayer';\nMVTLayer.defaultProps = defaultProps;\n//# sourceMappingURL=mvt-layer.js.map\n};"],
"names":["shadow$provide","global","require","module","exports","isFeatureIdDefined","value","undefined","_interopRequireDefault","Object","defineProperty","_toConsumableArray2","_classCallCheck2","_createClass2","_possibleConstructorReturn2","_getPrototypeOf2","_get2","_inherits2","_math","_mvt","_core","_core2","_tileLayer","_utils","_clipExtension","MVTLayer","_TileLayer","apply","arguments","key","getTileData","tile","url","getURLFromTemplate","props","data","load","MVTLoader","getLoadOptions","Promise","reject","renderSubLayers","worldScale","Math","pow","z","xScale","WORLD_SIZE","yScale","xOffset","x","yOffset","y","modelMatrix","scale","Matrix4","autoHighlight","coordinateOrigin","coordinateSystem","COORDINATE_SYSTEM","CARTESIAN","extensions","concat","prototype","call","onHover","info","pickingEvent","_this$props","uniqueIdProperty","hoveredFeatureId","state","hoveredFeature","object","newHoveredFeatureId","properties","id","setState","getHighlightedObjectIndex","_this$props2","highlightedFeatureId","Array","isArray","featureIdToHighlight","findIndex","feature","layerName","defaultProps","type"]
}
