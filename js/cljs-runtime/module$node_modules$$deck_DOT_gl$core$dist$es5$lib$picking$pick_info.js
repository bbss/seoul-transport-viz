shadow$provide.module$node_modules$$deck_DOT_gl$core$dist$es5$lib$picking$pick_info=function(global,require,module,exports){function getLayerPickingInfo(_ref2){var layer=_ref2.layer,info=_ref2.info;for(_ref2=_ref2.mode;layer&&info;){var sourceLayer=info.layer||layer;info.layer=layer;info=layer.getPickingInfo({info:info,mode:_ref2,sourceLayer:sourceLayer});layer=layer.parent}return info}Object.defineProperty(exports,"__esModule",{value:!0});exports.processPickInfo=function(_ref){var pickInfo=_ref.pickInfo,
lastPickedInfo=_ref.lastPickedInfo,mode=_ref.mode,layers=_ref.layers,viewports=_ref.viewports,x=_ref.x,y=_ref.y,z=_ref.z;_ref=_ref.pixelRatio;var pickedColor=pickInfo.pickedColor,pickedLayer=pickInfo.pickedLayer,pickedObjectIndex=pickInfo.pickedObjectIndex,affectedLayers=pickedLayer?[pickedLayer]:[];if("hover"===mode){var lastPickedObjectIndex=lastPickedInfo.index,lastPickedLayerId=lastPickedInfo.layerId,pickedLayerId=pickedLayer&&pickedLayer.props.id;if(pickedLayerId!==lastPickedLayerId||pickedObjectIndex!==
lastPickedObjectIndex)pickedLayerId!==lastPickedLayerId&&(layers=layers.find(function(layer){return layer.props.id===lastPickedLayerId}))&&affectedLayers.unshift(layers),lastPickedInfo.layerId=pickedLayerId,lastPickedInfo.index=pickedObjectIndex,lastPickedInfo.info=null}z=(viewports=viewports[0])&&viewports.unproject([x,y],{targetZ:z});var baseInfo={color:null,layer:null,index:-1,picked:!1,x:x,y:y,pixel:[x,y],coordinate:z,lngLat:z,devicePixel:[pickInfo.pickedX,pickInfo.pickedY],pixelRatio:_ref},infos=
new Map;infos.set(null,baseInfo);affectedLayers.forEach(function(layer){var info=Object.assign({},baseInfo);layer===pickedLayer&&(info.color=pickedColor,info.index=pickedObjectIndex,info.picked=!0);info=getLayerPickingInfo({layer:layer,info:info,mode:mode});layer===pickedLayer&&"hover"===mode&&(lastPickedInfo.info=info);info&&infos.set(info.layer.id,info);if("hover"===mode&&layer.props.autoHighlight){var pickingModuleParameters={pickingSelectedColor:pickedLayer===layer?pickedColor:null},highlightColor=
layer.props.highlightColor;pickedLayer===layer&&"function"===typeof highlightColor&&(pickingModuleParameters.pickingHighlightColor=highlightColor(info));layer.setModuleParameters(pickingModuleParameters);layer.setNeedsRedraw()}});return infos};exports.getLayerPickingInfo=getLayerPickingInfo}
//# sourceMappingURL=module$node_modules$$deck_DOT_gl$core$dist$es5$lib$picking$pick_info.js.map
