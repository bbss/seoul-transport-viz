{
"version":3,
"file":"module$node_modules$$deck_DOT_gl$mesh_layers$dist$es5$utils$matrix.js",
"lineCount":9,
"mappings":"AAAAA,cAAA,mEAAA,CAAuF,QAAQ,CAACC,MAAD,CAAQC,OAAR,CAAgBC,MAAhB,CAAuBC,OAAvB,CAAgC,CAe/HC,QAASA,yBAAwB,CAACC,YAAD,CAAeC,WAAf,CAA4BC,KAA5B,CAAmC,CAClE,IAAIC,MAAQF,WAAA,CAAY,CAAZ,CAARE,CAAyBC,iBAA7B,CACIC,IAAMJ,WAAA,CAAY,CAAZ,CAANI,CAAuBD,iBAD3B,CAEIE,KAAOL,WAAA,CAAY,CAAZ,CAAPK,CAAwBF,iBACxBG,YAAAA,CAAKC,IAAAC,IAAA,CAASH,IAAT,CACT,KAAII,GAAKF,IAAAC,IAAA,CAASN,KAAT,CAAT,CACIQ,GAAKH,IAAAC,IAAA,CAASJ,GAAT,CACLO,KAAAA,CAAKJ,IAAAK,IAAA,CAASP,IAAT,CACLQ,MAAAA,CAAKN,IAAAK,IAAA,CAASV,KAAT,CACLY,IAAAA,CAAKP,IAAAK,IAAA,CAASR,GAAT,CACT,KAAIW,IAAMd,KAAA,CAAM,CAAN,CAAV,CACIe,IAAMf,KAAA,CAAM,CAAN,CACNgB,MAAAA,CAAMhB,KAAA,CAAM,CAAN,CACVF,aAAA,CAAa,CAAb,CAAA,CAAkBgB,GAAlB,CAAwBD,GAAxB;AAA6BD,KAC7Bd,aAAA,CAAa,CAAb,CAAA,CAAkBgB,GAAlB,CAAwBL,EAAxB,CAA6BG,KAC7Bd,aAAA,CAAa,CAAb,CAAA,CAAkBgB,GAAlB,CAAwB,CAACN,EACzBV,aAAA,CAAa,CAAb,CAAA,CAAkBiB,GAAlB,EAAyB,CAACN,EAA1B,CAA+BC,IAA/B,CAAoCG,GAApC,CAAyCL,EAAzC,CAA8CH,WAA9C,CACAP,aAAA,CAAa,CAAb,CAAA,CAAkBiB,GAAlB,EAAyBF,GAAzB,CAA8BH,IAA9B,CAAmCD,EAAnC,CAAwCD,EAAxC,CAA6CH,WAA7C,CACAP,aAAA,CAAa,CAAb,CAAA,CAAkBiB,GAAlB,CAAwBH,KAAxB,CAA6BP,WAC7BP,aAAA,CAAa,CAAb,CAAA,CAAkBkB,KAAlB,EAAyBP,EAAzB,CAA8BJ,WAA9B,CAAmCQ,GAAnC,CAAwCL,EAAxC,CAA6CE,IAA7C,CACAZ,aAAA,CAAa,CAAb,CAAA,CAAkBkB,KAAlB,EAAyB,CAACH,GAA1B,CAA+BR,WAA/B,CAAoCI,EAApC,CAAyCD,EAAzC,CAA8CE,IAA9C,CACAZ,aAAA,CAAa,CAAb,CAAA,CAAkBkB,KAAlB,CAAwBJ,KAAxB,CAA6BF,IArBqC,CAwBpEO,QAASA,wBAAuB,CAACC,IAAD,CAAO,CACrCA,IAAA,CAAK,CAAL,CAAA,CAAUA,IAAA,CAAK,CAAL,CACVA,KAAA,CAAK,CAAL,CAAA,CAAUA,IAAA,CAAK,CAAL,CACVA,KAAA,CAAK,CAAL,CAAA,CAAUA,IAAA,CAAK,CAAL,CACVA,KAAA,CAAK,CAAL,CAAA,CAAUA,IAAA,CAAK,CAAL,CACVA,KAAA,CAAK,CAAL,CAAA,CAAUA,IAAA,CAAK,CAAL,CACVA,KAAA,CAAK,CAAL,CAAA,CAAUA,IAAA,CAAK,CAAL,CACVA,KAAA,CAAK,CAAL,CAAA,CAAUA,IAAA,CAAK,CAAL,CACVA,KAAA,CAAK,CAAL,CAAA,CAAUA,IAAA,CAAK,CAAL,CACVA,KAAA,CAAK,CAAL,CAAA;AAAUA,IAAA,CAAK,EAAL,CACVA,KAAA,CAAK,CAAL,CAAA,CAAUA,IAAA,CAAK,EAAL,CACVA,KAAA,CAAK,EAAL,CAAA,CAAWA,IAAA,CAAK,EAAL,CACXA,KAAA,CAAK,EAAL,CAAA,CAAWA,IAAA,CAAK,EAAL,CACX,OAAOA,KAAAC,SAAA,CAAc,CAAd,CAAiB,EAAjB,CAb8B,CApCvCC,MAAAC,eAAA,CAAsBzB,OAAtB,CAA+B,YAA/B,CAA6C,CAC3C0B,MAAO,CAAA,CADoC,CAA7C,CAGA1B,QAAA2B,yBAAA,CA8KAA,QAAiC,CAACC,QAAD,CAAWC,gBAAX,CAA6B,CAC5D,MAAOA,iBAAP,GAA4BC,KAAAC,kBAAAC,UAA5B,EAAiEH,gBAAjE,GAAsFC,KAAAC,kBAAAE,cAAtF,EAA+HJ,gBAA/H,GAAoJC,KAAAC,kBAAAG,QAApJ,EAAuL,CAACN,QAAAO,aAD5H,CA7K9DnC,QAAAoC,kBAAA,CAA4B,IAAK,EAEjC,KAAIN,MAAQhC,OAAA,CAAQ,sDAAR,CAAZ;AAEIQ,kBAAoBI,IAAA2B,GAApB/B,CAA8B,GAFlC,CAGIgC,YAAc,IAAIC,YAAJ,CAAiB,EAAjB,CAHlB,CAIIC,WAAa,IAAID,YAAJ,CAAiB,EAAjB,CAqKjBvC,QAAAoC,kBAAA,CA3HwBA,CACtBK,KAAM,EADgBL,CAEtBM,SAAU,CAAC,gBAAD,CAAmB,UAAnB,CAA+B,gBAA/B,CAAiD,oBAAjD,CAFYN,CAGtBO,iBAAkB,CAChBC,gCAAiC,CAC/BH,KAAM,CADyB,CAE/BI,cAAe,CAFgB,CADjB,CAKhBC,gCAAiC,CAC/BL,KAAM,CADyB,CAE/BI,cAAe,CAFgB,CALjB,CAShBE,gCAAiC,CAC/BN,KAAM,CADyB,CAE/BI,cAAe,CAFgB,CATjB,CAahBG,oBAAqB,CACnBP,KAAM,CADa,CAEnBI,cAAe,CAFI,CAbL,CAHIT,CAqBtBa,OAAQA,QAAe,CAACC,SAAD,CAAYC,IAAZ,CAAkB,CAAA,IACnCC,SAAWD,IAAAC,SADwB;AAEnCC,OAASF,IAAAE,OAF0B,CAGnCC,YAAc,IAAAC,MAHqB,CAInCC,KAAOF,WAAAE,KACPC,KAAAA,CAAiBH,WAAAG,eALkB,KAMnCC,SAAWJ,WAAAI,SANwB,CAOnCC,eAAiBL,WAAAK,eACjBC,YAAAA,CAAqBN,WAAAM,mBACzB,KAAIC,YAAcC,KAAAC,QAAA,CAAcH,WAAd,CAAlB,CACII,eAAiBH,WAAjBG,EAA8D,EAA9DA,GAAgCJ,WAAAK,OADpC,CAEIC,cAAgBJ,KAAAC,QAAA,CAAcL,QAAd,CAFpB,CAGIS,oBAAsBL,KAAAC,QAAA,CAAcN,IAAd,CAH1B,CAIIW,oBAAsBN,KAAAC,QAAA,CAAcJ,cAAd,CACtBU,YAAAA,CAAYL,cAAZK,EAA8B,CAACR,WAA/BQ,EAA8C,CAAA,CAAQT,WAAA,CAAmBJ,IAAA,CAAK,CAAL,CAAnB,CAGxDN;SAAAoB,SAAA,CADED,WAAJ,CACuBL,cADvB,CAGuBG,mBAHvB,EAG8CD,aAH9C,EAG+DE,mBAG/D,KAAIG,wBAA0BrB,SAAAxB,MAE9B,IAAIwB,SAAAoB,SAAJ,CAAwB,CAGtB,GAAID,WAAJ,CAAe,CACb/B,WAAAkC,IAAA,CAAgBZ,WAAhB,CACA,KAAAa,OAASpD,uBAAA,CAAwBiB,WAAxB,CAFI,CAAf,IAIEmC,OAIA,CAJSjC,UAIT,CADAvC,wBAAA,CAAyBwE,MAAzB,CAFkBhB,IAElB,CADYC,QACZ,CACA,CAAAe,MAAAD,IAAA,CAAWb,cAAX,CAA2B,CAA3B,CAGFT,UAAAxB,MAAA,CAAkB,IAAIa,YAAJ,CAAiBkC,MAAjB,CAdI,CAAxB,IAeO,CACDC,SAAAA,CAAItB,QAAJsB,CAAexB,SAAAT,KAEfkC,OAAAA,CAAkB,CAAC,CAAA,CAAG7C,KAAA8C,eAAJ,EAA0BpB,IAA1B,CAAgCJ,QAAhC,CAA0CC,MAA1C,CAClBwB,SAAAA;AAAWF,MAAAE,SACXC,OAAAA,CAAaH,MAAAG,WAEbC,KAAAA,CAA4B,CAAA,CAChC,KAAIC,kBAAoB,CAAA,CAAxB,CACIC,eAAiBC,IAAAA,EAErB,IAAI,CACOC,MAAAA,CAAYN,QAAA,CAASO,MAAAC,SAAT,CAAA,EAArB,KAAK,IAA6CC,KAAlD,CAAyD,EAAEP,IAAF,CAA8BQ,CAACD,KAADC,CAASJ,MAAAK,KAAA,EAATD,MAA9B,CAAzD,CAAyHR,IAAzH,CAAqJ,CAAA,CAArJ,CAA2J,CACzJ,IAAIU,OAASH,KAAA5D,MACboD,OAAAY,MAAA,EAEIC,SAAAA,CAAU,IAAK,EAEnB,IAAItB,WAAJ,CACE/B,WAAAkC,IAAA,CAAgBR,cAAA,CAAiBJ,WAAjB,CAAsCA,WAAA,CAAmB6B,MAAnB,CAA2BX,MAA3B,CAAtD,CACA,CAAAa,QAAA,CAAUtE,uBAAA,CAAwBiB,WAAxB,CAFZ,KAGO,CACLqD,QAAA,CAAUnD,UAEV,KAAIoD,aAAezB,mBAAA,CAAsBV,IAAtB,CAAuCA,IAAA,CAAegC,MAAf,CAAuBX,MAAvB,CAA1D,CAEIe,OAAS3B,aAAA,CAAgBR,QAAhB,CAA2BA,QAAA,CAAS+B,MAAT;AAAiBX,MAAjB,CAExC7E,yBAAA,CAAyB0F,QAAzB,CAAkCC,YAAlC,CAAgDC,MAAhD,CAEAF,SAAAnB,IAAA,CAAYJ,mBAAA,CAAsBT,cAAtB,CAAuCA,cAAA,CAAe8B,MAAf,CAAuBX,MAAvB,CAAnD,CAAuF,CAAvF,CATK,CAYPP,uBAAA,CAAwBG,SAAA,EAAxB,CAAA,CAA+BiB,QAAA,CAAQ,CAAR,CAC/BpB,wBAAA,CAAwBG,SAAA,EAAxB,CAAA,CAA+BiB,QAAA,CAAQ,CAAR,CAC/BpB,wBAAA,CAAwBG,SAAA,EAAxB,CAAA,CAA+BiB,QAAA,CAAQ,CAAR,CAC/BpB,wBAAA,CAAwBG,SAAA,EAAxB,CAAA,CAA+BiB,QAAA,CAAQ,CAAR,CAC/BpB,wBAAA,CAAwBG,SAAA,EAAxB,CAAA,CAA+BiB,QAAA,CAAQ,CAAR,CAC/BpB,wBAAA,CAAwBG,SAAA,EAAxB,CAAA,CAA+BiB,QAAA,CAAQ,CAAR,CAC/BpB,wBAAA,CAAwBG,SAAA,EAAxB,CAAA,CAA+BiB,QAAA,CAAQ,CAAR,CAC/BpB,wBAAA,CAAwBG,SAAA,EAAxB,CAAA;AAA+BiB,QAAA,CAAQ,CAAR,CAC/BpB,wBAAA,CAAwBG,SAAA,EAAxB,CAAA,CAA+BiB,QAAA,CAAQ,CAAR,CAC/BpB,wBAAA,CAAwBG,SAAA,EAAxB,CAAA,CAA+BiB,QAAA,CAAQ,CAAR,CAC/BpB,wBAAA,CAAwBG,SAAA,EAAxB,CAAA,CAA+BiB,QAAA,CAAQ,EAAR,CAC/BpB,wBAAA,CAAwBG,SAAA,EAAxB,CAAA,CAA+BiB,QAAA,CAAQ,EAAR,CAhC0H,CADzJ,CAmCF,MAAOG,GAAP,CAAY,CACZd,iBACA,CADoB,CAAA,CACpB,CAAAC,cAAA,CAAiBa,GAFL,CAnCd,OAsCU,CACR,GAAI,CACF,GAAI,CAACf,IAAL,EAAyD,IAAzD,EAAkCI,MAAA,CAAU,QAAV,CAAlC,CACEA,MAAA,CAAU,QAAV,CAAA,EAFA,CAAJ,OAIU,CACR,GAAIH,iBAAJ,CACE,KAAMC,eAAN,CAFM,CALF,CAjDL,CAvCgC,CArBnB7C,CAvDuG;",
"sources":["node_modules/@deck_DOT_gl/mesh-layers/dist/es5/utils/matrix.js"],
"sourcesContent":["shadow$provide[\"module$node_modules$$deck_DOT_gl$mesh_layers$dist$es5$utils$matrix\"] = function(global,require,module,exports) {\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.shouldComposeModelMatrix = shouldComposeModelMatrix;\nexports.MATRIX_ATTRIBUTES = void 0;\n\nvar _core = require(\"@deck.gl/core\");\n\nvar RADIAN_PER_DEGREE = Math.PI / 180;\nvar modelMatrix = new Float32Array(16);\nvar valueArray = new Float32Array(12);\n\nfunction calculateTransformMatrix(targetMatrix, orientation, scale) {\n  var pitch = orientation[0] * RADIAN_PER_DEGREE;\n  var yaw = orientation[1] * RADIAN_PER_DEGREE;\n  var roll = orientation[2] * RADIAN_PER_DEGREE;\n  var sr = Math.sin(roll);\n  var sp = Math.sin(pitch);\n  var sw = Math.sin(yaw);\n  var cr = Math.cos(roll);\n  var cp = Math.cos(pitch);\n  var cw = Math.cos(yaw);\n  var scx = scale[0];\n  var scy = scale[1];\n  var scz = scale[2];\n  targetMatrix[0] = scx * cw * cp;\n  targetMatrix[1] = scx * sw * cp;\n  targetMatrix[2] = scx * -sp;\n  targetMatrix[3] = scy * (-sw * cr + cw * sp * sr);\n  targetMatrix[4] = scy * (cw * cr + sw * sp * sr);\n  targetMatrix[5] = scy * cp * sr;\n  targetMatrix[6] = scz * (sw * sr + cw * sp * cr);\n  targetMatrix[7] = scz * (-cw * sr + sw * sp * cr);\n  targetMatrix[8] = scz * cp * cr;\n}\n\nfunction getExtendedMat3FromMat4(mat4) {\n  mat4[0] = mat4[0];\n  mat4[1] = mat4[1];\n  mat4[2] = mat4[2];\n  mat4[3] = mat4[4];\n  mat4[4] = mat4[5];\n  mat4[5] = mat4[6];\n  mat4[6] = mat4[8];\n  mat4[7] = mat4[9];\n  mat4[8] = mat4[10];\n  mat4[9] = mat4[12];\n  mat4[10] = mat4[13];\n  mat4[11] = mat4[14];\n  return mat4.subarray(0, 12);\n}\n\nvar MATRIX_ATTRIBUTES = {\n  size: 12,\n  accessor: ['getOrientation', 'getScale', 'getTranslation', 'getTransformMatrix'],\n  shaderAttributes: {\n    instanceModelMatrix__LOCATION_0: {\n      size: 3,\n      elementOffset: 0\n    },\n    instanceModelMatrix__LOCATION_1: {\n      size: 3,\n      elementOffset: 3\n    },\n    instanceModelMatrix__LOCATION_2: {\n      size: 3,\n      elementOffset: 6\n    },\n    instanceTranslation: {\n      size: 3,\n      elementOffset: 9\n    }\n  },\n  update: function update(attribute, _ref) {\n    var startRow = _ref.startRow,\n        endRow = _ref.endRow;\n    var _this$props = this.props,\n        data = _this$props.data,\n        getOrientation = _this$props.getOrientation,\n        getScale = _this$props.getScale,\n        getTranslation = _this$props.getTranslation,\n        getTransformMatrix = _this$props.getTransformMatrix;\n    var arrayMatrix = Array.isArray(getTransformMatrix);\n    var constantMatrix = arrayMatrix && getTransformMatrix.length === 16;\n    var constantScale = Array.isArray(getScale);\n    var constantOrientation = Array.isArray(getOrientation);\n    var constantTranslation = Array.isArray(getTranslation);\n    var hasMatrix = constantMatrix || !arrayMatrix && Boolean(getTransformMatrix(data[0]));\n\n    if (hasMatrix) {\n      attribute.constant = constantMatrix;\n    } else {\n      attribute.constant = constantOrientation && constantScale && constantTranslation;\n    }\n\n    var instanceModelMatrixData = attribute.value;\n\n    if (attribute.constant) {\n      var matrix;\n\n      if (hasMatrix) {\n        modelMatrix.set(getTransformMatrix);\n        matrix = getExtendedMat3FromMat4(modelMatrix);\n      } else {\n        matrix = valueArray;\n        var orientation = getOrientation;\n        var scale = getScale;\n        calculateTransformMatrix(matrix, orientation, scale);\n        matrix.set(getTranslation, 9);\n      }\n\n      attribute.value = new Float32Array(matrix);\n    } else {\n      var i = startRow * attribute.size;\n\n      var _createIterable = (0, _core.createIterable)(data, startRow, endRow),\n          iterable = _createIterable.iterable,\n          objectInfo = _createIterable.objectInfo;\n\n      var _iteratorNormalCompletion = true;\n      var _didIteratorError = false;\n      var _iteratorError = undefined;\n\n      try {\n        for (var _iterator = iterable[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n          var object = _step.value;\n          objectInfo.index++;\n\n          var _matrix = void 0;\n\n          if (hasMatrix) {\n            modelMatrix.set(constantMatrix ? getTransformMatrix : getTransformMatrix(object, objectInfo));\n            _matrix = getExtendedMat3FromMat4(modelMatrix);\n          } else {\n            _matrix = valueArray;\n\n            var _orientation = constantOrientation ? getOrientation : getOrientation(object, objectInfo);\n\n            var _scale = constantScale ? getScale : getScale(object, objectInfo);\n\n            calculateTransformMatrix(_matrix, _orientation, _scale);\n\n            _matrix.set(constantTranslation ? getTranslation : getTranslation(object, objectInfo), 9);\n          }\n\n          instanceModelMatrixData[i++] = _matrix[0];\n          instanceModelMatrixData[i++] = _matrix[1];\n          instanceModelMatrixData[i++] = _matrix[2];\n          instanceModelMatrixData[i++] = _matrix[3];\n          instanceModelMatrixData[i++] = _matrix[4];\n          instanceModelMatrixData[i++] = _matrix[5];\n          instanceModelMatrixData[i++] = _matrix[6];\n          instanceModelMatrixData[i++] = _matrix[7];\n          instanceModelMatrixData[i++] = _matrix[8];\n          instanceModelMatrixData[i++] = _matrix[9];\n          instanceModelMatrixData[i++] = _matrix[10];\n          instanceModelMatrixData[i++] = _matrix[11];\n        }\n      } catch (err) {\n        _didIteratorError = true;\n        _iteratorError = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion && _iterator[\"return\"] != null) {\n            _iterator[\"return\"]();\n          }\n        } finally {\n          if (_didIteratorError) {\n            throw _iteratorError;\n          }\n        }\n      }\n    }\n  }\n};\nexports.MATRIX_ATTRIBUTES = MATRIX_ATTRIBUTES;\n\nfunction shouldComposeModelMatrix(viewport, coordinateSystem) {\n  return coordinateSystem === _core.COORDINATE_SYSTEM.CARTESIAN || coordinateSystem === _core.COORDINATE_SYSTEM.METER_OFFSETS || coordinateSystem === _core.COORDINATE_SYSTEM.DEFAULT && !viewport.isGeospatial;\n}\n//# sourceMappingURL=matrix.js.map\n};"],
"names":["shadow$provide","global","require","module","exports","calculateTransformMatrix","targetMatrix","orientation","scale","pitch","RADIAN_PER_DEGREE","yaw","roll","sr","Math","sin","sp","sw","cr","cos","cp","cw","scx","scy","scz","getExtendedMat3FromMat4","mat4","subarray","Object","defineProperty","value","shouldComposeModelMatrix","viewport","coordinateSystem","_core","COORDINATE_SYSTEM","CARTESIAN","METER_OFFSETS","DEFAULT","isGeospatial","MATRIX_ATTRIBUTES","PI","modelMatrix","Float32Array","valueArray","size","accessor","shaderAttributes","instanceModelMatrix__LOCATION_0","elementOffset","instanceModelMatrix__LOCATION_1","instanceModelMatrix__LOCATION_2","instanceTranslation","update","attribute","_ref","startRow","endRow","_this$props","props","data","getOrientation","getScale","getTranslation","getTransformMatrix","arrayMatrix","Array","isArray","constantMatrix","length","constantScale","constantOrientation","constantTranslation","hasMatrix","constant","instanceModelMatrixData","set","matrix","i","_createIterable","createIterable","iterable","objectInfo","_iteratorNormalCompletion","_didIteratorError","_iteratorError","undefined","_iterator","Symbol","iterator","_step","done","next","object","index","_matrix","_orientation","_scale","err"]
}
