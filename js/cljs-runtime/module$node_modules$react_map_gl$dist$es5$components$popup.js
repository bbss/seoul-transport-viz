shadow$provide.module$node_modules$react_map_gl$dist$es5$components$popup=function(global,require,module,exports){function _createSuper(Derived){var hasNativeReflectConstruct=_isNativeReflectConstruct();return function(){var Super=(0,_getPrototypeOf2["default"])(Derived);if(hasNativeReflectConstruct){var NewTarget=(0,_getPrototypeOf2["default"])(this).constructor;Super=Reflect.construct(Super,arguments,NewTarget)}else Super=Super.apply(this,arguments);return(0,_possibleConstructorReturn2["default"])(this,
Super)}}function _isNativeReflectConstruct(){if("undefined"===typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}module=require("module$node_modules$$babel$runtime$helpers$interopRequireWildcard");global=require("module$node_modules$$babel$runtime$helpers$interopRequireDefault");Object.defineProperty(exports,"__esModule",{value:!0});exports["default"]=
void 0;var _slicedToArray2=global(require("module$node_modules$$babel$runtime$helpers$slicedToArray")),_classCallCheck2=global(require("module$node_modules$$babel$runtime$helpers$classCallCheck")),_createClass2=global(require("module$node_modules$$babel$runtime$helpers$createClass")),_assertThisInitialized2=global(require("module$node_modules$$babel$runtime$helpers$assertThisInitialized")),_get2=global(require("module$node_modules$$babel$runtime$helpers$get")),_inherits2=global(require("module$node_modules$$babel$runtime$helpers$inherits")),
_possibleConstructorReturn2=global(require("module$node_modules$$babel$runtime$helpers$possibleConstructorReturn")),_getPrototypeOf2=global(require("module$node_modules$$babel$runtime$helpers$getPrototypeOf")),_defineProperty2=global(require("module$node_modules$$babel$runtime$helpers$defineProperty")),React=module(require("module$node_modules$react$index"));module=global(require("module$node_modules$prop_types$index"));global=global(require("module$node_modules$react_map_gl$dist$es5$components$base_control"));
var _dynamicPosition=require("module$node_modules$react_map_gl$dist$es5$utils$dynamic_position"),_crispPixel=require("module$node_modules$react_map_gl$dist$es5$utils$crisp_pixel");require=Object.assign({},global["default"].propTypes,{className:module["default"].string,longitude:module["default"].number.isRequired,latitude:module["default"].number.isRequired,altitude:module["default"].number,offsetLeft:module["default"].number,offsetTop:module["default"].number,tipSize:module["default"].number,closeButton:module["default"].bool,
closeOnClick:module["default"].bool,anchor:module["default"].oneOf(Object.keys(_dynamicPosition.ANCHOR_POSITION)),dynamicPosition:module["default"].bool,sortByDepth:module["default"].bool,onClose:module["default"].func});module=Object.assign({},global["default"].defaultProps,{className:"",altitude:0,offsetLeft:0,offsetTop:0,tipSize:10,anchor:"bottom",dynamicPosition:!0,sortByDepth:!1,closeButton:!0,closeOnClick:!0,onClose:function(){}});global=function(_BaseControl){function Popup(){(0,_classCallCheck2["default"])(this,
Popup);for(var _len=arguments.length,args=Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];var _this=_super.call.apply(_super,[this].concat(args));(0,_defineProperty2["default"])((0,_assertThisInitialized2["default"])(_this),"_closeOnClick",!1);(0,_defineProperty2["default"])((0,_assertThisInitialized2["default"])(_this),"_contentRef",(0,React.createRef)());(0,_defineProperty2["default"])((0,_assertThisInitialized2["default"])(_this),"_onClick",function(evt){_this.props.captureClick&&
evt.stopPropagation();if(_this.props.closeOnClick||"mapboxgl-popup-close-button"===evt.target.className){_this.props.onClose();var eventManager=_this._context.eventManager;if(eventManager)eventManager.once("click",function(e){return e.stopPropagation()},evt.target)}});return _this}(0,_inherits2["default"])(Popup,_BaseControl);var _super=_createSuper(Popup);(0,_createClass2["default"])(Popup,[{key:"componentDidMount",value:function(){(0,_get2["default"])((0,_getPrototypeOf2["default"])(Popup.prototype),
"componentDidMount",this).call(this);this.forceUpdate()}},{key:"_getPosition",value:function(x,y){var viewport=this._context.viewport,_this$props=this.props,anchor=_this$props.anchor,dynamicPosition=_this$props.dynamicPosition;_this$props=_this$props.tipSize;var content=this._contentRef.current;return content?dynamicPosition?(0,_dynamicPosition.getDynamicPosition)({x:x,y:y,anchor:anchor,padding:_this$props,width:viewport.width,height:viewport.height,selfWidth:content.clientWidth,selfHeight:content.clientHeight}):
anchor:anchor}},{key:"_getContainerStyle",value:function(x,y,z,positionType){var viewport=this._context.viewport,_this$props2=this.props,sortByDepth=_this$props2.sortByDepth,anchorPosition=_dynamicPosition.ANCHOR_POSITION[positionType];positionType=x+_this$props2.offsetLeft;_this$props2=y+_this$props2.offsetTop;var el=this._containerRef.current,xPercentage=(0,_crispPixel.crispPercentage)(el,100*-anchorPosition.x);anchorPosition=(0,_crispPixel.crispPercentage)(el,100*-anchorPosition.y,"y");positionType=
{position:"absolute",transform:"\n        translate(".concat(xPercentage,"%, ").concat(anchorPosition,"%)\n        translate(").concat((0,_crispPixel.crispPixel)(positionType),"px, ").concat((0,_crispPixel.crispPixel)(_this$props2),"px)\n      "),display:void 0,zIndex:void 0};if(!sortByDepth)return positionType;1<z||-1>z||0>x||x>viewport.width||0>y||y>viewport.height?positionType.display="none":positionType.zIndex=Math.floor((1-z)/2*1E5);return positionType}},{key:"_renderTip",value:function(positionType){return React.createElement("div",
{key:"tip",className:"mapboxgl-popup-tip",style:{borderWidth:this.props.tipSize}})}},{key:"_renderContent",value:function(){var _this$props3=this.props,children=_this$props3.children;return React.createElement("div",{key:"content",ref:this._contentRef,className:"mapboxgl-popup-content",onClick:this._context.eventManager?null:this._onClick},_this$props3.closeButton&&React.createElement("button",{key:"close-button",className:"mapboxgl-popup-close-button",type:"button"},"Ã—"),children)}},{key:"_render",
value:function(){var _this$props4=this.props,className=_this$props4.className;_this$props4=this._context.viewport.project([_this$props4.longitude,_this$props4.latitude,_this$props4.altitude]);var _this$_context$viewpo2=(0,_slicedToArray2["default"])(_this$props4,3);_this$props4=_this$_context$viewpo2[0];var y=_this$_context$viewpo2[1],z=_this$_context$viewpo2[2];_this$_context$viewpo2=this._getPosition(_this$props4,y);_this$props4=this._getContainerStyle(_this$props4,y,z,_this$_context$viewpo2);return React.createElement("div",
{className:"mapboxgl-popup mapboxgl-popup-anchor-".concat(_this$_context$viewpo2," ").concat(className),style:_this$props4,ref:this._containerRef},this._renderTip(_this$_context$viewpo2),this._renderContent())}}]);return Popup}(global["default"]);exports["default"]=global;(0,_defineProperty2["default"])(global,"propTypes",require);(0,_defineProperty2["default"])(global,"defaultProps",module)}
//# sourceMappingURL=module$node_modules$react_map_gl$dist$es5$components$popup.js.map
