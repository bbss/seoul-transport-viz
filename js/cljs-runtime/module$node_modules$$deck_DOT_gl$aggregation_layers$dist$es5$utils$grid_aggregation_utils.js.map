{
"version":3,
"file":"module$node_modules$$deck_DOT_gl$aggregation_layers$dist$es5$utils$grid_aggregation_utils.js",
"lineCount":5,
"mappings":"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",
"sources":["node_modules/@deck_DOT_gl/aggregation-layers/dist/es5/utils/grid-aggregation-utils.js"],
"sourcesContent":["shadow$provide[\"module$node_modules$$deck_DOT_gl$aggregation_layers$dist$es5$utils$grid_aggregation_utils\"] = function(global,require,module,exports) {\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.getBoundingBox = getBoundingBox;\nexports.alignToCell = alignToCell;\nexports.getGridOffset = getGridOffset;\nexports.getGridParams = getGridParams;\n\nvar _core = require(\"@deck.gl/core\");\n\nvar R_EARTH = 6378000;\n\nfunction toFinite(n) {\n  return Number.isFinite(n) ? n : 0;\n}\n\nfunction getBoundingBox(attributes, vertexCount) {\n  var positions = attributes.positions.value;\n  var yMin = Infinity;\n  var yMax = -Infinity;\n  var xMin = Infinity;\n  var xMax = -Infinity;\n  var y;\n  var x;\n\n  for (var i = 0; i < vertexCount; i++) {\n    x = positions[i * 3];\n    y = positions[i * 3 + 1];\n    yMin = y < yMin ? y : yMin;\n    yMax = y > yMax ? y : yMax;\n    xMin = x < xMin ? x : xMin;\n    xMax = x > xMax ? x : xMax;\n  }\n\n  var boundingBox = {\n    xMin: toFinite(xMin),\n    xMax: toFinite(xMax),\n    yMin: toFinite(yMin),\n    yMax: toFinite(yMax)\n  };\n  return boundingBox;\n}\n\nfunction getTranslation(boundingBox, gridOffset, coordinateSystem, viewport) {\n  var width = viewport.width,\n      height = viewport.height;\n  var worldOrigin = coordinateSystem === _core.COORDINATE_SYSTEM.CARTESIAN ? [-width / 2, -height / 2] : [-180, -90];\n\n  _core.log.assert([_core.COORDINATE_SYSTEM.CARTESIAN, _core.COORDINATE_SYSTEM.LNGLAT, _core.COORDINATE_SYSTEM.DEFAULT].includes(coordinateSystem));\n\n  var xMin = boundingBox.xMin,\n      yMin = boundingBox.yMin;\n  return [-1 * (alignToCell(xMin - worldOrigin[0], gridOffset.xOffset) + worldOrigin[0]), -1 * (alignToCell(yMin - worldOrigin[1], gridOffset.yOffset) + worldOrigin[1])];\n}\n\nfunction alignToCell(inValue, cellSize) {\n  var sign = inValue < 0 ? -1 : 1;\n  var value = sign < 0 ? Math.abs(inValue) + cellSize : Math.abs(inValue);\n  value = Math.floor(value / cellSize) * cellSize;\n  return value * sign;\n}\n\nfunction getGridOffset(boundingBox, cellSize) {\n  var convertToMeters = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : true;\n\n  if (!convertToMeters) {\n    return {\n      xOffset: cellSize,\n      yOffset: cellSize\n    };\n  }\n\n  var yMin = boundingBox.yMin,\n      yMax = boundingBox.yMax;\n  var centerLat = (yMin + yMax) / 2;\n  return calculateGridLatLonOffset(cellSize, centerLat);\n}\n\nfunction getGridParams(boundingBox, cellSize, viewport, coordinateSystem) {\n  var gridOffset = getGridOffset(boundingBox, cellSize, coordinateSystem !== _core.COORDINATE_SYSTEM.CARTESIAN);\n  var translation = getTranslation(boundingBox, gridOffset, coordinateSystem, viewport);\n  var xMin = boundingBox.xMin,\n      yMin = boundingBox.yMin,\n      xMax = boundingBox.xMax,\n      yMax = boundingBox.yMax;\n  var width = xMax - xMin + gridOffset.xOffset;\n  var height = yMax - yMin + gridOffset.yOffset;\n  var numCol = Math.ceil(width / gridOffset.xOffset);\n  var numRow = Math.ceil(height / gridOffset.yOffset);\n  return {\n    gridOffset: gridOffset,\n    translation: translation,\n    width: width,\n    height: height,\n    numCol: numCol,\n    numRow: numRow\n  };\n}\n\nfunction calculateGridLatLonOffset(cellSize, latitude) {\n  var yOffset = calculateLatOffset(cellSize);\n  var xOffset = calculateLonOffset(latitude, cellSize);\n  return {\n    yOffset: yOffset,\n    xOffset: xOffset\n  };\n}\n\nfunction calculateLatOffset(dy) {\n  return dy / R_EARTH * (180 / Math.PI);\n}\n\nfunction calculateLonOffset(lat, dx) {\n  return dx / R_EARTH * (180 / Math.PI) / Math.cos(lat * Math.PI / 180);\n}\n//# sourceMappingURL=grid-aggregation-utils.js.map\n};"],
"names":["shadow$provide","global","require","module","exports","toFinite","n","Number","isFinite","alignToCell","inValue","cellSize","sign","value","Math","abs","floor","getGridOffset","boundingBox","arguments","length","undefined","xOffset","yOffset","R_EARTH","PI","cos","yMin","yMax","centerLat","Object","defineProperty","getBoundingBox","attributes","vertexCount","positions","Infinity","xMin","xMax","y","x","i","getGridParams","viewport","coordinateSystem","gridOffset","_core","COORDINATE_SYSTEM","CARTESIAN","width","height","worldOrigin","log","assert","LNGLAT","DEFAULT","includes","translation","numCol","ceil","numRow"]
}
