shadow$provide.module$node_modules$$deck_DOT_gl$geo_layers$dist$es5$mvt_layer$mvt_layer=function(global,require,module,exports){function isFeatureIdDefined(value){return void 0!==value&&null!==value&&""!==value}global=require("module$node_modules$$babel$runtime$helpers$interopRequireDefault");Object.defineProperty(exports,"__esModule",{value:!0});exports["default"]=void 0;var _toConsumableArray2=global(require("module$node_modules$$babel$runtime$helpers$toConsumableArray")),_classCallCheck2=global(require("module$node_modules$$babel$runtime$helpers$classCallCheck")),
_createClass2=global(require("module$node_modules$$babel$runtime$helpers$createClass")),_possibleConstructorReturn2=global(require("module$node_modules$$babel$runtime$helpers$possibleConstructorReturn")),_getPrototypeOf2=global(require("module$node_modules$$babel$runtime$helpers$getPrototypeOf")),_get2=global(require("module$node_modules$$babel$runtime$helpers$get")),_inherits2=global(require("module$node_modules$$babel$runtime$helpers$inherits")),_math=require("module$node_modules$math_DOT_gl$dist$es5$index"),
_mvt=require("module$node_modules$$loaders_DOT_gl$mvt$dist$es5$index"),_core=require("module$node_modules$$loaders_DOT_gl$core$dist$es5$index"),_core2=require("module$node_modules$$deck_DOT_gl$core$dist$es5$index");module=global(require("module$node_modules$$deck_DOT_gl$geo_layers$dist$es5$tile_layer$tile_layer"));var _utils=require("module$node_modules$$deck_DOT_gl$geo_layers$dist$es5$tile_layer$utils"),_clipExtension=global(require("module$node_modules$$deck_DOT_gl$geo_layers$dist$es5$mvt_layer$clip_extension"));
require=function(_TileLayer){function MVTLayer(){(0,_classCallCheck2["default"])(this,MVTLayer);return(0,_possibleConstructorReturn2["default"])(this,(0,_getPrototypeOf2["default"])(MVTLayer).apply(this,arguments))}(0,_inherits2["default"])(MVTLayer,_TileLayer);(0,_createClass2["default"])(MVTLayer,[{key:"getTileData",value:function(tile){return(tile=(0,_utils.getURLFromTemplate)(this.props.data,tile))?(0,_core.load)(tile,_mvt.MVTLoader,this.getLoadOptions()):Promise.reject("Invalid URL")}},{key:"renderSubLayers",
value:function(props){var tile=props.tile,worldScale=Math.pow(2,tile.z),xScale=512/worldScale,yScale=-xScale,xOffset=512*tile.x/worldScale;tile=512*(1-tile.y/worldScale);xScale=(new _math.Matrix4).scale([xScale,yScale,1]);props.autoHighlight=!1;props.modelMatrix=xScale;props.coordinateOrigin=[xOffset,tile,0];props.coordinateSystem=_core2.COORDINATE_SYSTEM.CARTESIAN;props.extensions=[].concat((0,_toConsumableArray2["default"])(props.extensions||[]),[new _clipExtension["default"]]);return(0,_get2["default"])((0,
_getPrototypeOf2["default"])(MVTLayer.prototype),"renderSubLayers",this).call(this,props)}},{key:"onHover",value:function(info,pickingEvent){var _this$props=this.props,uniqueIdProperty=_this$props.uniqueIdProperty;if(_this$props.autoHighlight){_this$props=this.state.hoveredFeatureId;var hoveredFeature=info.object,newHoveredFeatureId;hoveredFeature&&(newHoveredFeatureId=uniqueIdProperty?hoveredFeature.properties[uniqueIdProperty]:"id"in hoveredFeature?hoveredFeature.id:-1);_this$props!==newHoveredFeatureId&&
this.setState({hoveredFeatureId:newHoveredFeatureId})}return(0,_get2["default"])((0,_getPrototypeOf2["default"])(MVTLayer.prototype),"onHover",this).call(this,info,pickingEvent)}},{key:"getHighlightedObjectIndex",value:function(tile){var hoveredFeatureId=this.state.hoveredFeatureId,_this$props2=this.props,uniqueIdProperty=_this$props2.uniqueIdProperty;_this$props2=_this$props2.highlightedFeatureId;tile=tile.data;if(!isFeatureIdDefined(hoveredFeatureId)&&!isFeatureIdDefined(_this$props2)||!Array.isArray(tile))return-1;
var featureIdToHighlight=isFeatureIdDefined(_this$props2)?_this$props2:hoveredFeatureId;return tile.findIndex(function(feature){return(uniqueIdProperty?feature.properties[uniqueIdProperty]:"id"in feature?feature.id:-1)===featureIdToHighlight})}}]);return MVTLayer}(module["default"]);exports["default"]=require;require.layerName="MVTLayer";require.defaultProps={uniqueIdProperty:{type:"string",value:""},highlightedFeatureId:null}}
//# sourceMappingURL=module$node_modules$$deck_DOT_gl$geo_layers$dist$es5$mvt_layer$mvt_layer.js.map
