{
"version":3,
"file":"module$node_modules$$deck_DOT_gl$core$dist$es5$transitions$gpu_interpolation_transition.js",
"lineCount":9,
"mappings":"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",
"sources":["node_modules/@deck_DOT_gl/core/dist/es5/transitions/gpu-interpolation-transition.js"],
"sourcesContent":["shadow$provide[\"module$node_modules$$deck_DOT_gl$core$dist$es5$transitions$gpu_interpolation_transition\"] = function(global,require,module,exports) {\n\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\n\nvar _defineProperty2 = _interopRequireDefault(require(\"@babel/runtime/helpers/defineProperty\"));\n\nvar _classCallCheck2 = _interopRequireDefault(require(\"@babel/runtime/helpers/classCallCheck\"));\n\nvar _createClass2 = _interopRequireDefault(require(\"@babel/runtime/helpers/createClass\"));\n\nvar _core = require(\"@luma.gl/core\");\n\nvar _attribute = _interopRequireDefault(require(\"../lib/attribute/attribute\"));\n\nvar _attributeTransitionUtils = require(\"../lib/attribute/attribute-transition-utils\");\n\nvar _transition = _interopRequireDefault(require(\"./transition\"));\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { (0, _defineProperty2[\"default\"])(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nvar GPUInterpolationTransition = function () {\n  function GPUInterpolationTransition(_ref) {\n    var gl = _ref.gl,\n        attribute = _ref.attribute,\n        timeline = _ref.timeline;\n    (0, _classCallCheck2[\"default\"])(this, GPUInterpolationTransition);\n    this.gl = gl;\n    this.type = 'interpolation';\n    this.transition = new _transition[\"default\"](timeline);\n    this.attribute = attribute;\n    this.attributeInTransition = new _attribute[\"default\"](gl, attribute.settings);\n    this.currentStartIndices = attribute.startIndices;\n    this.currentLength = 0;\n    this.transform = getTransform(gl, attribute);\n    var bufferOpts = {\n      byteLength: 0,\n      usage: 35050\n    };\n    this.buffers = [new _core.Buffer(gl, bufferOpts), new _core.Buffer(gl, bufferOpts)];\n  }\n\n  (0, _createClass2[\"default\"])(GPUInterpolationTransition, [{\n    key: \"start\",\n    value: function start(transitionSettings, numInstances) {\n      if (transitionSettings.duration <= 0) {\n        this.transition.cancel();\n        return;\n      }\n\n      var gl = this.gl,\n          buffers = this.buffers,\n          attribute = this.attribute;\n      (0, _attributeTransitionUtils.cycleBuffers)(buffers);\n      var padBufferOpts = {\n        numInstances: numInstances,\n        attribute: attribute,\n        fromLength: this.currentLength,\n        fromStartIndices: this.currentStartIndices,\n        getData: transitionSettings.enter\n      };\n      var _iteratorNormalCompletion = true;\n      var _didIteratorError = false;\n      var _iteratorError = undefined;\n\n      try {\n        for (var _iterator = buffers[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n          var buffer = _step.value;\n          (0, _attributeTransitionUtils.padBuffer)(_objectSpread({\n            buffer: buffer\n          }, padBufferOpts));\n        }\n      } catch (err) {\n        _didIteratorError = true;\n        _iteratorError = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion && _iterator[\"return\"] != null) {\n            _iterator[\"return\"]();\n          }\n        } finally {\n          if (_didIteratorError) {\n            throw _iteratorError;\n          }\n        }\n      }\n\n      this.currentStartIndices = attribute.startIndices;\n      this.currentLength = (0, _attributeTransitionUtils.getAttributeBufferLength)(attribute, numInstances);\n      this.attributeInTransition.update({\n        buffer: buffers[1],\n        value: attribute.value\n      });\n      this.transition.start(transitionSettings);\n      this.transform.update({\n        elementCount: Math.floor(this.currentLength / attribute.size),\n        sourceBuffers: {\n          aFrom: buffers[0],\n          aTo: (0, _attributeTransitionUtils.getSourceBufferAttribute)(gl, attribute)\n        },\n        feedbackBuffers: {\n          vCurrent: buffers[1]\n        }\n      });\n    }\n  }, {\n    key: \"update\",\n    value: function update() {\n      var updated = this.transition.update();\n\n      if (updated) {\n        var _this$transition = this.transition,\n            time = _this$transition.time,\n            _this$transition$sett = _this$transition.settings,\n            duration = _this$transition$sett.duration,\n            easing = _this$transition$sett.easing;\n        var t = easing(time / duration);\n        this.transform.run({\n          uniforms: {\n            time: t\n          }\n        });\n      }\n\n      return updated;\n    }\n  }, {\n    key: \"cancel\",\n    value: function cancel() {\n      this.transition.cancel();\n      this.transform[\"delete\"]();\n\n      while (this.buffers.length) {\n        this.buffers.pop()[\"delete\"]();\n      }\n    }\n  }, {\n    key: \"inProgress\",\n    get: function get() {\n      return this.transition.inProgress;\n    }\n  }]);\n  return GPUInterpolationTransition;\n}();\n\nexports[\"default\"] = GPUInterpolationTransition;\nvar vs = \"\\n#define SHADER_NAME interpolation-transition-vertex-shader\\n\\nuniform float time;\\nattribute ATTRIBUTE_TYPE aFrom;\\nattribute ATTRIBUTE_TYPE aTo;\\nvarying ATTRIBUTE_TYPE vCurrent;\\n\\nvoid main(void) {\\n  vCurrent = mix(aFrom, aTo, time);\\n  gl_Position = vec4(0.0);\\n}\\n\";\n\nfunction getTransform(gl, attribute) {\n  var attributeType = (0, _attributeTransitionUtils.getAttributeTypeFromSize)(attribute.size);\n  return new _core.Transform(gl, {\n    vs: vs,\n    defines: {\n      ATTRIBUTE_TYPE: attributeType\n    },\n    varyings: ['vCurrent']\n  });\n}\n//# sourceMappingURL=gpu-interpolation-transition.js.map\n};"],
"names":["shadow$provide","global","require","module","exports","ownKeys","object","enumerableOnly","keys","Object","getOwnPropertySymbols","symbols","filter","sym","getOwnPropertyDescriptor","enumerable","push","apply","_objectSpread","target","i","arguments","length","source","forEach","key","_defineProperty2","getOwnPropertyDescriptors","defineProperties","defineProperty","_interopRequireDefault","value","_classCallCheck2","_createClass2","_core","_attribute","_attributeTransitionUtils","_transition","GPUInterpolationTransition","_ref","gl","attribute","timeline","type","transition","attributeInTransition","settings","currentStartIndices","startIndices","currentLength","attributeType","getAttributeTypeFromSize","size","transform","Transform","vs","defines","ATTRIBUTE_TYPE","varyings","bufferOpts","byteLength","usage","buffers","Buffer","start","transitionSettings","numInstances","duration","cancel","cycleBuffers","padBufferOpts","fromLength","fromStartIndices","getData","enter","_iteratorNormalCompletion","_didIteratorError","_iteratorError","undefined","_iterator","Symbol","iterator","_step","done","next","buffer","padBuffer","err","getAttributeBufferLength","update","elementCount","Math","floor","sourceBuffers","aFrom","aTo","getSourceBufferAttribute","feedbackBuffers","vCurrent","updated","_this$transition","_this$transition$sett","easing","t","time","run","uniforms","pop","get","inProgress"]
}
