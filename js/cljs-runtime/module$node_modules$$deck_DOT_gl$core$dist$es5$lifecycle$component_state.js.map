{
"version":3,
"file":"module$node_modules$$deck_DOT_gl$core$dist$es5$lifecycle$component_state.js",
"lineCount":15,
"mappings":"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",
"sources":["node_modules/@deck_DOT_gl/core/dist/es5/lifecycle/component-state.js"],
"sourcesContent":["shadow$provide[\"module$node_modules$$deck_DOT_gl$core$dist$es5$lifecycle$component_state\"] = function(global,require,module,exports) {\n\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\n\nvar _regenerator = _interopRequireDefault(require(\"@babel/runtime/regenerator\"));\n\nvar _asyncToGenerator2 = _interopRequireDefault(require(\"@babel/runtime/helpers/asyncToGenerator\"));\n\nvar _classCallCheck2 = _interopRequireDefault(require(\"@babel/runtime/helpers/classCallCheck\"));\n\nvar _createClass2 = _interopRequireDefault(require(\"@babel/runtime/helpers/createClass\"));\n\nvar _asyncIterator2 = _interopRequireDefault(require(\"@babel/runtime/helpers/asyncIterator\"));\n\nvar _log = _interopRequireDefault(require(\"../utils/log\"));\n\nvar _iterableUtils = require(\"../utils/iterable-utils\");\n\nvar _constants = require(\"./constants\");\n\nvar ASYNC_ORIGINAL = _constants.PROP_SYMBOLS.ASYNC_ORIGINAL,\n    ASYNC_RESOLVED = _constants.PROP_SYMBOLS.ASYNC_RESOLVED,\n    ASYNC_DEFAULTS = _constants.PROP_SYMBOLS.ASYNC_DEFAULTS;\nvar EMPTY_PROPS = Object.freeze({});\n\nvar ComponentState = function () {\n  function ComponentState() {\n    var component = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;\n    (0, _classCallCheck2[\"default\"])(this, ComponentState);\n    this.component = component;\n    this.asyncProps = {};\n\n    this.onAsyncPropUpdated = function () {};\n\n    this.oldProps = EMPTY_PROPS;\n    this.oldAsyncProps = null;\n  }\n\n  (0, _createClass2[\"default\"])(ComponentState, [{\n    key: \"getOldProps\",\n    value: function getOldProps() {\n      return this.oldAsyncProps || this.oldProps;\n    }\n  }, {\n    key: \"resetOldProps\",\n    value: function resetOldProps() {\n      this.oldAsyncProps = null;\n      this.oldProps = this.component.props;\n    }\n  }, {\n    key: \"freezeAsyncOldProps\",\n    value: function freezeAsyncOldProps() {\n      if (!this.oldAsyncProps) {\n        this.oldProps = this.oldProps || this.component.props;\n        this.oldAsyncProps = Object.create(this.oldProps);\n\n        for (var propName in this.asyncProps) {\n          Object.defineProperty(this.oldAsyncProps, propName, {\n            enumerable: true,\n            value: this.oldProps[propName]\n          });\n        }\n      }\n    }\n  }, {\n    key: \"hasAsyncProp\",\n    value: function hasAsyncProp(propName) {\n      return propName in this.asyncProps;\n    }\n  }, {\n    key: \"getAsyncProp\",\n    value: function getAsyncProp(propName) {\n      var asyncProp = this.asyncProps[propName];\n      return asyncProp && asyncProp.resolvedValue;\n    }\n  }, {\n    key: \"isAsyncPropLoading\",\n    value: function isAsyncPropLoading(propName) {\n      if (propName) {\n        var asyncProp = this.asyncProps[propName];\n        return Boolean(asyncProp && asyncProp.pendingLoadCount > 0 && asyncProp.pendingLoadCount !== asyncProp.resolvedLoadCount);\n      }\n\n      for (var key in this.asyncProps) {\n        if (this.isAsyncPropLoading(key)) {\n          return true;\n        }\n      }\n\n      return false;\n    }\n  }, {\n    key: \"reloadAsyncProp\",\n    value: function reloadAsyncProp(propName, value) {\n      this._watchPromise(propName, Promise.resolve(value));\n    }\n  }, {\n    key: \"setAsyncProps\",\n    value: function setAsyncProps(props) {\n      var resolvedValues = props[ASYNC_RESOLVED] || {};\n      var originalValues = props[ASYNC_ORIGINAL] || props;\n      var defaultValues = props[ASYNC_DEFAULTS] || {};\n\n      for (var propName in resolvedValues) {\n        var value = resolvedValues[propName];\n\n        this._createAsyncPropData(propName, value, defaultValues[propName]);\n\n        this._updateAsyncProp(propName, value);\n      }\n\n      for (var _propName in originalValues) {\n        var _value2 = originalValues[_propName];\n\n        this._createAsyncPropData(_propName, _value2, defaultValues[_propName]);\n\n        this._updateAsyncProp(_propName, _value2);\n      }\n    }\n  }, {\n    key: \"_updateAsyncProp\",\n    value: function _updateAsyncProp(propName, value) {\n      if (!this._didAsyncInputValueChange(propName, value)) {\n        return;\n      }\n\n      if (typeof value === 'string') {\n        var fetch = this.layer && this.layer.props.fetch;\n        var url = value;\n\n        if (fetch) {\n          value = fetch(url, {\n            propName: propName,\n            layer: this.layer\n          });\n        }\n      }\n\n      if (value instanceof Promise) {\n        this._watchPromise(propName, value);\n\n        return;\n      }\n\n      if ((0, _iterableUtils.isAsyncIterable)(value)) {\n        this._resolveAsyncIterable(propName, value);\n\n        return;\n      }\n\n      this._setPropValue(propName, value);\n    }\n  }, {\n    key: \"_didAsyncInputValueChange\",\n    value: function _didAsyncInputValueChange(propName, value) {\n      var asyncProp = this.asyncProps[propName];\n\n      if (value === asyncProp.lastValue) {\n        return false;\n      }\n\n      asyncProp.lastValue = value;\n      return true;\n    }\n  }, {\n    key: \"_setPropValue\",\n    value: function _setPropValue(propName, value) {\n      var asyncProp = this.asyncProps[propName];\n      asyncProp.value = value;\n      asyncProp.resolvedValue = value;\n      asyncProp.pendingLoadCount++;\n      asyncProp.resolvedLoadCount = asyncProp.pendingLoadCount;\n    }\n  }, {\n    key: \"_setAsyncPropValue\",\n    value: function _setAsyncPropValue(propName, value, loadCount) {\n      var asyncProp = this.asyncProps[propName];\n\n      if (asyncProp && loadCount >= asyncProp.resolvedLoadCount && value !== undefined) {\n        this.freezeAsyncOldProps();\n        asyncProp.resolvedValue = value;\n        asyncProp.resolvedLoadCount = loadCount;\n        this.onAsyncPropUpdated(propName, value);\n      }\n    }\n  }, {\n    key: \"_watchPromise\",\n    value: function _watchPromise(propName, promise) {\n      var _this = this;\n\n      var asyncProp = this.asyncProps[propName];\n      asyncProp.pendingLoadCount++;\n      var loadCount = asyncProp.pendingLoadCount;\n      promise.then(function (data) {\n        data = _this._postProcessValue(propName, data);\n\n        _this._setAsyncPropValue(propName, data, loadCount);\n\n        var onDataLoad = _this.layer && _this.layer.props.onDataLoad;\n\n        if (propName === 'data' && onDataLoad) {\n          onDataLoad(data, {\n            propName: propName,\n            layer: _this.layer\n          });\n        }\n      })[\"catch\"](function (error) {\n        return _log[\"default\"].error(error)();\n      });\n    }\n  }, {\n    key: \"_resolveAsyncIterable\",\n    value: function () {\n      var _resolveAsyncIterable2 = (0, _asyncToGenerator2[\"default\"])(_regenerator[\"default\"].mark(function _callee(propName, iterable) {\n        var asyncProp, loadCount, data, count, _iteratorNormalCompletion, _didIteratorError, _iteratorError, _iterator, _step, _value, chunk, onDataLoad;\n\n        return _regenerator[\"default\"].wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                if (propName !== 'data') {\n                  this._setPropValue(propName, iterable);\n                }\n\n                asyncProp = this.asyncProps[propName];\n                asyncProp.pendingLoadCount++;\n                loadCount = asyncProp.pendingLoadCount;\n                data = [];\n                count = 0;\n                _iteratorNormalCompletion = true;\n                _didIteratorError = false;\n                _context.prev = 8;\n                _iterator = (0, _asyncIterator2[\"default\"])(iterable);\n\n              case 10:\n                _context.next = 12;\n                return _iterator.next();\n\n              case 12:\n                _step = _context.sent;\n                _iteratorNormalCompletion = _step.done;\n                _context.next = 16;\n                return _step.value;\n\n              case 16:\n                _value = _context.sent;\n\n                if (_iteratorNormalCompletion) {\n                  _context.next = 26;\n                  break;\n                }\n\n                chunk = _value;\n                data = this._postProcessValue(propName, chunk, data);\n                Object.defineProperty(data, '__diff', {\n                  enumerable: false,\n                  value: [{\n                    startRow: count,\n                    endRow: data.length\n                  }]\n                });\n                count = data.length;\n\n                this._setAsyncPropValue(propName, data, loadCount);\n\n              case 23:\n                _iteratorNormalCompletion = true;\n                _context.next = 10;\n                break;\n\n              case 26:\n                _context.next = 32;\n                break;\n\n              case 28:\n                _context.prev = 28;\n                _context.t0 = _context[\"catch\"](8);\n                _didIteratorError = true;\n                _iteratorError = _context.t0;\n\n              case 32:\n                _context.prev = 32;\n                _context.prev = 33;\n\n                if (!(!_iteratorNormalCompletion && _iterator[\"return\"] != null)) {\n                  _context.next = 37;\n                  break;\n                }\n\n                _context.next = 37;\n                return _iterator[\"return\"]();\n\n              case 37:\n                _context.prev = 37;\n\n                if (!_didIteratorError) {\n                  _context.next = 40;\n                  break;\n                }\n\n                throw _iteratorError;\n\n              case 40:\n                return _context.finish(37);\n\n              case 41:\n                return _context.finish(32);\n\n              case 42:\n                onDataLoad = this.layer && this.layer.props.onDataLoad;\n\n                if (onDataLoad) {\n                  onDataLoad(data, {\n                    propName: propName,\n                    layer: this.layer\n                  });\n                }\n\n              case 44:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this, [[8, 28, 32, 42], [33,, 37, 41]]);\n      }));\n\n      function _resolveAsyncIterable(_x, _x2) {\n        return _resolveAsyncIterable2.apply(this, arguments);\n      }\n\n      return _resolveAsyncIterable;\n    }()\n  }, {\n    key: \"_postProcessValue\",\n    value: function _postProcessValue(propName, value, previousValue) {\n      var _ref = this.component ? this.component.props : {},\n          dataTransform = _ref.dataTransform;\n\n      if (propName !== 'data') {\n        return value;\n      }\n\n      if (dataTransform) {\n        return dataTransform(value, previousValue);\n      }\n\n      return previousValue ? previousValue.concat(value) : value;\n    }\n  }, {\n    key: \"_createAsyncPropData\",\n    value: function _createAsyncPropData(propName, value, defaultValue) {\n      var asyncProp = this.asyncProps[propName];\n\n      if (!asyncProp) {\n        this.asyncProps[propName] = {\n          lastValue: null,\n          resolvedValue: defaultValue,\n          pendingLoadCount: 0,\n          resolvedLoadCount: 0\n        };\n      }\n    }\n  }]);\n  return ComponentState;\n}();\n\nexports[\"default\"] = ComponentState;\n//# sourceMappingURL=component-state.js.map\n};"],
"names":["shadow$provide","global","require","module","exports","_interopRequireDefault","Object","defineProperty","value","_regenerator","_asyncToGenerator2","_classCallCheck2","_createClass2","_asyncIterator2","_log","_iterableUtils","_constants","ASYNC_ORIGINAL","PROP_SYMBOLS","ASYNC_RESOLVED","ASYNC_DEFAULTS","EMPTY_PROPS","freeze","ComponentState","component","arguments","length","undefined","asyncProps","onAsyncPropUpdated","this.onAsyncPropUpdated","oldProps","oldAsyncProps","key","getOldProps","resetOldProps","props","freezeAsyncOldProps","create","propName","enumerable","hasAsyncProp","getAsyncProp","asyncProp","resolvedValue","isAsyncPropLoading","pendingLoadCount","resolvedLoadCount","reloadAsyncProp","_watchPromise","Promise","resolve","setAsyncProps","resolvedValues","originalValues","defaultValues","_createAsyncPropData","_updateAsyncProp","_propName","_value2","_didAsyncInputValueChange","fetch","layer","url","isAsyncIterable","_resolveAsyncIterable","_setPropValue","lastValue","_setAsyncPropValue","loadCount","promise","_this","then","data","_postProcessValue","onDataLoad","error","_resolveAsyncIterable2","mark","_callee","iterable","count","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_iterator","_step","_value","chunk","wrap","_callee$","_context","prev","next","sent","done","startRow","endRow","t0","finish","stop","_x","_x2","apply","previousValue","dataTransform","_ref","concat","defaultValue"]
}
