shadow$provide.module$node_modules$$deck_DOT_gl$core$dist$es5$controllers$first_person_controller=function(global,require,module,exports){module=require("module$node_modules$$babel$runtime$helpers$interopRequireDefault");Object.defineProperty(exports,"__esModule",{value:!0});exports["default"]=void 0;var _classCallCheck2=module(require("module$node_modules$$babel$runtime$helpers$classCallCheck")),_createClass2=module(require("module$node_modules$$babel$runtime$helpers$createClass")),_possibleConstructorReturn2=
module(require("module$node_modules$$babel$runtime$helpers$possibleConstructorReturn")),_getPrototypeOf2=module(require("module$node_modules$$babel$runtime$helpers$getPrototypeOf")),_inherits2=module(require("module$node_modules$$babel$runtime$helpers$inherits"));global=module(require("module$node_modules$$deck_DOT_gl$core$dist$es5$controllers$controller"));module=module(require("module$node_modules$$deck_DOT_gl$core$dist$es5$controllers$view_state"));var _mathUtils=require("module$node_modules$$deck_DOT_gl$core$dist$es5$utils$math_utils"),
_math=require("module$node_modules$math_DOT_gl$dist$es5$index"),JSCompiler_object_inline_position_6622=[0,0,0],FirstPersonState=function(_ViewState){function FirstPersonState(_ref){var _this=_ref.width;var height=_ref.height,_ref$position=_ref.position;_ref$position=void 0===_ref$position?JSCompiler_object_inline_position_6622:_ref$position;var _ref$bearing=_ref.bearing;_ref$bearing=void 0===_ref$bearing?0:_ref$bearing;var _ref$pitch=_ref.pitch;_ref$pitch=void 0===_ref$pitch?0:_ref$pitch;var longitude=
_ref.longitude,latitude=_ref.latitude,_ref$maxPitch=_ref.maxPitch;_ref$maxPitch=void 0===_ref$maxPitch?90:_ref$maxPitch;var _ref$minPitch=_ref.minPitch,minPitch=void 0===_ref$minPitch?-90:_ref$minPitch;_ref$minPitch=_ref.startBearing;var startPitch=_ref.startPitch,startZoomPosition=_ref.startZoomPosition;_ref=_ref.startZoom;(0,_classCallCheck2["default"])(this,FirstPersonState);_this=(0,_possibleConstructorReturn2["default"])(this,(0,_getPrototypeOf2["default"])(FirstPersonState).call(this,{width:_this,
height:height,position:_ref$position,bearing:_ref$bearing,pitch:_ref$pitch,longitude:longitude,latitude:latitude,maxPitch:_ref$maxPitch,minPitch:minPitch}));_this._interactiveState={startBearing:_ref$minPitch,startPitch:startPitch,startZoomPosition:startZoomPosition,startZoom:_ref};return _this}(0,_inherits2["default"])(FirstPersonState,_ViewState);(0,_createClass2["default"])(FirstPersonState,[{key:"getInteractiveState",value:function(){return this._interactiveState}},{key:"getDirection",value:function(){return(new _math._SphericalCoordinates({bearing:this._viewportProps.bearing,
pitch:0<arguments.length&&void 0!==arguments[0]&&arguments[0]?90:90+this._viewportProps.pitch})).toVector3().normalize()}},{key:"panStart",value:function(){return this}},{key:"pan",value:function(){return this}},{key:"panEnd",value:function(){return this}},{key:"rotateStart",value:function(_ref2){return this._getUpdatedState({startBearing:this._viewportProps.bearing,startPitch:this._viewportProps.pitch})}},{key:"rotate",value:function(_ref3){var deltaScaleX=_ref3.deltaScaleX;_ref3=_ref3.deltaScaleY;
var _this$_interactiveSta=this._interactiveState,startBearing=_this$_interactiveSta.startBearing;_this$_interactiveSta=_this$_interactiveSta.startPitch;return Number.isFinite(startBearing)&&Number.isFinite(_this$_interactiveSta)?this._getUpdatedState({bearing:startBearing-180*deltaScaleX,pitch:_this$_interactiveSta-90*_ref3}):this}},{key:"rotateEnd",value:function(){return this._getUpdatedState({startBearing:null,startPitch:null})}},{key:"zoomStart",value:function(){return this._getUpdatedState({startZoomPosition:this._viewportProps.position,
startZoom:this._viewportProps.zoom})}},{key:"zoom",value:function(_ref4){_ref4=_ref4.scale;var startZoomPosition=this._interactiveState.startZoomPosition;startZoomPosition||(startZoomPosition=this._viewportProps.position);var direction=this.getDirection();return this._move(direction,Math.log2(_ref4),startZoomPosition)}},{key:"zoomEnd",value:function(){return this._getUpdatedState({startZoomPosition:null,startZoom:null})}},{key:"moveLeft",value:function(){var direction=this.getDirection(!0);return this._move(direction.rotateZ({radians:Math.PI/
2}))}},{key:"moveRight",value:function(){var direction=this.getDirection(!0);return this._move(direction.rotateZ({radians:-Math.PI/2}))}},{key:"moveUp",value:function(){var direction=this.getDirection(!0);return this._move(direction)}},{key:"moveDown",value:function(){var direction=this.getDirection(!0);return this._move(direction.negate())}},{key:"rotateLeft",value:function(){return this._getUpdatedState({bearing:this._viewportProps.bearing-15})}},{key:"rotateRight",value:function(){return this._getUpdatedState({bearing:this._viewportProps.bearing+
15})}},{key:"rotateUp",value:function(){return this._getUpdatedState({pitch:this._viewportProps.pitch+10})}},{key:"rotateDown",value:function(){return this._getUpdatedState({pitch:this._viewportProps.pitch-10})}},{key:"zoomIn",value:function(){return this.zoom({scale:2})}},{key:"zoomOut",value:function(){return this.zoom({scale:.5})}},{key:"shortestPathFrom",value:function(viewState){viewState=viewState.getViewportProps();var props=Object.assign({},this._viewportProps),bearing=props.bearing,longitude=
props.longitude;180<Math.abs(bearing-viewState.bearing)&&(props.bearing=0>bearing?bearing+360:bearing-360);180<Math.abs(longitude-viewState.longitude)&&(props.longitude=0>longitude?longitude+360:longitude-360);return props}},{key:"_move",value:function(direction){var fromPosition=2<arguments.length&&void 0!==arguments[2]?arguments[2]:this._viewportProps.position,delta=direction.scale(20*(1<arguments.length&&void 0!==arguments[1]?arguments[1]:1));return this._getUpdatedState({position:(new _math.Vector3(fromPosition)).add(delta)})}},
{key:"_getUpdatedState",value:function(newProps){return new FirstPersonState(Object.assign({},this._viewportProps,this._interactiveState,newProps))}},{key:"_applyConstraints",value:function(props){var pitch=props.pitch,maxPitch=props.maxPitch,minPitch=props.minPitch,longitude=props.longitude,bearing=props.bearing;props.pitch=(0,_math.clamp)(pitch,minPitch,maxPitch);if(-180>longitude||180<longitude)props.longitude=(0,_mathUtils.mod)(longitude+180,360)-180;if(-180>bearing||180<bearing)props.bearing=
(0,_mathUtils.mod)(bearing+180,360)-180;return props}}]);return FirstPersonState}(module["default"]);require=function(_Controller){function FirstPersonController(props){(0,_classCallCheck2["default"])(this,FirstPersonController);return(0,_possibleConstructorReturn2["default"])(this,(0,_getPrototypeOf2["default"])(FirstPersonController).call(this,FirstPersonState,props))}(0,_inherits2["default"])(FirstPersonController,_Controller);return FirstPersonController}(global["default"]);exports["default"]=
require}
//# sourceMappingURL=module$node_modules$$deck_DOT_gl$core$dist$es5$controllers$first_person_controller.js.map
