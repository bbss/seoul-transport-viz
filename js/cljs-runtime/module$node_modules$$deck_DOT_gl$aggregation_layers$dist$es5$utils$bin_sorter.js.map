{
"version":3,
"file":"module$node_modules$$deck_DOT_gl$aggregation_layers$dist$es5$utils$bin_sorter.js",
"lineCount":11,
"mappings":"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",
"sources":["node_modules/@deck_DOT_gl/aggregation-layers/dist/es5/utils/bin-sorter.js"],
"sourcesContent":["shadow$provide[\"module$node_modules$$deck_DOT_gl$aggregation_layers$dist$es5$utils$bin_sorter\"] = function(global,require,module,exports) {\n\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\n\nvar _slicedToArray2 = _interopRequireDefault(require(\"@babel/runtime/helpers/slicedToArray\"));\n\nvar _classCallCheck2 = _interopRequireDefault(require(\"@babel/runtime/helpers/classCallCheck\"));\n\nvar _createClass2 = _interopRequireDefault(require(\"@babel/runtime/helpers/createClass\"));\n\nvar _scaleUtils = require(\"./scale-utils\");\n\nvar defaultGetValue = function defaultGetValue(points) {\n  return points.length;\n};\n\nvar MAX_32_BIT_FLOAT = 3.402823466e38;\n\nvar defaultGetPoints = function defaultGetPoints(bin) {\n  return bin.points;\n};\n\nvar defaultGetIndex = function defaultGetIndex(bin) {\n  return bin.index;\n};\n\nvar ascending = function ascending(a, b) {\n  return a < b ? -1 : a > b ? 1 : a >= b ? 0 : NaN;\n};\n\nvar defaultProps = {\n  getValue: defaultGetValue,\n  getPoints: defaultGetPoints,\n  getIndex: defaultGetIndex,\n  filterData: null\n};\n\nvar BinSorter = function () {\n  function BinSorter() {\n    var bins = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n    var props = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : defaultProps;\n    (0, _classCallCheck2[\"default\"])(this, BinSorter);\n    this.aggregatedBins = this.getAggregatedBins(bins, props);\n\n    this._updateMinMaxValues();\n\n    this.binMap = this.getBinMap();\n  }\n\n  (0, _createClass2[\"default\"])(BinSorter, [{\n    key: \"getAggregatedBins\",\n    value: function getAggregatedBins(bins, props) {\n      var _props$getValue = props.getValue,\n          getValue = _props$getValue === void 0 ? defaultGetValue : _props$getValue,\n          _props$getPoints = props.getPoints,\n          getPoints = _props$getPoints === void 0 ? defaultGetPoints : _props$getPoints,\n          _props$getIndex = props.getIndex,\n          getIndex = _props$getIndex === void 0 ? defaultGetIndex : _props$getIndex,\n          filterData = props.filterData;\n      var hasFilter = typeof filterData === 'function';\n      var binCount = bins.length;\n      var aggregatedBins = [];\n      var index = 0;\n\n      for (var binIndex = 0; binIndex < binCount; binIndex++) {\n        var bin = bins[binIndex];\n        var points = getPoints(bin);\n        var i = getIndex(bin);\n        var filteredPoints = hasFilter ? points.filter(filterData) : points;\n        bin.filteredPoints = hasFilter ? filteredPoints : null;\n        var value = filteredPoints.length ? getValue(filteredPoints) : null;\n\n        if (value !== null && value !== undefined) {\n          aggregatedBins[index] = {\n            i: Number.isFinite(i) ? i : binIndex,\n            value: value,\n            counts: filteredPoints.length\n          };\n          index++;\n        }\n      }\n\n      return aggregatedBins;\n    }\n  }, {\n    key: \"_percentileToIndex\",\n    value: function _percentileToIndex(percentileRange) {\n      var len = this.sortedBins.length;\n\n      if (len < 2) {\n        return [0, 0];\n      }\n\n      var _percentileRange$map = percentileRange.map(function (n) {\n        return (0, _scaleUtils.clamp)(n, 0, 100);\n      }),\n          _percentileRange$map2 = (0, _slicedToArray2[\"default\"])(_percentileRange$map, 2),\n          lower = _percentileRange$map2[0],\n          upper = _percentileRange$map2[1];\n\n      var lowerIdx = Math.ceil(lower / 100 * (len - 1));\n      var upperIdx = Math.floor(upper / 100 * (len - 1));\n      return [lowerIdx, upperIdx];\n    }\n  }, {\n    key: \"getBinMap\",\n    value: function getBinMap() {\n      var binMap = {};\n      var _iteratorNormalCompletion = true;\n      var _didIteratorError = false;\n      var _iteratorError = undefined;\n\n      try {\n        for (var _iterator = this.aggregatedBins[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n          var bin = _step.value;\n          binMap[bin.i] = bin;\n        }\n      } catch (err) {\n        _didIteratorError = true;\n        _iteratorError = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion && _iterator[\"return\"] != null) {\n            _iterator[\"return\"]();\n          }\n        } finally {\n          if (_didIteratorError) {\n            throw _iteratorError;\n          }\n        }\n      }\n\n      return binMap;\n    }\n  }, {\n    key: \"_updateMinMaxValues\",\n    value: function _updateMinMaxValues() {\n      var maxCount = 0;\n      var maxValue = 0;\n      var minValue = MAX_32_BIT_FLOAT;\n      var totalCount = 0;\n      var _iteratorNormalCompletion2 = true;\n      var _didIteratorError2 = false;\n      var _iteratorError2 = undefined;\n\n      try {\n        for (var _iterator2 = this.aggregatedBins[Symbol.iterator](), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {\n          var x = _step2.value;\n          maxCount = maxCount > x.counts ? maxCount : x.counts;\n          maxValue = maxValue > x.value ? maxValue : x.value;\n          minValue = minValue < x.value ? minValue : x.value;\n          totalCount += x.counts;\n        }\n      } catch (err) {\n        _didIteratorError2 = true;\n        _iteratorError2 = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion2 && _iterator2[\"return\"] != null) {\n            _iterator2[\"return\"]();\n          }\n        } finally {\n          if (_didIteratorError2) {\n            throw _iteratorError2;\n          }\n        }\n      }\n\n      this.maxCount = maxCount;\n      this.maxValue = maxValue;\n      this.minValue = minValue;\n      this.totalCount = totalCount;\n    }\n  }, {\n    key: \"getValueRange\",\n    value: function getValueRange(percentileRange) {\n      if (!this.sortedBins) {\n        this.sortedBins = this.aggregatedBins.sort(function (a, b) {\n          return ascending(a.value, b.value);\n        });\n      }\n\n      if (!this.sortedBins.length) {\n        return [];\n      }\n\n      var lowerIdx = 0;\n      var upperIdx = this.sortedBins.length - 1;\n\n      if (Array.isArray(percentileRange)) {\n        var idxRange = this._percentileToIndex(percentileRange);\n\n        lowerIdx = idxRange[0];\n        upperIdx = idxRange[1];\n      }\n\n      return [this.sortedBins[lowerIdx].value, this.sortedBins[upperIdx].value];\n    }\n  }, {\n    key: \"getValueDomainByScale\",\n    value: function getValueDomainByScale(scale) {\n      var _ref = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [],\n          _ref2 = (0, _slicedToArray2[\"default\"])(_ref, 2),\n          _ref2$ = _ref2[0],\n          lower = _ref2$ === void 0 ? 0 : _ref2$,\n          _ref2$2 = _ref2[1],\n          upper = _ref2$2 === void 0 ? 100 : _ref2$2;\n\n      if (!this.sortedBins) {\n        this.sortedBins = this.aggregatedBins.sort(function (a, b) {\n          return ascending(a.value, b.value);\n        });\n      }\n\n      if (!this.sortedBins.length) {\n        return [];\n      }\n\n      var indexEdge = this._percentileToIndex([lower, upper]);\n\n      return this._getScaleDomain(scale, indexEdge);\n    }\n  }, {\n    key: \"_getScaleDomain\",\n    value: function _getScaleDomain(scaleType, _ref3) {\n      var _ref4 = (0, _slicedToArray2[\"default\"])(_ref3, 2),\n          lowerIdx = _ref4[0],\n          upperIdx = _ref4[1];\n\n      var bins = this.sortedBins;\n\n      switch (scaleType) {\n        case 'quantize':\n        case 'linear':\n          return [bins[lowerIdx].value, bins[upperIdx].value];\n\n        case 'quantile':\n          return (0, _scaleUtils.getQuantileDomain)(bins.slice(lowerIdx, upperIdx + 1), function (d) {\n            return d.value;\n          });\n\n        case 'ordinal':\n          return (0, _scaleUtils.getOrdinalDomain)(bins, function (d) {\n            return d.value;\n          });\n\n        default:\n          return [bins[lowerIdx].value, bins[upperIdx].value];\n      }\n    }\n  }]);\n  return BinSorter;\n}();\n\nexports[\"default\"] = BinSorter;\n//# sourceMappingURL=bin-sorter.js.map\n};"],
"names":["shadow$provide","global","require","module","exports","_interopRequireDefault","Object","defineProperty","value","_slicedToArray2","_classCallCheck2","_createClass2","_scaleUtils","defaultGetValue","points","length","defaultGetPoints","bin","defaultGetIndex","index","ascending","a","b","NaN","defaultProps","getValue","getPoints","getIndex","filterData","BinSorter","bins","arguments","undefined","props","aggregatedBins","getAggregatedBins","_updateMinMaxValues","binMap","getBinMap","key","_props$getValue","_props$getPoints","_props$getIndex","hasFilter","binCount","binIndex","i","filteredPoints","filter","Number","isFinite","counts","_percentileToIndex","percentileRange","len","sortedBins","_percentileRange$map","map","n","clamp","_percentileRange$map2","Math","ceil","lowerIdx","lower","floor","upperIdx","upper","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_iterator","Symbol","iterator","_step","done","next","err","maxCount","maxValue","minValue","MAX_32_BIT_FLOAT","totalCount","_iteratorNormalCompletion2","_didIteratorError2","_iteratorError2","_iterator2","_step2","x","getValueRange","sort","Array","isArray","idxRange","getValueDomainByScale","scale","_ref","_ref2","_ref2$","_ref2$2","indexEdge","_getScaleDomain","scaleType","_ref3","_ref4","getQuantileDomain","slice","d","getOrdinalDomain"]
}
