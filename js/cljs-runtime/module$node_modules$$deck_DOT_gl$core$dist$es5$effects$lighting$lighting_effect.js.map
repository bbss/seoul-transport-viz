{
"version":3,
"file":"module$node_modules$$deck_DOT_gl$core$dist$es5$effects$lighting$lighting_effect.js",
"lineCount":12,
"mappings":"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",
"sources":["node_modules/@deck_DOT_gl/core/dist/es5/effects/lighting/lighting-effect.js"],
"sourcesContent":["shadow$provide[\"module$node_modules$$deck_DOT_gl$core$dist$es5$effects$lighting$lighting_effect\"] = function(global,require,module,exports) {\n\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\n\nvar _classCallCheck2 = _interopRequireDefault(require(\"@babel/runtime/helpers/classCallCheck\"));\n\nvar _createClass2 = _interopRequireDefault(require(\"@babel/runtime/helpers/createClass\"));\n\nvar _possibleConstructorReturn2 = _interopRequireDefault(require(\"@babel/runtime/helpers/possibleConstructorReturn\"));\n\nvar _getPrototypeOf2 = _interopRequireDefault(require(\"@babel/runtime/helpers/getPrototypeOf\"));\n\nvar _inherits2 = _interopRequireDefault(require(\"@babel/runtime/helpers/inherits\"));\n\nvar _core = require(\"@luma.gl/core\");\n\nvar _ambientLight = require(\"./ambient-light\");\n\nvar _directionalLight = require(\"./directional-light\");\n\nvar _effect = _interopRequireDefault(require(\"../../lib/effect\"));\n\nvar _math = require(\"math.gl\");\n\nvar _shadowPass = _interopRequireDefault(require(\"../../passes/shadow-pass\"));\n\nvar _shadow = _interopRequireDefault(require(\"../../shaderlib/shadow/shadow\"));\n\nvar DEFAULT_AMBIENT_LIGHT_PROPS = {\n  color: [255, 255, 255],\n  intensity: 1.0\n};\nvar DEFAULT_DIRECTIONAL_LIGHT_PROPS = [{\n  color: [255, 255, 255],\n  intensity: 1.0,\n  direction: [-1, 3, -1]\n}, {\n  color: [255, 255, 255],\n  intensity: 0.9,\n  direction: [1, -8, -2.5]\n}];\nvar DEFAULT_SHADOW_COLOR = [0, 0, 0, 200 / 255];\n\nvar LightingEffect = function (_Effect) {\n  (0, _inherits2[\"default\"])(LightingEffect, _Effect);\n\n  function LightingEffect(props) {\n    var _this;\n\n    (0, _classCallCheck2[\"default\"])(this, LightingEffect);\n    _this = (0, _possibleConstructorReturn2[\"default\"])(this, (0, _getPrototypeOf2[\"default\"])(LightingEffect).call(this, props));\n    _this.ambientLight = null;\n    _this.directionalLights = [];\n    _this.pointLights = [];\n    _this.shadowColor = DEFAULT_SHADOW_COLOR;\n    _this.shadowPasses = [];\n    _this.shadowMaps = [];\n    _this.dummyShadowMap = null;\n    _this.shadow = false;\n    _this.programManager = null;\n\n    for (var key in props) {\n      var lightSource = props[key];\n\n      switch (lightSource.type) {\n        case 'ambient':\n          _this.ambientLight = lightSource;\n          break;\n\n        case 'directional':\n          _this.directionalLights.push(lightSource);\n\n          break;\n\n        case 'point':\n          _this.pointLights.push(lightSource);\n\n          break;\n\n        default:\n      }\n    }\n\n    _this._applyDefaultLights();\n\n    _this.shadow = _this.directionalLights.some(function (light) {\n      return light.shadow;\n    });\n    return _this;\n  }\n\n  (0, _createClass2[\"default\"])(LightingEffect, [{\n    key: \"preRender\",\n    value: function preRender(gl, _ref) {\n      var layers = _ref.layers,\n          layerFilter = _ref.layerFilter,\n          viewports = _ref.viewports,\n          onViewportActive = _ref.onViewportActive,\n          views = _ref.views;\n      if (!this.shadow) return;\n      this.shadowMatrices = this._createLightMatrix();\n\n      if (this.shadowPasses.length === 0) {\n        this._createShadowPasses(gl);\n      }\n\n      if (!this.programManager) {\n        this.programManager = _core.ProgramManager.getDefaultProgramManager(gl);\n\n        if (_shadow[\"default\"]) {\n          this.programManager.addDefaultModule(_shadow[\"default\"]);\n        }\n      }\n\n      if (!this.dummyShadowMap) {\n        this.dummyShadowMap = new _core.Texture2D(gl, {\n          width: 1,\n          height: 1\n        });\n      }\n\n      for (var i = 0; i < this.shadowPasses.length; i++) {\n        var shadowPass = this.shadowPasses[i];\n        shadowPass.render({\n          layers: layers,\n          layerFilter: layerFilter,\n          viewports: viewports,\n          onViewportActive: onViewportActive,\n          views: views,\n          moduleParameters: {\n            shadowLightId: i,\n            dummyShadowMap: this.dummyShadowMap,\n            shadowMatrices: this.shadowMatrices\n          }\n        });\n      }\n    }\n  }, {\n    key: \"getModuleParameters\",\n    value: function getModuleParameters(layer) {\n      var parameters = this.shadow ? {\n        shadowMaps: this.shadowMaps,\n        dummyShadowMap: this.dummyShadowMap,\n        shadowColor: this.shadowColor,\n        shadowMatrices: this.shadowMatrices\n      } : {};\n      parameters.lightSources = {\n        ambientLight: this.ambientLight,\n        directionalLights: this.directionalLights.map(function (directionalLight) {\n          return directionalLight.getProjectedLight({\n            layer: layer\n          });\n        }),\n        pointLights: this.pointLights.map(function (pointLight) {\n          return pointLight.getProjectedLight({\n            layer: layer\n          });\n        })\n      };\n      return parameters;\n    }\n  }, {\n    key: \"cleanup\",\n    value: function cleanup() {\n      var _iteratorNormalCompletion = true;\n      var _didIteratorError = false;\n      var _iteratorError = undefined;\n\n      try {\n        for (var _iterator = this.shadowPasses[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n          var shadowPass = _step.value;\n          shadowPass[\"delete\"]();\n        }\n      } catch (err) {\n        _didIteratorError = true;\n        _iteratorError = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion && _iterator[\"return\"] != null) {\n            _iterator[\"return\"]();\n          }\n        } finally {\n          if (_didIteratorError) {\n            throw _iteratorError;\n          }\n        }\n      }\n\n      this.shadowPasses.length = 0;\n      this.shadowMaps.length = 0;\n\n      if (this.dummyShadowMap) {\n        this.dummyShadowMap[\"delete\"]();\n        this.dummyShadowMap = null;\n      }\n\n      if (this.shadow && this.programManager) {\n        this.programManager.removeDefaultModule(_shadow[\"default\"]);\n        this.programManager = null;\n      }\n    }\n  }, {\n    key: \"_createLightMatrix\",\n    value: function _createLightMatrix() {\n      var lightMatrices = [];\n      var _iteratorNormalCompletion2 = true;\n      var _didIteratorError2 = false;\n      var _iteratorError2 = undefined;\n\n      try {\n        for (var _iterator2 = this.directionalLights[Symbol.iterator](), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {\n          var light = _step2.value;\n          var viewMatrix = new _math.Matrix4().lookAt({\n            eye: new _math.Vector3(light.direction).negate()\n          });\n          lightMatrices.push(viewMatrix);\n        }\n      } catch (err) {\n        _didIteratorError2 = true;\n        _iteratorError2 = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion2 && _iterator2[\"return\"] != null) {\n            _iterator2[\"return\"]();\n          }\n        } finally {\n          if (_didIteratorError2) {\n            throw _iteratorError2;\n          }\n        }\n      }\n\n      return lightMatrices;\n    }\n  }, {\n    key: \"_createShadowPasses\",\n    value: function _createShadowPasses(gl) {\n      for (var i = 0; i < this.directionalLights.length; i++) {\n        var shadowPass = new _shadowPass[\"default\"](gl);\n        this.shadowPasses[i] = shadowPass;\n        this.shadowMaps[i] = shadowPass.shadowMap;\n      }\n    }\n  }, {\n    key: \"_applyDefaultLights\",\n    value: function _applyDefaultLights() {\n      var ambientLight = this.ambientLight,\n          pointLights = this.pointLights,\n          directionalLights = this.directionalLights;\n\n      if (!ambientLight && pointLights.length === 0 && directionalLights.length === 0) {\n        this.ambientLight = new _ambientLight.AmbientLight(DEFAULT_AMBIENT_LIGHT_PROPS);\n        this.directionalLights.push(new _directionalLight.DirectionalLight(DEFAULT_DIRECTIONAL_LIGHT_PROPS[0]), new _directionalLight.DirectionalLight(DEFAULT_DIRECTIONAL_LIGHT_PROPS[1]));\n      }\n    }\n  }]);\n  return LightingEffect;\n}(_effect[\"default\"]);\n\nexports[\"default\"] = LightingEffect;\n//# sourceMappingURL=lighting-effect.js.map\n};"],
"names":["shadow$provide","global","require","module","exports","_interopRequireDefault","Object","defineProperty","value","_classCallCheck2","_createClass2","_possibleConstructorReturn2","_getPrototypeOf2","_inherits2","_core","_ambientLight","_directionalLight","_effect","_math","_shadowPass","_shadow","DEFAULT_AMBIENT_LIGHT_PROPS","color","intensity","DEFAULT_DIRECTIONAL_LIGHT_PROPS","direction","DEFAULT_SHADOW_COLOR","LightingEffect","_Effect","props","_this","call","ambientLight","directionalLights","pointLights","shadowColor","shadowPasses","shadowMaps","dummyShadowMap","shadow","programManager","key","lightSource","type","push","_applyDefaultLights","some","light","preRender","gl","_ref","layers","layerFilter","viewports","onViewportActive","views","shadowMatrices","i","_createLightMatrix","length","_createShadowPasses","ProgramManager","getDefaultProgramManager","addDefaultModule","Texture2D","width","height","shadowPass","render","moduleParameters","shadowLightId","getModuleParameters","layer","parameters","lightSources","map","directionalLight","getProjectedLight","pointLight","cleanup","_iteratorNormalCompletion","_didIteratorError","_iteratorError","undefined","_iterator","Symbol","iterator","_step","done","next","err","removeDefaultModule","lightMatrices","_iteratorNormalCompletion2","_didIteratorError2","_iteratorError2","_iterator2","_step2","viewMatrix","lookAt","Matrix4","eye","negate","Vector3","shadowMap","AmbientLight","DirectionalLight"]
}
