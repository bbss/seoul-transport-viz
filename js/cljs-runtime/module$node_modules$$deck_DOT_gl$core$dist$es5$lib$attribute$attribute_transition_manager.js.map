{
"version":3,
"file":"module$node_modules$$deck_DOT_gl$core$dist$es5$lib$attribute$attribute_transition_manager.js",
"lineCount":8,
"mappings":"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",
"sources":["node_modules/@deck_DOT_gl/core/dist/es5/lib/attribute/attribute-transition-manager.js"],
"sourcesContent":["shadow$provide[\"module$node_modules$$deck_DOT_gl$core$dist$es5$lib$attribute$attribute_transition_manager\"] = function(global,require,module,exports) {\n\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\n\nvar _classCallCheck2 = _interopRequireDefault(require(\"@babel/runtime/helpers/classCallCheck\"));\n\nvar _createClass2 = _interopRequireDefault(require(\"@babel/runtime/helpers/createClass\"));\n\nvar _core = require(\"@luma.gl/core\");\n\nvar _gpuInterpolationTransition = _interopRequireDefault(require(\"../../transitions/gpu-interpolation-transition\"));\n\nvar _gpuSpringTransition = _interopRequireDefault(require(\"../../transitions/gpu-spring-transition\"));\n\nvar _log = _interopRequireDefault(require(\"../../utils/log\"));\n\nvar TRANSITION_TYPES = {\n  interpolation: _gpuInterpolationTransition[\"default\"],\n  spring: _gpuSpringTransition[\"default\"]\n};\n\nvar AttributeTransitionManager = function () {\n  function AttributeTransitionManager(gl, _ref) {\n    var id = _ref.id,\n        timeline = _ref.timeline;\n    (0, _classCallCheck2[\"default\"])(this, AttributeTransitionManager);\n    this.id = id;\n    this.gl = gl;\n    this.timeline = timeline;\n    this.transitions = {};\n    this.needsRedraw = false;\n    this.numInstances = 1;\n\n    if (_core.Transform.isSupported(gl)) {\n      this.isSupported = true;\n    } else if (gl) {\n      _log[\"default\"].warn('WebGL2 not supported by this browser. Transition animation is disabled.')();\n    }\n  }\n\n  (0, _createClass2[\"default\"])(AttributeTransitionManager, [{\n    key: \"finalize\",\n    value: function finalize() {\n      for (var attributeName in this.transitions) {\n        this._removeTransition(attributeName);\n      }\n    }\n  }, {\n    key: \"update\",\n    value: function update(_ref2) {\n      var attributes = _ref2.attributes,\n          _ref2$transitions = _ref2.transitions,\n          transitions = _ref2$transitions === void 0 ? {} : _ref2$transitions,\n          numInstances = _ref2.numInstances;\n      this.numInstances = numInstances || 1;\n\n      if (!this.isSupported) {\n        return;\n      }\n\n      for (var attributeName in attributes) {\n        var attribute = attributes[attributeName];\n        var settings = attribute.getTransitionSetting(transitions);\n        if (!settings) continue;\n\n        this._updateAttribute(attributeName, attribute, settings);\n      }\n\n      for (var _attributeName in this.transitions) {\n        var _attribute = attributes[_attributeName];\n\n        if (!_attribute || !_attribute.getTransitionSetting(transitions)) {\n          this._removeTransition(_attributeName);\n        }\n      }\n    }\n  }, {\n    key: \"hasAttribute\",\n    value: function hasAttribute(attributeName) {\n      var transition = this.transitions[attributeName];\n      return transition && transition.inProgress;\n    }\n  }, {\n    key: \"getAttributes\",\n    value: function getAttributes() {\n      var animatedAttributes = {};\n\n      for (var attributeName in this.transitions) {\n        var transition = this.transitions[attributeName];\n\n        if (transition.inProgress) {\n          animatedAttributes[attributeName] = transition.attributeInTransition;\n        }\n      }\n\n      return animatedAttributes;\n    }\n  }, {\n    key: \"run\",\n    value: function run() {\n      if (!this.isSupported || this.numInstances === 0) {\n        return false;\n      }\n\n      for (var attributeName in this.transitions) {\n        var updated = this.transitions[attributeName].update();\n\n        if (updated) {\n          this.needsRedraw = true;\n        }\n      }\n\n      var needsRedraw = this.needsRedraw;\n      this.needsRedraw = false;\n      return needsRedraw;\n    }\n  }, {\n    key: \"_removeTransition\",\n    value: function _removeTransition(attributeName) {\n      this.transitions[attributeName].cancel();\n      delete this.transitions[attributeName];\n    }\n  }, {\n    key: \"_updateAttribute\",\n    value: function _updateAttribute(attributeName, attribute, settings) {\n      var transition = this.transitions[attributeName];\n      var isNew = !transition || transition.type !== settings.type;\n\n      if (isNew) {\n        if (transition) {\n          this._removeTransition(attributeName);\n        }\n\n        var TransitionType = TRANSITION_TYPES[settings.type];\n\n        if (TransitionType) {\n          this.transitions[attributeName] = new TransitionType({\n            attribute: attribute,\n            timeline: this.timeline,\n            gl: this.gl\n          });\n        } else {\n          _log[\"default\"].error(\"unsupported transition type '\".concat(settings.type, \"'\"))();\n\n          isNew = false;\n        }\n      }\n\n      if (isNew || attribute.needsRedraw()) {\n        this.needsRedraw = true;\n        this.transitions[attributeName].start(settings, this.numInstances);\n      }\n    }\n  }]);\n  return AttributeTransitionManager;\n}();\n\nexports[\"default\"] = AttributeTransitionManager;\n//# sourceMappingURL=attribute-transition-manager.js.map\n};"],
"names":["shadow$provide","global","require","module","exports","_interopRequireDefault","Object","defineProperty","value","_classCallCheck2","_createClass2","_core","_gpuInterpolationTransition","_gpuSpringTransition","_log","TRANSITION_TYPES","interpolation","spring","AttributeTransitionManager","gl","_ref","id","timeline","transitions","needsRedraw","numInstances","Transform","isSupported","warn","key","finalize","attributeName","_removeTransition","update","_ref2","attributes","_ref2$transitions","attribute","settings","getTransitionSetting","_updateAttribute","_attributeName","_attribute","hasAttribute","transition","inProgress","getAttributes","animatedAttributes","attributeInTransition","run","updated","cancel","isNew","type","TransitionType","error","concat","start"]
}
