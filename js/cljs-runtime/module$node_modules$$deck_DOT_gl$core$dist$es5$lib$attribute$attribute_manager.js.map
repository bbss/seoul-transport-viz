{
"version":3,
"file":"module$node_modules$$deck_DOT_gl$core$dist$es5$lib$attribute$attribute_manager.js",
"lineCount":15,
"mappings":"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",
"sources":["node_modules/@deck_DOT_gl/core/dist/es5/lib/attribute/attribute-manager.js"],
"sourcesContent":["shadow$provide[\"module$node_modules$$deck_DOT_gl$core$dist$es5$lib$attribute$attribute_manager\"] = function(global,require,module,exports) {\n\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\n\nvar _classCallCheck2 = _interopRequireDefault(require(\"@babel/runtime/helpers/classCallCheck\"));\n\nvar _createClass2 = _interopRequireDefault(require(\"@babel/runtime/helpers/createClass\"));\n\nvar _attribute = _interopRequireDefault(require(\"./attribute\"));\n\nvar _log = _interopRequireDefault(require(\"../../utils/log\"));\n\nvar _debug = _interopRequireDefault(require(\"../../debug\"));\n\nvar _attributeTransitionManager = _interopRequireDefault(require(\"./attribute-transition-manager\"));\n\nvar TRACE_INVALIDATE = 'attributeManager.invalidate';\nvar TRACE_UPDATE_START = 'attributeManager.updateStart';\nvar TRACE_UPDATE_END = 'attributeManager.updateEnd';\nvar TRACE_ATTRIBUTE_UPDATE_START = 'attribute.updateStart';\nvar TRACE_ATTRIBUTE_ALLOCATE = 'attribute.allocate';\nvar TRACE_ATTRIBUTE_UPDATE_END = 'attribute.updateEnd';\n\nvar AttributeManager = function () {\n  function AttributeManager(gl) {\n    var _ref = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},\n        _ref$id = _ref.id,\n        id = _ref$id === void 0 ? 'attribute-manager' : _ref$id,\n        stats = _ref.stats,\n        timeline = _ref.timeline;\n\n    (0, _classCallCheck2[\"default\"])(this, AttributeManager);\n    this.id = id;\n    this.gl = gl;\n    this.attributes = {};\n    this.updateTriggers = {};\n    this.accessors = {};\n    this.needsRedraw = true;\n    this.userData = {};\n    this.stats = stats;\n    this.attributeTransitionManager = new _attributeTransitionManager[\"default\"](gl, {\n      id: \"\".concat(id, \"-transitions\"),\n      timeline: timeline\n    });\n    Object.seal(this);\n  }\n\n  (0, _createClass2[\"default\"])(AttributeManager, [{\n    key: \"finalize\",\n    value: function finalize() {\n      for (var attributeName in this.attributes) {\n        this.attributes[attributeName][\"delete\"]();\n      }\n\n      this.attributeTransitionManager.finalize();\n    }\n  }, {\n    key: \"getNeedsRedraw\",\n    value: function getNeedsRedraw() {\n      var opts = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {\n        clearRedrawFlags: false\n      };\n      var redraw = this.needsRedraw;\n      this.needsRedraw = this.needsRedraw && !opts.clearRedrawFlags;\n      return redraw && this.id;\n    }\n  }, {\n    key: \"setNeedsRedraw\",\n    value: function setNeedsRedraw() {\n      var redraw = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : true;\n      this.needsRedraw = true;\n      return this;\n    }\n  }, {\n    key: \"add\",\n    value: function add(attributes, updaters) {\n      this._add(attributes, updaters);\n    }\n  }, {\n    key: \"addInstanced\",\n    value: function addInstanced(attributes, updaters) {\n      this._add(attributes, updaters, {\n        instanced: 1\n      });\n    }\n  }, {\n    key: \"remove\",\n    value: function remove(attributeNameArray) {\n      for (var i = 0; i < attributeNameArray.length; i++) {\n        var name = attributeNameArray[i];\n\n        if (this.attributes[name] !== undefined) {\n          this.attributes[name][\"delete\"]();\n          delete this.attributes[name];\n        }\n      }\n    }\n  }, {\n    key: \"invalidate\",\n    value: function invalidate(triggerName, dataRange) {\n      var invalidatedAttributes = this._invalidateTrigger(triggerName, dataRange);\n\n      (0, _debug[\"default\"])(TRACE_INVALIDATE, this, triggerName, invalidatedAttributes);\n    }\n  }, {\n    key: \"invalidateAll\",\n    value: function invalidateAll(dataRange) {\n      for (var attributeName in this.attributes) {\n        this.attributes[attributeName].setNeedsUpdate(attributeName, dataRange);\n      }\n\n      (0, _debug[\"default\"])(TRACE_INVALIDATE, this, 'all');\n    }\n  }, {\n    key: \"update\",\n    value: function update() {\n      var _ref2 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n          data = _ref2.data,\n          numInstances = _ref2.numInstances,\n          _ref2$startIndices = _ref2.startIndices,\n          startIndices = _ref2$startIndices === void 0 ? null : _ref2$startIndices,\n          transitions = _ref2.transitions,\n          _ref2$props = _ref2.props,\n          props = _ref2$props === void 0 ? {} : _ref2$props,\n          _ref2$buffers = _ref2.buffers,\n          buffers = _ref2$buffers === void 0 ? {} : _ref2$buffers,\n          _ref2$context = _ref2.context,\n          context = _ref2$context === void 0 ? {} : _ref2$context;\n\n      var updated = false;\n      (0, _debug[\"default\"])(TRACE_UPDATE_START, this);\n\n      if (this.stats) {\n        this.stats.get('Update Attributes').timeStart();\n      }\n\n      for (var attributeName in this.attributes) {\n        var attribute = this.attributes[attributeName];\n        var accessorName = attribute.settings.accessor;\n        attribute.startIndices = startIndices;\n\n        if (props[attributeName]) {\n          _log[\"default\"].removed(\"props.\".concat(attributeName), \"data.attributes.\".concat(attributeName))();\n        }\n\n        if (attribute.setExternalBuffer(buffers[attributeName])) {} else if (attribute.setBinaryValue(buffers[accessorName], data.startIndices)) {} else if (!buffers[accessorName] && attribute.setConstantValue(props[accessorName])) {} else if (attribute.needsUpdate()) {\n          updated = true;\n\n          this._updateAttribute({\n            attribute: attribute,\n            numInstances: numInstances,\n            data: data,\n            props: props,\n            context: context\n          });\n        }\n\n        this.needsRedraw |= attribute.needsRedraw();\n      }\n\n      if (updated) {\n        (0, _debug[\"default\"])(TRACE_UPDATE_END, this, numInstances);\n      }\n\n      if (this.stats) {\n        this.stats.get('Update Attributes').timeEnd();\n      }\n\n      this.attributeTransitionManager.update({\n        attributes: this.attributes,\n        numInstances: numInstances,\n        transitions: transitions\n      });\n    }\n  }, {\n    key: \"updateTransition\",\n    value: function updateTransition() {\n      var attributeTransitionManager = this.attributeTransitionManager;\n      var transitionUpdated = attributeTransitionManager.run();\n      this.needsRedraw = this.needsRedraw || transitionUpdated;\n      return transitionUpdated;\n    }\n  }, {\n    key: \"getAttributes\",\n    value: function getAttributes() {\n      return this.attributes;\n    }\n  }, {\n    key: \"getChangedAttributes\",\n    value: function getChangedAttributes() {\n      var opts = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {\n        clearChangedFlags: false\n      };\n      var attributes = this.attributes,\n          attributeTransitionManager = this.attributeTransitionManager;\n      var changedAttributes = Object.assign({}, attributeTransitionManager.getAttributes());\n\n      for (var attributeName in attributes) {\n        var attribute = attributes[attributeName];\n\n        if (attribute.needsRedraw(opts) && !attributeTransitionManager.hasAttribute(attributeName)) {\n          changedAttributes[attributeName] = attribute;\n        }\n      }\n\n      return changedAttributes;\n    }\n  }, {\n    key: \"getShaderAttributes\",\n    value: function getShaderAttributes(attributes) {\n      var excludeAttributes = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n      if (!attributes) {\n        attributes = this.getAttributes();\n      }\n\n      var shaderAttributes = {};\n\n      for (var attributeName in attributes) {\n        if (!excludeAttributes[attributeName]) {\n          Object.assign(shaderAttributes, attributes[attributeName].getShaderAttributes());\n        }\n      }\n\n      return shaderAttributes;\n    }\n  }, {\n    key: \"getAccessors\",\n    value: function getAccessors() {\n      return this.updateTriggers;\n    }\n  }, {\n    key: \"_add\",\n    value: function _add(attributes, updaters) {\n      var extraProps = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n\n      if (updaters) {\n        _log[\"default\"].warn('AttributeManager.add({updaters}) - updater map no longer supported')();\n      }\n\n      var newAttributes = {};\n\n      for (var attributeName in attributes) {\n        var attribute = attributes[attributeName];\n\n        var newAttribute = this._createAttribute(attributeName, attribute, extraProps);\n\n        newAttributes[attributeName] = newAttribute;\n      }\n\n      Object.assign(this.attributes, newAttributes);\n\n      this._mapUpdateTriggersToAttributes();\n    }\n  }, {\n    key: \"_createAttribute\",\n    value: function _createAttribute(name, attribute, extraProps) {\n      var props = {\n        id: name,\n        constant: attribute.constant || false,\n        isIndexed: attribute.isIndexed || attribute.elements,\n        size: attribute.elements && 1 || attribute.size,\n        value: attribute.value || null,\n        divisor: attribute.instanced || extraProps.instanced ? 1 : attribute.divisor\n      };\n      return new _attribute[\"default\"](this.gl, Object.assign({}, attribute, props));\n    }\n  }, {\n    key: \"_mapUpdateTriggersToAttributes\",\n    value: function _mapUpdateTriggersToAttributes() {\n      var _this = this;\n\n      var triggers = {};\n\n      var _loop = function _loop(attributeName) {\n        var attribute = _this.attributes[attributeName];\n        attribute.getUpdateTriggers().forEach(function (triggerName) {\n          if (!triggers[triggerName]) {\n            triggers[triggerName] = [];\n          }\n\n          triggers[triggerName].push(attributeName);\n        });\n      };\n\n      for (var attributeName in this.attributes) {\n        _loop(attributeName);\n      }\n\n      this.updateTriggers = triggers;\n    }\n  }, {\n    key: \"_invalidateTrigger\",\n    value: function _invalidateTrigger(triggerName, dataRange) {\n      var attributes = this.attributes,\n          updateTriggers = this.updateTriggers;\n      var invalidatedAttributes = updateTriggers[triggerName];\n\n      if (invalidatedAttributes) {\n        invalidatedAttributes.forEach(function (name) {\n          var attribute = attributes[name];\n\n          if (attribute) {\n            attribute.setNeedsUpdate(attribute.id, dataRange);\n          }\n        });\n      }\n\n      return invalidatedAttributes;\n    }\n  }, {\n    key: \"_updateAttribute\",\n    value: function _updateAttribute(opts) {\n      var attribute = opts.attribute,\n          numInstances = opts.numInstances;\n      (0, _debug[\"default\"])(TRACE_ATTRIBUTE_UPDATE_START, attribute);\n\n      if (attribute.allocate(numInstances)) {\n        (0, _debug[\"default\"])(TRACE_ATTRIBUTE_ALLOCATE, attribute, numInstances);\n      }\n\n      var updated = attribute.updateBuffer(opts);\n\n      if (updated) {\n        this.needsRedraw = true;\n        (0, _debug[\"default\"])(TRACE_ATTRIBUTE_UPDATE_END, attribute, numInstances);\n      }\n    }\n  }]);\n  return AttributeManager;\n}();\n\nexports[\"default\"] = AttributeManager;\n//# sourceMappingURL=attribute-manager.js.map\n};"],
"names":["shadow$provide","global","require","module","exports","_interopRequireDefault","Object","defineProperty","value","_classCallCheck2","_createClass2","_attribute","_log","_debug","_attributeTransitionManager","AttributeManager","gl","_ref","arguments","length","undefined","_ref$id","id","stats","timeline","attributes","updateTriggers","accessors","needsRedraw","userData","attributeTransitionManager","concat","seal","key","finalize","attributeName","getNeedsRedraw","opts","clearRedrawFlags","redraw","setNeedsRedraw","add","updaters","_add","addInstanced","instanced","remove","attributeNameArray","i","name","invalidate","triggerName","dataRange","invalidatedAttributes","_invalidateTrigger","TRACE_INVALIDATE","invalidateAll","setNeedsUpdate","update","_ref2","data","numInstances","_ref2$startIndices","startIndices","transitions","_ref2$props","props","_ref2$buffers","buffers","_ref2$context","context","updated","TRACE_UPDATE_START","get","timeStart","attribute","accessorName","settings","accessor","removed","setExternalBuffer","setBinaryValue","setConstantValue","needsUpdate","_updateAttribute","TRACE_UPDATE_END","timeEnd","updateTransition","transitionUpdated","run","getAttributes","getChangedAttributes","clearChangedFlags","changedAttributes","assign","hasAttribute","getShaderAttributes","excludeAttributes","shaderAttributes","getAccessors","extraProps","warn","newAttributes","newAttribute","_createAttribute","_mapUpdateTriggersToAttributes","constant","isIndexed","elements","size","divisor","_this","triggers","_loop","getUpdateTriggers","forEach","push","TRACE_ATTRIBUTE_UPDATE_START","allocate","TRACE_ATTRIBUTE_ALLOCATE","updateBuffer","TRACE_ATTRIBUTE_UPDATE_END"]
}
