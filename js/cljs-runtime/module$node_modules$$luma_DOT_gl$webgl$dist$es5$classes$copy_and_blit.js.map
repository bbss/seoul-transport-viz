{
"version":3,
"file":"module$node_modules$$luma_DOT_gl$webgl$dist$es5$classes$copy_and_blit.js",
"lineCount":21,
"mappings":"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",
"sources":["node_modules/@luma_DOT_gl/webgl/dist/es5/classes/copy-and-blit.js"],
"sourcesContent":["shadow$provide[\"module$node_modules$$luma_DOT_gl$webgl$dist$es5$classes$copy_and_blit\"] = function(global,require,module,exports) {\n\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.readPixelsToArray = readPixelsToArray;\nexports.readPixelsToBuffer = readPixelsToBuffer;\nexports.copyToDataUrl = copyToDataUrl;\nexports.copyToImage = copyToImage;\nexports.copyToTexture = copyToTexture;\nexports.blit = blit;\n\nvar _buffer = _interopRequireDefault(require(\"./buffer\"));\n\nvar _framebuffer = _interopRequireDefault(require(\"./framebuffer\"));\n\nvar _texture = _interopRequireDefault(require(\"./texture\"));\n\nvar _gltools = require(\"@luma.gl/gltools\");\n\nvar _webglUtils = require(\"../webgl-utils\");\n\nvar _typedArrayUtils = require(\"../webgl-utils/typed-array-utils\");\n\nvar _formatUtils = require(\"../webgl-utils/format-utils\");\n\nvar _textureUtils = require(\"../webgl-utils/texture-utils\");\n\nvar _utils = require(\"../utils\");\n\nfunction readPixelsToArray(source) {\n  var _ref = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},\n      _ref$sourceX = _ref.sourceX,\n      sourceX = _ref$sourceX === void 0 ? 0 : _ref$sourceX,\n      _ref$sourceY = _ref.sourceY,\n      sourceY = _ref$sourceY === void 0 ? 0 : _ref$sourceY,\n      _ref$sourceFormat = _ref.sourceFormat,\n      sourceFormat = _ref$sourceFormat === void 0 ? 6408 : _ref$sourceFormat,\n      _ref$sourceAttachment = _ref.sourceAttachment,\n      sourceAttachment = _ref$sourceAttachment === void 0 ? 36064 : _ref$sourceAttachment,\n      _ref$target = _ref.target,\n      target = _ref$target === void 0 ? null : _ref$target,\n      sourceWidth = _ref.sourceWidth,\n      sourceHeight = _ref.sourceHeight,\n      sourceType = _ref.sourceType;\n\n  var _getFramebuffer = getFramebuffer(source),\n      framebuffer = _getFramebuffer.framebuffer,\n      deleteFramebuffer = _getFramebuffer.deleteFramebuffer;\n\n  (0, _utils.assert)(framebuffer);\n  var gl = framebuffer.gl,\n      handle = framebuffer.handle,\n      attachments = framebuffer.attachments;\n  sourceWidth = sourceWidth || framebuffer.width;\n  sourceHeight = sourceHeight || framebuffer.height;\n\n  if (sourceAttachment === 36064 && handle === null) {\n    sourceAttachment = 1028;\n  }\n\n  (0, _utils.assert)(attachments[sourceAttachment]);\n  sourceType = sourceType || attachments[sourceAttachment].type;\n  target = getPixelArray(target, sourceType, sourceFormat, sourceWidth, sourceHeight);\n  sourceType = sourceType || (0, _typedArrayUtils.getGLTypeFromTypedArray)(target);\n  var prevHandle = gl.bindFramebuffer(36160, handle);\n  gl.readPixels(sourceX, sourceY, sourceWidth, sourceHeight, sourceFormat, sourceType, target);\n  gl.bindFramebuffer(36160, prevHandle || null);\n\n  if (deleteFramebuffer) {\n    framebuffer[\"delete\"]();\n  }\n\n  return target;\n}\n\nfunction readPixelsToBuffer(source, _ref2) {\n  var _ref2$sourceX = _ref2.sourceX,\n      sourceX = _ref2$sourceX === void 0 ? 0 : _ref2$sourceX,\n      _ref2$sourceY = _ref2.sourceY,\n      sourceY = _ref2$sourceY === void 0 ? 0 : _ref2$sourceY,\n      _ref2$sourceFormat = _ref2.sourceFormat,\n      sourceFormat = _ref2$sourceFormat === void 0 ? 6408 : _ref2$sourceFormat,\n      _ref2$target = _ref2.target,\n      target = _ref2$target === void 0 ? null : _ref2$target,\n      _ref2$targetByteOffse = _ref2.targetByteOffset,\n      targetByteOffset = _ref2$targetByteOffse === void 0 ? 0 : _ref2$targetByteOffse,\n      sourceWidth = _ref2.sourceWidth,\n      sourceHeight = _ref2.sourceHeight,\n      sourceType = _ref2.sourceType;\n\n  var _getFramebuffer2 = getFramebuffer(source),\n      framebuffer = _getFramebuffer2.framebuffer,\n      deleteFramebuffer = _getFramebuffer2.deleteFramebuffer;\n\n  (0, _utils.assert)(framebuffer);\n  var gl = framebuffer.gl;\n  sourceWidth = sourceWidth || framebuffer.width;\n  sourceHeight = sourceHeight || framebuffer.height;\n  (0, _webglUtils.assertWebGL2Context)(gl);\n  sourceType = sourceType || (target ? target.type : 5121);\n\n  if (!target) {\n    var components = (0, _formatUtils.glFormatToComponents)(sourceFormat);\n    var byteCount = (0, _formatUtils.glTypeToBytes)(sourceType);\n    var byteLength = targetByteOffset + sourceWidth * sourceHeight * components * byteCount;\n    target = new _buffer[\"default\"](gl, {\n      byteLength: byteLength,\n      accessor: {\n        type: sourceType,\n        size: components\n      }\n    });\n  }\n\n  target.bind({\n    target: 35051\n  });\n  (0, _gltools.withParameters)(gl, {\n    framebuffer: framebuffer\n  }, function () {\n    gl.readPixels(sourceX, sourceY, sourceWidth, sourceHeight, sourceFormat, sourceType, targetByteOffset);\n  });\n  target.unbind({\n    target: 35051\n  });\n\n  if (deleteFramebuffer) {\n    framebuffer[\"delete\"]();\n  }\n\n  return target;\n}\n\nfunction copyToDataUrl(source) {\n  var _ref3 = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},\n      _ref3$sourceAttachmen = _ref3.sourceAttachment,\n      sourceAttachment = _ref3$sourceAttachmen === void 0 ? 36064 : _ref3$sourceAttachmen,\n      _ref3$targetMaxHeight = _ref3.targetMaxHeight,\n      targetMaxHeight = _ref3$targetMaxHeight === void 0 ? Number.MAX_SAFE_INTEGER : _ref3$targetMaxHeight;\n\n  var data = readPixelsToArray(source, {\n    sourceAttachment: sourceAttachment\n  });\n  var width = source.width,\n      height = source.height;\n\n  while (height > targetMaxHeight) {\n    var _scalePixels = (0, _webglUtils.scalePixels)({\n      data: data,\n      width: width,\n      height: height\n    });\n\n    data = _scalePixels.data;\n    width = _scalePixels.width;\n    height = _scalePixels.height;\n  }\n\n  (0, _webglUtils.flipRows)({\n    data: data,\n    width: width,\n    height: height\n  });\n  var canvas = document.createElement('canvas');\n  canvas.width = width;\n  canvas.height = height;\n  var context = canvas.getContext('2d');\n  var imageData = context.createImageData(width, height);\n  imageData.data.set(data);\n  context.putImageData(imageData, 0, 0);\n  return canvas.toDataURL();\n}\n\nfunction copyToImage(source) {\n  var _ref4 = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},\n      _ref4$sourceAttachmen = _ref4.sourceAttachment,\n      sourceAttachment = _ref4$sourceAttachmen === void 0 ? 36064 : _ref4$sourceAttachmen,\n      _ref4$targetImage = _ref4.targetImage,\n      targetImage = _ref4$targetImage === void 0 ? null : _ref4$targetImage;\n\n  var dataUrl = copyToDataUrl(source, {\n    sourceAttachment: sourceAttachment\n  });\n  targetImage = targetImage || new Image();\n  targetImage.src = dataUrl;\n  return targetImage;\n}\n\nfunction copyToTexture(source, target) {\n  var _ref5 = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {},\n      _ref5$sourceX = _ref5.sourceX,\n      sourceX = _ref5$sourceX === void 0 ? 0 : _ref5$sourceX,\n      _ref5$sourceY = _ref5.sourceY,\n      sourceY = _ref5$sourceY === void 0 ? 0 : _ref5$sourceY,\n      targetX = _ref5.targetX,\n      targetY = _ref5.targetY,\n      targetZ = _ref5.targetZ,\n      _ref5$targetMipmaplev = _ref5.targetMipmaplevel,\n      targetMipmaplevel = _ref5$targetMipmaplev === void 0 ? 0 : _ref5$targetMipmaplev,\n      _ref5$targetInternalF = _ref5.targetInternalFormat,\n      targetInternalFormat = _ref5$targetInternalF === void 0 ? 6408 : _ref5$targetInternalF,\n      width = _ref5.width,\n      height = _ref5.height;\n\n  var _getFramebuffer3 = getFramebuffer(source),\n      framebuffer = _getFramebuffer3.framebuffer,\n      deleteFramebuffer = _getFramebuffer3.deleteFramebuffer;\n\n  (0, _utils.assert)(framebuffer);\n  var gl = framebuffer.gl,\n      handle = framebuffer.handle;\n  var isSubCopy = typeof targetX !== 'undefined' || typeof targetY !== 'undefined' || typeof targetZ !== 'undefined';\n  targetX = targetX || 0;\n  targetY = targetY || 0;\n  targetZ = targetZ || 0;\n  var prevHandle = gl.bindFramebuffer(36160, handle);\n  (0, _utils.assert)(target);\n  var texture = null;\n\n  if (target instanceof _texture[\"default\"]) {\n    texture = target;\n    width = Number.isFinite(width) ? width : texture.width;\n    height = Number.isFinite(height) ? height : texture.height;\n    texture.bind(0);\n    target = texture.target;\n  }\n\n  if (!isSubCopy) {\n    gl.copyTexImage2D(target, targetMipmaplevel, targetInternalFormat, sourceX, sourceY, width, height, 0);\n  } else {\n    switch (target) {\n      case 3553:\n      case 34067:\n        gl.copyTexSubImage2D(target, targetMipmaplevel, targetX, targetY, sourceX, sourceY, width, height);\n        break;\n\n      case 35866:\n      case 32879:\n        gl.copyTexSubImage3D(target, targetMipmaplevel, targetX, targetY, targetZ, sourceX, sourceY, width, height);\n        break;\n\n      default:\n    }\n  }\n\n  if (texture) {\n    texture.unbind();\n  }\n\n  gl.bindFramebuffer(36160, prevHandle || null);\n\n  if (deleteFramebuffer) {\n    framebuffer[\"delete\"]();\n  }\n\n  return texture;\n}\n\nfunction blit(source, target) {\n  var _ref6 = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {},\n      _ref6$sourceAttachmen = _ref6.sourceAttachment,\n      sourceAttachment = _ref6$sourceAttachmen === void 0 ? 36064 : _ref6$sourceAttachmen,\n      _ref6$sourceX = _ref6.sourceX0,\n      sourceX0 = _ref6$sourceX === void 0 ? 0 : _ref6$sourceX,\n      _ref6$sourceY = _ref6.sourceY0,\n      sourceY0 = _ref6$sourceY === void 0 ? 0 : _ref6$sourceY,\n      sourceX1 = _ref6.sourceX1,\n      sourceY1 = _ref6.sourceY1,\n      _ref6$targetX = _ref6.targetX0,\n      targetX0 = _ref6$targetX === void 0 ? 0 : _ref6$targetX,\n      _ref6$targetY = _ref6.targetY0,\n      targetY0 = _ref6$targetY === void 0 ? 0 : _ref6$targetY,\n      targetX1 = _ref6.targetX1,\n      targetY1 = _ref6.targetY1,\n      _ref6$color = _ref6.color,\n      color = _ref6$color === void 0 ? true : _ref6$color,\n      _ref6$depth = _ref6.depth,\n      depth = _ref6$depth === void 0 ? false : _ref6$depth,\n      _ref6$stencil = _ref6.stencil,\n      stencil = _ref6$stencil === void 0 ? false : _ref6$stencil,\n      _ref6$mask = _ref6.mask,\n      mask = _ref6$mask === void 0 ? 0 : _ref6$mask,\n      _ref6$filter = _ref6.filter,\n      filter = _ref6$filter === void 0 ? 9728 : _ref6$filter;\n\n  var _getFramebuffer4 = getFramebuffer(source),\n      srcFramebuffer = _getFramebuffer4.framebuffer,\n      deleteSrcFramebuffer = _getFramebuffer4.deleteFramebuffer;\n\n  var _getFramebuffer5 = getFramebuffer(target),\n      dstFramebuffer = _getFramebuffer5.framebuffer,\n      deleteDstFramebuffer = _getFramebuffer5.deleteFramebuffer;\n\n  (0, _utils.assert)(srcFramebuffer);\n  (0, _utils.assert)(dstFramebuffer);\n  var gl = dstFramebuffer.gl,\n      handle = dstFramebuffer.handle,\n      width = dstFramebuffer.width,\n      height = dstFramebuffer.height,\n      readBuffer = dstFramebuffer.readBuffer;\n  (0, _webglUtils.assertWebGL2Context)(gl);\n\n  if (!srcFramebuffer.handle && sourceAttachment === 36064) {\n    sourceAttachment = 1028;\n  }\n\n  if (color) {\n    mask |= 16384;\n  }\n\n  if (depth) {\n    mask |= 256;\n  }\n\n  if (stencil) {\n    mask |= 1024;\n  }\n\n  if (deleteSrcFramebuffer || deleteDstFramebuffer) {\n    if (mask & (256 | 1024)) {\n      mask = 16384;\n\n      _gltools.log.warn('Blitting from or into a Texture object, forcing mask to GL.COLOR_BUFFER_BIT')();\n    }\n  }\n\n  (0, _utils.assert)(mask);\n  sourceX1 = sourceX1 === undefined ? srcFramebuffer.width : sourceX1;\n  sourceY1 = sourceY1 === undefined ? srcFramebuffer.height : sourceY1;\n  targetX1 = targetX1 === undefined ? width : targetX1;\n  targetY1 = targetY1 === undefined ? height : targetY1;\n  var prevDrawHandle = gl.bindFramebuffer(36009, handle);\n  var prevReadHandle = gl.bindFramebuffer(36008, srcFramebuffer.handle);\n  gl.readBuffer(sourceAttachment);\n  gl.blitFramebuffer(sourceX0, sourceY0, sourceX1, sourceY1, targetX0, targetY0, targetX1, targetY1, mask, filter);\n  gl.readBuffer(readBuffer);\n  gl.bindFramebuffer(36008, prevReadHandle || null);\n  gl.bindFramebuffer(36009, prevDrawHandle || null);\n\n  if (deleteSrcFramebuffer) {\n    srcFramebuffer[\"delete\"]();\n  }\n\n  if (deleteDstFramebuffer) {\n    dstFramebuffer[\"delete\"]();\n  }\n\n  return dstFramebuffer;\n}\n\nfunction getFramebuffer(source) {\n  if (!(source instanceof _framebuffer[\"default\"])) {\n    return {\n      framebuffer: (0, _textureUtils.toFramebuffer)(source),\n      deleteFramebuffer: true\n    };\n  }\n\n  return {\n    framebuffer: source,\n    deleteFramebuffer: false\n  };\n}\n\nfunction getPixelArray(pixelArray, type, format, width, height) {\n  if (pixelArray) {\n    return pixelArray;\n  }\n\n  type = type || 5121;\n  var ArrayType = (0, _typedArrayUtils.getTypedArrayFromGLType)(type, {\n    clamped: false\n  });\n  var components = (0, _formatUtils.glFormatToComponents)(format);\n  return new ArrayType(width * height * components);\n}\n//# sourceMappingURL=copy-and-blit.js.map\n};"],
"names":["shadow$provide","global","require","module","exports","readPixelsToArray","source","_ref","arguments","length","undefined","_ref$sourceX","sourceX","_ref$sourceY","sourceY","_ref$sourceFormat","sourceFormat","_ref$sourceAttachment","sourceAttachment","_ref$target","target","sourceWidth","sourceHeight","sourceType","_getFramebuffer","getFramebuffer","framebuffer","deleteFramebuffer","_utils","assert","gl","handle","attachments","width","height","type","ArrayType","_typedArrayUtils","getTypedArrayFromGLType","clamped","components","_formatUtils","glFormatToComponents","getGLTypeFromTypedArray","prevHandle","bindFramebuffer","readPixels","copyToDataUrl","_ref3","_ref3$sourceAttachmen","_ref3$targetMaxHeight","targetMaxHeight","Number","MAX_SAFE_INTEGER","data","_scalePixels","_webglUtils","scalePixels","flipRows","canvas","document","createElement","context","getContext","imageData","createImageData","set","putImageData","toDataURL","_framebuffer","_textureUtils","toFramebuffer","_interopRequireDefault","Object","defineProperty","value","readPixelsToBuffer","_ref2","_ref2$sourceX","_ref2$sourceY","_ref2$sourceFormat","_ref2$target","_ref2$targetByteOffse","targetByteOffset","_getFramebuffer2","assertWebGL2Context","byteCount","glTypeToBytes","_buffer","byteLength","accessor","size","bind","_gltools","withParameters","unbind","copyToImage","_ref4","_ref4$sourceAttachmen","_ref4$targetImage","targetImage","dataUrl","Image","src","copyToTexture","_ref5","_ref5$sourceX","_ref5$sourceY","targetX","targetY","targetZ","_ref5$targetMipmaplev","targetMipmaplevel","_ref5$targetInternalF","targetInternalFormat","_getFramebuffer3","isSubCopy","texture","_texture","isFinite","copyTexSubImage2D","copyTexSubImage3D","copyTexImage2D","blit","_ref6","_ref6$sourceAttachmen","_ref6$sourceX","sourceX0","_ref6$sourceY","sourceY0","sourceX1","sourceY1","_ref6$targetX","targetX0","_ref6$targetY","targetY0","targetX1","targetY1","_ref6$color","color","_ref6$depth","depth","_ref6$stencil","stencil","_ref6$mask","mask","_ref6$filter","filter","_getFramebuffer4","srcFramebuffer","deleteSrcFramebuffer","_getFramebuffer5","dstFramebuffer","deleteDstFramebuffer","readBuffer","log","warn","prevDrawHandle","prevReadHandle","blitFramebuffer"]
}
