{
"version":3,
"file":"module$node_modules$$deck_DOT_gl$core$dist$es5$controllers$transition_manager.js",
"lineCount":10,
"mappings":"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",
"sources":["node_modules/@deck_DOT_gl/core/dist/es5/controllers/transition-manager.js"],
"sourcesContent":["shadow$provide[\"module$node_modules$$deck_DOT_gl$core$dist$es5$controllers$transition_manager\"] = function(global,require,module,exports) {\n\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = exports.TRANSITION_EVENTS = void 0;\n\nvar _classCallCheck2 = _interopRequireDefault(require(\"@babel/runtime/helpers/classCallCheck\"));\n\nvar _createClass2 = _interopRequireDefault(require(\"@babel/runtime/helpers/createClass\"));\n\nvar _linearInterpolator = _interopRequireDefault(require(\"../transitions/linear-interpolator\"));\n\nvar _transition = _interopRequireDefault(require(\"../transitions/transition\"));\n\nvar noop = function noop() {};\n\nvar TRANSITION_EVENTS = {\n  BREAK: 1,\n  SNAP_TO_END: 2,\n  IGNORE: 3\n};\nexports.TRANSITION_EVENTS = TRANSITION_EVENTS;\nvar DEFAULT_PROPS = {\n  transitionDuration: 0,\n  transitionEasing: function transitionEasing(t) {\n    return t;\n  },\n  transitionInterpolator: new _linearInterpolator[\"default\"](),\n  transitionInterruption: TRANSITION_EVENTS.BREAK,\n  onTransitionStart: noop,\n  onTransitionInterrupt: noop,\n  onTransitionEnd: noop\n};\n\nvar TransitionManager = function () {\n  function TransitionManager(ControllerState) {\n    var props = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    (0, _classCallCheck2[\"default\"])(this, TransitionManager);\n    this.ControllerState = ControllerState;\n    this.props = Object.assign({}, DEFAULT_PROPS, props);\n    this.propsInTransition = null;\n    this.transition = new _transition[\"default\"](props.timeline);\n    this.onViewStateChange = props.onViewStateChange;\n    this._onTransitionUpdate = this._onTransitionUpdate.bind(this);\n  }\n\n  (0, _createClass2[\"default\"])(TransitionManager, [{\n    key: \"finalize\",\n    value: function finalize() {\n      this.transition.cancel();\n    }\n  }, {\n    key: \"getViewportInTransition\",\n    value: function getViewportInTransition() {\n      return this.propsInTransition;\n    }\n  }, {\n    key: \"processViewStateChange\",\n    value: function processViewStateChange(nextProps) {\n      var transitionTriggered = false;\n      var currentProps = this.props;\n      nextProps = Object.assign({}, DEFAULT_PROPS, nextProps);\n      this.props = nextProps;\n\n      if (this._shouldIgnoreViewportChange(currentProps, nextProps)) {\n        return transitionTriggered;\n      }\n\n      if (this._isTransitionEnabled(nextProps)) {\n        var _this$transition$sett = this.transition.settings,\n            interruption = _this$transition$sett.interruption,\n            endProps = _this$transition$sett.endProps;\n        var startProps = Object.assign({}, currentProps, interruption === TRANSITION_EVENTS.SNAP_TO_END ? endProps : this.propsInTransition || currentProps);\n\n        this._triggerTransition(startProps, nextProps);\n\n        transitionTriggered = true;\n      } else {\n        this.transition.cancel();\n      }\n\n      return transitionTriggered;\n    }\n  }, {\n    key: \"updateTransition\",\n    value: function updateTransition() {\n      this.transition.update();\n    }\n  }, {\n    key: \"_isTransitionEnabled\",\n    value: function _isTransitionEnabled(props) {\n      var transitionDuration = props.transitionDuration,\n          transitionInterpolator = props.transitionInterpolator;\n      return (transitionDuration > 0 || transitionDuration === 'auto') && Boolean(transitionInterpolator);\n    }\n  }, {\n    key: \"_isUpdateDueToCurrentTransition\",\n    value: function _isUpdateDueToCurrentTransition(props) {\n      if (this.transition.inProgress) {\n        return this.transition.settings.interpolator.arePropsEqual(props, this.propsInTransition);\n      }\n\n      return false;\n    }\n  }, {\n    key: \"_shouldIgnoreViewportChange\",\n    value: function _shouldIgnoreViewportChange(currentProps, nextProps) {\n      if (this.transition.inProgress) {\n        return this.transition.settings.interruption === TRANSITION_EVENTS.IGNORE || this._isUpdateDueToCurrentTransition(nextProps);\n      } else if (this._isTransitionEnabled(nextProps)) {\n        return nextProps.transitionInterpolator.arePropsEqual(currentProps, nextProps);\n      }\n\n      return true;\n    }\n  }, {\n    key: \"_triggerTransition\",\n    value: function _triggerTransition(startProps, endProps) {\n      var startViewstate = new this.ControllerState(startProps);\n      var endViewStateProps = new this.ControllerState(endProps).shortestPathFrom(startViewstate);\n      var transitionInterpolator = endProps.transitionInterpolator;\n      var duration = transitionInterpolator.getDuration ? transitionInterpolator.getDuration(startProps, endProps) : endProps.transitionDuration;\n      var initialProps = endProps.transitionInterpolator.initializeProps(startProps, endViewStateProps);\n      this.propsInTransition = {};\n      this.duration = duration;\n      this.transition.start({\n        duration: duration,\n        easing: endProps.transitionEasing,\n        interpolator: endProps.transitionInterpolator,\n        interruption: endProps.transitionInterruption,\n        startProps: initialProps.start,\n        endProps: initialProps.end,\n        onStart: endProps.onTransitionStart,\n        onUpdate: this._onTransitionUpdate,\n        onInterrupt: this._onTransitionEnd(endProps.onTransitionInterrupt),\n        onEnd: this._onTransitionEnd(endProps.onTransitionEnd)\n      });\n      this.updateTransition();\n    }\n  }, {\n    key: \"_onTransitionEnd\",\n    value: function _onTransitionEnd(callback) {\n      var _this = this;\n\n      return function (transition) {\n        _this.propsInTransition = null;\n        callback(transition);\n      };\n    }\n  }, {\n    key: \"_onTransitionUpdate\",\n    value: function _onTransitionUpdate(transition) {\n      var time = transition.time,\n          _transition$settings = transition.settings,\n          interpolator = _transition$settings.interpolator,\n          startProps = _transition$settings.startProps,\n          endProps = _transition$settings.endProps,\n          duration = _transition$settings.duration,\n          easing = _transition$settings.easing;\n      var t = easing(time / duration);\n      var viewport = interpolator.interpolateProps(startProps, endProps, t);\n      this.propsInTransition = new this.ControllerState(Object.assign({}, this.props, viewport)).getViewportProps();\n\n      if (this.onViewStateChange) {\n        this.onViewStateChange({\n          viewState: this.propsInTransition,\n          interactionState: {\n            inTransition: true\n          },\n          oldViewState: this.props\n        });\n      }\n    }\n  }]);\n  return TransitionManager;\n}();\n\nexports[\"default\"] = TransitionManager;\nTransitionManager.defaultProps = DEFAULT_PROPS;\n//# sourceMappingURL=transition-manager.js.map\n};"],
"names":["shadow$provide","global","require","module","exports","_interopRequireDefault","Object","defineProperty","value","TRANSITION_EVENTS","_classCallCheck2","_createClass2","_linearInterpolator","_transition","noop","BREAK","SNAP_TO_END","IGNORE","DEFAULT_PROPS","transitionDuration","transitionEasing","t","transitionInterpolator","transitionInterruption","onTransitionStart","onTransitionInterrupt","onTransitionEnd","TransitionManager","ControllerState","props","arguments","length","undefined","assign","propsInTransition","transition","timeline","onViewStateChange","_onTransitionUpdate","bind","key","finalize","cancel","getViewportInTransition","processViewStateChange","nextProps","transitionTriggered","currentProps","_shouldIgnoreViewportChange","_isTransitionEnabled","_this$transition$sett","settings","endProps","startProps","interruption","_triggerTransition","updateTransition","update","_isUpdateDueToCurrentTransition","inProgress","interpolator","arePropsEqual","startViewstate","endViewStateProps","shortestPathFrom","duration","getDuration","initialProps","initializeProps","start","easing","end","onStart","onUpdate","onInterrupt","_onTransitionEnd","onEnd","callback","_this","_transition$settings","time","viewport","interpolateProps","getViewportProps","viewState","interactionState","inTransition","oldViewState","defaultProps"]
}
