{
"version":3,
"file":"module$node_modules$$luma_DOT_gl$engine$dist$es5$lib$model.js",
"lineCount":25,
"mappings":"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",
"sources":["node_modules/@luma_DOT_gl/engine/dist/es5/lib/model.js"],
"sourcesContent":["shadow$provide[\"module$node_modules$$luma_DOT_gl$engine$dist$es5$lib$model\"] = function(global,require,module,exports) {\n\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\n\nvar _defineProperty2 = _interopRequireDefault(require(\"@babel/runtime/helpers/defineProperty\"));\n\nvar _classCallCheck2 = _interopRequireDefault(require(\"@babel/runtime/helpers/classCallCheck\"));\n\nvar _createClass2 = _interopRequireDefault(require(\"@babel/runtime/helpers/createClass\"));\n\nvar _gltools = require(\"@luma.gl/gltools\");\n\nvar _programManager = _interopRequireDefault(require(\"./program-manager\"));\n\nvar _webgl = require(\"@luma.gl/webgl\");\n\nvar _modelUtils = require(\"./model-utils\");\n\nvar LOG_DRAW_PRIORITY = 2;\nvar LOG_DRAW_TIMEOUT = 10000;\nvar ERR_MODEL_PARAMS = 'Model needs drawMode and vertexCount';\n\nvar NOOP = function NOOP() {};\n\nvar DRAW_PARAMS = {};\n\nvar Model = function () {\n  function Model(gl) {\n    var props = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    (0, _classCallCheck2[\"default\"])(this, Model);\n    var _props$id = props.id,\n        id = _props$id === void 0 ? (0, _webgl.uid)('model') : _props$id;\n    (0, _webgl.assert)((0, _gltools.isWebGL)(gl));\n    this.id = id;\n    this.gl = gl;\n    this.id = props.id || (0, _webgl.uid)('Model');\n    this.lastLogTime = 0;\n    this.initialize(props);\n  }\n\n  (0, _createClass2[\"default\"])(Model, [{\n    key: \"initialize\",\n    value: function initialize(props) {\n      this.props = {};\n      this.programManager = props.programManager || _programManager[\"default\"].getDefaultProgramManager(this.gl);\n      this._programManagerState = -1;\n      this._managedProgram = false;\n      var _props$program = props.program,\n          program = _props$program === void 0 ? null : _props$program,\n          vs = props.vs,\n          fs = props.fs,\n          modules = props.modules,\n          defines = props.defines,\n          inject = props.inject,\n          varyings = props.varyings,\n          bufferMode = props.bufferMode,\n          transpileToGLSL100 = props.transpileToGLSL100;\n      this.programProps = {\n        program: program,\n        vs: vs,\n        fs: fs,\n        modules: modules,\n        defines: defines,\n        inject: inject,\n        varyings: varyings,\n        bufferMode: bufferMode,\n        transpileToGLSL100: transpileToGLSL100\n      };\n      this.program = null;\n      this.vertexArray = null;\n      this._programDirty = true;\n      this.userData = {};\n      this.needsRedraw = true;\n      this._attributes = {};\n      this.attributes = {};\n      this.uniforms = {};\n      this.pickable = true;\n\n      this._checkProgram();\n\n      this.setUniforms(Object.assign({}, this.getModuleUniforms(props.moduleSettings)));\n      this.drawMode = props.drawMode !== undefined ? props.drawMode : 4;\n      this.vertexCount = props.vertexCount || 0;\n      this.geometryBuffers = {};\n      this.isInstanced = props.isInstanced || props.instanced || props.instanceCount > 0;\n\n      this._setModelProps(props);\n\n      this.geometry = {};\n      (0, _webgl.assert)(this.drawMode !== undefined && Number.isFinite(this.vertexCount), ERR_MODEL_PARAMS);\n    }\n  }, {\n    key: \"setProps\",\n    value: function setProps(props) {\n      this._setModelProps(props);\n    }\n  }, {\n    key: \"delete\",\n    value: function _delete() {\n      for (var key in this._attributes) {\n        if (this._attributes[key] !== this.attributes[key]) {\n          this._attributes[key][\"delete\"]();\n        }\n      }\n\n      if (this._managedProgram) {\n        this.programManager.release(this.program);\n        this._managedProgram = false;\n      }\n\n      this.vertexArray[\"delete\"]();\n\n      this._deleteGeometryBuffers();\n    }\n  }, {\n    key: \"getDrawMode\",\n    value: function getDrawMode() {\n      return this.drawMode;\n    }\n  }, {\n    key: \"getVertexCount\",\n    value: function getVertexCount() {\n      return this.vertexCount;\n    }\n  }, {\n    key: \"getInstanceCount\",\n    value: function getInstanceCount() {\n      return this.instanceCount;\n    }\n  }, {\n    key: \"getAttributes\",\n    value: function getAttributes() {\n      return this.attributes;\n    }\n  }, {\n    key: \"getProgram\",\n    value: function getProgram() {\n      return this.program;\n    }\n  }, {\n    key: \"setProgram\",\n    value: function setProgram(props) {\n      var program = props.program,\n          vs = props.vs,\n          fs = props.fs,\n          modules = props.modules,\n          defines = props.defines,\n          inject = props.inject,\n          varyings = props.varyings,\n          bufferMode = props.bufferMode,\n          transpileToGLSL100 = props.transpileToGLSL100;\n      this.programProps = {\n        program: program,\n        vs: vs,\n        fs: fs,\n        modules: modules,\n        defines: defines,\n        inject: inject,\n        varyings: varyings,\n        bufferMode: bufferMode,\n        transpileToGLSL100: transpileToGLSL100\n      };\n      this._programDirty = true;\n    }\n  }, {\n    key: \"getUniforms\",\n    value: function getUniforms() {\n      return this.uniforms;\n    }\n  }, {\n    key: \"setDrawMode\",\n    value: function setDrawMode(drawMode) {\n      this.drawMode = drawMode;\n      return this;\n    }\n  }, {\n    key: \"setVertexCount\",\n    value: function setVertexCount(vertexCount) {\n      (0, _webgl.assert)(Number.isFinite(vertexCount));\n      this.vertexCount = vertexCount;\n      return this;\n    }\n  }, {\n    key: \"setInstanceCount\",\n    value: function setInstanceCount(instanceCount) {\n      (0, _webgl.assert)(Number.isFinite(instanceCount));\n      this.instanceCount = instanceCount;\n      return this;\n    }\n  }, {\n    key: \"setGeometry\",\n    value: function setGeometry(geometry) {\n      this.drawMode = geometry.drawMode;\n      this.vertexCount = geometry.getVertexCount();\n\n      this._deleteGeometryBuffers();\n\n      this.geometryBuffers = (0, _modelUtils.getBuffersFromGeometry)(this.gl, geometry);\n      this.vertexArray.setAttributes(this.geometryBuffers);\n      return this;\n    }\n  }, {\n    key: \"setAttributes\",\n    value: function setAttributes() {\n      var attributes = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n      if ((0, _webgl.isObjectEmpty)(attributes)) {\n        return this;\n      }\n\n      var normalizedAttributes = {};\n\n      for (var name in attributes) {\n        var attribute = attributes[name];\n        normalizedAttributes[name] = attribute.getValue ? attribute.getValue() : attribute;\n      }\n\n      this.vertexArray.setAttributes(normalizedAttributes);\n      return this;\n    }\n  }, {\n    key: \"setUniforms\",\n    value: function setUniforms() {\n      var uniforms = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      Object.assign(this.uniforms, uniforms);\n      return this;\n    }\n  }, {\n    key: \"getModuleUniforms\",\n    value: function getModuleUniforms(opts) {\n      this._checkProgram();\n\n      var getUniforms = this.programManager.getUniforms(this.program);\n\n      if (getUniforms) {\n        return getUniforms(opts);\n      }\n\n      return {};\n    }\n  }, {\n    key: \"updateModuleSettings\",\n    value: function updateModuleSettings(opts) {\n      var uniforms = this.getModuleUniforms(opts || {});\n      return this.setUniforms(uniforms);\n    }\n  }, {\n    key: \"clear\",\n    value: function clear(opts) {\n      (0, _webgl.clear)(this.program.gl, opts);\n      return this;\n    }\n  }, {\n    key: \"draw\",\n    value: function draw() {\n      var opts = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n      this._checkProgram();\n\n      var _opts$moduleSettings = opts.moduleSettings,\n          moduleSettings = _opts$moduleSettings === void 0 ? null : _opts$moduleSettings,\n          framebuffer = opts.framebuffer,\n          _opts$uniforms = opts.uniforms,\n          uniforms = _opts$uniforms === void 0 ? {} : _opts$uniforms,\n          _opts$attributes = opts.attributes,\n          attributes = _opts$attributes === void 0 ? {} : _opts$attributes,\n          _opts$transformFeedba = opts.transformFeedback,\n          transformFeedback = _opts$transformFeedba === void 0 ? this.transformFeedback : _opts$transformFeedba,\n          _opts$parameters = opts.parameters,\n          parameters = _opts$parameters === void 0 ? {} : _opts$parameters,\n          _opts$vertexArray = opts.vertexArray,\n          vertexArray = _opts$vertexArray === void 0 ? this.vertexArray : _opts$vertexArray;\n      this.setAttributes(attributes);\n      this.updateModuleSettings(moduleSettings);\n      this.setUniforms(uniforms);\n      var logPriority;\n\n      if (_webgl.log.priority >= LOG_DRAW_PRIORITY) {\n        logPriority = this._logDrawCallStart(LOG_DRAW_PRIORITY);\n      }\n\n      var drawParams = this.vertexArray.getDrawParams();\n      var _this$props = this.props,\n          _this$props$isIndexed = _this$props.isIndexed,\n          isIndexed = _this$props$isIndexed === void 0 ? drawParams.isIndexed : _this$props$isIndexed,\n          _this$props$indexType = _this$props.indexType,\n          indexType = _this$props$indexType === void 0 ? drawParams.indexType : _this$props$indexType,\n          _this$props$indexOffs = _this$props.indexOffset,\n          indexOffset = _this$props$indexOffs === void 0 ? drawParams.indexOffset : _this$props$indexOffs,\n          _this$props$vertexArr = _this$props.vertexArrayInstanced,\n          vertexArrayInstanced = _this$props$vertexArr === void 0 ? drawParams.isInstanced : _this$props$vertexArr;\n\n      if (vertexArrayInstanced && !this.isInstanced) {\n        _webgl.log.warn('Found instanced attributes on non-instanced model', this.id)();\n      }\n\n      var isInstanced = this.isInstanced,\n          instanceCount = this.instanceCount;\n      var _this$props2 = this.props,\n          _this$props2$onBefore = _this$props2.onBeforeRender,\n          onBeforeRender = _this$props2$onBefore === void 0 ? NOOP : _this$props2$onBefore,\n          _this$props2$onAfterR = _this$props2.onAfterRender,\n          onAfterRender = _this$props2$onAfterR === void 0 ? NOOP : _this$props2$onAfterR;\n      onBeforeRender();\n      this.program.setUniforms(this.uniforms);\n      var didDraw = this.program.draw(Object.assign(DRAW_PARAMS, opts, {\n        logPriority: logPriority,\n        uniforms: null,\n        framebuffer: framebuffer,\n        parameters: parameters,\n        drawMode: this.getDrawMode(),\n        vertexCount: this.getVertexCount(),\n        vertexArray: vertexArray,\n        transformFeedback: transformFeedback,\n        isIndexed: isIndexed,\n        indexType: indexType,\n        isInstanced: isInstanced,\n        instanceCount: instanceCount,\n        offset: isIndexed ? indexOffset : 0\n      }));\n      onAfterRender();\n\n      if (_webgl.log.priority >= LOG_DRAW_PRIORITY) {\n        this._logDrawCallEnd(logPriority, vertexArray, framebuffer);\n      }\n\n      return didDraw;\n    }\n  }, {\n    key: \"transform\",\n    value: function transform() {\n      var opts = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      var _opts$discard = opts.discard,\n          discard = _opts$discard === void 0 ? true : _opts$discard,\n          feedbackBuffers = opts.feedbackBuffers,\n          _opts$unbindModels = opts.unbindModels,\n          unbindModels = _opts$unbindModels === void 0 ? [] : _opts$unbindModels;\n      var parameters = opts.parameters;\n\n      if (feedbackBuffers) {\n        this._setFeedbackBuffers(feedbackBuffers);\n      }\n\n      if (discard) {\n        parameters = Object.assign({}, parameters, (0, _defineProperty2[\"default\"])({}, 35977, discard));\n      }\n\n      unbindModels.forEach(function (model) {\n        return model.vertexArray.unbindBuffers();\n      });\n\n      try {\n        this.draw(Object.assign({}, opts, {\n          parameters: parameters\n        }));\n      } finally {\n        unbindModels.forEach(function (model) {\n          return model.vertexArray.bindBuffers();\n        });\n      }\n\n      return this;\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var uniforms = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n      _webgl.log.warn('Model.render() is deprecated. Use Model.setUniforms() and Model.draw()')();\n\n      return this.setUniforms(uniforms).draw();\n    }\n  }, {\n    key: \"_setModelProps\",\n    value: function _setModelProps(props) {\n      Object.assign(this.props, props);\n\n      if ('uniforms' in props) {\n        this.setUniforms(props.uniforms);\n      }\n\n      if ('pickable' in props) {\n        this.pickable = props.pickable;\n      }\n\n      if ('instanceCount' in props) {\n        this.instanceCount = props.instanceCount;\n      }\n\n      if ('geometry' in props) {\n        this.setGeometry(props.geometry);\n      }\n\n      if ('attributes' in props) {\n        this.setAttributes(props.attributes);\n      }\n\n      if ('_feedbackBuffers' in props) {\n        this._setFeedbackBuffers(props._feedbackBuffers);\n      }\n    }\n  }, {\n    key: \"_checkProgram\",\n    value: function _checkProgram() {\n      var shaderCache = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;\n      var needsUpdate = this._programDirty || this.programManager.stateHash !== this._programManagerState;\n\n      if (!needsUpdate) {\n        return;\n      }\n\n      var program = this.programProps.program;\n\n      if (program) {\n        this._managedProgram = false;\n      } else {\n        var _this$programProps = this.programProps,\n            vs = _this$programProps.vs,\n            fs = _this$programProps.fs,\n            modules = _this$programProps.modules,\n            inject = _this$programProps.inject,\n            defines = _this$programProps.defines,\n            varyings = _this$programProps.varyings,\n            bufferMode = _this$programProps.bufferMode,\n            transpileToGLSL100 = _this$programProps.transpileToGLSL100;\n        program = this.programManager.get({\n          vs: vs,\n          fs: fs,\n          modules: modules,\n          inject: inject,\n          defines: defines,\n          varyings: varyings,\n          bufferMode: bufferMode,\n          transpileToGLSL100: transpileToGLSL100\n        });\n\n        if (this.program && this._managedProgram) {\n          this.programManager.release(this.program);\n        }\n\n        this._programManagerState = this.programManager.stateHash;\n        this._managedProgram = true;\n      }\n\n      (0, _webgl.assert)(program instanceof _webgl.Program, 'Model needs a program');\n      this._programDirty = false;\n\n      if (program === this.program) {\n        return;\n      }\n\n      this.program = program;\n\n      if (this.vertexArray) {\n        this.vertexArray.setProps({\n          program: this.program,\n          attributes: this.vertexArray.attributes\n        });\n      } else {\n        this.vertexArray = new _webgl.VertexArray(this.gl, {\n          program: this.program\n        });\n      }\n\n      this.setUniforms(Object.assign({}, this.getModuleUniforms()));\n    }\n  }, {\n    key: \"_deleteGeometryBuffers\",\n    value: function _deleteGeometryBuffers() {\n      for (var name in this.geometryBuffers) {\n        var buffer = this.geometryBuffers[name][0] || this.geometryBuffers[name];\n\n        if (buffer instanceof _webgl.Buffer) {\n          buffer[\"delete\"]();\n        }\n      }\n    }\n  }, {\n    key: \"_setAnimationProps\",\n    value: function _setAnimationProps(animationProps) {\n      if (this.animated) {\n        (0, _webgl.assert)(animationProps, 'Model.draw(): animated uniforms but no animationProps');\n\n        var animatedUniforms = this._evaluateAnimateUniforms(animationProps);\n\n        Object.assign(this.uniforms, animatedUniforms);\n      }\n    }\n  }, {\n    key: \"_setFeedbackBuffers\",\n    value: function _setFeedbackBuffers() {\n      var feedbackBuffers = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n      if ((0, _webgl.isObjectEmpty)(feedbackBuffers)) {\n        return this;\n      }\n\n      var gl = this.program.gl;\n      this.transformFeedback = this.transformFeedback || new _webgl.TransformFeedback(gl, {\n        program: this.program\n      });\n      this.transformFeedback.setBuffers(feedbackBuffers);\n      return this;\n    }\n  }, {\n    key: \"_logDrawCallStart\",\n    value: function _logDrawCallStart(logLevel) {\n      var logDrawTimeout = logLevel > 3 ? 0 : LOG_DRAW_TIMEOUT;\n\n      if (Date.now() - this.lastLogTime < logDrawTimeout) {\n        return undefined;\n      }\n\n      this.lastLogTime = Date.now();\n\n      _webgl.log.group(LOG_DRAW_PRIORITY, \">>> DRAWING MODEL \".concat(this.id), {\n        collapsed: _webgl.log.level <= 2\n      })();\n\n      return logLevel;\n    }\n  }, {\n    key: \"_logDrawCallEnd\",\n    value: function _logDrawCallEnd(logLevel, vertexArray, uniforms, framebuffer) {\n      if (logLevel === undefined) {\n        return;\n      }\n\n      var attributeTable = (0, _webgl.getDebugTableForVertexArray)({\n        vertexArray: vertexArray,\n        header: \"\".concat(this.id, \" attributes\"),\n        attributes: this._attributes\n      });\n\n      var _getDebugTableForUnif = (0, _webgl.getDebugTableForUniforms)({\n        header: \"\".concat(this.id, \" uniforms\"),\n        program: this.program,\n        uniforms: Object.assign({}, this.program.uniforms, uniforms)\n      }),\n          uniformTable = _getDebugTableForUnif.table,\n          unusedTable = _getDebugTableForUnif.unusedTable,\n          unusedCount = _getDebugTableForUnif.unusedCount;\n\n      var _getDebugTableForUnif2 = (0, _webgl.getDebugTableForUniforms)({\n        header: \"\".concat(this.id, \" uniforms\"),\n        program: this.program,\n        uniforms: Object.assign({}, this.program.uniforms, uniforms),\n        undefinedOnly: true\n      }),\n          missingTable = _getDebugTableForUnif2.table,\n          missingCount = _getDebugTableForUnif2.count;\n\n      if (missingCount > 0) {\n        _webgl.log.log('MISSING UNIFORMS', Object.keys(missingTable))();\n      }\n\n      if (unusedCount > 0) {\n        _webgl.log.log('UNUSED UNIFORMS', Object.keys(unusedTable))();\n      }\n\n      var configTable = (0, _webgl.getDebugTableForProgramConfiguration)(this.vertexArray.configuration);\n\n      _webgl.log.table(logLevel, attributeTable)();\n\n      _webgl.log.table(logLevel, uniformTable)();\n\n      _webgl.log.table(logLevel + 1, configTable)();\n\n      if (framebuffer) {\n        framebuffer.log({\n          logLevel: LOG_DRAW_PRIORITY,\n          message: \"Rendered to \".concat(framebuffer.id)\n        });\n      }\n\n      _webgl.log.groupEnd(LOG_DRAW_PRIORITY, \">>> DRAWING MODEL \".concat(this.id))();\n    }\n  }]);\n  return Model;\n}();\n\nexports[\"default\"] = Model;\n//# sourceMappingURL=model.js.map\n};"],
"names":["shadow$provide","global","require","module","exports","_interopRequireDefault","Object","defineProperty","value","_defineProperty2","_classCallCheck2","_createClass2","_gltools","_programManager","_webgl","_modelUtils","NOOP","DRAW_PARAMS","Model","gl","props","arguments","length","undefined","_props$id","id","uid","assert","isWebGL","lastLogTime","initialize","key","programManager","getDefaultProgramManager","_programManagerState","_managedProgram","_props$program","program","programProps","vs","fs","modules","defines","inject","varyings","bufferMode","transpileToGLSL100","vertexArray","_programDirty","userData","needsRedraw","_attributes","attributes","uniforms","pickable","_checkProgram","setUniforms","assign","getModuleUniforms","moduleSettings","drawMode","vertexCount","geometryBuffers","isInstanced","instanced","instanceCount","_setModelProps","geometry","Number","isFinite","ERR_MODEL_PARAMS","setProps","_delete","release","_deleteGeometryBuffers","getDrawMode","getVertexCount","getInstanceCount","getAttributes","getProgram","setProgram","getUniforms","setDrawMode","setVertexCount","setInstanceCount","setGeometry","getBuffersFromGeometry","setAttributes","isObjectEmpty","normalizedAttributes","name","attribute","getValue","opts","updateModuleSettings","clear","draw","_opts$moduleSettings","framebuffer","_opts$uniforms","_opts$attributes","_opts$transformFeedba","transformFeedback","_opts$parameters","parameters","_opts$vertexArray","logPriority","LOG_DRAW_PRIORITY","log","priority","_logDrawCallStart","drawParams","getDrawParams","_this$props","_this$props$isIndexed","isIndexed","_this$props$indexType","indexType","_this$props$indexOffs","indexOffset","_this$props$vertexArr","vertexArrayInstanced","warn","_this$props2","_this$props2$onBefore","onBeforeRender","_this$props2$onAfterR","onAfterRender","didDraw","offset","_logDrawCallEnd","transform","_opts$discard","discard","feedbackBuffers","_opts$unbindModels","unbindModels","_setFeedbackBuffers","forEach","model","unbindBuffers","bindBuffers","render","_feedbackBuffers","stateHash","_this$programProps","get","Program","VertexArray","buffer","Buffer","_setAnimationProps","animationProps","animated","animatedUniforms","_evaluateAnimateUniforms","TransformFeedback","setBuffers","logLevel","logDrawTimeout","LOG_DRAW_TIMEOUT","Date","now","group","concat","collapsed","level","attributeTable","getDebugTableForVertexArray","header","_getDebugTableForUnif","getDebugTableForUniforms","uniformTable","table","unusedTable","unusedCount","_getDebugTableForUnif2","undefinedOnly","missingTable","count","keys","configTable","getDebugTableForProgramConfiguration","configuration","message","groupEnd"]
}
