shadow$provide.module$node_modules$$deck_DOT_gl$geo_layers$dist$es5$tile_layer$utils=function(global,require,module,exports){function getTileIndex(_ref,scale){_ref=(0,_slicedToArray2["default"])(_ref,2);return[_ref[0]*scale/TILE_SIZE,_ref[1]*scale/TILE_SIZE]}function osmTile2lngLat(x,y,z){z=Math.pow(2,z);y=Math.PI-2*Math.PI*y/z;return[x/z*360-180,180/Math.PI*Math.atan(.5*(Math.exp(y)-Math.exp(-y)))]}function tile2XY(x,y,z){z=Math.pow(2,z);return[x/z*TILE_SIZE,y/z*TILE_SIZE]}global=require("module$node_modules$$babel$runtime$helpers$interopRequireDefault");
Object.defineProperty(exports,"__esModule",{value:!0});exports.getURLFromTemplate=function(template,properties){if(!template||!template.length)return null;Array.isArray(template)&&(template=template[Math.abs(properties.x+properties.y)%template.length]);return template.replace?template.replace(/\{ *([\w_-]+) *\}/g,function(_,property){return properties[property]}):null};exports.tileToBoundingBox=function(viewport,x,y,z){if(viewport.isGeospatial){viewport=osmTile2lngLat(x,y,z);var _osmTile2lngLat2=
(0,_slicedToArray2["default"])(viewport,2);viewport=_osmTile2lngLat2[0];_osmTile2lngLat2=_osmTile2lngLat2[1];x=osmTile2lngLat(x+1,y+1,z);x=(0,_slicedToArray2["default"])(x,2);return{west:viewport,north:_osmTile2lngLat2,east:x[0],south:x[1]}}viewport=tile2XY(x,y,z);_osmTile2lngLat2=(0,_slicedToArray2["default"])(viewport,2);viewport=_osmTile2lngLat2[0];_osmTile2lngLat2=_osmTile2lngLat2[1];x=tile2XY(x+1,y+1,z);x=(0,_slicedToArray2["default"])(x,2);return{left:viewport,top:_osmTile2lngLat2,right:x[0],
bottom:x[1]}};exports.getTileIndices=function(_ref3){var viewport=_ref3.viewport,maxZoom=_ref3.maxZoom,minZoom=_ref3.minZoom,zRange=_ref3.zRange,extent=_ref3.extent;_ref3=_ref3.tileSize;_ref3=Math.round(viewport.zoom+Math.log2(TILE_SIZE/(void 0===_ref3?TILE_SIZE:_ref3)));if(Number.isFinite(minZoom)&&_ref3<minZoom){if(!extent)return[];_ref3=minZoom}Number.isFinite(maxZoom)&&_ref3>maxZoom&&(_ref3=maxZoom);if(viewport.isGeospatial)maxZoom=(0,_tile2dTraversal.getOSMTileIndices)(viewport,_ref3,zRange,
extent||DEFAULT_EXTENT);else{maxZoom=_ref3;extent=extent||DEFAULT_EXTENT;viewport=viewport.getBounds();minZoom=[Math.max(viewport[0],extent[0]),Math.max(viewport[1],extent[1]),Math.min(viewport[2],extent[2]),Math.min(viewport[3],extent[3])];zRange=Math.pow(2,maxZoom);viewport=getTileIndex([minZoom[0],minZoom[1]],zRange);viewport=(0,_slicedToArray2["default"])(viewport,2);extent=viewport[0];viewport=viewport[1];minZoom=getTileIndex([minZoom[2],minZoom[3]],zRange);zRange=(0,_slicedToArray2["default"])(minZoom,
2);minZoom=zRange[0];zRange=zRange[1];_ref3=[];for(extent=Math.floor(extent);extent<minZoom;extent++)for(var y=Math.floor(viewport);y<zRange;y++)_ref3.push({x:extent,y:y,z:maxZoom});maxZoom=_ref3}return maxZoom};exports.urlType=void 0;var _slicedToArray2=global(require("module$node_modules$$babel$runtime$helpers$slicedToArray")),_tile2dTraversal=require("module$node_modules$$deck_DOT_gl$geo_layers$dist$es5$tile_layer$tile_2d_traversal"),TILE_SIZE=512,DEFAULT_EXTENT=[-Infinity,-Infinity,Infinity,Infinity];
exports.urlType={type:"url",value:"",validate:function(value){return"string"===typeof value||Array.isArray(value)&&value.every(function(url){return"string"===typeof url})},equals:function(value1,value2){if(value1===value2)return!0;if(!Array.isArray(value1)||!Array.isArray(value2))return!1;var len=value1.length;if(len!==value2.length)return!1;for(var i=0;i<len;i++)if(value1[i]!==value2[i])return!1;return!0}}}
//# sourceMappingURL=module$node_modules$$deck_DOT_gl$geo_layers$dist$es5$tile_layer$utils.js.map
