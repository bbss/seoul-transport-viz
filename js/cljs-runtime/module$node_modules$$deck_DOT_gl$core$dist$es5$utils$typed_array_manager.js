shadow$provide.module$node_modules$$deck_DOT_gl$core$dist$es5$utils$typed_array_manager=function(global,require,module,exports){global=require("module$node_modules$$babel$runtime$helpers$interopRequireDefault");Object.defineProperty(exports,"__esModule",{value:!0});exports["default"]=exports.TypedArrayManager=void 0;var _classCallCheck2=global(require("module$node_modules$$babel$runtime$helpers$classCallCheck")),_createClass2=global(require("module$node_modules$$babel$runtime$helpers$createClass"));
require=function(){function TypedArrayManager(){var _ref=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},_ref$overAlloc=_ref.overAlloc;_ref$overAlloc=void 0===_ref$overAlloc?2:_ref$overAlloc;_ref=_ref.poolSize;_ref=void 0===_ref?100:_ref;(0,_classCallCheck2["default"])(this,TypedArrayManager);this.overAlloc=_ref$overAlloc;this.poolSize=_ref;this._pool=[]}(0,_createClass2["default"])(TypedArrayManager,[{key:"allocate",value:function(typedArray,count,_ref2){var _ref2$size=_ref2.size,_ref2$padding=
_ref2.padding,_ref2$copy=_ref2.copy;_ref2$copy=void 0===_ref2$copy?!1:_ref2$copy;var _ref2$initialize=_ref2.initialize;_ref2$initialize=void 0===_ref2$initialize?!1:_ref2$initialize;_ref2=_ref2.type||typedArray&&typedArray.constructor||Float32Array;count=count*(void 0===_ref2$size?1:_ref2$size)+(void 0===_ref2$padding?0:_ref2$padding);if(ArrayBuffer.isView(typedArray)){if(count<=typedArray.length)return typedArray;if(count*typedArray.BYTES_PER_ELEMENT<=typedArray.buffer.byteLength)return new _ref2(typedArray.buffer,
0,count)}count=this._allocate(_ref2,count,_ref2$initialize);typedArray&&_ref2$copy?count.set(typedArray):_ref2$initialize||count.fill(0,0,4);this._release(typedArray);return count}},{key:"release",value:function(typedArray){this._release(typedArray)}},{key:"_allocate",value:function(Type,size,initialize){size=Math.max(Math.ceil(size*this.overAlloc),1);var pool=this._pool,byteLength=Type.BYTES_PER_ELEMENT*size,i=pool.findIndex(function(b){return b.byteLength>=byteLength});return 0<=i?(Type=new Type(pool.splice(i,
1)[0],0,size),initialize&&Type.fill(0),Type):new Type(size)}},{key:"_release",value:function(typedArray){if(ArrayBuffer.isView(typedArray)){var pool=this._pool;typedArray=typedArray.buffer;var byteLength=typedArray.byteLength,i=pool.findIndex(function(b){return b.byteLength>=byteLength});0>i?pool.push(typedArray):(0<i||pool.length<this.poolSize)&&pool.splice(i,0,typedArray);pool.length>this.poolSize&&pool.shift()}}}]);return TypedArrayManager}();exports.TypedArrayManager=require;require=new require;
exports["default"]=require}
//# sourceMappingURL=module$node_modules$$deck_DOT_gl$core$dist$es5$utils$typed_array_manager.js.map
