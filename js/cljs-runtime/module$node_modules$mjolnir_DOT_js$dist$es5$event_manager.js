shadow$provide.module$node_modules$mjolnir_DOT_js$dist$es5$event_manager=function(global,require,module,exports){global=require("module$node_modules$$babel$runtime$helpers$interopRequireDefault");Object.defineProperty(exports,"__esModule",{value:!0});exports["default"]=void 0;var _slicedToArray2=global(require("module$node_modules$$babel$runtime$helpers$slicedToArray")),_classCallCheck2=global(require("module$node_modules$$babel$runtime$helpers$classCallCheck")),_createClass2=global(require("module$node_modules$$babel$runtime$helpers$createClass"));
module=require("module$node_modules$mjolnir_DOT_js$dist$es5$utils$hammer_browser");var _wheelInput=global(require("module$node_modules$mjolnir_DOT_js$dist$es5$inputs$wheel_input")),_moveInput=global(require("module$node_modules$mjolnir_DOT_js$dist$es5$inputs$move_input")),_keyInput=global(require("module$node_modules$mjolnir_DOT_js$dist$es5$inputs$key_input")),_contextmenuInput=global(require("module$node_modules$mjolnir_DOT_js$dist$es5$inputs$contextmenu_input")),_eventRegistrar=global(require("module$node_modules$mjolnir_DOT_js$dist$es5$utils$event_registrar")),
_constants=require("module$node_modules$mjolnir_DOT_js$dist$es5$constants"),DEFAULT_OPTIONS={events:null,recognizers:null,recognizerOptions:{},Manager:module.Manager,touchAction:"none",tabIndex:0};require=function(){function EventManager(){var element=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null,options=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};(0,_classCallCheck2["default"])(this,EventManager);this.options=Object.assign({},DEFAULT_OPTIONS,options);this.events=new Map;
this._onBasicInput=this._onBasicInput.bind(this);this._onOtherEvent=this._onOtherEvent.bind(this);this.setElement(element);if(element=options.events)this.on(element)}(0,_createClass2["default"])(EventManager,[{key:"setElement",value:function(element){var _this=this;this.element&&this.destroy();if(this.element=element){var options=this.options;this.manager=(new options.Manager(element,{touchAction:options.touchAction,recognizers:options.recognizers||_constants.RECOGNIZERS})).on("hammer.input",this._onBasicInput);
options.recognizers||Object.keys(_constants.RECOGNIZER_COMPATIBLE_MAP).forEach(function(name){var recognizer=_this.manager.get(name);recognizer&&_constants.RECOGNIZER_COMPATIBLE_MAP[name].forEach(function(otherName){recognizer.recognizeWith(otherName)})});for(var recognizerName in options.recognizerOptions){var recognizer$jscomp$0=this.manager.get(recognizerName);if(recognizer$jscomp$0){var recognizerOption=options.recognizerOptions[recognizerName];delete recognizerOption.enable;recognizer$jscomp$0.set(recognizerOption)}}this.wheelInput=
new _wheelInput["default"](element,this._onOtherEvent,{enable:!1});this.moveInput=new _moveInput["default"](element,this._onOtherEvent,{enable:!1});this.keyInput=new _keyInput["default"](element,this._onOtherEvent,{enable:!1,tabIndex:options.tabIndex});this.contextmenuInput=new _contextmenuInput["default"](element,this._onOtherEvent,{enable:!1});element=!0;options=!1;recognizerName=void 0;try{for(var _iterator=this.events[Symbol.iterator](),_step;!(element=(_step=_iterator.next()).done);element=!0){var _step$value=
(0,_slicedToArray2["default"])(_step.value,2),eventAlias=_step$value[0],eventRegistrar=_step$value[1];eventRegistrar.isEmpty()||(this._toggleRecognizer(eventRegistrar.recognizerName,!0),this.manager.on(eventAlias,eventRegistrar.handleEvent))}}catch(err){options=!0,recognizerName=err}finally{try{if(!element&&null!=_iterator["return"])_iterator["return"]()}finally{if(options)throw recognizerName;}}}}},{key:"destroy",value:function(){this.element&&(this.wheelInput.destroy(),this.moveInput.destroy(),
this.keyInput.destroy(),this.contextmenuInput.destroy(),this.manager.destroy(),this.element=this.manager=this.contextmenuInput=this.keyInput=this.moveInput=this.wheelInput=null)}},{key:"on",value:function(event,handler,opts){this._addEventHandler(event,handler,opts,!1)}},{key:"once",value:function(event,handler,opts){this._addEventHandler(event,handler,opts,!0)}},{key:"watch",value:function(event,handler,opts){this._addEventHandler(event,handler,opts,!1,!0)}},{key:"off",value:function(event,handler){this._removeEventHandler(event,
handler)}},{key:"_toggleRecognizer",value:function(name,enabled){var manager=this.manager;if(manager){var recognizer=manager.get(name);if(recognizer&&recognizer.options.enable!==enabled){recognizer.set({enable:enabled});var fallbackRecognizers=_constants.RECOGNIZER_FALLBACK_MAP[name];fallbackRecognizers&&!this.options.recognizers&&fallbackRecognizers.forEach(function(otherName){var otherRecognizer=manager.get(otherName);enabled?(otherRecognizer.requireFailure(name),recognizer.dropRequireFailure(otherName)):
otherRecognizer.dropRequireFailure(name)})}this.wheelInput.enableEventType(name,enabled);this.moveInput.enableEventType(name,enabled);this.keyInput.enableEventType(name,enabled);this.contextmenuInput.enableEventType(name,enabled)}}},{key:"_addEventHandler",value:function(event,handler,opts,once,passive){if("string"!==typeof event){opts=handler;for(var eventName in event)this._addEventHandler(eventName,event[eventName],opts,once,passive)}else{eventName=this.manager;var events=this.events,eventAlias=
_constants.GESTURE_EVENT_ALIASES[event]||event,eventRegistrar=events.get(eventAlias);if(!eventRegistrar&&(eventRegistrar=new _eventRegistrar["default"](this),events.set(eventAlias,eventRegistrar),eventRegistrar.recognizerName=_constants.EVENT_RECOGNIZER_MAP[eventAlias]||eventAlias,eventName))eventName.on(eventAlias,eventRegistrar.handleEvent);eventRegistrar.add(event,handler,opts,once,passive);eventRegistrar.isEmpty()||this._toggleRecognizer(eventRegistrar.recognizerName,!0)}}},{key:"_removeEventHandler",
value:function(event,handler){if("string"!==typeof event)for(var eventName in event)this._removeEventHandler(eventName,event[eventName]);else{eventName=this.events;var eventRegistrar=eventName.get(_constants.GESTURE_EVENT_ALIASES[event]||event);if(eventRegistrar&&(eventRegistrar.remove(event,handler),eventRegistrar.isEmpty())){event=eventRegistrar.recognizerName;handler=!1;eventRegistrar=!0;var _didIteratorError2=!1,_iteratorError2=void 0;try{for(var _iterator2=eventName.values()[Symbol.iterator](),
_step2;!(eventRegistrar=(_step2=_iterator2.next()).done);eventRegistrar=!0){var eh=_step2.value;if(eh.recognizerName===event&&!eh.isEmpty()){handler=!0;break}}}catch(err){_didIteratorError2=!0,_iteratorError2=err}finally{try{if(!eventRegistrar&&null!=_iterator2["return"])_iterator2["return"]()}finally{if(_didIteratorError2)throw _iteratorError2;}}handler||this._toggleRecognizer(event,!1)}}}},{key:"_onBasicInput",value:function(event){var alias=_constants.BASIC_EVENT_ALIASES[event.srcEvent.type];alias&&
this.manager.emit(alias,event)}},{key:"_onOtherEvent",value:function(event){this.manager.emit(event.type,event)}}]);return EventManager}();exports["default"]=require}
//# sourceMappingURL=module$node_modules$mjolnir_DOT_js$dist$es5$event_manager.js.map
