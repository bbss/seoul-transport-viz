{
"version":3,
"file":"module$node_modules$$loaders_DOT_gl$3d_tiles$dist$es5$lib$parsers$parse_3d_tile_instanced_model.js",
"lineCount":15,
"mappings":"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",
"sources":["node_modules/@loaders_DOT_gl/3d-tiles/dist/es5/lib/parsers/parse-3d-tile-instanced-model.js"],
"sourcesContent":["shadow$provide[\"module$node_modules$$loaders_DOT_gl$3d_tiles$dist$es5$lib$parsers$parse_3d_tile_instanced_model\"] = function(global,require,module,exports) {\n\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.parseInstancedModel3DTile = parseInstancedModel3DTile;\n\nvar _regenerator = _interopRequireDefault(require(\"@babel/runtime/regenerator\"));\n\nvar _asyncToGenerator2 = _interopRequireDefault(require(\"@babel/runtime/helpers/asyncToGenerator\"));\n\nvar _core = require(\"@math.gl/core\");\n\nvar _geospatial = require(\"@math.gl/geospatial\");\n\nvar _math = require(\"@loaders.gl/math\");\n\nvar _tile3dFeatureTable = _interopRequireDefault(require(\"../classes/tile-3d-feature-table\"));\n\nvar _tile3dBatchTable = _interopRequireDefault(require(\"../classes/tile-3d-batch-table\"));\n\nvar _parse3dTileHeader = require(\"./helpers/parse-3d-tile-header\");\n\nvar _parse3dTileTables = require(\"./helpers/parse-3d-tile-tables\");\n\nvar _parse3dTileGltfView = require(\"./helpers/parse-3d-tile-gltf-view\");\n\nfunction parseInstancedModel3DTile(_x, _x2, _x3, _x4, _x5) {\n  return _parseInstancedModel3DTile.apply(this, arguments);\n}\n\nfunction _parseInstancedModel3DTile() {\n  _parseInstancedModel3DTile = (0, _asyncToGenerator2[\"default\"])(_regenerator[\"default\"].mark(function _callee(tile, arrayBuffer, byteOffset, options, context) {\n    return _regenerator[\"default\"].wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            byteOffset = parseInstancedModel(tile, arrayBuffer, byteOffset, options, context);\n            _context.next = 3;\n            return (0, _parse3dTileGltfView.extractGLTF)(tile, tile.gltfFormat, options, context);\n\n          case 3:\n            return _context.abrupt(\"return\", byteOffset);\n\n          case 4:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n  return _parseInstancedModel3DTile.apply(this, arguments);\n}\n\nfunction parseInstancedModel(tile, arrayBuffer, byteOffset, options, context) {\n  byteOffset = (0, _parse3dTileHeader.parse3DTileHeaderSync)(tile, arrayBuffer, byteOffset, options);\n\n  if (tile.version !== 1) {\n    throw new Error(\"Instanced 3D Model version \".concat(tile.version, \" is not supported\"));\n  }\n\n  byteOffset = (0, _parse3dTileTables.parse3DTileTablesHeaderSync)(tile, arrayBuffer, byteOffset, options);\n  var view = new DataView(arrayBuffer);\n  tile.gltfFormat = view.getUint32(byteOffset, true);\n  byteOffset += 4;\n  byteOffset = (0, _parse3dTileTables.parse3DTileTablesSync)(tile, arrayBuffer, byteOffset, options);\n  byteOffset = (0, _parse3dTileGltfView.parse3DTileGLTFViewSync)(tile, arrayBuffer, byteOffset, options);\n\n  if (tile.featureTableJsonByteLength === 0) {\n    throw new Error('i3dm parser: featureTableJsonByteLength is zero.');\n  }\n\n  var featureTable = new _tile3dFeatureTable[\"default\"](tile.featureTableJson, tile.featureTableBinary);\n  var instancesLength = featureTable.getGlobalProperty('INSTANCES_LENGTH');\n  featureTable.featuresLength = instancesLength;\n\n  if (!Number.isFinite(instancesLength)) {\n    throw new Error('i3dm parser: INSTANCES_LENGTH must be defined');\n  }\n\n  tile.eastNorthUp = featureTable.getGlobalProperty('EAST_NORTH_UP');\n  tile.rtcCenter = featureTable.getGlobalProperty('RTC_CENTER', _math.GL.FLOAT, 3);\n  var batchTable = new _tile3dBatchTable[\"default\"](tile.batchTableJson, tile.batchTableBinary, instancesLength);\n  extractInstancedAttributes(tile, featureTable, batchTable, instancesLength);\n  return byteOffset;\n}\n\nfunction extractInstancedAttributes(tile, featureTable, batchTable, instancesLength) {\n  var collectionOptions = {\n    instances: new Array(instancesLength),\n    batchTable: tile._batchTable,\n    cull: false,\n    url: undefined,\n    gltf: undefined,\n    basePath: undefined,\n    incrementallyLoadTextures: false,\n    forwardAxis: [1, 0, 0]\n  };\n  var instances = collectionOptions.instances;\n  var instancePosition = new _core.Vector3();\n  var instanceNormalRight = new _core.Vector3();\n  var instanceNormalUp = new _core.Vector3();\n  var instanceNormalForward = new _core.Vector3();\n  var instanceRotation = new _core.Matrix3();\n  var instanceQuaternion = new _core.Quaternion();\n  var instanceScale = new _core.Vector3();\n  var instanceTranslationRotationScale = {};\n  var instanceTransform = new _core.Matrix4();\n  var scratch1 = [];\n  var scratch2 = [];\n  var scratchVector1 = new _core.Vector3();\n  var scratchVector2 = new _core.Vector3();\n\n  for (var i = 0; i < instancesLength; i++) {\n    var position = void 0;\n\n    if (featureTable.hasProperty('POSITION')) {\n      position = featureTable.getProperty('POSITION', _math.GL.FLOAT, 3, i, instancePosition);\n    } else if (featureTable.hasProperty('POSITION_QUANTIZED')) {\n      position = featureTable.getProperty('POSITION_QUANTIZED', _math.GL.UNSIGNED_SHORT, 3, i, instancePosition);\n      var quantizedVolumeOffset = featureTable.getGlobalProperty('QUANTIZED_VOLUME_OFFSET', _math.GL.FLOAT, 3, scratchVector1);\n\n      if (!quantizedVolumeOffset) {\n        throw new Error('i3dm parser: QUANTIZED_VOLUME_OFFSET must be defined for quantized positions.');\n      }\n\n      var quantizedVolumeScale = featureTable.getGlobalProperty('QUANTIZED_VOLUME_SCALE', _math.GL.FLOAT, 3, scratchVector2);\n\n      if (!quantizedVolumeScale) {\n        throw new Error('i3dm parser: QUANTIZED_VOLUME_SCALE must be defined for quantized positions.');\n      }\n\n      var MAX_UNSIGNED_SHORT = 65535.0;\n\n      for (var j = 0; j < 3; j++) {\n        position[j] = position[j] / MAX_UNSIGNED_SHORT * quantizedVolumeScale[j] + quantizedVolumeOffset[j];\n      }\n    }\n\n    if (!position) {\n      throw new Error('i3dm: POSITION or POSITION_QUANTIZED must be defined for each instance.');\n    }\n\n    instancePosition.copy(position);\n    instanceTranslationRotationScale.translation = instancePosition;\n    tile.normalUp = featureTable.getProperty('NORMAL_UP', _math.GL.FLOAT, 3, i, scratch1);\n    tile.normalRight = featureTable.getProperty('NORMAL_RIGHT', _math.GL.FLOAT, 3, i, scratch2);\n    var hasCustomOrientation = false;\n\n    if (tile.normalUp) {\n      if (!tile.normalRight) {\n        throw new Error('i3dm: Custom orientation requires both NORMAL_UP and NORMAL_RIGHT.');\n      }\n\n      tile.hasCustomOrientation = true;\n    } else {\n      tile.octNormalUp = featureTable.getProperty('NORMAL_UP_OCT32P', _math.GL.UNSIGNED_SHORT, 2, scratch1);\n      tile.octNormalRight = featureTable.getProperty('NORMAL_RIGHT_OCT32P', _math.GL.UNSIGNED_SHORT, 2, scratch2);\n\n      if (tile.octNormalUp) {\n        if (!tile.octNormalRight) {\n          throw new Error('i3dm: oct-encoded orientation requires NORMAL_UP_OCT32P and NORMAL_RIGHT_OCT32P');\n        }\n\n        throw new Error('i3dm: oct-encoded orientation not implemented');\n      } else if (tile.eastNorthUp) {\n        _geospatial.Ellipsoid.WGS84.eastNorthUpToFixedFrame(instancePosition, instanceTransform);\n\n        instanceTransform.getRotationMatrix3(instanceRotation);\n      } else {\n        instanceRotation.identity();\n      }\n    }\n\n    if (hasCustomOrientation) {\n      instanceNormalForward.copy(instanceNormalRight).cross(instanceNormalUp).normalize();\n      instanceRotation.setColumn(0, instanceNormalRight);\n      instanceRotation.setColumn(1, instanceNormalUp);\n      instanceRotation.setColumn(2, instanceNormalForward);\n    }\n\n    instanceQuaternion.fromMatrix3(instanceRotation);\n    instanceTranslationRotationScale.rotation = instanceQuaternion;\n    instanceScale.set(1.0, 1.0, 1.0);\n    var scale = featureTable.getProperty('SCALE', _math.GL.FLOAT, 1, i);\n\n    if (Number.isFinite(scale)) {\n      instanceScale.multiplyByScalar(scale);\n    }\n\n    var nonUniformScale = featureTable.getProperty('SCALE_NON_UNIFORM', _math.GL.FLOAT, 3, i, scratch1);\n\n    if (nonUniformScale) {\n      instanceScale.scale(nonUniformScale);\n    }\n\n    instanceTranslationRotationScale.scale = instanceScale;\n    var batchId = featureTable.getProperty('BATCH_ID', _math.GL.UNSIGNED_SHORT, 1, i);\n\n    if (batchId === undefined) {\n      batchId = i;\n    }\n\n    var rotationMatrix = new _core.Matrix4().fromQuaternion(instanceTranslationRotationScale.rotation);\n    instanceTransform.identity();\n    instanceTransform.translate(instanceTranslationRotationScale.translation);\n    instanceTransform.multiplyRight(rotationMatrix);\n    instanceTransform.scale(instanceTranslationRotationScale.scale);\n    var modelMatrix = instanceTransform.clone();\n    instances[i] = {\n      modelMatrix: modelMatrix,\n      batchId: batchId\n    };\n  }\n\n  tile.instances = instances;\n}\n//# sourceMappingURL=parse-3d-tile-instanced-model.js.map\n};"],
"names":["shadow$provide","global","require","module","exports","_parseInstancedModel3DTile","_asyncToGenerator2","_regenerator","mark","_callee","tile","arrayBuffer","byteOffset","options","context","wrap","_callee$","_context","prev","next","_parse3dTileHeader","parse3DTileHeaderSync","version","Error","concat","_parse3dTileTables","parse3DTileTablesHeaderSync","view","DataView","gltfFormat","getUint32","parse3DTileTablesSync","_parse3dTileGltfView","parse3DTileGLTFViewSync","featureTableJsonByteLength","featureTable","_tile3dFeatureTable","featureTableJson","featureTableBinary","instancesLength","getGlobalProperty","featuresLength","Number","isFinite","eastNorthUp","rtcCenter","_math","GL","FLOAT","_tile3dBatchTable","batchTableJson","batchTableBinary","instances","Array","instancePosition","_core","Vector3","instanceRotation","Matrix3","instanceQuaternion","Quaternion","instanceScale","instanceTransform","Matrix4","scratch1","scratch2","scratchVector1","scratchVector2","i","position","hasProperty","getProperty","UNSIGNED_SHORT","quantizedVolumeOffset","quantizedVolumeScale","j","MAX_UNSIGNED_SHORT","copy","translation","normalUp","normalRight","hasCustomOrientation","octNormalUp","octNormalRight","_geospatial","Ellipsoid","WGS84","eastNorthUpToFixedFrame","getRotationMatrix3","identity","fromMatrix3","rotation","set","scale","multiplyByScalar","nonUniformScale","batchId","undefined","rotationMatrix","fromQuaternion","translate","multiplyRight","modelMatrix","clone","extractGLTF","abrupt","stop","apply","arguments","_interopRequireDefault","Object","defineProperty","value","parseInstancedModel3DTile","_x","_x2","_x3","_x4","_x5"]
}
