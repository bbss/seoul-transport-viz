shadow$provide.module$node_modules$react_map_gl$dist$es5$components$draggable_control=function(global,require,module,exports){function _createSuper(Derived){var hasNativeReflectConstruct=_isNativeReflectConstruct();return function(){var Super=(0,_getPrototypeOf2["default"])(Derived);if(hasNativeReflectConstruct){var NewTarget=(0,_getPrototypeOf2["default"])(this).constructor;Super=Reflect.construct(Super,arguments,NewTarget)}else Super=Super.apply(this,arguments);return(0,_possibleConstructorReturn2["default"])(this,
Super)}}function _isNativeReflectConstruct(){if("undefined"===typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}module=require("module$node_modules$$babel$runtime$helpers$interopRequireDefault");Object.defineProperty(exports,"__esModule",{value:!0});exports["default"]=void 0;var _slicedToArray2=module(require("module$node_modules$$babel$runtime$helpers$slicedToArray")),
_classCallCheck2=module(require("module$node_modules$$babel$runtime$helpers$classCallCheck")),_createClass2=module(require("module$node_modules$$babel$runtime$helpers$createClass")),_assertThisInitialized2=module(require("module$node_modules$$babel$runtime$helpers$assertThisInitialized")),_get2=module(require("module$node_modules$$babel$runtime$helpers$get")),_inherits2=module(require("module$node_modules$$babel$runtime$helpers$inherits")),_possibleConstructorReturn2=module(require("module$node_modules$$babel$runtime$helpers$possibleConstructorReturn")),
_getPrototypeOf2=module(require("module$node_modules$$babel$runtime$helpers$getPrototypeOf")),_defineProperty2=module(require("module$node_modules$$babel$runtime$helpers$defineProperty"));global=module(require("module$node_modules$prop_types$index"));require=module(require("module$node_modules$react_map_gl$dist$es5$components$base_control"));global=Object.assign({},require["default"].propTypes,{draggable:global["default"].bool,onDrag:global["default"].func,onDragEnd:global["default"].func,onDragStart:global["default"].func,
offsetLeft:global["default"].number,offsetTop:global["default"].number});module=Object.assign({},require["default"].defaultProps,{draggable:!1,offsetLeft:0,offsetTop:0});require=function(_BaseControl){function DraggableControl(){(0,_classCallCheck2["default"])(this,DraggableControl);for(var _len=arguments.length,args=Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];var _this=_super.call.apply(_super,[this].concat(args));(0,_defineProperty2["default"])((0,_assertThisInitialized2["default"])(_this),
"state",{dragPos:null,dragOffset:null});(0,_defineProperty2["default"])((0,_assertThisInitialized2["default"])(_this),"_dragEvents",null);(0,_defineProperty2["default"])((0,_assertThisInitialized2["default"])(_this),"_onDragStart",function(event){var _this$props=_this.props,draggable=_this$props.draggable;_this$props=_this$props.captureDrag;(draggable||_this$props)&&event.stopPropagation();if(draggable){draggable=_this._getDragEventPosition(event);_this$props=_this._getDragEventOffset(event);_this.setState({dragPos:draggable,
dragOffset:_this$props});_this._setupDragEvents();var onDragStart=_this.props.onDragStart;onDragStart&&_this$props&&(event=Object.assign({},event),event.lngLat=_this._getDragLngLat(draggable,_this$props),onDragStart(event))}});(0,_defineProperty2["default"])((0,_assertThisInitialized2["default"])(_this),"_onDrag",function(event){event.stopPropagation();var dragPos=_this._getDragEventPosition(event);_this.setState({dragPos:dragPos});var onDrag=_this.props.onDrag,dragOffset=_this.state.dragOffset;onDrag&&
dragOffset&&(event=Object.assign({},event),event.lngLat=_this._getDragLngLat(dragPos,dragOffset),onDrag(event))});(0,_defineProperty2["default"])((0,_assertThisInitialized2["default"])(_this),"_onDragEnd",function(event){var _this$state=_this.state,dragPos=_this$state.dragPos;_this$state=_this$state.dragOffset;event.stopPropagation();_this.setState({dragPos:null,dragOffset:null});_this._removeDragEvents();var onDragEnd=_this.props.onDragEnd;onDragEnd&&dragPos&&_this$state&&(event=Object.assign({},
event),event.lngLat=_this._getDragLngLat(dragPos,_this$state),onDragEnd(event))});(0,_defineProperty2["default"])((0,_assertThisInitialized2["default"])(_this),"_onDragCancel",function(event){event.stopPropagation();_this.setState({dragPos:null,dragOffset:null});_this._removeDragEvents()});return _this}(0,_inherits2["default"])(DraggableControl,_BaseControl);var _super=_createSuper(DraggableControl);(0,_createClass2["default"])(DraggableControl,[{key:"componentWillUnmount",value:function(){(0,_get2["default"])((0,
_getPrototypeOf2["default"])(DraggableControl.prototype),"componentWillUnmount",this).call(this);this._removeDragEvents()}},{key:"_setupDragEvents",value:function(){var eventManager=this._context.eventManager;eventManager&&(this._dragEvents={panmove:this._onDrag,panend:this._onDragEnd,pancancel:this._onDragCancel},eventManager.on(this._dragEvents))}},{key:"_removeDragEvents",value:function(){var eventManager=this._context.eventManager;eventManager&&this._dragEvents&&(eventManager.off(this._dragEvents),
this._dragEvents=null)}},{key:"_getDragEventPosition",value:function(event){event=event.offsetCenter;return[event.x,event.y]}},{key:"_getDragEventOffset",value:function(event){var _event$center=event.center;event=_event$center.x;_event$center=_event$center.y;var container=this._containerRef.current;return container?(container=container.getBoundingClientRect(),[container.left-event,container.top-_event$center]):null}},{key:"_getDraggedPosition",value:function(dragPos,dragOffset){return[dragPos[0]+
dragOffset[0],dragPos[1]+dragOffset[1]]}},{key:"_getDragLngLat",value:function(dragPos,dragOffset){var _this$props2=this.props,offsetLeft=_this$props2.offsetLeft;_this$props2=_this$props2.offsetTop;dragPos=this._getDraggedPosition(dragPos,dragOffset);dragPos=(0,_slicedToArray2["default"])(dragPos,2);return this._context.viewport.unproject([dragPos[0]-offsetLeft,dragPos[1]-_this$props2])}}]);return DraggableControl}(require["default"]);exports["default"]=require;(0,_defineProperty2["default"])(require,
"propTypes",global);(0,_defineProperty2["default"])(require,"defaultProps",module)}
//# sourceMappingURL=module$node_modules$react_map_gl$dist$es5$components$draggable_control.js.map
