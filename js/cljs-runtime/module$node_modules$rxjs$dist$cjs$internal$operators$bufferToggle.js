shadow$provide.module$node_modules$rxjs$dist$cjs$internal$operators$bufferToggle=function(global,require,module,exports){var __extends=this&&this.__extends||function(){var extendStatics=function(d$jscomp$0,b$jscomp$0){extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])};return extendStatics(d$jscomp$0,b$jscomp$0)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b);d.prototype=
null===b?Object.create(b):(__.prototype=b.prototype,new __)}}();Object.defineProperty(exports,"__esModule",{value:!0});exports.bufferToggle=void 0;var Subscription_1=require("module$node_modules$rxjs$dist$cjs$internal$Subscription"),subscribeToResult_1=require("module$node_modules$rxjs$dist$cjs$internal$util$subscribeToResult");global=require("module$node_modules$rxjs$dist$cjs$internal$OuterSubscriber");exports.bufferToggle=function(openings,closingSelector){return function(source){return source.lift(new BufferToggleOperator(openings,
closingSelector))}};var BufferToggleOperator=function(){function BufferToggleOperator(openings,closingSelector){this.openings=openings;this.closingSelector=closingSelector}BufferToggleOperator.prototype.call=function(subscriber,source){return source.subscribe(new BufferToggleSubscriber(subscriber,this.openings,this.closingSelector))};return BufferToggleOperator}(),BufferToggleSubscriber=function(_super){function BufferToggleSubscriber(destination,openings,closingSelector){destination=_super.call(this,
destination)||this;destination.openings=openings;destination.closingSelector=closingSelector;destination.contexts=[];destination.add(subscribeToResult_1.subscribeToResult(destination,openings));return destination}__extends(BufferToggleSubscriber,_super);BufferToggleSubscriber.prototype._next=function(value){for(var contexts=this.contexts,len=contexts.length,i=0;i<len;i++)contexts[i].buffer.push(value)};BufferToggleSubscriber.prototype._error=function(err){for(var contexts=this.contexts;0<contexts.length;){var context_1=
contexts.shift();context_1.subscription.unsubscribe();context_1.buffer=null;context_1.subscription=null}this.contexts=null;_super.prototype._error.call(this,err)};BufferToggleSubscriber.prototype._complete=function(){for(var contexts=this.contexts;0<contexts.length;){var context_2=contexts.shift();this.destination.next(context_2.buffer);context_2.subscription.unsubscribe();context_2.buffer=null;context_2.subscription=null}this.contexts=null;_super.prototype._complete.call(this)};BufferToggleSubscriber.prototype.notifyNext=
function(outerValue,innerValue,outerIndex,innerIndex,innerSub){outerValue?this.closeBuffer(outerValue):this.openBuffer(innerValue)};BufferToggleSubscriber.prototype.notifyComplete=function(innerSub){this.closeBuffer(innerSub.context)};BufferToggleSubscriber.prototype.openBuffer=function(value){try{var closingNotifier=this.closingSelector.call(this,value);closingNotifier&&this.trySubscribe(closingNotifier)}catch(err){this._error(err)}};BufferToggleSubscriber.prototype.closeBuffer=function(context){var contexts=
this.contexts;if(contexts&&context){var subscription=context.subscription;this.destination.next(context.buffer);contexts.splice(contexts.indexOf(context),1);this.remove(subscription);subscription.unsubscribe()}};BufferToggleSubscriber.prototype.trySubscribe=function(closingNotifier){var contexts=this.contexts,subscription=new Subscription_1.Subscription,context={buffer:[],subscription:subscription};contexts.push(context);closingNotifier=subscribeToResult_1.subscribeToResult(this,closingNotifier,context);
!closingNotifier||closingNotifier.closed?this.closeBuffer(context):(closingNotifier.context=context,this.add(closingNotifier),subscription.add(closingNotifier))};return BufferToggleSubscriber}(global.OuterSubscriber)}
//# sourceMappingURL=module$node_modules$rxjs$dist$cjs$internal$operators$bufferToggle.js.map
