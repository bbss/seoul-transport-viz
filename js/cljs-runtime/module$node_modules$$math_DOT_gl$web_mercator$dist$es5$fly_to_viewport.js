shadow$provide.module$node_modules$$math_DOT_gl$web_mercator$dist$es5$fly_to_viewport=function(global,require,module,exports){function getFlyToTransitionParams(startProps,endProps,opts){opts=Object.assign({},DEFAULT_OPTS,opts);opts=opts.curve;var startZoom=startProps.zoom,startCenter=[startProps.longitude,startProps.latitude],startScale=(0,_webMercatorUtils.zoomToScale)(startZoom),endZoom=endProps.zoom;endProps=[endProps.longitude,endProps.latitude];endZoom=(0,_webMercatorUtils.zoomToScale)(endZoom-
startZoom);startCenter=(0,_webMercatorUtils.lngLatToWorld)(startCenter);endProps=(0,_webMercatorUtils.lngLatToWorld)(endProps);endProps=vec2.sub([],endProps,startCenter);startProps=Math.max(startProps.width,startProps.height);var w1=startProps/endZoom;startScale*=vec2.length(endProps);var _u1=Math.max(startScale,EPSILON);endZoom=opts*opts;var b0=(w1*w1-startProps*startProps+endZoom*endZoom*_u1*_u1)/(2*startProps*endZoom*_u1);w1=(w1*w1-startProps*startProps-endZoom*endZoom*_u1*_u1)/(2*w1*endZoom*_u1);
b0=Math.log(Math.sqrt(b0*b0+1)-b0);w1=Math.log(Math.sqrt(w1*w1+1)-w1);return{startZoom:startZoom,startCenterXY:startCenter,uDelta:endProps,w0:startProps,u1:startScale,S:(w1-b0)/opts,rho:opts,rho2:endZoom,r0:b0,r1:w1}}global=require("module$node_modules$$babel$runtime$helpers$interopRequireWildcard");Object.defineProperty(exports,"__esModule",{value:!0});exports["default"]=function(startProps,endProps,t){var viewport={},_getFlyToTransitionPa=getFlyToTransitionParams(startProps,endProps,3<arguments.length&&
void 0!==arguments[3]?arguments[3]:{}),startZoom=_getFlyToTransitionPa.startZoom,startCenterXY=_getFlyToTransitionPa.startCenterXY,uDelta=_getFlyToTransitionPa.uDelta,w0=_getFlyToTransitionPa.w0,u1=_getFlyToTransitionPa.u1,S=_getFlyToTransitionPa.S,rho=_getFlyToTransitionPa.rho,rho2=_getFlyToTransitionPa.rho2;_getFlyToTransitionPa=_getFlyToTransitionPa.r0;if(u1<EPSILON){startCenterXY=!0;uDelta=!1;startZoom=void 0;try{for(var _iterator=VIEWPORT_TRANSITION_PROPS[Symbol.iterator](),_step;!(startCenterXY=
(_step=_iterator.next()).done);startCenterXY=!0){var key=_step.value,startValue=startProps[key],endValue=endProps[key];viewport[key]=(0,_mathUtils.lerp)(startValue,endValue,t)}}catch(err){uDelta=!0,startZoom=err}finally{try{if(!startCenterXY&&null!=_iterator["return"])_iterator["return"]()}finally{if(uDelta)throw startZoom;}}return viewport}_iterator=t*S;_step=(Math.cosh(_getFlyToTransitionPa)*Math.tanh(_getFlyToTransitionPa+rho*_iterator)-Math.sinh(_getFlyToTransitionPa))/rho2*w0/u1;_iterator=1/
(Math.cosh(_getFlyToTransitionPa)/Math.cosh(_getFlyToTransitionPa+rho*_iterator));startZoom+=(0,_webMercatorUtils.scaleToZoom)(_iterator);uDelta=vec2.scale([],uDelta,_step);vec2.add(uDelta,uDelta,startCenterXY);startCenterXY=(0,_webMercatorUtils.worldToLngLat)(uDelta);viewport.longitude=startCenterXY[0];viewport.latitude=startCenterXY[1];viewport.zoom=startZoom;return viewport};exports.getFlyToDuration=function(startProps,endProps){var opts=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},
_opts=opts=Object.assign({},DEFAULT_OPTS,opts),screenSpeed=_opts.screenSpeed,speed=_opts.speed;_opts=_opts.maxDuration;var _getFlyToTransitionPa2=getFlyToTransitionParams(startProps,endProps,opts);opts=_getFlyToTransitionPa2.rho;_getFlyToTransitionPa2=1E3*_getFlyToTransitionPa2.S;screenSpeed=Number.isFinite(screenSpeed)?_getFlyToTransitionPa2/(screenSpeed/opts):_getFlyToTransitionPa2/speed;return Number.isFinite(_opts)&&screenSpeed>_opts?0:screenSpeed};var _mathUtils=require("module$node_modules$$math_DOT_gl$web_mercator$dist$es5$math_utils"),
_webMercatorUtils=require("module$node_modules$$math_DOT_gl$web_mercator$dist$es5$web_mercator_utils"),vec2=global(require("module$node_modules$gl_matrix$cjs$vec2")),EPSILON=.01,VIEWPORT_TRANSITION_PROPS=["longitude","latitude","zoom"],DEFAULT_OPTS={curve:1.414,speed:1.2}}
//# sourceMappingURL=module$node_modules$$math_DOT_gl$web_mercator$dist$es5$fly_to_viewport.js.map
