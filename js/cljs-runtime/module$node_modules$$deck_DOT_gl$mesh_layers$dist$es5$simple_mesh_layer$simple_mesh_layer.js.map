{
"version":3,
"file":"module$node_modules$$deck_DOT_gl$mesh_layers$dist$es5$simple_mesh_layer$simple_mesh_layer.js",
"lineCount":12,
"mappings":"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",
"sources":["node_modules/@deck_DOT_gl/mesh-layers/dist/es5/simple-mesh-layer/simple-mesh-layer.js"],
"sourcesContent":["shadow$provide[\"module$node_modules$$deck_DOT_gl$mesh_layers$dist$es5$simple_mesh_layer$simple_mesh_layer\"] = function(global,require,module,exports) {\n\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\n\nvar _classCallCheck2 = _interopRequireDefault(require(\"@babel/runtime/helpers/classCallCheck\"));\n\nvar _createClass2 = _interopRequireDefault(require(\"@babel/runtime/helpers/createClass\"));\n\nvar _possibleConstructorReturn2 = _interopRequireDefault(require(\"@babel/runtime/helpers/possibleConstructorReturn\"));\n\nvar _getPrototypeOf2 = _interopRequireDefault(require(\"@babel/runtime/helpers/getPrototypeOf\"));\n\nvar _get2 = _interopRequireDefault(require(\"@babel/runtime/helpers/get\"));\n\nvar _inherits2 = _interopRequireDefault(require(\"@babel/runtime/helpers/inherits\"));\n\nvar _core = require(\"@deck.gl/core\");\n\nvar _core2 = require(\"@luma.gl/core\");\n\nvar _webgl = require(\"@luma.gl/webgl\");\n\nvar _matrix = require(\"../utils/matrix\");\n\nvar _simpleMeshLayerVertex = _interopRequireDefault(require(\"./simple-mesh-layer-vertex.glsl\"));\n\nvar _simpleMeshLayerFragment = _interopRequireDefault(require(\"./simple-mesh-layer-fragment.glsl\"));\n\nfunction getTextureFromData(gl, data, opts) {\n  if (data instanceof _core2.Texture2D) {\n    return data;\n  }\n\n  return new _core2.Texture2D(gl, Object.assign({\n    data: data\n  }, opts));\n}\n\nfunction validateGeometryAttributes(attributes) {\n  _core.log.assert(attributes.positions || attributes.POSITION, 'SimpleMeshLayer requires \"postions\" or \"POSITION\" attribute in mesh property.');\n}\n\nfunction getGeometry(data) {\n  if (data.attributes) {\n    validateGeometryAttributes(data.attributes);\n\n    if (data instanceof _core2.Geometry) {\n      return data;\n    } else {\n      return new _core2.Geometry(data);\n    }\n  } else if (data.positions || data.POSITION) {\n    validateGeometryAttributes(data);\n    return new _core2.Geometry({\n      attributes: data\n    });\n  }\n\n  throw Error('Invalid mesh');\n}\n\nvar DEFAULT_COLOR = [0, 0, 0, 255];\nvar defaultProps = {\n  mesh: {\n    value: null,\n    type: 'object',\n    async: true\n  },\n  texture: {\n    type: 'object',\n    value: null,\n    async: true\n  },\n  sizeScale: {\n    type: 'number',\n    value: 1,\n    min: 0\n  },\n  parameters: {\n    depthTest: true,\n    depthFunc: 515\n  },\n  _instanced: true,\n  wireframe: false,\n  material: true,\n  getPosition: {\n    type: 'accessor',\n    value: function value(x) {\n      return x.position;\n    }\n  },\n  getColor: {\n    type: 'accessor',\n    value: DEFAULT_COLOR\n  },\n  getOrientation: {\n    type: 'accessor',\n    value: [0, 0, 0]\n  },\n  getScale: {\n    type: 'accessor',\n    value: [1, 1, 1]\n  },\n  getTranslation: {\n    type: 'accessor',\n    value: [0, 0, 0]\n  },\n  getTransformMatrix: {\n    type: 'accessor',\n    value: []\n  }\n};\n\nvar SimpleMeshLayer = function (_Layer) {\n  (0, _inherits2[\"default\"])(SimpleMeshLayer, _Layer);\n\n  function SimpleMeshLayer() {\n    (0, _classCallCheck2[\"default\"])(this, SimpleMeshLayer);\n    return (0, _possibleConstructorReturn2[\"default\"])(this, (0, _getPrototypeOf2[\"default\"])(SimpleMeshLayer).apply(this, arguments));\n  }\n\n  (0, _createClass2[\"default\"])(SimpleMeshLayer, [{\n    key: \"getShaders\",\n    value: function getShaders() {\n      var transpileToGLSL100 = !(0, _core2.isWebGL2)(this.context.gl);\n      var defines = {};\n\n      if ((0, _webgl.hasFeature)(this.context.gl, _webgl.FEATURES.GLSL_DERIVATIVES)) {\n        defines.DERIVATIVES_AVAILABLE = 1;\n      }\n\n      return (0, _get2[\"default\"])((0, _getPrototypeOf2[\"default\"])(SimpleMeshLayer.prototype), \"getShaders\", this).call(this, {\n        vs: _simpleMeshLayerVertex[\"default\"],\n        fs: _simpleMeshLayerFragment[\"default\"],\n        modules: [_core.project32, _core.phongLighting, _core.picking],\n        transpileToGLSL100: transpileToGLSL100,\n        defines: defines\n      });\n    }\n  }, {\n    key: \"initializeState\",\n    value: function initializeState() {\n      var attributeManager = this.getAttributeManager();\n      attributeManager.addInstanced({\n        instancePositions: {\n          transition: true,\n          type: 5130,\n          fp64: this.use64bitPositions(),\n          size: 3,\n          accessor: 'getPosition'\n        },\n        instanceColors: {\n          type: 5121,\n          transition: true,\n          size: this.props.colorFormat.length,\n          normalized: true,\n          accessor: 'getColor',\n          defaultValue: [0, 0, 0, 255]\n        },\n        instanceModelMatrix: _matrix.MATRIX_ATTRIBUTES\n      });\n      this.setState({\n        emptyTexture: new _core2.Texture2D(this.context.gl, {\n          data: new Uint8Array(4),\n          width: 1,\n          height: 1\n        })\n      });\n    }\n  }, {\n    key: \"updateState\",\n    value: function updateState(_ref) {\n      var props = _ref.props,\n          oldProps = _ref.oldProps,\n          changeFlags = _ref.changeFlags;\n      (0, _get2[\"default\"])((0, _getPrototypeOf2[\"default\"])(SimpleMeshLayer.prototype), \"updateState\", this).call(this, {\n        props: props,\n        oldProps: oldProps,\n        changeFlags: changeFlags\n      });\n\n      if (props.mesh !== oldProps.mesh || changeFlags.extensionsChanged) {\n        if (this.state.model) {\n          this.state.model[\"delete\"]();\n        }\n\n        if (props.mesh) {\n          this.setState({\n            model: this.getModel(props.mesh)\n          });\n          var attributes = props.mesh.attributes || props.mesh;\n          this.setState({\n            hasNormals: Boolean(attributes.NORMAL || attributes.normals)\n          });\n        }\n\n        this.getAttributeManager().invalidateAll();\n      }\n\n      if (props.texture !== oldProps.texture) {\n        this.setTexture(props.texture);\n      }\n\n      if (this.state.model) {\n        this.state.model.setDrawMode(this.props.wireframe ? 3 : 4);\n      }\n    }\n  }, {\n    key: \"finalizeState\",\n    value: function finalizeState() {\n      (0, _get2[\"default\"])((0, _getPrototypeOf2[\"default\"])(SimpleMeshLayer.prototype), \"finalizeState\", this).call(this);\n      this.state.emptyTexture[\"delete\"]();\n\n      if (this.state.texture) {\n        this.state.texture[\"delete\"]();\n      }\n    }\n  }, {\n    key: \"draw\",\n    value: function draw(_ref2) {\n      var uniforms = _ref2.uniforms;\n\n      if (!this.state.model) {\n        return;\n      }\n\n      var viewport = this.context.viewport;\n      var _this$props = this.props,\n          sizeScale = _this$props.sizeScale,\n          coordinateSystem = _this$props.coordinateSystem,\n          _instanced = _this$props._instanced;\n      this.state.model.draw({\n        uniforms: Object.assign({}, uniforms, {\n          sizeScale: sizeScale,\n          composeModelMatrix: !_instanced || (0, _matrix.shouldComposeModelMatrix)(viewport, coordinateSystem),\n          flatShading: !this.state.hasNormals\n        })\n      });\n    }\n  }, {\n    key: \"getModel\",\n    value: function getModel(mesh) {\n      var model = new _core2.Model(this.context.gl, Object.assign({}, this.getShaders(), {\n        id: this.props.id,\n        geometry: getGeometry(mesh),\n        isInstanced: true\n      }));\n      var _this$state = this.state,\n          texture = _this$state.texture,\n          emptyTexture = _this$state.emptyTexture;\n      model.setUniforms({\n        sampler: texture || emptyTexture,\n        hasTexture: Boolean(texture)\n      });\n      return model;\n    }\n  }, {\n    key: \"setTexture\",\n    value: function setTexture(image) {\n      var gl = this.context.gl;\n      var _this$state2 = this.state,\n          emptyTexture = _this$state2.emptyTexture,\n          model = _this$state2.model;\n\n      if (this.state.texture) {\n        this.state.texture[\"delete\"]();\n      }\n\n      var texture = image ? getTextureFromData(gl, image) : null;\n      this.setState({\n        texture: texture\n      });\n\n      if (model) {\n        model.setUniforms({\n          sampler: texture || emptyTexture,\n          hasTexture: Boolean(texture)\n        });\n      }\n    }\n  }]);\n  return SimpleMeshLayer;\n}(_core.Layer);\n\nexports[\"default\"] = SimpleMeshLayer;\nSimpleMeshLayer.layerName = 'SimpleMeshLayer';\nSimpleMeshLayer.defaultProps = defaultProps;\n//# sourceMappingURL=simple-mesh-layer.js.map\n};"],
"names":["shadow$provide","global","require","module","exports","validateGeometryAttributes","attributes","_core","log","assert","positions","POSITION","getGeometry","data","_core2","Geometry","Error","_interopRequireDefault","Object","defineProperty","value","_classCallCheck2","_createClass2","_possibleConstructorReturn2","_getPrototypeOf2","_get2","_inherits2","_webgl","_matrix","_simpleMeshLayerVertex","_simpleMeshLayerFragment","SimpleMeshLayer","_Layer","apply","arguments","key","getShaders","transpileToGLSL100","isWebGL2","context","gl","defines","hasFeature","FEATURES","GLSL_DERIVATIVES","DERIVATIVES_AVAILABLE","prototype","call","vs","fs","modules","project32","phongLighting","picking","initializeState","getAttributeManager","attributeManager","addInstanced","instancePositions","transition","type","fp64","use64bitPositions","size","accessor","instanceColors","props","colorFormat","length","normalized","defaultValue","instanceModelMatrix","MATRIX_ATTRIBUTES","setState","emptyTexture","Texture2D","Uint8Array","width","height","updateState","_ref","oldProps","changeFlags","mesh","extensionsChanged","state","model","getModel","hasNormals","NORMAL","normals","invalidateAll","texture","setTexture","setDrawMode","wireframe","finalizeState","draw","_ref2","viewport","_this$props","coordinateSystem","uniforms","assign","sizeScale","composeModelMatrix","_instanced","shouldComposeModelMatrix","flatShading","Model","id","geometry","isInstanced","_this$state","setUniforms","sampler","hasTexture","image","_this$state2","opts","Layer","layerName","defaultProps","async","min","parameters","depthTest","depthFunc","material","getPosition","x","position","getColor","DEFAULT_COLOR","getOrientation","getScale","getTranslation","getTransformMatrix"]
}
