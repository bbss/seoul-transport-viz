shadow$provide.module$node_modules$$deck_DOT_gl$layers$dist$es5$path_layer$path_tesselator=function(global,require,module,exports){function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=
null!=arguments[i]?arguments[i]:{};i%2?ownKeys(Object(source),!0).forEach(function(key){(0,_defineProperty2["default"])(target,key,source[key])}):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))})}return target}global=require("module$node_modules$$babel$runtime$helpers$interopRequireDefault");Object.defineProperty(exports,
"__esModule",{value:!0});exports["default"]=void 0;var _defineProperty2=global(require("module$node_modules$$babel$runtime$helpers$defineProperty")),_classCallCheck2=global(require("module$node_modules$$babel$runtime$helpers$classCallCheck")),_createClass2=global(require("module$node_modules$$babel$runtime$helpers$createClass")),_possibleConstructorReturn2=global(require("module$node_modules$$babel$runtime$helpers$possibleConstructorReturn")),_getPrototypeOf2=global(require("module$node_modules$$babel$runtime$helpers$getPrototypeOf")),
_get2=global(require("module$node_modules$$babel$runtime$helpers$get")),_inherits2=global(require("module$node_modules$$babel$runtime$helpers$inherits"));global=require("module$node_modules$$deck_DOT_gl$core$dist$es5$index");var _path=require("module$node_modules$$deck_DOT_gl$layers$dist$es5$path_layer$path");require=function(_Tesselator){function PathTesselator(opts){(0,_classCallCheck2["default"])(this,PathTesselator);return(0,_possibleConstructorReturn2["default"])(this,(0,_getPrototypeOf2["default"])(PathTesselator).call(this,
_objectSpread({},opts,{attributes:{positions:{size:3,padding:18,initialize:!0,type:opts.fp64?Float64Array:Float32Array},segmentTypes:{size:1,type:Uint8ClampedArray}}})))}(0,_inherits2["default"])(PathTesselator,_Tesselator);(0,_createClass2["default"])(PathTesselator,[{key:"getGeometryFromBuffer",value:function(buffer){return this.normalize?(0,_get2["default"])((0,_getPrototypeOf2["default"])(PathTesselator.prototype),"getGeometryFromBuffer",this).call(this,buffer):function(){return null}}},{key:"normalizeGeometry",
value:function(path){return this.normalize?(0,_path.normalizePath)(path,this.positionSize,this.opts.resolution,this.opts.wrapLongitude):path}},{key:"get",value:function(attributeName){return this.attributes[attributeName]}},{key:"getGeometrySize",value:function(path){if(Array.isArray(path[0])){var size=0,_iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _iterator=path[Symbol.iterator](),_step;!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=
!0)size+=this.getGeometrySize(_step.value)}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{if(!_iteratorNormalCompletion&&null!=_iterator["return"])_iterator["return"]()}finally{if(_didIteratorError)throw _iteratorError;}}return size}size=this.getPathLength(path);return 2>size?0:this.isClosed(path)?3>size?0:size+2:size}},{key:"updateGeometryAttributes",value:function(path,context){if(0!==context.geometrySize)if(path&&Array.isArray(path[0])){var _iteratorNormalCompletion2=!0,_didIteratorError2=
!1,_iteratorError2=void 0;try{for(var _iterator2=path[Symbol.iterator](),_step2;!(_iteratorNormalCompletion2=(_step2=_iterator2.next()).done);_iteratorNormalCompletion2=!0){var subPath=_step2.value,geometrySize=this.getGeometrySize(subPath);context.geometrySize=geometrySize;this.updateGeometryAttributes(subPath,context);context.vertexStart+=geometrySize}}catch(err){_didIteratorError2=!0,_iteratorError2=err}finally{try{if(!_iteratorNormalCompletion2&&null!=_iterator2["return"])_iterator2["return"]()}finally{if(_didIteratorError2)throw _iteratorError2;
}}}else this._updateSegmentTypes(path,context),this._updatePositions(path,context)}},{key:"_updateSegmentTypes",value:function(path,context){var segmentTypes=this.attributes.segmentTypes;path=this.isClosed(path);var vertexStart=context.vertexStart;context=context.geometrySize;segmentTypes.fill(0,vertexStart,vertexStart+context);path?(segmentTypes[vertexStart]=4,segmentTypes[vertexStart+context-2]=4):(segmentTypes[vertexStart]+=1,segmentTypes[vertexStart+context-2]+=2);segmentTypes[vertexStart+context-
1]=4}},{key:"_updatePositions",value:function(path,context){var positions=this.attributes.positions;if(positions){var geometrySize=context.geometrySize,p=Array(3);context=context.vertexStart;for(var ptIndex=0;ptIndex<geometrySize;context++,ptIndex++)this.getPointOnPath(path,ptIndex,p),positions[3*context]=p[0],positions[3*context+1]=p[1],positions[3*context+2]=p[2]}}},{key:"getPathLength",value:function(path){return path.length/this.positionSize}},{key:"getPointOnPath",value:function(path,index){var target=
2<arguments.length&&void 0!==arguments[2]?arguments[2]:[],positionSize=this.positionSize;index*positionSize>=path.length&&(index+=1-path.length/positionSize);var i=index*positionSize;target[0]=path[i];target[1]=path[i+1];target[2]=3===positionSize&&path[i+2]||0;return target}},{key:"isClosed",value:function(path){if(!this.normalize)return this.opts.loop;var positionSize=this.positionSize,lastPointIndex=path.length-positionSize;return path[0]===path[lastPointIndex]&&path[1]===path[lastPointIndex+1]&&
(2===positionSize||path[2]===path[lastPointIndex+2])}}]);return PathTesselator}(global.Tesselator);exports["default"]=require}
//# sourceMappingURL=module$node_modules$$deck_DOT_gl$layers$dist$es5$path_layer$path_tesselator.js.map
