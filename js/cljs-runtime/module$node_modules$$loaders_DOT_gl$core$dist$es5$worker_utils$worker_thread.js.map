{
"version":3,
"file":"module$node_modules$$loaders_DOT_gl$core$dist$es5$worker_utils$worker_thread.js",
"lineCount":5,
"mappings":"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",
"sources":["node_modules/@loaders_DOT_gl/core/dist/es5/worker-utils/worker-thread.js"],
"sourcesContent":["shadow$provide[\"module$node_modules$$loaders_DOT_gl$core$dist$es5$worker_utils$worker_thread\"] = function(global,require,module,exports) {\n\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\n\nvar _regenerator = _interopRequireDefault(require(\"@babel/runtime/regenerator\"));\n\nvar _asyncToGenerator2 = _interopRequireDefault(require(\"@babel/runtime/helpers/asyncToGenerator\"));\n\nvar _classCallCheck2 = _interopRequireDefault(require(\"@babel/runtime/helpers/classCallCheck\"));\n\nvar _createClass2 = _interopRequireDefault(require(\"@babel/runtime/helpers/createClass\"));\n\nvar _getWorkerUrl = require(\"./get-worker-url\");\n\nvar _loaderUtils = require(\"@loaders.gl/loader-utils\");\n\nvar count = 0;\n\nfunction defaultOnMessage(_ref) {\n  var data = _ref.data,\n      resolve = _ref.resolve;\n  resolve(data);\n}\n\nvar WorkerThread = function () {\n  function WorkerThread(_ref2) {\n    var source = _ref2.source,\n        _ref2$name = _ref2.name,\n        name = _ref2$name === void 0 ? \"web-worker-\".concat(count++) : _ref2$name,\n        onMessage = _ref2.onMessage;\n    (0, _classCallCheck2[\"default\"])(this, WorkerThread);\n    var url = (0, _getWorkerUrl.getWorkerURL)(source, name);\n    this.worker = new Worker(url, {\n      name: name\n    });\n    this.name = name;\n    this.onMessage = onMessage || defaultOnMessage;\n  }\n\n  (0, _createClass2[\"default\"])(WorkerThread, [{\n    key: \"process\",\n    value: function () {\n      var _process = (0, _asyncToGenerator2[\"default\"])(_regenerator[\"default\"].mark(function _callee(data) {\n        var _this = this;\n\n        return _regenerator[\"default\"].wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                return _context.abrupt(\"return\", new Promise(function (resolve, reject) {\n                  _this.worker.onmessage = function (event) {\n                    return _this.onMessage({\n                      worker: _this.worker,\n                      data: event.data,\n                      resolve: resolve,\n                      reject: reject\n                    });\n                  };\n\n                  _this.worker.onerror = function (error) {\n                    var message = \"\".concat(_this.name, \": WorkerThread.process() failed\");\n\n                    if (error.message) {\n                      message += \" \".concat(error.message, \" \").concat(error.filename, \":\").concat(error.lineno, \":\").concat(error.colno);\n                    }\n\n                    var betterError = new Error(message);\n                    console.error(error);\n                    reject(betterError);\n                  };\n\n                  var transferList = (0, _loaderUtils.getTransferList)(data);\n\n                  _this.worker.postMessage(data, transferList);\n                }));\n\n              case 1:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }));\n\n      function process(_x) {\n        return _process.apply(this, arguments);\n      }\n\n      return process;\n    }()\n  }, {\n    key: \"destroy\",\n    value: function destroy() {\n      this.worker.terminate();\n      this.worker = null;\n    }\n  }]);\n  return WorkerThread;\n}();\n\nexports[\"default\"] = WorkerThread;\n//# sourceMappingURL=worker-thread.js.map\n};"],
"names":["shadow$provide","global","require","module","exports","defaultOnMessage","_ref","resolve","data","_interopRequireDefault","Object","defineProperty","value","_regenerator","_asyncToGenerator2","_classCallCheck2","_createClass2","_getWorkerUrl","_loaderUtils","count","WorkerThread","_ref2","source","_ref2$name","name","concat","onMessage","url","getWorkerURL","worker","Worker","key","_process","mark","_callee","_this","wrap","_callee$","_context","prev","next","abrupt","Promise","reject","onmessage","_this.worker.onmessage","event","onerror","_this.worker.onerror","error","message","filename","lineno","colno","betterError","Error","console","transferList","getTransferList","postMessage","stop","process","_x","apply","arguments","destroy","terminate"]
}
