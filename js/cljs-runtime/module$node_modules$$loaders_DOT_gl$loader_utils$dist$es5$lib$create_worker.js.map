{
"version":3,
"file":"module$node_modules$$loaders_DOT_gl$loader_utils$dist$es5$lib$create_worker.js",
"lineCount":10,
"mappings":"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",
"sources":["node_modules/@loaders_DOT_gl/loader-utils/dist/es5/lib/create-worker.js"],
"sourcesContent":["shadow$provide[\"module$node_modules$$loaders_DOT_gl$loader_utils$dist$es5$lib$create_worker\"] = function(global,require,module,exports) {\n\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = createWorker;\n\nvar _defineProperty2 = _interopRequireDefault(require(\"@babel/runtime/helpers/defineProperty\"));\n\nvar _regenerator = _interopRequireDefault(require(\"@babel/runtime/regenerator\"));\n\nvar _asyncToGenerator2 = _interopRequireDefault(require(\"@babel/runtime/helpers/asyncToGenerator\"));\n\nvar _getTransferList = require(\"./worker-utils/get-transfer-list\");\n\nvar _validateLoaderVersion = require(\"./validate-loader-version\");\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { (0, _defineProperty2[\"default\"])(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction createWorker(loader) {\n  if (typeof self === 'undefined') {\n    return;\n  }\n\n  var requestId = 0;\n\n  var parse = function parse(arraybuffer) {\n    var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    var url = arguments.length > 2 ? arguments[2] : undefined;\n    return new Promise(function (resolve, reject) {\n      var id = requestId++;\n\n      var onMessage = function onMessage(_ref) {\n        var data = _ref.data;\n\n        if (!data || data.id !== id) {\n          return;\n        }\n\n        switch (data.type) {\n          case 'parse-done':\n            self.removeEventListener('message', onMessage);\n            resolve(data.result);\n            break;\n\n          case 'parse-error':\n            self.removeEventListener('message', onMessage);\n            reject(data.message);\n            break;\n\n          default:\n        }\n      };\n\n      self.addEventListener('message', onMessage);\n      self.postMessage({\n        type: 'parse',\n        id: id,\n        arraybuffer: arraybuffer,\n        options: options,\n        url: url\n      }, [arraybuffer]);\n    });\n  };\n\n  self.onmessage = function () {\n    var _ref2 = (0, _asyncToGenerator2[\"default\"])(_regenerator[\"default\"].mark(function _callee(evt) {\n      var data, arraybuffer, _data$byteOffset, byteOffset, _data$byteLength, byteLength, _data$options, options, result, transferList;\n\n      return _regenerator[\"default\"].wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              data = evt.data;\n              _context.prev = 1;\n\n              if (isKnownMessage(data, loader.name)) {\n                _context.next = 4;\n                break;\n              }\n\n              return _context.abrupt(\"return\");\n\n            case 4:\n              (0, _validateLoaderVersion.validateLoaderVersion)(loader, data.source.split('@')[1]);\n              arraybuffer = data.arraybuffer, _data$byteOffset = data.byteOffset, byteOffset = _data$byteOffset === void 0 ? 0 : _data$byteOffset, _data$byteLength = data.byteLength, byteLength = _data$byteLength === void 0 ? 0 : _data$byteLength, _data$options = data.options, options = _data$options === void 0 ? {} : _data$options;\n              _context.next = 8;\n              return parseData({\n                loader: loader,\n                arraybuffer: arraybuffer,\n                byteOffset: byteOffset,\n                byteLength: byteLength,\n                options: options,\n                context: {\n                  parse: parse\n                }\n              });\n\n            case 8:\n              result = _context.sent;\n              transferList = (0, _getTransferList.getTransferList)(result);\n              self.postMessage({\n                type: 'done',\n                result: result\n              }, transferList);\n              _context.next = 16;\n              break;\n\n            case 13:\n              _context.prev = 13;\n              _context.t0 = _context[\"catch\"](1);\n              self.postMessage({\n                type: 'error',\n                message: _context.t0.message\n              });\n\n            case 16:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, null, [[1, 13]]);\n    }));\n\n    return function (_x) {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n}\n\nfunction parseData(_x2) {\n  return _parseData.apply(this, arguments);\n}\n\nfunction _parseData() {\n  _parseData = (0, _asyncToGenerator2[\"default\"])(_regenerator[\"default\"].mark(function _callee2(_ref3) {\n    var loader, arraybuffer, byteOffset, byteLength, options, context, data, parser, textDecoder;\n    return _regenerator[\"default\"].wrap(function _callee2$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            loader = _ref3.loader, arraybuffer = _ref3.arraybuffer, byteOffset = _ref3.byteOffset, byteLength = _ref3.byteLength, options = _ref3.options, context = _ref3.context;\n\n            if (!(loader.parseSync || loader.parse)) {\n              _context2.next = 6;\n              break;\n            }\n\n            data = arraybuffer;\n            parser = loader.parseSync || loader.parse;\n            _context2.next = 13;\n            break;\n\n          case 6:\n            if (!loader.parseTextSync) {\n              _context2.next = 12;\n              break;\n            }\n\n            textDecoder = new TextDecoder();\n            data = textDecoder.decode(arraybuffer);\n            parser = loader.parseTextSync;\n            _context2.next = 13;\n            break;\n\n          case 12:\n            throw new Error(\"Could not load data with \".concat(loader.name, \" loader\"));\n\n          case 13:\n            options = _objectSpread(_objectSpread({}, options), {}, {\n              modules: loader && loader.options && loader.options.modules || {},\n              worker: false\n            });\n            _context2.next = 16;\n            return parser(data, _objectSpread({}, options), context, loader);\n\n          case 16:\n            return _context2.abrupt(\"return\", _context2.sent);\n\n          case 17:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, _callee2);\n  }));\n  return _parseData.apply(this, arguments);\n}\n\nfunction isKnownMessage(data, name) {\n  return data && data.type === 'parse' && data.source && data.source.startsWith('loaders.gl');\n}\n//# sourceMappingURL=create-worker.js.map\n};"],
"names":["shadow$provide","global","require","module","exports","ownKeys","object","enumerableOnly","keys","Object","getOwnPropertySymbols","symbols","filter","sym","getOwnPropertyDescriptor","enumerable","push","apply","_objectSpread","target","i","arguments","length","source","forEach","key","_defineProperty2","getOwnPropertyDescriptors","defineProperties","defineProperty","parseData","_x2","_parseData","_asyncToGenerator2","_regenerator","mark","_callee2","_ref3","loader","arraybuffer","options","context","data","parser","textDecoder","wrap","_callee2$","_context2","prev","next","parseSync","parse","parseTextSync","TextDecoder","decode","Error","concat","name","modules","worker","abrupt","sent","stop","_interopRequireDefault","value","createWorker","self","requestId","undefined","url","Promise","resolve","reject","id","addEventListener","onMessage","_ref","type","removeEventListener","result","message","postMessage","onmessage","_ref2","_callee","evt","_data$byteOffset","byteOffset","_data$byteLength","byteLength","_data$options","transferList","_callee$","_context","startsWith","_validateLoaderVersion","validateLoaderVersion","split","_getTransferList","getTransferList","t0","_x"]
}
