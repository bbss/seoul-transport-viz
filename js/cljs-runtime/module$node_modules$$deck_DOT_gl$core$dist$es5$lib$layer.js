shadow$provide.module$node_modules$$deck_DOT_gl$core$dist$es5$lib$layer=function(global,require,module,exports){module=require("module$node_modules$$babel$runtime$helpers$interopRequireDefault");Object.defineProperty(exports,"__esModule",{value:!0});exports["default"]=void 0;var _slicedToArray2=module(require("module$node_modules$$babel$runtime$helpers$slicedToArray")),_classCallCheck2=module(require("module$node_modules$$babel$runtime$helpers$classCallCheck")),_createClass2=module(require("module$node_modules$$babel$runtime$helpers$createClass")),
_possibleConstructorReturn2=module(require("module$node_modules$$babel$runtime$helpers$possibleConstructorReturn")),_getPrototypeOf2=module(require("module$node_modules$$babel$runtime$helpers$getPrototypeOf")),_inherits2=module(require("module$node_modules$$babel$runtime$helpers$inherits")),_constants=require("module$node_modules$$deck_DOT_gl$core$dist$es5$lib$constants"),_attributeManager=module(require("module$node_modules$$deck_DOT_gl$core$dist$es5$lib$attribute$attribute_manager")),_uniformTransitionManager=
module(require("module$node_modules$$deck_DOT_gl$core$dist$es5$lib$uniform_transition_manager")),_props=require("module$node_modules$$deck_DOT_gl$core$dist$es5$lifecycle$props"),_count=require("module$node_modules$$deck_DOT_gl$core$dist$es5$utils$count"),_log=module(require("module$node_modules$$deck_DOT_gl$core$dist$es5$utils$log")),_debug=module(require("module$node_modules$$deck_DOT_gl$core$dist$es5$debug$index")),_core=require("module$node_modules$$luma_DOT_gl$core$dist$es5$index"),_assert=module(require("module$node_modules$$deck_DOT_gl$core$dist$es5$utils$assert")),
_shader=require("module$node_modules$$deck_DOT_gl$core$dist$es5$utils$shader"),_projectFunctions=require("module$node_modules$$deck_DOT_gl$core$dist$es5$shaderlib$project$project_functions"),_typedArrayManager=module(require("module$node_modules$$deck_DOT_gl$core$dist$es5$utils$typed_array_manager"));global=module(require("module$node_modules$$deck_DOT_gl$core$dist$es5$lifecycle$component"));var _layerState=module(require("module$node_modules$$deck_DOT_gl$core$dist$es5$lib$layer_state")),_webMercator=
require("module$node_modules$$math_DOT_gl$web_mercator$dist$es5$index"),_core2=require("module$node_modules$$loaders_DOT_gl$core$dist$es5$index");require=Object.freeze([]);var pickingColorCache=new Uint8ClampedArray(0);require={data:{type:"data",value:require,async:!0},dataComparator:null,_dataDiff:{type:"function",value:function(data){return data&&data.__diff},compare:!1,optional:!0},dataTransform:{type:"function",value:null,compare:!1,optional:!0},onDataLoad:{type:"function",value:null,compare:!1,
optional:!0},fetch:{type:"function",value:function(url,_ref){var propName=_ref.propName,layer=_ref.layer;_ref=layer.context.resourceManager;var loadOptions=layer.getLoadOptions(),inResourceManager=_ref.contains(url);inResourceManager||loadOptions||(_ref.add({resourceId:url,data:url,persistent:!1}),inResourceManager=!0);return inResourceManager?_ref.subscribe({resourceId:url,onChange:function(data){return layer.internalState.reloadAsyncProp(propName,data)},consumerId:layer.id,requestId:propName}):
(0,_core2.load)(url,loadOptions)},compare:!1},updateTriggers:{},visible:!0,pickable:!1,opacity:{type:"number",min:0,max:1,value:1},onHover:{type:"function",value:null,compare:!1,optional:!0},onClick:{type:"function",value:null,compare:!1,optional:!0},onDragStart:{type:"function",value:null,compare:!1,optional:!0},onDrag:{type:"function",value:null,compare:!1,optional:!0},onDragEnd:{type:"function",value:null,compare:!1,optional:!0},coordinateSystem:_constants.COORDINATE_SYSTEM.DEFAULT,coordinateOrigin:{type:"array",
value:[0,0,0],compare:!0},modelMatrix:{type:"array",value:null,compare:!0,optional:!0},wrapLongitude:!1,positionFormat:"XYZ",colorFormat:"RGBA",parameters:{},uniforms:{},extensions:[],getPolygonOffset:{type:"function",value:function(_ref2){return[0,100*-_ref2.layerIndex]},compare:!1},highlightedObjectIndex:null,autoHighlight:!1,highlightColor:{type:"accessor",value:[0,0,128,128]}};global=function(_Component){function Layer(){(0,_classCallCheck2["default"])(this,Layer);return(0,_possibleConstructorReturn2["default"])(this,
(0,_getPrototypeOf2["default"])(Layer).apply(this,arguments))}(0,_inherits2["default"])(Layer,_Component);(0,_createClass2["default"])(Layer,[{key:"toString",value:function(){return"".concat(this.constructor.layerName||this.constructor.name,"({id: '").concat(this.props.id,"'})")}},{key:"setState",value:function(updateObject){this.setChangeFlags({stateChanged:!0});Object.assign(this.state,updateObject);this.setNeedsRedraw()}},{key:"setNeedsRedraw",value:function(){var redraw=0<arguments.length&&void 0!==
arguments[0]?arguments[0]:!0;this.internalState&&(this.internalState.needsRedraw=redraw)}},{key:"setNeedsUpdate",value:function(){this.context.layerManager.setNeedsUpdate(String(this));this.internalState.needsUpdate=!0}},{key:"getNeedsRedraw",value:function(){return this._getNeedsRedraw(0<arguments.length&&void 0!==arguments[0]?arguments[0]:{clearRedrawFlags:!1})}},{key:"needsUpdate",value:function(){return this.internalState.needsUpdate||this.hasUniformTransition()||this.shouldUpdateState(this._getUpdateParams())}},
{key:"hasUniformTransition",value:function(){return this.internalState.uniformTransitions.active}},{key:"isPickable",value:function(){return this.props.pickable&&this.props.visible}},{key:"getModels",value:function(){return this.state&&(this.state.models||(this.state.model?[this.state.model]:[]))}},{key:"getAttributeManager",value:function(){return this.internalState&&this.internalState.attributeManager}},{key:"getCurrentLayer",value:function(){return this.internalState&&this.internalState.layer}},
{key:"getLoadOptions",value:function(){return this.props.loadOptions}},{key:"project",value:function(xyz){var viewport=this.context.viewport,worldPosition=(0,_projectFunctions.getWorldPosition)(xyz,{viewport:viewport,modelMatrix:this.props.modelMatrix,coordinateOrigin:this.props.coordinateOrigin,coordinateSystem:this.props.coordinateSystem});viewport=(0,_webMercator.worldToPixels)(worldPosition,viewport.pixelProjectionMatrix);var _worldToPixels2=(0,_slicedToArray2["default"])(viewport,3);viewport=
_worldToPixels2[0];worldPosition=_worldToPixels2[1];_worldToPixels2=_worldToPixels2[2];return 2===xyz.length?[viewport,worldPosition]:[viewport,worldPosition,_worldToPixels2]}},{key:"unproject",value:function(xy){return this.context.viewport.unproject(xy)}},{key:"projectPosition",value:function(xyz){return(0,_projectFunctions.projectPosition)(xyz,{viewport:this.context.viewport,modelMatrix:this.props.modelMatrix,coordinateOrigin:this.props.coordinateOrigin,coordinateSystem:this.props.coordinateSystem})}},
{key:"use64bitPositions",value:function(){var coordinateSystem=this.props.coordinateSystem;return coordinateSystem===_constants.COORDINATE_SYSTEM.DEFAULT||coordinateSystem===_constants.COORDINATE_SYSTEM.LNGLAT||coordinateSystem===_constants.COORDINATE_SYSTEM.CARTESIAN}},{key:"onHover",value:function(info,pickingEvent){return this.props.onHover?this.props.onHover(info,pickingEvent):!1}},{key:"onClick",value:function(info,pickingEvent){return this.props.onClick?this.props.onClick(info,pickingEvent):
!1}},{key:"nullPickingColor",value:function(){return[0,0,0]}},{key:"encodePickingColor",value:function(i){var target=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[];target[0]=i+1&255;target[1]=i+1>>8&255;target[2]=i+1>>8>>8&255;return target}},{key:"decodePickingColor",value:function(color){(0,_assert["default"])(color instanceof Uint8Array);color=(0,_slicedToArray2["default"])(color,3);return color[0]+256*color[1]+65536*color[2]-1}},{key:"initializeState",value:function(){throw Error("Layer ".concat(this,
" has not defined initializeState"));}},{key:"getShaders",value:function(shaders){var _iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _iterator=this.props.extensions[Symbol.iterator](),_step;!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0){var extension=_step.value;shaders=(0,_shader.mergeShaders)(shaders,extension.getShaders.call(this,extension))}}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{if(!_iteratorNormalCompletion&&
null!=_iterator["return"])_iterator["return"]()}finally{if(_didIteratorError)throw _iteratorError;}}return shaders}},{key:"shouldUpdateState",value:function(_ref3){return _ref3.changeFlags.propsOrDataChanged}},{key:"updateState",value:function(_ref4){var changeFlags=_ref4.changeFlags;_ref4=this.getAttributeManager();if(changeFlags.dataChanged&&_ref4)if(changeFlags=changeFlags.dataChanged,Array.isArray(changeFlags)){var _iteratorNormalCompletion2=!0,_didIteratorError2=!1,_iteratorError2=void 0;try{for(var _iterator2=
changeFlags[Symbol.iterator](),_step2;!(_iteratorNormalCompletion2=(_step2=_iterator2.next()).done);_iteratorNormalCompletion2=!0)_ref4.invalidateAll(_step2.value)}catch(err){_didIteratorError2=!0,_iteratorError2=err}finally{try{if(!_iteratorNormalCompletion2&&null!=_iterator2["return"])_iterator2["return"]()}finally{if(_didIteratorError2)throw _iteratorError2;}}}else _ref4.invalidateAll()}},{key:"finalizeState",value:function(){var _iteratorNormalCompletion3=!0,_didIteratorError3=!1,_iteratorError3=
void 0;try{for(var _iterator3=this.getModels()[Symbol.iterator](),_step3;!(_iteratorNormalCompletion3=(_step3=_iterator3.next()).done);_iteratorNormalCompletion3=!0)_step3.value["delete"]()}catch(err){_didIteratorError3=!0,_iteratorError3=err}finally{try{if(!_iteratorNormalCompletion3&&null!=_iterator3["return"])_iterator3["return"]()}finally{if(_didIteratorError3)throw _iteratorError3;}}(_iteratorNormalCompletion3=this.getAttributeManager())&&_iteratorNormalCompletion3.finalize();this.context.resourceManager.unsubscribe({consumerId:this.id});
this.internalState.uniformTransitions.clear()}},{key:"draw",value:function(opts){var _iteratorNormalCompletion4=!0,_didIteratorError4=!1,_iteratorError4=void 0;try{for(var _iterator4=this.getModels()[Symbol.iterator](),_step4;!(_iteratorNormalCompletion4=(_step4=_iterator4.next()).done);_iteratorNormalCompletion4=!0)_step4.value.draw(opts)}catch(err){_didIteratorError4=!0,_iteratorError4=err}finally{try{if(!_iteratorNormalCompletion4&&null!=_iterator4["return"])_iterator4["return"]()}finally{if(_didIteratorError4)throw _iteratorError4;
}}}},{key:"getPickingInfo",value:function(_ref5){_ref5=_ref5.info;var index=_ref5.index;0<=index&&Array.isArray(this.props.data)&&(_ref5.object=this.props.data[index]);return _ref5}},{key:"invalidateAttribute",value:function(){var name=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"all",attributeManager=this.getAttributeManager();attributeManager&&("all"===name?attributeManager.invalidateAll():attributeManager.invalidate(name))}},{key:"updateAttributes",value:function(changedAttributes){var _iteratorNormalCompletion5=
!0,_didIteratorError5=!1,_iteratorError5=void 0;try{for(var _iterator5=this.getModels()[Symbol.iterator](),_step5;!(_iteratorNormalCompletion5=(_step5=_iterator5.next()).done);_iteratorNormalCompletion5=!0)this._setModelAttributes(_step5.value,changedAttributes)}catch(err){_didIteratorError5=!0,_iteratorError5=err}finally{try{if(!_iteratorNormalCompletion5&&null!=_iterator5["return"])_iterator5["return"]()}finally{if(_didIteratorError5)throw _iteratorError5;}}}},{key:"_updateAttributes",value:function(props){var attributeManager=
this.getAttributeManager();if(attributeManager){var numInstances=this.getNumInstances(props),startIndices=this.getStartIndices(props);attributeManager.update({data:props.data,numInstances:numInstances,startIndices:startIndices,props:props,transitions:props.transitions,buffers:props.data.attributes,context:this,ignoreUnknownAttributes:!0});props=attributeManager.getChangedAttributes({clearChangedFlags:!0});this.updateAttributes(props)}}},{key:"_updateAttributeTransition",value:function(){var attributeManager=
this.getAttributeManager();attributeManager&&attributeManager.updateTransition()}},{key:"_updateUniformTransition",value:function(){var uniformTransitions=this.internalState.uniformTransitions;if(uniformTransitions.active){uniformTransitions=uniformTransitions.update();var props=Object.create(this.props),key;for(key in uniformTransitions)Object.defineProperty(props,key,{value:uniformTransitions[key]});return props}return this.props}},{key:"calculateInstancePickingColors",value:function(attribute,
_ref6){_ref6=_ref6.numInstances;var cacheSize=pickingColorCache.length/3;if(cacheSize<_ref6){pickingColorCache=_typedArrayManager["default"].allocate(pickingColorCache,_ref6,{size:3,copy:!0});var newCacheSize=pickingColorCache.length/3,pickingColor=[];for((0,_assert["default"])(16777215>newCacheSize,"index out of picking color range");cacheSize<newCacheSize;cacheSize++)this.encodePickingColor(cacheSize,pickingColor),pickingColorCache[3*cacheSize]=pickingColor[0],pickingColorCache[3*cacheSize+1]=pickingColor[1],
pickingColorCache[3*cacheSize+2]=pickingColor[2]}attribute.value=pickingColorCache.subarray(0,3*_ref6)}},{key:"_setModelAttributes",value:function(model,changedAttributes){changedAttributes=this.getAttributeManager().getShaderAttributes(changedAttributes,model.userData.excludeAttributes||{});model.setAttributes(changedAttributes)}},{key:"clearPickingColor",value:function(color){var _this$getAttributeMan=this.getAttributeManager().attributes,instancePickingColors=_this$getAttributeMan.instancePickingColors;
_this$getAttributeMan=_this$getAttributeMan.pickingColors||instancePickingColors;instancePickingColors=this.decodePickingColor(color);color=_this$getAttributeMan.getVertexOffset(instancePickingColors);instancePickingColors=_this$getAttributeMan.getVertexOffset(instancePickingColors+1);_this$getAttributeMan.buffer.subData({data:new Uint8Array(instancePickingColors-color),offset:color})}},{key:"restorePickingColors",value:function(){var _this$getAttributeMan2=this.getAttributeManager().attributes,instancePickingColors=
_this$getAttributeMan2.instancePickingColors;(_this$getAttributeMan2.pickingColors||instancePickingColors).updateSubBuffer({startOffset:0})}},{key:"getNumInstances",value:function(props){props=props||this.props;return void 0!==props.numInstances?props.numInstances:this.state&&void 0!==this.state.numInstances?this.state.numInstances:(0,_count.count)(props.data)}},{key:"getStartIndices",value:function(props){props=props||this.props;return void 0!==props.startIndices?props.startIndices:this.state&&this.state.startIndices?
this.state.startIndices:null}},{key:"_initialize",value:function(){(0,_debug["default"])("layer.initialize",this);this._initState();this.initializeState(this.context);var _iteratorNormalCompletion6=!0,_didIteratorError6=!1,_iteratorError6=void 0;try{for(var _iterator6=this.props.extensions[Symbol.iterator](),_step6;!(_iteratorNormalCompletion6=(_step6=_iterator6.next()).done);_iteratorNormalCompletion6=!0){var extension=_step6.value;extension.initializeState.call(this,this.context,extension)}}catch(err){_didIteratorError6=
!0,_iteratorError6=err}finally{try{if(!_iteratorNormalCompletion6&&null!=_iterator6["return"])_iterator6["return"]()}finally{if(_didIteratorError6)throw _iteratorError6;}}this.setChangeFlags({dataChanged:!0,propsChanged:!0,viewportChanged:!0,extensionsChanged:!0});this._updateState()}},{key:"_update",value:function(){var stateNeedsUpdate=this.needsUpdate();(0,_debug["default"])("layer.update",this,stateNeedsUpdate);stateNeedsUpdate&&this._updateState()}},{key:"_updateState",value:function(){var currentProps=
this.props,propsInTransition=this._updateUniformTransition();this.props=this.internalState.propsInTransition=propsInTransition;propsInTransition=this._getUpdateParams();if(this.context.gl)this.updateState(propsInTransition);else try{this.updateState(propsInTransition)}catch(error){}var _iteratorNormalCompletion7=!0,_didIteratorError7=!1,_iteratorError7=void 0;try{for(var _iterator7=this.props.extensions[Symbol.iterator](),_step7;!(_iteratorNormalCompletion7=(_step7=_iterator7.next()).done);_iteratorNormalCompletion7=
!0){var extension=_step7.value;extension.updateState.call(this,propsInTransition,extension)}}catch(err){_didIteratorError7=!0,_iteratorError7=err}finally{try{if(!_iteratorNormalCompletion7&&null!=_iterator7["return"])_iterator7["return"]()}finally{if(_didIteratorError7)throw _iteratorError7;}}this._updateModules(propsInTransition);this.isComposite?this._renderLayers(propsInTransition):(this.setNeedsRedraw(),this._updateAttributes(this.props),this.state.model&&this.state.model.setInstanceCount(this.getNumInstances()));
this.props=currentProps;this.clearChangeFlags();this.internalState.needsUpdate=!1;this.internalState.resetOldProps()}},{key:"_finalize",value:function(){(0,_debug["default"])("layer.finalize",this);(0,_assert["default"])(this.internalState&&this.state);this.finalizeState(this.context);var _iteratorNormalCompletion8=!0,_didIteratorError8=!1,_iteratorError8=void 0;try{for(var _iterator8=this.props.extensions[Symbol.iterator](),_step8;!(_iteratorNormalCompletion8=(_step8=_iterator8.next()).done);_iteratorNormalCompletion8=
!0){var extension=_step8.value;extension.finalizeState.call(this,extension)}}catch(err){_didIteratorError8=!0,_iteratorError8=err}finally{try{if(!_iteratorNormalCompletion8&&null!=_iterator8["return"])_iterator8["return"]()}finally{if(_didIteratorError8)throw _iteratorError8;}}}},{key:"drawLayer",value:function(_ref7){var _this=this,_ref7$moduleParameter=_ref7.moduleParameters,moduleParameters=void 0===_ref7$moduleParameter?null:_ref7$moduleParameter;_ref7$moduleParameter=_ref7.uniforms;var uniforms=
void 0===_ref7$moduleParameter?{}:_ref7$moduleParameter;_ref7=_ref7.parameters;var parameters=void 0===_ref7?{}:_ref7;this._updateAttributeTransition();_ref7=this.props;this.props=this.internalState.propsInTransition||_ref7;uniforms.opacity=Math.pow(this.props.opacity,1/2.2);moduleParameters&&this.setModuleParameters(moduleParameters);_ref7$moduleParameter=(_ref7$moduleParameter=this.props.getPolygonOffset)&&_ref7$moduleParameter(uniforms)||[0,0];(0,_core.setParameters)(this.context.gl,{polygonOffset:_ref7$moduleParameter});
(0,_core.withParameters)(this.context.gl,parameters,function(){var opts={moduleParameters:moduleParameters,uniforms:uniforms,parameters:parameters,context:_this.context},_iteratorNormalCompletion9=!0,_didIteratorError9=!1,_iteratorError9=void 0;try{for(var _iterator9=_this.props.extensions[Symbol.iterator](),_step9;!(_iteratorNormalCompletion9=(_step9=_iterator9.next()).done);_iteratorNormalCompletion9=!0){var extension=_step9.value;extension.draw.call(_this,opts,extension)}}catch(err){_didIteratorError9=
!0,_iteratorError9=err}finally{try{if(!_iteratorNormalCompletion9&&null!=_iterator9["return"])_iterator9["return"]()}finally{if(_didIteratorError9)throw _iteratorError9;}}_this.draw(opts)});this.props=_ref7}},{key:"getChangeFlags",value:function(){return this.internalState.changeFlags}},{key:"setChangeFlags",value:function(flags){var changeFlags=this.internalState.changeFlags;for(key in changeFlags)flags[key]&&!changeFlags[key]&&(changeFlags[key]=flags[key],(0,_debug["default"])("layer.changeFlag",
this,key,flags));var key=changeFlags.dataChanged||changeFlags.updateTriggersChanged||changeFlags.propsChanged||changeFlags.extensionsChanged;changeFlags.propsOrDataChanged=key;changeFlags.somethingChanged=key||flags.viewportChanged||flags.stateChanged}},{key:"clearChangeFlags",value:function(){this.internalState.changeFlags={dataChanged:!1,propsChanged:!1,updateTriggersChanged:!1,viewportChanged:!1,stateChanged:!1,extensionsChanged:!1,propsOrDataChanged:!1,somethingChanged:!1}}},{key:"diffProps",
value:function(newProps,oldProps){var changeFlags=(0,_props.diffProps)(newProps,oldProps);if(changeFlags.updateTriggersChanged)for(var key in changeFlags.updateTriggersChanged)changeFlags.updateTriggersChanged[key]&&this.invalidateAttribute(key);if(changeFlags.transitionsChanged)for(var _key in changeFlags.transitionsChanged)this.internalState.uniformTransitions.add(_key,oldProps[_key],newProps[_key],newProps.transitions[_key]);return this.setChangeFlags(changeFlags)}},{key:"validateProps",value:function(){(0,
_props.validateProps)(this.props)}},{key:"setModuleParameters",value:function(moduleParameters){var _iteratorNormalCompletion10=!0,_didIteratorError10=!1,_iteratorError10=void 0;try{for(var _iterator10=this.getModels()[Symbol.iterator](),_step10;!(_iteratorNormalCompletion10=(_step10=_iterator10.next()).done);_iteratorNormalCompletion10=!0)_step10.value.updateModuleSettings(moduleParameters)}catch(err){_didIteratorError10=!0,_iteratorError10=err}finally{try{if(!_iteratorNormalCompletion10&&null!=
_iterator10["return"])_iterator10["return"]()}finally{if(_didIteratorError10)throw _iteratorError10;}}}},{key:"_updateModules",value:function(_ref8){var props=_ref8.props,oldProps=_ref8.oldProps;_ref8=props.autoHighlight;var highlightedObjectIndex=props.highlightedObjectIndex;props=props.highlightColor;if(oldProps.autoHighlight!==_ref8||oldProps.highlightedObjectIndex!==highlightedObjectIndex||oldProps.highlightColor!==props)oldProps={},_ref8||(oldProps.pickingSelectedColor=null),Array.isArray(props)&&
(oldProps.pickingHighlightColor=props),Number.isInteger(highlightedObjectIndex)&&(oldProps.pickingSelectedColor=0<=highlightedObjectIndex?this.encodePickingColor(highlightedObjectIndex):null),this.setModuleParameters(oldProps)}},{key:"_getUpdateParams",value:function(){return{props:this.props,oldProps:this.internalState.getOldProps(),context:this.context,changeFlags:this.internalState.changeFlags}}},{key:"_getNeedsRedraw",value:function(opts){if(!this.internalState)return!1;var redraw=this.internalState.needsRedraw&&
this.id;this.internalState.needsRedraw=this.internalState.needsRedraw&&!opts.clearRedrawFlags;var attributeManager=this.getAttributeManager();opts=attributeManager&&attributeManager.getNeedsRedraw(opts);return redraw||opts}},{key:"_getAttributeManager",value:function(){return new _attributeManager["default"](this.context.gl,{id:this.props.id,stats:this.context.stats,timeline:this.context.timeline})}},{key:"_initState",value:function(){(0,_assert["default"])(!this.internalState&&!this.state);(0,_assert["default"])(isFinite(this.props.coordinateSystem),
"".concat(this.id,": invalid coordinateSystem"));var attributeManager=this._getAttributeManager();attributeManager&&attributeManager.addInstanced({instancePickingColors:{type:5121,size:3,noAlloc:!0,update:this.calculateInstancePickingColors}});this.internalState=new _layerState["default"]({attributeManager:attributeManager,layer:this});this.clearChangeFlags();this.state={};Object.defineProperty(this.state,"attributeManager",{get:function(){_log["default"].deprecated("layer.state.attributeManager",
"layer.getAttributeManager()");return attributeManager}});this.internalState.layer=this;this.internalState.uniformTransitions=new _uniformTransitionManager["default"](this.context.timeline);this.internalState.onAsyncPropUpdated=this._onAsyncPropUpdated.bind(this);this.internalState.setAsyncProps(this.props)}},{key:"_transferState",value:function(oldLayer){(0,_debug["default"])("layer.matched",this,this===oldLayer);var state=oldLayer.state,internalState=oldLayer.internalState;(0,_assert["default"])(state&&
internalState);this!==oldLayer&&(this.internalState=internalState,this.internalState.layer=this,this.state=state,this.internalState.setAsyncProps(this.props),this.diffProps(this.props,this.internalState.getOldProps()))}},{key:"_onAsyncPropUpdated",value:function(){this.diffProps(this.props,this.internalState.getOldProps());this.setNeedsUpdate()}},{key:"isLoaded",get:function(){return this.internalState&&!this.internalState.isAsyncPropLoading()}},{key:"wrapLongitude",get:function(){return this.props.wrapLongitude}}]);
return Layer}(global["default"]);exports["default"]=global;global.layerName="Layer";global.defaultProps=require}
//# sourceMappingURL=module$node_modules$$deck_DOT_gl$core$dist$es5$lib$layer.js.map
