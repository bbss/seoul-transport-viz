{
"version":3,
"file":"module$node_modules$$luma_DOT_gl$webgl$dist$es5$classes$framebuffer.js",
"lineCount":35,
"mappings":"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",
"sources":["node_modules/@luma_DOT_gl/webgl/dist/es5/classes/framebuffer.js"],
"sourcesContent":["shadow$provide[\"module$node_modules$$luma_DOT_gl$webgl$dist$es5$classes$framebuffer\"] = function(global,require,module,exports) {\n\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.FRAMEBUFFER_ATTACHMENT_PARAMETERS = exports[\"default\"] = void 0;\n\nvar _defineProperty2 = _interopRequireDefault(require(\"@babel/runtime/helpers/defineProperty\"));\n\nvar _slicedToArray2 = _interopRequireDefault(require(\"@babel/runtime/helpers/slicedToArray\"));\n\nvar _classCallCheck2 = _interopRequireDefault(require(\"@babel/runtime/helpers/classCallCheck\"));\n\nvar _possibleConstructorReturn2 = _interopRequireDefault(require(\"@babel/runtime/helpers/possibleConstructorReturn\"));\n\nvar _assertThisInitialized2 = _interopRequireDefault(require(\"@babel/runtime/helpers/assertThisInitialized\"));\n\nvar _getPrototypeOf2 = _interopRequireDefault(require(\"@babel/runtime/helpers/getPrototypeOf\"));\n\nvar _get2 = _interopRequireDefault(require(\"@babel/runtime/helpers/get\"));\n\nvar _createClass2 = _interopRequireDefault(require(\"@babel/runtime/helpers/createClass\"));\n\nvar _inherits2 = _interopRequireDefault(require(\"@babel/runtime/helpers/inherits\"));\n\nvar _gltools = require(\"@luma.gl/gltools\");\n\nvar _resource = _interopRequireDefault(require(\"./resource\"));\n\nvar _texture2d = _interopRequireDefault(require(\"./texture-2d\"));\n\nvar _renderbuffer = _interopRequireDefault(require(\"./renderbuffer\"));\n\nvar _clear2 = require(\"./clear\");\n\nvar _copyAndBlit = require(\"./copy-and-blit.js\");\n\nvar _features = require(\"../features\");\n\nvar _webglUtils = require(\"../webgl-utils\");\n\nvar _utils = require(\"../utils\");\n\nvar ERR_MULTIPLE_RENDERTARGETS = 'Multiple render targets not supported';\n\nvar Framebuffer = function (_Resource) {\n  (0, _inherits2[\"default\"])(Framebuffer, _Resource);\n  (0, _createClass2[\"default\"])(Framebuffer, [{\n    key: \"MAX_COLOR_ATTACHMENTS\",\n    get: function get() {\n      return this.gl.getParameter(this.gl.MAX_COLOR_ATTACHMENTS);\n    }\n  }, {\n    key: \"MAX_DRAW_BUFFERS\",\n    get: function get() {\n      return this.gl.getParameter(this.gl.MAX_DRAW_BUFFERS);\n    }\n  }], [{\n    key: \"isSupported\",\n    value: function isSupported(gl) {\n      var _ref = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},\n          colorBufferFloat = _ref.colorBufferFloat,\n          colorBufferHalfFloat = _ref.colorBufferHalfFloat;\n\n      var supported = true;\n\n      if (colorBufferFloat) {\n        supported = Boolean(gl.getExtension('EXT_color_buffer_float') || gl.getExtension('WEBGL_color_buffer_float') || gl.getExtension('OES_texture_float'));\n      }\n\n      if (colorBufferHalfFloat) {\n        supported = supported && Boolean(gl.getExtension('EXT_color_buffer_float') || gl.getExtension('EXT_color_buffer_half_float'));\n      }\n\n      return supported;\n    }\n  }, {\n    key: \"getDefaultFramebuffer\",\n    value: function getDefaultFramebuffer(gl) {\n      gl.luma = gl.luma || {};\n      gl.luma.defaultFramebuffer = gl.luma.defaultFramebuffer || new Framebuffer(gl, {\n        id: 'default-framebuffer',\n        handle: null,\n        attachments: {}\n      });\n      return gl.luma.defaultFramebuffer;\n    }\n  }]);\n\n  function Framebuffer(gl) {\n    var _this;\n\n    var opts = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    (0, _classCallCheck2[\"default\"])(this, Framebuffer);\n    _this = (0, _possibleConstructorReturn2[\"default\"])(this, (0, _getPrototypeOf2[\"default\"])(Framebuffer).call(this, gl, opts));\n    _this.width = null;\n    _this.height = null;\n    _this.attachments = {};\n    _this.readBuffer = 36064;\n    _this.drawBuffers = [36064];\n    _this.ownResources = [];\n\n    _this.initialize(opts);\n\n    Object.seal((0, _assertThisInitialized2[\"default\"])(_this));\n    return _this;\n  }\n\n  (0, _createClass2[\"default\"])(Framebuffer, [{\n    key: \"initialize\",\n    value: function initialize(_ref2) {\n      var _ref2$width = _ref2.width,\n          width = _ref2$width === void 0 ? 1 : _ref2$width,\n          _ref2$height = _ref2.height,\n          height = _ref2$height === void 0 ? 1 : _ref2$height,\n          _ref2$attachments = _ref2.attachments,\n          attachments = _ref2$attachments === void 0 ? null : _ref2$attachments,\n          _ref2$color = _ref2.color,\n          color = _ref2$color === void 0 ? true : _ref2$color,\n          _ref2$depth = _ref2.depth,\n          depth = _ref2$depth === void 0 ? true : _ref2$depth,\n          _ref2$stencil = _ref2.stencil,\n          stencil = _ref2$stencil === void 0 ? false : _ref2$stencil,\n          _ref2$check = _ref2.check,\n          check = _ref2$check === void 0 ? true : _ref2$check,\n          readBuffer = _ref2.readBuffer,\n          drawBuffers = _ref2.drawBuffers;\n      (0, _utils.assert)(width >= 0 && height >= 0, 'Width and height need to be integers');\n      this.width = width;\n      this.height = height;\n\n      if (attachments) {\n        for (var attachment in attachments) {\n          var target = attachments[attachment];\n          var object = Array.isArray(target) ? target[0] : target;\n          object.resize({\n            width: width,\n            height: height\n          });\n        }\n      } else {\n        attachments = this._createDefaultAttachments(color, depth, stencil, width, height);\n      }\n\n      this.update({\n        clearAttachments: true,\n        attachments: attachments,\n        readBuffer: readBuffer,\n        drawBuffers: drawBuffers\n      });\n\n      if (attachments && check) {\n        this.checkStatus();\n      }\n    }\n  }, {\n    key: \"delete\",\n    value: function _delete() {\n      var _iteratorNormalCompletion = true;\n      var _didIteratorError = false;\n      var _iteratorError = undefined;\n\n      try {\n        for (var _iterator = this.ownResources[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n          var resource = _step.value;\n          resource[\"delete\"]();\n        }\n      } catch (err) {\n        _didIteratorError = true;\n        _iteratorError = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion && _iterator[\"return\"] != null) {\n            _iterator[\"return\"]();\n          }\n        } finally {\n          if (_didIteratorError) {\n            throw _iteratorError;\n          }\n        }\n      }\n\n      (0, _get2[\"default\"])((0, _getPrototypeOf2[\"default\"])(Framebuffer.prototype), \"delete\", this).call(this);\n    }\n  }, {\n    key: \"update\",\n    value: function update(_ref3) {\n      var _ref3$attachments = _ref3.attachments,\n          attachments = _ref3$attachments === void 0 ? {} : _ref3$attachments,\n          readBuffer = _ref3.readBuffer,\n          drawBuffers = _ref3.drawBuffers,\n          _ref3$clearAttachment = _ref3.clearAttachments,\n          clearAttachments = _ref3$clearAttachment === void 0 ? false : _ref3$clearAttachment,\n          _ref3$resizeAttachmen = _ref3.resizeAttachments,\n          resizeAttachments = _ref3$resizeAttachmen === void 0 ? true : _ref3$resizeAttachmen;\n      this.attach(attachments, {\n        clearAttachments: clearAttachments,\n        resizeAttachments: resizeAttachments\n      });\n      var gl = this.gl;\n      var prevHandle = gl.bindFramebuffer(36160, this.handle);\n\n      if (readBuffer) {\n        this._setReadBuffer(readBuffer);\n      }\n\n      if (drawBuffers) {\n        this._setDrawBuffers(drawBuffers);\n      }\n\n      gl.bindFramebuffer(36160, prevHandle || null);\n      return this;\n    }\n  }, {\n    key: \"resize\",\n    value: function resize() {\n      var _ref4 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n          width = _ref4.width,\n          height = _ref4.height;\n\n      if (this.handle === null) {\n        (0, _utils.assert)(width === undefined && height === undefined);\n        this.width = this.gl.drawingBufferWidth;\n        this.height = this.gl.drawingBufferHeight;\n        return this;\n      }\n\n      if (width === undefined) {\n        width = this.gl.drawingBufferWidth;\n      }\n\n      if (height === undefined) {\n        height = this.gl.drawingBufferHeight;\n      }\n\n      if (width !== this.width && height !== this.height) {\n        _gltools.log.log(2, \"Resizing framebuffer \".concat(this.id, \" to \").concat(width, \"x\").concat(height))();\n      }\n\n      for (var attachmentPoint in this.attachments) {\n        this.attachments[attachmentPoint].resize({\n          width: width,\n          height: height\n        });\n      }\n\n      this.width = width;\n      this.height = height;\n      return this;\n    }\n  }, {\n    key: \"attach\",\n    value: function attach(attachments) {\n      var _this2 = this;\n\n      var _ref5 = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},\n          _ref5$clearAttachment = _ref5.clearAttachments,\n          clearAttachments = _ref5$clearAttachment === void 0 ? false : _ref5$clearAttachment,\n          _ref5$resizeAttachmen = _ref5.resizeAttachments,\n          resizeAttachments = _ref5$resizeAttachmen === void 0 ? true : _ref5$resizeAttachmen;\n\n      var newAttachments = {};\n\n      if (clearAttachments) {\n        Object.keys(this.attachments).forEach(function (key) {\n          newAttachments[key] = null;\n        });\n      }\n\n      Object.assign(newAttachments, attachments);\n      var prevHandle = this.gl.bindFramebuffer(36160, this.handle);\n\n      for (var key in newAttachments) {\n        (0, _utils.assert)(key !== undefined, 'Misspelled framebuffer binding point?');\n        var attachment = Number(key);\n        var descriptor = newAttachments[attachment];\n        var object = descriptor;\n\n        if (!object) {\n          this._unattach(attachment);\n        } else if (object instanceof _renderbuffer[\"default\"]) {\n          this._attachRenderbuffer({\n            attachment: attachment,\n            renderbuffer: object\n          });\n        } else if (Array.isArray(descriptor)) {\n          var _descriptor = (0, _slicedToArray2[\"default\"])(descriptor, 3),\n              texture = _descriptor[0],\n              _descriptor$ = _descriptor[1],\n              layer = _descriptor$ === void 0 ? 0 : _descriptor$,\n              _descriptor$2 = _descriptor[2],\n              level = _descriptor$2 === void 0 ? 0 : _descriptor$2;\n\n          object = texture;\n\n          this._attachTexture({\n            attachment: attachment,\n            texture: texture,\n            layer: layer,\n            level: level\n          });\n        } else {\n          this._attachTexture({\n            attachment: attachment,\n            texture: object,\n            layer: 0,\n            level: 0\n          });\n        }\n\n        if (resizeAttachments && object) {\n          object.resize({\n            width: this.width,\n            height: this.height\n          });\n        }\n      }\n\n      this.gl.bindFramebuffer(36160, prevHandle || null);\n      Object.assign(this.attachments, attachments);\n      Object.keys(this.attachments).filter(function (key) {\n        return !_this2.attachments[key];\n      }).forEach(function (key) {\n        delete _this2.attachments[key];\n      });\n    }\n  }, {\n    key: \"checkStatus\",\n    value: function checkStatus() {\n      var gl = this.gl;\n      var status = this.getStatus();\n\n      if (status !== 36053) {\n        throw new Error(_getFrameBufferStatus(status));\n      }\n\n      return this;\n    }\n  }, {\n    key: \"getStatus\",\n    value: function getStatus() {\n      var gl = this.gl;\n      var prevHandle = gl.bindFramebuffer(36160, this.handle);\n      var status = gl.checkFramebufferStatus(36160);\n      gl.bindFramebuffer(36160, prevHandle || null);\n      return status;\n    }\n  }, {\n    key: \"clear\",\n    value: function clear() {\n      var _ref6 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n          color = _ref6.color,\n          depth = _ref6.depth,\n          stencil = _ref6.stencil,\n          _ref6$drawBuffers = _ref6.drawBuffers,\n          drawBuffers = _ref6$drawBuffers === void 0 ? [] : _ref6$drawBuffers;\n\n      var prevHandle = this.gl.bindFramebuffer(36160, this.handle);\n\n      if (color || depth || stencil) {\n        (0, _clear2.clear)(this.gl, {\n          color: color,\n          depth: depth,\n          stencil: stencil\n        });\n      }\n\n      drawBuffers.forEach(function (value, drawBuffer) {\n        (0, _clear2.clearBuffer)({\n          drawBuffer: drawBuffer,\n          value: value\n        });\n      });\n      this.gl.bindFramebuffer(36160, prevHandle || null);\n      return this;\n    }\n  }, {\n    key: \"readPixels\",\n    value: function readPixels() {\n      var opts = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n      _gltools.log.error('Framebuffer.readPixels() is no logner supported, use readPixelsToArray(framebuffer)')();\n\n      return null;\n    }\n  }, {\n    key: \"readPixelsToBuffer\",\n    value: function readPixelsToBuffer() {\n      var opts = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n      _gltools.log.error('Framebuffer.readPixelsToBuffer()is no logner supported, use readPixelsToBuffer(framebuffer)')();\n\n      return null;\n    }\n  }, {\n    key: \"copyToDataUrl\",\n    value: function copyToDataUrl() {\n      var opts = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n      _gltools.log.error('Framebuffer.copyToDataUrl() is no logner supported, use copyToDataUrl(framebuffer)')();\n\n      return null;\n    }\n  }, {\n    key: \"copyToImage\",\n    value: function copyToImage() {\n      var opts = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n      _gltools.log.error('Framebuffer.copyToImage() is no logner supported, use copyToImage(framebuffer)')();\n\n      return null;\n    }\n  }, {\n    key: \"copyToTexture\",\n    value: function copyToTexture() {\n      var opts = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n      _gltools.log.error('Framebuffer.copyToTexture({...}) is no logner supported, use copyToTexture(source, target, opts})')();\n\n      return null;\n    }\n  }, {\n    key: \"blit\",\n    value: function blit() {\n      var opts = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n      _gltools.log.error('Framebuffer.blit({...}) is no logner supported, use blit(source, target, opts)')();\n\n      return null;\n    }\n  }, {\n    key: \"invalidate\",\n    value: function invalidate(_ref7) {\n      var _ref7$attachments = _ref7.attachments,\n          attachments = _ref7$attachments === void 0 ? [] : _ref7$attachments,\n          _ref7$x = _ref7.x,\n          x = _ref7$x === void 0 ? 0 : _ref7$x,\n          _ref7$y = _ref7.y,\n          y = _ref7$y === void 0 ? 0 : _ref7$y,\n          width = _ref7.width,\n          height = _ref7.height;\n      var gl = this.gl;\n      (0, _webglUtils.assertWebGL2Context)(gl);\n      var prevHandle = gl.bindFramebuffer(36008, this.handle);\n      var invalidateAll = x === 0 && y === 0 && width === undefined && height === undefined;\n\n      if (invalidateAll) {\n        gl.invalidateFramebuffer(36008, attachments);\n      } else {\n        gl.invalidateFramebuffer(36008, attachments, x, y, width, height);\n      }\n\n      gl.bindFramebuffer(36008, prevHandle);\n      return this;\n    }\n  }, {\n    key: \"getAttachmentParameter\",\n    value: function getAttachmentParameter(attachment, pname, keys) {\n      var value = this._getAttachmentParameterFallback(pname);\n\n      if (value === null) {\n        this.gl.bindFramebuffer(36160, this.handle);\n        value = this.gl.getFramebufferAttachmentParameter(36160, attachment, pname);\n        this.gl.bindFramebuffer(36160, null);\n      }\n\n      if (keys && value > 1000) {\n        value = (0, _webglUtils.getKey)(this.gl, value);\n      }\n\n      return value;\n    }\n  }, {\n    key: \"getAttachmentParameters\",\n    value: function getAttachmentParameters() {\n      var attachment = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 36064;\n      var keys = arguments.length > 1 ? arguments[1] : undefined;\n      var parameters = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : this.constructor.ATTACHMENT_PARAMETERS || [];\n      var values = {};\n      var _iteratorNormalCompletion2 = true;\n      var _didIteratorError2 = false;\n      var _iteratorError2 = undefined;\n\n      try {\n        for (var _iterator2 = parameters[Symbol.iterator](), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {\n          var pname = _step2.value;\n          var key = keys ? (0, _webglUtils.getKey)(this.gl, pname) : pname;\n          values[key] = this.getAttachmentParameter(attachment, pname, keys);\n        }\n      } catch (err) {\n        _didIteratorError2 = true;\n        _iteratorError2 = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion2 && _iterator2[\"return\"] != null) {\n            _iterator2[\"return\"]();\n          }\n        } finally {\n          if (_didIteratorError2) {\n            throw _iteratorError2;\n          }\n        }\n      }\n\n      return values;\n    }\n  }, {\n    key: \"getParameters\",\n    value: function getParameters() {\n      var keys = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : true;\n      var attachments = Object.keys(this.attachments);\n      var parameters = {};\n\n      for (var _i = 0, _attachments = attachments; _i < _attachments.length; _i++) {\n        var attachmentName = _attachments[_i];\n        var attachment = Number(attachmentName);\n        var key = keys ? (0, _webglUtils.getKey)(this.gl, attachment) : attachment;\n        parameters[key] = this.getAttachmentParameters(attachment, keys);\n      }\n\n      return parameters;\n    }\n  }, {\n    key: \"show\",\n    value: function show() {\n      if (typeof window !== 'undefined') {\n        window.open((0, _copyAndBlit.copyToDataUrl)(this), 'luma-debug-texture');\n      }\n\n      return this;\n    }\n  }, {\n    key: \"log\",\n    value: function log() {\n      var logLevel = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n      var message = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : '';\n\n      if (logLevel > _gltools.log.level || typeof window === 'undefined') {\n        return this;\n      }\n\n      message = message || \"Framebuffer \".concat(this.id);\n      var image = (0, _copyAndBlit.copyToDataUrl)(this, {\n        maxHeight: 100\n      });\n\n      _gltools.log.image({\n        logLevel: logLevel,\n        message: message,\n        image: image\n      }, message)();\n\n      return this;\n    }\n  }, {\n    key: \"bind\",\n    value: function bind() {\n      var _ref8 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n          _ref8$target = _ref8.target,\n          target = _ref8$target === void 0 ? 36160 : _ref8$target;\n\n      this.gl.bindFramebuffer(target, this.handle);\n      return this;\n    }\n  }, {\n    key: \"unbind\",\n    value: function unbind() {\n      var _ref9 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n          _ref9$target = _ref9.target,\n          target = _ref9$target === void 0 ? 36160 : _ref9$target;\n\n      this.gl.bindFramebuffer(target, null);\n      return this;\n    }\n  }, {\n    key: \"_createDefaultAttachments\",\n    value: function _createDefaultAttachments(color, depth, stencil, width, height) {\n      var defaultAttachments = null;\n\n      if (color) {\n        var _parameters;\n\n        defaultAttachments = defaultAttachments || {};\n        defaultAttachments[36064] = new _texture2d[\"default\"](this.gl, {\n          id: \"\".concat(this.id, \"-color0\"),\n          pixels: null,\n          format: 6408,\n          type: 5121,\n          width: width,\n          height: height,\n          mipmaps: false,\n          parameters: (_parameters = {}, (0, _defineProperty2[\"default\"])(_parameters, 10241, 9729), (0, _defineProperty2[\"default\"])(_parameters, 10240, 9729), (0, _defineProperty2[\"default\"])(_parameters, 10242, 33071), (0, _defineProperty2[\"default\"])(_parameters, 10243, 33071), _parameters)\n        });\n        this.ownResources.push(defaultAttachments[36064]);\n      }\n\n      if (depth && stencil) {\n        defaultAttachments = defaultAttachments || {};\n        defaultAttachments[33306] = new _renderbuffer[\"default\"](this.gl, {\n          id: \"\".concat(this.id, \"-depth-stencil\"),\n          format: 35056,\n          width: width,\n          height: 111\n        });\n        this.ownResources.push(defaultAttachments[33306]);\n      } else if (depth) {\n        defaultAttachments = defaultAttachments || {};\n        defaultAttachments[36096] = new _renderbuffer[\"default\"](this.gl, {\n          id: \"\".concat(this.id, \"-depth\"),\n          format: 33189,\n          width: width,\n          height: height\n        });\n        this.ownResources.push(defaultAttachments[36096]);\n      } else if (stencil) {\n        (0, _utils.assert)(false);\n      }\n\n      return defaultAttachments;\n    }\n  }, {\n    key: \"_unattach\",\n    value: function _unattach(attachment) {\n      var oldAttachment = this.attachments[attachment];\n\n      if (!oldAttachment) {\n        return;\n      }\n\n      if (oldAttachment instanceof _renderbuffer[\"default\"]) {\n        this.gl.framebufferRenderbuffer(36160, attachment, 36161, null);\n      } else {\n        this.gl.framebufferTexture2D(36160, attachment, 3553, null, 0);\n      }\n\n      delete this.attachments[attachment];\n    }\n  }, {\n    key: \"_attachRenderbuffer\",\n    value: function _attachRenderbuffer(_ref10) {\n      var _ref10$attachment = _ref10.attachment,\n          attachment = _ref10$attachment === void 0 ? 36064 : _ref10$attachment,\n          renderbuffer = _ref10.renderbuffer;\n      var gl = this.gl;\n      gl.framebufferRenderbuffer(36160, attachment, 36161, renderbuffer.handle);\n      this.attachments[attachment] = renderbuffer;\n    }\n  }, {\n    key: \"_attachTexture\",\n    value: function _attachTexture(_ref11) {\n      var _ref11$attachment = _ref11.attachment,\n          attachment = _ref11$attachment === void 0 ? 36064 : _ref11$attachment,\n          texture = _ref11.texture,\n          layer = _ref11.layer,\n          level = _ref11.level;\n      var gl = this.gl;\n      gl.bindTexture(texture.target, texture.handle);\n\n      switch (texture.target) {\n        case 35866:\n        case 32879:\n          gl.framebufferTextureLayer(36160, attachment, texture.target, level, layer);\n          break;\n\n        case 34067:\n          var face = mapIndexToCubeMapFace(layer);\n          gl.framebufferTexture2D(36160, attachment, face, texture.handle, level);\n          break;\n\n        case 3553:\n          gl.framebufferTexture2D(36160, attachment, 3553, texture.handle, level);\n          break;\n\n        default:\n          (0, _utils.assert)(false, 'Illegal texture type');\n      }\n\n      gl.bindTexture(texture.target, null);\n      this.attachments[attachment] = texture;\n    }\n  }, {\n    key: \"_setReadBuffer\",\n    value: function _setReadBuffer(readBuffer) {\n      var gl = this.gl;\n\n      if ((0, _gltools.isWebGL2)(gl)) {\n        gl.readBuffer(readBuffer);\n      } else {\n        (0, _utils.assert)(readBuffer === 36064 || readBuffer === 1029, ERR_MULTIPLE_RENDERTARGETS);\n      }\n\n      this.readBuffer = readBuffer;\n    }\n  }, {\n    key: \"_setDrawBuffers\",\n    value: function _setDrawBuffers(drawBuffers) {\n      var gl = this.gl;\n\n      if ((0, _gltools.isWebGL2)(gl)) {\n        gl.drawBuffers(drawBuffers);\n      } else {\n        var ext = gl.getExtension('WEBGL.draw_buffers');\n\n        if (ext) {\n          ext.drawBuffersWEBGL(drawBuffers);\n        } else {\n          (0, _utils.assert)(drawBuffers.length === 1 && (drawBuffers[0] === 36064 || drawBuffers[0] === 1029), ERR_MULTIPLE_RENDERTARGETS);\n        }\n      }\n\n      this.drawBuffers = drawBuffers;\n    }\n  }, {\n    key: \"_getAttachmentParameterFallback\",\n    value: function _getAttachmentParameterFallback(pname) {\n      var caps = (0, _features.getFeatures)(this.gl);\n\n      switch (pname) {\n        case 36052:\n          return !caps.WEBGL2 ? 0 : null;\n\n        case 33298:\n        case 33299:\n        case 33300:\n        case 33301:\n        case 33302:\n        case 33303:\n          return !caps.WEBGL2 ? 8 : null;\n\n        case 33297:\n          return !caps.WEBGL2 ? 5125 : null;\n\n        case 33296:\n          return !caps.WEBGL2 && !caps.EXT_sRGB ? 9729 : null;\n\n        default:\n          return null;\n      }\n    }\n  }, {\n    key: \"_createHandle\",\n    value: function _createHandle() {\n      return this.gl.createFramebuffer();\n    }\n  }, {\n    key: \"_deleteHandle\",\n    value: function _deleteHandle() {\n      this.gl.deleteFramebuffer(this.handle);\n    }\n  }, {\n    key: \"_bindHandle\",\n    value: function _bindHandle(handle) {\n      return this.gl.bindFramebuffer(36160, handle);\n    }\n  }, {\n    key: \"color\",\n    get: function get() {\n      return this.attachments[36064] || null;\n    }\n  }, {\n    key: \"texture\",\n    get: function get() {\n      return this.attachments[36064] || null;\n    }\n  }, {\n    key: \"depth\",\n    get: function get() {\n      return this.attachments[36096] || this.attachments[33306] || null;\n    }\n  }, {\n    key: \"stencil\",\n    get: function get() {\n      return this.attachments[36128] || this.attachments[33306] || null;\n    }\n  }]);\n  return Framebuffer;\n}(_resource[\"default\"]);\n\nexports[\"default\"] = Framebuffer;\n\nfunction mapIndexToCubeMapFace(layer) {\n  return layer < 34069 ? layer + 34069 : layer;\n}\n\nfunction _getFrameBufferStatus(status) {\n  var STATUS = Framebuffer.STATUS || {};\n  return STATUS[status] || \"Framebuffer error \".concat(status);\n}\n\nvar FRAMEBUFFER_ATTACHMENT_PARAMETERS = [36049, 36048, 33296, 33298, 33299, 33300, 33301, 33302, 33303];\nexports.FRAMEBUFFER_ATTACHMENT_PARAMETERS = FRAMEBUFFER_ATTACHMENT_PARAMETERS;\nFramebuffer.ATTACHMENT_PARAMETERS = FRAMEBUFFER_ATTACHMENT_PARAMETERS;\n//# sourceMappingURL=framebuffer.js.map\n};"],
"names":["shadow$provide","global","require","module","exports","_interopRequireDefault","Object","defineProperty","value","FRAMEBUFFER_ATTACHMENT_PARAMETERS","_defineProperty2","_slicedToArray2","_classCallCheck2","_possibleConstructorReturn2","_assertThisInitialized2","_getPrototypeOf2","_get2","_createClass2","_inherits2","_gltools","_resource","_texture2d","_renderbuffer","_clear2","_copyAndBlit","_features","_webglUtils","_utils","Framebuffer","_Resource","gl","opts","arguments","length","undefined","_this","call","width","height","attachments","readBuffer","drawBuffers","ownResources","initialize","seal","key","get","getParameter","MAX_COLOR_ATTACHMENTS","MAX_DRAW_BUFFERS","isSupported","_ref","colorBufferHalfFloat","supported","colorBufferFloat","getExtension","getDefaultFramebuffer","luma","defaultFramebuffer","id","handle","_ref2","_ref2$width","_ref2$height","_ref2$attachments","_ref2$color","color","_ref2$depth","depth","_ref2$stencil","stencil","_ref2$check","check","assert","attachment","target","resize","Array","isArray","object","_createDefaultAttachments","update","clearAttachments","checkStatus","_delete","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_iterator","Symbol","iterator","_step","done","next","err","prototype","_ref3","_ref3$attachments","_ref3$clearAttachment","_ref3$resizeAttachmen","resizeAttachments","attach","prevHandle","bindFramebuffer","_setReadBuffer","_setDrawBuffers","_ref4","drawingBufferWidth","drawingBufferHeight","log","concat","attachmentPoint","_this2","_ref5","_ref5$clearAttachment","_ref5$resizeAttachmen","newAttachments","keys","forEach","assign","Number","descriptor","_attachRenderbuffer","renderbuffer","_descriptor","texture","_descriptor$","layer","_descriptor$2","level","_attachTexture","_unattach","filter","status","getStatus","Error","STATUS","checkFramebufferStatus","clear","_ref6","_ref6$drawBuffers","drawBuffer","clearBuffer","readPixels","error","readPixelsToBuffer","copyToDataUrl","copyToImage","copyToTexture","blit","invalidate","_ref7","_ref7$attachments","_ref7$x","x","_ref7$y","y","assertWebGL2Context","invalidateFramebuffer","getAttachmentParameter","pname","_getAttachmentParameterFallback","getFramebufferAttachmentParameter","getKey","getAttachmentParameters","parameters","constructor","ATTACHMENT_PARAMETERS","values","_iteratorNormalCompletion2","_didIteratorError2","_iteratorError2","_iterator2","_step2","getParameters","_i","_attachments","attachmentName","show","window","open","logLevel","message","image","maxHeight","bind","_ref8$target","_ref8","unbind","_ref9$target","_ref9","defaultAttachments","_parameters","pixels","format","type","mipmaps","push","oldAttachment","framebufferRenderbuffer","framebufferTexture2D","_ref10","_ref10$attachment","_ref11","_ref11$attachment","bindTexture","framebufferTextureLayer","face","isWebGL2","ERR_MULTIPLE_RENDERTARGETS","ext","drawBuffersWEBGL","caps","getFeatures","WEBGL2","EXT_sRGB","_createHandle","createFramebuffer","_deleteHandle","deleteFramebuffer","_bindHandle"]
}
