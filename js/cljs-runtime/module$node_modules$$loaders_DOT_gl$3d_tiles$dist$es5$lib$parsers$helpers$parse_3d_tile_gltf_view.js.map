{
"version":3,
"file":"module$node_modules$$loaders_DOT_gl$3d_tiles$dist$es5$lib$parsers$helpers$parse_3d_tile_gltf_view.js",
"lineCount":6,
"mappings":"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",
"sources":["node_modules/@loaders_DOT_gl/3d-tiles/dist/es5/lib/parsers/helpers/parse-3d-tile-gltf-view.js"],
"sourcesContent":["shadow$provide[\"module$node_modules$$loaders_DOT_gl$3d_tiles$dist$es5$lib$parsers$helpers$parse_3d_tile_gltf_view\"] = function(global,require,module,exports) {\n\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.parse3DTileGLTFViewSync = parse3DTileGLTFViewSync;\nexports.extractGLTF = extractGLTF;\nexports.GLTF_FORMAT = void 0;\n\nvar _regenerator = _interopRequireDefault(require(\"@babel/runtime/regenerator\"));\n\nvar _asyncToGenerator2 = _interopRequireDefault(require(\"@babel/runtime/helpers/asyncToGenerator\"));\n\nvar _gltf = require(\"@loaders.gl/gltf\");\n\nvar _loaderUtils = require(\"@loaders.gl/loader-utils\");\n\nvar GLTF_FORMAT = {\n  URI: 0,\n  EMBEDDED: 1\n};\nexports.GLTF_FORMAT = GLTF_FORMAT;\n\nfunction parse3DTileGLTFViewSync(tile, arrayBuffer, byteOffset) {\n  tile.rotateYtoZ = true;\n  var gltfByteLength = tile.byteOffset + tile.byteLength - byteOffset;\n\n  if (gltfByteLength === 0) {\n    throw new Error('glTF byte length must be greater than 0.');\n  }\n\n  tile.gltfArrayBuffer = (0, _loaderUtils.getZeroOffsetArrayBuffer)(arrayBuffer, byteOffset, gltfByteLength);\n  tile.gltfByteOffset = 0;\n  tile.gltfByteLength = gltfByteLength;\n\n  if (byteOffset % 4 === 0) {} else {\n    console.warn(\"\".concat(tile.type, \": embedded glb is not aligned to a 4-byte boundary.\"));\n  }\n\n  return tile.byteOffset + tile.byteLength;\n}\n\nfunction extractGLTF(_x, _x2, _x3, _x4) {\n  return _extractGLTF.apply(this, arguments);\n}\n\nfunction _extractGLTF() {\n  _extractGLTF = (0, _asyncToGenerator2[\"default\"])(_regenerator[\"default\"].mark(function _callee(tile, gltfFormat, options, context) {\n    var parse, fetch;\n    return _regenerator[\"default\"].wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            extractGLTFBufferOrURL(tile, gltfFormat, options);\n\n            if (!options.loadGLTF) {\n              _context.next = 15;\n              break;\n            }\n\n            parse = context.parse, fetch = context.fetch;\n\n            if (!tile.gltfUrl) {\n              _context.next = 8;\n              break;\n            }\n\n            _context.next = 6;\n            return fetch(tile.gltfUrl, options);\n\n          case 6:\n            tile.gltfArrayBuffer = _context.sent;\n            tile.gltfByteOffset = 0;\n\n          case 8:\n            if (!tile.gltfArrayBuffer) {\n              _context.next = 15;\n              break;\n            }\n\n            _context.next = 11;\n            return parse(tile.gltfArrayBuffer, _gltf.GLTFLoader, options, context);\n\n          case 11:\n            tile.gltf = _context.sent;\n            delete tile.gltfArrayBuffer;\n            delete tile.gltfByteOffset;\n            delete tile.gltfByteLength;\n\n          case 15:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n  return _extractGLTF.apply(this, arguments);\n}\n\nfunction extractGLTFBufferOrURL(tile, gltfFormat, options) {\n  switch (gltfFormat) {\n    case GLTF_FORMAT.URI:\n      var gltfUrlBytes = new Uint8Array(tile.gltfArrayBuffer, tile.gltfByteOffset);\n      var textDecoder = new TextDecoder();\n      var gltfUrl = textDecoder.decode(gltfUrlBytes);\n      tile.gltfUrl = gltfUrl.replace(/[\\s\\0]+$/, '');\n      delete tile.gltfArrayBuffer;\n      delete tile.gltfByteOffset;\n      delete tile.gltfByteLength;\n      break;\n\n    case GLTF_FORMAT.EMBEDDED:\n      break;\n\n    default:\n      throw new Error(\"b3dm: Illegal glTF format field\");\n  }\n}\n//# sourceMappingURL=parse-3d-tile-gltf-view.js.map\n};"],
"names":["shadow$provide","global","require","module","exports","_extractGLTF","_asyncToGenerator2","_regenerator","mark","_callee","tile","gltfFormat","options","context","parse","fetch","wrap","_callee$","_context","prev","next","GLTF_FORMAT","URI","gltfUrlBytes","Uint8Array","gltfArrayBuffer","gltfByteOffset","gltfUrl","decode","textDecoder","TextDecoder","replace","gltfByteLength","EMBEDDED","Error","loadGLTF","sent","_gltf","GLTFLoader","gltf","stop","apply","arguments","_interopRequireDefault","Object","defineProperty","value","parse3DTileGLTFViewSync","arrayBuffer","byteOffset","rotateYtoZ","byteLength","_loaderUtils","getZeroOffsetArrayBuffer","console","warn","concat","type","extractGLTF","_x","_x2","_x3","_x4"]
}
