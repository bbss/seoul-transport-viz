{
"version":3,
"file":"module$node_modules$$luma_DOT_gl$shadertools$dist$es5$modules$lights$lights.js",
"lineCount":6,
"mappings":"AAAAA,cAAA,4EAAA,CAAgG,QAAQ,CAACC,MAAD,CAAQC,OAAR,CAAgBC,MAAhB,CAAuBC,OAAvB,CAAgC,CAwBxIC,QAASA,aAAY,EAAG,CAAA,IAClBC,KAA0B,CAAnB,CAAAC,SAAAC,OAAA,EAAyCC,IAAAA,EAAzC,GAAwBF,SAAA,CAAU,CAAV,CAAxB,CAAqDA,SAAA,CAAU,CAAV,CAArD,CAAoE,EADzD,CAElBG,WAAaJ,IAAAK,MAEbC,KAAAA,CAAiBN,IAAAO,UAHrB,KAIIA,UAA+B,IAAK,EAAxB,GAAAD,IAAA,CAA4B,CAA5B,CAAkCA,IAElD,OAAOE,CAJoB,IAAK,EAApBH,GAAAD,UAAAC,CAAwB,CAAC,CAAD,CAAI,CAAJ,CAAO,CAAP,CAAxBA,CAAoCD,UAIzCI,KAAA,CAAU,QAAS,CAACC,SAAD,CAAY,CACpC,MAAOA,UAAP,CAAmBF,SAAnB,CAA+B,GADK,CAA/B,CAPe,CAYxBG,QAASA,uBAAsB,CAACC,KAAD,CAAQ,CAAA,IACjCC,aAAeD,KAAAC,aADkB,CAEjCC,kBAAoBF,KAAAG,YACpBA;iBAAAA,CAAoC,IAAK,EAA3B,GAAAD,iBAAA,CAA+B,EAA/B,CAAoCA,iBAClDE,MAAAA,CAAwBJ,KAAAK,kBACxBA,MAAAA,CAA8C,IAAK,EAA/B,GAAAD,KAAA,CAAmC,EAAnC,CAAwCA,KAChE,KAAIE,oBAAsB,EAGxBA,oBAAA,CAAoB,8BAApB,CAAA,CADEL,YAAJ,CACwDb,YAAA,CAAaa,YAAb,CADxD,CAGwD,CAAC,CAAD,CAAI,CAAJ,CAAO,CAAP,CAGxDE,kBAAAI,QAAA,CAAoB,QAAS,CAACC,UAAD,CAAaC,KAAb,CAAoB,CAC/CH,mBAAA,CAAoB,uBAAAI,OAAA,CAA+BD,KAA/B,CAAsC,SAAtC,CAApB,CAAA,CAAwErB,YAAA,CAAaoB,UAAb,CACxEF,oBAAA,CAAoB,uBAAAI,OAAA,CAA+BD,KAA/B,CAAsC,YAAtC,CAApB,CAAA,CAA2ED,UAAAG,SAC3EL,oBAAA,CAAoB,uBAAAI,OAAA,CAA+BD,KAA/B;AAAsC,eAAtC,CAApB,CAAA,CAA8ED,UAAAI,YAA9E,EAAwG,CAAC,CAAD,CAAI,CAAJ,CAAO,CAAP,CAHzD,CAAjD,CAKAN,oBAAAO,0BAAA,CAAgDV,iBAAAZ,OAChDc,MAAAE,QAAA,CAA0B,QAAS,CAACO,gBAAD,CAAmBL,KAAnB,CAA0B,CAC3DH,mBAAA,CAAoB,6BAAAI,OAAA,CAAqCD,KAArC,CAA4C,SAA5C,CAApB,CAAA,CAA8ErB,YAAA,CAAa0B,gBAAb,CAC9ER,oBAAA,CAAoB,6BAAAI,OAAA,CAAqCD,KAArC,CAA4C,aAA5C,CAApB,CAAA,CAAkFK,gBAAAC,UAFvB,CAA7D,CAIAT,oBAAAU,gCAAA,CAAsDX,KAAAd,OACtD,OAAOe,oBAzB8B,CA4BvCW,QAASA,YAAW,EAAG,CACrB,IAAIC;AAA0B,CAAnB,CAAA5B,SAAAC,OAAA,EAAyCC,IAAAA,EAAzC,GAAwBF,SAAA,CAAU,CAAV,CAAxB,CAAqDA,SAAA,CAAU,CAAV,CAArD,CAAoE6B,sBAE/E,IAAI,cAAJ,EAAsBD,KAAtB,CAA4B,CAAA,IACtBE,MAAQF,IAAAG,aAARD,EAA6B,EAC7BnB,KAAAA,CAAemB,KAAAnB,aAFO,KAGtBE,YAAciB,KAAAjB,YACdE,MAAAA,CAAoBe,KAAAf,kBAIxB,OAFgBJ,KAEhB,EAFgCE,WAEhC,EAFoE,CAEpE,CAF+CA,WAAAZ,OAE/C,EAFyEc,KAEzE,EAFyH,CAEzH,CAF8FA,KAAAd,OAE9F,CAMO+B,MAAAC,OAAA,CAAc,EAAd,CAAkBxB,sBAAA,CAAuB,CAC9CE,aAAcA,IADgC,CAE9CE,YAAaA,WAFiC,CAG9CE,kBAAmBA,KAH2B,CAAvB,CAAlB,CAIH,CACFmB,kBAAmB,CAAA,CADjB,CAJG,CANP,CACS,CACLA,kBAAmB,CAAA,CADd,CATiB,CAuB5B,GAAI,QAAJ,EAAgBN,KAAhB,CAAsB,CAChBG,WAAAA,CAAe,CACjBlB,YAAa,EADI,CAEjBE,kBAAmB,EAFF,CAIfoB;KAAAA,CAA4B,CAAA,CAChC,KAAIC,kBAAoB,CAAA,CAAxB,CACIC,eAAiBnC,IAAAA,EAErB,IAAI,CACF,IADE,IACOoC,UAAY,CAACV,IAAAW,OAAD,EAAgB,EAAhB,EAAoBC,MAAAC,SAApB,CAAA,EADnB,CAC2DC,KAA7D,CAAoE,EAAEP,KAAF,CAA8BQ,CAACD,KAADC,CAASL,SAAAM,KAAA,EAATD,MAA9B,CAApE,CAAoIR,KAApI,CAAgK,CAAA,CAAhK,CAAsK,CACpK,IAAIU,MAAQH,KAAAI,MAEZ,QAAQD,KAAAE,KAAR,EACE,KAAK,SAAL,CACEhB,WAAApB,aAAA,CAA4BkC,KAC5B,MAEF,MAAK,aAAL,CACEd,WAAAhB,kBAAAiC,KAAA,CAAoCH,KAApC,CACA,MAEF,MAAK,OAAL,CACEd,WAAAlB,YAAAmC,KAAA,CAA8BH,KAA9B,CAVJ,CAHoK,CADpK,CAoBF,MAAOI,GAAP,CAAY,CACZb,iBACA,CADoB,CAAA,CACpB,CAAAC,cAAA,CAAiBY,GAFL,CApBd,OAuBU,CACR,GAAI,CACF,GAAI,CAACd,KAAL,EAAyD,IAAzD,EAAkCG,SAAA,CAAU,QAAV,CAAlC,CACEA,SAAA,CAAU,QAAV,CAAA,EAFA,CAAJ,OAIU,CACR,GAAIF,iBAAJ,CACE,KAAMC,eAAN;AAFM,CALF,CAYV,MAAOV,YAAA,CAAY,CACjBI,aAAcA,WADG,CAAZ,CA5Ca,CAiDtB,MAAO,EA3Ec,CA7DnBmB,MAAAA,CAAyBvD,OAAA,CAAQ,kEAAR,CAE7BqC,OAAAmB,eAAA,CAAsBtD,OAAtB,CAA+B,YAA/B,CAA6C,CAC3CiD,MAAO,CAAA,CADoC,CAA7C,CAGAjD,QAAA,CAAQ,SAAR,CAAA,CAAqB,IAAK,EAEtBuD,QAAAA,CAAUF,MAAA,CAAuBvD,OAAA,CAAQ,kFAAR,CAAvB,CAWdE,QAAA,CAAQ,SAAR,CAAA,CATewD,CACbC,KAAM,QADOD,CAEbE,GAAIH,OAAA,CAAQ,SAAR,CAFSC,CAGbG,GAAIJ,OAAA,CAAQ,SAAR,CAHSC,CAIb1B,YAAaA,WAJA0B,CAKbI,QAAS,CACPC,WAAY,CADL,CALIL,CAUf,KAAIxB,uBAAyB,EAtB2G;",
"sources":["node_modules/@luma_DOT_gl/shadertools/dist/es5/modules/lights/lights.js"],
"sourcesContent":["shadow$provide[\"module$node_modules$$luma_DOT_gl$shadertools$dist$es5$modules$lights$lights\"] = function(global,require,module,exports) {\n\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\n\nvar _lights = _interopRequireDefault(require(\"./lights.glsl\"));\n\nvar _default = {\n  name: 'lights',\n  vs: _lights[\"default\"],\n  fs: _lights[\"default\"],\n  getUniforms: getUniforms,\n  defines: {\n    MAX_LIGHTS: 3\n  }\n};\nexports[\"default\"] = _default;\nvar INITIAL_MODULE_OPTIONS = {};\n\nfunction convertColor() {\n  var _ref = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n      _ref$color = _ref.color,\n      color = _ref$color === void 0 ? [0, 0, 0] : _ref$color,\n      _ref$intensity = _ref.intensity,\n      intensity = _ref$intensity === void 0 ? 1.0 : _ref$intensity;\n\n  return color.map(function (component) {\n    return component * intensity / 255.0;\n  });\n}\n\nfunction getLightSourceUniforms(_ref2) {\n  var ambientLight = _ref2.ambientLight,\n      _ref2$pointLights = _ref2.pointLights,\n      pointLights = _ref2$pointLights === void 0 ? [] : _ref2$pointLights,\n      _ref2$directionalLigh = _ref2.directionalLights,\n      directionalLights = _ref2$directionalLigh === void 0 ? [] : _ref2$directionalLigh;\n  var lightSourceUniforms = {};\n\n  if (ambientLight) {\n    lightSourceUniforms['lighting_uAmbientLight.color'] = convertColor(ambientLight);\n  } else {\n    lightSourceUniforms['lighting_uAmbientLight.color'] = [0, 0, 0];\n  }\n\n  pointLights.forEach(function (pointLight, index) {\n    lightSourceUniforms[\"lighting_uPointLight[\".concat(index, \"].color\")] = convertColor(pointLight);\n    lightSourceUniforms[\"lighting_uPointLight[\".concat(index, \"].position\")] = pointLight.position;\n    lightSourceUniforms[\"lighting_uPointLight[\".concat(index, \"].attenuation\")] = pointLight.attenuation || [1, 0, 0];\n  });\n  lightSourceUniforms.lighting_uPointLightCount = pointLights.length;\n  directionalLights.forEach(function (directionalLight, index) {\n    lightSourceUniforms[\"lighting_uDirectionalLight[\".concat(index, \"].color\")] = convertColor(directionalLight);\n    lightSourceUniforms[\"lighting_uDirectionalLight[\".concat(index, \"].direction\")] = directionalLight.direction;\n  });\n  lightSourceUniforms.lighting_uDirectionalLightCount = directionalLights.length;\n  return lightSourceUniforms;\n}\n\nfunction getUniforms() {\n  var opts = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : INITIAL_MODULE_OPTIONS;\n\n  if ('lightSources' in opts) {\n    var _ref3 = opts.lightSources || {},\n        ambientLight = _ref3.ambientLight,\n        pointLights = _ref3.pointLights,\n        directionalLights = _ref3.directionalLights;\n\n    var hasLights = ambientLight || pointLights && pointLights.length > 0 || directionalLights && directionalLights.length > 0;\n\n    if (!hasLights) {\n      return {\n        lighting_uEnabled: false\n      };\n    }\n\n    return Object.assign({}, getLightSourceUniforms({\n      ambientLight: ambientLight,\n      pointLights: pointLights,\n      directionalLights: directionalLights\n    }), {\n      lighting_uEnabled: true\n    });\n  }\n\n  if ('lights' in opts) {\n    var lightSources = {\n      pointLights: [],\n      directionalLights: []\n    };\n    var _iteratorNormalCompletion = true;\n    var _didIteratorError = false;\n    var _iteratorError = undefined;\n\n    try {\n      for (var _iterator = (opts.lights || [])[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n        var light = _step.value;\n\n        switch (light.type) {\n          case 'ambient':\n            lightSources.ambientLight = light;\n            break;\n\n          case 'directional':\n            lightSources.directionalLights.push(light);\n            break;\n\n          case 'point':\n            lightSources.pointLights.push(light);\n            break;\n\n          default:\n        }\n      }\n    } catch (err) {\n      _didIteratorError = true;\n      _iteratorError = err;\n    } finally {\n      try {\n        if (!_iteratorNormalCompletion && _iterator[\"return\"] != null) {\n          _iterator[\"return\"]();\n        }\n      } finally {\n        if (_didIteratorError) {\n          throw _iteratorError;\n        }\n      }\n    }\n\n    return getUniforms({\n      lightSources: lightSources\n    });\n  }\n\n  return {};\n}\n//# sourceMappingURL=lights.js.map\n};"],
"names":["shadow$provide","global","require","module","exports","convertColor","_ref","arguments","length","undefined","_ref$color","color","_ref$intensity","intensity","map","component","getLightSourceUniforms","_ref2","ambientLight","_ref2$pointLights","pointLights","_ref2$directionalLigh","directionalLights","lightSourceUniforms","forEach","pointLight","index","concat","position","attenuation","lighting_uPointLightCount","directionalLight","direction","lighting_uDirectionalLightCount","getUniforms","opts","INITIAL_MODULE_OPTIONS","_ref3","lightSources","Object","assign","lighting_uEnabled","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_iterator","lights","Symbol","iterator","_step","done","next","light","value","type","push","err","_interopRequireDefault","defineProperty","_lights","_default","name","vs","fs","defines","MAX_LIGHTS"]
}
