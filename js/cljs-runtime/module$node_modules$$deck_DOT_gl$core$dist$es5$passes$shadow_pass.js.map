{
"version":3,
"file":"module$node_modules$$deck_DOT_gl$core$dist$es5$passes$shadow_pass.js",
"lineCount":8,
"mappings":"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",
"sources":["node_modules/@deck_DOT_gl/core/dist/es5/passes/shadow-pass.js"],
"sourcesContent":["shadow$provide[\"module$node_modules$$deck_DOT_gl$core$dist$es5$passes$shadow_pass\"] = function(global,require,module,exports) {\n\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\n\nvar _defineProperty2 = _interopRequireDefault(require(\"@babel/runtime/helpers/defineProperty\"));\n\nvar _classCallCheck2 = _interopRequireDefault(require(\"@babel/runtime/helpers/classCallCheck\"));\n\nvar _createClass2 = _interopRequireDefault(require(\"@babel/runtime/helpers/createClass\"));\n\nvar _possibleConstructorReturn2 = _interopRequireDefault(require(\"@babel/runtime/helpers/possibleConstructorReturn\"));\n\nvar _getPrototypeOf2 = _interopRequireDefault(require(\"@babel/runtime/helpers/getPrototypeOf\"));\n\nvar _get2 = _interopRequireDefault(require(\"@babel/runtime/helpers/get\"));\n\nvar _inherits2 = _interopRequireDefault(require(\"@babel/runtime/helpers/inherits\"));\n\nvar _layersPass = _interopRequireDefault(require(\"./layers-pass\"));\n\nvar _core = require(\"@luma.gl/core\");\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { (0, _defineProperty2[\"default\"])(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nvar ShadowPass = function (_LayersPass) {\n  (0, _inherits2[\"default\"])(ShadowPass, _LayersPass);\n\n  function ShadowPass(gl, props) {\n    var _parameters, _attachments;\n\n    var _this;\n\n    (0, _classCallCheck2[\"default\"])(this, ShadowPass);\n    _this = (0, _possibleConstructorReturn2[\"default\"])(this, (0, _getPrototypeOf2[\"default\"])(ShadowPass).call(this, gl, props));\n    _this.shadowMap = new _core.Texture2D(gl, {\n      width: 1,\n      height: 1,\n      parameters: (_parameters = {}, (0, _defineProperty2[\"default\"])(_parameters, 10241, 9729), (0, _defineProperty2[\"default\"])(_parameters, 10240, 9729), (0, _defineProperty2[\"default\"])(_parameters, 10242, 33071), (0, _defineProperty2[\"default\"])(_parameters, 10243, 33071), _parameters)\n    });\n    _this.depthBuffer = new _core.Renderbuffer(gl, {\n      format: 33189,\n      width: 1,\n      height: 1\n    });\n    _this.fbo = new _core.Framebuffer(gl, {\n      id: 'shadowmap',\n      width: 1,\n      height: 1,\n      attachments: (_attachments = {}, (0, _defineProperty2[\"default\"])(_attachments, 36064, _this.shadowMap), (0, _defineProperty2[\"default\"])(_attachments, 36096, _this.depthBuffer), _attachments)\n    });\n    return _this;\n  }\n\n  (0, _createClass2[\"default\"])(ShadowPass, [{\n    key: \"render\",\n    value: function render(params) {\n      var _this2 = this;\n\n      var target = this.fbo;\n      (0, _core.withParameters)(this.gl, {\n        depthRange: [0, 1],\n        depthTest: true,\n        blend: false,\n        clearColor: [1, 1, 1, 1]\n      }, function () {\n        var viewport = params.viewports[0];\n        var pixelRatio = (0, _core.cssToDeviceRatio)(_this2.gl);\n        var width = viewport.width * pixelRatio;\n        var height = viewport.height * pixelRatio;\n\n        if (width !== target.width || height !== target.height) {\n          target.resize({\n            width: width,\n            height: height\n          });\n        }\n\n        (0, _get2[\"default\"])((0, _getPrototypeOf2[\"default\"])(ShadowPass.prototype), \"render\", _this2).call(_this2, _objectSpread({}, params, {\n          target: target,\n          pass: 'shadow'\n        }));\n      });\n    }\n  }, {\n    key: \"shouldDrawLayer\",\n    value: function shouldDrawLayer(layer) {\n      return layer.props.shadowEnabled !== false;\n    }\n  }, {\n    key: \"getModuleParameters\",\n    value: function getModuleParameters() {\n      return {\n        drawToShadowMap: true\n      };\n    }\n  }, {\n    key: \"delete\",\n    value: function _delete() {\n      if (this.fbo) {\n        this.fbo[\"delete\"]();\n        this.fbo = null;\n      }\n\n      if (this.shadowMap) {\n        this.shadowMap[\"delete\"]();\n        this.shadowMap = null;\n      }\n\n      if (this.depthBuffer) {\n        this.depthBuffer[\"delete\"]();\n        this.depthBuffer = null;\n      }\n    }\n  }]);\n  return ShadowPass;\n}(_layersPass[\"default\"]);\n\nexports[\"default\"] = ShadowPass;\n//# sourceMappingURL=shadow-pass.js.map\n};"],
"names":["shadow$provide","global","require","module","exports","ownKeys","object","enumerableOnly","keys","Object","getOwnPropertySymbols","symbols","filter","sym","getOwnPropertyDescriptor","enumerable","push","apply","_objectSpread","target","i","arguments","length","source","forEach","key","_defineProperty2","getOwnPropertyDescriptors","defineProperties","defineProperty","_interopRequireDefault","value","_classCallCheck2","_createClass2","_possibleConstructorReturn2","_getPrototypeOf2","_get2","_inherits2","_layersPass","_core","ShadowPass","_LayersPass","gl","props","_parameters","_attachments","_this","call","shadowMap","Texture2D","width","height","parameters","depthBuffer","Renderbuffer","format","fbo","Framebuffer","id","attachments","render","params","_this2","withParameters","depthRange","depthTest","blend","clearColor","viewport","viewports","pixelRatio","cssToDeviceRatio","resize","prototype","pass","shouldDrawLayer","layer","shadowEnabled","getModuleParameters","drawToShadowMap","_delete"]
}
