{
"version":3,
"file":"module$node_modules$$luma_DOT_gl$engine$dist$es5$animation$timeline.js",
"lineCount":9,
"mappings":"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",
"sources":["node_modules/@luma_DOT_gl/engine/dist/es5/animation/timeline.js"],
"sourcesContent":["shadow$provide[\"module$node_modules$$luma_DOT_gl$engine$dist$es5$animation$timeline\"] = function(global,require,module,exports) {\n\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Timeline = void 0;\n\nvar _slicedToArray2 = _interopRequireDefault(require(\"@babel/runtime/helpers/slicedToArray\"));\n\nvar _classCallCheck2 = _interopRequireDefault(require(\"@babel/runtime/helpers/classCallCheck\"));\n\nvar _createClass2 = _interopRequireDefault(require(\"@babel/runtime/helpers/createClass\"));\n\nvar channelHandles = 1;\nvar animationHandles = 1;\n\nvar Timeline = function () {\n  function Timeline() {\n    (0, _classCallCheck2[\"default\"])(this, Timeline);\n    this.time = 0;\n    this.channels = new Map();\n    this.animations = new Map();\n    this.playing = false;\n    this.lastEngineTime = -1;\n  }\n\n  (0, _createClass2[\"default\"])(Timeline, [{\n    key: \"addChannel\",\n    value: function addChannel(props) {\n      var _props$delay = props.delay,\n          delay = _props$delay === void 0 ? 0 : _props$delay,\n          _props$duration = props.duration,\n          duration = _props$duration === void 0 ? Number.POSITIVE_INFINITY : _props$duration,\n          _props$rate = props.rate,\n          rate = _props$rate === void 0 ? 1 : _props$rate,\n          _props$repeat = props.repeat,\n          repeat = _props$repeat === void 0 ? 1 : _props$repeat;\n      var handle = channelHandles++;\n      var channel = {\n        time: 0,\n        delay: delay,\n        duration: duration,\n        rate: rate,\n        repeat: repeat\n      };\n\n      this._setChannelTime(channel, this.time);\n\n      this.channels.set(handle, channel);\n      return handle;\n    }\n  }, {\n    key: \"removeChannel\",\n    value: function removeChannel(handle) {\n      this.channels[\"delete\"](handle);\n      var _iteratorNormalCompletion = true;\n      var _didIteratorError = false;\n      var _iteratorError = undefined;\n\n      try {\n        for (var _iterator = this.animations[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n          var _step$value = (0, _slicedToArray2[\"default\"])(_step.value, 2),\n              animationHandle = _step$value[0],\n              animation = _step$value[1];\n\n          if (animation.channel === handle) {\n            this.detachAnimation(animationHandle);\n          }\n        }\n      } catch (err) {\n        _didIteratorError = true;\n        _iteratorError = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion && _iterator[\"return\"] != null) {\n            _iterator[\"return\"]();\n          }\n        } finally {\n          if (_didIteratorError) {\n            throw _iteratorError;\n          }\n        }\n      }\n    }\n  }, {\n    key: \"isFinished\",\n    value: function isFinished(handle) {\n      var channel = this.channels.get(handle);\n\n      if (channel === undefined) {\n        return false;\n      }\n\n      return this.time >= channel.delay + channel.duration * channel.repeat;\n    }\n  }, {\n    key: \"getTime\",\n    value: function getTime(handle) {\n      if (handle === undefined) {\n        return this.time;\n      }\n\n      var channel = this.channels.get(handle);\n\n      if (channel === undefined) {\n        return -1;\n      }\n\n      return channel.time;\n    }\n  }, {\n    key: \"setTime\",\n    value: function setTime(time) {\n      this.time = Math.max(0, time);\n      var channels = this.channels.values();\n      var _iteratorNormalCompletion2 = true;\n      var _didIteratorError2 = false;\n      var _iteratorError2 = undefined;\n\n      try {\n        for (var _iterator2 = channels[Symbol.iterator](), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {\n          var channel = _step2.value;\n\n          this._setChannelTime(channel, this.time);\n        }\n      } catch (err) {\n        _didIteratorError2 = true;\n        _iteratorError2 = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion2 && _iterator2[\"return\"] != null) {\n            _iterator2[\"return\"]();\n          }\n        } finally {\n          if (_didIteratorError2) {\n            throw _iteratorError2;\n          }\n        }\n      }\n\n      var animations = this.animations.values();\n      var _iteratorNormalCompletion3 = true;\n      var _didIteratorError3 = false;\n      var _iteratorError3 = undefined;\n\n      try {\n        for (var _iterator3 = animations[Symbol.iterator](), _step3; !(_iteratorNormalCompletion3 = (_step3 = _iterator3.next()).done); _iteratorNormalCompletion3 = true) {\n          var animationData = _step3.value;\n          var animation = animationData.animation,\n              _channel = animationData.channel;\n          animation.setTime(this.getTime(_channel));\n        }\n      } catch (err) {\n        _didIteratorError3 = true;\n        _iteratorError3 = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion3 && _iterator3[\"return\"] != null) {\n            _iterator3[\"return\"]();\n          }\n        } finally {\n          if (_didIteratorError3) {\n            throw _iteratorError3;\n          }\n        }\n      }\n    }\n  }, {\n    key: \"play\",\n    value: function play() {\n      this.playing = true;\n    }\n  }, {\n    key: \"pause\",\n    value: function pause() {\n      this.playing = false;\n      this.lastEngineTime = -1;\n    }\n  }, {\n    key: \"reset\",\n    value: function reset() {\n      this.setTime(0);\n    }\n  }, {\n    key: \"attachAnimation\",\n    value: function attachAnimation(animation, channelHandle) {\n      var animationHandle = animationHandles++;\n      this.animations.set(animationHandle, {\n        animation: animation,\n        channel: channelHandle\n      });\n      animation.setTime(this.getTime(channelHandle));\n      return animationHandle;\n    }\n  }, {\n    key: \"detachAnimation\",\n    value: function detachAnimation(handle) {\n      this.animations[\"delete\"](handle);\n    }\n  }, {\n    key: \"update\",\n    value: function update(engineTime) {\n      if (this.playing) {\n        if (this.lastEngineTime === -1) {\n          this.lastEngineTime = engineTime;\n        }\n\n        this.setTime(this.time + (engineTime - this.lastEngineTime));\n        this.lastEngineTime = engineTime;\n      }\n    }\n  }, {\n    key: \"_setChannelTime\",\n    value: function _setChannelTime(channel, time) {\n      var offsetTime = time - channel.delay;\n      var totalDuration = channel.duration * channel.repeat;\n\n      if (offsetTime >= totalDuration) {\n        channel.time = channel.duration * channel.rate;\n      } else {\n        channel.time = Math.max(0, offsetTime) % channel.duration;\n        channel.time *= channel.rate;\n      }\n    }\n  }]);\n  return Timeline;\n}();\n\nexports.Timeline = Timeline;\n//# sourceMappingURL=timeline.js.map\n};"],
"names":["shadow$provide","global","require","module","exports","_interopRequireDefault","Object","defineProperty","value","Timeline","_slicedToArray2","_classCallCheck2","_createClass2","channelHandles","animationHandles","time","channels","Map","animations","playing","lastEngineTime","key","addChannel","props","_props$delay","delay","_props$duration","duration","Number","POSITIVE_INFINITY","_props$rate","rate","_props$repeat","repeat","handle","channel","_setChannelTime","set","removeChannel","_iteratorNormalCompletion","_didIteratorError","_iteratorError","undefined","_iterator","Symbol","iterator","_step","done","next","_step$value","animationHandle","animation","detachAnimation","err","isFinished","get","getTime","setTime","Math","max","values","_iteratorNormalCompletion2","_didIteratorError2","_iteratorError2","_iterator2","_step2","_iteratorNormalCompletion3","_didIteratorError3","_iteratorError3","_iterator3","_step3","animationData","play","pause","reset","attachAnimation","channelHandle","update","engineTime","offsetTime"]
}
