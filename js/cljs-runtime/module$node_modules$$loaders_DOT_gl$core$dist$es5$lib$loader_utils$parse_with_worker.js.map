{
"version":3,
"file":"module$node_modules$$loaders_DOT_gl$core$dist$es5$lib$loader_utils$parse_with_worker.js",
"lineCount":7,
"mappings":"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",
"sources":["node_modules/@loaders_DOT_gl/core/dist/es5/lib/loader-utils/parse-with-worker.js"],
"sourcesContent":["shadow$provide[\"module$node_modules$$loaders_DOT_gl$core$dist$es5$lib$loader_utils$parse_with_worker\"] = function(global,require,module,exports) {\n\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.canParseWithWorker = canParseWithWorker;\nexports[\"default\"] = parseWithWorker;\n\nvar _regenerator = _interopRequireDefault(require(\"@babel/runtime/regenerator\"));\n\nvar _asyncToGenerator2 = _interopRequireDefault(require(\"@babel/runtime/helpers/asyncToGenerator\"));\n\nvar _workerFarm2 = _interopRequireDefault(require(\"../../worker-utils/worker-farm\"));\n\nvar _binaryUtils = require(\"../../javascript-utils/binary-utils\");\n\nvar _loaderUtils = require(\"@loaders.gl/loader-utils\");\n\nvar _parse = require(\"../api/parse\");\n\nvar VERSION = typeof \"2.2.6\" !== 'undefined' ? \"2.2.6\" : 'latest';\n\nfunction canParseWithWorker(loader, data, options, context) {\n  if (!_workerFarm2[\"default\"].isSupported()) {\n    return false;\n  }\n\n  var loaderOptions = options && options[loader.id];\n\n  if (options.worker === 'local' && loaderOptions && loaderOptions.localWorkerUrl || options.worker && loaderOptions && loaderOptions.workerUrl) {\n    return loader.useWorker ? loader.useWorker(options) : true;\n  }\n\n  return false;\n}\n\nfunction parseWithWorker(loader, data, options, context) {\n  var _ref = options || {},\n      worker = _ref.worker;\n\n  var loaderOptions = options && options[loader.id] || {};\n  var workerUrl = worker === 'local' ? loaderOptions.localWorkerUrl : loaderOptions.workerUrl;\n  var workerSource = \"url(\".concat(workerUrl, \")\");\n  var workerName = loader.name;\n  var workerFarm = getWorkerFarm(options);\n  options = JSON.parse(JSON.stringify(options));\n  var warning = loader.version !== VERSION ? \"(core version \".concat(VERSION, \")\") : '';\n  return workerFarm.process(workerSource, \"\".concat(workerName, \"-worker@\").concat(loader.version).concat(warning), {\n    arraybuffer: (0, _binaryUtils.toArrayBuffer)(data),\n    options: options,\n    source: \"loaders.gl@\".concat(VERSION),\n    type: 'parse'\n  });\n}\n\nvar _workerFarm = null;\n\nfunction getWorkerFarm() {\n  var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  var props = {};\n\n  if (options.maxConcurrency) {\n    props.maxConcurrency = options.maxConcurrency;\n  }\n\n  if (options.onDebug) {\n    props.onDebug = options.onDebug;\n  }\n\n  if (!_workerFarm) {\n    _workerFarm = new _workerFarm2[\"default\"]({\n      onMessage: onWorkerMessage\n    });\n  }\n\n  _workerFarm.setProps(props);\n\n  return _workerFarm;\n}\n\nfunction onWorkerMessage(_x) {\n  return _onWorkerMessage.apply(this, arguments);\n}\n\nfunction _onWorkerMessage() {\n  _onWorkerMessage = (0, _asyncToGenerator2[\"default\"])(_regenerator[\"default\"].mark(function _callee(_ref2) {\n    var worker, data, resolve, reject, result;\n    return _regenerator[\"default\"].wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            worker = _ref2.worker, data = _ref2.data, resolve = _ref2.resolve, reject = _ref2.reject;\n            _context.t0 = data.type;\n            _context.next = _context.t0 === 'done' ? 4 : _context.t0 === 'parse' ? 6 : _context.t0 === 'error' ? 17 : 19;\n            break;\n\n          case 4:\n            resolve(data.result);\n            return _context.abrupt(\"break\", 19);\n\n          case 6:\n            _context.prev = 6;\n            _context.next = 9;\n            return (0, _parse.parse)(data.arraybuffer, data.options, data.url);\n\n          case 9:\n            result = _context.sent;\n            worker.postMessage({\n              type: 'parse-done',\n              id: data.id,\n              result: result\n            }, (0, _loaderUtils.getTransferList)(result));\n            _context.next = 16;\n            break;\n\n          case 13:\n            _context.prev = 13;\n            _context.t1 = _context[\"catch\"](6);\n            worker.postMessage({\n              type: 'parse-error',\n              id: data.id,\n              message: _context.t1.message\n            });\n\n          case 16:\n            return _context.abrupt(\"break\", 19);\n\n          case 17:\n            reject(data.message);\n            return _context.abrupt(\"break\", 19);\n\n          case 19:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee, null, [[6, 13]]);\n  }));\n  return _onWorkerMessage.apply(this, arguments);\n}\n//# sourceMappingURL=parse-with-worker.js.map\n};"],
"names":["shadow$provide","global","require","module","exports","getWorkerFarm","options","arguments","length","undefined","props","maxConcurrency","onDebug","_workerFarm","_workerFarm2","onMessage","onWorkerMessage","setProps","_x","_onWorkerMessage","apply","_asyncToGenerator2","_regenerator","mark","_callee","_ref2","worker","data","resolve","reject","result","wrap","_callee$","_context","prev","next","t0","type","abrupt","_parse","parse","arraybuffer","url","sent","postMessage","id","_loaderUtils","getTransferList","t1","message","stop","_interopRequireDefault","Object","defineProperty","value","canParseWithWorker","loader","context","isSupported","loaderOptions","localWorkerUrl","workerUrl","useWorker","parseWithWorker","workerSource","concat","workerName","name","workerFarm","JSON","stringify","warning","version","VERSION","process","_binaryUtils","toArrayBuffer","source"]
}
