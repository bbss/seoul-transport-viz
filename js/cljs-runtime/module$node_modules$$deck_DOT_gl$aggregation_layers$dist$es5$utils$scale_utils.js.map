{
"version":3,
"file":"module$node_modules$$deck_DOT_gl$aggregation_layers$dist$es5$utils$scale_utils.js",
"lineCount":9,
"mappings":"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",
"sources":["node_modules/@deck_DOT_gl/aggregation-layers/dist/es5/utils/scale-utils.js"],
"sourcesContent":["shadow$provide[\"module$node_modules$$deck_DOT_gl$aggregation_layers$dist$es5$utils$scale_utils\"] = function(global,require,module,exports) {\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.getScale = getScale;\nexports.getQuantizeScale = getQuantizeScale;\nexports.getLinearScale = getLinearScale;\nexports.getQuantileScale = getQuantileScale;\nexports.getOrdinalScale = getOrdinalScale;\nexports.quantizeScale = quantizeScale;\nexports.linearScale = linearScale;\nexports.unique = unique;\nexports.getLinearDomain = getLinearDomain;\nexports.getQuantileDomain = getQuantileDomain;\nexports.getOrdinalDomain = getOrdinalDomain;\nexports.getScaleDomain = getScaleDomain;\nexports.clamp = clamp;\nexports.getScaleFunctionByScaleType = getScaleFunctionByScaleType;\n\nvar _core = require(\"@deck.gl/core\");\n\nfunction getScale(domain, range, scaleFunction) {\n  var scale = scaleFunction;\n\n  scale.domain = function () {\n    return domain;\n  };\n\n  scale.range = function () {\n    return range;\n  };\n\n  return scale;\n}\n\nfunction getQuantizeScale(domain, range) {\n  var scaleFunction = function scaleFunction(value) {\n    return quantizeScale(domain, range, value);\n  };\n\n  return getScale(domain, range, scaleFunction);\n}\n\nfunction getLinearScale(domain, range) {\n  var scaleFunction = function scaleFunction(value) {\n    return linearScale(domain, range, value);\n  };\n\n  return getScale(domain, range, scaleFunction);\n}\n\nfunction getQuantileScale(domain, range) {\n  var sortedDomain = domain.sort(ascending);\n  var i = 0;\n  var n = Math.max(1, range.length);\n  var thresholds = new Array(n - 1);\n\n  while (++i < n) {\n    thresholds[i - 1] = threshold(sortedDomain, i / n);\n  }\n\n  var scaleFunction = function scaleFunction(value) {\n    return thresholdsScale(thresholds, range, value);\n  };\n\n  scaleFunction.thresholds = function () {\n    return thresholds;\n  };\n\n  return getScale(domain, range, scaleFunction);\n}\n\nfunction ascending(a, b) {\n  return a - b;\n}\n\nfunction threshold(domain, fraction) {\n  var domainLength = domain.length;\n\n  if (fraction <= 0 || domainLength < 2) {\n    return domain[0];\n  }\n\n  if (fraction >= 1) {\n    return domain[domainLength - 1];\n  }\n\n  var domainFraction = (domainLength - 1) * fraction;\n  var lowIndex = Math.floor(domainFraction);\n  var low = domain[lowIndex];\n  var high = domain[lowIndex + 1];\n  return low + (high - low) * (domainFraction - lowIndex);\n}\n\nfunction bisectRight(a, x) {\n  var lo = 0;\n  var hi = a.length;\n\n  while (lo < hi) {\n    var mid = lo + hi >>> 1;\n\n    if (ascending(a[mid], x) > 0) {\n      hi = mid;\n    } else {\n      lo = mid + 1;\n    }\n  }\n\n  return lo;\n}\n\nfunction thresholdsScale(thresholds, range, value) {\n  return range[bisectRight(thresholds, value)];\n}\n\nfunction ordinalScale(domain, domainMap, range, value) {\n  var key = \"\".concat(value);\n  var d = domainMap.get(key);\n\n  if (d === undefined) {\n    d = domain.push(value);\n    domainMap.set(key, d);\n  }\n\n  return range[(d - 1) % range.length];\n}\n\nfunction getOrdinalScale(domain, range) {\n  var domainMap = new Map();\n  var uniqueDomain = [];\n  var _iteratorNormalCompletion = true;\n  var _didIteratorError = false;\n  var _iteratorError = undefined;\n\n  try {\n    for (var _iterator = domain[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n      var d = _step.value;\n      var key = \"\".concat(d);\n\n      if (!domainMap.has(key)) {\n        domainMap.set(key, uniqueDomain.push(d));\n      }\n    }\n  } catch (err) {\n    _didIteratorError = true;\n    _iteratorError = err;\n  } finally {\n    try {\n      if (!_iteratorNormalCompletion && _iterator[\"return\"] != null) {\n        _iterator[\"return\"]();\n      }\n    } finally {\n      if (_didIteratorError) {\n        throw _iteratorError;\n      }\n    }\n  }\n\n  var scaleFunction = function scaleFunction(value) {\n    return ordinalScale(uniqueDomain, domainMap, range, value);\n  };\n\n  return getScale(domain, range, scaleFunction);\n}\n\nfunction quantizeScale(domain, range, value) {\n  var domainRange = domain[1] - domain[0];\n\n  if (domainRange <= 0) {\n    _core.log.warn('quantizeScale: invalid domain, returning range[0]')();\n\n    return range[0];\n  }\n\n  var step = domainRange / range.length;\n  var idx = Math.floor((value - domain[0]) / step);\n  var clampIdx = Math.max(Math.min(idx, range.length - 1), 0);\n  return range[clampIdx];\n}\n\nfunction linearScale(domain, range, value) {\n  return (value - domain[0]) / (domain[1] - domain[0]) * (range[1] - range[0]) + range[0];\n}\n\nfunction notNullOrUndefined(d) {\n  return d !== undefined && d !== null;\n}\n\nfunction unique(values) {\n  var results = [];\n  values.forEach(function (v) {\n    if (!results.includes(v) && notNullOrUndefined(v)) {\n      results.push(v);\n    }\n  });\n  return results;\n}\n\nfunction getTruthyValues(data, valueAccessor) {\n  var values = typeof valueAccessor === 'function' ? data.map(valueAccessor) : data;\n  return values.filter(notNullOrUndefined);\n}\n\nfunction getLinearDomain(data, valueAccessor) {\n  var sorted = getTruthyValues(data, valueAccessor).sort();\n  return sorted.length ? [sorted[0], sorted[sorted.length - 1]] : [0, 0];\n}\n\nfunction getQuantileDomain(data, valueAccessor) {\n  return getTruthyValues(data, valueAccessor);\n}\n\nfunction getOrdinalDomain(data, valueAccessor) {\n  return unique(getTruthyValues(data, valueAccessor));\n}\n\nfunction getScaleDomain(scaleType, data, valueAccessor) {\n  switch (scaleType) {\n    case 'quantize':\n    case 'linear':\n      return getLinearDomain(data, valueAccessor);\n\n    case 'quantile':\n      return getQuantileDomain(data, valueAccessor);\n\n    case 'ordinal':\n      return getOrdinalDomain(data, valueAccessor);\n\n    default:\n      return getLinearDomain(data, valueAccessor);\n  }\n}\n\nfunction clamp(value, min, max) {\n  return Math.max(min, Math.min(max, value));\n}\n\nfunction getScaleFunctionByScaleType(scaleType) {\n  switch (scaleType) {\n    case 'quantize':\n      return getQuantizeScale;\n\n    case 'linear':\n      return getLinearScale;\n\n    case 'quantile':\n      return getQuantileScale;\n\n    case 'ordinal':\n      return getOrdinalScale;\n\n    default:\n      return getQuantizeScale;\n  }\n}\n//# sourceMappingURL=scale-utils.js.map\n};"],
"names":["shadow$provide","global","require","module","exports","getScale","domain","range","scaleFunction","scale.domain","scale.range","getQuantizeScale","value","quantizeScale","getLinearScale","linearScale","getQuantileScale","sortedDomain","sort","ascending","i","n","Math","max","length","thresholds","Array","threshold","lo","hi","mid","a","scaleFunction.thresholds","b","fraction","domainLength","domainFraction","lowIndex","floor","low","high","getOrdinalScale","domainMap","Map","uniqueDomain","_iteratorNormalCompletion","_didIteratorError","_iteratorError","undefined","_iterator","Symbol","iterator","_step","done","next","d","key","concat","has","set","push","err","get","domainRange","_core","log","warn","clampIdx","min","idx","notNullOrUndefined","unique","values","results","forEach","v","includes","getTruthyValues","data","valueAccessor","filter","map","getLinearDomain","sorted","getOrdinalDomain","Object","defineProperty","getQuantileDomain","getScaleDomain","scaleType","clamp","getScaleFunctionByScaleType"]
}
