shadow$provide.module$node_modules$d3_brush$dist$d3_brush=function(global$jscomp$0,require,module,exports$jscomp$0){(function(global,factory){"object"===typeof exports$jscomp$0&&"undefined"!==typeof module?factory(exports$jscomp$0,require("module$node_modules$d3_dispatch$dist$d3_dispatch"),require("module$node_modules$d3_drag$dist$d3_drag"),require("module$node_modules$d3_interpolate$dist$d3_interpolate"),require("module$node_modules$d3_selection$dist$d3_selection"),require("module$node_modules$d3_transition$dist$d3_transition")):
"function"===typeof define&&define.amd?define("exports d3-dispatch d3-drag d3-interpolate d3-selection d3-transition".split(" "),factory):(global=global||self,factory(global.d3=global.d3||{},global.d3,global.d3,global.d3,global.d3,global.d3))})(this,function(exports,d3Dispatch,d3Drag,d3Interpolate,d3Selection,d3Transition){function constant(x){return function(){return x}}function BrushEvent(target,type,selection){this.target=target;this.type=type;this.selection=selection}function noevent(){d3Selection.event.preventDefault();
d3Selection.event.stopImmediatePropagation()}function number1(e){return[+e[0],+e[1]]}function number2(e){return[number1(e[0]),number1(e[1])]}function toucher(identifier){return function(target){return d3Selection.touch(target,d3Selection.event.touches,identifier)}}function type$jscomp$0(t){return{type:t}}function defaultFilter(){return!d3Selection.event.ctrlKey&&!d3Selection.event.button}function defaultExtent(){var svg=this.ownerSVGElement||this;return svg.hasAttribute("viewBox")?(svg=svg.viewBox.baseVal,
[[svg.x,svg.y],[svg.x+svg.width,svg.y+svg.height]]):[[0,0],[svg.width.baseVal.value,svg.height.baseVal.value]]}function defaultTouchable(){return navigator.maxTouchPoints||"ontouchstart"in this}function local(node){for(;!node.__brush;)if(!(node=node.parentNode))return;return node.__brush}function brush$1(dim){function brush(group){var overlay=group.property("__brush",initialize).selectAll(".overlay").data([type$jscomp$0("overlay")]);overlay.enter().append("rect").attr("class","overlay").attr("pointer-events",
"all").attr("cursor",cursors.overlay).merge(overlay).each(function(){var extent=local(this).extent;d3Selection.select(this).attr("x",extent[0][0]).attr("y",extent[0][1]).attr("width",extent[1][0]-extent[0][0]).attr("height",extent[1][1]-extent[0][1])});group.selectAll(".selection").data([type$jscomp$0("selection")]).enter().append("rect").attr("class","selection").attr("cursor",cursors.selection).attr("fill","#777").attr("fill-opacity",.3).attr("stroke","#fff").attr("shape-rendering","crispEdges");
overlay=group.selectAll(".handle").data(dim.handles,function(d){return d.type});overlay.exit().remove();overlay.enter().append("rect").attr("class",function(d){return"handle handle--"+d.type}).attr("cursor",function(d){return cursors[d.type]});group.each(redraw).attr("fill","none").attr("pointer-events","all").on("mousedown.brush",started).filter(touchable).on("touchstart.brush",started).on("touchmove.brush",touchmoved).on("touchend.brush touchcancel.brush",touchended).style("touch-action","none").style("-webkit-tap-highlight-color",
"rgba(0,0,0,0)")}function redraw(){var group=d3Selection.select(this),selection=local(this).selection;selection?(group.selectAll(".selection").style("display",null).attr("x",selection[0][0]).attr("y",selection[0][1]).attr("width",selection[1][0]-selection[0][0]).attr("height",selection[1][1]-selection[0][1]),group.selectAll(".handle").style("display",null).attr("x",function(d){return"e"===d.type[d.type.length-1]?selection[1][0]-handleSize/2:selection[0][0]-handleSize/2}).attr("y",function(d){return"s"===
d.type[0]?selection[1][1]-handleSize/2:selection[0][1]-handleSize/2}).attr("width",function(d){return"n"===d.type||"s"===d.type?selection[1][0]-selection[0][0]+handleSize:handleSize}).attr("height",function(d){return"e"===d.type||"w"===d.type?selection[1][1]-selection[0][1]+handleSize:handleSize})):group.selectAll(".selection,.handle").style("display","none").attr("x",null).attr("y",null).attr("width",null).attr("height",null)}function emitter(that,args,clean){var emit=that.__brush.emitter;return!emit||
clean&&emit.clean?new Emitter(that,args,clean):emit}function Emitter(that,args,clean){this.that=that;this.args=args;this.state=that.__brush;this.active=0;this.clean=clean}function started(){function moved(){var point1=pointer(that);!shifting||lockX||lockY||(Math.abs(point1[0]-point[0])>Math.abs(point1[1]-point[1])?lockY=!0:lockX=!0);point=point1;moving=!0;noevent();move()}function move(){dx=point[0]-point0[0];dy=point[1]-point0[1];switch(mode){case MODE_SPACE:case MODE_DRAG:signX&&(dx=Math.max(W-
w0,Math.min(E-e0,dx)),w1=w0+dx,e1=e0+dx);signY&&(dy=Math.max(N-n0,Math.min(S-s0,dy)),n1=n0+dy,s1=s0+dy);break;case MODE_HANDLE:0>signX?(dx=Math.max(W-w0,Math.min(E-w0,dx)),w1=w0+dx,e1=e0):0<signX&&(dx=Math.max(W-e0,Math.min(E-e0,dx)),w1=w0,e1=e0+dx);0>signY?(dy=Math.max(N-n0,Math.min(S-n0,dy)),n1=n0+dy,s1=s0):0<signY&&(dy=Math.max(N-s0,Math.min(S-s0,dy)),n1=n0,s1=s0+dy);break;case MODE_CENTER:signX&&(w1=Math.max(W,Math.min(E,w0-dx*signX)),e1=Math.max(W,Math.min(E,e0+dx*signX))),signY&&(n1=Math.max(N,
Math.min(S,n0-dy*signY)),s1=Math.max(N,Math.min(S,s0+dy*signY)))}if(e1<w1){signX*=-1;var t=w0;w0=e0;e0=t;t=w1;w1=e1;e1=t;type in flipX&&overlay.attr("cursor",cursors[type=flipX[type]])}s1<n1&&(signY*=-1,t=n0,n0=s0,s0=t,t=n1,n1=s1,s1=t,type in flipY&&overlay.attr("cursor",cursors[type=flipY[type]]));state.selection&&(selection=state.selection);lockX&&(w1=selection[0][0],e1=selection[1][0]);lockY&&(n1=selection[0][1],s1=selection[1][1]);if(selection[0][0]!==w1||selection[0][1]!==n1||selection[1][0]!==
e1||selection[1][1]!==s1)state.selection=[[w1,n1],[e1,s1]],redraw.call(that),emit.brush()}function ended(){d3Selection.event.stopImmediatePropagation();if(d3Selection.event.touches){if(d3Selection.event.touches.length)return;touchending&&clearTimeout(touchending);touchending=setTimeout(function(){touchending=null},500)}else d3Drag.dragEnable(d3Selection.event.view,moving),view.on("keydown.brush keyup.brush mousemove.brush mouseup.brush",null);group.attr("pointer-events","all");overlay.attr("cursor",
cursors.overlay);state.selection&&(selection=state.selection);if(selection[0][0]===selection[1][0]||selection[0][1]===selection[1][1])state.selection=null,redraw.call(that);emit.end()}function keydowned(){switch(d3Selection.event.keyCode){case 16:shifting=signX&&signY;break;case 18:mode===MODE_HANDLE&&(signX&&(e0=e1-dx*signX,w0=w1+dx*signX),signY&&(s0=s1-dy*signY,n0=n1+dy*signY),mode=MODE_CENTER,move());break;case 32:if(mode===MODE_HANDLE||mode===MODE_CENTER)0>signX?e0=e1-dx:0<signX&&(w0=w1-dx),0>
signY?s0=s1-dy:0<signY&&(n0=n1-dy),mode=MODE_SPACE,overlay.attr("cursor",cursors.selection),move();break;default:return}noevent()}function keyupped(){switch(d3Selection.event.keyCode){case 16:shifting&&(lockX=lockY=shifting=!1,move());break;case 18:mode===MODE_CENTER&&(0>signX?e0=e1:0<signX&&(w0=w1),0>signY?s0=s1:0<signY&&(n0=n1),mode=MODE_HANDLE,move());break;case 32:mode===MODE_SPACE&&(d3Selection.event.altKey?(signX&&(e0=e1-dx*signX,w0=w1+dx*signX),signY&&(s0=s1-dy*signY,n0=n1+dy*signY),mode=MODE_CENTER):
(0>signX?e0=e1:0<signX&&(w0=w1),0>signY?s0=s1:0<signY&&(n0=n1),mode=MODE_HANDLE),overlay.attr("cursor",cursors[type]),move());break;default:return}noevent()}if((!touchending||d3Selection.event.touches)&&filter.apply(this,arguments)){var that=this,type=d3Selection.event.target.__data__.type,mode="selection"===(keys&&d3Selection.event.metaKey?type="overlay":type)?MODE_DRAG:keys&&d3Selection.event.altKey?MODE_CENTER:MODE_HANDLE,signX=dim===Y?null:signsX[type],signY=dim===X?null:signsY[type],state=local(that),
extent=state.extent,selection=state.selection,W=extent[0][0],w0,N=extent[0][1],n0,E=extent[1][0],e0,S=extent[1][1],s0,dx=0,dy=0,moving,shifting=signX&&signY&&keys&&d3Selection.event.shiftKey,lockX,lockY,pointer=d3Selection.event.touches?toucher(d3Selection.event.changedTouches[0].identifier):d3Selection.mouse,point0=pointer(that),point=point0,emit=emitter(that,arguments,!0).beforestart();"overlay"===type?(selection&&(moving=!0),state.selection=selection=[[w0=dim===Y?W:point0[0],n0=dim===X?N:point0[1]],
[e0=dim===Y?E:w0,s0=dim===X?S:n0]]):(w0=selection[0][0],n0=selection[0][1],e0=selection[1][0],s0=selection[1][1]);var w1=w0;var n1=n0;var e1=e0;var s1=s0;var group=d3Selection.select(that).attr("pointer-events","none"),overlay=group.selectAll(".overlay").attr("cursor",cursors[type]);if(d3Selection.event.touches)emit.moved=moved,emit.ended=ended;else{var view=d3Selection.select(d3Selection.event.view).on("mousemove.brush",moved,!0).on("mouseup.brush",ended,!0);if(keys)view.on("keydown.brush",keydowned,
!0).on("keyup.brush",keyupped,!0);d3Drag.dragDisable(d3Selection.event.view)}d3Selection.event.stopImmediatePropagation();d3Transition.interrupt(that);redraw.call(that);emit.start()}}function touchmoved(){emitter(this,arguments).moved()}function touchended(){emitter(this,arguments).ended()}function initialize(){var state=this.__brush||{selection:null};state.extent=number2(extent$jscomp$0.apply(this,arguments));state.dim=dim;return state}var extent$jscomp$0=defaultExtent,filter=defaultFilter,touchable=
defaultTouchable,keys=!0,listeners=d3Dispatch.dispatch("start","brush","end"),handleSize=6,touchending;brush.move=function(group,selection){group.selection?group.on("start.brush",function(){emitter(this,arguments).beforestart().start()}).on("interrupt.brush end.brush",function(){emitter(this,arguments).end()}).tween("brush",function(){function tween(t){state.selection=1===t&&null===selection1?null:i(t);redraw.call(that);emit.brush()}var that=this,state=that.__brush,emit=emitter(that,arguments),selection0=
state.selection,selection1=dim.input("function"===typeof selection?selection.apply(this,arguments):selection,state.extent),i=d3Interpolate.interpolate(selection0,selection1);return null!==selection0&&null!==selection1?tween:tween(1)}):group.each(function(){var args=arguments,state=this.__brush,selection1=dim.input("function"===typeof selection?selection.apply(this,args):selection,state.extent);args=emitter(this,args).beforestart();d3Transition.interrupt(this);state.selection=null===selection1?null:
selection1;redraw.call(this);args.start().brush().end()})};brush.clear=function(group){brush.move(group,null)};Emitter.prototype={beforestart:function(){1===++this.active&&(this.state.emitter=this,this.starting=!0);return this},start:function(){this.starting?(this.starting=!1,this.emit("start")):this.emit("brush");return this},brush:function(){this.emit("brush");return this},end:function(){0===--this.active&&(delete this.state.emitter,this.emit("end"));return this},emit:function(type){d3Selection.customEvent(new BrushEvent(brush,
type,dim.output(this.state.selection)),listeners.apply,listeners,[type,this.that,this.args])}};brush.extent=function(_){return arguments.length?(extent$jscomp$0="function"===typeof _?_:constant(number2(_)),brush):extent$jscomp$0};brush.filter=function(_){return arguments.length?(filter="function"===typeof _?_:constant(!!_),brush):filter};brush.touchable=function(_){return arguments.length?(touchable="function"===typeof _?_:constant(!!_),brush):touchable};brush.handleSize=function(_){return arguments.length?
(handleSize=+_,brush):handleSize};brush.keyModifiers=function(_){return arguments.length?(keys=!!_,brush):keys};brush.on=function(){var value=listeners.on.apply(listeners,arguments);return value===listeners?brush:value};return brush}var MODE_DRAG={name:"drag"},MODE_SPACE={name:"space"},MODE_HANDLE={name:"handle"},MODE_CENTER={name:"center"},X={name:"x",handles:["w","e"].map(type$jscomp$0),input:function(x,e){return null==x?null:[[+x[0],e[0][1]],[+x[1],e[1][1]]]},output:function(xy){return xy&&[xy[0][0],
xy[1][0]]}},Y={name:"y",handles:["n","s"].map(type$jscomp$0),input:function(y,e){return null==y?null:[[e[0][0],+y[0]],[e[1][0],+y[1]]]},output:function(xy){return xy&&[xy[0][1],xy[1][1]]}},XY={name:"xy",handles:"n w e s nw ne sw se".split(" ").map(type$jscomp$0),input:function(xy){return null==xy?null:number2(xy)},output:function(xy){return xy}},cursors={overlay:"crosshair",selection:"move",n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",
sw:"nesw-resize"},flipX={e:"w",w:"e",nw:"ne",ne:"nw",se:"sw",sw:"se"},flipY={n:"s",s:"n",nw:"sw",ne:"se",se:"ne",sw:"nw"},signsX={overlay:1,selection:1,n:null,e:1,s:null,w:-1,nw:-1,ne:1,se:1,sw:-1},signsY={overlay:1,selection:1,n:-1,e:null,s:1,w:null,nw:-1,ne:-1,se:1,sw:1};exports.brush=function(){return brush$1(XY)};exports.brushSelection=function(node){return(node=node.__brush)?node.dim.output(node.selection):null};exports.brushX=function(){return brush$1(X)};exports.brushY=function(){return brush$1(Y)};
Object.defineProperty(exports,"__esModule",{value:!0})})}
//# sourceMappingURL=module$node_modules$d3_brush$dist$d3_brush.js.map
