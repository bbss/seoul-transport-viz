{
"version":3,
"file":"module$node_modules$$math_DOT_gl$web_mercator$dist$es5$fly_to_viewport.js",
"lineCount":8,
"mappings":"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",
"sources":["node_modules/@math_DOT_gl/web-mercator/dist/es5/fly-to-viewport.js"],
"sourcesContent":["shadow$provide[\"module$node_modules$$math_DOT_gl$web_mercator$dist$es5$fly_to_viewport\"] = function(global,require,module,exports) {\n\"use strict\";\n\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = flyToViewport;\nexports.getFlyToDuration = getFlyToDuration;\n\nvar _mathUtils = require(\"./math-utils\");\n\nvar _webMercatorUtils = require(\"./web-mercator-utils\");\n\nvar vec2 = _interopRequireWildcard(require(\"gl-matrix/vec2\"));\n\nvar EPSILON = 0.01;\nvar VIEWPORT_TRANSITION_PROPS = ['longitude', 'latitude', 'zoom'];\nvar DEFAULT_OPTS = {\n  curve: 1.414,\n  speed: 1.2\n};\n\nfunction flyToViewport(startProps, endProps, t) {\n  var opts = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};\n  var viewport = {};\n\n  var _getFlyToTransitionPa = getFlyToTransitionParams(startProps, endProps, opts),\n      startZoom = _getFlyToTransitionPa.startZoom,\n      startCenterXY = _getFlyToTransitionPa.startCenterXY,\n      uDelta = _getFlyToTransitionPa.uDelta,\n      w0 = _getFlyToTransitionPa.w0,\n      u1 = _getFlyToTransitionPa.u1,\n      S = _getFlyToTransitionPa.S,\n      rho = _getFlyToTransitionPa.rho,\n      rho2 = _getFlyToTransitionPa.rho2,\n      r0 = _getFlyToTransitionPa.r0;\n\n  if (u1 < EPSILON) {\n    var _iteratorNormalCompletion = true;\n    var _didIteratorError = false;\n    var _iteratorError = undefined;\n\n    try {\n      for (var _iterator = VIEWPORT_TRANSITION_PROPS[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n        var key = _step.value;\n        var startValue = startProps[key];\n        var endValue = endProps[key];\n        viewport[key] = (0, _mathUtils.lerp)(startValue, endValue, t);\n      }\n    } catch (err) {\n      _didIteratorError = true;\n      _iteratorError = err;\n    } finally {\n      try {\n        if (!_iteratorNormalCompletion && _iterator[\"return\"] != null) {\n          _iterator[\"return\"]();\n        }\n      } finally {\n        if (_didIteratorError) {\n          throw _iteratorError;\n        }\n      }\n    }\n\n    return viewport;\n  }\n\n  var s = t * S;\n  var w = Math.cosh(r0) / Math.cosh(r0 + rho * s);\n  var u = w0 * ((Math.cosh(r0) * Math.tanh(r0 + rho * s) - Math.sinh(r0)) / rho2) / u1;\n  var scaleIncrement = 1 / w;\n  var newZoom = startZoom + (0, _webMercatorUtils.scaleToZoom)(scaleIncrement);\n  var newCenterWorld = vec2.scale([], uDelta, u);\n  vec2.add(newCenterWorld, newCenterWorld, startCenterXY);\n  var newCenter = (0, _webMercatorUtils.worldToLngLat)(newCenterWorld);\n  viewport.longitude = newCenter[0];\n  viewport.latitude = newCenter[1];\n  viewport.zoom = newZoom;\n  return viewport;\n}\n\nfunction getFlyToDuration(startProps, endProps) {\n  var opts = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  opts = Object.assign({}, DEFAULT_OPTS, opts);\n  var _opts = opts,\n      screenSpeed = _opts.screenSpeed,\n      speed = _opts.speed,\n      maxDuration = _opts.maxDuration;\n\n  var _getFlyToTransitionPa2 = getFlyToTransitionParams(startProps, endProps, opts),\n      S = _getFlyToTransitionPa2.S,\n      rho = _getFlyToTransitionPa2.rho;\n\n  var length = 1000 * S;\n  var duration;\n\n  if (Number.isFinite(screenSpeed)) {\n    duration = length / (screenSpeed / rho);\n  } else {\n    duration = length / speed;\n  }\n\n  return Number.isFinite(maxDuration) && duration > maxDuration ? 0 : duration;\n}\n\nfunction getFlyToTransitionParams(startProps, endProps, opts) {\n  opts = Object.assign({}, DEFAULT_OPTS, opts);\n  var rho = opts.curve;\n  var startZoom = startProps.zoom;\n  var startCenter = [startProps.longitude, startProps.latitude];\n  var startScale = (0, _webMercatorUtils.zoomToScale)(startZoom);\n  var endZoom = endProps.zoom;\n  var endCenter = [endProps.longitude, endProps.latitude];\n  var scale = (0, _webMercatorUtils.zoomToScale)(endZoom - startZoom);\n  var startCenterXY = (0, _webMercatorUtils.lngLatToWorld)(startCenter);\n  var endCenterXY = (0, _webMercatorUtils.lngLatToWorld)(endCenter);\n  var uDelta = vec2.sub([], endCenterXY, startCenterXY);\n  var w0 = Math.max(startProps.width, startProps.height);\n  var w1 = w0 / scale;\n  var u1 = vec2.length(uDelta) * startScale;\n\n  var _u1 = Math.max(u1, EPSILON);\n\n  var rho2 = rho * rho;\n  var b0 = (w1 * w1 - w0 * w0 + rho2 * rho2 * _u1 * _u1) / (2 * w0 * rho2 * _u1);\n  var b1 = (w1 * w1 - w0 * w0 - rho2 * rho2 * _u1 * _u1) / (2 * w1 * rho2 * _u1);\n  var r0 = Math.log(Math.sqrt(b0 * b0 + 1) - b0);\n  var r1 = Math.log(Math.sqrt(b1 * b1 + 1) - b1);\n  var S = (r1 - r0) / rho;\n  return {\n    startZoom: startZoom,\n    startCenterXY: startCenterXY,\n    uDelta: uDelta,\n    w0: w0,\n    u1: u1,\n    S: S,\n    rho: rho,\n    rho2: rho2,\n    r0: r0,\n    r1: r1\n  };\n}\n//# sourceMappingURL=fly-to-viewport.js.map\n};"],
"names":["shadow$provide","global","require","module","exports","getFlyToTransitionParams","startProps","endProps","opts","Object","assign","DEFAULT_OPTS","rho","curve","startZoom","zoom","startCenter","longitude","latitude","startScale","_webMercatorUtils","zoomToScale","endZoom","endCenter","scale","startCenterXY","lngLatToWorld","endCenterXY","uDelta","vec2","sub","w0","Math","max","width","height","w1","u1","length","_u1","EPSILON","rho2","b0","b1","r0","log","sqrt","r1","S","_interopRequireWildcard","defineProperty","value","flyToViewport","t","viewport","_getFlyToTransitionPa","arguments","undefined","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_iterator","VIEWPORT_TRANSITION_PROPS","Symbol","iterator","_step","done","next","key","startValue","endValue","_mathUtils","lerp","err","s","u","cosh","tanh","sinh","scaleIncrement","newZoom","scaleToZoom","newCenterWorld","add","newCenter","worldToLngLat","getFlyToDuration","_opts","screenSpeed","speed","maxDuration","_getFlyToTransitionPa2","duration","Number","isFinite"]
}
